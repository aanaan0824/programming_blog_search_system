<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>\u6211\u4f7f\u7528pymysql\u51fa\u73b0\u4e86\u4ee5\u4e0b\u7684\u9519\u8bef</p>\n<pre><code>python-module\u00a0'pymysql'\u00a0has no attribute\u00a0'connect'</code></pre>\n<p>\u4e00\u51fa\u9519 \u6211\u672c\u80fd\u7684\u60f3\u53bb\u770b\u4e0b\u662f\u4e0d\u662f\u6211\u6ca1\u8fde\u63a5\u6210\u529f \u7136\u540e pip3 install pymysql<br/> \u4e0d\u8981\u8d77import\u7684\u5305\u540d\u4f5c\u4e3a\u6587\u4ef6\u540d\u554a\uff01\uff01\uff01</p>\n<p>\u56e0\u6b64\uff0c\u6211\u603b\u7ed3\u4e86\u4e0bpymysql\u7684\u57fa\u672c\u4f7f\u7528</p>\n<h1>\u4e00\u3001PyMySQL\u4ecb\u7ecd</h1>\n<p>PyMySQL\u662f\u5728 Python3.x \u7248\u672c\u4e2d\u7528\u4e8e\u8fde\u63a5 MySQL \u670d\u52a1\u5668\u7684\u4e00\u4e2a\u5e93\uff0cPython2\u4e2d\u662f\u4f7f\u7528mysqldb\u3002</p>\n<p>PyMySQL\u5b89\u88c5</p>\n<pre><code class=\"language-bash\">pip3 install pymysql</code></pre>\n<p>\u521b\u5efa\u94fe\u63a5\u7684\u57fa\u672c\u4f7f\u7528\u3000</p>\n<pre><code class=\"language-python\"># \u5bfc\u5165pymysql\u6a21\u5757\nimport pymysql\n \n# \u8fde\u63a5database\nconn = pymysql.connect(\n    host=\u201c\u4f60\u7684\u6570\u636e\u5e93\u5730\u5740\u201d,\n    user=\u201c\u7528\u6237\u540d\u201d,password=\u201c\u5bc6\u7801\u201d,\n    database=\u201c\u6570\u636e\u5e93\u540d\u201d,\n    charset=\u201cutf8\u201d)\n \n# \u5f97\u5230\u4e00\u4e2a\u53ef\u4ee5\u6267\u884cSQL\u8bed\u53e5\u7684\u5149\u6807\u5bf9\u8c61\ncursor = conn.cursor()  # \u6267\u884c\u5b8c\u6bd5\u8fd4\u56de\u7684\u7ed3\u679c\u96c6\u9ed8\u8ba4\u4ee5\u5143\u7ec4\u663e\u793a\n# \u5f97\u5230\u4e00\u4e2a\u53ef\u4ee5\u6267\u884cSQL\u8bed\u53e5\u5e76\u4e14\u5c06\u7ed3\u679c\u4f5c\u4e3a\u5b57\u5178\u8fd4\u56de\u7684\u6e38\u6807\n#cursor = conn.cursor(cursor=pymysql.cursors.DictCursor)\n \n# \u5b9a\u4e49\u8981\u6267\u884c\u7684SQL\u8bed\u53e5\nsql = \"\"\"\nCREATE TABLE USER1 (\nid INT auto_increment PRIMARY KEY ,\nname CHAR(10) NOT NULL UNIQUE,\nage TINYINT NOT NULL\n)ENGINE=innodb DEFAULT CHARSET=utf8;  #\u6ce8\u610f\uff1acharset='utf8' \u4e0d\u80fd\u5199\u6210utf-8\n\"\"\"\n \n# \u6267\u884cSQL\u8bed\u53e5\ncursor.execute(sql)\n \n# \u5173\u95ed\u5149\u6807\u5bf9\u8c61\ncursor.close()\n \n# \u5173\u95ed\u6570\u636e\u5e93\u8fde\u63a5\nconn.close()</code></pre>\n<p>\u5728\u5efa\u94fe\u63a5\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u505a\u597d\u4e00\u4e9b\u524d\u671f\u5de5\u4f5c\uff1a\u5efa\u5e93\u5efa\u8868</p>\n<p>\u4e0b\u9762\u4f8b\u5b50\u4e2d\u00a0 \u6211\u5c06\u4f7f\u7528\u6211\u5efa\u597d\u7684\u5e93\uff1adb= 'xing'</p>\n<p>\u5efa\u597d\u7684userinfo\u8868</p>\n<p><img alt=\"\" src=\"image\\7e5fe7be59031e66827ce1cb66cfa33c.png\"/></p>\n<p>\u7b80\u5355\u9a8c\u8bc1\u529f\u80fd</p>\n<pre><code class=\"language-python\"># pip3 install pymysql\nimport pymysql\n \nuser=input('user&gt;&gt;: ').strip()\npwd=input('password&gt;&gt;: ').strip()\n \n# \u5efa\u7acb\u94fe\u63a5\nconn=pymysql.connect(\n    host='192.168.0.103',#\u6211\u7684IP\u5730\u5740\n    port=3306,   # \u4e0d\u662f\u5b57\u7b26\u4e32\u4e0d\u9700\u8981\u52a0\u5f15\u53f7\u3002\n    user='root',\n    password='123',\n    db='xing',\n    charset='utf8'\n)\n \n# \u62ff\u5230\u6e38\u6807\ncursor=conn.cursor()\n \n# \u6267\u884csql\u8bed\u53e5\n \nsql='select * from userinfo where user = \"%s\" and pwd=\"%s\"' % (user, pwd)\nprint(sql)\nres=cursor.execute(sql)\nprint(res)\n \ncursor.close()\nconn.close()\n \n# \u8fdb\u884c\u5224\u65ad\nif res:\n    print('\u767b\u5f55\u6210\u529f')\nelse:\n    print('\u767b\u5f55\u5931\u8d25')</code></pre>\n<p>\u8f93\u51fa\u7ed3\u679c\uff1a</p>\n<p><img alt=\"\" src=\"image\\b1e9928a691c265454e9add1df3559b0.png\"/></p>\n<p>\u4f46\u662f\u4f1a\u6709\u4ee5\u4e0b\u95ee\u9898\uff1a\u8f93\u5165\u7684SQL \u8bed\u53e5\u88ab\u6ce8\u91ca\u4e86</p>\n<p><img alt=\"\" src=\"image\\e4f2b2710522a44c78d12065c614ef0f.png\"/></p>\n<p>\u6216\u8005\u662f</p>\n<p><img alt=\"\" src=\"image\\0de091e1795bb42930b4d4ebd9aa28b8.png\"/></p>\n<p>\u00a0</p>\n<p>\u8fd9\u4e2a\u65f6\u5019\u4e4b\u540e \u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u89e3\u51b3</p>\n<pre><code class=\"language-python\">execute\u5e2e\u6211\u4eec\u505a\u5b57\u7b26\u4e32\u62fc\u63a5\n \n# \u5c06\u4ee5\u4e0b\u4ee3\u7801\nsql=\"select * from userinfo where name='%s' and password='%s'\" %(user,pwd)\nres=cursor.execute(sql)\n# \u6539\u4e3a\nsql=\"select * from userinfo where name=%s and password=%s\" #%s\u9700\u8981\u53bb\u6389\u5f15\u53f7\uff0cpymysql\u4f1a\u81ea\u52a8\u52a0\u4e0a\n \nres=cursor.execute(sql,[user,pwd])</code></pre>\n<p>\u00a0\u8f93\u51fa\u7ed3\u679c\uff1a</p>\n<p><img alt=\"\" src=\"image\\b577df2e913d65583820eaec63de7dfa.png\"/></p>\n<p><img alt=\"\" src=\"image\\1cc45a7d7442b0d8abc889e16e059ebe.png\"/></p>\n<h1>\u4e8c\u3001\u589e\u5220\u6539\u67e5\u64cd\u4f5c</h1>\n<h3>\u6dfb\u52a0\u591a\u6761\u6570\u636e</h3>\n<pre><code class=\"language-python\">import pymysql\n \nconn = pymysql.connect(\n    host='192.168.0.103',\n    port=3306,\n    user='root',\n    password='123',\n    database='xing',\n    charset='utf8'\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor()\n \n# \u5b9a\u4e49\u8981\u6267\u884c\u7684sql\u8bed\u53e5\nsql = 'insert into userinfo(user,pwd) values(%s,%s);'\ndata = [\n    ('july', '147'),\n    ('june', '258'),\n    ('marin', '369')\n]\n# \u62fc\u63a5\u5e76\u6267\u884csql\u8bed\u53e5\ncursor.executemany(sql, data)\n \n# \u6d89\u53ca\u5199\u64cd\u4f5c\u8981\u6ce8\u610f\u63d0\u4ea4\nconn.commit()\n \n# \u5173\u95ed\u8fde\u63a5\ncursor.close()\nconn.close()</code></pre>\n<p>\u8f93\u51fa\u7ed3\u679c\uff1a</p>\n<p><img alt=\"\" src=\"image\\72301d899514be3015fe38cf8cfdc284.png\"/></p>\n<h3>\u63d2\u5165\u5355\u6761\u6570\u636e</h3>\n<pre><code class=\"language-python\">import pymysql\nconn =pymysql.connect(\n    host ='192.168.0.103',\n    port = 3306,\n    user = 'root',\n    password ='123',\n    database ='xing',\n    charset ='utf8'\n)\ncursor =conn.cursor()  #\u83b7\u53d6\u4e00\u4e2a\u5149\u6807\nsql ='insert into userinfo (user,pwd) values (%s,%s);'\n \nname = 'wuli'\npwd = '123456789'\ncursor.execute(sql, [name, pwd])\nconn.commit()\ncursor.close()\nconn.close()</code></pre>\n<p>\u8f93\u51fa\u7ed3\u679c\uff1a</p>\n<p><img alt=\"\" src=\"image\\f65edc3f1164111ee2d3b50cbbe4b235.png\"/>\u3000</p>\n<h3>\u83b7\u53d6\u6700\u65b0\u63d2\u5165\u6570\u636e \uff08\u6700\u540e\u4e00\u6761\uff09</h3>\n<pre><code class=\"language-python\">import pymysql\n \n# \u5efa\u7acb\u8fde\u63a5\nconn = pymysql.connect(\n    host=\"192.168.0.103\",\n    port=3306,\n    user=\"root\",\n    password=\"123\",\n    database=\"xing\",\n    charset=\"utf8\"\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor()\n# \u5b9a\u4e49\u5c06\u8981\u6267\u884c\u7684SQL\u8bed\u53e5\nsql = \"insert into userinfo (user, pwd) values (%s, %s);\"\nname = \"wuli\"\npwd = \"123456789\"\n# \u5e76\u6267\u884cSQL\u8bed\u53e5\ncursor.execute(sql, [name, pwd])\n# \u6d89\u53ca\u5199\u64cd\u4f5c\u6ce8\u610f\u8981\u63d0\u4ea4\nconn.commit()\n# \u5173\u95ed\u8fde\u63a5\n \n# \u83b7\u53d6\u6700\u65b0\u7684\u90a3\u4e00\u6761\u6570\u636e\u7684ID\nlast_id = cursor.lastrowid\nprint(\"\u6700\u540e\u4e00\u6761\u6570\u636e\u7684ID\u662f:\", last_id)\n \ncursor.close()\nconn.close()</code></pre>\n<p>\u8f93\u51fa\u7ed3\u679c\u4e3a\uff1a\uff08\u56e0\u4e3a\u6211\u4e4b\u524d\u63d2\u5165\u591a\u6761\u8bb0\u5f55\u65f6\uff0c\u591a\u8fd0\u884c\u4e86\u4e24\u6b21\uff0c\u6240\u6709\u7ed3\u679c\u4e0b\u9762\u7684\u8fd9\u4e2a\uff09</p>\n<p><img alt=\"\" src=\"image\\cf8481e4f9ed424bdd7a0ac599923cee.png\"/></p>\n<p><img alt=\"\" src=\"image\\b97c947c6691cf965a06c5d5eb993aa3.png\"/></p>\n<h3>\u5220\u9664\u64cd\u4f5c</h3>\n<pre><code class=\"language-python\">import pymysql\n \n# \u5efa\u7acb\u8fde\u63a5\nconn = pymysql.connect(\n    host=\"192.168.0.103\",\n    port=3306,\n    user=\"root\",\n    password=\"123\",\n    database=\"xing\",\n    charset=\"utf8\"\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor()\n# \u5b9a\u4e49\u5c06\u8981\u6267\u884c\u7684SQL\u8bed\u53e5\nsql = \"delete from userinfo where user=%s;\"\nname = \"june\"\n# \u62fc\u63a5\u5e76\u6267\u884cSQL\u8bed\u53e5\ncursor.execute(sql, [name])\n# \u6d89\u53ca\u5199\u64cd\u4f5c\u6ce8\u610f\u8981\u63d0\u4ea4\nconn.commit()\n# \u5173\u95ed\u8fde\u63a5\n \ncursor.close()\nconn.close()</code></pre>\n<p>\u8f93\u51fa\u7ed3\u679c\u662f\uff1a</p>\n<p><img alt=\"\" src=\"image\\52faa9124d883b597e1bd34390c4910b.png\"/></p>\n<h3>\u66f4\u6539\u6570\u636e</h3>\n<pre><code class=\"language-python\">import pymysql\n \n# \u5efa\u7acb\u8fde\u63a5\nconn = pymysql.connect(\n    host=\"192.168.0.103\",\n    port=3306,\n    user=\"root\",\n    password=\"123\",\n    database=\"xing\",\n    charset=\"utf8\"\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor()\n# \u5b9a\u4e49\u5c06\u8981\u6267\u884c\u7684SQL\u8bed\u53e5\nsql = \"update userinfo set pwd=%s where user=%s;\"\n# \u62fc\u63a5\u5e76\u6267\u884cSQL\u8bed\u53e5\ncursor.execute(sql, [\"july\", \"july\"])\n \n# \u6d89\u53ca\u5199\u64cd\u4f5c\u6ce8\u610f\u8981\u63d0\u4ea4\nconn.commit()\n \n# \u5173\u95ed\u8fde\u63a5\ncursor.close ()\nconn.close ()</code></pre>\n<h1><img alt=\"\" src=\"image\\aa33ca6e2a2258b930512901db6d2574.png\"/></h1>\n<h1>\u4e09\u3001\u67e5\u8be2\u6570\u636e</h1>\n<p>fetch\u6570\u636e</p>\n<pre><code class=\"language-python\">import pymysql\n \nconn = pymysql.connect (\n    host='192.168.0.103',\n    port=3306,\n    user='root',\n    password='123',\n    database='xing',\n    charset='utf8'\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor(cursor=pymysql.cursors.DictCursor)  # \u8fd4\u56de\u5b57\u5178\u6570\u636e\u7c7b\u578b\n \n# \u5b9a\u4e49\u5c06\u8981\u6267\u884c\u7684sql\u8bed\u53e5\nsql = 'select user,pwd from userinfo;'\n# \u62fc\u63a5\u5e76\u6267\u884csql\u8bed\u53e5\ncursor.execute(sql)\n \n# \u53d6\u5230\u67e5\u8be2\u7ed3\u679c\nret1 = cursor.fetchone()  # \u53d6\u4e00\u6761\nret2 = cursor.fetchmany(3)  # \u53d6\u4e09\u6761\nret3 = cursor.fetchone()  # \u53d6\u4e00\u6761\n \ncursor.close()\nconn.close()\n \nprint(ret1)\nprint(ret2)\nprint(ret3)\u3000</code></pre>\n<pre><code class=\"language-python\"># \u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\ncursor.fetchmany(3)\n# \u5149\u6807\u6309\u7edd\u5bf9\u4f4d\u7f6e\u79fb\u52a81\ncursor.scroll(1, mode=\"absolute\")\n# \u5149\u6807\u6309\u7167\u76f8\u5bf9\u4f4d\u7f6e(\u5f53\u524d\u4f4d\u7f6e)\u79fb\u52a81\ncursor.scroll(1, mode=\"relative\")</code></pre>\n<pre>\n\u00a0</pre>\n<h3>\u6570\u636e\u56de\u6eda</h3>\n<pre><code class=\"language-python\">import pymysql\n \n# \u5efa\u7acb\u8fde\u63a5\nconn = pymysql.connect(\n    host=\"192.168.0.103\",\n    port=3306,\n    user=\"root\",\n    password=\"123\",\n    database=\"xing\",\n    charset=\"utf8\"\n)\n# \u83b7\u53d6\u4e00\u4e2a\u5149\u6807\ncursor = conn.cursor()\n# \u5b9a\u4e49\u5c06\u8981\u6267\u884c\u7684SQL\u8bed\u53e5\nsql1 = \"insert into userinfo (user, pwd) values (%s, %s);\"\nsql2 = \"insert into hobby (id, hobby) values (%s,%s);\"\nuser = \"july1\"\npwd = \"july1\"\nid = \"\u6211\u662f\u9519\u8bef\u7684id\"  #id = \"3\"\nhobby = \"\u6253\u6e38\u620f\"\ntry:\n    # \u62fc\u63a5\u5e76\u6267\u884cSQL\u8bed\u53e5\n    cursor.execute(sql1, [user, pwd])\n    print(sql1)\n    cursor.execute(sql2, [id, hobby])  # \u62a5\u9519\u7684SQL\u8bed\u53e5\n    # \u6d89\u53ca\u5199\u64cd\u4f5c\u6ce8\u610f\u8981\u63d0\u4ea4\n    conn.commit()\nexcept Exception as e:\n    print(str(e))\n    # \u6709\u5f02\u5e38\u5c31\u56de\u6eda\n    conn.rollback()\n \n# \u5173\u95ed\u8fde\u63a5\ncursor.close()\nconn.close()</code></pre>\n<p><img alt=\"\" src=\"image\\d071f623f281764720f888ca2383d024.png\"/></p>\n</div>\n</div>