<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_1">⚽前言</a></li><li><a href="#_72">⚽模拟实现</a></li><li><ul><li><a href="#_76">⭐构造函数</a></li><li><a href="#_109">⭐拷贝构造</a></li><li><a href="#_134">⭐赋值运算符重载</a></li><li><a href="#_153">⭐析构函数</a></li><li><a href="#sizecapacity_166">⭐计算size和capacity</a></li><li><a href="#_190">⭐重载[]</a></li><li><a href="#c_str_211">⭐c_str</a></li><li><a href="#clear_222">⭐clear</a></li><li><a href="#_237">⭐迭代器区间</a></li><li><a href="#_270">⭐增</a></li><li><ul><li><a href="#reserve_272">⚡reserve函数</a></li><li><a href="#resize_294">⚡resize函数</a></li><li><a href="#push_back_345">⚡push_back尾插</a></li><li><a href="#append_360">⚡append字符串追加</a></li><li><a href="#operator_375">⚡operator+=</a></li><li><a href="#insert_394">⚡insert函数</a></li></ul>
</li><li><a href="#_439">⭐删</a></li><li><a href="#_479">⭐查</a></li><li><a href="#_509">⭐改</a></li><li><a href="#_513">⭐重载&lt;&lt;和&gt;&gt;</a></li></ul>
</li><li><a href="#_550">⚽源码</a></li></ul>
</div>
<p></p>
<h1><a id="_1"></a>⚽前言</h1>
<p>C标准库中也提供了一系列的str库函数，但不符合oop思想（核心：封装、继承、多态），所以C++引入了string类，在OJ中很多有关字符串的题目都是以string类形式出现的，下面我们来深入了解一下</p>
<blockquote>
<p><font color="#37cfd8" size="3">string类是由STL中类模板basic_string实例化的具体的类</font></p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6eb80874aebe49b5acbd2933f94beaa7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4d2d489aae8d47538819c9220e346fcb.png"/></p>
<p>因为字符类型不只是有<code>char</code>，还有<code>char16_t</code>，<code>wchar_t</code>等<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ae00f162d74945faa64f049eeb487785.png"/><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/3789d04c7b654a6b8958116186a766c3.png"/><br/></p>
<blockquote>
<p><font color="#00BFFF" size="3">string类可以理解为一个动态增长的顺序表，底层是一块连续的数组，当<code>字符串长度小于16</code>时在栈上申请空间，之后才在堆上申请空间</font></p>
</blockquote>
<p>我们可以通过一个简单的测试证明</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//s1的字符串长度小于16</span>
	string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"2222222222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//s2的字符串长度大于16</span>
	string <span class="token function">s2</span><span class="token punctuation">(</span><span class="token string">"222222222222222222"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>s1的字符串是存在数组_Buf中的<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/01a3987d29d844319408e17e231567ac.png"/>s2的字符串是在堆上开辟空间由_Ptr指针维护的<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c4d79f9c6d694a538d47e5ec202ca2f7.png"/>且我们计算两个对象的大小都是28<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7c866669d53044e8bd87709aa372a906.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16"/>所以string类的大致框架如下：</p>
<pre><code class="prism language-cpp"><span class="token keyword">class</span> <span class="token class-name">string</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//四个成员变量大小刚好是28</span>
	<span class="token keyword">char</span> _Buffer<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//长度小于16直接存在buffer数组中</span>
	<span class="token keyword">char</span><span class="token operator">*</span> _Ptr<span class="token punctuation">;</span>			<span class="token comment">//长度大于16再从堆上申请空间</span>
	size_t _Mysize<span class="token punctuation">;</span>		<span class="token comment">//存储的有效字符个数</span>
	size_t _Myres<span class="token punctuation">;</span>		<span class="token comment">//存储有效字符的容量</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p><font color="#00BFFF" size="4">同时string也不是直接从堆上申请空间的，避免频繁从堆上申请空间，底层是通过内存池申请的，我们简易模拟实现直接在堆上申请，模拟实现的大致框架如下：</font></p>
</blockquote>
<pre><code class="prism language-cpp"><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">T</span><span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">basic_string</span>
<span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">//去掉了buffer，统一在堆上申请空间</span>
	<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
    size_t size<span class="token punctuation">;</span>	<span class="token comment">//有效字符个数</span>
    size_t capacity<span class="token punctuation">;</span>	<span class="token comment">//存储有效字符容量</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">typedef</span> basic_string<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> string<span class="token punctuation">;</span>
</code></pre>
<h1><a id="_72"></a>⚽模拟实现</h1>
<p>由于库中有的函数会重载很多版本，所以模拟实现时只会重载一些常用的版本</p>
<h2><a id="_76"></a>⭐构造函数</h2>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5dff4d2ac19f4c89a59e0764d21d0619.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> king	<span class="token comment">//由于会和std中的string冲突，所以我们在自己的命名空间实现</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>	<span class="token comment">//采用缺省参数，模拟实现上面的1和4</span>
			<span class="token operator">:</span><span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span>_size<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
		size_t _size<span class="token punctuation">;</span>		<span class="token comment">//有效字符个数</span>
		size_t _capacity<span class="token punctuation">;</span>	<span class="token comment">//只算存储有效字符的容量，不计入'\0',new的时候直接+1</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_109"></a>⭐拷贝构造</h2>
<p>拷贝构造肯定是深拷贝</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/846b402f4ed84433a98d7773ed49183a.gif#pic_center"/></p>
<pre><code class="prism language-cpp"><span class="token comment">//复用构造函数初始化tmp，然后交换*this与tmp，由于tmp只在当前作用域，出了作用域会调用析构函数，所以将_str先初始化为nullptr</span>
<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
 	std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>		
<span class="token punctuation">}</span>
<span class="token comment">//s1(s2)</span>
<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
 <span class="token operator">:</span><span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_134"></a>⭐赋值运算符重载</h2>
<pre><code class="prism language-cpp"><span class="token comment">//s1=s2</span>
string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
         <span class="token comment">//同样玩的是拷贝构造的套路，复用拷贝构造初始化tmp</span>
        <span class="token comment">//然后交换*this与tmp，tmp同样会调用析构函数释放原来*this维护的空间</span>
		string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_153"></a>⭐析构函数</h2>
<pre><code class="prism language-cpp"><span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>	<span class="token comment">//释放空间</span>
	_str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span> <span class="token comment">//置空</span>
	_size <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//置0</span>
<span class="token punctuation">}</span>		
</code></pre>
<h2><a id="sizecapacity_166"></a>⭐计算size和capacity</h2>
<p>这里size和capacity肯定是不可以直接改动的，所以成员函数要用const修饰</p>
<ul><li> <p>size：返回字符串有效字符长度（个数）</p> </li><li> <p>capacity：返回可存储有效字符的空间总大小</p> </li></ul>
<pre><code class="prism language-cpp"><span class="token keyword">const</span> size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><font size="3">其实在STL出来之前就已经有string类了，所以最开始使用的是<code>lenth()</code>而不是<code>size()</code>， size()与length()方法底层实现原理完全相同，引入size()的原因是为了与其他容器像vector、list的接口保持一 致，一般情况下基本都是用size()。</font></p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8aa14d690c664a08997e269ba8afb90f.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/111bc61e9ec044698ef1e273960b1fe2.png#pic_center"/></p>
<h2><a id="_190"></a>⭐重载[]</h2>
<ul><li>功能：返回pos位置的字符</li></ul>
<p>重载了两个版本，const对象不可被修改，而非const对象可以通过[]修改对应的字符</p>
<pre><code class="prism language-cpp"><span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="c_str_211"></a>⭐c_str</h2>
<ul><li>功能：返回指向字符数组的指针</li></ul>
<pre><code class="prism language-cpp"><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="clear_222"></a>⭐clear</h2>
<ul><li>功能：清空有效字符</li></ul>
<pre><code class="prism language-c++">//这里不会讲capacity置空，以空间换时间
void clear()
{
	_size = 0;
	_str[0] = '\0';
}
</code></pre>
<h2><a id="_237"></a>⭐迭代器区间</h2>
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span>
iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>写到这里我们就可以验证范围for的底层就是一个迭代器</p>
<p>在没有修改begin和end之前，范围for是可以跑起来的</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/abf190e50d02438fb0eaf480799f1d61.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>将bengin和end修改后，范围for就失效了</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7245bd1ff2074a529413343e53a6bece.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<h2><a id="_270"></a>⭐增</h2>
<h3><a id="reserve_272"></a>⚡reserve函数</h3>
<ul><li>功能：为字符串预留空间，如果给的n小于等于capacity则不处理，n大于*capacity，就改变capacity的大小</li></ul>
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
    <span class="token comment">//只处理大于size的</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">//为'\0'预留空间</span>
		<span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
		_str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
        <span class="token comment">//这里是将capacity直接换成了给定的n，与库中的有所区别，大家下去可以验证一下库中是如何处理的</span>
		_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="resize_294"></a>⚡resize函数</h3>
<ul><li>功能：将有效字符的个数该成n个，多出的空间用字符c填充，默认填充’\0’</li></ul>
<p>情况一：n&lt;=_size，将_size变为n</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d629bbe0bcc048438277b67a56a04675.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_17,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<br/>
<br/> 情况二：_size &lt; n &lt;= _capaicty，将n-_size个空间填充为ch 
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/28f925fa3e2d4706a39ecef91624cfb6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_17,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<br/>
<br/>
<p>情况三：n &gt; _capacity 扩容</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4287665e401d42c9a37eb39558636cd4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_19,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<br/>
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
   <span class="token comment">// n小于等于size时，只保留n个字符</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_size <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    <span class="token comment">//n大于size时</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>	
        <span class="token comment">//大于capacity就要扩容</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">reserve</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//复用reserve函数</span>
		<span class="token punctuation">}</span>
        <span class="token function">memset</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> n <span class="token operator">-</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
		_size <span class="token operator">=</span> n<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>	<span class="token comment">//最后添加'\0'结尾</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="push_back_345"></a>⚡push_back尾插</h3>
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">==</span> _size<span class="token punctuation">)</span><span class="token comment">//判断是否需要扩容</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>_capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//还需要判断_capacity是否为0</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
	<span class="token operator">++</span>_size<span class="token punctuation">;</span>
	_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="append_360"></a>⚡append字符串追加</h3>
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//计算需要追加的字符串长度</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span> len <span class="token operator">+</span> _size<span class="token punctuation">)</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>len <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//扩容指定长度，因为len的长度不确定，所以无法直接扩2倍</span>
	<span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> 
	_size <span class="token operator">=</span> len <span class="token operator">+</span> _size<span class="token punctuation">;</span>		
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="operator_375"></a>⚡operator+=</h3>
<p>我们一般+=用 的比较多，不管是字符还是字符串都可以用</p>
<pre><code class="prism language-cpp"><span class="token comment">//直接复用上面的push_back和append函数即可</span>
string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="insert_394"></a>⚡insert函数</h3>
<ul><li>功能：指定位置插入</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9f7a78f261174ed59706909994ac2c97.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_17,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/></p>
<pre><code class="prism language-cpp"><span class="token comment">//从pos位置插入n个字符ch</span>
string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//断言pos最多只能在\0位置插入</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//新的有效字符个数</span>
	size_t end <span class="token operator">=</span> _size <span class="token operator">+</span> n<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> n<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end  <span class="token operator">-</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token operator">--</span>end<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">memset</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	_size <span class="token operator">+=</span> n<span class="token punctuation">;</span>	<span class="token comment">//	更新_size</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//从pos位置插入字符串str</span>
string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>		
    <span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> len <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
		<span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
	size_t end <span class="token operator">=</span> _size <span class="token operator">+</span> len<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		_str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end <span class="token operator">-</span> len<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token operator">--</span>end<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">strncpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
	_size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_439"></a>⭐删</h2>
<p>功能：从pos位置删除len个字符</p>
<p>这里的npos是一个静态的成员常量，npos为42亿9千万，是_size的最大值，C++不认为一个字符串会超过这么大，而len默认是npos，意为删除string对象从pos位置开始的所有字符</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/04470cbbbf454870a80e21b1a1dc4d18.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5a-E5LiA54mH5rW357uZ5L2g,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/></p>
<pre><code class="prism language-cpp"><span class="token keyword">namespace</span> king
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		string<span class="token operator">&amp;</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//断言pos必须要小于_size</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> npos <span class="token operator">||</span> len <span class="token operator">+</span> pos <span class="token operator">&gt;=</span> _size<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_size <span class="token operator">=</span> pos<span class="token punctuation">;</span>
				_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
				<span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> _str <span class="token operator">+</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
		size_t size<span class="token punctuation">;</span>
		size_t capacity<span class="token punctuation">;</span>
		<span class="token keyword">static</span> <span class="token keyword">const</span> size_t npos<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> size_t string<span class="token double-colon punctuation">::</span>npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//将npos初始化为-1</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_479"></a>⭐查</h2>
<p>查找不到时返回npos</p>
<pre><code class="prism language-cpp"><span class="token comment">//从字符串pos位置开始往后找字符c，返回该字符在字符串中的位置</span>
size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> i<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//从字符串pos位置开始往后找匹配的字符串str，返回匹配的字符串的首位置</span>
size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		<span class="token keyword">return</span> p <span class="token operator">-</span> _str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>还有rfind函数从字符串pos位置从后往前找，大家有兴趣也可以实现一下</p>
<h2><a id="_509"></a>⭐改</h2>
<p>修改的话，上面重载[]或是用迭代器就可以修改指定字符</p>
<h2><a id="_513"></a>⭐重载&lt;&lt;和&gt;&gt;</h2>
<p>如果重载成成员函数，隐藏的this指针要是左操作数，调用时只能这样调用，看起来非常别扭，所以将这里的两个重载函数定义为全局的</p>
<pre><code class="prism language-cpp">string <span class="token function">s</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s <span class="token operator">&gt;&gt;</span> cin<span class="token punctuation">;</span>
s <span class="token operator">&lt;&lt;</span> cout<span class="token punctuation">;</span>
</code></pre>
<pre><code class="prism language-cpp">ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		out <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//out &lt;&lt; s.c_str() &lt;&lt; endl;		</span>
	<span class="token keyword">return</span> out<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	
	s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//先清空s的有效字符</span>
	<span class="token keyword">char</span> ch <span class="token operator">=</span> cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//每次读取一个字符</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token char">'\n'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token char">' '</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		s <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
		ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> in<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre>
<h1><a id="_550"></a>⚽源码</h1>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">namespace</span> king
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">class</span> <span class="token class-name">string</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token keyword">typedef</span> <span class="token keyword">char</span><span class="token operator">*</span> iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> const_iterator<span class="token punctuation">;</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_size</span><span class="token punctuation">(</span><span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span> <span class="token function">_capacity</span><span class="token punctuation">(</span>_size<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>_size <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token function">strcpy</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_str<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_size<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_capacity<span class="token punctuation">,</span> s<span class="token punctuation">.</span>_capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>		
		<span class="token punctuation">}</span>
		<span class="token comment">//s1(s2)</span>
		<span class="token function">string</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_str</span><span class="token punctuation">(</span><span class="token keyword">nullptr</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//s1=s2</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">!=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				string <span class="token function">tmp</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> size_t <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> size_t <span class="token function">capacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _capacity<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> _str<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			_str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _str<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> _str <span class="token operator">+</span> _size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">reserve</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">char</span><span class="token operator">*</span> tmp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">char</span><span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token function">strcpy</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> _str<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
				_str <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
				_capacity <span class="token operator">=</span> n<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span>size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_size <span class="token operator">=</span> n<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token function">reserve</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">memset</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> n <span class="token operator">-</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
				_size <span class="token operator">=</span> n<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">push_back</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">==</span> _size<span class="token punctuation">)</span>
				<span class="token function">reserve</span><span class="token punctuation">(</span>_capacity <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">4</span> <span class="token operator">:</span> _capacity <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> ch<span class="token punctuation">;</span>
			<span class="token operator">++</span>_size<span class="token punctuation">;</span>
			_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">void</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_capacity <span class="token operator">&lt;</span> len <span class="token operator">+</span> _size<span class="token punctuation">)</span>
				<span class="token function">reserve</span><span class="token punctuation">(</span>len <span class="token operator">+</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> _size<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_size <span class="token operator">=</span> len <span class="token operator">+</span> _size<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">push_back</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		string<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">+=</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">append</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> pos<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> _str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> i<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		size_t <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token function">strstr</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> npos<span class="token punctuation">;</span>
			<span class="token keyword">else</span>
				<span class="token keyword">return</span> p <span class="token operator">-</span> _str<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> size_t n<span class="token punctuation">,</span> <span class="token keyword">char</span> ch<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> n <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
				<span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//新的有效字符个数</span>
			size_t end <span class="token operator">=</span> _size <span class="token operator">+</span> n<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> n<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end  <span class="token operator">-</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token operator">--</span>end<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token function">memset</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_size <span class="token operator">+=</span> n<span class="token punctuation">;</span>	<span class="token comment">//	更新_size</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		string<span class="token operator">&amp;</span> <span class="token function">insert</span><span class="token punctuation">(</span>size_t pos<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;=</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			size_t len <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_size <span class="token operator">+</span> len <span class="token operator">&gt;</span> _capacity<span class="token punctuation">)</span>
				<span class="token function">reserve</span><span class="token punctuation">(</span>_size <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			size_t end <span class="token operator">=</span> _size <span class="token operator">+</span> len<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;=</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_str<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">=</span> _str<span class="token punctuation">[</span>end <span class="token operator">-</span> len<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token operator">--</span>end<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token function">strncpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> str<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			_size <span class="token operator">+=</span> len<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		string<span class="token operator">&amp;</span> <span class="token function">erase</span><span class="token punctuation">(</span>size_t pos <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> size_t len <span class="token operator">=</span> npos<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">assert</span><span class="token punctuation">(</span>pos <span class="token operator">&lt;</span> _size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> npos <span class="token operator">||</span> len <span class="token operator">+</span> pos <span class="token operator">&gt;=</span> _size<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_size <span class="token operator">=</span> pos<span class="token punctuation">;</span>
				_str<span class="token punctuation">[</span>_size<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
				<span class="token function">strcpy</span><span class="token punctuation">(</span>_str <span class="token operator">+</span> pos<span class="token punctuation">,</span> _str <span class="token operator">+</span> pos <span class="token operator">+</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token operator">~</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">delete</span><span class="token punctuation">[</span><span class="token punctuation">]</span> _str<span class="token punctuation">;</span>
			_str <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">;</span>
			_size <span class="token operator">=</span> _capacity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>		
	<span class="token keyword">private</span><span class="token operator">:</span>
		<span class="token keyword">char</span><span class="token operator">*</span> _str<span class="token punctuation">;</span>
		size_t _size<span class="token punctuation">;</span>
		size_t _capacity<span class="token punctuation">;</span>	<span class="token comment">//只算有效字符个数，不计入'\0',new的时候直接+1</span>
		<span class="token keyword">static</span> <span class="token keyword">const</span> size_t npos<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> size_t string<span class="token double-colon punctuation">::</span>npos <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	
	<span class="token comment">//cout &lt;&lt; s1 &lt;&lt; s2;</span>
	ostream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>ostream<span class="token operator">&amp;</span> out<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
		<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			out <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//out &lt;&lt; s.c_str() &lt;&lt; endl;		当对象中有空白字符时无法捕获如string s("he \l),所以要逐字符输出</span>
		<span class="token keyword">return</span> out<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> in<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> s<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
		s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">char</span> ch <span class="token operator">=</span> cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>ch <span class="token operator">!=</span> <span class="token char">'\n'</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token char">' '</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			s <span class="token operator">+=</span> ch<span class="token punctuation">;</span>
			ch <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> in<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">void</span> <span class="token function">Test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		string <span class="token function">s2</span><span class="token punctuation">(</span><span class="token string">"world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		string <span class="token function">s3</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1 <span class="token operator">=</span> s2<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		string<span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		it <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token operator">*</span>it <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		it <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>

			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"abcdefg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token char">'@'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"** **"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s1 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		string s2<span class="token punctuation">;</span>
		cin <span class="token operator">&gt;&gt;</span> s2<span class="token punctuation">;</span>
		cout <span class="token operator">&lt;&lt;</span> s2 <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token char">'x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1 <span class="token operator">+=</span> <span class="token char">'#'</span><span class="token punctuation">;</span>
		s1 <span class="token operator">+=</span> <span class="token string">"$$$"</span><span class="token punctuation">;</span>
 		size_t ret<span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token char">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"abcdefg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		size_t ret <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"cde"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token char">'@'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"ddd#"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"ssss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s1<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">void</span> <span class="token function">Test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
		string <span class="token function">s1</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		string<span class="token double-colon punctuation">::</span>iterator it <span class="token operator">=</span> s1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> s1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
			<span class="token operator">++</span>it<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> e <span class="token operator">:</span> s1<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> e <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>	

	king<span class="token double-colon punctuation">::</span><span class="token function">Test4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><strong><font color="#37cfd8" size="4">以上就是string类的模拟实现了，我们模拟了一些常用的函数，模拟实现有利于我们了解string类，同时在学习其他容器时会方便很多，希望我的文章对你有所帮助，欢迎👍点赞 ，📝评论，🌟关注，⭐️收藏</font></strong></p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/892575a7f02d45eb86d2fad798270778.gif#pic_center"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>