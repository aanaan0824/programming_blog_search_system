<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p> <img alt="" height="109" src="image\451dfef5a53e4c94a3ecbfb02d167973.png" width="286"/>  â€‹â€‹â€‹â€‹â€‹â€‹ ğŸ¤£ çˆ†ç¬‘æ•™ç¨‹ ğŸ‘‰ <a href="https://blog.csdn.net/weixin_50502862/category_11602059.html" title="ã€ŠC++è¦ç¬‘ç€å­¦ã€‹">ã€ŠC++è¦ç¬‘ç€å­¦ã€‹</a> ğŸ‘ˆ ç«é€Ÿè®¢é˜…<strong>  </strong>ğŸ”¥</p>
<p><img alt="" height="123" src="image\32974baa747043f9907e5bbd13639957.png" width="679"/></p>
<p><img alt="" height="50" src="image\c52b4035e4864f4ba6cbbd9070bc53cd.png" width="324"/>  <strong> æœ¬ç¯‡åšå®¢å…¨ç«™çƒ­æ¦œæ’åï¼š<span style="color:#be191c;">2</span></strong></p>
<p></p>
<p><strong>ğŸ’­ å†™åœ¨å‰é¢</strong></p>
<p><img alt="" height="110" src="https://img-blog.csdnimg.cn/0ed16f946b2a44dc9e3bc89510902c12.gif" width="180"/> æœ¬ç« å°†æ­£å¼ä»‹ç»æ·±æµ…æ‹·è´ï¼Œåœ¨æ¨¡æ‹Ÿå®ç° string çš„åŒæ—¶å¸¦ç€å»ç†è§£æ·±æµ…æ‹·è´ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿå®ç° stringç±»ä¸æ˜¯ä¸ºäº†é€ æ›´å¥½çš„è½®å­ï¼Œè€Œæ˜¯ä¸ºäº†å»å­¦ä¹ å®ƒï¼Œç†è§£å®ƒçš„æœ¬è´¨ï¼ä½ è‡ªå·±é€ ä¸€æ¬¡ï¼Œå¿ƒé‡Œä¼šæ›´æ¸…æ¥šï¼Œä¹Ÿæœ‰åˆ©äºåŠ æ·±å¯¹ string çš„ç†è§£ã€‚</p>
<p></p>
<hr/>
<h2 id="%E2%85%A0.%C2%A0%20%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D">â… .  æ·±æµ…æ‹·è´</h2>
<h3 id="0x00%20%E5%BC%95%E5%85%A5%EF%BC%9A">0x00 å¼•å…¥ï¼š</h3>
<p><img alt="" height="41" src="image\0b8acaba58854fa78391a2d4f49e38f0.png" width="49"/> æˆ‘ä»¬å…ˆæ¥å®ç° string çš„æ„é€ å’Œææ„ï¼š</p>
<p>ğŸ’¬ string.h</p>
<pre><code class="language-cpp">namespace chaos {      // å‘½åç©ºé—´
	class string {   
	public:
		string(const char* str) {
            // ...
		}
		~string() {
            // ...
		}

	private:
		char* _str;
	};
}</code></pre>
<p>è¿™é‡Œä¸ºäº†å’ŒåŸæœ‰çš„<span style="color:#4da8ee;"> string </span>è¿›è¡ŒåŒºåˆ†ï¼Œæˆ‘ä»¬æä¸€ä¸ªå‘½åç©ºé—´ç»™å®ƒä»¬æ‹¬èµ·æ¥ã€‚</p>
<p>â“ æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼Œæ„é€ å‡½æ•°èƒ½ä¸èƒ½è¿™æ ·åˆå§‹åŒ–å‘¢ï¼Ÿ</p>
<pre><code class="language-cpp">string(char* str)
	: _str(str) {}
</code></pre>
<p><img alt="" height="108" src="image\1ebeee0dd2904cc39b5f3337be4ff820.png" width="106"/> è¿™æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºä½ åˆå§‹åŒ–è¿™ä¸ª<span style="color:#4da8ee;"> string </span>æ—¶ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šå¸¸æƒ…å†µä¼šè¿™ä¹ˆå†™ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
}</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¸é‡å­—ç¬¦ä¸²ï¼Œé€€ä¸€ä¸‡æ­¥æ¥è®²ï¼Œå°±ç®—å®ƒä¸æ˜¯å¸¸é‡å­—ç¬¦ä¸²ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ</p>
<p>æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ï¼Œé‚£æˆ‘ä»¬åé¢è¦å®ç°ä¿®æ”¹ã€æ’å…¥åˆ é™¤ï¼Œæ€ä¹ˆæ‰©å®¹å˜›ï¼Ÿ</p>
<p><img alt="" height="177" src="https://img-blog.csdnimg.cn/77b279db8812475a9a9691896b7b3d65.gif" width="214"/></p>
<p> ä½ å°±åªèƒ½å¯¹å †ä¸Šçš„ç©ºé—´æ‰©å®¹äº†ï¼Œæ‰€ä»¥æ˜¯ä¸èƒ½è¿™ä¹ˆå†™çš„ï¼é‚£è¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</p>
<p>ğŸ’¬ æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="language-cpp">string(const char* str)
    : _str(new char[strlen(str) + 1]) {    // å¼€strlenå¤§å°çš„ç©ºé—´
    strcpy(_str, str);
}</code></pre>
<p><img alt="" height="72" src="https://img-blog.csdnimg.cn/783adaa473ad4eef85f8899465b1bd73.gif" width="73"/>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œè¦ <span style="color:#e6b223;">strlen</span><span style="color:#0d0016;">(str) + 1</span>ï¼Œå› ä¸º <span style="color:#e6b223;">strlen</span> ç®—çš„æ˜¯æœ‰æ•ˆå­—ç¬¦çš„é•¿åº¦ï¼Œæ²¡ç®— <span style="color:#be191c;">\0</span> ã€‚</p>
<p></p>
<p>ğŸ’¬ ç„¶åæˆ‘ä»¬å®ç°ææ„ï¼Œç”¨ <span style="color:#956fe7;">new</span>[] å¯¹åº”çš„ <span style="color:#956fe7;">delete</span>[] æ¥ææ„ï¼š</p>
<pre><code class="language-cpp">~string() {
    delete[] _str;    // é‡Šæ”¾ç©ºé—´
	_str = nullptr;   // ç½®ç©º
}</code></pre>
<p></p>
<p><img alt="" height="132" src="https://img-blog.csdnimg.cn/8601db3dac94434a8de92b685eea3193.gif" width="235"/> æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<p>ğŸ’¬ string.h</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

namespace chaos {
	class string {
	public:
		string(const char* str)
			: _str(new char[strlen(str) + 1]) {
			strcpy(_str, str);
		}
		~string() {
			delete[] _str;
			_str = nullptr;
		}
	private:
		char* _str;
	};

	void test_string1() {
		string s1("hello world");
	}
}</code></pre>
<p>ğŸ’¬ test.h</p>
<pre><code class="language-cpp">#include "string.h"

int main(void)
{
	chaos::test_string1();

	return 0;
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="133" src="image\97a742d6139c4b0086a9b4e66c7de5f2.png" width="546"/></p>
<p></p>
<p>ğŸ’¬ æ­¤æ—¶æˆ‘ä»¬æ”¹ä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹ <span style="color:#4da8ee;">test_string1</span>ï¼Œå¦‚æœæˆ‘ä»¬è¦ç”¨ <span style="color:#4da8ee;">s1</span> æ‹·è´æ„é€ ä¸€ä¸‹ <span style="color:#4da8ee;">s2</span>ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	string s2(s1);
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="361" src="image\7b70c28f60144b2981ad4dd8781b5338.png" width="509"/></p>
<p>ğŸ”‘ è¯¦ç»†è§£æï¼š</p>
<p><img alt="" height="421" src="image\b399bd46ae414d5f9105f0dc35ffd2fd.png" width="447"/></p>
<p> <img alt="" height="488" src="image\5821ff1eccb24910913b41f2e4f87bfe.png" width="536"/></p>
<p>â“ å¦‚ä½•è§£å†³è¿™æ ·çš„é—®é¢˜å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ <span style="color:#4da8ee;">s2</span> æ‹·è´æ„é€ ä½  <span style="color:#4da8ee;">s1</span>ï¼Œæœ¬æ„å¹¶ä¸æ˜¯æƒ³è·Ÿä½ æŒ‡å‘ä¸€å—ç©ºé—´ï¼</p>
<p>æˆ‘ä»¬çš„æœ¬æ„æ˜¯æƒ³è®©<span style="color:#4da8ee;"> s2</span> æœ‰ä¸€å—è‡ªå·±çš„ç©ºé—´ï¼Œå¹¶ä¸”èƒ½å†…å®¹æ˜¯<span style="color:#4da8ee;"> s1</span> é‡Œçš„<span style="color:#1c7331;"> hello world</span></p>
<p> <img alt="" height="193" src="image\4bec3b550be246279b2c5b9ea1efbd79.png" width="428"/></p>
<p>æ‰€ä»¥è¿™é‡Œå°±æ¶‰åŠåˆ°äº†æ·±æµ…æ‹·è´çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥æ¢è®¨ä¸€ä¸‹æ·±æµ…æ‹·è´çš„é—®é¢˜ã€‚</p>
<p></p>
<h3 id="0x01%C2%A0%20%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D%E9%97%AE%E9%A2%98">0x01  æ·±æµ…æ‹·è´é—®é¢˜</h3>
<p><img alt="" height="50" src="image\6615ac064dd048cab6a766a6efc9f714.png" width="46"/> ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ â€”â€” æ‹·è´å°±åƒæ˜¯åœ¨æŠ„ä½œä¸šï¼</p>
<p><strong>æµ…æ‹·è´ï¼š</strong>ç›´æ¥æ— è„‘ç…§æŠ„ï¼Œè¿åå­—éƒ½ä¸æ”¹ã€‚</p>
<p>            <span style="color:#a5a5a5;">ï¼ˆç›´æ¥æŠŠå†…å­˜æ— è„‘æŒ‡è¿‡å»ï¼‰</span></p>
<p><strong>æ·±æ‹·è´ï¼š</strong>èªæ˜åœ°æŠ„ï¼ŒæŠ„çš„åƒæ˜¯æˆ‘è‡ªå·±å†™çš„ä¸€æ ·ã€‚</p>
<p>          <span style="color:#a5a5a5;">  ï¼ˆå¼€ä¸€å—ä¸€æ ·å¤§çš„ç©ºé—´ï¼Œå†æŠŠæ•°æ®æ‹·è´ä¸‹æ¥ï¼ŒæŒ‡å‘æˆ‘è‡ªå·±å¼€çš„ç©ºé—´ï¼‰</span></p>
<p><img alt="" height="270" src="image\9c4bff41ac5a4cb0808a646e24ab5985.png" width="482"/></p>
<p><span style="background-color:#f9eda6;">æµ…æ‹·è´å°±æ˜¯åŸå°ä¸åŠ¨åœ°æŠŠæˆå‘˜å˜é‡æŒ‰å­—èŠ‚ä¾æ¬¡æ‹·è´è¿‡å»ï¼Œ</span></p>
<p><span style="background-color:#f9eda6;">æ·±æ‹·è´å°±æ˜¯è¿›è¡Œæ·±ä¸€ä¸ªå±‚æ¬¡çš„æ‹·è´ï¼Œä¸æ˜¯ç›´æ¥æ‹·è´ï¼Œè€Œæ˜¯æ‹·è´ä½ æŒ‡å‘çš„ç©ºé—´ã€‚</span></p>
<p></p>
<h3 id="0x02%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E7%9A%84%E5%AE%9E%E7%8E%B0">0x02 æ‹·è´æ„é€ çš„å®ç°</h3>
<p><img alt="" height="100" src="https://img-blog.csdnimg.cn/797313dda152439b989850478045b6e9.gif" width="100"/> æˆ‘ä»¬ä¹‹å‰å®ç°æ—¥æœŸç±»çš„æ—¶å€™ï¼Œç”¨è‡ªåŠ¨ç”Ÿæˆçš„æ‹·è´æ„é€ ï¼ˆæµ…æ‹·è´ï¼‰æ˜¯å¯ä»¥çš„ï¼Œ</p>
<p>æ‰€ä»¥å½“æ—¶æˆ‘ä»¬ä¸ç”¨è‡ªå·±å®ç°æ‹·è´æ„é€ ï¼Œè®©å®ƒé»˜è®¤ç”Ÿæˆå°±è¶³å¤Ÿäº†ã€‚</p>
<p><img alt="" height="48" src="image\44beffd9c6b34332b0b1e40bf3f852ed.png" width="48"/> ä½†æ˜¯åƒ <span style="color:#4da8ee;">string </span>è¿™æ ·çš„ç±»ï¼Œå®ƒçš„æ‹·è´æ„é€ æˆ‘ä»¬ä¸å¾—ä¸äº²è‡ªå†™ã€‚</p>
<p></p>
<p>ğŸ’¬ string çš„æ‹·è´æ„é€ ï¼š</p>
<pre><code class="language-cpp">/* s2(s1) */
string(const string&amp; s)
	: _str(new char[strlen(s._str) + 1]) {
	strcpy(_str, s._str);
}</code></pre>
<p>ğŸ” æˆ‘ä»¬ç›‘è§†çœ‹ä¸€ä¸‹æ•ˆæœï¼š</p>
<p><img alt="" height="395" src="image\9dd17f7f0ed340388aa62f389ac1a6e5.png" width="505"/></p>
<p></p>
<h3 id="0x03%20%E8%B5%8B%E5%80%BC%E7%9A%84%E6%B7%B1%E6%8B%B7%E8%B4%9D">0x03 èµ‹å€¼çš„æ·±æ‹·è´</h3>
<p><img alt="" height="157" src="image\adea8fefc49945809f0c7ebcf8bf135f.png" width="394"/></p>
<p> ğŸ’¬ ç°åœ¨æœ‰ä¸€ä¸ª<span style="color:#4da8ee;"> s3</span>ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠ<span style="color:#4da8ee;"> s3</span> èµ‹å€¼ç»™ <span style="color:#4da8ee;">s1</span>ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	string s2(s1);

	string s3("pig");
	s1 = s3;
}</code></pre>
<p>å¦‚æœä½ ä¸è‡ªå·±å®ç°èµ‹å€¼ï¼Œå°±å’Œä¹‹å‰ä¸€æ ·ï¼Œä¼šæ˜¯æµ…æ‹·è´ï¼Œä¹Ÿä¼šé€ æˆå´©æºƒï¼š</p>
<p><img alt="" height="297" src="image\17b1a0342a734f13944920d8c485575d.png" width="403"/></p>
<p></p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ª <span style="color:#956fe7;">operator=</span> ï¼Œå®ç°æ€è·¯å¦‚ä¸‹ï¼š</p>
<p><img alt="" height="621" src="image\f9499a93657245b5a932d3a81846d58b.png" width="538"/></p>
<p> ğŸ’¬ ä»£ç å®ç°<span style="color:#956fe7;"> operator= </span></p>
<pre><code class="language-cpp">/* s1 = s3 */
string&amp; operator=(const string&amp; s) {
    if (this != &amp;s) {  // é˜²æ­¢è‡ªå·±ç»™è‡ªå·±èµ‹å€¼
		delete[] _str;                        // é‡Šæ”¾åŸæœ‰çš„ç©ºé—´
		_str = new char[strlen(s._str) + 1];  // å¼€è¾Ÿæ–°çš„ç©ºé—´
		strcpy(_str, s._str);                 // æŠŠs3çš„å€¼èµ‹ç»™s1
	}

	return *this;
}</code></pre>
<p>ğŸ”‘ ä»£ç è§£æï¼š</p>
<p>æ ¹æ®æˆ‘ä»¬çš„å®ç°æ€è·¯ï¼Œé¦–å…ˆé‡Šæ”¾åŸæœ‰ç©ºé—´ï¼Œç„¶åå¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œ</p>
<p>æœ€åæŠŠ <span style="color:#4da8ee;">s3</span> çš„å€¼èµ‹å€¼ç»™ <span style="color:#4da8ee;">s1</span>ã€‚ä¸ºäº†é˜²æ­¢è‡ªå·±ç»™è‡ªå·±èµ‹å€¼ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­ä¸€ä¸‹ã€‚</p>
<p></p>
<p>è¿™æ—¶æˆ‘ä»¬è¿˜è¦è€ƒè™‘ä¸€ä¸ªéš¾ä»¥å‘ç°çš„é—®é¢˜ï¼Œå¦‚æœ <span style="color:#956fe7;">new</span> å¤±è´¥äº†æ€ä¹ˆåŠï¼Ÿ</p>
<p><img alt="" height="101" src="image\99ef06ee812e4327b6c3156c5cd9dddd.png" width="100"/> æŠ›å¼‚å¸¸ï¼æŠ›å¼‚å¸¸ï¼æŠ›å¼‚å¸¸ï¼</p>
<p>å¤±è´¥äº†æ²¡é—®é¢˜ï¼Œä¹Ÿä¸ä¼šèµ°åˆ° <span style="color:#e6b223;">strcpy</span>ï¼Œä½†é—®é¢˜æ˜¯æˆ‘ä»¬å·²ç»æŠŠåŸæœ‰çš„ç©ºé—´é‡Šæ”¾æ‰äº†ï¼Œ</p>
<p>ç¥ä¸çŸ¥é¬¼ä¸è§‰åœ°ï¼Œèµ°åˆ°ææ„é‚£é‡ŒäºŒæ¬¡é‡Šæ”¾å¯èƒ½ä¼šç‚¸ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p>
<p></p>
<p>âš¡ æˆ‘ä»¬å¯ä»¥è¯•ç€æŠŠé‡Šæ”¾åŸæœ‰ç©ºé—´çš„æ­¥éª¤æ”¾åˆ°åé¢ï¼š</p>
<p><img alt="" height="782" src="image\513708b253d84d019c0bbd776b137aef.png" width="560"/></p>
<pre><code class="language-cpp">/* s1 = s3 */
string&amp; operator=(const string&amp; s) {
	if (this != &amp;s) {  // é˜²æ­¢è‡ªå·±ç»™è‡ªå·±èµ‹å€¼	
		char* tmp = new char[strlen(s._str) + 1];  // å¼€è¾Ÿæ–°çš„ç©ºé—´åˆ°tmpä¸­
		strcpy(tmp, s._str);                       // æŠŠs3çš„å€¼èµ‹ç»™ tmp
		delete[] _str;                             // é‡Šæ”¾åŸæœ‰çš„ç©ºé—´
		_str = tmp;                                // æŠŠtmpçš„å€¼èµ‹ç»™ s1
	}

	return *this;
}</code></pre>
<p>ğŸ”‘ ä»£ç è§£æï¼š</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±ç®—æ˜¯åŠ¨æ€å†…å­˜å¼€è¾Ÿå¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸ç”¨æ‹…å¿ƒå‡ºé—®é¢˜äº†ã€‚</p>
<p>è¿™æ˜¯æ›´æ ‡å‡†çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆå»å¼€è¾Ÿç©ºé—´ï¼Œæ”¾åˆ°ä¸´æ—¶å˜é‡ <span style="color:#0d0016;">tmp</span> ä¸­ï¼Œ</p>
<p><img alt="" height="128" src="https://img-blog.csdnimg.cn/7fdad05da2ec4aac94e441e091b622e6.gif" width="128"/><span style="color:#0d0016;"> tmp</span> æ²¡æœ‰ç¿»è½¦ï¼Œå†å»é‡Šæ”¾åŸæœ‰çš„ç©ºé—´ï¼Œæœ€åå†æŠŠ<span style="color:#0d0016;"> tmp </span>çš„å€¼äº¤ä»˜ç»™ <span style="color:#4da8ee;">s1</span>ï¼Œ</p>
<p>è¿™æ˜¯éå¸¸ä¿é™©çš„ï¼Œæœ‰æ•ˆé¿å…äº†ç©ºé—´æ²¡å¼€æˆè¿˜æŠŠ<span style="color:#4da8ee;"> s1</span> ç©ºé—´é‡Šæ”¾æ‰çš„ "å·é¸¡ä¸æˆèš€æŠŠç±³" çš„äº‹å‘ç”Ÿã€‚</p>
<p></p>
<h2 id="%E2%85%A1.%C2%A0%20string%20%E7%9A%84%E5%AE%9E%E7%8E%B0">â…¡.  string çš„å®ç°</h2>
<h3 id="0x00%20%E5%BC%95%E5%85%A5">0x00 å¼•å…¥</h3>
<p><img alt="" height="48" src="image\b105aa9fd35547d393808b55c142b696.png" width="48"/> åˆšæ‰æˆ‘ä»¬ä¸ºäº†æ–¹ä¾¿è®²è§£æ·±æµ…æ‹·è´çš„é—®é¢˜ï¼Œæœ‰äº›åœ°æ–¹æ‰€ä»¥æ²¡æœ‰å†™å…¨ï¼Œ</p>
<p> æ˜¯æ²¡æœ‰è€ƒè™‘å¢åˆ æŸ¥æ”¹çš„é—®é¢˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç°åœ¨è¦å¢åŠ ä¸€äº›æˆå‘˜ï¼š</p>
<pre><code class="language-cpp">private:
	char*  _str;
	size_t _size;
	size_t _capacity;   // æœ‰æ•ˆå­—ç¬¦çš„ç©ºé—´æ•°ï¼Œä¸ç®—\0</code></pre>
<p></p>
<h3 id="0x01%20%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0%20_size%20%E5%92%8C%20_capacity">0x01 æˆå‘˜å‡½æ•° _size å’Œ _capacity</h3>
<p>ğŸ’¬ åŠ ä¸Š<span style="color:#0d0016;"> _size</span> å’Œ<span style="color:#0d0016;"> _capacity</span> åï¼Œåœ¨åˆšæ‰å®ç°çš„ <span style="color:#4da8ee;">string </span>åŸºç¡€ä¸Šä¿®æ”¹å®Œå–„ï¼š</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

namespace chaos 
{
	class string {
	public:
	string(const char* str) 
		: _size(strlen(str)) 
		, _capacity(_size) {
		_str = new char[_capacity + 1];     // å¤šå¼€ä¸€ä¸ªç©ºé—´ç»™\0
		strcpy(_str, str);
	}
	/* s2(s1) */
	string(const string&amp; s)
		: _size(s._size)
		, _capacity(s._capacity) {
		_str = new char[_capacity + 1];
		strcpy(_str, s._str);
	}
	/* s1 = s3 */
	string&amp; operator=(const string&amp; s) {
		if (this != &amp;s) {                              // é˜²æ­¢è‡ªå·±ç»™è‡ªå·±èµ‹å€¼
			char* tmp = new char[s._capacity + 1];     // å¼€è¾Ÿæ–°çš„ç©ºé—´åˆ°tmpä¸­
			strcpy(tmp, s._str);                       // æŠŠs3çš„å€¼èµ‹ç»™ tmp
			delete[] _str;                             // é‡Šæ”¾åŸæœ‰çš„ç©ºé—´
			_str = tmp;                                // æŠŠtmpçš„å€¼èµ‹ç»™ s1

			_size = s._size;
			_capacity = s._capacity;
		}

		return *this;
	}
	~string() {
		delete[] _str; 
		_str = nullptr;
			
		_size = _capacity = 0;
	}

	private:
	char*  _str;
	size_t _size;
	size_t _capacity;   // æœ‰æ•ˆå­—ç¬¦çš„ç©ºé—´æ•°ï¼Œä¸ç®—\0
	};
}</code></pre>
<p><img alt="" height="107" src="https://img-blog.csdnimg.cn/26635ae6aca04e0cab13cd675e028d7f.gif" width="100"/> ä¸ºäº†å‡å°‘ <span style="color:#e6b223;">strlen </span>çš„æ¬¡æ•°ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–åˆ—è¡¨é‡Œåªå¤„ç†<span style="color:#0d0016;"> _size</span> å’Œ<span style="color:#0d0016;"> _capacity</span>ã€‚</p>
<p></p>
<h3 id="0x02%20c_str()%20%E7%9A%84%E5%AE%9E%E7%8E%B0">0x02 c_str() çš„å®ç°</h3>
<p>ğŸ“š <span style="color:#4da8ee;">c_str</span>() è¿”å›çš„æ˜¯Cè¯­è¨€å­—ç¬¦ä¸²çš„æŒ‡é’ˆå¸¸é‡ï¼Œæ˜¯å¯è¯»ä¸å†™çš„ã€‚</p>
<p>ğŸ’¬<span style="color:#4da8ee;"> c_str </span>çš„å®ç°ï¼š</p>
<pre><code class="language-cpp">/* è¿”å›Cæ ¼å¼å­—ç¬¦ä¸²ï¼šc_str */
const char* c_str() const {
	return _str;
}</code></pre>
<p><span style="background-color:#f9eda6;">const char*ï¼Œå› ä¸ºæ˜¯å¯è¯»ä¸å¯å†™çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨ const ä¿®é¥°ã€‚</span></p>
<p><span style="color:#4da8ee;">c_str </span>è¿”å›çš„æ˜¯å½“å‰å­—ç¬¦ä¸²çš„é¦–å­—ç¬¦åœ°å€ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ <span style="color:#956fe7;">return</span> <span style="color:#0d0016;">_str</span> å³å¯å®ç°ã€‚</p>
<p></p>
<p><img alt="" height="171" src="image\daf36ffd15c843639b383a15e9b15ea4.png" width="147"/> æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	string s2;

	cout &lt;&lt; s1.c_str() &lt;&lt; endl;
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š </p>
</blockquote>
<p><img alt="" height="152" src="image\67898b2b13e44ed68c85b9a60cae8fe4.png" width="473"/></p>
<p><span style="color:#a5a5a5;">ï¼ˆc_str æ˜¯è®¤ \0 çš„ï¼Œä¸‹é¢æˆ‘ä»¬æ¢è®¨ä¸å¸¦å‚å…¨ç¼ºçœå€¼ç»™ä»€ä¹ˆå€¼çš„æ—¶å€™éœ€è¦çŸ¥é“è¿™ä¸ªç‚¹ï¼‰</span></p>
<p></p>
<h3 id="0x03%C2%A0%E5%85%A8%E7%BC%BA%E7%9C%81%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">0x03 å…¨ç¼ºçœæ„é€ å‡½æ•°</h3>
<p><img alt="" height="111" src="https://img-blog.csdnimg.cn/519ab58b0b98408f90505256422353a5.gif" width="109"/> æˆ‘ä»¬è¿˜è¦è€ƒè™‘ä¸å¸¦å‚çš„æƒ…å†µï¼Œæ¯”å¦‚ä¸‹é¢çš„ <span style="color:#0d0016;">s2</span>ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");    // å¸¦å‚
	string s2;                   // ä¸å¸¦å‚
}</code></pre>
<p>ğŸ’¬ ä¸å¸¦å‚åˆå§‹åŒ–ï¼š</p>
<pre><code class="language-cpp">string()
	: _str(new char[1])
	, _size(0)
	, _capacity(0) {
	_str[0] = '\0';
}</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬å¼€ä¸€ä¸ªç©ºé—´ç»™ <span style="color:#be191c;">\0</span>ï¼Œæ—¢ç„¶éƒ½è¿™ä¹ˆå†™äº†ï¼Œæˆ‘ä»¬ä¸å¦‚ç›´æ¥åœ¨ç¼ºçœå€¼ä¸ŠåŠ¨æ‰‹è„šï¼š</p>
<pre><code class="language-cpp">string(const char* str = "")
	: _size(strlen(str)) 
	, _capacity(_size) {
	_str = new char[_capacity + 1];     // å¤šå¼€ä¸€ä¸ªç©ºé—´ç»™\0
	strcpy(_str, str);
}</code></pre>
<p>ä¸€èˆ¬çš„ç±»éƒ½æ˜¯æä¾›å…¨ç¼ºçœçš„ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œç¼ºçœå€¼ç»™çš„æ˜¯<span style="color:#1c7331;"> " "</span></p>
<p>æœ‰äººçœ‹åˆ°æŒ‡é’ˆ <span style="color:#ad720d;">char* </span>å°±çªå‘æ¶ç–¾ï¼Œè¿™é‡Œç¼ºçœå€¼å°±å¿ä¸ä½æƒ³ç»™ä¸ªç©º <span style="color:#6eaad7;">nullptr</span>ï¼š</p>
<pre><code class="language-cpp">string(const char* str = nullptr)</code></pre>
<p><img alt="" height="56" src="image\2ff6e29127a742f5ac61421cf62dbee3.png" width="119"/> ä¸èƒ½ç»™ï¼ç»™äº†å°±å´©ã€‚å› ä¸º <span style="color:#e6b223;">strlen</span> æ˜¯ä¸ä¼šå»æ£€æŸ¥ç©ºçš„ï¼Œå®ƒæ˜¯å»æ‰¾ <span style="color:#be191c;">\0</span> ï¼Œ</p>
<pre><code class="language-cpp">	void test_string2() {
		string s1("hello world");
		string s2;

		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
		cout &lt;&lt; s2.c_str() &lt;&lt; endl;
	}</code></pre>
<p>ä¹Ÿå°±ç›¸å½“äºç›´æ¥å¯¹è¿™ä¸ªå­—ç¬¦ä¸²è¿›è¡Œè§£å¼•ç”¨äº†ï¼Œè¿™é‡Œçš„å­—ç¬¦ä¸²åˆæ˜¯ç©ºï¼Œæ‰€ä»¥ä¼šå¼•å‘ç©ºæŒ‡é’ˆé—®é¢˜ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç»™çš„æ˜¯ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸² <span style="color:#1c7331;">" "</span>ï¼Œ<span style="background-color:#f9eda6;">å¸¸é‡å­—ç¬¦ä¸²é»˜è®¤å°±å¸¦æœ‰ \0</span>ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºé—®é¢˜ï¼š</p>
<pre><code class="language-cpp">string(const char* str = "")</code></pre>
<p><img alt="" height="245" src="image\d7b91c64ebc9440db7b3c47954389656.png" width="434"/></p>
<p></p>
<h3 id="0x04%C2%A0size()%20%E5%92%8C%20operator%5B%5D%20%E7%9A%84%E5%AE%9E%E7%8E%B0">0x04 size() å’Œ operator[] çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#4da8ee;">size</span>() çš„å®ç°ï¼š</p>
<pre><code class="language-cpp">size_t size() const {
	return _size;
}</code></pre>
<p><img alt="" height="102" src="image\841da3123c8a4fb39e17b34298ddd77b.png" width="118"/><span style="color:#4da8ee;"> size</span>() åªéœ€è¦è¿”å›æˆå‘˜å‡½æ•°<span style="color:#0d0016;"> _size</span> å³å¯ï¼Œè€ƒè™‘åˆ°ä¸éœ€è¦ä¿®æ”¹ï¼Œæˆ‘ä»¬åŠ ä¸Š<span style="color:#ad720d;"> const</span>ã€‚</p>
<p></p>
<p>ğŸ’¬ <span style="color:#956fe7;">operator[]</span> çš„å®ç°ï¼š</p>
<pre><code class="language-cpp">/* operator[] */
char&amp; operator[](size_t pos) {
	return _str[pos];  // è¿”å›å­—ç¬¦ä¸²å¯¹åº”ä¸‹æ ‡ä½ç½®çš„å…ƒç´ 
}</code></pre>
<p><img alt="" height="46" src="image\d7fbeedc13a444cc85fdfb641fa26025.png" width="55"/> ç›´æ¥è¿”å›å­—ç¬¦ä¸²å¯¹åº”ä¸‹æ ‡ä½ç½®çš„å…ƒç´ ï¼Œ</p>
<p>å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¼•ç”¨è¿”å› <span style="color:#ad720d;">char</span>ã€‚</p>
<p></p>
<p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œéå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·æ—¢å¯ä»¥æµ‹è¯•åˆ° <span style="color:#e6b223;">size</span>() ä¹Ÿå¯ä»¥æµ‹è¯•åˆ°<span style="color:#956fe7;"> operator[]</span> ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	string s2;

	for (size_t i = 0; i &lt; s1.size(); i++) {
		cout &lt;&lt; s1[i] &lt;&lt; " ";
	}
	cout &lt;&lt; endl;
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="139" src="image\c292772a596440518bbc00ad86a17a5b.png" width="432"/></p>
<p></p>
<p><img alt="" height="43" src="image\a7577949aca848fb92dbd7cf20f700fe.png" width="52"/> æˆ‘ä»¬å†æ¥æµ‹è¯•ä¸€ä¸‹ <span style="color:#956fe7;">operator[] </span>çš„ "å†™" åŠŸèƒ½ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	string s2;

	s1[0] = 'F';
	for (size_t i = 0; i &lt; s1.size(); i++) {
		cout &lt;&lt; s1[i] &lt;&lt; " ";
	}
	cout &lt;&lt; endl;
}</code></pre>
<p><img alt="" height="172" src="image\8dc895b0cdbc43eaaee642691f6f9a6c.png" width="573"/></p>
<p></p>
<p><img alt="" height="101" src="image\13b5737a3bf14e3db306f6f010e4668c.png" width="100"/> æ™®é€šå¯¹è±¡å¯ä»¥è°ƒç”¨ï¼Œä½†æ˜¯ <span style="color:#ad720d;">const </span>å¯¹è±¡å‘¢ï¼Ÿæ‰€ä»¥æˆ‘ä»¬è¿˜è¦è€ƒè™‘ä¸€ä¸‹<span style="color:#ad720d;"> const </span>å¯¹è±¡ã€‚</p>
<p>ğŸ’¬ æˆ‘ä»¬å†™ä¸€ä¸ª <span style="color:#ad720d;">const </span>å¯¹è±¡çš„é‡è½½ç‰ˆæœ¬ï¼š</p>
<pre><code class="language-cpp">const char&amp; operator[](size_t pos) const {
	return _str[pos];
}
</code></pre>
<p>å› ä¸ºè¿”å›çš„æ˜¯ <span style="color:#0d0016;">pos</span> ä½ç½®å­—ç¬¦çš„ <span style="color:#ad720d;">const</span> å¼•ç”¨ï¼Œæ‰€ä»¥å¯è¯»ä½†ä¸å¯å†™ã€‚</p>
<p></p>
<p>ğŸ’¬ æœ€åæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘ä¸€ä¸‹è¶Šç•Œçš„é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<span style="color:#956fe7;">æ–­è¨€</span>æš´åŠ›å¤„ç†ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">#include &lt;assert.h&gt;
...

char&amp; operator[](size_t pos) {
	assert(pos &lt; _size);
	return _str[pos];
}

const char&amp; operator[](size_t pos) const {
	assert(pos &lt; _size);
	return _str[pos];
}</code></pre>
<p></p>
<p><img alt="" height="119" src="https://img-blog.csdnimg.cn/8e8024d32efd4d68a34d522bffaa1e34.gif" width="141"/> æµ‹è¯•ä¸€ä¸‹æ•ˆæœå¦‚ä½•ï¼š</p>
<pre><code class="language-cpp">void test_string1() {
	string s1("hello world");
	s1[30];
}</code></pre>
<p><img alt="" height="461" src="image\e2965a2f7e674942827637f9950c23ad.png" width="496"/></p>
<p></p>
<p></p>
<h2 id="%E2%85%A2.%20%E5%AE%9E%E7%8E%B0%E8%BF%AD%E4%BB%A3%E5%99%A8">â…¢. å®ç°è¿­ä»£å™¨</h2>
<h3 id="0x00%20%E5%BC%95%E5%85%A5%20-%20%E5%86%8D%E6%8E%A2%E8%BF%AD%E4%BB%A3%E5%99%A8">0x00 å¼•å…¥ - å†æ¢è¿­ä»£å™¨</h3>
<p>åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬é¦–æ¬¡è®²è§£è¿­ä»£å™¨ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘ä»¬å½“æ—¶è§£é‡Šå…¶ä¸ºåƒæŒ‡é’ˆä¸€æ ·çš„ç±»å‹ã€‚</p>
<p><img alt="" height="417" src="image\082297cd0b9746d09804702e512d577d.png" width="516"/></p>
<p>å®é™…ä¸Šï¼Œæœ‰æ²¡æœ‰ä¸€ç§å¯èƒ½ï¼Œå®ƒå°±æ˜¯ä¸€ç§æŒ‡é’ˆå‘¢ï¼Ÿ</p>
<p>é—æ†¾çš„æ˜¯ï¼Œ<span style="background-color:#f9eda6;">è¿­ä»£å™¨å¹¶éæŒ‡é’ˆï¼Œè€Œæ˜¯ç±»æ¨¡æ¿ã€‚</span> åªæ˜¯å®ƒè¡¨ç°åœ°åƒæŒ‡é’ˆï¼Œæ¨¡æ‹Ÿäº†æŒ‡é’ˆçš„éƒ¨åˆ†åŠŸèƒ½ã€‚</p>
<p></p>
<h3 id="0x01%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0">0x01 è¿­ä»£å™¨çš„å®ç°</h3>
<p>å®é™…ä¸Šè¿­ä»£å™¨çš„å®ç°éå¸¸ç®€å•ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ª <span style="color:#ad720d;">char*</span> çš„æŒ‡é’ˆç½¢äº†ï¼ˆä½†ä¹Ÿä¸ä¸€å®šï¼‰ã€‚</p>
<p>åé¢æˆ‘ä»¬è®²è§£ list çš„æ—¶å€™å®ƒåˆâ„¢ä¸æ˜¯æŒ‡é’ˆäº†ï¼Œåˆæ˜¯è‡ªå®šä¹‰ç±»å‹äº†ã€‚å¦‚ä½•è¯„ä»·ï¼Ÿ</p>
<p><img alt="" height="160" src="image\3d52cf8949bd4abfa9930a0c9e305f83.png" width="171"/> æˆ‘çš„è¯„ä»·æ˜¯ â€”â€” ä¼¼æ˜¯è€Œéã€‚</p>
<p>å®ƒæ˜¯ä¸€ä¸ªåƒæŒ‡é’ˆçš„ä¸œè¥¿ï¼Œæœ‰å¯èƒ½æ˜¯æŒ‡é’ˆæœ‰å¯èƒ½ä¸æ˜¯æŒ‡é’ˆã€‚</p>
<p></p>
<p>ğŸ’¬ å®ç°è¿­ä»£å™¨çš„ <span style="color:#4da8ee;">begin</span>() å’Œ <span style="color:#4da8ee;">end</span>() ï¼š</p>
<pre><code class="language-cpp">typedef char* iterator;
iterator begin() {
	return _str;          // è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®
}
iterator end() {
	return _str + _size;  // è¿”å›æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®
}</code></pre>
<p></p>
<p>ğŸ’¬ æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">void test_string2() {
	string s1("hello world");

	// è¿­ä»£å™¨å†™
	string::iterator it = s1.begin();
	while (it != s1.end()) {
		*it += 1;
		it++;
	}
		
	// è¿­ä»£å™¨è¯»
	it = s1.begin();   // é‡ç½®èµ·ç‚¹
	while (it != s1.end()) {
		cout &lt;&lt; *it &lt;&lt; " ";
		it++;
	}
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="150" src="image\8bbbe736c04140c088b5a8d30be82268.png" width="572"/></p>
<p></p>
<h3 id="0x02%20const%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0">0x02 const è¿­ä»£å™¨çš„å®ç°</h3>
<p><img alt="" height="100" src="image\4d1b53b1a22b41adba6c7f9725bfcd32.png" width="100"/> æˆ‘ä»¬çŸ¥é“ï¼Œ<span style="color:#ad720d;">const </span>è¿­ä»£å™¨å°±æ˜¯å¯ä»¥è¯»ä½†æ˜¯ä¸å¯ä»¥å†™çš„è¿­ä»£å™¨ã€‚ </p>
<p></p>
<p>ğŸ’¬ const è¿­ä»£å™¨ï¼š</p>
<pre><code class="language-cpp">typedef const char* const_iterator;
const_iterator begin() const {
	return _str;          // è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦ä½ç½®
}
const_iterator end() const {
	return _str + _size;  // è¿”å›æœ€åä¸€ä¸ªæ•°æ®çš„ä¸‹ä¸€ä¸ªä½ç½®
}</code></pre>
<p>è¿™é‡Œç”¨ <span style="color:#ad720d;">const</span> ä¿®é¥°ï¼Œæ„å‘³ç€è§£å¼•ç”¨æ—¶å¯ä»¥è¯»ä½†ä¸å¯ä»¥å†™ã€‚</p>
<p></p>
<h3 id="0x03%C2%A0%E5%86%8D%E5%BA%A6%E6%80%9D%E8%80%83%E8%BF%AD%E4%BB%A3%E5%99%A8">0x03 å†åº¦æ€è€ƒè¿­ä»£å™¨</h3>
<p><img alt="" height="156" src="image\318c38e48bfe48c6a5b6ced2d1747c2b.png" width="137"/></p>
<p>å®ƒçš„åº•å±‚æ˜¯è¿ç»­åœ°ç‰©ç†ç©ºé—´ï¼Œç»™åŸç”ŸæŒ‡é’ˆ++è§£å¼•ç”¨èƒ½æ­£å¥½è´´åˆè¿­ä»£å™¨çš„è¡Œä¸ºï¼Œå°±èƒ½åšåˆ°éå†ã€‚</p>
<p>ä½†æ˜¯å¯¹äºé“¾è¡¨å’Œæ ‘å‹ç»“æ„æ¥è¯´ï¼Œè¿­ä»£å™¨çš„å®ç°å°±æ²¡æœ‰è¿™ä¹ˆç®€å•äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¼ºå¤§çš„è¿­ä»£å™¨é€šè¿‡ç»Ÿä¸€çš„å°è£…ï¼Œæ— è®ºæ˜¯æ ‘ã€é“¾è¡¨è¿˜æ˜¯æ•°ç»„â€¦â€¦</p>
<p>å®ƒéƒ½èƒ½ç”¨ç»Ÿä¸€çš„æ–¹å¼éå†ï¼Œè¿™å°±æ˜¯è¿­ä»£å™¨çš„ä¼˜åŠ¿ï¼Œä¹Ÿæ˜¯å®ƒçš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p></p>
<h3 id="0x04%20%E5%86%8D%E7%9C%8B%E8%8C%83%E5%9B%B4%20for">0x04 å†æ¢èŒƒå›´ for</h3>
<p><img alt="" height="223" src="image\7dd4748e77504c18a235373bf681c391.png" width="564"/></p>
<p>ä¸Šä¸€ç« è®² string ç±»å¯¹è±¡çš„éå†æ—¶ï¼Œæˆ‘ä»¬è®²çš„ç¬¬ä¸‰ç§æ–¹å¼å°±æ˜¯èŒƒå›´ <span style="color:#956fe7;">for</span>ï¼Œå›å¿†ä¸€ä¸‹ â€”â€”</p>
<p><img alt="" height="184" src="image\68c5dbdee20b4944b36df1537d019efb.png" width="493"/>ï¼ˆäº”æ¯›ç‰¹æ•ˆï¼‰</p>
<p>æˆ‘ä»¬ä¸Šä¸€ç« æåˆ°è¿‡ï¼Œæˆ‘ä»¬ç°åœ¨å°±æ¥æ¼”ç¤ºä¸€ä¸‹èŒƒå›´ <span style="color:#956fe7;">for </span>çš„å®ç°ï¼š</p>
<pre><code class="language-cpp">for (auto e : s1) {
	cout &lt;&lt; e &lt;&lt; " ";
}
cout &lt;&lt; endl;</code></pre>
<p>ä½ ä¼šå‘ç°æ ¹æœ¬å°±ä¸éœ€è¦è‡ªå·±å®ç°ï¼Œä½ åªè¦æŠŠè¿­ä»£å™¨å®ç°å¥½ï¼ŒèŒƒå›´<span style="color:#956fe7;"> for</span> ç›´æ¥å°±å¯ä»¥ç”¨ã€‚</p>
<p><span style="background-color:#f9eda6;">èŒƒå›´ for çš„æœ¬è´¨æ˜¯ç”±è¿­ä»£å™¨æ”¯æŒçš„ï¼Œç¼–è¯‘æ—¶èŒƒå›´ for ä¼šè¢«æ›¿æ¢æˆè¿­ä»£å™¨ã€‚</span></p>
<p><img alt="" height="47" src="image\e2d599e999f84f38a635fa12ba347654.png" width="56"/> è¿™ä¹ˆä¸€çœ‹ï¼Œåˆæ˜¯è‡ªåŠ¨åŠ åŠ ï¼Œåˆæ˜¯è‡ªåŠ¨åˆ¤æ–­ç»“æŸçš„èŒƒå›´ <span style="color:#956fe7;">for</span>ï¼Œå¥½åƒä¹Ÿæ²¡é‚£ä¹ˆå›äº‹å„¿ã€‚</p>
<p></p>
<p>ğŸ“Œ æ³¨æ„äº‹é¡¹ï¼š</p>
<p>å®ƒçš„æ›¿æ¢æ˜¯è®¤ <span style="color:#4da8ee;">begin</span> å’Œ<span style="color:#4da8ee;"> end</span> çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¯•ç€æŠŠæˆ‘ä»¬å®ç°çš„è¿­ä»£å™¨<span style="color:#4da8ee;"> begin</span> çš„ b æ”¹æˆå¤§å†™ B è¯•è¯•ï¼š</p>
<pre><code class="language-cpp">		typedef char* iterator;
		iterator Begin() {
			return _str;         
		}
		iterator end() {
			return _str + _size;  
		}</code></pre>
<pre><code class="language-cpp">void test_string2() {
	string s1("hello world");
	string::iterator it = s1.Begin();
	while (it != s1.end()) {
		*it += 1;
		it++;
	}
	it = s1.Begin();   // é‡ç½®èµ·ç‚¹
	while (it != s1.end()) {
		cout &lt;&lt; *it &lt;&lt; " ";
		it++;
	}
	
    for (auto e : s1) {
		cout &lt;&lt; e &lt;&lt; " ";
	}
	cout &lt;&lt; endl;
}</code></pre>
<p><img alt="" height="79" src="image\e5d088206b2c443bb5c885bd256acb87.png" width="94"/> è¿­ä»£å™¨æ˜¯å¯ä»¥æ­£å¸¸ç”¨çš„ï¼Œä½†æ˜¯èŒƒå›´<span style="color:#4da8ee;"> for</span> å°±å¯„äº†ã€‚</p>
<p><img alt="" height="132" src="image\3114b2d86aed49c5b8a5d992024e270c.png" width="592"/></p>
<p>å› ä¸ºå®ƒæ˜¯æŒ‰è¿­ä»£å™¨å›ºå®šçš„åç§°å»æ›¿æ¢çš„ï¼Œ<span style="color:#4da8ee;">begin</span> å’Œ <span style="color:#4da8ee;">end</span>ï¼Œ</p>
<p>å¦‚æœä½ è‡ªå·±å®ç°è¿­ä»£å™¨æ—¶æ²¡æœ‰æŒ‰å›ºå®šçš„è§„èŒƒå»å®ç°ï¼Œ</p>
<p>æ¯”å¦‚ <span style="color:#4da8ee;">begin</span> å–åä¸º<span style="color:#0d0016;"> start</span>ï¼Œé‚£èŒƒå›´<span style="color:#956fe7;"> for</span> å°±ä¸æ”¯æŒäº†ã€‚</p>
<p></p>
<h2 id="%E2%85%A3.%C2%A0%20string%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9">â…£.  stringçš„å¢åˆ æŸ¥æ”¹</h2>
<h3 id="0x00%20reserve()%20%E7%9A%84%E5%AE%9E%E7%8E%B0">0x00 reserve() çš„å®ç°</h3>
<p>ğŸ’¬ æˆ‘ä»¬å…ˆå®ç°ä¸€ä¸‹ <span style="color:#4da8ee;">reserve</span> å¢å®¹ï¼š</p>
<pre><code class="language-cpp">/* å¢å®¹ï¼šreverse */
void reserve(size_t new_capacity) {
	if (new_capacity &gt; _capacity) {
		char* tmp = new char[new_capacity + 1];  // å¼€æ–°ç©ºé—´
		strcpy(tmp, _str);                       // æ¬è¿
		delete[] _str;                           // é‡Šæ”¾åŸç©ºé—´

		_str = tmp;                              // æ²¡é—®é¢˜ï¼Œé€’äº¤ç»™_str
		_capacity = new_capacity;                // æ›´æ–°å®¹é‡
	}
}</code></pre>
<p>è¿™é‡Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦çœŸçš„éœ€è¦å¢å®¹ï¼Œä¸‡ä¸€æ¥æ”¶çš„ <span style="color:#0d0016;">new_capacity</span> æ¯” <span style="color:#0d0016;">_capacity </span>å°ï¼Œå°±ä¸åŠ¨ã€‚</p>
<p><img alt="" height="48" src="image\c0c125b2816545a3bc60ae1083fb0bcf.png" width="48"/> è¿™é‡Œæˆ‘ä»¬ä¹‹å‰è®²æ•°æ®ç»“æ„ç”¨çš„æ˜¯<span style="color:#956fe7;"> realloc</span>ï¼Œç°åœ¨æˆ‘ä»¬ç†Ÿæ‚‰ç†Ÿæ‚‰ç”¨<span style="color:#956fe7;"> new</span>ï¼Œ</p>
<p> è¿˜æ˜¯ç”¨ç”³è¯·æ–°ç©ºé—´ã€åŸç©ºé—´æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼Œå†é‡Šæ”¾ç©ºé—´åœ°æ–¹å¼å»æ‰©å®¹ã€‚</p>
<p>æˆ‘ä»¬çš„<span style="color:#0d0016;"> _capacity</span> å­˜å‚¨çš„æ˜¯æœ‰æ•ˆå­—ç¬¦ï¼Œæ²¡ç®—<span style="color:#be191c;"> \0</span>ï¼Œæ‰€ä»¥è¿™é‡Œè¿˜è¦ <span style="color:#ad720d;">+1</span> ä¸º <span style="color:#be191c;">\0</span> å¼€ä¸€ä¸ªç©ºé—´ã€‚</p>
<p><img alt="" height="462" src="image\d7f4cfc2b1e642a382bd5d7998f880ac.png" width="586"/></p>
<p></p>
<h3 id="0x01%C2%A0push_back()%20%E7%9A%84%E5%AE%9E%E7%8E%B0">0x01 push_back() çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#4da8ee;">push_back</span>ï¼š</p>
<pre><code class="language-cpp">/* å­—ç¬¦ä¸²å°¾æ’ï¼špush_back */
void push_back(char append_ch) {
	if (_size == _capacity) {      // æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
		reserve(_capacity == 0 ? 4 : _capacity * 2); 
	}

	_str[_size] = append_ch;       // æ’å…¥è¦è¿½åŠ çš„å­—ç¬¦
	_size++;
	_str[_size] = '\0';            // æ‰‹åŠ¨æ·»åŠ '\0'
}</code></pre>
<p>é¦–å…ˆæ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹ï¼Œå¦‚æœéœ€è¦å°±è°ƒç”¨æˆ‘ä»¬ä¸Šé¢å®ç°çš„<span style="color:#956fe7;"> reserve </span>å‡½æ•°ï¼Œ</p>
<p>å‚æ•°ä¼ é€’å¯ä»¥ç”¨ä¸‰ç›®æ“ä½œç¬¦ï¼Œé˜²æ­¢å®¹é‡æ˜¯0çš„æƒ…å†µï¼Œ0ä¹˜ä»»ä½•æ•°éƒ½æ˜¯0ä»è€Œå¼•å‘é—®é¢˜çš„æƒ…å†µã€‚</p>
<p>ç„¶ååœ¨ <span style="color:#be191c;">\0</span> å¤„æ’å…¥è¦è¿½åŠ çš„å­—ç¬¦ <span style="color:#0d0016;">append_ch</span>ï¼Œç„¶å <span style="color:#0d0016;">_size++</span> å¹¶æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªæ–°çš„<span style="color:#be191c;"> \0</span> å³å¯ã€‚</p>
<p></p>
<p>æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹æ•ˆæœå¦‚ä½•ï¼š</p>
<pre><code class="language-cpp">	void test_string4() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('!');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('A');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p> ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="166" src="image\97691753bc254c389ec260afca267cd4.png" width="460"/></p>
<p></p>
<p></p>
<h3 id="0x02%C2%A0append()%20%E7%9A%84%E5%AE%9E%E7%8E%B0">0x02 append() çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#4da8ee;">append</span>ï¼š</p>
<pre><code class="language-cpp">/* å­—ç¬¦ä¸²è¿½åŠ ï¼šappend */
void append(const char* append_str) {
	size_t len = strlen(append_str);     // è®¡ç®—è¦è¿½åŠ çš„å­—ç¬¦ä¸²çš„é•¿åº¦
	if (_size + len &gt; _capacity) {       // æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
		reserve(_size + len);
	}

	strcpy(_str + _size, append_str);    // é¦–å­—ç¬¦+å¤§å°å°±æ˜¯\0ä½ç½®
	_size += len;                        // æ›´æ–°å¤§å°
}</code></pre>
<p><span style="color:#4da8ee;">append </span>æ˜¯è¿½åŠ å­—ç¬¦ä¸²çš„ï¼Œé¦–å…ˆæˆ‘ä»¬æŠŠè¦è¿½åŠ çš„å­—ç¬¦ä¸²é•¿åº¦è®¡ç®—å‡ºæ¥ï¼Œ</p>
<p>ç„¶åçœ‹å®¹é‡å¤Ÿä¸å¤Ÿï¼Œä¸å¤Ÿæˆ‘ä»¬å°±äº¤ç»™ <span style="color:#e6b223;">reserve </span>å»æ‰©å®¹ï¼Œæ‰© <span style="color:#0d0016;">_size + len</span>ï¼Œå¤Ÿç”¨å°±è¡Œã€‚</p>
<p><img alt="" height="443" src="image\57634f33f182448587e1e705245c5e04.png" width="526"/></p>
<p>è¿™é‡Œæˆ‘ä»¬ç”šè‡³éƒ½ä¸éœ€è¦ç”¨<span style="color:#4da8ee;"> </span><span style="color:#e6b223;">strcat</span>ï¼Œå› ä¸ºå®ƒçš„ä½ç½®æˆ‘ä»¬å¾ˆæ¸…æ¥šï¼Œä¸å°±åœ¨<span style="color:#0d0016;"> _str + _size</span><span style="color:#0d0016;"> </span>åé¢æ’å…¥å—ã€‚</p>
<p>ç”¨<span style="color:#e6b223;"> strcat</span> è¿˜éœ€è¦éå†æ‰¾åˆ°åŸæ¥ä½ç½®çš„<span style="color:#be191c;"> \0</span>ï¼Œå¤ªéº»çƒ¦äº†ã€‚</p>
<p></p>
<h3 id="0x03%C2%A0operator%2B%3D%C2%A0%E7%9A%84%E5%AE%9E%E7%8E%B0">0x03 operator+= çš„å®ç°</h3>
<p>è¿™å°±æ˜¯æˆ‘ä»¬ä¸€ç« è¯´çš„ "ç”¨èµ·æ¥çˆ½åˆ°é£èµ·" çš„ += ï¼Œå› ä¸ºå­—ç¬¦å’Œå­—ç¬¦ä¸²éƒ½å¯ä»¥ç”¨ += å»æ“ä½œã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªé‡è½½ç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦çš„ï¼Œä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²çš„ã€‚</p>
<p>æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±å®ç°äº†ï¼Œç›´æ¥å¤ç”¨ <span style="color:#e6b223;">push_back</span> å’Œ <span style="color:#e6b223;">append</span> å°±å¥½äº†ã€‚</p>
<p>ğŸ’¬<span style="color:#4da8ee;"> </span><span style="color:#956fe7;">operator</span><span style="color:#be191c;">+= </span></p>
<pre><code class="language-cpp">/* operator+= */
string&amp; operator+=(char append_ch) {
	push_back(append_ch);    // å¤ç”¨push_back
	return *this;
}
string&amp; operator+=(const char* append_str) {
	append(append_str);      // å¤ç”¨append
	return *this;
}</code></pre>
<p></p>
<p><img alt="" height="86" src="https://img-blog.csdnimg.cn/25fa736f47a0442aa80d0539a2a2c38c.gif" width="100"/> æµ‹è¯•ä¸€ä¸‹çœ‹çœ‹ï¼š</p>
<pre><code class="language-cpp">	void test_string5() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += '!';
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += "this is new data";
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="164" src="image\3c54dd2e7b2644cbbf76e401d64fa5d8.png" width="483"/></p>
<p></p>
<h3 id="%C2%A00x04%C2%A0%E5%AE%9E%E7%8E%B0%20insert()">0x04 insert() çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#4da8ee;">insert</span>ï¼šå­—ç¬¦</p>
<pre><code class="language-cpp">/* æ’å…¥ï¼šinsert */
string&amp; insert(size_t pos, char append_ch) {
	assert(pos &lt;= _size);

	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_size == _capacity) {     
		reserve(_capacity == 0 ? 4 : _capacity * 2);
	}
			
	// å‘åæŒªåŠ¨æ•°æ®
	//size_t end = _size;
	//while (end &gt;= (int)pos) {
	//	_str[end + 1] = _str[end];
	//	end--;
	//}

	size_t end = _size + 1;
	while (end &gt; pos) {
		_str[end] = _str[end - 1];
		end--;
	}

	// æ’å…¥
	_str[pos] = append_ch;
	_size++;

	return *this;
}
</code></pre>
<p></p>
<p>ğŸ’¬<span style="color:#4da8ee;"> insert</span>ï¼šå­—ç¬¦ä¸²</p>
<pre><code class="language-cpp">string&amp; insert(size_t pos, const char* append_str) {
	assert(pos &lt;= _size);
	size_t len = strlen(append_str);

	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_size + len &gt; _capacity) {
		reserve(_size + len);
	}

	// å‘åæŒªåŠ¨æ•°æ®
	size_t end = _size + len;
	while (end &gt; pos + len - 1) {
		_str[end] = _str[end - len];
		end--;
	}

	// æ’å…¥
	strncpy(_str + pos, append_str, len);
	_size += len;

	return *this;
}</code></pre>
<p></p>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">	void test_string6() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.insert(0, 'X');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.insert(0, "hahahaha");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="156" src="image\65f69790677a4675acc696fe47d4895c.png" width="433"/></p>
<p></p>
<p><span style="color:#4da8ee;">insert</span> éƒ½å®ç°äº†ï¼Œé‚£<span style="color:#4da8ee;"> push_back</span> å’Œ <span style="color:#4da8ee;">append</span> ç›´æ¥å¤ç”¨ï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</p>
<p><img alt="" height="218" src="image\37c5ef5daf294b039160e2c2996c5639.png" width="361"/></p>
<p>âš¡ ä¿®æ”¹<span style="color:#4da8ee;"> push_back</span> å’Œ<span style="color:#4da8ee;"> append</span>ï¼š</p>
<pre><code class="language-cpp">/* å­—ç¬¦ä¸²å°¾æ’ï¼špush_back */
void push_back(char append_ch) {
	//if (_size == _capacity) {      // æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	//	reserve(_capacity == 0 ? 4 : _capacity * 2); 
	//}

	//_str[_size] = append_ch;       // æ’å…¥è¦è¿½åŠ çš„å­—ç¬¦
	//_size++;
	//_str[_size] = '\0';            // æ‰‹åŠ¨æ·»åŠ '\0'

	insert(_size, append_ch);
}

/* å­—ç¬¦ä¸²è¿½åŠ ï¼šappend */
void append(const char* append_str) {
	//size_t len = strlen(append_str);     // è®¡ç®—è¦è¿½åŠ çš„å­—ç¬¦ä¸²çš„é•¿åº¦
	//if (_size + len &gt; _capacity) {       // æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	//	reserve(_size + len);
	//}

	//strcpy(_str + _size, append_str);    // é¦–å­—ç¬¦+å¤§å°å°±æ˜¯\0ä½ç½®
	//_size += len;                        // æ›´æ–°å¤§å°

	insert(_size, append_str);
}</code></pre>
<p></p>
<p>æµ‹è¯•ä¸€ä¸‹ <span style="color:#4da8ee;">push_back</span> å’Œ<span style="color:#4da8ee;"> append</span>ï¼Œå’Œå¤ç”¨å®ƒä»¬ä¸¤å®ç°çš„ <span style="color:#956fe7;">operator+=</span> æœ‰æ²¡æœ‰é—®é¢˜ï¼š</p>
<pre><code class="language-cpp">	void test_string4() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('!');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('A');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.append("this is new data");
	}

    void test_string5() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += "!";
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += "this is new data";
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="285" src="image\138ca665ee224f4bb077b952c08d277a.png" width="626"/></p>
<p></p>
<h3 id="0x05%C2%A0%E5%AE%9E%E7%8E%B0%20resize()">0x05 resize() çš„å®ç°</h3>
<p>æˆ‘ä»¬ä¸ºäº†æ‰©å®¹ï¼Œå…ˆå®ç°äº† <span style="color:#4da8ee;">reverse</span>ï¼Œç°åœ¨æˆ‘ä»¬å†é¡ºä¾¿å®ç°ä¸€ä¸‹ <span style="color:#4da8ee;">resize</span>ã€‚</p>
<p>è¿™é‡Œå†æä¸€ä¸‹<span style="color:#4da8ee;"> reverse</span> å’Œ <span style="color:#4da8ee;">resize </span>çš„åŒºåˆ«ï¼š</p>
<p></p>
<p>resize åˆ†ç»™åˆå§‹å€¼å’Œä¸ç»™åˆå§‹å€¼çš„æƒ…å†µï¼Œæ‰€ä»¥æœ‰ä¸¤ç§ï¼š</p>
<p><img alt="" height="75" src="image\fe85879a2cc84f6dadb3a70d33c17f1a.png" width="310"/> ä»–ä»¬ä¹Ÿæ˜¯è¿™ä¹ˆå®ç°çš„ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬ä¸Šé¢è®²æ„é€ å‡½æ•°çš„æ—¶å€™è¯´è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¨ç¼ºçœçš„æ–¹å¼ï¼Œè¿™æ ·å°±å¯ä»¥äºŒåˆä¸€äº†ã€‚</p>
<p><span style="color:#4da8ee;">resize</span> å®ç°çš„éš¾ç‚¹æ˜¯è¦è€ƒè™‘ç§ç§æƒ…å†µï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­åˆ†æä¸€ä¸‹ï¼š</p>
<p><img alt="" height="255" src="image\33017672b77049d89976225cb829e3c2.png" width="328"/></p>
<p><strong>å¦‚æœæ¬²å¢å®¹é‡æ¯” _size å°çš„æƒ…å†µï¼š</strong></p>
<p><img alt="" height="136" src="image\465c385101634fd5bb7cf933d927e5b1.png" width="416"/></p>
<p>å› ä¸ºæ ‡å‡†åº“æ˜¯æ²¡æœ‰ç¼©å®¹çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®ç°çš„æ—¶å€™ä¹Ÿä¸è€ƒè™‘å»ç¼©å®¹ã€‚æˆ‘ä»¬å¯ä»¥åŠ ä¸€ä¸ª <span style="color:#be191c;">\0</span> å»æˆªæ–­ã€‚</p>
<p></p>
<p><strong>å¦‚æœé¢„å¢å®¹é‡æ¯” _size å¤§çš„æƒ…å†µï¼š</strong></p>
<p>resize æ˜¯å¼€ç©ºé—´ + åˆå§‹åŒ–ï¼Œå¼€ç©ºé—´çš„å·¥ä½œæˆ‘ä»¬å°±å¯ä»¥äº¤ç»™å·²ç»å®ç°å¥½çš„<span style="color:#e6b223;"> reserve</span>ï¼Œ</p>
<p>ç„¶åå†å†™ resize çš„åˆå§‹åŒ–çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿™é‡Œå¯ä»¥ä½¿ç”¨ <span style="color:#e6b223;">memset</span> å‡½æ•°ã€‚</p>
<p><img alt="" height="267" src="image\3c9e63d4a3634dd5b129ebf445db2a70.png" width="587"/></p>
<p></p>
<p>ğŸ’¬ <span style="color:#4da8ee;">resize</span>ï¼š</p>
<pre><code class="language-cpp">/* resize */
void resize(size_t new_capacity, char init_ch = '\0') {
	// å¦‚æœæ¬²å¢å®¹é‡æ¯”_sizeå°
	if (new_capacity &lt;= _size) {
		_str[new_capacity] = '\0';      // æ‹¿æ–œæ é›¶å»æˆªæ–­
		_size = new_capacity;           // æ›´æ–°å¤§å°
	}
	// æ¬²å¢å®¹é‡æ¯”_sizeå¤§
	else {
		if (new_capacity &gt; _capacity) { 
			reserve(new_capacity);
		}
		// èµ·å§‹ä½ç½®ï¼Œåˆå§‹åŒ–å­—ç¬¦ï¼Œåˆå§‹åŒ–ä¸ªæ•°
		memset(_str + _size, init_ch, new_capacity - _size);
		_size = _capacity;
		_str[_size] = '\0';
	}
}</code></pre>
<p id=""></p>
<h3 id="0x06%C2%A0%E5%AE%9E%E7%8E%B0%20find()">0x06 find() çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#4da8ee;">find</span>ï¼šæŸ¥æ‰¾å­—ç¬¦</p>
<pre><code class="language-cpp">/* find */
size_t find(char aim_ch) {
	for (size_t i = 0; i &lt; _size; i++) {
		if (aim_ch == _str[i]) { 
			// æ‰¾åˆ°äº†
			return i;    // è¿”å›ä¸‹æ ‡
		}
	}
	// æ‰¾ä¸åˆ°
	return npos;
}</code></pre>
<p><img alt="" height="56" src="image\ca593bb9d5314342800705677e4271de.png" width="136"/> éå†æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰¾åˆ°äº†ç›®æ ‡å­—ç¬¦ <span style="color:#0d0016;">aim_ch</span> å°±è¿”å›å¯¹åº”çš„ä¸‹æ ‡ã€‚</p>
<p>å¦‚æœéå†å®Œæ•´ä¸ªå­—ç¬¦ä¸²éƒ½æ²¡æ‰¾åˆ°ï¼Œå°±è¿”å› <span style="color:#0d0016;">npos</span>ï¼ˆæ‰¾åˆ°åº“çš„æ¥ï¼‰ã€‚</p>
<p> ğŸ’¬ è¿™ä¸ª<span style="color:#0d0016;"> npos</span> æˆ‘ä»¬å¯ä»¥åœ¨æˆå‘˜å˜é‡ä¸­å®šä¹‰ï¼š</p>
<pre><code class="language-cpp">...
    private:
		/* æˆå‘˜å˜é‡ */
		char* _str;
		size_t _size;
		size_t _capacity;   // æœ‰æ•ˆå­—ç¬¦çš„ç©ºé—´æ•°ï¼Œä¸ç®—\0
    public:
		static const size_t npos;
	};

	/* åˆå§‹åŒ–npos */
	const size_t string::npos = -1;   // æ— ç¬¦å·æ•´å‹çš„-1ï¼Œå³æ•´å‹çš„æœ€å¤§å€¼ã€‚

...
}</code></pre>
<p></p>
<p>ğŸ’¬ <span style="color:#4da8ee;">find</span>ï¼šæŸ¥æ‰¾å­—ç¬¦ä¸²</p>
<pre><code class="language-cpp">size_t find(const char* aim_str, size_t pos = 0) {
	const char* ptr = strstr(_str + pos, aim_str);
	if (ptr == nullptr) {
		return npos;
	}
	else {
		return ptr - _str;  // å‡å¼€å¤´
	}
}</code></pre>
<p><img alt="" height="175" src="image\0155aa43c71e43fb8081acdd46cc2a90.png" width="597"/></p>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ç”¨ <span style="color:#956fe7;">strstr</span> å»æ‰¾å­ä¸²ï¼Œå¦‚æœæ‰¾åˆ°äº†ï¼Œè¿”å›çš„æ˜¯å­ä¸²é¦–æ¬¡å‡ºç°çš„åœ°å€ã€‚å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›çš„æ˜¯ç©ºã€‚æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¯ä»¥åšåˆ¤æ–­ï¼Œå¦‚æœæ˜¯<span style="color:#6eaad7;"> nullptr </span>å°±è¿”å›<span style="color:#0d0016;"> npos</span>ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è¿”å›å¯¹åº”ä¸‹æ ‡ï¼Œå­ä¸²åœ°å€ - å¼€å¤´ï¼Œå°±æ˜¯ä¸‹æ ‡äº†ã€‚</p>
<p></p>
<h3 id="0x07%C2%A0%E5%AE%9E%E7%8E%B0%20erase()">0x07 erase() çš„å®ç°</h3>
<p>ğŸ’¬ eraseï¼š</p>
<pre><code class="language-cpp">/* åˆ é™¤ï¼šerase */
string&amp; erase(size_t pos, size_t len = npos) {
	assert(pos &lt; _size);

	if (len == pos || pos + len &gt;= _size) {
		_str[pos] = '\0';    // æ”¾ç½®\0æˆªæ–­
		_size = pos;
	}
	else {
		strcpy(_str + pos, _str + pos + len);
		_size -= len;
	}

	return *this;
}</code></pre>
<p></p>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">	void test_string7() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.erase(5, 2);   // ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼Œåˆ ä¸¤ä¸ªå­—ç¬¦
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.erase(5, 20);  // ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼Œåˆ å®Œ
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="143" src="image\0556054bd5774e93b512865ae8f80d86.png" width="501"/></p>
<p></p>
<p></p>
<h2 id="%E2%85%A4.%20%E4%BC%A0%E7%BB%9F%E5%86%99%E6%B3%95%E5%92%8C%E7%8E%B0%E4%BB%A3%E5%86%99%E6%B3%95">â…¤. ä¼ ç»Ÿå†™æ³•å’Œç°ä»£å†™æ³•</h2>
<h3 id="0x00%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E7%9A%84%E4%BC%A0%E7%BB%9F%E5%86%99%E6%B3%95">0x00 æ‹·è´æ„é€ çš„ä¼ ç»Ÿå†™æ³•</h3>
<p><img alt="" height="187" src="image\864b87e3ec59478c91fcb244a4856bbb.png" width="449"/></p>
<p>å¯¹äºæ·±æ‹·è´ï¼Œä¼ ç»Ÿå†™æ³•å°±æ˜¯æœ¬æœ¬åˆ†åˆ†åˆ†åœ°å»å®Œæˆæ·±æ‹·è´ã€‚</p>
<p>ğŸ’¬ æˆ‘ä»¬åˆšæ‰å®ç°çš„æ–¹å¼ï¼Œç”¨çš„å°±æ˜¯ä¼ ç»Ÿå†™æ³•ï¼š</p>
<pre><code class="language-cpp">/* æ‹·è´æ„é€ å‡½æ•°ï¼šs2(s1) */
string(const string&amp; s)         // æ‹·è´æ„é€ å¿…é¡»ä½¿ç”¨å¼•ç”¨ä¼ å‚ï¼Œä¸€èˆ¬ç”¨constä¿®é¥° 
	: _size(s._size)            // å°†s1çš„sizeç»™ç»™s2
	, _capacity(s._capacity)    // å°†s1çš„capacityç»™ç»™s2
{
	_str = new char[_capacity + 1];   // å¼€è¾Ÿç©ºé—´
	strcpy(_str, s._str);             // å°†s1å­—ç¬¦ä¸²ç»™ç»™s2
}</code></pre>
<p>è¿™å°±æ˜¯ä¼ ç»Ÿå†™æ³•ï¼Œéå¸¸çš„è€å®ã€‚</p>
<p></p>
<h3 id="0x01%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0%E7%9A%84%E7%8E%B0%E4%BB%A3%E5%86%99%E6%B3%95">0x01 æ‹·è´æ„é€ çš„ç°ä»£å†™æ³•</h3>
<p>ç°åœ¨æˆ‘ä»¬æ¥ä»‹ç»ä¸€ç§ç°ä»£å†™æ³•ï¼Œå®ƒå’Œä¼ ç»Ÿå†™æ³•æœ¬è´¨å·¥ä½œæ˜¯ä¸€æ ·çš„ï¼Œå³å®Œæˆæ·±æ‹·è´ã€‚</p>
<p>ç°ä»£å†™æ³•çš„æ–¹å¼ä¸æ˜¯æœ¬æœ¬åˆ†åˆ†åœ°å»æŒ‰ç€ Step ä¸€æ­¥æ­¥å¹²æ´»ï¼Œè€Œæ˜¯ "æŠ•æœºå–å·§" åœ°å»å®Œæˆæ·±æ‹·è´ã€‚</p>
<p>ğŸ’¬ ç›´æ¥çœ‹ä»£ç ï¼š<span style="color:#be191c;">ï¼ˆä¸ºäº†æ–¹ä¾¿è®²è§£ï¼Œæˆ‘ä»¬æš‚ä¸è€ƒè™‘ _size å’Œ _capacityï¼‰</span></p>
<pre><code class="language-cpp">// ç°ä»£å†™æ³•
string(const string&amp; s)
	: _str(nullptr)        // ä¸ºtmpç½®ç©ºåšå‡†å¤‡
{
	string tmp(s._str);    
	swap(_str, tmp._str);  // äº¤æ¢
}</code></pre>
<p><img alt="" height="560" src="image\5b238f7ff977400f87d402cb977d3366.png" width="620"/></p>
<p><img alt="" height="185" src="image\0a884ed12acc46adbe25cf9afd113093.png" width="139"/>ç°ä»£å†™æ³•çš„æœ¬è´¨å°±æ˜¯å¤ç”¨äº†æ„é€ å‡½æ•°ã€‚</p>
<p>æˆ‘æƒ³æ‹·è´ï¼Œä½†æˆ‘åˆä¸æƒ³è‡ªå·±å¹²ï¼Œæˆ‘æŠŠæ´»äº¤ç»™å·¥å…·äºº<span style="color:#4da8ee;"> swap </span>æ¥å¸®æˆ‘å¹²ã€‚å¦™å•Šï¼èµ„æœ¬å®¶çœ‹äº†éƒ½è¯´å¥½ï¼</p>
<p></p>
<p>â“ æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œç»™ <span style="color:#0d0016;">_str</span> ä¸ªç©ºæŒ‡é’ˆï¼š</p>
<pre><code class="language-cpp">string(const string&amp; s)
	: _str(nullptr)</code></pre>
<p>æˆ‘ä»¬å¯ä»¥è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¯¹ä»–è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå®ƒçš„é»˜è®¤æŒ‡å‘ä¼šæ˜¯ä¸ªéšæœºå€¼ã€‚</p>
<p><img alt="" height="91" src="image\cd94cae9e645484da17111e6d2d1debe.png" width="397"/></p>
<p>è¿™æ ·äº¤æ¢çœ‹ä¸Šå»æ²¡å•¥é—®é¢˜ï¼Œç¡®å®èƒ½å®Œæˆæ·±æ‹·è´ï¼Œä½†æ˜¯ä¼šå¼•å‘ä¸€ä¸ªéšæ‚£ï¼</p>
<p><span style="color:#0d0016;">tmp</span> æ˜¯ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠ <span style="color:#4da8ee;">s2</span> åŸæ¥çš„æŒ‡é’ˆå’Œ <span style="color:#0d0016;">tmp </span>äº¤æ¢äº†ï¼Œé‚£ä¹ˆ <span style="color:#0d0016;">tmp </span>å°±æˆäº†ä¸ªéšæœºå€¼äº†ã€‚</p>
<p><span style="color:#0d0016;">tmp</span> å‡ºäº†ä½œç”¨åŸŸè¦è°ƒç”¨ææ„å‡½æ•°ï¼Œå¯¹éšæœºå€¼æŒ‡å‘çš„ç©ºé—´è¿›è¡Œé‡Šæ”¾ï¼Œæ€ä¹ˆé‡Šæ”¾ï¼Ÿ</p>
<p>éƒ½ä¸æ˜¯ä½ è‡ªå·±çš„ <span style="color:#956fe7;">new</span> / <span style="color:#956fe7;">malloc</span> å‡ºæ¥çš„ï¼Œä½ è¿˜ç¡¬è¦å¯¹å®ƒé‡Šæ”¾ï¼Œå°±å¯èƒ½ä¼šå¼•å‘å´©æºƒã€‚</p>
<p>ä½†æ˜¯ <span style="color:#956fe7;">delete</span> /<span style="color:#956fe7;"> free </span>ä¸€ä¸ªç©ºï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºä¼šè¿›è¡Œä¸€ä¸ªæ£€æŸ¥ã€‚</p>
<p>æ‰€ä»¥æ˜¯å¯ä»¥<span style="color:#956fe7;"> delete</span> ä¸€ä¸ªç©ºçš„ï¼Œæˆ‘ä»¬è¿™é‡Œåˆå§‹åŒ–åˆ—è¡¨ä¸­æŠŠ <span style="color:#6eaad7;">nullptr</span> ç»™<span style="color:#0d0016;"> _str</span>ï¼Œ</p>
<p>æ˜¯ä¸ºäº†äº¤æ¢å®Œä¹‹åï¼Œ <span style="color:#6eaad7;">nullptr</span> èƒ½äº¤åˆ°<span style="color:#0d0016;"> tmp </span>æ‰‹ä¸­ï¼Œè¿™æ ·<span style="color:#0d0016;"> tmp</span> å‡ºäº†ä½œç”¨åŸŸè°ƒç”¨ææ„å‡½æ•°å°±ä¸ä¼šç¿»è½¦äº†ã€‚</p>
<p>ğŸ æˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼š</p>
<p><img alt="" height="116" src="image\ce567ac514ea4e2d87069472daca81c5.png" width="416"/></p>
<p></p>
<p>ğŸ’¬ å¦‚æœè¿˜æ˜¯ä¸æ”¾å¿ƒï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ææ„å‡½æ•°é‚£è¿›è¡Œä¸€ä¸ªä¸¥æ ¼çš„æ£€æŸ¥ï¼š</p>
<pre><code class="language-cpp">/* ææ„å‡½æ•° */
~string() {
	if (_str != nullptr) {
		delete[] _str;
		_str = nullptr;
	}
	_size = _capacity = 0;
}</code></pre>
<p></p>
<h3 id="0x02%20%E8%B5%8B%E5%80%BC%E9%87%8D%E8%BD%BD%E7%9A%84%E7%8E%B0%E4%BB%A3%E5%86%99%E6%B3%95">0x02 èµ‹å€¼é‡è½½çš„ç°ä»£å†™æ³•</h3>
<p><img alt="" height="222" src="image\99348f95ac52429ab51061824750337a.png" width="478"/></p>
<p> ğŸ’¬ ä¼ ç»Ÿå†™æ³•ï¼š</p>
<pre><code class="language-cpp">/* èµ‹å€¼é‡è½½ï¼šs1 = s3 */
string&amp; operator=(const string&amp; s) {
	if (this != &amp;s) {                              // é˜²æ­¢è‡ªå·±ç»™è‡ªå·±èµ‹å€¼  
		char* tmp = new char[s._capacity + 1];     // Step1ï¼šå…ˆåœ¨tmpä¸Šå¼€è¾Ÿæ–°çš„ç©ºé—´
		strcpy(tmp, s._str);                       // Step2ï¼šæŠŠs3çš„å€¼èµ‹ç»™tmp
		delete[] _str;                             // Step3ï¼šé‡Šæ”¾åŸæœ‰çš„ç©ºé—´
		_str = tmp;                                // Step4ï¼šæŠŠtmpçš„å€¼èµ‹ç»™s1

		// æŠŠå®¹é‡å’Œå¤§å°èµ‹è¿‡å»
		_size = s._size;      
		_capacity = s._capacity;
	}

	return *this;   // ç»“æœè¿”å›*this
}</code></pre>
<p><img alt="" height="48" src="image\e034e9f7e379479489d7ce1793c626e8.png" width="50"/> ä¼ ç»Ÿå†™æ³•ï¼Œå…¨éƒ½è‡ªå·±å¹²ï¼Œè‡ªå·±å¼€ç©ºé—´è‡ªå·±æ‹·è´æ•°æ®ã€‚</p>
<p></p>
<p>ğŸ’¬ ç°ä»£å†™æ³•ï¼šå¤ç”¨æ‹·è´æ„é€ </p>
<pre><code class="language-cpp">/* èµ‹å€¼é‡è½½ï¼šs1 = s3 */
string&amp; operator=(const string&amp; s) {
	if (this != &amp;s) {
		string tmp(s);   // å¤ç”¨æ‹·è´æ„é€ 
		swap(_str, tmp._str);
	}

	return *this;
}</code></pre>
<p><img alt="" height="193" src="image\fb815c99368c436faebb9258276657dc.png" width="594"/></p>
<p>æˆ‘ä»¬å…ˆé€šè¿‡ <span style="color:#4da8ee;">s3 </span>æ‹·è´æ„é€ å‡º<span style="color:#0d0016;"> tmp</span>ï¼Œè¿™æ ·<span style="color:#0d0016;"> tmp</span> å°±æ˜¯ <span style="color:#0d0016;">_str </span>çš„å·¥å…·äººäº†ã€‚</p>
<p><span style="color:#0d0016;">tmp</span> é‡Œçš„ "<span style="color:#1c7331;">pig"</span> ï¼Œ<span style="color:#4da8ee;">s1 </span>çœ‹çš„ç®€ç›´æ˜¯å‚æ¶æ¬²æ»´ï¼Œæˆ‘ä»¬è®©<span style="color:#0d0016;"> tmp </span>å’Œ <span style="color:#4da8ee;">s1</span> äº¤æ¢ä¸€ä¸‹</p>
<p><img alt="" height="239" src="image\65e4897894564d63ad04fea0caca6f4d.png" width="592"/></p>
<p>äº¤æ¢å®Œä¹‹åï¼Œæ­£å¥½è®©<span style="color:#4da8ee;"> tmp </span>å‡ºä½œç”¨åŸŸè°ƒç”¨ææ„å‡½æ•°ï¼Œå±å®æ˜¯ä¸€çŸ³äºŒé¸Ÿçš„ç¾äº‹ã€‚</p>
<p>æŠŠ<span style="color:#4da8ee;"> tmp </span>å‹æ¦¨çš„å¹²å¹²å‡€å‡€ï¼Œè¿˜è®© <span style="color:#4da8ee;">tmp</span> å¸®å¿™æŠŠå±è‚¡æ“¦å¹²å‡€ï¼ˆé‡Šæ”¾ç©ºé—´ï¼‰ã€‚</p>
<p></p>
<p>âš¡ è¿˜æœ‰æ›´ç®€æ´çš„å†™æ³•ï¼š</p>
<pre><code class="language-cpp">/* èµ‹å€¼é‡è½½ï¼šs1 = s3 */
string&amp; operator=(string s) {
	swap(_str, s._str);
	return *this;
}</code></pre>
<p>å’Œä¸Šé¢çš„å†™æ³•æœ¬è´¨æ˜¯ä¸€æ ·çš„ã€‚è¿™ç§å†™æ³•ä¸ç”¨å¼•ç”¨ä¼ å‚ï¼Œå®ƒåˆ©ç”¨äº†æ‹·è´æ„é€ ã€‚</p>
<p>è¿™é‡Œçš„å½¢å‚<span style="color:#0d0016;"> s</span> å°±å……å½“äº†<span style="color:#0d0016;"> tmp</span>ï¼Œ<span style="color:#0d0016;">s</span> å°±æ˜¯<span style="color:#0d0016;"> </span><span style="color:#4da8ee;">s3</span> çš„æ‹·è´ï¼Œå†æŠŠ<span style="color:#0d0016;"> s1 </span>å’Œ <span style="color:#0d0016;">s </span>äº¤æ¢ã€‚ç®€ç›´æ˜¯ç‰©å°½å…¶ç”¨ï¼</p>
<p></p>
<p>ğŸ“Œ æ³¨æ„ï¼šä½†æ˜¯è¿™ç§å†™æ³•ä¹Ÿæœ‰å°ç¼ºç‚¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´è‡ªå·±ç»™è‡ªå·±èµ‹å€¼æ—¶åœ°å€è¢«æ¢ã€‚</p>
<p>ä½ ä¼šå‘ç°æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰åŠ ä¸ª<span style="color:#956fe7;"> if</span> å»åˆ¤æ–­è‡ªå·±ç»™è‡ªå·±èµ‹å€¼çš„é—®é¢˜äº†ã€‚</p>
<p>å› ä¸ºè¿™é‡Œæ²¡åŠæ³•åˆ¤æ–­è‡ªå·±ç»™è‡ªå·±èµ‹å€¼äº†ã€‚ä¹‹å‰ <span style="color:#0d0016;">s </span>å°±æ˜¯ <span style="color:#4da8ee;">s3</span>ï¼Œ<span style="color:#956fe7;">this </span>å°±æ˜¯<span style="color:#4da8ee;"> s1</span>ã€‚</p>
<p>ç°åœ¨<span style="color:#956fe7;"> this </span>è¿˜æ˜¯<span style="color:#4da8ee;"> s1</span>ï¼Œä½†æ˜¯ <span style="color:#0d0016;">s</span> å·²ç»ä¸æ˜¯<span style="color:#4da8ee;"> s3 </span>äº†ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸åˆ°è‡ªå·±</p>
<pre><code class="language-cpp">if (this != &amp;s)   ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ
     ğŸ‘†      ğŸ‘†
     s1      s1</code></pre>
<p><img alt="" height="46" src="image\eedccf94614a472bb7c72a9487f3b515.png" width="52"/> æ‰€ä»¥è¿™é‡ŒåŠ ä¸Š <span style="color:#956fe7;">if</span> åˆ¤æ–­ä¹Ÿæ²¡ç”¨ã€‚ä½†æ˜¯å…¶å®ä¹Ÿæ²¡å¤ªå¤§é—®é¢˜ï¼Œè°ä¼šè‡ªå·±ç»™è‡ªå·±èµ‹å€¼å•Šã€‚</p>
<p></p>
<h3 id="0x03%20%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81%E6%94%B9%E8%BF%9B">0x03 æ•´ä½“ä»£ç æ”¹è¿›</h3>
<p>æˆ‘ä»¬ç°åœ¨å†å»è€ƒè™‘ <span style="color:#0d0016;">_size </span>å’Œ <span style="color:#0d0016;">_capacity</span>ï¼Œæˆ‘ä»¬æ¥æŠŠä¹‹å‰å†™çš„ä¼ ç»Ÿå†™æ³•éƒ½æ”¹æˆç°ä»£å†™æ³•ã€‚</p>
<p>ğŸ’¬ æ‹·è´æ„é€ å‡½æ•°ï¼šs2(s1)</p>
<pre><code class="language-cpp">/* æ‹·è´æ„é€ å‡½æ•°ï¼šs2(s1) */
string(const string&amp; s)
	: _str(nullptr)        // ä¸ºtmpç½®ç©ºåšå‡†å¤‡
	, _size(0)
	, _capacity(0)
{
	string tmp(s._str);

	swap(_str, tmp._str);
	swap(_size, tmp._size);
	swap(_capacity, tmp._capacity);
}

</code></pre>
<p></p>
<p>ğŸ’¬ èµ‹å€¼é‡è½½å‡½æ•°ï¼šs1 = s3</p>
<pre><code class="language-cpp">/* èµ‹å€¼é‡è½½ï¼šs1 = s3 */
string&amp; operator=(string s) {
	swap(_str, s._str);
	swap(_size, s._size);
	swap(_capacity, s._capacity);

	return *this;
}</code></pre>
<p>è¿™é‡Œä¹Ÿæ˜¯è¿›è¡Œäº¤æ¢çš„ï¼ŒçœŸæ˜¯è·Ÿ<span style="color:#0d0016;"> tmp</span> äº¤æ¢æ”¹æˆäº†è·Ÿ <span style="color:#0d0016;">s</span> äº¤æ¢ã€‚</p>
<p>æˆ‘ä»¬ä¸å¦‚å†™ä¸€ä¸ª <span style="color:#4da8ee;">Swap</span> å‡½æ•°ï¼š</p>
<pre><code class="language-cpp">void Swap(string&amp; s) {
	swap(_str, s._str);
	swap(_size, s._size);
	swap(_capacity, s._capacity);
}</code></pre>
<p></p>
<p>è¿™æ ·å°±å¾ˆç®€å•äº† â€”â€”</p>
<pre><code class="language-cpp">/* æ‹·è´æ„é€ å‡½æ•°ï¼šs2(s1) */
string(const string&amp; s)
	: _str(nullptr)        // ä¸ºtmpç½®ç©ºåšå‡†å¤‡
	, _size(0)
	, _capacity(0)
{
	string tmp(s._str);
	Swap(tmp);             // this-&gt;Swap(tmp);
}

/* èµ‹å€¼é‡è½½ï¼šs1 = s3 */
string&amp; operator=(string s) {
	Swap(s);
	return *this;
}</code></pre>
<p></p>
<h3 id="0x04%20%E6%80%BB%E7%BB%93">0x04 æ€»ç»“</h3>
<p><img alt="" height="47" src="image\3935c44138fe460d8b6835369a4bde0f.png" width="58"/> ç°ä»£å†™æ³•åœ¨ string ä¸­ä½“ç°çš„ä¼˜åŠ¿è¿˜ä¸å¤Ÿå¤§ï¼Œå› ä¸ºå¥½åƒå’Œä¼ ç»Ÿå†™æ³•å·®ä¸å¤šã€‚</p>
<p> ä½†æ˜¯åˆ°åé¢æˆ‘ä»¬å®ç° vectorã€list çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ç°ä»£å†™æ³•çš„ä¼˜åŠ¿çœŸçš„æ˜¯å¤ªå¤§äº†ã€‚</p>
<p>ç°ä»£å†™æ³•å†™èµ·æ¥ä¼šæ›´ç®€å•äº›ï¼Œæ¯”å¦‚å¦‚æœæ˜¯ä¸ªé“¾è¡¨ï¼Œä¼ ç»Ÿå†™æ³•å°±ä¸æ˜¯ <span style="color:#956fe7;">strcpy</span> è¿™ä¹ˆç®€å•çš„äº†ï¼Œ</p>
<p>ä½ è¿˜è¦ä¸€ä¸ªä¸€ä¸ªç»“ç‚¹æ‹·è´è¿‡å»ï¼Œä½†æ˜¯ç°ä»£å†™æ³•åªéœ€è¦è°ƒç”¨ <span style="color:#956fe7;">swap </span>äº¤æ¢ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>ç°ä»£å†™æ³•æ›´åŠ ç®€æ´ï¼Œåªæ˜¯åœ¨<span style="color:#956fe7;"> string</span> è¿™é‡Œä¼˜åŠ¿ä½“ç°çš„ä¸æ˜æ˜¾ç½¢äº†ï¼Œæˆ‘ä»¬åé¢å¯ä»¥æ…¢æ…¢ä½“ä¼šã€‚<br/>  </p>
<p></p>
<h2 id="%E2%85%A5.%20operator%20%E8%BF%90%E7%AE%97%E7%AC%A6%E9%87%8D%E8%BD%BD">â…¥. operator è¿ç®—ç¬¦é‡è½½</h2>
<h3>0x00 å¼•å…¥</h3>
<p>å­¦æ—¥æœŸç±»çš„æ—¶å€™æˆ‘ä»¬å°±è¯´è¿‡ï¼Œæˆ‘ä»¬åªéœ€å®ç° &lt; å’Œ ==ï¼Œå‰©ä¸‹çš„éƒ½å¯ä»¥å¤ç”¨è§£å†³ã€‚</p>
<p></p>
<h3 id="0x00%20operator%3C">0x00 operator&lt;</h3>
<p>ğŸ’¬ æˆ‘ä»¬åœ¨å…¨å±€å®ç°ï¼š</p>
<pre><code class="language-cpp">/* s1 &lt; s2*/
bool operator&lt;(const string&amp; s1, const string&amp; s2) {
	size_t i1 = 0, i2 = 0;
	while (i1 &lt; s1.size() &amp;&amp; i1 &lt; s2.size()) {
		if (s1[i1] &lt; s2[i2]) {
			return true;
		} 
		else if (s1[i1] &gt; s2[i2]) {
			return false;
		}
		else {
			i1++;
			i2++;
		}
	}
	return i2 &lt; s2.size() ? true : false;
}</code></pre>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®ç°çš„æ›´ç®€å•äº›ï¼Œç›´æ¥ç”¨ <span style="color:#ad720d;">strcmp</span> å·ä¸ªæ‡’ï¼š</p>
<pre><code class="language-cpp">/* s1 &lt; s2*/
bool operator&lt;(const string&amp; s1, const string&amp; s2) {
	return strcmp(s1.c_str(), s2.c_str()) &lt; 0;
}</code></pre>
<p></p>
<h3 id="0x01%20operator%3D">0x01 operator=</h3>
<p>ğŸ’¬ å…¨å±€ä½œç”¨åŸŸä¸‹ï¼š</p>
<pre><code class="language-cpp">/* s1 == s2 */
bool operator==(const string&amp; s1, const string&amp; s2) {
	return strcmp(s1.c_str(), s2.c_str()) == 0;
}</code></pre>
<p></p>
<h3 id="0x02%20%E5%89%A9%E4%B8%8B%E7%9A%84%E7%9B%B4%E6%8E%A5%E5%A4%8D%E7%94%A8">0x02 å‰©ä¸‹çš„ç›´æ¥å¤ç”¨</h3>
<p>ğŸ’¬<span style="color:#956fe7;"> operator&lt;=</span></p>
<pre><code class="language-cpp">	/* s1 &lt;= s2 */
	bool operator&lt;=(const string&amp; s1, const string&amp; s2) {
		return s1 &lt; s2 || s1 == s2;
	}
</code></pre>
<p></p>
<p>ğŸ’¬ <span style="color:#956fe7;">operator&gt;</span></p>
<pre><code class="language-cpp">    /* s1 &gt; s2 */
	bool operator&gt;(const string&amp; s1, const string&amp; s2) {
		return !(s1 &lt;= s2);
	}</code></pre>
<p></p>
<p>ğŸ’¬ <span style="color:#956fe7;">operator&gt;=</span></p>
<pre><code class="language-cpp">	/* s1 &gt;= s2 */
	bool operator&gt;=(const string&amp; s1, const string&amp; s2) {
		return !(s1 &lt; s2);
	}</code></pre>
<p></p>
<p>ğŸ’¬ <span style="color:#956fe7;">operator!=</span></p>
<pre><code class="language-cpp">	/* s1 != s2 */
	bool operator!=(const string&amp; s1, const string&amp; s2) {
		return !(s1 == s2);
	}
</code></pre>
<p></p>
<p></p>
<h2 id="%E2%85%A6.%C2%A0%20%E6%B5%81%E6%8F%92%E5%85%A5%E5%92%8C%E6%B5%81%E6%8F%90%E5%8F%96">â…¦.  æµæ’å…¥å’Œæµæå–</h2>
<h3>0x00 å¼•å…¥</h3>
<p><img alt="" height="80" src="image\fb7ed51284cf437b840b59b741b408e7.png" width="79"/> æˆ‘ä»¬å½“æ—¶å®ç°æ—¥æœŸç±»çš„æµæ’å…¥å’Œæµæå–æ—¶ï¼Œä¹Ÿè¯¦ç»†è®²è¿‡è¿™äº›ï¼Œå½“æ—¶è®²è§£äº†å‹å…ƒã€‚</p>
<p> åœ¨å‹å…ƒé‚£ä¸€ç« æˆ‘ä»¬è¯´è¿‡ "å å‚é—®é¢˜" ï¼Œè¿™é‡Œå°±ä¸å†å¤šåšè§£é‡Šäº†ã€‚</p>
<p>å¦‚éœ€å¤ä¹ çŒ›æˆ³ ğŸ‘‡</p>
<p><a href="https://blog.csdn.net/weixin_50502862/article/details/123616212" title="ã€C++è¦ç¬‘ç€å­¦ã€‘å‹å…ƒ | åˆå§‹åŒ–åˆ—è¡¨ | å…³é”®å­—explicit | é™æ€æˆå‘˜static | å†…éƒ¨ç±»">ã€C++è¦ç¬‘ç€å­¦ã€‘å‹å…ƒ | åˆå§‹åŒ–åˆ—è¡¨ | å…³é”®å­—explicit | é™æ€æˆå‘˜static | å†…éƒ¨ç±»</a></p>
<p></p>
<p>å¦‚æœæˆ‘ä»¬é‡è½½æˆæˆå‘˜å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªä½ç½®å°±ä¼šè¢«éšå«çš„ this æŒ‡é’ˆå æ®ã€‚</p>
<p>è¿™æ ·å®ç°å‡ºæ¥çš„æµæ’å…¥å¿…ç„¶ä¼šä¸ç¬¦åˆæˆ‘ä»¬çš„ä½¿ç”¨ä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©åœ¨å…¨å±€å®ç°ã€‚</p>
<p>åœ¨å…¨å±€é‡Œä¸å­˜åœ¨éšå«çš„<span style="color:#956fe7;"> this</span> æŒ‡é’ˆäº†ã€‚</p>
<p></p>
<h3 id="0x01%20%E5%AE%9E%E7%8E%B0%20operator%3C%3C">0x01 operator&lt;&lt; çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#956fe7;">operator&lt;&lt;</span></p>
<pre><code class="language-cpp">// cout &lt;&lt; s1  â†’  operator&lt;&lt;(cout, s1)
ostream&amp; operator&lt;&lt;(ostream&amp; out, const string&amp; s) {
	//for (auto ch : s) {
	//	out &lt;&lt; ch;
	//}

	for (size_t i = 0; i &lt; s.size(); i++) {
		out &lt;&lt; s[i];
	}

	return out;
}</code></pre>
<p></p>
<h3 id="0x02%20%E5%AE%9E%E7%8E%B0%20operator%3E%3E">0x02 operator&gt;&gt; çš„å®ç°</h3>
<p>ğŸ’¬ <span style="color:#956fe7;">operator&gt;&gt;</span></p>
<pre><code class="language-cpp">// cin &gt;&gt;
istream&amp; operator&lt;&lt;(istream&amp; in, string&amp; s) {
	char ch = in.get();
	while (ch == '\n') {
		s += ch;
		ch = in.get();
	}

	return in;
}</code></pre>
<p></p>
<h2 id="%E2%85%A7.%C2%A0%20%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">â…§.  å®Œæ•´ä»£ç </h2>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;assert.h&gt;
using namespace std;

namespace chaos
{
	class string {
	public:
		/* æ„é€ å‡½æ•° */
		string(const char* str = "")
			: _size(strlen(str))        // è®¡ç®—å‡ºå­—ç¬¦ä¸²strçš„å¤§å°
			, _capacity(_size) {        // åˆå§‹å®¹é‡ç­‰äºå­—ç¬¦ä¸²å¤§å°

			_str = new char[_capacity + 1];   // å¼€è¾Ÿä¸€å— "å®¹é‡+1" å¤§å°çš„ç©ºé—´ (_capacityå­˜çš„æ˜¯æœ‰æ•ˆå­—ç¬¦ï¼‰
			strcpy(_str, str);                // å°†ä¼ å…¥çš„å­—ç¬¦ä¸²strå¤åˆ¶åˆ° _strä¸­
		}

		void Swap(string&amp; tmp) {
			swap(_str, tmp._str);
			swap(_size, tmp._size);
			swap(_capacity, tmp._capacity);
		}

		/* æ‹·è´æ„é€ å‡½æ•°ï¼šs2(s1) 
		string(const string&amp; src)
			: _size(src._size)                // æ‹·è´stringå¤§å°
			, _capacity(src._capacity) {      // æ‹·è´stringå®¹é‡

			// æ‹·è´stringå†…å®¹
			_str = new char[src._capacity + 1];        // å¼€è¾Ÿä¸€å—å’Œsrcç›¸åŒå®¹é‡çš„ç©ºé—´
			strcpy(_str, src._str);					   // å°†srcä¸­çš„_strå†…å®¹æ‹·è´åˆ°è‡ªå·±çš„_strä¸­
		}
		*/
		string(const string&amp; src)
			: _str(nullptr)
			, _size(0)
			, _capacity(0) {

			string tmp(src._str);   // æ‹·è´æ„é€ ä¸€ä¸ªsrc
			Swap(tmp);              // ç°ä»£å†™æ³•ï¼šäº¤æ¢
		}
	

		/* èµ‹å€¼é‡è½½ï¼šs1 = s3
		string&amp; operator=(const string&amp; src) {
			// é˜²æ­¢è‡ªå·±è·Ÿè‡ªå·±èµ‹å€¼
			if (this != &amp;src) {
				// 1. æš‚æ—¶ç”¨tmpå¼€è¾Ÿä¸€å—ç›¸åŒçš„ç©ºé—´
				char* tmp = new char[src._capacity + 1];
				// 2. æŠŠsrcçš„å€¼å¤åˆ¶ç»™tmp
				strcpy(tmp, src._str);
				// 3. é‡Šæ”¾thisåŸç©ºé—´
				delete[] _str;
				// 4. æ²¡ç¿»è½¦ï¼ŒæŠŠtmpäº¤ä»˜ç»™_src
				_str = tmp;

				_size = src._size;
				_capacity = src._capacity;
			}
			return *this;
		}

		string&amp; operator=(const string&amp; src) {
			// é˜²æ­¢è‡ªå·±è·Ÿè‡ªå·±èµ‹å€¼
			if (this != &amp;src) {
				string tmp(src);   // å¤ç”¨æ‹·è´æ„é€ 
				Swap(tmp);
			}
			return *this;
		}
		*/
		string&amp; operator=(string src) {
			Swap(src);    // æ­£å¥½è°ƒç”¨æ‹·è´æ„é€ ï¼Œä¸å¦‚è®©å½¢å‚å……å½“tmp
			return *this;
		}


		/* è¿”å›Cæ ¼å¼çš„å­—ç¬¦ä¸²ï¼šc_str */
		const char* c_str() const {
			return _str;
		}

		/* æ±‚å­—ç¬¦ä¸²å¤§å°ï¼šsize() */
		size_t size() const {
			return _size;
		}

		/* operator[] */
		char&amp; operator[](size_t pos) {
			assert(pos &lt; _size);
			return _str[pos];  // è¿”å›å­—ç¬¦ä¸²å¯¹åº”ä¸‹æ ‡ä½ç½®çš„å…ƒç´ 
		}
		const char&amp; operator[](size_t pos) const {
			assert(pos &lt; _size);
			return _str[pos];
		}

		/* è¿­ä»£å™¨ */
		typedef char* iterator;
		iterator begin() { 
			return _str;            // è¿”å›ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®
		}
		iterator end() {
			return _str + _size;    // è¿”å›æœ€åä¸€ä¸ªå­—ç¬¦çš„ä½ç½®
		}

		/* constè¿­ä»£å™¨ */
		typedef const char* const_iterator;
		const_iterator begin() const {
			return _str;
		}
		const_iterator end() const {
			return _str + _size;
		}

		/* reserve() */
		void reserve(size_t new_capacity) {
			if (new_capacity &gt; _capacity) {               // æ£€æŸ¥æ˜¯å¦çœŸçš„éœ€è¦æ‰©å®¹
				char* tmp = new char[new_capacity + 1];   // å¼€ç©ºé—´
				strcpy(tmp, _str);						  // å…ˆæ¬è¿æ•°æ®åˆ°tmp

				_str = tmp;								  // æ²¡ç¿»è½¦ï¼Œé€’äº¤ç»™_str
				_capacity = new_capacity;				  // æ›´æ–°å®¹é‡
			}
		}

		/* å­—ç¬¦å°¾æ’ï¼špush_back() */
		void push_back(char append_ch) {
			/*
			if (_size == _capacity) {                         // æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹
				reserve(_capacity == 0 ? 4 : _capacity * 2);  // é¦–æ¬¡ç»™4ï¼Œå…¶ä»–æƒ…å†µé»˜è®¤æ‰©2å€
			}

			_str[_size] = append_ch;     // æ’å…¥è¦è¿½åŠ çš„å­—ç¬¦
			_size++;						 
			_str[_size] = '\0';	         // æ‰‹åŠ¨æ·»åŠ '\0'
			*/

			insert(_size, append_ch);
		}

		/* å­—ç¬¦ä¸²è¿½åŠ ï¼šappend() */
		void append(const char* append_str) {
			/*
			size_t len = strlen(append_str);      // è®¡ç®—å‡ºè¦è¿½åŠ çš„å­—ç¬¦ä¸²çš„é•¿åº¦
			if (_size + len &gt; _capacity) {		  // æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹
				reserve(_size + len);
			}

			strcpy(_str + _size, append_str);      // é¦–å­—ç¬¦+å¤§å°ï¼Œå°±æ˜¯'\0'ä½ç½®
			_size += len;						   // æ›´æ–°å¤§å°
			*/
			
			insert(_size, append_str);
		}

		/* operator+= */
		string&amp; operator+=(char append_ch) {
			push_back(append_ch);
			return *this;
		}
		string&amp; operator+=(const char* append_str) {
			append(append_str);
			return *this;
		}

		/* insert */
		string&amp; insert(size_t pos, char append_ch) {
			assert(pos &lt;= _size);

			if (_size == _capacity) {		// æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹
				reserve(_capacity == 0 ? 4 : _capacity * 2);
			}

			// å‘åæŒªåŠ¨æ•°æ®
			size_t end = _size + 1;
			while (end &gt; pos) {
				_str[end] = _str[end - 1];
				end--;
			}

			// æ’å…¥
			_str[pos] = append_ch;
			_size++;

			return *this;
		}
		string&amp; insert(size_t pos, const char* append_str) {
			assert(pos &lt;= _size);
			size_t len = strlen(append_str);

			if (_size + len &gt; _capacity) {    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
				reserve(_size + len);
			}

			// å‘åæŒªåŠ¨æ•°æ®
			size_t end = _size + len;
			while (end &gt; pos + len - 1) {
				_str[end] = _str[end - len];
				end--;
			}

			// æ’å…¥
			strncpy(_str + pos, append_str, len);
			_size += len;

			return *this;
		}

		/* resize */
		void resize(size_t new_capacity, char init_ch = '\0') {
			// å¦‚æœæ¬²å¢å®¹é‡æ¯”_sizeå°
			if (new_capacity &lt;= _size) {
				_str[new_capacity] = '\0';      // æ‹¿æ–œæ é›¶å»æˆªæ–­
				_size = new_capacity;           // æ›´æ–°å¤§å°
			}
			// æ¬²å¢å®¹é‡æ¯”_sizeå¤§
			else {
				if (new_capacity &gt; _capacity) {
					reserve(new_capacity);
				}
				// èµ·å§‹ä½ç½®ï¼Œåˆå§‹åŒ–å­—ç¬¦ï¼Œåˆå§‹åŒ–ä¸ªæ•°
				memset(_str + _size, init_ch, new_capacity - _size);
				_size = _capacity;
				_str[_size] = '\0';
			}
		}

		/* find */
		size_t find(char aim_ch) {
			for (size_t i = 0; i &lt; _size; i++) {
				if (aim_ch == _str[i]) {
					// æ‰¾åˆ°äº†
					return i;    // è¿”å›ä¸‹æ ‡
				}
			}
			// æ‰¾ä¸åˆ°
			return npos;
		}
		size_t find(const char* aim_str, size_t pos = 0) {
			const char* ptr = strstr(_str + pos, aim_str);
			if (ptr == nullptr) {
				return npos;
			}
			else {
				return ptr - _str;  // å‡å¼€å¤´
			}
		}

		/* åˆ é™¤ï¼šerase */
		string&amp; erase(size_t pos, size_t len = npos) {
			assert(pos &lt; _size);

			if (len == pos || pos + len &gt;= _size) {
				_str[pos] = '\0';    // æ”¾ç½®\0æˆªæ–­
				_size = pos;
			}
			else {
				strcpy(_str + pos, _str + pos + len);
				_size -= len;
			}

			return *this;
		}

		/* ææ„å‡½æ•° */
		~string() {
			if (_str != nullptr) {
				delete[] _str;
				_str = nullptr;
			}
			_size = _capacity = 0;
		}

	private:
		/* æˆå‘˜å˜é‡ */
		char* _str;
		size_t _size;
		size_t _capacity;

	public:
		static const size_t npos;
	};

	/* åˆå§‹åŒ–npos */
	const size_t string::npos = -1;   // æ— ç¬¦å·æ•´å‹çš„-1ï¼Œå³æ•´å‹æœ€å¤§å€¼

	/* s1 &lt; s2*/
	bool operator&lt;(const string&amp; s1, const string&amp; s2) {
		/*
		size_t i1 = 0, i2 = 0;
		while (i1 &lt; s1.size() &amp;&amp; i1 &lt; s2.size()) {
			if (s1[i1] &lt; s2[i2]) {
				return true;
			}
			else if (s1[i1] &gt; s2[i2]) {
				return false;
			}
			else {
				i1++;
				i2++;
			}
		}
		return i2 &lt; s2.size() ? true : false;
		*/

		return strcmp(s1.c_str(), s2.c_str()) &lt; 0;
	}

	/* s1 == s2 */
	bool operator==(const string&amp; s1, const string&amp; s2) {
		return strcmp(s1.c_str(), s2.c_str()) == 0;
	}

	/* s1 &lt;= s2 */
	bool operator&lt;=(const string&amp; s1, const string&amp; s2) {
		return s1 &lt; s2 || s1 == s2;
	}

	/* s1 &gt; s2 */
	bool operator&gt;(const string&amp; s1, const string&amp; s2) {
		return !(s1 &lt;= s2);
	}

	/* s1 &gt;= s2 */
	bool operator&gt;=(const string&amp; s1, const string&amp; s2) {
		return !(s1 &lt; s2);
	}


	/* s1 != s2 */
	bool operator!=(const string&amp; s1, const string&amp; s2) {
		return !(s1 == s2);
	}

	// cout &lt;&lt; s1  â†’  operator&lt;&lt;(cout, s1)
	ostream&amp; operator&lt;&lt;(ostream&amp; out, const string&amp; s) {
		/*
		for (auto ch : s) {
			out &lt;&lt; ch;
		}
		*/

		for (size_t i = 0; i &lt; s.size(); i++) {
			out &lt;&lt; s[i];
		}

		return out;
	}

	// cin &gt;&gt;
	istream&amp; operator&lt;&lt;(istream&amp; in, string&amp; s) {
		char ch = in.get();
		while (ch == '\n') {
			s += ch;
			ch = in.get();
		}

		return in;
	}



	/* æµ‹è¯•ç”¨ */
	void test_string1() {
		string s1("hello world");
		string s2(s1);
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
		cout &lt;&lt; s2.c_str() &lt;&lt; endl;

		string s3("pig");
		cout &lt;&lt; s3.c_str() &lt;&lt; endl;

		s1 = s3;
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}

	void test_string2() {
		string s1("hello world");
		string s2;

		for (size_t i = 0; i &lt; s1.size(); i++) {
			cout &lt;&lt; s1[i] &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}

	void test_string3() {
		string s1("hello world");
		string s2;

		s1[0] = 'F';
		for (size_t i = 0; i &lt; s1.size(); i++) {
			cout &lt;&lt; s1[i] &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}

	void test_string4() {
		string s1("hello world");

		// è¿­ä»£å™¨å†™
		string::iterator it = s1.begin();
		while (it != s1.end()) {
			*it += 1;
			it++;
		}

		// è¿­ä»£å™¨è¯»
		it = s1.begin();   // é‡ç½®èµ·ç‚¹
		while (it != s1.end()) {
			cout &lt;&lt; *it &lt;&lt; " ";
			it++;
		}
	}

	void test_string5() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('!');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.push_back('A');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}

	void test_string6() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += '!';
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1 += "this is new data";
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}

	void test_string7() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.insert(0, 'X');
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.insert(0, "hahahaha");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;
	}

	void test_string8() {
		string s1("hello world");
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.erase(5, 2);   // ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼Œåˆ ä¸¤ä¸ªå­—ç¬¦
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

		s1.erase(5, 20);  // ä»ç¬¬äº”ä¸ªä½ç½®å¼€å§‹ï¼Œåˆ å®Œ
		cout &lt;&lt; s1.c_str() &lt;&lt; endl;

	}
}

</code></pre>
<p></p>
<p></p>
<hr/>
<p style="text-align:right;"><strong>ğŸ“œ å‚è€ƒèµ„æ–™</strong></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">Microsoft. MSDN(Microsoft Developer Network)[EB/OL]. []. .</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">. C++reference[EB/OL]. []. http://www.cplusplus.com/reference/.</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">ç™¾åº¦ç™¾ç§‘[EB/OL]. []. https://baike.baidu.com/.</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">æ¯”ç‰¹ç§‘æŠ€. C++[EB/OL]. 2021[2021.8.31]. .</span></p>
<blockquote>
<p>ğŸ“Œ<strong> [ ç¬”è€… ]   </strong>ç‹äº¦ä¼˜</p>
<p>ğŸ“ƒ<strong> [ æ›´æ–° ]   </strong>2022.5.6</p>
<p>âŒ<strong> [ å‹˜è¯¯ ] </strong>  /* æš‚æ—  */</p>
<p>ğŸ“œ<strong> [ å£°æ˜ ]</strong>   ç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œæœ¬æ–‡æœ‰é”™è¯¯å’Œä¸å‡†ç¡®ä¹‹å¤„åœ¨æ‰€éš¾å…ï¼Œæœ¬äººä¹Ÿå¾ˆæƒ³çŸ¥é“è¿™äº›é”™è¯¯ï¼Œæ³æœ›è¯»è€…æ‰¹è¯„æŒ‡æ­£ï¼</p>
</blockquote>
<p>æœ¬ç« å®Œã€‚</p>
</div>
</div>