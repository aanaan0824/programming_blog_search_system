<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p>对于一个项目来说，如果能够把软件打包成单个 exe 可执行文件，无需安装，下载后直接打开即可使用，就可以极大地方便用户使用，从而增加用户使用你的产品的意愿。同时，依托于 .NET 的原生优势，一般大小的软件打包出来的单个 exe 文件仅会有几 MB 大小。下面来说如何实现，对 <strong>WPF 、Winform</strong> 项目均有效。</p>
<h2><a id="NET_Core_3__2"></a>一、.NET Core 3 之后的版本</h2>
<p>在 .NET Core 3 之后的版本中，有如下两个功能：</p>
<ul><li><a href="https://docs.microsoft.com/en-us/dotnet/core/whats-new/dotnet-core-3-0#single-file-executables">Single-file executables</a></li><li><a href="https://docs.microsoft.com/en-us/dotnet/core/whats-new/dotnet-core-3-0#assembly-linking">Assembly linking</a></li></ul>
<p>能够直接生成单个 exe 可执行文件。下面以 Single-file executables 为例：</p>
<ol><li> <p>将 <code>&lt;PublishSingleFile&gt;true&lt;/PublishSingleFile&gt;</code> 添加到项目文件。</p> </li><li> <p>在“解决方案资源管理器”窗格中，右键单击要发布的项目 。 选择“发布”。<br/> <img alt="解决方案资源管理器，其中右键单击菜单突出显示了“发布”选项。" src="https://docs.microsoft.com/zh-cn/dotnet/core/deploying/media/single-file/visual-studio-solution-explorer.png" width="500"/><br/> 如果还没有发布配置文件，请按照说明创建一个并选择“文件夹”目标类型 。</p> </li><li> <p>选择“编辑” 。<br/> <img alt="带有“编辑”按钮的 Visual Studio 发布配置文件。" src="https://docs.microsoft.com/zh-cn/dotnet/core/deploying/media/single-file/visual-studio-publish-edit-settings.png" width="500"/></p> </li><li> <p>在“配置文件设置”对话框中，设置以下选项 ：</p>
<ul><li>将“部署模式”设置为“独立式”或“依赖于框架”。</li><li>将“目标运行时”设置为要发布到的平台 。 （必须是除“可移植”以外的设置。）</li><li>选择“生成单个文件”。</li></ul> <p>选择“保存”保存设置并返回到“发布”对话框 。<br/> <img alt="“配置文件设置”对话框，其中突出显示了“部署模式”、“目标运行时”和“单个文件”选项。" src="https://docs.microsoft.com/zh-cn/dotnet/core/deploying/media/single-file/visual-studio-publish-single-file-properties.png" width="500"/></p> </li><li> <p>选择“发布”，将应用作为单个文件发布。</p> </li></ol>
<p>更多参阅<a href="https://docs.microsoft.com/zh-cn/dotnet/core/deploying/single-file">微软文档</a></p>
<h2><a id="NET_Core_3__NET_Framework_32"></a>二、.NET Core 3 之前的 旧版本、.NET Framework</h2>
<p>可是对于其他以前版本，如 <strong>.NET Framework</strong> 来说，并没有这个功能，要想把项目打包成单个 exe 可执行文件，可以借助于一个名为 <a href="https://github.com/Fody/Costura">Costura Fody</a> 的开源包（Package）</p>
<h3><a id="_NuGet__35"></a>通过 NuGet 安装</h3>
<p>如下图，依次点击 Tools -&gt; NuGet Package Manager -&gt; Package Manager Console （不难看懂，我就不翻译了）<br/> <img alt="drawing" src="https://img-blog.csdnimg.cn/2bcec43bbbbf49f9b2071138f63e0ebb.png" width="500"/></p>
<p>然后在弹出的 Console 控制台 终端 中，依次输入：</p>
<pre><code>Install-Package Fody
Install-Package Costura.Fody
</code></pre>
<p>安装完这两个包之后，直接运行你的项目，然后就可以在项目的 <code>\bin\Debug</code> 目录中找到生成的单个 exe 可执行文件</p>
<p>文件夹中可能还有之前生成的文件没有删除，可以把 exe 文件单独复制到桌面，看看能不能打开，以验证是否成功</p>
<p><a href="https://github.com/Fody/Costura">更多说明见其主页</a></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>