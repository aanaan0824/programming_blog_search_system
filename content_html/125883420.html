<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/843e17920bef4a878dacaa22eb09846f.png#pic_center"/><br/> 如图所示，JS的三座大山：</p>
<ul><li>同步、异步</li><li>作用域、闭包</li><li>原型、原型链</li></ul>
<h2><a id="1__6"></a>1. 同步、异步</h2>
<p><strong>JavaScript执行机制，重点有两点：</strong></p>
<ol><li>JavaScript是一门单线程语言</li><li>Event Loop(事件循环)是JavaScript的执行机制</li></ol>
<p><strong>JS为什么是单线程</strong></p>
<blockquote>
<p>最初设计JS是用来在浏览器验证表单操控DOM元素的是一门脚本语言，如果js是多线程的，那么两个线程同时对一个DOM元素进行了相互冲突的操作，那么浏览器的解析器是无法执行的。</p>
</blockquote>
<p><strong>js为什么需要异步</strong></p>
<blockquote>
<p>如果js中不存在异步，只能自上而下执行，如果上一行解析时间很长，那么下面的代码就会被阻塞。<br/> 对于用户而言，阻塞就以为着“卡死”，这样就导致了很差的用户体验。比如在进行ajax请求的时候如果没有返回数据后面的代码就没办法执行</p>
</blockquote>
<p><strong>JS的事件循环（eventloop）是怎么运作的</strong></p>
<ol><li> <p>首先判断JS是同步还是异步，同步就进入主线程运行，异步就进入event table.</p> </li><li> <p>异步任务在event table中注册事件，当满足触发条件后，（触发条件可能是延时也可能是ajax回调），被推入event queue</p> </li><li> <p>同步任务进入主线程后一直执行，直到主线程空闲时，才会去event queue中查看是否有可执行的异步任务，如果有就推入主线程中。<br/> <strong>如图所示：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/aa6f91eadc2448899a5a055dbeae9f6e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn6I6y6IqS,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>那怎么知道主线程执行栈为空呢？js引擎存在<strong>monitoring process</strong>进程，会持续不断的检查 主线程<strong>执行栈</strong>是否为空，一旦为空，就会去<strong>event queue</strong>那里检查是否有等待被调用的函数</p>
</blockquote> <p><strong>宏任务</strong> 包含整个script代码块，setTimeout, setIntval<br/> <strong>微任务</strong> Promise , process.nextTick</p>
<blockquote>
<p>在划分宏任务、微任务的时候并没有提到async/ await的本质就是Promise</p>
</blockquote> <pre><code class="prism language-javascript"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span> <span class="token comment">// 同步任务</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span>
执行结果： <span class="token number">1</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">-</span><span class="token number">3</span><span class="token operator">-</span><span class="token number">4</span>
<span class="token number">1.</span> 这段代码作为宏任务，进入主线程。
<span class="token number">2.</span> 先遇到setTimeout，那么将其回调函数注册后分发到宏任务event queue<span class="token punctuation">.</span>
<span class="token number">3.</span> 接下来遇到Promise<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span>立即执行，then函数分发到微任务event queue
<span class="token number">4.</span> 遇到console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 立即执行
<span class="token number">5.</span> 整体代码script作为第一个宏任务执行结束， 查看当前有没有可执行的微任务，执行then的回调。（第一轮事件循环结束了，我们开始第二轮循环）
<span class="token number">6.</span> 从宏任务的event queue开始，我们发现了宏任务event queue中setTimeout对应的回调函数，立即执行。

</code></pre> <pre><code class="prism language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">)</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11'</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token number">1.</span>整体script作为第一个宏任务进入主线程，遇到console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>输出<span class="token number">1</span>

遇到setTimeout<span class="token punctuation">,</span> 其回调函数被分发到宏任务event queue中。我们暂且记为setTimeout1
<span class="token number">3.</span>遇到process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>其回调函数被分发到微任务event queue中，我们记为process1
<span class="token number">4.</span>遇到Promise<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span>直接执行，输出<span class="token number">7</span><span class="token punctuation">.</span>then被分发到微任务event queue中，我们记为then1
又遇到setTimeout<span class="token punctuation">,</span>其回调函数被分发到宏任务event queue中，我们记为setTimeout2<span class="token punctuation">.</span>
现在开始执行微任务， 我们发现了process1和then1两个微任务，执行process1<span class="token punctuation">,</span>输出<span class="token number">6</span>，执行then1<span class="token punctuation">,</span>输出<span class="token number">8</span>， 第一轮事件循环正式结束， 这一轮的结果输出<span class="token number">1</span>，<span class="token number">7</span>，<span class="token number">6</span>，<span class="token number">8.</span>那么第二轮事件循环从setTimeout1宏任务开始
<span class="token number">5.</span> 首先输出<span class="token number">2</span>， 接下来遇到了process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>统一被分发到微任务event queue，记为process2
8new Promise立即执行，输出<span class="token number">4</span>，then也被分发到微任务event queue中，记为then2
<span class="token number">6.</span> 现在开始执行微任务，我们发现有process2和then2两个微任务可以执行输出<span class="token number">3</span>，<span class="token number">5.</span> 第二轮事件循环结束，第二轮输出<span class="token number">2</span>，<span class="token number">4</span>，<span class="token number">3</span>，<span class="token number">5.</span> 第三轮事件循环从setTimeout2哄任务开始
<span class="token number">10</span>。 直接输出<span class="token number">9</span>，跟第二轮事件循环类似，输出<span class="token number">9</span>，<span class="token number">11</span>，<span class="token number">10</span>，<span class="token number">12</span>
<span class="token number">7.</span> 完整输出是<span class="token number">1</span>，<span class="token number">7</span>，<span class="token number">6</span>，<span class="token number">8</span>，<span class="token number">2</span>，<span class="token number">4</span>，<span class="token number">3</span>，<span class="token number">5</span>，<span class="token number">9</span>，<span class="token number">11</span>，<span class="token number">10</span>，<span class="token number">12</span>（请注意，node环境下的事件监听依赖libuv与前端环境不完全相同，输出顺序可能会有误差）
</code></pre> <p><strong>async/await用来干什么</strong></p>
<blockquote>
<p>用来优化promise的回调问题，被称为是异步的终极解决方案</p>
</blockquote> <p><strong>async/await内部做了什么</strong></p>
<blockquote>
<p>async函数会返回一个Promise对象，如果在函数中return一个直接量（普通变量），async会把这个直接量通过Promise.resolve()封装成Promise对象。如果你返回了promise那就以你返回的promise为准。await是在等待，等待运行的结果也就是返回值。await后面通常是一个异步操作（promise）,但是这不代表await后面只能跟异步才做，await后面实际是可以接普通函数调用或者直接量。<br/> async相当于 new Promise,await相当于then</p>
</blockquote> <p><strong>await的等待机制</strong></p>
<blockquote>
<p>如果await后面跟的不是一个promise,那await后面表达式的运算结果就是它等到的东西，如果await后面跟的是一个promise对象，await它会’阻塞’后面的diamante，等着promise对象resolve,<br/> 然后得到resolve的值作为await表达式的运算结果。但是此"阻塞"非彼“阻塞”，这就是await必须用在async函数中的原因。<br/> async函数调用不会造成"阻塞"，它内部所有的“阻塞”都被封装在一个promise对象中异步执行（这里的阻塞理解成异步等待更合理）</p>
</blockquote> <p><strong>async/await在使用过程中有什么规定</strong></p>
<blockquote>
<p>每个async方法都返回一个promise, await只能出现在async函数中</p>
</blockquote> <p><strong>async/await在什么场景使用</strong></p>
<blockquote>
<p>单一的promise链并不能发现async/await的有事，但是如果需要处理由多个promise组成的then链的时候，优势就能体现出来了（Promise通过then链来解决多层回调的问题，现在又用async/awai来进一步优化它）</p>
</blockquote> </li></ol>
<h2><a id="2__132"></a>2. 作用域、闭包</h2>
<p><strong>闭包</strong></p>
<blockquote>
<ul><li>闭包是指有权访问另外一个函数作用域中的变量的函数（红宝书）</li><li>闭包是指那些能够访问自由变量的函数。（MDN）其中自由变量， 指在函数中使用的，但既不是函数参数arguments也不是函数的局部变量的变量，其实就是另外一个函数作用域中的变量。）</li></ul>
</blockquote>
<p><strong>作用域</strong></p>
<blockquote>
<ul><li>说起闭包，就必须要说说作用域，ES5种只存在两种作用域：</li></ul>
<ol><li>函数作用域。</li><li>全局作用域 当访问一个变量时，<br/> 解释器会首先在当前作用域查找标示符，如果没有找到， 就去父作用域找， 直到找到该变量的标示符或者不在父作用域中，</li><li>这就是作用域链，每一个子函数都会拷贝上级的作用域， 形成一个作用域的链条。</li></ol>
</blockquote>
<pre><code class="prism language-javascript"><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>

  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>在这段代码中，</p>
<ul><li>f1的作用域指向有全局作用域(window) 和它本身，</li><li>而f2的作用域指向全局作用域(window)、 f1和它本身。</li><li>而且作用域是从最底层向上找， 直到找到全局作用域window为止，</li><li>如果全局还没有的话就会报错。闭包产生的本质就是，</li><li>当前环境中存在指向父级作用域的引用。</li></ul>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>

    <span class="token keyword">function</span> <span class="token function">f3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> f3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这里x会拿到父级作用域中的变量， <strong>输出2。</strong></p>
<blockquote>
<p>因为在当前环境中，含有对f3的引用， f3恰恰引用了window、 f3和f3的作用域。<br/> 因此f3可以访问到f2的作用域的变量。那是不是只有返回函数才算是产生了闭包呢？回到闭包的本质，只需要让父级作用域的引用存在即可。</p>
</blockquote>
<pre><code class="prism language-javascript"><span class="token keyword">var</span> f4<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">f5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
    <span class="token function-variable function">f4</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">f5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>让f5执行，给f4赋值后，等于说现在f4拥有了window、f5和f4本身这几个作用域的访问权，还是自底向上查找，最近是在f5中找到了a,因此输出2。在这里是外面的变量f4存在着父级作用域的引用，<br/> 因此产生了闭包，形式变了，本质没有改变。</p>
</blockquote>
<p><strong>场景</strong></p>
<ul><li>返回一个函数。</li><li>作为函数参数传递。</li><li>在定时器、 事件监听、 Ajax请求、 跨窗口通信、 Web Workers或者任何异步中，只要使用了回调函数， 实际上就是在使用闭包。<br/> IIFE(立即执行函数表达式) 创建闭包, 保存了全局作用域window和当前函数的作用域。</li></ul>
<pre><code class="prism language-javascript">	<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	
	    <span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span>
	    <span class="token function">bar</span><span class="token punctuation">(</span>baz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token comment">// 这就是闭包</span>
	    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 输出2，而不是1</span>
	<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 以下的闭包保存的仅仅是window和当前作用域。</span>
	<span class="token comment">// 定时器</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timeHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'111'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
	
	<span class="token comment">// 事件监听</span>
	<span class="token comment">// document.body.click(function () {<!-- --></span>
	<span class="token comment">//     console.log('DOM Listener');</span>
	<span class="token comment">// })</span>
	
	<span class="token comment">// 立即执行函数</span>
	<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token constant">IIFE</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token comment">// 输出2</span>
	    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>经典的一道题</strong></p>
<pre><code class="prism language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>  <span class="token comment">// 6 6 6 6 6 6</span>
<span class="token comment">// 为什么会全部输出6？ 如何改进， 让它输出1， 2， 3， 4， 5？</span>
</code></pre>
<p><strong>解析：</strong></p>
<ul><li>因为setTimeout为宏任务， 由于JS中单线程eventLoop机制， 在主线程同步任务执行完后才去执行宏任务。</li><li>因此循环结束后setTimeout中的回调才依次执行， 但输出i的时候当前作用域没有。<br/> 往上一级再找，发现了i，此时循环已经结束，i变成了6，因此会全部输出6。<br/> <strong>利用IIFE(立即执行函数表达式)当每次for循环时，把此时的i变量传递到定时器中</strong></li></ul>
<pre><code class="prism language-javascript">	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
	            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
	        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
</code></pre>
<p><strong>给定时器传入第三个参数, 作为timer函数的第一个函数参数</strong></p>
<pre><code class="prism language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
	    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre>
<p><strong>使用ES6中的let</strong></p>
<blockquote>
<ul><li>let使JS发生革命性的变化， 让JS有函数作用域变为了块级作用域，</li><li>用let后作用域链不复存在。 代码的作用域以块级为单位，</li></ul>
</blockquote>
<pre><code class="prism language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="3_294"></a>3.原型、原型链</h2>
<p><strong>原型（prototype）</strong></p>
<blockquote>
<p>JS中所有函数都会有prototype属性，只有函数才有</p>
<p>其所有的属性和方法都能被构造函数的实例对象共享访问</p>
</blockquote>
<p>代码如下：</p>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token punctuation">}</span>
	<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sayHello'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p1<span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span> <span class="token comment">//sayHello</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p2<span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span> <span class="token comment">//sayHello</span>
</code></pre>
<p><strong>构造函数（constructor）</strong></p>
<blockquote>
<p>JS中constructor存在每个函数的prototype属性中，其保存了指向该函数的引用</p>
</blockquote>
<pre><code class="prism language-javascript"><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">==</span>Person   <span class="token comment">//true</span>
</code></pre>
<p><strong>原型链（_ _ proto _ _）</strong></p>
<blockquote>
<p>JS中对象都会有个内置属性，即__proto__,(隐式原型链的属性)，一般情况下执行创建它的构造函数的prototype的属性，另外函数比较特殊，也会有该属性</p>
</blockquote>
<pre><code class="prism language-javascript">p1<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype
</code></pre>
<blockquote>
<p>JS 引擎查找摸个属性时，先查找对象本身是否存在该属性，如果不存在就会在原型链上一层一层进行查找</p>
</blockquote>
<p><strong>有几个面试经常会问的几个问题</strong></p>
<p><strong>如何精确地判断短数组的类型</strong></p>
<pre><code class="prism language-javascript"><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>   <span class="token comment">//[].__proto__ == Array.prototype</span>

<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">//[Object Array]</span>

Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//true</span>

<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">==</span>Array
</code></pre>
<p>下面代码输出什么</p>
<pre><code class="prism language-javascript">Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span> <span class="token comment">//true</span>
Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre>
<p><strong>实现一个原型链继承</strong></p>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
	<span class="token punctuation">}</span>
	<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sayHello'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">function</span> Boy（）<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>；
	<span class="token class-name">Boy</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>；
	<span class="token keyword">let</span> b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	b1<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//sayHello</span>
</code></pre>
<p><strong>原型、原型链、构造函数、实例的关系</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a8d8f3172a4c45c5bd0815a9304f0482.png"/><br/> <strong>1.instanceof检测构造函数与实例的关系：</strong></p>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">}</span>
	
	person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	
	res <span class="token operator">=</span> person <span class="token keyword">instanceof</span> <span class="token class-name">Person</span>
	
	res  <span class="token comment">// true</span>
</code></pre>
<p><strong>2.实例继承原型上的定义的属性：</strong></p>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
	
	<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'object n'</span>
	
	person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
	
	res <span class="token operator">=</span> person<span class="token punctuation">.</span>type
	
	res  <span class="token comment">// object n</span>
</code></pre>
<p><strong>3.实例访问 ===&gt; 原型</strong></p>
<p>实例通过__proto__访问到原型 person.proto=== Person.prototype</p>
<p><strong>4.原型访问 ===&gt; 构造函数</strong></p>
<p>原型通过constructor属性访问构造函数 Person.prototype.constructor === Person</p>
<p><strong>5.实例访问===&gt;构造函数</strong></p>
<p>person.proto.constructor === Person</p>
<p><strong>二、原型链</strong></p>
<blockquote>
<p>在读取一个实例的属性的过程中，如果属性在该实例中没有找到，那么就会循着 proto 指定的原型上去寻找，如果还找不到，则寻找原型的原型：</p>
</blockquote>
<ol><li>实例上寻找</li></ol>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"object name Person"</span><span class="token punctuation">;</span>

    person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    person<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"我是实例的自有属性"</span><span class="token punctuation">;</span>

    res <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//尝试获取到自有属性</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    res <span class="token operator">=</span> person<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//我是实例的自有属性（通过原型链向上搜索优先搜索实例里的）</span>
</code></pre>
<ol start="2"><li>原型上寻找</li></ol>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"object name Person"</span><span class="token punctuation">;</span>

    person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res <span class="token operator">=</span> Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//尝试获取到自有属性</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>

    res <span class="token operator">=</span> person<span class="token punctuation">.</span>type<span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object name Person</span>
</code></pre>
<ol start="3"><li>原型的原型上寻找</li></ol>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"object name Person"</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

    <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res <span class="token operator">=</span> <span class="token punctuation">[</span>p <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span> p <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">,</span> p <span class="token keyword">instanceof</span> <span class="token class-name">Child</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[true, true, true] p同时属于Object，Person， Child</span>

    res <span class="token operator">=</span> p<span class="token punctuation">.</span>type<span class="token punctuation">;</span> <span class="token comment">//层层搜索</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//object name Person (原型链上搜索)</span>

    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>Child<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ol start="4"><li>原型链上搜索</li></ol>
<ul><li> <p>原型同样也可以通过 proto 访问到原型的原型，比方说这里有个构造函数 Child 然后“继承”前者的有一个构造函数 Person，然后 new Child 得到实例 p；</p> </li><li> <p>当访问 p 中的一个非自有属性的时候，就会通过 proto 作为桥梁连接起来的一系列原型、原型的原型、原型的原型的原型直到 Object 构造函数为止；</p> </li><li> <p>原型链搜索搜到 null 为止，搜不到那访问的这个属性就停止：</p> </li></ul>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

  <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"object name Person"</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

  <span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  res <span class="token operator">=</span> p<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//Person {}</span>

  res <span class="token operator">=</span> p<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//Person {type:'object name Person'}</span>

  res <span class="token operator">=</span> p<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//{.....}</span>

  res <span class="token operator">=</span> p<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//null</span>
</code></pre>
<p><strong>继承</strong></p>
<ul><li>JS 中一切皆对象（所有的数据类型都可以用对象来表示），必须有一种机制，把所有的对象联系起来，实现类似的“继承”机制。</li><li>不同于大部分面向对象语言，ES6 之前并没有引入类（class）的概念，JS 并非通过类而是通过构造函数来创建实例，javascript中的继承是通过原型链来体现的。</li><li>其基本思想是利用原型让一个引用类型继承另一个引用继承的属性和方法。</li></ul>
<p><strong>什么是继承</strong></p>
<ul><li>js中，继承是一种允许我们在已有类的基础上创建新类的机制；它可以使用现有类的所有功能，并在无需重新编写</li><li>原来的类的情况下对这些功能进行扩展。</li></ul>
<p><strong>为什么要有继承</strong></p>
<ul><li>提高代码的重用性、较少代码的冗余</li></ul>
<p><strong>目前我总结的一共有6种继承方式</strong></p>
<ul><li>原型链继承，</li><li>借用构造函数继承，</li><li>组合式继承（原型链+构造函数），</li><li>原型式继承，</li><li>寄生式继承，</li><li>寄生组合式继承</li></ul>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sum</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'this.name'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">100</span>
</code></pre>
<ol><li> <p>原型链继承</p> <p><strong>实现方式：</strong> 利用原型链的特点继承，让实例的原型等于父类的实例</p> <p><strong>优点：</strong> 实例可以继承父类的构造个函数，实例的构造函数，父类的原型</p> <p><strong>缺点：</strong> 不能向父类传递参数，由于实例的原型等于父类的实例，那么改变父类的属性，实例的属性也会跟着改变</p> </li></ol>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"xiaoming"</span>
<span class="token punctuation">}</span>
child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
child1<span class="token punctuation">.</span>name <span class="token comment">//xiaoming</span>
child1<span class="token punctuation">.</span>age <span class="token comment">//100</span>
child1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment">//true</span>
</code></pre>
<ol start="2"><li> <p>借用构造函数继承</p> <p><strong>实现方式：</strong> 使用call/apply将父类的构造函数引入子类函数</p> <p><strong>优点：</strong> 可以祢补原型链继承的缺点，可以向父类传递参数，只继承父类构造函数的属性</p> <p><strong>缺点：</strong> 不能复用，每次使用需要重新调用，每个实例都是父类构造函数的副本，比较臃肿</p> </li></ol>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'xiaoming'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	child1<span class="token punctuation">.</span>name <span class="token comment">//xiaoming</span>
	child1<span class="token punctuation">.</span>age <span class="token comment">//100</span>
	child1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment">//false</span>
</code></pre>
<ol start="3"><li> <p>组合式继承</p> <p><strong>实现方式：</strong> 复用+可传递参数</p> <p><strong>优点：</strong> 基于原型链的优点和借用构造函数的优点</p> <p><strong>缺点：</strong> 调用两遍父类函数</p> </li></ol>
<pre><code class="prism language-javascript">
	<span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">'xiaoming'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span> 
	<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">child</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	child1<span class="token punctuation">.</span>name <span class="token comment">//xiaoming</span>
	child1<span class="token punctuation">.</span>age <span class="token comment">//100</span>
	child1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment">//true</span>
	child <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment">//false</span>

</code></pre>
<ol start="4"><li> <p>原型式继承</p> <p><strong>实现方式：</strong> 函数包装对象，返回对象的引用，这个函数就变成可以随时添加实例或者对象，Object.create()就是这个原理</p> <p><strong>优点：</strong> 复用一个对象用函数包装</p> <p><strong>缺点：</strong> 所有实例都继承在原型上面 无法复用</p> </li></ol>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		　<span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		　<span class="token constant">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
		　<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token function">child</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span>
	child2<span class="token punctuation">.</span>age <span class="token comment">//100</span>
</code></pre>
<ol start="5"><li> <p>寄生式继承</p> <p><strong>实现方式：</strong> 在原型式继承外面包了一个壳子</p> <p><strong>优点：</strong> 创建一个新对象</p> <p><strong>缺点：</strong> 没有用到实例 无法复用</p> </li></ol>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		　<span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		　<span class="token constant">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
		　<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">function</span> <span class="token function">subObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">let</span> sub <span class="token operator">=</span><span class="token function">child</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span>
		sub<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">'xiaoming'</span>
		<span class="token keyword">return</span> sub
	<span class="token punctuation">}</span>
	<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token function">subObject</span><span class="token punctuation">(</span>child1<span class="token punctuation">)</span>
	<span class="token keyword">typeof</span> subObject <span class="token comment">//function</span>
	<span class="token keyword">typeof</span> child2 <span class="token comment">//object</span>
	child2<span class="token punctuation">.</span>age <span class="token comment">//100</span>
</code></pre>
<ol start="6"><li> <p>寄生组合式继承</p> <p><strong>实现方式：</strong> 在函数内返回对象的调用</p> <p><strong>优点：</strong> 函数的实例等于另外的一个实例，使用call／apply引入另一个构造函数，可传递参数，修复了组合继承的问题</p> <p><strong>缺点：</strong> 无法复用</p> </li></ol>
<pre><code class="prism language-javascript">	<span class="token keyword">function</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			　<span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
			　<span class="token constant">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
			　<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token function">child</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
		<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> child
		child<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Sub
		<span class="token keyword">let</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		sub1<span class="token punctuation">.</span>age <span class="token comment">//100</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>