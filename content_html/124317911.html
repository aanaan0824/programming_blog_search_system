<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p>为了规范我的git提交内容，提交的时候commit -m “备注的信息”，但是每个人的备注信息千奇百怪，为了统一，我们进行了git的规范。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/04c1a08e7f4442729f26b34e6ae83605.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_13,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/fa6a23448aee4f07b33c33b6d67ee122.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a639e106ba3646d1ba51ba53501ca768.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_9,color_FFFFFF,t_70,g_se,x_16"/><br/> 首先要全局安装commitizen</p>
<pre><code>npm i -g commitizen@4.2.4
</code></pre>
<p>然后安装插件</p>
<pre><code>npm i cz-customizable@6.3.0 --save-dev
</code></pre>
<p>在package.json中添加代码</p>
<pre><code>"config": {
  "commitizen": {
     "path": "node_modules/cz-customizable"
   }
 },
</code></pre>
<p>最后在根目录中添加一个文件 .cz-config.js<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f6226290a7034fb98ab4733c3b8b04f4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 这里就可以做一个规范git提交的规则了</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 可选类型</span>
  <span class="token literal-property property">types</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'feat:     新功能'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'fix:      修复'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'docs:     文档变更'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'style:    代码格式(不影响代码运行的变动)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'refactor'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'refactor: 重构(既不是增加feature，也不是修复bug)'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'perf:     性能优化'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test:     增加测试'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'chore:    构建过程或辅助工具的变动'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'revert:   回退'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'build:    打包'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 消息步骤</span>
  <span class="token literal-property property">messages</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'请选择提交类型:'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customScope</span><span class="token operator">:</span> <span class="token string">'请输入修改范围(可选):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">subject</span><span class="token operator">:</span> <span class="token string">'请简要描述提交(必填):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">'请输入详细描述(可选):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">footer</span><span class="token operator">:</span> <span class="token string">'请输入要关闭的issue(可选):'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">confirmCommit</span><span class="token operator">:</span> <span class="token string">'确认使用以上信息提交？(y/n/e/h)'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 跳过问题</span>
  <span class="token literal-property property">skipQuestions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'body'</span><span class="token punctuation">,</span> <span class="token string">'footer'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// subject文字长度默认是72</span>
  <span class="token literal-property property">subjectLimit</span><span class="token operator">:</span> <span class="token number">72</span>
<span class="token punctuation">}</span>

</code></pre>
<p>在我们修改代码之后，使用git cz 代替git commit -m，然后就能描述自己的git提交的内容了</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/532702146f794458834a1cb0d5b4c49e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16"/><br/> 最后得到一个规范的git提示<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/50724b2305354de79d5505493de30d4f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/75cd482d369041de8fe84576f80a1f5e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_9,color_FFFFFF,t_70,g_se,x_16"/><br/> 最后直接提交git push origin master 就能看到git上的规范提交提示了</p>
<p>但是我们还有一个问题，如果我们的程序员忘了git cz 的提交规范该如何解决呢？</p>
<p>下面我们来介绍一下git Hooks</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ed6788b2b18e4cb298574db806544483.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/><br/> 按下面的方式进行安装或者创建需要的插件和文件<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9c89f452266b4ed9b4b8690598fa6482.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-javascript">npm install <span class="token operator">--</span>save<span class="token operator">-</span>dev @commitlint<span class="token operator">/</span>config<span class="token operator">-</span>conventional@<span class="token number">12.1</span><span class="token number">.4</span> @commitlint<span class="token operator">/</span>cli@<span class="token number">12.1</span><span class="token number">.4</span>
</code></pre>
<p>创建commitlint.config.js文件<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e6ad7cf0d8ca4232bff59f94e60d240c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 继承的规则</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'@commitlint/config-conventional'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 定义规则类型</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// type 类型定义，表示 git 提交的 type 必须在以下类型范围内</span>
    <span class="token string-property property">'type-enum'</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token string">'always'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>
        <span class="token string">'feat'</span><span class="token punctuation">,</span> <span class="token comment">// 新功能 feature</span>
        <span class="token string">'fix'</span><span class="token punctuation">,</span> <span class="token comment">// 修复 bug</span>
        <span class="token string">'docs'</span><span class="token punctuation">,</span> <span class="token comment">// 文档注释</span>
        <span class="token string">'style'</span><span class="token punctuation">,</span> <span class="token comment">// 代码格式(不影响代码运行的变动)</span>
        <span class="token string">'refactor'</span><span class="token punctuation">,</span> <span class="token comment">// 重构(既不增加新功能，也不是修复bug)</span>
        <span class="token string">'perf'</span><span class="token punctuation">,</span> <span class="token comment">// 性能优化</span>
        <span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token comment">// 增加测试</span>
        <span class="token string">'chore'</span><span class="token punctuation">,</span> <span class="token comment">// 构建过程或辅助工具的变动</span>
        <span class="token string">'revert'</span><span class="token punctuation">,</span> <span class="token comment">// 回退</span>
        <span class="token string">'build'</span> <span class="token comment">// 打包</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// subject 大小写不做校验</span>
    <span class="token string-property property">'subject-case'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
<p>后面就是安装husky的插件，他可以检测commitlint的一个工具<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/11bda981008c4e57b2ab5847f0934540.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9ee6073476de4cce9a00d8fd8718e333.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16"/><br/> ![在这里插入图片描述](https://img-blog.csdnimg.cn/b39f9d882d574a7d96e6da1a4ac055be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/fcf693e0518c4a37b175739fc902a1fe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>1、安装husky</p>
<pre><code class="prism language-javascript">npm i husky@<span class="token number">7.0</span><span class="token number">.1</span> <span class="token operator">--</span>save<span class="token operator">-</span>dev
</code></pre>
<p>2、启动hooks</p>
<pre><code class="prism language-javascript">npx husky install
</code></pre>
<p>3、在package.json中加入一行代码，然后运行</p>
<pre><code class="prism language-javascript">npm set<span class="token operator">-</span>script prepare <span class="token string">"husky install"</span> 
</code></pre>
<p>4、</p>
<pre><code class="prism language-javascript">npm run prepare
</code></pre>
<p>5、<br/> 6、</p>
<pre><code class="prism language-javascript">npx husky add <span class="token punctuation">.</span>husky<span class="token operator">/</span>commit<span class="token operator">-</span>msg <span class="token string">'npx --no-install commitlint --edit "$1"'</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/dddf98210c58422e90628575be44fc59.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_12,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b7b1398ae5774870bcdd33243a25af17.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5814242abf534349b3e712323480bbb4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-javascript">npx husky add <span class="token punctuation">.</span>husky<span class="token operator">/</span>pre<span class="token operator">-</span>commit <span class="token string">"npx eslint --ext .js,.vue src"</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7595bce560154711af3741df66ab3063.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/69926c6e62294407be995ca9b46e44be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6K-l6LWw55qE5byv6Lev77yM5LiA5q2l6YO95LiN5Lya5bCR44CC,size_11,color_FFFFFF,t_70,g_se,x_16"/><br/> 把package.json的lint-staged代码改成下面</p>
<pre><code class="prism language-javascript"><span class="token string-property property">"lint-staged"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token string-property property">"src/**/*.{js,vue}"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">"eslint --fix"</span><span class="token punctuation">,</span>
     <span class="token string">"git add"</span>
   <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
</code></pre>
<p>如上配置，每次它只会在你本地 <code>commit</code> 之前，校验你提交的内容是否符合你本地配置的 <code>eslint</code>规则(这个见文档 <a href="https://panjiachen.github.io/vue-element-admin-site/zh/guide/advanced/eslint.html">ESLint</a> )，校验会出现两种结果：</p>
<ol><li> <p>如果符合规则：则会提交成功。</p> </li><li> <p>如果不符合规则：它会自动执行 <code>eslint --fix</code> 尝试帮你自动修复，如果修复成功则会帮你把修复好的代码提交，如果失败，则会提示你错误，让你修好这个错误之后才能允许你提交代码。</p> </li><li> <p>修改 <code>.husky/pre-commit</code> 文件</p> <pre><code class="prism language-js"><span class="token hashbang comment">#!/bin/sh</span>
<span class="token punctuation">.</span> <span class="token string">"$(dirname "</span>$0<span class="token string">")/_/husky.sh"</span>

npx lint<span class="token operator">-</span>staged

</code></pre> </li><li> <p>再次执行提交代码</p> </li><li> <p>发现 <strong>暂存区中</strong> 不符合 <code>ESlint</code> 的内容，被自动修复</p> </li></ol>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>