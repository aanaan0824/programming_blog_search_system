<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>Pycharm加载conda创建pytorch虚拟环境</h3>
<ul><li><a href="#_3">前言</a></li><li><a href="#PycharmAnacondapytorch_8">Pycharm使用Anaconda创建的pytorch虚拟环境</a></li><li><a href="#_15">报错内容</a></li><li><a href="#Note_60">Note</a></li><li><a href="#_64">问题分析</a></li><li><a href="#Solve_74">Solve：配置环境变量</a></li></ul>
</div>
<p></p>
<h1><a id="_3"></a>前言</h1>
<p><strong>PyTorch 最新安装教程（2021-07-27）</strong></p>
<p><strong>请参考：</strong><a href="https://blog.csdn.net/qq_46092061/article/details/119153893">PyTorch 最新安装教程（2021-07-27）</a></p>
<h1><a id="PycharmAnacondapytorch_8"></a>Pycharm使用Anaconda创建的pytorch虚拟环境</h1>
<ul><li>如下图，打开<strong>Pycharm</strong>的<code>Settings</code>，修改<strong>Project</strong>的编译器。或者在创建新的<strong>Project</strong>时，选择<strong>Anaconda</strong>创建的<strong>pytorch</strong> --&gt; <strong>python</strong> 虚拟环境.</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/eae1e1d32ff2496684c00dd97a4895ce.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<p><strong>选择好编译环境后，import torch，import numpy却报错</strong></p>
<h1><a id="_15"></a>报错内容</h1>
<ol><li><code>import torch</code></li></ol>
<pre><code class="prism language-python">Please note <span class="token keyword">and</span> check the following<span class="token punctuation">:</span>

  <span class="token operator">*</span> The Python version <span class="token keyword">is</span><span class="token punctuation">:</span> Python3<span class="token punctuation">.</span><span class="token number">7</span> <span class="token keyword">from</span> <span class="token string">"D:\anaconda\envs\qr_env\python.exe"</span>
  <span class="token operator">*</span> The NumPy version <span class="token keyword">is</span><span class="token punctuation">:</span> <span class="token string">"1.19.1"</span>

<span class="token keyword">and</span> make sure that they are the versions you expect<span class="token punctuation">.</span>
Please carefully study the documentation linked above <span class="token keyword">for</span> further <span class="token builtin">help</span><span class="token punctuation">.</span>

Original error was<span class="token punctuation">:</span> DLL load failed<span class="token punctuation">:</span> 找不到指定的模块。
</code></pre>
<ol start="2"><li><code>import torchvision</code></li></ol>
<pre><code class="prism language-python">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"D:/qr_project/encoder/test.py"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> torchvision
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\torchvision\__init__.py"</span><span class="token punctuation">,</span> line <span class="token number">5</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> torchvision <span class="token keyword">import</span> models
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\torchvision\models\__init__.py"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> <span class="token punctuation">.</span>alexnet <span class="token keyword">import</span> <span class="token operator">*</span>
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\torchvision\models\alexnet.py"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">import</span> torch
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\torch\__init__.py"</span><span class="token punctuation">,</span> line <span class="token number">189</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> torch<span class="token punctuation">.</span>_C <span class="token keyword">import</span> <span class="token operator">*</span>
UnicodeDecodeError<span class="token punctuation">:</span> <span class="token string">'utf-8'</span> codec can't decode byte <span class="token number">0xe0</span> <span class="token keyword">in</span> position <span class="token number">0</span><span class="token punctuation">:</span> invalid continuation byte
</code></pre>
<ol start="3"><li><code>import numpy</code></li></ol>
<pre><code class="prism language-python">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\numpy\core\__init__.py"</span><span class="token punctuation">,</span> line <span class="token number">22</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> multiarray
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\numpy\core\multiarray.py"</span><span class="token punctuation">,</span> line <span class="token number">12</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> overrides
  File <span class="token string">"D:\anaconda\envs\qr_env\lib\site-packages\numpy\core\overrides.py"</span><span class="token punctuation">,</span> line <span class="token number">7</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    <span class="token keyword">from</span> numpy<span class="token punctuation">.</span>core<span class="token punctuation">.</span>_multiarray_umath <span class="token keyword">import</span> <span class="token punctuation">(</span>
ImportError<span class="token punctuation">:</span> DLL load failed<span class="token punctuation">:</span> 找不到指定的模块。
</code></pre>
<h1><a id="Note_60"></a>Note</h1>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7bfef85a54ec4d0db17440cee54ecbce.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<h1><a id="_64"></a>问题分析</h1>
<p>值得注意的是，本案例通过<strong>Anaconda</strong>创建自己的环境，并且安装<code>torch、torchvision</code>等包，在<code>Anaconda prompt</code>命令窗口下是可以正常导入的，而在<strong>PyCharm</strong>编译器中则会报错。</p>
<p>通过 <code>activate PyTorch</code> 进行自己创建的 <strong>pytorch</strong> 环境中，输入<code>python</code>会显示环境中<strong>python</strong>的版本信息，再依次<code>import</code>，显然不会报错。</p>
<p>这是因为在<strong>Anaconda</strong>的环境下有支持 <code>import torch</code> 的 <code>dll</code>，而在<strong>PyCharm</strong>中使用的是你创建的新环境，还缺少相应支持的<code>dll</code>，你仅需在<strong>PyCharm</strong>中配置环境变量。</p>
<h1><a id="Solve_74"></a>Solve：配置环境变量</h1>
<ol><li>首先，在<strong>PyCharm</strong>主界面点击编辑器<code>Run-&gt;Edit Configurations</code>会出现下图所示界面，添加环境变量，点击框住处右边的选项。</li></ol>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1a5685f7ae854bf9a5b51d495556bfed.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/bdc89083112c43f09aa5cd4d9d5b59f2.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> 2. 点击 <code>+</code> ：新建环境变量： <code>PATH</code></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/303111c8af454b7d86ec95a3f67b15e9.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<p>设置 <strong>Value</strong> 值：</p>
<pre><code class="prism language-python">D<span class="token punctuation">:</span>\Anaconda3<span class="token punctuation">;</span>
D<span class="token punctuation">:</span>\Anaconda3\Library\mingw<span class="token operator">-</span>w64\<span class="token builtin">bin</span><span class="token punctuation">;</span>
D<span class="token punctuation">:</span>\Anaconda3\Library<span class="token punctuation">;</span>
D<span class="token punctuation">:</span>\Anaconda3\Lib\site<span class="token operator">-</span>packages<span class="token punctuation">;</span>
D<span class="token punctuation">:</span>\Anaconda3\Scripts<span class="token punctuation">;</span>
D<span class="token punctuation">:</span>\Anaconda3\envs\PyTorch\Library\<span class="token builtin">bin</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>具体路径，根据你的Anaconda安装目录自行调整。</p>
</blockquote>
<p><strong>这样问题即可解决！</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6a725cef4922416b87a10d707e92246a.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70#pic_center"/><br/> <strong>参考</strong>：<a href="https://blog.csdn.net/qq_40859802/article/details/107786249?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=%E9%85%8D%E7%BD%AE%E5%A5%BDtorch%E7%8E%AF%E5%A2%83%E5%90%8E%EF%BC%8Cpycharm%E5%AF%BC%E5%85%A5torch%E7%BC%BA%E6%8A%A5%E9%94%99i&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-1-.pc_search_all_es&amp;spm=1018.2226.3001.4187">link</a></p>
<p><strong>加油！</strong></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>