<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<h1>Task 类</h1>
<h2 id="definition">定义</h2>
<p>命名空间:</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks?view=net-6.0" title="System.Threading.Tasks">System.Threading.Tasks</a></p>
<p>程序集:</p>
<p>mscorlib.dll, netstandard.dll</p>
<p>表示一个异步操作。</p>
<p>继承</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a></p>
<p>Task</p>
<p>派生</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="System.Threading.Tasks.Task&lt;TResult&gt;">System.Threading.Tasks.Task&lt;TResult&gt;</a></p>
<p>实现</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.iasyncresult?view=net-6.0" title="IAsyncResult">IAsyncResult</a></p>
<h2 id="remarks">注解</h2>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>类表示不返回值并且通常以异步方式执行的单个操作。 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象是在 .NET Framework 4 中首次引入的 <a href="https://docs.microsoft.com/zh-cn/dotnet/standard/asynchronous-programming-patterns/task-based-asynchronous-pattern-tap" title="基于任务的异步模式">基于任务的异步模式</a> 的中心组件之一。 由于对象执行的工作 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 通常在线程池线程上异步执行，而不是在主应用程序线程上同步执行，因此可以使用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.status?view=net-6.0" title="Status">Status</a> 属性以及 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.iscanceled?view=net-6.0" title="IsCanceled">IsCanceled</a> 、 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.iscompleted?view=net-6.0" title="IsCompleted">IsCompleted</a> 和 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.isfaulted?view=net-6.0" title="IsFaulted">IsFaulted</a> 属性来确定任务的状态。 通常，lambda 表达式用于指定任务要执行的工作。</p>
<p>对于返回值的操作，请使用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 类。</p>
<p>本部分内容：</p>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#Instant" title="任务实例化示例">任务实例化示例</a><br/><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#Creating" title="创建和执行任务">创建和执行任务</a><br/><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#Separating" title="分离任务创建和执行">分离任务创建和执行</a><br/><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#WaitingForOne" title="正在等待一个或多个任务完成">正在等待一个或多个任务完成</a><br/><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#Culture" title="任务和区域性">任务和区域性</a><br/><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0#Debugger" title="对于调试器开发人员">对于调试器开发人员</a></p>
<p><a name="Instant"></a></p>
<h3 id="task-instantiation">任务实例化</h3>
<p>下面的示例创建并执行四个任务。 三个任务执行 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.action-1?view=net-6.0" title="Action&lt;T&gt;">Action&lt;T&gt;</a> 名为的委托 <code>action</code> ，该委托接受类型的参数 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a> 。 第四个任务执行 lambda 表达式 (<a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.action?view=net-6.0" title="Action">Action</a> 委托) ，该委托在对任务创建方法的调用中以内联方式定义。 每个任务实例化并以不同的方式运行：</p>
<ul><li> <p>任务 <code>t1</code> 是通过调用任务类构造函数来实例化的，但 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.start?view=net-6.0#System_Threading_Tasks_Task_Start" title="Start()">Start()</a> 只有在任务启动之后才会通过调用其方法来启动 <code>t2</code> 。</p> </li><li> <p><code>t2</code>通过调用方法，在单个方法调用中实例化和启动任务 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory.startnew?view=net-6.0#System_Threading_Tasks_TaskFactory_StartNew_System_Action_System_Object__System_Object_" title="TaskFactory.StartNew(Action&lt;Object&gt;, Object)">TaskFactory.StartNew(Action&lt;Object&gt;, Object)</a> 。</p> </li><li> <p><code>t3</code>通过调用方法，在单个方法调用中实例化和启动任务 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Action_" title="Run(Action)">Run(Action)</a> 。</p> </li><li> <p><code>t4</code>通过调用方法，在主线程上同步执行任务 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.runsynchronously?view=net-6.0#System_Threading_Tasks_Task_RunSynchronously" title="RunSynchronously()">RunSynchronously()</a> 。</p> </li></ul>
<p>由于任务以 <code>t4</code> 同步方式执行，因此它在主应用程序线程上执行。 其余任务通常在一个或多个线程池线程上异步执行。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading;
using System.Threading.Tasks;

class Example
{
    static void Main()
    {
        Action&lt;object&gt; action = (object obj) =&gt;
                                {
                                   Console.WriteLine("Task={0}, obj={1}, Thread={2}",
                                   Task.CurrentId, obj,
                                   Thread.CurrentThread.ManagedThreadId);
                                };

        // Create a task but do not start it.
        Task t1 = new Task(action, "alpha");

        // Construct a started task
        Task t2 = Task.Factory.StartNew(action, "beta");
        // Block the main thread to demonstrate that t2 is executing
        t2.Wait();

        // Launch t1 
        t1.Start();
        Console.WriteLine("t1 has been launched. (Main Thread={0})",
                          Thread.CurrentThread.ManagedThreadId);
        // Wait for the task to finish.
        t1.Wait();

        // Construct a started task using Task.Run.
        String taskData = "delta";
        Task t3 = Task.Run( () =&gt; {Console.WriteLine("Task={0}, obj={1}, Thread={2}",
                                                     Task.CurrentId, taskData,
                                                      Thread.CurrentThread.ManagedThreadId);
                                   });
        // Wait for the task to finish.
        t3.Wait();

        // Construct an unstarted task
        Task t4 = new Task(action, "gamma");
        // Run it synchronously
        t4.RunSynchronously();
        // Although the task was run synchronously, it is a good practice
        // to wait for it in the event exceptions were thrown by the task.
        t4.Wait();
    }
}
// The example displays output like the following:
//       Task=1, obj=beta, Thread=3
//       t1 has been launched. (Main Thread=1)
//       Task=2, obj=alpha, Thread=4
//       Task=3, obj=delta, Thread=3
//       Task=4, obj=gamma, Thread=1
</code></pre>
<p><a name="Creating"></a></p>
<h3 id="creating-and-executing-a-task">创建和执行任务</h3>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 可以通过多种方式创建实例。 从 .NET Framework 4.5 开始，最常见的方法是调用静态 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0" title="Run">Run</a> 方法。 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0" title="Run">Run</a>方法提供了一种简单的方法来使用默认值启动任务，而无需其他参数。 下面的示例使用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Action_" title="Run(Action)">Run(Action)</a> 方法来启动任务，该任务将循环，并显示循环迭代次数：</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading.Tasks;

public class Example
{
   public static async Task Main()
   {
      await Task.Run( () =&gt; {
                                  // Just loop.
                                  int ctr = 0;
                                  for (ctr = 0; ctr &lt;= 1000000; ctr++)
                                  {}
                                  Console.WriteLine("Finished {0} loop iterations",
                                                    ctr);
                               } );
   }
}
// The example displays the following output:
//        Finished 1000001 loop iterations
</code></pre>
<p>另一种方法是在 .NET Framework 4 中启动任务的最常见方法，是静态 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory.startnew?view=net-6.0" title="TaskFactory.StartNew">TaskFactory.StartNew</a> 方法。 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.factory?view=net-6.0" title="Task.Factory">Task.Factory</a>属性返回 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory?view=net-6.0" title="TaskFactory">TaskFactory</a> 对象。 方法的重载 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory.startnew?view=net-6.0" title="TaskFactory.StartNew">TaskFactory.StartNew</a> 使你可以指定要传递给任务创建选项和任务计划程序的参数。 下面的示例使用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory.startnew?view=net-6.0" title="TaskFactory.StartNew">TaskFactory.StartNew</a> 方法来启动任务。 它在功能上等效于上一示例中的代码。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading.Tasks;

public class Example
{
   public static void Main()
   {
      Task t = Task.Factory.StartNew( () =&gt; {
                                  // Just loop.
                                  int ctr = 0;
                                  for (ctr = 0; ctr &lt;= 1000000; ctr++)
                                  {}
                                  Console.WriteLine("Finished {0} loop iterations",
                                                    ctr);
                               } );
      t.Wait();
   }
}
// The example displays the following output:
//        Finished 1000001 loop iterations
</code></pre>
<p>有关更完整的示例，请参阅 <a href="https://docs.microsoft.com/zh-cn/dotnet/standard/parallel-programming/task-based-asynchronous-programming" title="基于任务的异步编程">基于任务的异步编程</a>。</p>
<p><a name="Separating"></a></p>
<h3 id="separating-task-creation-and-execution">分离任务创建和执行</h3>
<p><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>类还提供了初始化任务的构造函数，但未计划执行该任务。 出于性能原因， <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0" title="Task.Run">Task.Run</a> 或 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskfactory.startnew?view=net-6.0" title="TaskFactory.StartNew">TaskFactory.StartNew</a> 方法是用于创建和计划计算任务的首选机制，但对于必须分隔创建和计划的情况，可以使用构造函数，然后调用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.start?view=net-6.0" title="Task.Start">Task.Start</a> 方法来计划任务在以后执行。</p>
<p><a name="WaitingForOne"></a></p>
<h3 id="waiting-for-one-or-more-tasks-to-complete">正在等待一个或多个任务完成</h3>
<p>因为任务通常在线程池线程上以异步方式运行，所以，创建和启动任务的线程会在实例化任务后立即继续执行。 在某些情况下，当调用线程是主应用程序线程时，应用程序可能会在任务实际开始执行之前终止。 在其他情况下，应用程序的逻辑可能要求调用线程在一个或多个任务完成执行时继续执行。 可以通过调用 <code>Wait</code> 方法来等待一个或多个任务完成，从而同步调用线程的执行以及它启动的异步任务。</p>
<p>若要等待单个任务完成，可以调用其 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0" title="Task.Wait">Task.Wait</a> 方法。 对方法的调用会 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0" title="Wait">Wait</a> 阻止调用线程，直到单类实例执行完毕。</p>
<p>下面的示例调用无参数 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait" title="Wait()">Wait()</a> 方法以无条件等待，直到任务完成。 任务通过调用 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.thread.sleep?view=net-6.0" title="Thread.Sleep">Thread.Sleep</a> 方法来模拟两秒钟的工作。</p>
<p>C#复制</p>
<pre><code>using System;   
using System.Threading;
using System.Threading.Tasks;

class Program
{
    static Random rand = new Random();

    static void Main()
    {
        // Wait on a single task with no timeout specified.
        Task taskA = Task.Run( () =&gt; Thread.Sleep(2000));
        Console.WriteLine("taskA Status: {0}", taskA.Status);
        try {
          taskA.Wait();
          Console.WriteLine("taskA Status: {0}", taskA.Status);
       } 
       catch (AggregateException) {
          Console.WriteLine("Exception in taskA.");
       }   
    }    
}
// The example displays output like the following:
//     taskA Status: WaitingToRun
//     taskA Status: RanToCompletion
</code></pre>
<p>还可以有条件地等待任务完成。 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Int32_" title="Wait(Int32)">Wait(Int32)</a>和 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_TimeSpan_" title="Wait(TimeSpan)">Wait(TimeSpan)</a> 方法会阻止调用线程，直到任务完成或超时间隔（以先达到者为准）为止。 由于下面的示例将启动一个睡眠时间为两秒的任务，但定义了一秒的超时值，因此调用线程将会阻塞，直到超时过期以及任务已完成执行。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading;
using System.Threading.Tasks;

public class Example
{
   public static void Main()
   {
      // Wait on a single task with a timeout specified.
      Task taskA = Task.Run( () =&gt; Thread.Sleep(2000));
      try {
        taskA.Wait(1000);       // Wait for 1 second.
        bool completed = taskA.IsCompleted;
        Console.WriteLine("Task A completed: {0}, Status: {1}",
                         completed, taskA.Status);
        if (! completed)
           Console.WriteLine("Timed out before task A completed.");                 
       }
       catch (AggregateException) {
          Console.WriteLine("Exception in taskA.");
       }   
   }
}
// The example displays output like the following:
//     Task A completed: False, Status: Running
//     Timed out before task A completed.
</code></pre>
<p>还可以通过调用和方法来提供取消标记 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Threading_CancellationToken_" title="Wait(CancellationToken)">Wait(CancellationToken)</a> <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Int32_System_Threading_CancellationToken_" title="Wait(Int32, CancellationToken)">Wait(Int32, CancellationToken)</a> 。 如果在 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.cancellationtoken.iscancellationrequested?view=net-6.0" title="IsCancellationRequested">IsCancellationRequested</a> <code>true</code> 执行方法时，标记的属性为或 <code>true</code> <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0" title="Wait">Wait</a> ，则该方法将引发 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.operationcanceledexception?view=net-6.0" title="OperationCanceledException">OperationCanceledException</a> 。</p>
<p>在某些情况下，可能需要等待一系列正在执行的任务的第一项完成，但不要在意任务是哪个。 为此，可以调用方法的重载之一 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0" title="Task.WaitAny">Task.WaitAny</a> 。 下面的示例创建三个任务，每个任务都休眠由随机数生成器确定的间隔。 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___" title="WaitAny(Task[])">WaitAny(Task[])</a>方法等待第一个任务完成。 然后，该示例显示所有三个任务的状态信息。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading;
using System.Threading.Tasks;

public class Example
{
   public static void Main()
   {
      var tasks = new Task[3];
      var rnd = new Random();
      for (int ctr = 0; ctr &lt;= 2; ctr++)
         tasks[ctr] = Task.Run( () =&gt; Thread.Sleep(rnd.Next(500, 3000)));

      try {
         int index = Task.WaitAny(tasks);
         Console.WriteLine("Task #{0} completed first.\n", tasks[index].Id);
         Console.WriteLine("Status of all tasks:");
         foreach (var t in tasks)
            Console.WriteLine("   Task #{0}: {1}", t.Id, t.Status);
      }
      catch (AggregateException) {
         Console.WriteLine("An exception occurred.");
      }
   }
}
// The example displays output like the following:
//     Task #1 completed first.
//     
//     Status of all tasks:
//        Task #3: Running
//        Task #1: RanToCompletion
//        Task #4: Running
</code></pre>
<p>还可以通过调用方法来等待一系列任务全部完成 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0" title="WaitAll">WaitAll</a> 。 下面的示例创建了十个任务，等待所有十个任务完成，然后显示其状态。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading;
using System.Threading.Tasks;

public class Example
{
   public static void Main()
   {
      // Wait for all tasks to complete.
      Task[] tasks = new Task[10];
      for (int i = 0; i &lt; 10; i++)
      {
          tasks[i] = Task.Run(() =&gt; Thread.Sleep(2000));
      }
      try {
         Task.WaitAll(tasks);
      }
      catch (AggregateException ae) {
         Console.WriteLine("One or more exceptions occurred: ");
         foreach (var ex in ae.Flatten().InnerExceptions)
            Console.WriteLine("   {0}", ex.Message);
      }   

      Console.WriteLine("Status of completed tasks:");
      foreach (var t in tasks)
         Console.WriteLine("   Task #{0}: {1}", t.Id, t.Status);
   }
}
// The example displays the following output:
//     Status of completed tasks:
//        Task #2: RanToCompletion
//        Task #1: RanToCompletion
//        Task #3: RanToCompletion
//        Task #4: RanToCompletion
//        Task #6: RanToCompletion
//        Task #5: RanToCompletion
//        Task #7: RanToCompletion
//        Task #8: RanToCompletion
//        Task #9: RanToCompletion
//        Task #10: RanToCompletion
</code></pre>
<p>请注意，当你等待一个或多个任务完成时，正在运行的任务中引发的任何异常都会在调用方法的线程上传播 <code>Wait</code> ，如下面的示例所示。 它启动12个任务，其中三个任务都正常完成，三个任务引发异常。 其余六个任务在开始之前会被取消，三个任务在执行时取消。 异常在 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0" title="WaitAll">WaitAll</a> 方法调用中引发并由 <code>try</code> / <code>catch</code> 块处理。</p>
<p>C#复制</p>
<pre><code>using System;
using System.Threading;
using System.Threading.Tasks;

public class Example
{
   public static void Main()
   {
      // Create a cancellation token and cancel it.
      var source1 = new CancellationTokenSource();
      var token1 = source1.Token;
      source1.Cancel();
      // Create a cancellation token for later cancellation.
      var source2 = new CancellationTokenSource();
      var token2 = source2.Token;
       
      // Create a series of tasks that will complete, be cancelled, 
      // timeout, or throw an exception.
      Task[] tasks = new Task[12];
      for (int i = 0; i &lt; 12; i++)
      {
          switch (i % 4) 
          {
             // Task should run to completion.
             case 0:
                tasks[i] = Task.Run(() =&gt; Thread.Sleep(2000));
                break;
             // Task should be set to canceled state.
             case 1:   
                tasks[i] = Task.Run( () =&gt; Thread.Sleep(2000),
                         token1);
                break;         
             case 2:
                // Task should throw an exception.
                tasks[i] = Task.Run( () =&gt; { throw new NotSupportedException(); } );
                break;
             case 3:
                // Task should examine cancellation token.
                tasks[i] = Task.Run( () =&gt; { Thread.Sleep(2000); 
                                             if (token2.IsCancellationRequested)
                                                token2.ThrowIfCancellationRequested();
                                             Thread.Sleep(500); }, token2);   
                break;
          }
      }
      Thread.Sleep(250);
      source2.Cancel();
       
      try {
         Task.WaitAll(tasks);
      }
      catch (AggregateException ae) {
          Console.WriteLine("One or more exceptions occurred:");
          foreach (var ex in ae.InnerExceptions)
             Console.WriteLine("   {0}: {1}", ex.GetType().Name, ex.Message);
       }   

      Console.WriteLine("\nStatus of tasks:");
      foreach (var t in tasks) {
         Console.WriteLine("   Task #{0}: {1}", t.Id, t.Status);
         if (t.Exception != null) {
            foreach (var ex in t.Exception.InnerExceptions)
               Console.WriteLine("      {0}: {1}", ex.GetType().Name,
                                 ex.Message);
         }
      }
   }
}
// The example displays output like the following:
//   One or more exceptions occurred:
//      TaskCanceledException: A task was canceled.
//      NotSupportedException: Specified method is not supported.
//      TaskCanceledException: A task was canceled.
//      TaskCanceledException: A task was canceled.
//      NotSupportedException: Specified method is not supported.
//      TaskCanceledException: A task was canceled.
//      TaskCanceledException: A task was canceled.
//      NotSupportedException: Specified method is not supported.
//      TaskCanceledException: A task was canceled.
//   
//   Status of tasks:
//      Task #13: RanToCompletion
//      Task #1: Canceled
//      Task #3: Faulted
//         NotSupportedException: Specified method is not supported.
//      Task #8: Canceled
//      Task #14: RanToCompletion
//      Task #4: Canceled
//      Task #6: Faulted
//         NotSupportedException: Specified method is not supported.
//      Task #7: Canceled
//      Task #15: RanToCompletion
//      Task #9: Canceled
//      Task #11: Faulted
//         NotSupportedException: Specified method is not supported.
//      Task #12: Canceled
</code></pre>
<p>有关基于任务的异步操作中的异常处理的详细信息，请参阅 <a href="https://docs.microsoft.com/zh-cn/dotnet/standard/parallel-programming/exception-handling-task-parallel-library" title="异常处理">异常处理</a>。</p>
<p><a name="Culture"></a></p>
<h3 id="tasks-and-culture">任务和区域性</h3>
<p>从面向 .NET Framework 4.6 的桌面应用开始，创建和调用任务的线程的区域性将成为线程上下文的一部分。 也就是说，无论执行任务的线程的当前区域性如何，任务的当前区域性都是调用线程的区域性。 对于目标为 .NET Framework 4.6 之前的 .NET Framework 版本的应用，任务的区域性是执行任务的线程的区域性。 有关详细信息，请参阅主题中的 "区域性和基于任务的异步操作" 一节 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.globalization.cultureinfo?view=net-6.0" title="CultureInfo">CultureInfo</a> 。</p>
<p> 备注</p>
<p>应用商店应用按照设置和获取默认区域性的 Windows 运行时。</p>
<p><a name="Debugger"></a></p>
<h3 id="for-debugger-developers">对于调试器开发人员</h3>
<p>对于实现自定义调试器的开发人员而言，任务的多个内部和私有成员可能会很有用 (它们可能会因发布) 而发生更改。 该 <code>m_taskId</code> 字段充当属性的后备存储 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.id?view=net-6.0" title="Id">Id</a> ，但是，直接从调试器访问此字段可能更高效，而不是通过属性的 getter 方法访问相同的值 (<code>s_taskIdCounter</code> 使用计数器检索任务) 的下一个可用 ID。 同样， <code>m_stateFlags</code> 字段存储有关任务当前生命周期阶段的信息，也可以通过属性访问信息 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.status?view=net-6.0" title="Status">Status</a> 。 <code>m_action</code>字段存储对任务的委托的引用，而 <code>m_stateObject</code> 字段存储开发人员传递给任务的异步状态。 最后，对于分析堆栈帧的调试器，该 <code>InternalWait</code> 方法为在任务进入等待操作时提供可能的标记。</p>
<h2 id="constructors">构造函数</h2>
<table><caption>
  构造函数
 </caption><tbody><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_" title="Task(Action)">Task(Action)</a></td><td> <p>使用指定的操作初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Threading_CancellationToken_" title="Task(Action, CancellationToken)">Task(Action, CancellationToken)</a></td><td> <p>使用指定的操作和 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.cancellationtoken?view=net-6.0" title="CancellationToken">CancellationToken</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Threading_CancellationToken_System_Threading_Tasks_TaskCreationOptions_" title="Task(Action, CancellationToken, TaskCreationOptions)">Task(Action, CancellationToken, TaskCreationOptions)</a></td><td> <p>使用指定的操作和创建选项初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Threading_Tasks_TaskCreationOptions_" title="Task(Action, TaskCreationOptions)">Task(Action, TaskCreationOptions)</a></td><td> <p>使用指定的操作和创建选项初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Object__System_Object_" title="Task(Action&lt;Object&gt;, Object)">Task(Action&lt;Object&gt;, Object)</a></td><td> <p>使用指定的操作和状态初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Object__System_Object_System_Threading_CancellationToken_" title="Task(Action&lt;Object&gt;, Object, CancellationToken)">Task(Action&lt;Object&gt;, Object, CancellationToken)</a></td><td> <p>使用指定的操作、状态和选项初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Object__System_Object_System_Threading_CancellationToken_System_Threading_Tasks_TaskCreationOptions_" title="Task(Action&lt;Object&gt;, Object, CancellationToken, TaskCreationOptions)">Task(Action&lt;Object&gt;, Object, CancellationToken, TaskCreationOptions)</a></td><td> <p>使用指定的操作、状态和选项初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.-ctor?view=net-6.0#System_Threading_Tasks_Task__ctor_System_Action_System_Object__System_Object_System_Threading_Tasks_TaskCreationOptions_" title="Task(Action&lt;Object&gt;, Object, TaskCreationOptions)">Task(Action&lt;Object&gt;, Object, TaskCreationOptions)</a></td><td> <p>使用指定的操作、状态和选项初始化新的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。</p> </td></tr></tbody></table>
<h2 id="properties">属性</h2>
<table><caption>
  属性
 </caption><tbody><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.asyncstate?view=net-6.0#System_Threading_Tasks_Task_AsyncState" title="AsyncState">AsyncState</a></td><td> <p>获取在创建 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 时提供的状态对象，如果未提供，则为 null。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.completedtask?view=net-6.0#System_Threading_Tasks_Task_CompletedTask" title="CompletedTask">CompletedTask</a></td><td> <p>获取一个已成功完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.creationoptions?view=net-6.0#System_Threading_Tasks_Task_CreationOptions" title="CreationOptions">CreationOptions</a></td><td> <p>获取用于创建此任务的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskcreationoptions?view=net-6.0" title="TaskCreationOptions">TaskCreationOptions</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.currentid?view=net-6.0#System_Threading_Tasks_Task_CurrentId" title="CurrentId">CurrentId</a></td><td> <p>返回当前正在执行 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 的 ID。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.exception?view=net-6.0#System_Threading_Tasks_Task_Exception" title="Exception">Exception</a></td><td> <p>获取导致 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.aggregateexception?view=net-6.0" title="AggregateException">AggregateException</a> 提前结束的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>。 如果 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 成功完成或尚未引发任何异常，这将返回 <code>null</code>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.factory?view=net-6.0#System_Threading_Tasks_Task_Factory" title="Factory">Factory</a></td><td> <p>提供对用于创建和配置 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 和 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 实例的工厂方法的访问。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.id?view=net-6.0#System_Threading_Tasks_Task_Id" title="Id">Id</a></td><td> <p>获取此 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 实例的 ID。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.iscanceled?view=net-6.0#System_Threading_Tasks_Task_IsCanceled" title="IsCanceled">IsCanceled</a></td><td> <p>获取此 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 实例是否由于被取消的原因而已完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.iscompleted?view=net-6.0#System_Threading_Tasks_Task_IsCompleted" title="IsCompleted">IsCompleted</a></td><td> <p>获取一个值，它表示是否已完成任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.iscompletedsuccessfully?view=net-6.0#System_Threading_Tasks_Task_IsCompletedSuccessfully" title="IsCompletedSuccessfully">IsCompletedSuccessfully</a></td><td> <p>了解任务是否运行到完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.isfaulted?view=net-6.0#System_Threading_Tasks_Task_IsFaulted" title="IsFaulted">IsFaulted</a></td><td> <p>获取 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 是否由于未经处理异常的原因而完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.status?view=net-6.0#System_Threading_Tasks_Task_Status" title="Status">Status</a></td><td> <p>获取此任务的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskstatus?view=net-6.0" title="TaskStatus">TaskStatus</a>。</p> </td></tr></tbody></table>
<h2 id="methods">方法</h2>
<table><caption>
  方法
 </caption><tbody><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.configureawait?view=net-6.0#System_Threading_Tasks_Task_ConfigureAwait_System_Boolean_" title="ConfigureAwait(Boolean)">ConfigureAwait(Boolean)</a></td><td> <p>配置用于等待此 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>的 awaiter。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task_System_Object__System_Object_" title="ContinueWith(Action&lt;Task,Object&gt;, Object)">ContinueWith(Action&lt;Task,Object&gt;, Object)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时接收调用方提供的状态信息并执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task_System_Object__System_Object_System_Threading_CancellationToken_" title="ContinueWith(Action&lt;Task,Object&gt;, Object, CancellationToken)">ContinueWith(Action&lt;Task,Object&gt;, Object, CancellationToken)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时接收调用方提供的状态信息和取消标记，并以异步方式执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task_System_Object__System_Object_System_Threading_CancellationToken_System_Threading_Tasks_TaskContinuationOptions_System_Threading_Tasks_TaskScheduler_" title="ContinueWith(Action&lt;Task,Object&gt;, Object, CancellationToken, TaskContinuationOptions, TaskScheduler)">ContinueWith(Action&lt;Task,Object&gt;, Object, CancellationToken, TaskContinuationOptions, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时接收调用方提供的状态信息和取消标记并执行的延续任务。 延续任务根据一组指定的条件执行，并使用指定的计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task_System_Object__System_Object_System_Threading_Tasks_TaskContinuationOptions_" title="ContinueWith(Action&lt;Task,Object&gt;, Object, TaskContinuationOptions)">ContinueWith(Action&lt;Task,Object&gt;, Object, TaskContinuationOptions)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时接收调用方提供的状态信息并执行的延续任务。 延续任务根据一组指定的条件执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task_System_Object__System_Object_System_Threading_Tasks_TaskScheduler_" title="ContinueWith(Action&lt;Task,Object&gt;, Object, TaskScheduler)">ContinueWith(Action&lt;Task,Object&gt;, Object, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时接收调用方提供的状态信息并以异步方式执行的延续任务。 延续任务使用指定计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task__" title="ContinueWith(Action&lt;Task&gt;)">ContinueWith(Action&lt;Task&gt;)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task__System_Threading_CancellationToken_" title="ContinueWith(Action&lt;Task&gt;, CancellationToken)">ContinueWith(Action&lt;Task&gt;, CancellationToken)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时可接收取消标记并以异步方式执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task__System_Threading_CancellationToken_System_Threading_Tasks_TaskContinuationOptions_System_Threading_Tasks_TaskScheduler_" title="ContinueWith(Action&lt;Task&gt;, CancellationToken, TaskContinuationOptions, TaskScheduler)">ContinueWith(Action&lt;Task&gt;, CancellationToken, TaskContinuationOptions, TaskScheduler)</a></td><td> <p>创建一个在目标任务完成时按照指定的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskcontinuationoptions?view=net-6.0" title="TaskContinuationOptions">TaskContinuationOptions</a> 执行的延续任务。 延续任务会收到一个取消标记，并使用指定的计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task__System_Threading_Tasks_TaskContinuationOptions_" title="ContinueWith(Action&lt;Task&gt;, TaskContinuationOptions)">ContinueWith(Action&lt;Task&gt;, TaskContinuationOptions)</a></td><td> <p>创建一个在目标任务完成时按照指定的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskcontinuationoptions?view=net-6.0" title="TaskContinuationOptions">TaskContinuationOptions</a> 执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith_System_Action_System_Threading_Tasks_Task__System_Threading_Tasks_TaskScheduler_" title="ContinueWith(Action&lt;Task&gt;, TaskScheduler)">ContinueWith(Action&lt;Task&gt;, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行的延续任务。 延续任务使用指定计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task_System_Object___0__System_Object_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object)">ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成并返回一个值时接收调用方提供的状态信息并以异步方式执行的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task_System_Object___0__System_Object_System_Threading_CancellationToken_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, CancellationToken)">ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, CancellationToken)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行并返回一个值的延续任务。 延续任务接收调用方提供的状态信息和取消标记。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task_System_Object___0__System_Object_System_Threading_CancellationToken_System_Threading_Tasks_TaskContinuationOptions_System_Threading_Tasks_TaskScheduler_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, CancellationToken, TaskContinuationOptions, TaskScheduler)">ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, CancellationToken, TaskContinuationOptions, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成并返回一个值时根据指定的任务延续选项执行的延续任务。 延续任务接收调用方提供的状态信息和取消标记，并使用指定的计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task_System_Object___0__System_Object_System_Threading_Tasks_TaskContinuationOptions_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, TaskContinuationOptions)">ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, TaskContinuationOptions)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时根据指定的任务延续选项执行的延续任务。 延续任务接收调用方提供的状态信息。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task_System_Object___0__System_Object_System_Threading_Tasks_TaskScheduler_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, TaskScheduler)">ContinueWith&lt;TResult&gt;(Func&lt;Task,Object,TResult&gt;, Object, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行的延续任务。 延续任务接收调用方提供的状态信息，并使用指定的计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task___0__" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;)">ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 完成时异步执行并返回一个值的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task___0__System_Threading_CancellationToken_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, CancellationToken)">ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, CancellationToken)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行并返回一个值的延续任务。 延续任务收到取消标记。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task___0__System_Threading_CancellationToken_System_Threading_Tasks_TaskContinuationOptions_System_Threading_Tasks_TaskScheduler_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, CancellationToken, TaskContinuationOptions, TaskScheduler)">ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, CancellationToken, TaskContinuationOptions, TaskScheduler)</a></td><td> <p>创建一个按照指定延续任务选项执行并返回一个值的延续任务。 延续任务被传入一个取消标记，并使用指定的计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task___0__System_Threading_Tasks_TaskContinuationOptions_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, TaskContinuationOptions)">ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, TaskContinuationOptions)</a></td><td> <p>创建一个按照指定延续任务选项执行并返回一个值的延续任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.continuewith?view=net-6.0#System_Threading_Tasks_Task_ContinueWith__1_System_Func_System_Threading_Tasks_Task___0__System_Threading_Tasks_TaskScheduler_" title="ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, TaskScheduler)">ContinueWith&lt;TResult&gt;(Func&lt;Task,TResult&gt;, TaskScheduler)</a></td><td> <p>创建一个在目标 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成时异步执行并返回一个值的延续任务。 延续任务使用指定计划程序。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.delay?view=net-6.0#System_Threading_Tasks_Task_Delay_System_Int32_" title="Delay(Int32)">Delay(Int32)</a></td><td> <p>创建一个在指定的毫秒数后完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.delay?view=net-6.0#System_Threading_Tasks_Task_Delay_System_Int32_System_Threading_CancellationToken_" title="Delay(Int32, CancellationToken)">Delay(Int32, CancellationToken)</a></td><td> <p>创建一个在指定的毫秒数后完成的可取消任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.delay?view=net-6.0#System_Threading_Tasks_Task_Delay_System_TimeSpan_" title="Delay(TimeSpan)">Delay(TimeSpan)</a></td><td> <p>创建一个在指定的时间间隔后完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.delay?view=net-6.0#System_Threading_Tasks_Task_Delay_System_TimeSpan_System_Threading_CancellationToken_" title="Delay(TimeSpan, CancellationToken)">Delay(TimeSpan, CancellationToken)</a></td><td> <p>创建一个在指定的时间间隔后完成的可取消任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.dispose?view=net-6.0#System_Threading_Tasks_Task_Dispose" title="Dispose()">Dispose()</a></td><td> <p>释放 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 类的当前实例所使用的所有资源。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.dispose?view=net-6.0#System_Threading_Tasks_Task_Dispose_System_Boolean_" title="Dispose(Boolean)">Dispose(Boolean)</a></td><td> <p>释放 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>，同时释放其所有非托管资源。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object.equals?view=net-6.0#System_Object_Equals_System_Object_" title="Equals(Object)">Equals(Object)</a></td><td> <p>确定指定对象是否等于当前对象。</p> (继承自 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a>)</td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.fromcanceled?view=net-6.0#System_Threading_Tasks_Task_FromCanceled_System_Threading_CancellationToken_" title="FromCanceled(CancellationToken)">FromCanceled(CancellationToken)</a></td><td> <p>创建 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>，它因指定的取消标记进行的取消操作而完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.fromcanceled?view=net-6.0#System_Threading_Tasks_Task_FromCanceled__1_System_Threading_CancellationToken_" title="FromCanceled&lt;TResult&gt;(CancellationToken)">FromCanceled&lt;TResult&gt;(CancellationToken)</a></td><td> <p>创建 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a>，它因指定的取消标记进行的取消操作而完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.fromexception?view=net-6.0#System_Threading_Tasks_Task_FromException_System_Exception_" title="FromException(Exception)">FromException(Exception)</a></td><td> <p>创建 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>，它在完成后出现指定的异常。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.fromexception?view=net-6.0#System_Threading_Tasks_Task_FromException__1_System_Exception_" title="FromException&lt;TResult&gt;(Exception)">FromException&lt;TResult&gt;(Exception)</a></td><td> <p>创建 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a>，它在完成后出现指定的异常。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.fromresult?view=net-6.0#System_Threading_Tasks_Task_FromResult__1___0_" title="FromResult&lt;TResult&gt;(TResult)">FromResult&lt;TResult&gt;(TResult)</a></td><td> <p>创建指定结果的、成功完成的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.getawaiter?view=net-6.0#System_Threading_Tasks_Task_GetAwaiter" title="GetAwaiter()">GetAwaiter()</a></td><td> <p>获取用于等待此 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 的 awaiter。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object.gethashcode?view=net-6.0#System_Object_GetHashCode" title="GetHashCode()">GetHashCode()</a></td><td> <p>作为默认哈希函数。</p> (继承自 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a>)</td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object.gettype?view=net-6.0#System_Object_GetType" title="GetType()">GetType()</a></td><td> <p>获取当前实例的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.type?view=net-6.0" title="Type">Type</a>。</p> (继承自 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a>)</td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object.memberwiseclone?view=net-6.0#System_Object_MemberwiseClone" title="MemberwiseClone()">MemberwiseClone()</a></td><td> <p>创建当前 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a> 的浅表副本。</p> (继承自 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a>)</td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Action_" title="Run(Action)">Run(Action)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回代表该工作的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Action_System_Threading_CancellationToken_" title="Run(Action, CancellationToken)">Run(Action, CancellationToken)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回代表该工作的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象。 可使用取消标记来取消工作（如果尚未启动）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Func_System_Threading_Tasks_Task__" title="Run(Func&lt;Task&gt;)">Run(Func&lt;Task&gt;)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回 <code>function</code> 所返回的任务的代理项。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run_System_Func_System_Threading_Tasks_Task__System_Threading_CancellationToken_" title="Run(Func&lt;Task&gt;, CancellationToken)">Run(Func&lt;Task&gt;, CancellationToken)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回 <code>function</code> 所返回的任务的代理项。 可使用取消标记来取消工作（如果尚未启动）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run__1_System_Func_System_Threading_Tasks_Task___0___" title="Run&lt;TResult&gt;(Func&lt;Task&lt;TResult&gt;&gt;)">Run&lt;TResult&gt;(Func&lt;Task&lt;TResult&gt;&gt;)</a></td><td> <p>将指定的工作排成队列在线程池上运行，并返回由 <code>function</code> 返回的 <code>Task(TResult)</code> 的代理。 可使用取消标记来取消工作（如果尚未启动）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run__1_System_Func_System_Threading_Tasks_Task___0___System_Threading_CancellationToken_" title="Run&lt;TResult&gt;(Func&lt;Task&lt;TResult&gt;&gt;, CancellationToken)">Run&lt;TResult&gt;(Func&lt;Task&lt;TResult&gt;&gt;, CancellationToken)</a></td><td> <p>将指定的工作排成队列在线程池上运行，并返回由 <code>function</code> 返回的 <code>Task(TResult)</code> 的代理。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run__1_System_Func___0__" title="Run&lt;TResult&gt;(Func&lt;TResult&gt;)">Run&lt;TResult&gt;(Func&lt;TResult&gt;)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回代表该工作的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 对象。 可使用取消标记来取消工作（如果尚未启动）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.run?view=net-6.0#System_Threading_Tasks_Task_Run__1_System_Func___0__System_Threading_CancellationToken_" title="Run&lt;TResult&gt;(Func&lt;TResult&gt;, CancellationToken)">Run&lt;TResult&gt;(Func&lt;TResult&gt;, CancellationToken)</a></td><td> <p>将在线程池上运行的指定工作排队，并返回代表该工作的 <code>Task(TResult)</code> 对象。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.runsynchronously?view=net-6.0#System_Threading_Tasks_Task_RunSynchronously" title="RunSynchronously()">RunSynchronously()</a></td><td> <p>对当前的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 同步运行 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskscheduler?view=net-6.0" title="TaskScheduler">TaskScheduler</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.runsynchronously?view=net-6.0#System_Threading_Tasks_Task_RunSynchronously_System_Threading_Tasks_TaskScheduler_" title="RunSynchronously(TaskScheduler)">RunSynchronously(TaskScheduler)</a></td><td> <p>对提供的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 同步运行 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskscheduler?view=net-6.0" title="TaskScheduler">TaskScheduler</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.start?view=net-6.0#System_Threading_Tasks_Task_Start" title="Start()">Start()</a></td><td> <p>启动 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>，并将它安排到当前的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskscheduler?view=net-6.0" title="TaskScheduler">TaskScheduler</a> 中执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.start?view=net-6.0#System_Threading_Tasks_Task_Start_System_Threading_Tasks_TaskScheduler_" title="Start(TaskScheduler)">Start(TaskScheduler)</a></td><td> <p>启动 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a>，并将它安排到指定的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.taskscheduler?view=net-6.0" title="TaskScheduler">TaskScheduler</a> 中执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object.tostring?view=net-6.0#System_Object_ToString" title="ToString()">ToString()</a></td><td> <p>返回表示当前对象的字符串。</p> (继承自 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.object?view=net-6.0" title="Object">Object</a>)</td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait" title="Wait()">Wait()</a></td><td> <p>等待 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成执行过程。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Threading_CancellationToken_" title="Wait(CancellationToken)">Wait(CancellationToken)</a></td><td> <p>等待 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成执行过程。 如果在任务完成之前取消标记已取消，等待将终止。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Int32_" title="Wait(Int32)">Wait(Int32)</a></td><td> <p>等待 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 在指定的毫秒数内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_Int32_System_Threading_CancellationToken_" title="Wait(Int32, CancellationToken)">Wait(Int32, CancellationToken)</a></td><td> <p>等待 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 完成执行过程。 如果在任务完成之前超时间隔结束或取消标记已取消，等待将终止。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.wait?view=net-6.0#System_Threading_Tasks_Task_Wait_System_TimeSpan_" title="Wait(TimeSpan)">Wait(TimeSpan)</a></td><td> <p>等待 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 在指定的时间间隔内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0#System_Threading_Tasks_Task_WaitAll_System_Threading_Tasks_Task___" title="WaitAll(Task[])">WaitAll(Task[])</a></td><td> <p>等待提供的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象完成执行过程。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0#System_Threading_Tasks_Task_WaitAll_System_Threading_Tasks_Task___System_Threading_CancellationToken_" title="WaitAll(Task[], CancellationToken)">WaitAll(Task[], CancellationToken)</a></td><td> <p>等待提供的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象完成执行过程（除非取消等待）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0#System_Threading_Tasks_Task_WaitAll_System_Threading_Tasks_Task___System_Int32_" title="WaitAll(Task[], Int32)">WaitAll(Task[], Int32)</a></td><td> <p>等待所有提供的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 在指定的毫秒数内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0#System_Threading_Tasks_Task_WaitAll_System_Threading_Tasks_Task___System_Int32_System_Threading_CancellationToken_" title="WaitAll(Task[], Int32, CancellationToken)">WaitAll(Task[], Int32, CancellationToken)</a></td><td> <p>等待提供的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象在指定的毫秒数内完成执行，或等到取消等待。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitall?view=net-6.0#System_Threading_Tasks_Task_WaitAll_System_Threading_Tasks_Task___System_TimeSpan_" title="WaitAll(Task[], TimeSpan)">WaitAll(Task[], TimeSpan)</a></td><td> <p>等待所有提供的可取消 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象在指定的时间间隔内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___" title="WaitAny(Task[])">WaitAny(Task[])</a></td><td> <p>等待提供的任一 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象完成执行过程。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___System_Threading_CancellationToken_" title="WaitAny(Task[], CancellationToken)">WaitAny(Task[], CancellationToken)</a></td><td> <p>等待提供的任何 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象完成执行过程（除非取消等待）。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___System_Int32_" title="WaitAny(Task[], Int32)">WaitAny(Task[], Int32)</a></td><td> <p>等待任何提供的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象在指定的毫秒数内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___System_Int32_System_Threading_CancellationToken_" title="WaitAny(Task[], Int32, CancellationToken)">WaitAny(Task[], Int32, CancellationToken)</a></td><td> <p>等待提供的任何 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象在指定的毫秒数内完成执行，或等到取消标记取消。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.waitany?view=net-6.0#System_Threading_Tasks_Task_WaitAny_System_Threading_Tasks_Task___System_TimeSpan_" title="WaitAny(Task[], TimeSpan)">WaitAny(Task[], TimeSpan)</a></td><td> <p>等待任何提供的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象在指定的时间间隔内完成执行。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenall?view=net-6.0#System_Threading_Tasks_Task_WhenAll_System_Collections_Generic_IEnumerable_System_Threading_Tasks_Task__" title="WhenAll(IEnumerable&lt;Task&gt;)">WhenAll(IEnumerable&lt;Task&gt;)</a></td><td> <p>创建一个任务，该任务将在可枚举集合中的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象都已完成时完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenall?view=net-6.0#System_Threading_Tasks_Task_WhenAll_System_Threading_Tasks_Task___" title="WhenAll(Task[])">WhenAll(Task[])</a></td><td> <p>创建一个任务，该任务将在数组中的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 对象都已完成时完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenall?view=net-6.0#System_Threading_Tasks_Task_WhenAll__1_System_Collections_Generic_IEnumerable_System_Threading_Tasks_Task___0___" title="WhenAll&lt;TResult&gt;(IEnumerable&lt;Task&lt;TResult&gt;&gt;)">WhenAll&lt;TResult&gt;(IEnumerable&lt;Task&lt;TResult&gt;&gt;)</a></td><td> <p>创建一个任务，该任务将在可枚举集合中的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 对象都已完成时完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenall?view=net-6.0#System_Threading_Tasks_Task_WhenAll__1_System_Threading_Tasks_Task___0____" title="WhenAll&lt;TResult&gt;(Task&lt;TResult&gt;[])">WhenAll&lt;TResult&gt;(Task&lt;TResult&gt;[])</a></td><td> <p>创建一个任务，该任务将在数组中的所有 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a> 对象都已完成时完成。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny_System_Collections_Generic_IEnumerable_System_Threading_Tasks_Task__" title="WhenAny(IEnumerable&lt;Task&gt;)">WhenAny(IEnumerable&lt;Task&gt;)</a></td><td> <p>任何提供的任务已完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny_System_Threading_Tasks_Task_System_Threading_Tasks_Task_" title="WhenAny(Task, Task)">WhenAny(Task, Task)</a></td><td> <p>提供的任一任务完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny_System_Threading_Tasks_Task___" title="WhenAny(Task[])">WhenAny(Task[])</a></td><td> <p>任何提供的任务已完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny__1_System_Collections_Generic_IEnumerable_System_Threading_Tasks_Task___0___" title="WhenAny&lt;TResult&gt;(IEnumerable&lt;Task&lt;TResult&gt;&gt;)">WhenAny&lt;TResult&gt;(IEnumerable&lt;Task&lt;TResult&gt;&gt;)</a></td><td> <p>任何提供的任务已完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny__1_System_Threading_Tasks_Task___0__System_Threading_Tasks_Task___0__" title="WhenAny&lt;TResult&gt;(Task&lt;TResult&gt;, Task&lt;TResult&gt;)">WhenAny&lt;TResult&gt;(Task&lt;TResult&gt;, Task&lt;TResult&gt;)</a></td><td> <p>提供的任一任务完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.whenany?view=net-6.0#System_Threading_Tasks_Task_WhenAny__1_System_Threading_Tasks_Task___0____" title="WhenAny&lt;TResult&gt;(Task&lt;TResult&gt;[])">WhenAny&lt;TResult&gt;(Task&lt;TResult&gt;[])</a></td><td> <p>任何提供的任务已完成时，创建将完成的任务。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.yield?view=net-6.0#System_Threading_Tasks_Task_Yield" title="Yield()">Yield()</a></td><td> <p>创建异步产生当前上下文的等待任务。</p> </td></tr></tbody></table>
<h2 id="explicit-interface-implementations">显式接口实现</h2>
<table><caption>
  显式接口实现
 </caption><tbody><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.system-iasyncresult-asyncwaithandle?view=net-6.0#System_Threading_Tasks_Task_System_IAsyncResult_AsyncWaitHandle" title="IAsyncResult.AsyncWaitHandle">IAsyncResult.AsyncWaitHandle</a></td><td> <p>获取可用于等待任务完成的 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.waithandle?view=net-6.0" title="WaitHandle">WaitHandle</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.system-iasyncresult-completedsynchronously?view=net-6.0#System_Threading_Tasks_Task_System_IAsyncResult_CompletedSynchronously" title="IAsyncResult.CompletedSynchronously">IAsyncResult.CompletedSynchronously</a></td><td> <p>获取操作是否已同步完成的指示。</p> </td></tr></tbody></table>
<h2 id="extension-methods">扩展方法</h2>
<table><caption>
  扩展方法
 </caption><tbody><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.taskextensions.dispatcheroperationwait?view=net-6.0#System_Windows_Threading_TaskExtensions_DispatcherOperationWait_System_Threading_Tasks_Task_" title="DispatcherOperationWait(Task)">DispatcherOperationWait(Task)</a></td><td> <p>无限期等待完成基础 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.dispatcheroperation?view=net-6.0" title="DispatcherOperation">DispatcherOperation</a>。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.taskextensions.dispatcheroperationwait?view=net-6.0#System_Windows_Threading_TaskExtensions_DispatcherOperationWait_System_Threading_Tasks_Task_System_TimeSpan_" title="DispatcherOperationWait(Task, TimeSpan)">DispatcherOperationWait(Task, TimeSpan)</a></td><td> <p>等待基础 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.dispatcheroperation?view=net-6.0" title="DispatcherOperation">DispatcherOperation</a> 完成，直到达到指定的所需时间。</p> </td></tr><tr><td><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.taskextensions.isdispatcheroperationtask?view=net-6.0#System_Windows_Threading_TaskExtensions_IsDispatcherOperationTask_System_Threading_Tasks_Task_" title="IsDispatcherOperationTask(Task)">IsDispatcherOperationTask(Task)</a></td><td> <p>返回一个值，该值指示此 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> 是否与 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.threading.dispatcheroperation?view=net-6.0" title="DispatcherOperation">DispatcherOperation</a> 相关。</p> </td></tr></tbody></table>
<h2 id="---">适用于</h2>
<table><caption>
  适用于
 </caption><thead><tr><th>产品</th><th>版本</th></tr></thead><tbody><tr><th>.NET</th><td>Core 1.0, Core 1.1, Core 2.0, Core 2.1, Core 2.2, Core 3.0, Core 3.1, 5, 6</td></tr><tr><th>.NET Framework</th><td>4.0, 4.5, 4.5.1, 4.5.2, 4.6, 4.6.1, 4.6.2, 4.7, 4.7.1, 4.7.2, 4.8</td></tr><tr><th>.NET Standard</th><td>1.0, 1.1, 1.2, 1.3, 1.4, 1.6, 2.0, 2.1</td></tr><tr><th>UWP</th><td>10.0</td></tr><tr><th>Xamarin.iOS</th><td>10.8</td></tr><tr><th>Xamarin.Mac</th><td>3.0</td></tr></tbody></table>
<h2 id="thread-safety">线程安全性</h2>
<p>除之外的所有成员 <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0" title="Task">Task</a> <a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task.dispose?view=net-6.0#System_Threading_Tasks_Task_Dispose" title="Dispose()">Dispose()</a> 都是线程安全的，可同时从多个线程使用。</p>
<h2 id="see-also">另请参阅</h2>
<ul><li><a href="https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0" title="Task&lt;TResult&gt;">Task&lt;TResult&gt;</a></li><li><a href="https://docs.microsoft.com/zh-cn/dotnet/standard/parallel-programming/task-parallel-library-tpl" title="任务并行库 (TPL)">任务并行库 (TPL)</a></li><li><a href="https://docs.microsoft.com/zh-cn/dotnet/standard/parallel-programming/task-based-asynchronous-programming" title="基于任务的异步编程">基于任务的异步编程</a></li><li><a href="https://aka.ms/dotnet-parallel-samples" title="用于与 .NET Core 和 .NET Standard 并行编程的示例">用于与 .NET Core 和 .NET Standard 并行编程的示例</a></li></ul>
</div>
</div>