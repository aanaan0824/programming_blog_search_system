<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="_FastAPI__0"></a>👑 FastAPI 快速入门</h1>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_FastAPI__0">👑 FastAPI 快速入门</a></li><li><a href="#_11">😉前言</a></li><li><ul><li><a href="#FastApi_23">一、👻FastApi？？</a></li><li><ul><li><a href="#1FastAPI_25">1.😎FastAPI可以做什么</a></li><li><a href="#2_FastAPI_36">2.🚲为什么要学习 FastAPI</a></li></ul>
</li><li><a href="#_50">二、💌准备工作</a></li><li><ul><li><a href="#1_51">1.✨编译器工具</a></li><li><a href="#2python_56">2.🎫python安装教程</a></li><li><a href="#3pycharm_60">3.🎟pycharm安装教程</a></li><li><a href="#4_65">4.💫安装虚拟环境</a></li></ul>
</li><li><a href="#_72">三、🥐🍞🧈</a></li><li><ul><li><a href="#1_74">1.🍚开启服务和接口访问</a></li><li><a href="#2json_112">2.🥗json数据</a></li><li><a href="#3api_122">3.🌮api文档在线生成</a></li><li><a href="#4_131">4.🥪发送请求</a></li><li><a href="#5URL_139">5.🥪获取URL参数</a></li><li><a href="#6_160">6.🥧获取请求头参数</a></li><li><a href="#7_179">7.🍥表单获取数据</a></li><li><a href="#8JSON_206">8.🍲自定义返回JSON信息</a></li><li><a href="#8HTML_229">8.🥡自定义返回HTML</a></li><li><a href="#9_261">9.🥖自定义返回文件</a></li><li><a href="#10HTML_299">10.🍿自定义返回HTML页面</a></li><li><a href="#11_326">11.🥩代办事项小案例</a></li><li><a href="#12_339">12.🧃绑定数据库</a></li><li><a href="#13_347">13.🧃数据库访问</a></li><li><a href="#14_401">14.🍘数据库写入</a></li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<hr color="#000000" size='1"'/>
<h1><a id="_11"></a>😉前言</h1>
<p><font color="#999AAA"><strong>提示：</strong><br/> 🍝面向有一丢丢后端基础的<br/> 🎂文章为个人学习心得 如有冒犯 call me！<br/> 🛴快点做！！！！**<br/> </font></p>
<hr color="#000000" size='1"'/>
<h2><a id="FastApi_23"></a>一、👻FastApi？？</h2>
<p>😀----😃----连----😃----接----😄----线----😆</p>
<h3><a id="1FastAPI_25"></a>1.😎FastAPI可以做什么</h3>
<p>🍳<strong>由Sebastian Ramirez开发</strong><br/> 😀----😃----连----😃----接----😄----线----😆<br/> 🍿<strong>开发网站</strong><br/> 🌭<strong>开发 web API</strong><br/> 🥐<strong>做一个测试平台</strong><br/> 🥠<strong>做一个持续集成工具</strong><br/> 🍣<strong>生成文档</strong></p>
<p>😀----😃----连----😃----接----😄----线----😆</p>
<h3><a id="2_FastAPI_36"></a>2.🚲为什么要学习 FastAPI</h3>
<p><strong>🎈FastAPI的使用方法和设计参考了几十个python明星项目 博采众长 吸收各家精华<br/> 🧨FastAPI和Flask一样简约<br/> FastAPI非常新 并且基于python3.6的类型声明系统</strong></p>
<p>😀----😃----连----😃----接----😄----线----😆<br/> <strong>🎨自动生成文档<br/> 🎀类型声明和数据检验<br/> 🛒内置身份认证<br/> 🩳性能强<br/> 🎋原生支持异步<br/> 🎏强大的依赖注入系统<br/> 🧣GraphQL和WebSocket支持</strong></p>
<h2><a id="_50"></a>二、💌准备工作</h2>
<h3><a id="1_51"></a>1.✨编译器工具</h3>
<p>😀----😃----连----😃----接----😄----线----😆<br/> <strong>🎠Python<br/> 🎐Pycharm</strong></p>
<h3><a id="2python_56"></a>2.🎫python安装教程</h3>
<pre><code class="prism language-bash">https://www.runoob.com/python/python-install.html
</code></pre>
<h3><a id="3pycharm_60"></a>3.🎟pycharm安装教程</h3>
<pre><code class="prism language-bash">runoob.com/w3cnote/pycharm-windows-install.html
</code></pre>
<h3><a id="4_65"></a>4.💫安装虚拟环境</h3>
<p>🥪<strong>创建项目工程</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8d6dca005f334ae4af0b3b47aa48fd8a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥩<strong>安装环境</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ccb245284a2a4169b48a3361832ccd6f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍿<strong>安装fastapi</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9654fba8b2814c53926b27073237d5d8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h2><a id="_72"></a>三、🥐🍞🧈</h2>
<h3><a id="1_74"></a>1.🍚开启服务和接口访问</h3>
<p>🥯<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/478d2402348e491f989c6798c2eb5390.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🦪<strong>服务器运行</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/fe6b2c62d0be4f7e968ee97d627a2cf2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9142672b10f94f6a95d82d8439e2d36a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍣<strong>添加接口</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1cc39241163d4172ac1dc287c71e0a1d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍤<strong>main</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 添加首页</span>
@app.get<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
def index<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    <span class="token keyword">return</span> <span class="token string">"This is Home Page."</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<p>🍛<strong>重新运行项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5b580484b31c46d7b14bb9fc854ccfe3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/944c41ca73594f05b521c06427b7b525.png"/></p>
<h3><a id="2json_112"></a>2.🥗json数据</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2fe1df7e764e4698bc9da2fd4e500bc8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥠<strong>重新项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4cce55ea87904dfa98878e7c8768887f.png"/><br/> 🥖<strong>json数据格式解析</strong></p>
<pre><code class="prism language-bash">https://www.json.cn/
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ba48b3c05f9540819d2afa9049f7bfc0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="3api_122"></a>3.🌮api文档在线生成</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b826945549114e81bbd11f12a7ff6759.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🌯<strong>文档解析</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4364d2604ef84d399c5cf53df12e7faf.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍱<strong>文档备注信息</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/cb931e2bc2094624b602576f46df3d72.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2dc7239a03bf4bab84ce3ecd7349f467.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="4_131"></a>4.🥪发送请求</h3>
<p>🍥<strong>POST请求</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/61498e62681143f58a04eb6ddccb09e6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥚<strong>使用ApiPost接口测试工具来访问接口</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9409b44682a34b20bc641518e51ca8df.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c4f45dc63f3b4c21b7bd716d6230dcd1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍢<strong>定义多种请求格式</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c5c86680fe994a12906990ab667277d1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="5URL_139"></a>5.🥪获取URL参数</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a8119461cef3433f9b266c9014d403f7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/eaef4bbe6ff64dc1a312dfabe4394411.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍧<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>



@app.get<span class="token punctuation">(</span><span class="token string">"/user/{id}"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span>id<span class="token punctuation">)</span>:
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id"</span>:id<span class="token punctuation">}</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<h3><a id="6_160"></a>6.🥧获取请求头参数</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5e849fea06354ccaab0870343236d198.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/512fc6c416d14dd8a968eadb3f23e69e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥞<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI,Header

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span>id, token<span class="token operator">=</span>Header<span class="token punctuation">(</span>None<span class="token punctuation">))</span>:
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id"</span>:id,<span class="token string">"token"</span>:token<span class="token punctuation">}</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<h3><a id="7_179"></a>7.🍥表单获取数据</h3>
<p>🥘<strong>安装包</strong></p>
<pre><code class="prism language-bash">python-multipart
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8fcb5ebec2a448a194d0ae4b61647078.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f9cab381b11046c48a744c388d276f7e.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍭<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI,Header,Form

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span>id, token<span class="token operator">=</span>Header<span class="token punctuation">(</span>None<span class="token punctuation">))</span>:
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"id"</span>:id,<span class="token string">"token"</span>:token<span class="token punctuation">}</span>

@app.post<span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span>
def login<span class="token punctuation">(</span>username<span class="token operator">=</span>Form<span class="token punctuation">(</span>None<span class="token punctuation">)</span>,password<span class="token operator">=</span>Form<span class="token punctuation">(</span>None<span class="token punctuation">))</span>:
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"data"</span>:<span class="token punctuation">{<!-- --></span><span class="token string">"username"</span>:username,<span class="token string">"password"</span>:password<span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<h3><a id="8JSON_206"></a>8.🍲自定义返回JSON信息</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/0d8fd4040834406ebec6fbeaab1fb247.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍾<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI
from fastapi.responses <span class="token function">import</span> JSONResponse

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    <span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"msg"</span><span class="token keyword">:</span><span class="token string">"get user"</span><span class="token punctuation">}</span>,
                        status_code<span class="token operator">=</span>202,
                        headers<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"a"</span><span class="token keyword">:</span><span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/968c032a0d004b80bb1d14546c988abe.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d5d600bd174f4a018f2b2b528b8ef081.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="8HTML_229"></a>8.🥡自定义返回HTML</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/65ed14e4a58949dba8f7e739e600a281.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/245d8932565047c9b4e41c4415762991.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍣<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI
from fastapi.responses <span class="token function">import</span> JSONResponse,HTMLResponse

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    <span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"msg"</span><span class="token keyword">:</span><span class="token string">"get user"</span><span class="token punctuation">}</span>,
                        status_code<span class="token operator">=</span>202,
                        headers<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"a"</span><span class="token keyword">:</span><span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    html_content<span class="token operator">=</span><span class="token string">""</span><span class="token string">"
    &lt;html&gt;
        &lt;body&gt;&lt;p style="</span>color:red<span class="token string">"&gt;Hello World&lt;/p&gt;&lt;/body&gt;
        &lt;/html&gt;
    "</span><span class="token string">""</span>
    <span class="token keyword">return</span> HTMLResponse<span class="token punctuation">(</span>content<span class="token operator">=</span>html_content<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<h3><a id="9_261"></a>9.🥖自定义返回文件</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d88adb56b8954da989a8c99c4f374ae5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a1bcdba299db40cb826ff5598eedbe00.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥨<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI
from fastapi.responses <span class="token function">import</span> JSONResponse,HTMLResponse
from starlette.responses <span class="token function">import</span> FileResponse

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    <span class="token keyword">return</span> JSONResponse<span class="token punctuation">(</span>content<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"msg"</span><span class="token keyword">:</span><span class="token string">"get user"</span><span class="token punctuation">}</span>,
                        status_code<span class="token operator">=</span>202,
                        headers<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"a"</span><span class="token keyword">:</span><span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


@app.get<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    html_content<span class="token operator">=</span><span class="token string">""</span><span class="token string">"
    &lt;html&gt;
        &lt;body&gt;&lt;p style="</span>color:red<span class="token string">"&gt;Hello World&lt;/p&gt;&lt;/body&gt;
        &lt;/html&gt;
    "</span><span class="token string">""</span>
    <span class="token keyword">return</span> HTMLResponse<span class="token punctuation">(</span>content<span class="token operator">=</span>html_content<span class="token punctuation">)</span>

@app.get<span class="token punctuation">(</span><span class="token string">"/avatar"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span><span class="token punctuation">)</span>:
    avatar<span class="token operator">=</span><span class="token string">'./static/violet.jpg'</span>
    <span class="token keyword">return</span> FileResponse<span class="token punctuation">(</span>avatar<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<h3><a id="10HTML_299"></a>10.🍿自定义返回HTML页面</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/29607746fe3e4939bded1e49b11007d8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b40bb301fcb04324bddd2059b2458092.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/3472dfe729e64448b39fbd137667ad8f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥣<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI,Request
from fastapi.templating <span class="token function">import</span> Jinja2Templates

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>
template<span class="token operator">=</span>Jinja2Templates<span class="token punctuation">(</span><span class="token string">"pages"</span><span class="token punctuation">)</span>

@app.get<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
def user<span class="token punctuation">(</span>req:Request<span class="token punctuation">)</span>:
    <span class="token keyword">return</span> template.TemplateResponse<span class="token punctuation">(</span><span class="token string">"index.html"</span>,context<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"request"</span>:req<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<p>🍕<strong>返回结果</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/caf78707cc0243718ecdaecc2c203406.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ab3e4511f5e3401681a60825b7b02847.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8c724567585242fda2813ec4d9c7c244.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/10648bddd8bb4fd888e01637aba509d7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="11_326"></a>11.🥩代办事项小案例</h3>
<p>🥯<strong>main.py</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/cb7e649ad2eb42e5afa1b1192b74a28f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍣<strong>index.html</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e10b003213dc4fcc89c7c8a3ff0d6d3c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🧂<strong>运行项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/76511dc15aaf455ea2e3cd09fb93c8be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍞<strong>main.py</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e83089dee31649d99dc87e1e67d1c4e7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍱<strong>index.html</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/06714d0d02eb4b7db04cac5ac426fc5d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍥<strong>运行项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/21728b48af0049cba2c8cca189d37699.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="12_339"></a>12.🧃绑定数据库</h3>
<p>🍩<strong>安装 tortoise-orm</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/29be295659f745b288ec3ea476977c23.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍝<strong>安装 aiomysql</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ef94dd56560643799df04e6ebad8ce0d.png"/></p>
<p>🥧<strong>main.py</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/be83e5a3db044feaa3b70b611d1f3286.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="13_347"></a>13.🧃数据库访问</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/002366273c66491badce69f0fd06a47d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍺<strong>models.py</strong></p>
<pre><code class="prism language-bash">from tortoise <span class="token function">import</span> Model,fields

class Todo<span class="token punctuation">(</span>Model<span class="token punctuation">)</span>:
    id<span class="token operator">=</span>fields.IntField<span class="token punctuation">(</span>pk<span class="token operator">=</span>True<span class="token punctuation">)</span>
    content<span class="token operator">=</span>fields.CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span>500<span class="token punctuation">)</span>
    create_at<span class="token operator">=</span>fields.DatetimeField<span class="token punctuation">(</span>auto_now_add<span class="token operator">=</span>True<span class="token punctuation">)</span>
    updated_at<span class="token operator">=</span>fields.DatetimeField<span class="token punctuation">(</span>auto_now<span class="token operator">=</span>True<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8f15b796d86f43d38de5110d4b252893.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍤<strong>main.py</strong></p>
<pre><code class="prism language-bash"><span class="token function">import</span> uvicorn
from fastapi <span class="token function">import</span> FastAPI, Request, Form
from fastapi.responses <span class="token function">import</span> RedirectResponse
from starlette.templating <span class="token function">import</span> Jinja2Templates
from tortoise.contrib.fastapi <span class="token function">import</span> register_tortoise

from dao.models <span class="token function">import</span> Todo

app<span class="token operator">=</span>FastAPI<span class="token punctuation">(</span><span class="token punctuation">)</span>
template<span class="token operator">=</span>Jinja2Templates<span class="token punctuation">(</span><span class="token string">"pages"</span><span class="token punctuation">)</span>

<span class="token comment"># 数据库绑定</span>
register_tortoise<span class="token punctuation">(</span>app,db_url<span class="token operator">=</span><span class="token string">"mysql://root:123456@localhost:3306/fastapi"</span>,
                  modules<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"models"</span>:<span class="token punctuation">[</span><span class="token string">'dao.models'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>,
                  add_exception_handlers<span class="token operator">=</span>True,
                  generate_schemas<span class="token operator">=</span>True<span class="token punctuation">)</span>

todos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"写日记"</span>, <span class="token string">"看电影"</span>, <span class="token string">"玩游戏"</span><span class="token punctuation">]</span>

<span class="token comment"># 添加首页</span>
@app.get<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
async def user<span class="token punctuation">(</span>req:Request<span class="token punctuation">)</span>:
    todos<span class="token operator">=</span>await Todo.all<span class="token punctuation">(</span><span class="token punctuation">)</span>
    print<span class="token punctuation">(</span>todos<span class="token punctuation">)</span>
    <span class="token keyword">return</span> template.TemplateResponse<span class="token punctuation">(</span><span class="token string">"index.html"</span>,context<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">"request"</span>:req,<span class="token string">"todos"</span>:todos<span class="token punctuation">}</span><span class="token punctuation">)</span>

@app.post<span class="token punctuation">(</span><span class="token string">"/todo"</span><span class="token punctuation">)</span>
def todo<span class="token punctuation">(</span>todo<span class="token operator">=</span>Form<span class="token punctuation">(</span>None<span class="token punctuation">))</span>:
    todos.insert<span class="token punctuation">(</span>0,todo<span class="token punctuation">)</span>
    <span class="token keyword">return</span> RedirectResponse<span class="token punctuation">(</span><span class="token string">"/"</span>,status_code<span class="token operator">=</span>302<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token keyword">:</span>
    uvicorn.run<span class="token punctuation">(</span>app<span class="token punctuation">)</span>
</code></pre>
<p>🍳<strong>运行项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5e25b40b837945679018efdcf4d93378.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="14_401"></a>14.🍘数据库写入</h3>
<p>🥗<strong>main.py</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/3645ee70e01c40938ceb1462fcede995.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍹<strong>运行项目</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/239d37e93ce842b1a985a37a3e17294b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_14,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍕<strong>数据库里就多了个字段</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/137af7d31e824a40a3e5dda232c347c6.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_19,color_FFFFFF,t_70,g_se,x_16"/><br/> 🥞<strong>此时就是显示有问题</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/96f8b3dbe2c74b3badd940710c6592ce.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 🍚<strong>index.html</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/dc9d0ca5defd46e8aae67d5667eda9de.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/15140f7e63cd4cdcbe54a96da9cc4cab.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAVmlvbGV0wrdFdmVyZ2FyZGVuLQ==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>