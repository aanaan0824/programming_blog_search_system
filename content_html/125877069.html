<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<h1>一、下载扩展程序</h1>
<h1>sqlsrv,pdo-sqlsrv</h1>
<p>查看php版本<img alt="" height="1200" src="image\7428807ff18c4d2aa877c37e17107e2c.png" width="1200"/></p>
<p>下载对应的扩展程序<a class="link-info" href="https://docs.microsoft.com/zh-cn/sql/connect/php/download-drivers-php-sql-server?view=sql-server-ver16" title="pdo_sqlsrv\sqlsrv">pdo_sqlsrv\sqlsrv</a></p>
<p>注意系统支持要求<a class="link-info" href="https://docs.microsoft.com/zh-cn/sql/connect/php/system-requirements-for-the-php-sql-driver?view=sql-server-ver16" title="系统要求">系统要求</a></p>
<h1>二、安装扩展程序</h1>
<p>解压下载的文件</p>
<pre><code>pdo_sqlsrv

# 解压
tar -zxvf pdo_sqlsrv-5.8.1.tgz

# 进入解压后的目录
cd pdo_sqlsrv-5.8.1

#执行phpize
/www/server/php/74/bin/phpize 

#执行./configure,对即将安装的软件进行配置，检查当前的环境是否满足要安装软件的依赖关系
./configure --with-php-config=/www/server/php/74/bin/php-config

#编译并安装
make &amp;&amp; make install

# 不出意外的话，得到类似以下内容
# ....省略其他信息....
Installing shared extensions: /www/server/php/74/lib/php/extensions/no-debug-non-zts-20190902/


sqlsrv安装与pdo_sqlsrv一样</code></pre>
<h1>三、php扩展配置</h1>
<pre><code>在php.ini中添加
#扩展目录
extension_dir = "/Applications/MAMP/bin/php/php7.4.2/lib/php/extensions/no-debug-non-zts-20190902/"
#扩展库
extension=sqlsrv.so
extension=pdo_sqlsrv.so</code></pre>
<h1>四、sql server配置管理器配置</h1>
<p>1）服务器端口1433外网开发，防火墙添加指定端口（如1433）的入口规则</p>
<p>2）sql server配置管理器</p>
<p><img alt="" height="316" src="image\f638ea5d0dbe4cbb8beea41a8a35ffd9.png" width="940"/></p>
<p>开启tcp/ip协议。tcp/ip属性，全部侦听，启用</p>
<p><img alt="" height="744" src="image\1d13922c5b574f8483eb7c3eee0e08bb.png" width="804"/> ip地址，ipall去除动态端口，填写固定端口1433</p>
<p><img alt="" height="906" src="image\5b06c731f7ce4a09a389864ae04fcff1.png" width="824"/></p>
<p> 对应版本sql native client开启tcp</p>
<p><img alt="" height="402" src="image\b3a77f53380d413bb1aa5424e09bab8a.png" width="1200"/></p>
<p></p>
<p>五、sqlserver 实例配置</p>
<p>设置允许远程连接</p>
<p><img alt="" height="950" src="image\4533678e691a44258204b72c37a1990b.png" width="1200"/></p>
<p>安全性：设置混合登录模式</p>
<p><img alt="" height="588" src="image\809b849f38694832b9c93b7abb3e6692.png" width="1200"/> </p>
<p> 安全性/登录名/具体的用户，右键-&gt;属性</p>
<p><img alt="" height="442" src="image\ab048010e5d042d3898a327c727b7637.png" width="838"/></p>
<p> </p>
<p>六、下载对应版本的odbc驱动程序（进行sql server连接测试）</p>
<p><a class="link-info" href="https://docs.microsoft.com/zh-cn/sql/connect/php/download-drivers-php-sql-server?view=sql-server-ver16" title="odbc for sql server驱动">odbc for sql server驱动</a></p>
<p><a class="link-info" href="https://docs.microsoft.com/zh-cn/sql/connect/php/system-requirements-for-the-php-sql-driver?view=sql-server-ver16" title="注意系统要求">注意系统要求</a></p>
<p></p>
</div>
</div>