<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>PyTorch 最新安装教程（2021-07-27）</h3>
<ul><li><a href="#_1">前言</a></li><li><a href="#1__Anaconda_11">1. 安装 Anaconda</a></li><li><a href="#2__21">2. 检查显卡，更新驱动</a></li><li><a href="#3_PyTorch_57">3. 创建PyTorch环境</a></li><li><a href="#4_TUNA_88">4. 配置清华TUNA镜像源</a></li><li><a href="#5__PyTorch_129">5. 安装 PyTorch</a></li><li><a href="#6__169">6. 测试</a></li><li><a href="#7_PycharmAnacondapytorch_196">7. Pycharm使用Anaconda创建的pytorch虚拟环境</a></li><li><a href="#_201">后序</a></li></ul>
</div>
<p></p>
<h1><a id="_1"></a>前言</h1>
<p><strong>万事开头难！</strong></p>
<p><strong>这句话又一次被我验证。</strong></p>
<p>记得前不久刚陷入<strong>Tensorflow2.0</strong>的安装困境，这一次又被<strong>PyTorch</strong> 搞哭辽。</p>
<p>孩子太难了o(╥﹏╥)o，不过还好最终成功安装，感谢全网资源，感谢大佬们的博客！被我一次一次试了出来。</p>
<h1><a id="1__Anaconda_11"></a>1. 安装 Anaconda</h1>
<p><strong>Anaconda</strong> 是一个用于科学计算的 <strong>Python</strong> 发行版，支持 <code>Linux, Mac, Windows</code>, 包含了众多流行的科学计算、数据分析的 Python 包。</p>
<p><strong>Anaconda</strong> 安装包可以到 <code>https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</code> 下载 <strong>or</strong> 也可以去官网下载。</p>
<p><strong>具体内容请参考我之前的安装教程&amp;经验分享：</strong></p>
<p><a href="https://blog.csdn.net/qq_46092061/article/details/116561557">Tensorflow 2.0 最新版(2.4.1) 安装教程</a></p>
<h1><a id="2__21"></a>2. 检查显卡，更新驱动</h1>
<ol><li><strong>建议是首先更新驱动，全都按最新的东西来安装</strong></li></ol>
<p><a href="https://www.nvidia.cn/Download/index.aspx?lang=cn#">https://www.nvidia.cn/Download/index.aspx?lang=cn#</a></p>
<p>在这里选择自己的显卡型号，下载安装即可，下载很快也很简单，建议大多数人都更新一下显卡驱动，避免不必要的麻烦。</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/457e9871731c434ca47f74cedb1e9e18.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<ol start="2"><li>安装好后进入<strong>NVIDIA</strong>控制面板，鼠标右键可进入</li></ol>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6aa43b2005ba4f50b22fdd38db188a45.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> <strong>点击组件找到自己CUDA的版本号</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/17f57732e4ea46479a37d4b6b2cf7759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<p>或者 <strong>win+R</strong>—&gt; <strong>cmd</strong> ，进入命令行，<strong>输入</strong>：</p>
<pre><code class="prism language-python">nvidia<span class="token operator">-</span>smi
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f524353978284ad88bdd76ab05b9d1da.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<blockquote>
<p>如果没有这条命令，则需要添加环境变量（百度配置）一般电脑都可以直接用，我的显卡是：GF：MX250</p>
</blockquote>
<p><strong>也可获得版本号：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2067ded8d87e42fb961bb5a0d6ef6ba4.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<p><strong>备注</strong>：第二步不一定是必须的，如果你的电脑较新，那么不更新也可以直接进行下面操作，我的电脑是19年买的，中间好像也没更新驱动，这一步直接跳过，最后也安装成功了。</p>
<h1><a id="3_PyTorch_57"></a>3. 创建PyTorch环境</h1>
<p>不同的项目需要不同的虚拟环境，可以处理不同版本的项目之间不兼容问题。</p>
<ol><li>进入 <code>Anaconda prompt</code> 命令窗口</li></ol>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/67436072c3ab42988d5678899020be9f.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> 2. <strong>输入以下内容：</strong></p>
<pre><code class="prism language-python">conda create <span class="token operator">-</span>n PyTorch python<span class="token operator">=</span><span class="token number">3.8</span>
</code></pre>
<p><strong>PyTorch</strong>是虚拟环境名字（可以随意设置），<strong>3.8</strong> 是python版本，都可以按自己需求改，一定要指定具体 <strong>python</strong> 版本。</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/199ee7351d144442816abf17035bd071.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70#pic_center"/></p>
<p>然后按 <code>y</code>，继续安装所需的各种依赖包。</p>
<ol start="3"><li><strong>创建成功后，输入以下命令：</strong></li></ol>
<pre><code class="prism language-python">conda info <span class="token operator">-</span><span class="token operator">-</span>envs
</code></pre>
<p><strong>可以看见自己的所有环境</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1635330c498c4c0fba63ce7d8b508c0e.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70#pic_center"/></p>
<p>如果出现错误，可能是<strong>外网下载过慢</strong>，需要配置<strong>国内镜像源</strong>。</p>
<h1><a id="4_TUNA_88"></a>4. 配置清华TUNA镜像源</h1>
<p><strong>TUNA</strong> 提供了 <strong>Anaconda</strong> 仓库与第三方源（conda-forge、msys2、pytorch等，查看完整列表）的镜像，各系统都可以通过修改用户目录下的 <code>.condarc</code> 文件。<strong>Windows</strong> 用户无法直接创建名为 <code>.condarc</code> 的文件，可先执行 <code>conda config --set show_channel_urls yes</code> 生成该文件之后再修改。</p>
<blockquote>
<p>注：由于更新过快难以同步，TUNA不同步<code>pytorch-nightly, pytorch-nightly-cpu, ignite-nightly</code>这三个包。</p>
</blockquote>
<ol><li><strong>生成 <code>.condarc</code> 文件</strong></li></ol>
<p><strong>在 <code>Anaconda prompt</code> 命令窗口，中输入：</strong></p>
<pre><code class="prism language-python">conda config <span class="token operator">-</span><span class="token operator">-</span><span class="token builtin">set</span> show_channel_urls yes
</code></pre>
<p><strong>之后可以在 <code>C:\Users\xxx</code> 中看到 <code>.condarc</code> 文件</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6931a81a806c4a208f8cd08f3e68229b.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> 2. <strong>记事本打开 <code>.condarc</code> 文件</strong>，<strong>重写其中的内容。</strong></p>
<pre><code class="prism language-python">channels<span class="token punctuation">:</span>
  <span class="token operator">-</span> defaults
show_channel_urls<span class="token punctuation">:</span> true
default_channels<span class="token punctuation">:</span>
  <span class="token operator">-</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>main
  <span class="token operator">-</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>r
  <span class="token operator">-</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>pkgs<span class="token operator">/</span>msys2
custom_channels<span class="token punctuation">:</span>
  conda<span class="token operator">-</span>forge<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  msys2<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  bioconda<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  menpo<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  pytorch<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
  simpleitk<span class="token punctuation">:</span> https<span class="token punctuation">:</span><span class="token operator">//</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn<span class="token operator">/</span>anaconda<span class="token operator">/</span>cloud
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/88d6719ea35a4d1497065e982df60822.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/><br/> 即可添加 <strong>Anaconda Python</strong> 免费仓库。</p>
<p>在<code>Anaconda prompt</code> 命令窗口运行 <code>conda clean -i</code> 清除索引缓存，保证用的是镜像站提供的索引。</p>
<h1><a id="5__PyTorch_129"></a>5. 安装 PyTorch</h1>
<ol><li> <p><strong>进入pytorch官网：</strong><a href="https://pytorch.org/">https://pytorch.org/</a></p> </li><li> <p><strong>网页下拉，即可看到下图，官网会自动根据你的电脑，显示的即是你可安装的CUDA版本，并给出安装命令。</strong></p> </li></ol>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2adf875b3b874dac8052b9d551fccbc0.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<ol start="3"><li><strong>复制官网提供的命令</strong></li></ol>
<pre><code class="prism language-python">conda install pytorch torchvision torchaudio cudatoolkit<span class="token operator">=</span><span class="token number">10.2</span> <span class="token operator">-</span>c pytorch
</code></pre>
<ol start="4"><li><strong>打开 <code>Anaconda prompt</code> 命令窗口，进入你刚刚所创建的环境（我的命名是PyTorch）</strong></li></ol>
<pre><code class="prism language-python">conda activate PyTorch
</code></pre>
<p><strong>进入环境</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/676a4fd6619f47749e7ee42a80277787.png"/><br/> 5. <strong>最后输入官网提供的命令，即可下载</strong></p>
<pre><code class="prism language-python">conda install pytorch torchvision torchaudio cudatoolkit<span class="token operator">=</span><span class="token number">10.2</span> <span class="token operator">-</span>c pytorch
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1b4cda3f5a2f4008917e07fae5a63b4c.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70#pic_center"/></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2fcb4ca68548459e984d4cd79212da86.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70#pic_center"/></p>
<blockquote>
<p>每个人的命令，会由于电脑配置而各不同</p>
</blockquote>
<p><strong>注意</strong>：下载安装过程，可能因为某些原因，并不是很顺利，但遇到问题不要慌，另外网速一定要好，避免出现不必要的错误。</p>
<h1><a id="6__169"></a>6. 测试</h1>
<pre><code class="prism language-py"><span class="token keyword">import</span> torch 
<span class="token keyword">import</span> torch vision

<span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>__version__<span class="token punctuation">)</span> <span class="token comment"># pytorch版本</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>version<span class="token punctuation">.</span>cuda<span class="token punctuation">)</span> <span class="token comment"># cuda版本</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 查看cuda是否可用</span>
</code></pre>
<p><strong>打开 <code>Anaconda prompt</code> 命令窗口，激活环境，输入<code>python</code>，进入<code>python</code>开发环境中</strong></p>
<pre><code class="prism language-python"><span class="token keyword">import</span> torch
torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<pre><code class="prism language-python"><span class="token boolean">True</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b3a35a04212c48f5a01e360d4423a998.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MDkyMDYx,size_16,color_FFFFFF,t_70"/></p>
<blockquote>
<p>看到<strong>True</strong>的那一刻，我真的开心，终于成功了。</p>
</blockquote>
<h1><a id="7_PycharmAnacondapytorch_196"></a>7. Pycharm使用Anaconda创建的pytorch虚拟环境</h1>
<p><strong>请参考</strong>：<a href="https://blog.csdn.net/qq_46092061/article/details/119155636">Pycharm加载conda创建pytorch虚拟环境 &amp; import torch报错问题解决</a></p>
<h1><a id="_201"></a>后序</h1>
<p><strong>安装过程如果您遇到相关问题</strong></p>
<p><strong>请参考</strong>：</p>
<p><a href="https://blog.csdn.net/qq_46092061/article/details/119153344?spm=1001.2014.3001.5501">【安装PyTorch报错】InvalidArchiveError(‘Error with archive D:\anaconda\pkgs\pytorch-1.2.0-py3.6····</a></p>
<p><a href="https://blog.csdn.net/qq_46092061/article/details/119144630?spm=1001.2014.3001.5501">Conda修改 Anaconda 默认镜像源（Collecting package metadata (current_repodata.json): failed）</a></p>
<p><a href="https://blog.csdn.net/qq_46092061/article/details/119141556?spm=1001.2014.3001.5501">CondaError: Downloaded bytes did not match Content-Length</a></p>
<p><strong>参考：</strong></p>
<p><a href="https://blog.csdn.net/qq_40733911/article/details/113061874?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162735558616780265428085%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162735558616780265428085&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-3-113061874.pc_search_all_es&amp;utm_term=pytorch%E5%AE%89%E8%A3%85&amp;spm=1018.2226.3001.4187">link</a></p>
<p><a href="https://mirror.tuna.tsinghua.edu.cn/help/anaconda/">tuna</a></p>
<p><mark><strong>加油!</strong></mark></p>
<p><mark><strong>感谢!</strong></mark></p>
<p><mark><strong>努力!</strong></mark></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>