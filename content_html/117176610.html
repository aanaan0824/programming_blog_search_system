<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<blockquote>
<p id="main-toc"><strong>目录</strong></p>
<p id="%E4%B8%80%E3%80%81%20%E5%AE%98%E6%96%B9%E7%BD%91%E7%AB%99-toc" style="margin-left:80px;"><a href="#%E4%B8%80%E3%80%81%20%E5%AE%98%E6%96%B9%E7%BD%91%E7%AB%99">一、 官方网站</a></p>
<p id="%E4%BA%8C%E3%80%81%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0-toc" style="margin-left:80px;"><a href="#%E4%BA%8C%E3%80%81%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0">二、命名参数</a></p>
<p id="%E4%B8%89%E3%80%81%E5%B1%9E%E6%80%A7%E6%B3%A8%E8%A7%A3-toc" style="margin-left:80px;"><a href="#%E4%B8%89%E3%80%81%E5%B1%9E%E6%80%A7%E6%B3%A8%E8%A7%A3">三、属性注解</a></p>
<p id="%E5%9B%9B%E3%80%81%E6%9E%84%E9%80%A0%E5%99%A8%E5%B1%9E%E6%80%A7%E7%9A%84%E6%8F%90%E5%8D%87-toc" style="margin-left:80px;"><a href="#%E5%9B%9B%E3%80%81%E6%9E%84%E9%80%A0%E5%99%A8%E5%B1%9E%E6%80%A7%E7%9A%84%E6%8F%90%E5%8D%87">四、构造器属性的提升</a></p>
<p id="%E4%BA%94%E3%80%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><a href="#%E4%BA%94%E3%80%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B">五、联合类型</a></p>
<p id="%E5%85%AD%E3%80%81match%E8%A1%A8%E8%BE%BE%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%E5%85%AD%E3%80%81match%E8%A1%A8%E8%BE%BE%E5%BC%8F">六、match表达式</a></p>
<p id="%E4%B8%83%E3%80%81nullsafe%E8%BF%90%E7%AE%97%E7%AC%A6-toc" style="margin-left:80px;"><a href="#%E4%B8%83%E3%80%81nullsafe%E8%BF%90%E7%AE%97%E7%AC%A6">七、nullsafe运算符</a></p>
<p id="%E5%85%AB%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E5%AD%97%E5%BC%B1%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83%E4%BC%98%E5%8C%96-toc" style="margin-left:80px;"><a href="#%E5%85%AB%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E5%AD%97%E5%BC%B1%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83%E4%BC%98%E5%8C%96">八、字符串数字弱类型比较优化</a></p>
<p id="%E4%B9%9D%E3%80%81%E5%87%BD%E6%95%B0%E9%94%99%E8%AF%AF%E4%B8%80%E8%87%B4%E6%80%A7-toc" style="margin-left:80px;"><a href="#%E4%B9%9D%E3%80%81%E5%87%BD%E6%95%B0%E9%94%99%E8%AF%AF%E4%B8%80%E8%87%B4%E6%80%A7">九、函数错误一致性</a></p>
<p id="%E5%8D%81%E3%80%81JIT%E4%BC%98%E5%8C%96-toc" style="margin-left:80px;"><a href="#%E5%8D%81%E3%80%81JIT%E4%BC%98%E5%8C%96">十、JIT优化</a></p>
<p id="%E5%8D%81%E4%B8%80%E3%80%81%E5%85%B6%E4%BB%96%E6%94%B9%E8%BF%9B-toc" style="margin-left:80px;"><a href="#%E5%8D%81%E4%B8%80%E3%80%81%E5%85%B6%E4%BB%96%E6%94%B9%E8%BF%9B">十一、其他改进</a></p>
<hr id="hr-toc"/>
<p></p>
</blockquote>
<h3 id="%E4%B8%80%E3%80%81%20%E5%AE%98%E6%96%B9%E7%BD%91%E7%AB%99">一、 官方网站</h3>
<ul><li>php8官方网站：<a href="https://www.php.net/releases/8.0/en.php" title="PHP: PHP 8.0.0 Release Announcement">PHP: PHP 8.0.0 Release Announcement</a></li></ul>
<p></p>
<h3 id="%E4%BA%8C%E3%80%81%E5%91%BD%E5%90%8D%E5%8F%82%E6%95%B0"><strong>二、命名参数</strong></h3>
<ul><li>官方英文：Named arguments</li><li>传参的时候，可以跳过可选参数，这在之前版本中不行</li></ul>
<pre><code class="language-php">&lt;?php
//php7
htmlspecialchars($string, ENT_COMPAT | ENT_HTML401, 'UTF-8', false);

//php8
htmlspecialchars($string, double_encode: false);
</code></pre>
<p></p>
<h3 id="%E4%B8%89%E3%80%81%E5%B1%9E%E6%80%A7%E6%B3%A8%E8%A7%A3">三、属性注解</h3>
<ul><li>官方英文：Attributes</li><li>可以使用PHP原生语法来使用结构化元数据，而非PHPDoc申明</li></ul>
<pre><code class="language-php">&lt;?php
//php7
class PostsController
{
    /**
     * @Route("/api/posts/{id}", methods={"GET"})
     */
    public function get($id) { /* ... */ }
}

//php8
class PostsController
{
    #[Route("/api/posts/{id}", methods: ["GET"])]
    public function get($id) { /* ... */ }
}</code></pre>
<p></p>
<h3 id="%E5%9B%9B%E3%80%81%E6%9E%84%E9%80%A0%E5%99%A8%E5%B1%9E%E6%80%A7%E7%9A%84%E6%8F%90%E5%8D%87">四、构造器属性的提升</h3>
<ul><li>官方英文：Constructor property promotion</li><li>可以使用更简便的方法初始化属性</li></ul>
<pre><code class="language-php">&lt;?php
//php7
class Point {
  public float $x;
  public float $y;
  public float $z;

  public function __construct(
    float $x = 0.0,
    float $y = 0.0,
    float $z = 0.0
  ) {
    $this-&gt;x = $x;
    $this-&gt;y = $y;
    $this-&gt;z = $z;
  }
}

//php8
class Point {
  public function __construct(
    public float $x = 0.0,
    public float $y = 0.0,
    public float $z = 0.0,
  ) {}
}</code></pre>
<p></p>
<h3 id="%E4%BA%94%E3%80%81%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B">五、联合类型</h3>
<ul><li>官方英文：Union types</li><li>老版本申明类型单一，php8可以申明多种类型</li></ul>
<pre><code class="language-php">&lt;?php
//php7
class Number {
  /** @var int|float */
  private $number;

  /**
   * @param float|int $number
   */
  public function __construct($number) {
    $this-&gt;number = $number;
  }
}

new Number('NaN'); // Ok

//php8
class Number {
  public function __construct(
    private int|float $number
  ) {}
}

new Number('NaN'); // TypeError</code></pre>
<p></p>
<h3 id="%E5%85%AD%E3%80%81match%E8%A1%A8%E8%BE%BE%E5%BC%8F">六、match表达式</h3>
<ul><li>官方英文：Match expression</li><li>switch表达式的简化</li></ul>
<pre><code class="language-php">&lt;?php
//php7
switch (8.0) {
  case '8.0':
    $result = "Oh no!";
    break;
  case 8.0:
    $result = "This is what I expected";
    break;
}

//php8
echo match (8.0) {
  '8.0' =&gt; "Oh no!",
  8.0 =&gt; "This is what I expected",
};</code></pre>
<p></p>
<h3 id="%E4%B8%83%E3%80%81nullsafe%E8%BF%90%E7%AE%97%E7%AC%A6">七、nullsafe运算符</h3>
<ul><li>官方英文：Nullsafe operator </li><li>可以使用nullsafe运算符链式调用，而不需要检测null，如果其中一个不满足，直接中断并返回null</li></ul>
<pre><code class="language-php">&lt;?php
//php7
$country =  null;

if ($session !== null) {
  $user = $session-&gt;user;

  if ($user !== null) {
    $address = $user-&gt;getAddress();
 
    if ($address !== null) {
      $country = $address-&gt;country;
    }
  }
}

//php8
$country = $session?-&gt;user?-&gt;getAddress()?-&gt;country;</code></pre>
<p></p>
<h3 id="%E5%85%AB%E3%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%95%B0%E5%AD%97%E5%BC%B1%E7%B1%BB%E5%9E%8B%E6%AF%94%E8%BE%83%E4%BC%98%E5%8C%96">八、字符串数字弱类型比较优化</h3>
<ul><li>官方英文：Saner string to number comparisons</li><li>字符串和数字的比较更加的严格</li></ul>
<pre><code class="language-php">&lt;?php
//php7
0 == 'foobar' // true

//php8
0 == 'foobar' // false</code></pre>
<p></p>
<h3 id="%E4%B9%9D%E3%80%81%E5%87%BD%E6%95%B0%E9%94%99%E8%AF%AF%E4%B8%80%E8%87%B4%E6%80%A7">九、函数错误一致性</h3>
<ul><li>官方英文：Consistent type errors for internal functions</li><li>以前错误类型会分notice、warning、error，现在大多数位TypeError</li></ul>
<pre><code class="language-php">&lt;?php
//php7
strlen([]); // Warning: strlen() expects parameter 1 to be string, array given
array_chunk([], -1); // Warning: array_chunk(): Size parameter expected to be greater than 0

//php8 
strlen([]); // TypeError: strlen(): Argument #1 ($str) must be of type string, array given
array_chunk([], -1); // ValueError: array_chunk(): Argument #2 ($length) must be greater than 0</code></pre>
<p></p>
<h3 id="%E5%8D%81%E3%80%81JIT%E4%BC%98%E5%8C%96">十、JIT优化</h3>
<ul><li>官方英文：Relative JIT contribution to PHP 8 performance</li><li>这个改动被鸟哥成为php8中最重要的改动，php8中引入了两个即时编译引擎，Tracing JIT在两个中潜力更大，显示了三倍的性能，某些长时间运行的程序中也显示了1.5-2倍的性能改进</li></ul>
<p style="text-align:center;"><img alt="" src="image\20210531224252998.jpg"/></p>
<p></p>
<h3 id="%E5%8D%81%E4%B8%80%E3%80%81%E5%85%B6%E4%BB%96%E6%94%B9%E8%BF%9B">十一、其他改进</h3>
<ul><li>操作符@将不再抑制fatal类型错误</li><li>assert()不再支持执行代码，减少了安全漏洞</li><li>create_function()函数彻底被移除</li><li>因为libxml的依赖最低2.9.0起，所以XXE漏洞彻底可以消失了</li><li>Phar中元信息不再进行自动反序列化了，phar://触发反序列化的姿势也告别了</li><li>parse_str()必须传入第二个参数了，少了一种全局变量覆盖的方法</li></ul>
</div>
</div>