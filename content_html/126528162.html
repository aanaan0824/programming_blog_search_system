<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_1">哔，老年卡</a></li><li><a href="#_6">某牙直播抓包</a></li><li><a href="#_51">某博抓包</a></li><li><a href="#_113">某手短视频抓包</a></li></ul>
</div>
<p></p>
<h1><a id="_1"></a>哔，老年卡</h1>
<p>很多小伙伴总是问我，数据来源怎么找啊，怎么抓包，其实很简单，多操作几遍就记住了。</p>
<p>今天咱们通过三个案例来展示一下</p>
<h1><a id="_6"></a>某牙直播抓包</h1>
<p>首先咱们进入目标网页，随便找一个视频，通过开发者工具抓包分析。</p>
<p>首先按F12或者点击右键选择检查，打开开发者工具，依次选择 network（网络面板） → AII （全部）</p>
<p>然后刷新网页，让当前网页内容重新加载出来。</p>
<p><img alt="" src="image\d186865358ab437583d8a118e98b6d83.png"/></p>
<p>以前是可以直接选择 media （媒体文件）就能看到了，现在不行了，所以说，互联网更新迭代很快，网站经常更新，技术也需要时刻准备更新，我们也是学习不能停，一停就落伍。</p>
<p><img alt="" src="image\9e4d639d5b1c481b95297c6e894f18ab.png"/><br/> 但是刷新后的数据太多，我们如何确定哪一条是咱们的目标呢？</p>
<p>以当前某牙为例， 视频改成了m3u8格式，它会把完整视频分成很多个视频片段，这些ts文件都是m3u8格式视频片段。<br/> <img alt="" src="image\38eacdd0fa1f4779bc2f4da851c81d81.png"/><br/> 我们把URL复制到新窗口打开，它就直接把片段下载下来了。</p>
<p><img alt="" src="image\ca459d5ee7344509b372c0496c79b08b.png"/></p>
<p>我们完整的视频是2.26分，但是每一个片段只有几秒钟。</p>
<p><img alt="" src="image\a5d02bcfb13b49c5bfa667131f28cae9.png"/><br/> 那么计算一下，平均一个五秒，2.26分差不多要17个视频，还得自己手动合并，多麻烦。</p>
<p>但是它有一个专门的m3u8格式的文件，保存了所有的ts文件内容。</p>
<p>我们直接点击左上角搜索框，直接搜索 m3u8 ,然后看到一个get开头的文件，点击它，再点击preview （预览数据） ，视频的标题等信息都可以看到。<br/> <img alt="" src="image\b7dff3f08f2440eba4960effffa6a6f5.png"/><br/> 找到这个 definitions 展开 ，m3u8的视频就在里面了，原画、超清、流畅。</p>
<p>可以看到，它也有完整的url地址在这，可以直接用。<br/> <img alt="" src="image\56d3e76d0ef8442082ea3a284970adf9.png"/></p>
<p>我都注释一下吧</p>
<p><img alt="" src="image\69fb018294784173a88df8f3e8bcad27.png"/><br/> 这是直播视频的数据查找方式</p>
<p>接下来看看微博视频</p>
<h1><a id="_51"></a>某博抓包</h1>
<p>第一步详细介绍，后面就不做太多截图一一展示了，只展示大概流程了，所以如果忘了，建议多看看第一步的，当然，两个网站之间不一样的地方，我都会一一截图展示。</p>
<p>确定目标网址，打开一个视频播放页面。</p>
<p><img alt="" src="image\0d1f70bcc2b840d389115d667f888287.png"/></p>
<p><img alt="" src="image\4fbb402490b44b3b8d4e9abc478babb0.png"/><br/> 有点过份暴露，这是我没想到的，简单的打个码。</p>
<p>按F12 打开开发者工具，点击network 点击Aii ,刷新网页。</p>
<p>然后此时发生了一件愉快的事情😂</p>
<p>刷新一下视频不见了，于是我又去搜博主名字</p>
<p><img alt="" src="image\0898184db8e64802b83fd2fcc851d358.png"/><br/> 啊这 😲</p>
<p>我太南了，算了 ，换一个吧…</p>
<p>编辑推荐的每一个都很给力，我先用第四个给你们展示吧，展示完，我再都去看一遍😏<br/> <img alt="" src="image\aed8e4a07fbc473bae1f522447e54e96.png"/><br/> 好了，咱们言归正传。</p>
<p>对于绝大部分网站来说，他的第一个数据包就是当前网页。除了一少部分特殊网址不一样。</p>
<p><img alt="" src="image\84a91b3500174aaf83ff208e033e1afb.png"/><br/> 今天的目标它的视频不一定在第一个网页源代码中，即使复制了url能进入，也还是不一定在。</p>
<p>因为有一些数据，它是会动态加载的，或者说不在同一个数据包里面。</p>
<p>第二种方法，我们把当前目标的标题复制到搜索框，然后回车，当然，也有可能搜不到。</p>
<p>第三种方法，我们直接点击 fetch/XHR 动态数据抓包，这里面是实时加载的。</p>
<p><img alt="" src="image\1f47f689b1984ee982293ea8be0f8d29.png"/><br/> 我真的会谢，视频又没了…</p>
<p>算了，我再找新的吧。</p>
<p>我们可以看到，左边有那么多数据，那么谁才是我们需要的呢？</p>
<p><img alt="" src="image\96b5cd21c15542109372dd4522699c78.png"/><br/> 这时候需要我们一个个点，一般是这两个，有时候也不一定，所以需要一个个点。</p>
<p><img alt="" src="image\1bd416b0d7a14c8f94b7fe428d8e4580.png"/></p>
<p>然后点击右边的倒三角，一一展开，往下拉，找到这个urls，就可以看到视频地址了，各个清晰度的都有。</p>
<p><img alt="" src="image\58c7ef0b158f4374994ac21bf699833a.png"/>然后视频的ID 、标题等等都在这里。</p>
<p>为什么说要一个个点，你看这两个长得一样的， 我刚刚点的是第一个，现在看看第二个。</p>
<p>这里面都是右边推荐栏的封面，标题，视频id等等。<br/> <img alt="" src="image\0e4a51b2164d42d4b9c71f13faa025fb.png"/></p>
<h1><a id="_113"></a>某手短视频抓包</h1>
<p>接下来来到某手，这次咱们正经一点，找个正经的视频来示范。</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/31d46ba694fb4bb986503d45d4329f47.png"/><br/> emmm … 这个正经多了，我们直接进入主页。</p>
<p>还是一样的操作，打开开发者工具，点开network，刷新，选择AII 。</p>
<p>这次咱们直接复制这个小姐姐的名字搜索</p>
<p>搜索之后，这里有两个一样的选项，咱们需要一个个点击打开看看，确定哪一个是咱们需要的。</p>
<p>一个是博主的ID简介等等，另外一个就是视频的数据了。</p>
<p>这里我直接点第一个graphql → preview 总共是21个视频，可以看到，下图最下方的protourl就是视频的url，photoH265Url 则是音频url 。</p>
<p><img alt="" src="image\d0de18b2f7ba4e81999d1ea68f60e98e.png"/></p>
<p>为什么只有21个？因为没加载出来，刷新后默认只给你加载那么多，所以爬的时候，可以用selenium自动翻页，就能自己加载了。</p>
<p>最后给大家推荐一套视频正好实战一下：<a href="https://www.bilibili.com/video/BV1SA4y1976A">代码总是学完就忘记？100个爬虫实战项目！让你沉迷学习丨学以致用丨下一个Python大神就是你！<br/> </a></p>
<p>好了，兄弟们，今天的分享就到这里，思古白~</p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>