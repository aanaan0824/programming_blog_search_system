<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<blockquote>
<p></p>
<div class="toc">
<h3>âœ¨Spring Bootæ•´åˆæŒä¹…å±‚</h3>
<ul><li><a href="#1_7">1.åŸºæœ¬å·¥ç¨‹</a></li><li><ul><li><a href="#11_8">1.1åŸºæœ¬å·¥ç¨‹</a></li><li><a href="#12mybatis_15">1.2ä¿®æ”¹mybatisé…ç½®ä¿¡æ¯</a></li><li><a href="#13_39">1.3åˆ›å»ºå®ä½“ç±»åŠå…¶æ¥å£</a></li><li><a href="#14_44">1.4å•å…ƒæµ‹è¯•</a></li></ul>
</li><li><a href="#2Mapper_65">2.Mapperæ¥å£æ‰«æ</a></li><li><a href="#3_71">3.æ³¨è§£å¼å¼€å‘</a></li><li><ul><li><a href="#31_72">3.1ç¯å¢ƒå‡†å¤‡</a></li><li><a href="#32mybatis_147">3.2.mybatisçš„å•è¡¨æ“ä½œ</a></li><li><a href="#33_155">3.3æŸ¥è¯¢æ‰€æœ‰å•†å“ä¿¡æ¯</a></li><li><a href="#34_160">3.4æ ¹æ®å•†å“ç¼–å·æŸ¥è¯¢æŒ‡å®šçš„å•†å“ä¿¡æ¯</a></li><li><a href="#35_162">3.5æ ¹æ®å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢å•†å“</a></li><li><a href="#36_166">3.6æ ¹æ®å•†å“ä»·æ ¼ï¼ŒæŸ¥è¯¢æŒ‡å®šèŒƒå›´çš„å•†å“</a></li><li><a href="#37_172">3.7æ’å…¥ä¸€æ¡å•†å“æ•°æ®</a></li><li><ul><li><a href="#371_173">3.7.1ä»£ç æ¼”ç¤º</a></li><li><a href="#372__178">3.7.2 è·å–è‡ªå¢çš„ä¸»é”®</a></li></ul>
</li><li><a href="#38_181">3.8æ ¹æ®ç¼–å·åˆ é™¤æŒ‡å®šå•†å“</a></li><li><a href="#39_196">3.9æ ¹æ®å•†å“ç¼–å·ï¼Œä¿®æ”¹å•†å“ä»·æ ¼</a></li></ul>
</li><li><a href="#4_215">4.æ˜ å°„æ–‡ä»¶å¼€å‘</a></li><li><ul><li><a href="#41_216">4.1åŸºæœ¬æ“ä½œ</a></li><li><a href="#42_258">4.2æŸ¥è¯¢æ‰€æœ‰å•†å“ä¿¡æ¯ä»¥åŠå•†å“ç±»åˆ«çš„è¯¦ç»†ä¿¡æ¯(å¤šå¯¹ä¸€)</a></li><li><a href="#43_271">4.3æŸ¥è¯¢æ‰€æœ‰å•†å“ç±»åˆ«åŠå…¶å•†å“ä¿¡æ¯(ä¸€å¯¹å¤š)</a></li></ul>
</li><li><a href="#5Druid_317">5.æ•´åˆDruid</a></li><li><ul><li><a href="#51_318">5.1ä¼ ç»Ÿè·å–è¿æ¥çš„é—®é¢˜</a></li><li><a href="#52_324">5.2æ•°æ®åº“è¿æ¥æ± </a></li><li><a href="#53_330">5.3æ•´åˆæ­¥éª¤</a></li><li><ul><li><a href="#531pom_333">5.3.1å¼•å…¥pomä¾èµ–</a></li><li><a href="#532druid_344">5.3.2æ·»åŠ druidé…ç½®</a></li><li><a href="#533_351">5.3.3å®Œæ•´é…ç½®</a></li><li><a href="#534_371">5.3.4ä»£ç æµ‹è¯•</a></li></ul>
</li></ul>
</li><li><a href="#6_380">6.äº‹åŠ¡ç®¡ç†</a></li><li><ul><li><a href="#61_381">6.1äº‹åŠ¡çš„æ¦‚å¿µ</a></li><li><a href="#62ACID_385">6.2äº‹åŠ¡çš„å››å¤§ç‰¹æ€§(ACID)</a></li><li><a href="#63_392">6.3äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</a></li><li><a href="#64_399">6.4äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶(å›¾è§£)</a></li><li><a href="#65_428">6.5äº‹åŠ¡çš„å®ç°</a></li><li><a href="#66_433">6.6ä»£ç å®ç°</a></li></ul>
</li><li><a href="#7Mybatis_450">7.Mybatisç¼“å­˜</a></li><li><ul><li><a href="#71_451">7.1ä½¿ç”¨ç¼“å­˜çš„åŸå› </a></li><li><a href="#72Mybatis_455">7.2Mybatisçš„ç¼“å­˜åˆ†ç±»</a></li><li><a href="#73_Spring_BootMybatis_465">7.3 Spring Bootå¯¹Mybatisçš„æ”¯æŒ</a></li><li><a href="#74_474">7.4ä»£ç å®ç°</a></li><li><a href="#75_533">7.5ç¼“å­˜çš„åº•å±‚ç»†èŠ‚(åšå®¢æ¨è)</a></li></ul>
</li></ul>
</div>
<p></p>
<p>ğŸ“ƒä¸ªäººä¸»é¡µ:<a href="https://blog.csdn.net/qq_52797170?spm=1010.2135.3001.5343">ä¸æ–­å‰è¿›çš„çš®å¡ä¸˜</a><br/> ğŸŒåšå®¢æè¿°:<strong>æ¢¦æƒ³ä¹Ÿè®¸é¥ä¸å¯åŠï¼Œä½†é‡è¦çš„æ˜¯è¿½æ¢¦çš„è¿‡ç¨‹ï¼Œç”¨åšå®¢è®°å½•è‡ªå·±çš„æˆé•¿ï¼Œè®°å½•è‡ªå·±ä¸€æ­¥ä¸€æ­¥å‘ä¸Šæ”€ç™»çš„å°è®°</strong><br/> <strong>ğŸ”¥ç½‘ç«™æ¨èï¼šåƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚æ¯å¤©åšæŒåˆ·é¢˜ï¼Œå·©å›ºæ‰€å­¦çŸ¥è¯†ï¼Œä¹Ÿä¸ºå°†æ¥æ‰¾å·¥ä½œï¼Œé¢è¯•åšå¥½å‡†å¤‡</strong>-----<a href="https://www.nowcoder.com/link/pc_csdncpt_pkq_sf">åˆ·é¢˜ç¥å™¨</a></p>
</blockquote>
<h1><a id="1_7"></a>1.åŸºæœ¬å·¥ç¨‹</h1>
<h2><a id="11_8"></a>1.1åŸºæœ¬å·¥ç¨‹</h2>
<ul><li>åˆ›å»ºä¸€ä¸ªSpring Bootå·¥ç¨‹ï¼Œæ·»åŠ Webä¾èµ–ï¼ŒMybatisä¾èµ–ä»¥åŠMySQLé©±åŠ¨ä¾èµ–</li><li>åˆ›å»ºæˆåŠŸä»¥åï¼Œåˆ é™¤MySQLè¿è¡ŒåŸŸscope</li></ul>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/a805eff3793148a7b79533a1caf6696d.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/ade7ece4f63f4e11ae656b844d352284.png"/></p>
<h2><a id="12mybatis_15"></a>1.2ä¿®æ”¹mybatisé…ç½®ä¿¡æ¯</h2>
<p>åœ¨application.propertiesä¸­ä¿®æ”¹é…ç½®ä¿¡æ¯<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/2749f80fa1134c898256dc2f1d0d70bd.png"/></p>
<pre><code class="prism language-sql"><span class="token comment"># æŒ‡å®šMybatisçš„Mapperæ¥å£çš„xmlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span>
mybatis<span class="token punctuation">.</span>mapper<span class="token operator">-</span>locations<span class="token operator">=</span>classpath:mapper<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml
<span class="token comment"># MySQLæ•°æ®åº“é©±åŠ¨</span>
<span class="token comment">#è¿™ä¸ªé©±åŠ¨ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨çš„MySQLè‡ªåŠ¨åŠ è½½ç›¸åº”çš„é©±åŠ¨</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span>class<span class="token operator">-</span>name<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
<span class="token comment"># æ•°æ®æºåç§°</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>name<span class="token operator">=</span>defaultDataSource
<span class="token comment"># æ•°æ®åº“è¿æ¥åœ°å€</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc:mysql:<span class="token comment">//localhost:3306/bjpowernode?serverTimezone=UTC</span>
<span class="token comment"># æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç </span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">123456</span>
<span class="token comment"># è®¾ç½®æ—¥å¿—çº§åˆ«</span>
logging<span class="token punctuation">.</span><span class="token keyword">level</span><span class="token punctuation">.</span>com<span class="token punctuation">.</span>zyh<span class="token punctuation">.</span>springboot<span class="token operator">=</span>debug
</code></pre>
<p>æ•°æ®åº“(å¤§å®¶å¯ä»¥ç”¨ä»¥å‰åˆ›å»ºçš„æ•°æ®åº“æ¥è¿›è¡Œæµ‹è¯•)<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/2c2d0bc05e5f4381a4cdab1171ee7044.png"/></p>
<h2><a id="13_39"></a>1.3åˆ›å»ºå®ä½“ç±»åŠå…¶æ¥å£</h2>
<p><font color="red" size="4">@Mapperæ³¨è§£ï¼š<br/> ä½œç”¨ï¼šåœ¨æ¥å£ç±»ä¸Šæ·»åŠ äº†@Mapperï¼Œåœ¨ç¼–è¯‘ä¹‹åä¼šç”Ÿæˆç›¸åº”çš„æ¥å£å®ç°ç±»<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/d3479f92fd78451b99428ef7f8e0a5c7.png"/></font></p>
<h2><a id="14_44"></a>1.4å•å…ƒæµ‹è¯•</h2>
<p><font size="4">æˆ‘ä»¬å¯ä»¥é€‰ä¸­mapperæ¥å£ï¼Œä½¿ç”¨å¿«æ·é”®alt+/,å°±å¯ä»¥åˆ›å»ºjunitå•å…ƒæµ‹è¯•<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/177499a38f3c495f95c03c23ef1dd8aa.png"/></font></p>
<pre><code class="prism language-css">2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>13.453  INFO 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> Starting DeptMapperTest using Java 1.8.0_131 on LAPTOP-59BP4RH1 with PID 10228 <span class="token punctuation">(</span>started by 17614 in <span class="token property">D</span><span class="token punctuation">:</span>\springboot\springboot09_base<span class="token punctuation">)</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>13.453 DEBUG 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> Running with Spring Boot v2.7.2<span class="token punctuation">,</span> Spring v5.3.22
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>13.453  INFO 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> No active profile set<span class="token punctuation">,</span> falling back to 1 default <span class="token property">profile</span><span class="token punctuation">:</span> <span class="token string">"default"</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>15.183  INFO 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> Started DeptMapperTest in 2.055 seconds <span class="token punctuation">(</span>JVM running for 3.177<span class="token punctuation">)</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>15.390  INFO 10228 --- [           main] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Starting...
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.720  INFO 10228 --- [           main] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Start completed.
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.720 DEBUG 10228 --- [           main] c.z.s.mapper.DeptMapper.<span class="token property">queryAllDept</span>     <span class="token punctuation">:</span> ==&gt;  <span class="token property">Preparing</span><span class="token punctuation">:</span> select * from dept
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.751 DEBUG 10228 --- [           main] c.z.s.mapper.DeptMapper.<span class="token property">queryAllDept</span>     <span class="token punctuation">:</span> ==&gt; <span class="token property">Parameters</span><span class="token punctuation">:</span> 
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.782 DEBUG 10228 --- [           main] c.z.s.mapper.DeptMapper.<span class="token property">queryAllDept</span>     <span class="token punctuation">:</span> &lt;==      <span class="token property">Total</span><span class="token punctuation">:</span> 3
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.782 DEBUG 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Dept</span><span class="token punctuation">(</span>deptno=10<span class="token punctuation">,</span> dname=åª’ä½“éƒ¨<span class="token punctuation">,</span> loc=ä¸Šæµ·<span class="token punctuation">)</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.782 DEBUG 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Dept</span><span class="token punctuation">(</span>deptno=20<span class="token punctuation">,</span> dname=ç ”å‘éƒ¨<span class="token punctuation">,</span> loc=ä¸Šæµ·<span class="token punctuation">)</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.782 DEBUG 10228 --- [           main] c.zyh.springboot.mapper.<span class="token property">DeptMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Dept</span><span class="token punctuation">(</span>deptno=30<span class="token punctuation">,</span> dname=äººäº‹éƒ¨<span class="token punctuation">,</span> loc=æ­å·<span class="token punctuation">)</span>
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.798  INFO 10228 --- [ionShutdownHook] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Shutdown initiated...
2022-07-31 12<span class="token punctuation">:</span>35<span class="token punctuation">:</span>18.813  INFO 10228 --- [ionShutdownHook] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Shutdown completed.
</code></pre>
<h1><a id="2Mapper_65"></a>2.Mapperæ¥å£æ‰«æ</h1>
<p><font color="red" size="4">@MapperScan<br/> ä½œç”¨ï¼šæŒ‡å®šè¦å˜æˆå®ç°ç±»çš„æ¥å£æ‰€åœ¨çš„åŒ…ï¼Œç„¶ååŒ…ä¸‹é¢çš„æ‰€æœ‰æ¥å£åœ¨ç¼–è¯‘ä¹‹åéƒ½ä¼šç”Ÿæˆç›¸åº”çš„å®ç°ç±»<br/> æ·»åŠ ä½ç½®ï¼šæ˜¯åœ¨Springbootå¯åŠ¨ç±»ä¸Šé¢æ·»åŠ ã€‚<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/bfd810f20b104a788a35a272f640a13d.png"/></font></p>
<h1><a id="3_71"></a>3.æ³¨è§£å¼å¼€å‘</h1>
<h2><a id="31_72"></a>3.1ç¯å¢ƒå‡†å¤‡</h2>
<p><font size="4">æˆ‘ä»¬å…ˆå‡†å¤‡æ•°æ®åº“å’Œè¡¨</font></p>
<pre><code class="prism language-sql"><span class="token comment"># åˆ›å»ºæ•°æ®åº“</span>
 <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> shop<span class="token punctuation">;</span>
<span class="token comment"># ä½¿ç”¨æ•°æ®åº“</span>
<span class="token keyword">USE</span> shop<span class="token punctuation">;</span>
<span class="token comment"># åˆ›å»ºå•†å“ç±»åˆ«è¡¨: type</span>
	<span class="token comment"># id ä¸»é”®è‡ªå¢</span>
	<span class="token comment"># name ç±»åˆ«åç§°</span>
<span class="token comment"># åˆ›å»ºè¡¨</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>type<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">DESC</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>type<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment"># åˆ›å»ºå•†å“è¡¨ product</span>
	<span class="token comment"># id ä¸»é”®è‡ªå¢</span>
	<span class="token comment"># name å•†å“åç§°</span>
	<span class="token comment"># price è¦æ±‚æ˜¯éè´Ÿçš„æµ®ç‚¹æ•°</span>
	<span class="token comment"># sell å¸ƒå°”ç±»å‹ sell=0è¡¨ç¤ºå”®å–ï¼Œsell=1è¡¨ç¤ºä¸‹æ¶</span>
	<span class="token comment">#c_date å¼€å§‹å”®å–æ—¶é—´ï¼Œç²¾ç¡®åˆ°å¹´æœˆæ—¥å³å¯</span>
	<span class="token comment"># tidå•†å“ç±»å‹idï¼Œå¤–é”®ï¼Œç®¡ç†typeè¡¨çš„id</span>
	
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> product<span class="token punctuation">(</span>
	id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
	NAME <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	price <span class="token keyword">DOUBLE</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">,</span>
	sell <span class="token keyword">TINYINT</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">,</span>
	c_date <span class="token keyword">DATE</span><span class="token punctuation">,</span>
	tid <span class="token keyword">INT</span><span class="token punctuation">,</span>
	<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>tid<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>type<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	
	
<span class="token comment"># æ’å…¥æ•°æ®</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>type<span class="token punctuation">`</span></span> <span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">'æ‰‹æœº'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">'ç”µè„‘'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">'å¹³æ¿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>type<span class="token punctuation">`</span></span><span class="token punctuation">;</span>	
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> product <span class="token keyword">VALUES</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"åä¸ºæ‰‹æœº"</span><span class="token punctuation">,</span><span class="token number">5000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2022-7-31'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"è‹¹æœæ‰‹æœº"</span><span class="token punctuation">,</span><span class="token number">9000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2012-5-26'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"åä¸ºç”µè„‘"</span><span class="token punctuation">,</span><span class="token number">8000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2010-5-26'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"è‹¹æœç”µè„‘"</span><span class="token punctuation">,</span><span class="token number">12000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2012-3-10'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"åä¸ºå¹³æ¿"</span><span class="token punctuation">,</span><span class="token number">2000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2019-4-8'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token keyword">DEFAULT</span><span class="token punctuation">,</span><span class="token string">"è‹¹æœå¹³æ¿"</span><span class="token punctuation">,</span><span class="token number">6000.0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'2016-3-2'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>ç„¶ååˆ›å»ºspring booté¡¹ç›®ï¼Œä¿®æ”¹ç›¸å…³é…ç½®</p>
<pre><code class="prism language-sql"><span class="token comment"># æŒ‡å®šMybatisçš„Mapperæ¥å£çš„xmlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span>
mybatis<span class="token punctuation">.</span>mapper<span class="token operator">-</span>locations<span class="token operator">=</span>classpath:mapper<span class="token operator">/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml
<span class="token comment"># MySQLæ•°æ®åº“é©±åŠ¨</span>
<span class="token comment">#è¿™ä¸ªé©±åŠ¨ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨çš„MySQLè‡ªåŠ¨åŠ è½½ç›¸åº”çš„é©±åŠ¨</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>driver<span class="token operator">-</span>class<span class="token operator">-</span>name<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>cj<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
<span class="token comment"># æ•°æ®æºåç§°</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>name<span class="token operator">=</span>defaultDataSource
<span class="token comment"># æ•°æ®åº“è¿æ¥åœ°å€</span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc:mysql:<span class="token comment">//localhost:3306/shop?serverTimezone=UTC&amp;zeroDateTimeBehavior=convertToNull</span>
<span class="token comment"># æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç </span>
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>username<span class="token operator">=</span>root
spring<span class="token punctuation">.</span>datasource<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">123456</span>
<span class="token comment"># è®¾ç½®æ—¥å¿—çº§åˆ«</span>
logging<span class="token punctuation">.</span><span class="token keyword">level</span><span class="token punctuation">.</span>com<span class="token punctuation">.</span>zyh<span class="token punctuation">.</span>springboot<span class="token operator">=</span>debug
<span class="token comment"># å¼€å¯mybatisé©¼å³°å‘½åè§„åˆ™è‡ªåŠ¨è½¬æ¢åŠŸèƒ½</span>
mybatis<span class="token punctuation">.</span>configuration<span class="token punctuation">.</span>map<span class="token operator">-</span>underscore<span class="token operator">-</span><span class="token keyword">to</span><span class="token operator">-</span>camel<span class="token operator">-</span><span class="token keyword">case</span><span class="token operator">=</span><span class="token boolean">true</span>

</code></pre>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/7b0e2c8e34134aa6bfa578546b1ceecb.png"/></p>
<h2><a id="32mybatis_147"></a>3.2.mybatisçš„å•è¡¨æ“ä½œ</h2>
<ul><li>æŸ¥è¯¢æ‰€æœ‰å•†å“ä¿¡æ¯</li><li>æ ¹æ®å•†å“ç¼–å·æŸ¥è¯¢æŒ‡å®šçš„å•†å“ä¿¡æ¯</li><li>æ ¹æ®å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢å•†å“</li><li>æ ¹æ®å•†å“ä»·æ ¼ï¼ŒæŸ¥è¯¢æŒ‡å®šèŒƒå›´çš„å•†å“</li><li>æ’å…¥ä¸€æ¡å•†å“æ•°æ®</li><li>æ ¹æ®ç¼–å·åˆ é™¤æŒ‡å®šå•†å“</li><li>æ ¹æ®å•†å“ç¼–å·ï¼Œä¿®æ”¹å•†å“ä»·æ ¼</li></ul>
<h2><a id="33_155"></a>3.3æŸ¥è¯¢æ‰€æœ‰å•†å“ä¿¡æ¯</h2>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/2a052427c56a4b4bb370974506778ae5.png"/><br/> <font color="red" size="4">å¯èƒ½é‡åˆ°çš„é—®é¢˜:org.springframework.dao.TransientDataAccessResourceException: Error attempting to get column â€˜c_dateâ€™ from result set.<br/> è§£å†³æ–¹æ³•å¦‚ä¸‹:<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/48ec12d50bf54f56994d360d8bf517c2.png"/></font></p>
<h2><a id="34_160"></a>3.4æ ¹æ®å•†å“ç¼–å·æŸ¥è¯¢æŒ‡å®šçš„å•†å“ä¿¡æ¯</h2>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/5397f754442a458ebc8cfcaabd474e4c.png"/></p>
<h2><a id="35_162"></a>3.5æ ¹æ®å•†å“åç§°æ¨¡ç³ŠæŸ¥è¯¢å•†å“</h2>
<p>è¿™é‡Œé¢æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹æ˜¯mybatisçš„å†…å®¹ï¼Œå¤§å®¶å¿˜è®°çš„å¯ä»¥å»å¤ä¹ å¤ä¹ ï¼Œ<a href="https://zengyihong.blog.csdn.net/article/details/123895394">Mybatisç‰¹æ®ŠSQLçš„æ‰§è¡Œ</a><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/d8e2f5b13cb1490a9a13d43d6e003965.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/ece42bbd0ee14204b36e31f763e059de.png"/></p>
<h2><a id="36_166"></a>3.6æ ¹æ®å•†å“ä»·æ ¼ï¼ŒæŸ¥è¯¢æŒ‡å®šèŒƒå›´çš„å•†å“</h2>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/b7aca7251e1647d6999553fb509e45e4.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/94284a7db8214f0aaa3eb69ffa9fdbd0.png"/><br/> <font color="red" size="4">æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡mapæ¥ä¼ å‚<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/1facfdfd96c849ba9bdcefa25d7d102c.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9ee4476c083b43ebb16271a130ec5311.png"/></font></p>
<h2><a id="37_172"></a>3.7æ’å…¥ä¸€æ¡å•†å“æ•°æ®</h2>
<h3><a id="371_173"></a>3.7.1ä»£ç æ¼”ç¤º</h3>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/b6444c6db73f46e6aeaa220f861a70ae.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/508c66a01da84a29a7f51e74c897f36d.png"/><br/> <font size="4">æˆ‘ä»¬å‘ç°æ­¤æ—¶æ‰“å°çš„ä¿¡æ¯ä¸­ï¼Œä¸»é”®ä¸ºç©ºï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œæ•°æ®æ’å…¥åœ¨æ•°æ®åº“ä¸­æ˜¯æœ‰ä¸»é”®çš„<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/c49517e1c6464750b4dac6613654134f.png"/></font></p>
<h3><a id="372__178"></a>3.7.2 è·å–è‡ªå¢çš„ä¸»é”®</h3>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/fb6178dd61514e5b9ffaa743f3400ecc.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/401153c7e2e9422eaa98d083d63cdb70.png"/></p>
<h2><a id="38_181"></a>3.8æ ¹æ®ç¼–å·åˆ é™¤æŒ‡å®šå•†å“</h2>
<pre><code class="prism language-css">//  æ ¹æ®ç¼–å·åˆ é™¤æŒ‡å®šå•†å“
    <span class="token atrule"><span class="token rule">@Delete</span><span class="token punctuation">(</span>"delete from product where id=#</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>"<span class="token punctuation">)</span>
    void <span class="token function">deleteById</span><span class="token punctuation">(</span>Integer id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="prism language-css">   <span class="token atrule"><span class="token rule">@Test</span>
    public void <span class="token function">testDeleteById</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">{<!-- --></span>
        productMapper.<span class="token function">deleteById</span><span class="token punctuation">(</span>8<span class="token punctuation">)</span><span class="token punctuation">;</span>
         
    <span class="token punctuation">}</span>
</code></pre>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/675b14658ba141629e2b99b1c77b96a6.png"/></p>
<h2><a id="39_196"></a>3.9æ ¹æ®å•†å“ç¼–å·ï¼Œä¿®æ”¹å•†å“ä»·æ ¼</h2>
<pre><code class="prism language-css">//  æ ¹æ®å•†å“ç¼–å·ï¼Œä¿®æ”¹å•†å“ä»·æ ¼
    <span class="token atrule"><span class="token rule">@Update</span><span class="token punctuation">(</span>"update product set price=#</span><span class="token punctuation">{<!-- --></span>price<span class="token punctuation">}</span> <span class="token selector">where id=#</span><span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>"<span class="token punctuation">)</span>
    void <span class="token function">updateById</span><span class="token punctuation">(</span><span class="token atrule"><span class="token rule">@Param</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> Integer id<span class="token punctuation">,</span><span class="token atrule"><span class="token rule">@Param</span><span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">)</span> Double price<span class="token punctuation">)</span><span class="token punctuation">;</span></span></span>
</code></pre>
<pre><code class="prism language-css">  <span class="token atrule"><span class="token rule">@Test</span>
    public void <span class="token function">testUpdateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">{<!-- --></span>
        productMapper.<span class="token function">updateById</span><span class="token punctuation">(</span>8<span class="token punctuation">,</span> 3000.0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/ef77a31f00b746f587722b928fdb4914.png"/></p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9880ecfdb6cf476984b64587c60532b9.png"/></p>
<h1><a id="4_215"></a>4.æ˜ å°„æ–‡ä»¶å¼€å‘</h1>
<h2><a id="41_216"></a>4.1åŸºæœ¬æ“ä½œ</h2>
<p>å¤§å®¶å¯ä»¥å…ˆæŠŠè¿™ä¸ªæ’ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¼€å‘<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/eee4da1bbf144c489c1534a9ebfe5d9f.png"/><br/> ç¯å¢ƒé…ç½®å’Œä¸Šé¢çš„æ³¨è§£å¼€å‘æ˜¯ä¸€æ ·çš„</p>
<pre><code class="prism language-yml"><span class="token comment"># æŒ‡å®šMybatisçš„Mapperæ¥å£çš„xmlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span>
mybatis.mapper<span class="token punctuation">-</span>locations=classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
<span class="token comment"># MySQLæ•°æ®åº“é©±åŠ¨</span>
<span class="token comment">#è¿™ä¸ªé©±åŠ¨ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨çš„MySQLè‡ªåŠ¨åŠ è½½ç›¸åº”çš„é©±åŠ¨</span>
spring.datasource.driver<span class="token punctuation">-</span>class<span class="token punctuation">-</span>name=com.mysql.cj.jdbc.Driver
<span class="token comment"># æ•°æ®æºåç§°</span>
spring.datasource.name=defaultDataSource
<span class="token comment"># æ•°æ®åº“è¿æ¥åœ°å€</span>
spring.datasource.url=jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/shop<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;zeroDateTimeBehavior=convertToNull</span>
<span class="token comment"># æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç </span>
spring.datasource.username=root
spring.datasource.password=123456
<span class="token comment"># è®¾ç½®æ—¥å¿—çº§åˆ«</span>
logging.level.com.zyh.springboot=debug
<span class="token comment"># å¼€å¯mybatisé©¼å³°å‘½åè§„åˆ™è‡ªåŠ¨è½¬æ¢åŠŸèƒ½</span>
mybatis.configuration.map<span class="token punctuation">-</span>underscore<span class="token punctuation">-</span>to<span class="token punctuation">-</span>camel<span class="token punctuation">-</span>case=true

</code></pre>
<p>æä¾›å¯¹åº”çš„å®ä½“ç±»å’Œmapperæ¥å£<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/c46ff5619f5d4e328ee16a48b1b1b7bf.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/69671eb75a7f4f4eb2de1174f1365f7b.png"/></p>
<p>mapper</p>
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span> <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span> <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.zyh.springboot.mapper.ProductMapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>queryById<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.zyh.springboot.bean.Product<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        select * from product where id=#{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>æµ‹è¯•<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/657b6aedc0044c8fb4cc2a8f3dbd1afb.png"/></p>
<h2><a id="42_258"></a>4.2æŸ¥è¯¢æ‰€æœ‰å•†å“ä¿¡æ¯ä»¥åŠå•†å“ç±»åˆ«çš„è¯¦ç»†ä¿¡æ¯(å¤šå¯¹ä¸€)</h2>
<blockquote>
<p><font size="4">å› ä¸ºæ¶‰åŠåˆ°å¤šè¡¨æŸ¥è¯¢ï¼Œæˆ‘ä»¬è¿™ä¸ªæ—¶å€™éœ€è¦æ–°å¢åŠ ä¸€ä¸ªç±»Type<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/eae1d35ecbb94a7484f1a69ad90779b2.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/64ec084c12424b119cf3a5622ca8e2e8.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/684613601daa4f8d8e1ff851d33c5e23.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/235fd78c73f64438bbebc854bdb22254.png"/><br/> æµ‹è¯•ä»£ç <br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9fdbbf715f41496482deabf36ec77665.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/8f854a43ac624488a4a9457e9a8a67a2.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/c82cd195ae7341e1b6c4e3fc657ffc66.png"/></font></p>
</blockquote>
<h2><a id="43_271"></a>4.3æŸ¥è¯¢æ‰€æœ‰å•†å“ç±»åˆ«åŠå…¶å•†å“ä¿¡æ¯(ä¸€å¯¹å¤š)</h2>
<blockquote>
<p><font size="4"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/e50a1d5d8c2748e892f66cf7306db6c3.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/9b56b8f94e974b9ebddd6c3f87676eaf.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/f51f66e9856d471c84c9fd65f6c191f6.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/db60771e6ab7491f99d03fcb93f26f86.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/fe842430e1234c51a07531ee202c0098.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/701fc0b756cd453f90f7677aeea70f20.png"/><br/> æµ‹è¯•<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/858dd732a6334a2faa97e1e9b316fbde.png"/><br/> æµ‹è¯•ç»“æœ</font></p>
</blockquote>
<pre><code class="prism language-css">2022-08-01 09<span class="token punctuation">:</span>34<span class="token punctuation">:</span>53.982  INFO 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> Starting TypeMapperTest using Java 1.8.0_131 on LAPTOP-59BP4RH1 with PID 30284 <span class="token punctuation">(</span>started by 17614 in <span class="token property">D</span><span class="token punctuation">:</span>\springboot\springboot11_mybatis_xml<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>34<span class="token punctuation">:</span>53.982 DEBUG 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> Running with Spring Boot v2.7.2<span class="token punctuation">,</span> Spring v5.3.22
2022-08-01 09<span class="token punctuation">:</span>34<span class="token punctuation">:</span>53.982  INFO 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> No active profile set<span class="token punctuation">,</span> falling back to 1 default <span class="token property">profile</span><span class="token punctuation">:</span> <span class="token string">"default"</span>
2022-08-01 09<span class="token punctuation">:</span>34<span class="token punctuation">:</span>58.015  INFO 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> Started TypeMapperTest in 4.63 seconds <span class="token punctuation">(</span>JVM running for 7.326<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>34<span class="token punctuation">:</span>58.388  INFO 30284 --- [           main] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Starting...
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.138  INFO 30284 --- [           main] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Start completed.
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.166 DEBUG 30284 --- [           main] c.z.s.m.T.<span class="token property">queryAllTypeAndProduct</span>         <span class="token punctuation">:</span> ==&gt;  <span class="token property">Preparing</span><span class="token punctuation">:</span> select * from type<span class="token punctuation">;</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.249 DEBUG 30284 --- [           main] c.z.s.m.T.<span class="token property">queryAllTypeAndProduct</span>         <span class="token punctuation">:</span> ==&gt; <span class="token property">Parameters</span><span class="token punctuation">:</span> 
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.370 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt;  <span class="token property">Preparing</span><span class="token punctuation">:</span> select * from product where tid=?
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.372 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt; <span class="token property">Parameters</span><span class="token punctuation">:</span> <span class="token function">1</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.396 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> &lt;====      <span class="token property">Total</span><span class="token punctuation">:</span> 3
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.414 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt;  <span class="token property">Preparing</span><span class="token punctuation">:</span> select * from product where tid=?
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.415 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt; <span class="token property">Parameters</span><span class="token punctuation">:</span> <span class="token function">2</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.419 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> &lt;====      <span class="token property">Total</span><span class="token punctuation">:</span> 2
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.420 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt;  <span class="token property">Preparing</span><span class="token punctuation">:</span> select * from product where tid=?
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.421 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> ====&gt; <span class="token property">Parameters</span><span class="token punctuation">:</span> <span class="token function">3</span><span class="token punctuation">(</span>Integer<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.425 DEBUG 30284 --- [           main] c.z.s.mapper.ProductMapper.<span class="token property">queryByTid</span>    <span class="token punctuation">:</span> &lt;====      <span class="token property">Total</span><span class="token punctuation">:</span> 2
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.426 DEBUG 30284 --- [           main] c.z.s.m.T.<span class="token property">queryAllTypeAndProduct</span>         <span class="token punctuation">:</span> &lt;==      <span class="token property">Total</span><span class="token punctuation">:</span> 3
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.430 DEBUG 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Type</span><span class="token punctuation">(</span>id=1<span class="token punctuation">,</span> name=æ‰‹æœº<span class="token punctuation">,</span> products=[<span class="token function">Product</span><span class="token punctuation">(</span>id=1<span class="token punctuation">,</span> name=åä¸ºæ‰‹æœº<span class="token punctuation">,</span> price=5000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Sun Jul 31 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2022<span class="token punctuation">,</span> tid=1<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Product</span><span class="token punctuation">(</span>id=2<span class="token punctuation">,</span> name=è‹¹æœæ‰‹æœº<span class="token punctuation">,</span> price=9000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Sat May 26 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2012<span class="token punctuation">,</span> tid=1<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Product</span><span class="token punctuation">(</span>id=8<span class="token punctuation">,</span> name=å°ç±³æ‰‹æœº<span class="token punctuation">,</span> price=3000.0<span class="token punctuation">,</span> sell=true<span class="token punctuation">,</span> cDate=Sun Jul 31 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2022<span class="token punctuation">,</span> tid=1<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span>]<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.430 DEBUG 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Type</span><span class="token punctuation">(</span>id=2<span class="token punctuation">,</span> name=ç”µè„‘<span class="token punctuation">,</span> products=[<span class="token function">Product</span><span class="token punctuation">(</span>id=3<span class="token punctuation">,</span> name=åä¸ºç”µè„‘<span class="token punctuation">,</span> price=8000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Wed May 26 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2010<span class="token punctuation">,</span> tid=2<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Product</span><span class="token punctuation">(</span>id=4<span class="token punctuation">,</span> name=è‹¹æœç”µè„‘<span class="token punctuation">,</span> price=12000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Sat Mar 10 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2012<span class="token punctuation">,</span> tid=2<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span>]<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.431 DEBUG 30284 --- [           main] c.zyh.springboot.mapper.<span class="token property">TypeMapperTest</span>   <span class="token punctuation">:</span> <span class="token function">Type</span><span class="token punctuation">(</span>id=3<span class="token punctuation">,</span> name=å¹³æ¿<span class="token punctuation">,</span> products=[<span class="token function">Product</span><span class="token punctuation">(</span>id=5<span class="token punctuation">,</span> name=åä¸ºå¹³æ¿<span class="token punctuation">,</span> price=2000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Mon Apr 08 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2019<span class="token punctuation">,</span> tid=3<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Product</span><span class="token punctuation">(</span>id=6<span class="token punctuation">,</span> name=è‹¹æœå¹³æ¿<span class="token punctuation">,</span> price=6000.0<span class="token punctuation">,</span> sell=false<span class="token punctuation">,</span> cDate=Wed Mar 02 00<span class="token punctuation">:</span>00<span class="token punctuation">:</span>00 CST 2016<span class="token punctuation">,</span> tid=3<span class="token punctuation">,</span> type=null<span class="token punctuation">)</span>]<span class="token punctuation">)</span>
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.480  INFO 30284 --- [ionShutdownHook] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Shutdown initiated...
2022-08-01 09<span class="token punctuation">:</span>35<span class="token punctuation">:</span>02.500  INFO 30284 --- [ionShutdownHook] com.zaxxer.hikari.<span class="token property">HikariDataSource</span>       <span class="token punctuation">:</span> defaultDataSource - Shutdown completed.
</code></pre>
<h1><a id="5Druid_317"></a>5.æ•´åˆDruid</h1>
<h2><a id="51_318"></a>5.1ä¼ ç»Ÿè·å–è¿æ¥çš„é—®é¢˜</h2>
<blockquote>
<p><font size="4">è¿æ¥åº•å±‚æ˜¯socketè¿æ¥ï¼Œæ¯”è¾ƒè€—è´¹æ—¶é—´ï¼ŒJavaç¨‹åºåœ¨è¿æ¥æ•°æ®åº“çš„æ—¶å€™ï¼Œå®ƒçš„æœ€å¤§è¿æ¥æ•°ä¹Ÿæ˜¯æœ‰è¦æ±‚çš„ï¼Œå¦‚æœè¿æ¥è¿‡å¤šçš„è¯ï¼Œå¯èƒ½æ•°æ®åº“å°±å´©äº†ã€‚ è€Œä¸”ï¼Œæ•ˆç‡è¿˜ä½ã€‚â€”å¯ä»¥è‡ªå·±å»æµ‹è¯•ä¸€ä¸‹æ—¶é—´<br/> æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº†æ•°æ®åº“è¿æ¥æ± ã€‚<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/49dcb9f06da34d21a48462e8d1c45bf4.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/60c6e9bab7054008ac136439ef699f94.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/31e02da2cb274c42bf9815fab8d764a1.png"/></font></p>
</blockquote>
<h2><a id="52_324"></a>5.2æ•°æ®åº“è¿æ¥æ± </h2>
<blockquote>
<p><font size="4"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/3789fe27ffb74dd5a5b7ea1f9af8d529.png"/><br/> <font size="4">æ¥ä¸‹æ¥æˆ‘å¯¹ä¸Šé¢åšä¸€ä¸‹è§£é‡Š<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/6aaca7e2507a4866a53db6bc75b2e9ca.png"/></font></font></p>
</blockquote>
<h2><a id="53_330"></a>5.3æ•´åˆæ­¥éª¤</h2>
<p><font size="4">druidæ˜¯alibabaçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ˜¯ç›®å‰æ¯”è¾ƒä¸»æµçš„æ•°æ®åº“è¿æ¥æŠ€æœ¯</font></p>
<h3><a id="531pom_333"></a>5.3.1å¼•å…¥pomä¾èµ–</h3>
<pre><code class="prism language-xml">   <span class="token comment">&lt;!-- druid --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3><a id="532druid_344"></a>5.3.2æ·»åŠ druidé…ç½®</h3>
<pre><code class="prism language-css"># æ•°æ®æºåç§°
spring.datasource.name=com.alibaba.druid.pool.DruidDataSource
</code></pre>
<h3><a id="533_351"></a>5.3.3å®Œæ•´é…ç½®</h3>
<pre><code class="prism language-yml"><span class="token comment"># æŒ‡å®šMybatisçš„Mapperæ¥å£çš„xmlæ˜ å°„æ–‡ä»¶çš„è·¯å¾„</span>
mybatis.mapper<span class="token punctuation">-</span>locations=classpath<span class="token punctuation">:</span>mapper/<span class="token important">*.xml</span>
<span class="token comment"># MySQLæ•°æ®åº“é©±åŠ¨</span>
<span class="token comment">#è¿™ä¸ªé©±åŠ¨ä¹Ÿå¯ä»¥çœç•¥ï¼Œå¯ä»¥æ ¹æ®ä½¿ç”¨çš„MySQLè‡ªåŠ¨åŠ è½½ç›¸åº”çš„é©±åŠ¨</span>
spring.datasource.driver<span class="token punctuation">-</span>class<span class="token punctuation">-</span>name=com.mysql.cj.jdbc.Driver
<span class="token comment"># æ•°æ®æºåç§°</span>
spring.datasource.name=com.alibaba.druid.pool.DruidDataSource
<span class="token comment"># æ•°æ®åº“è¿æ¥åœ°å€</span>
spring.datasource.url=jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/bjpowernode<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;zeroDateTimeBehavior=convertToNull</span>
<span class="token comment"># æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç </span>
spring.datasource.username=root
spring.datasource.password=123456
<span class="token comment"># è®¾ç½®æ—¥å¿—çº§åˆ«</span>
logging.level.com.zyh.springboot=debug
<span class="token comment"># å¼€å¯mybatisé©¼å³°å‘½åè§„åˆ™è‡ªåŠ¨è½¬æ¢åŠŸèƒ½</span>
mybatis.configuration.map<span class="token punctuation">-</span>underscore<span class="token punctuation">-</span>to<span class="token punctuation">-</span>camel<span class="token punctuation">-</span>case=true
</code></pre>
<h3><a id="534_371"></a>5.3.4ä»£ç æµ‹è¯•</h3>
<blockquote>
<p><font size="4"><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/714a1f0556bb46c3a66682a22b7c84c0.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/598c1aa07ead4c7dace35e6e1b94bdf6.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/b966cc5c9c894cdfb85cc3b9b0f4362e.png"/></font></p>
</blockquote>
<h1><a id="6_380"></a>6.äº‹åŠ¡ç®¡ç†</h1>
<h2><a id="61_381"></a>6.1äº‹åŠ¡çš„æ¦‚å¿µ</h2>
<ul><li><font size="4">äº‹åŠ¡æˆ‘ä»¬å¯ä»¥ç†è§£æˆæ˜¯åœ¨ä¸€ç³»åˆ—çš„æ“ä½œä¸­ï¼Œ<font color="red">è¿™äº›æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æˆåŠŸã€‚</font></font></li><li><font size="4">æœ€ç»å…¸çš„å°±æ˜¯é“¶è¡Œçš„è½¬å¸é—®é¢˜ï¼Œæ¯”å¦‚è¯´å¼ ä¸‰è¦è½¬è´¦ç»™æå››ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¾—ä¿è¯å¼ ä¸‰è´¦æˆ·çš„è½¬å‡ºå’Œæå››è´¦æˆ·çš„è½¬å…¥æ“ä½œè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼Œå¦‚æœä¸€ä¸ªæˆåŠŸä¸€ä¸ªå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´ <font color="red">è½¬å…¥é‡‘é¢å’Œè½¬å‡ºé‡‘é¢ä¸ä¸€è‡´</font> çš„æƒ…å†µï¼Œä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œéœ€è¦ä½¿ç”¨äº‹åŠ¡æ¥å¤„ç†ã€‚</font></li></ul>
<h2><a id="62ACID_385"></a>6.2äº‹åŠ¡çš„å››å¤§ç‰¹æ€§(ACID)</h2>
<table><thead><tr><th>åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>åŸå­æ€§(Atomicityï¼‰</td><td>äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å•ä½ï¼Œäº‹åŠ¡ä¸­åŒ…å«çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œ</td></tr><tr><td>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</td><td>äº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®çš„å®Œæ•´æ€§å¿…é¡»ä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚ï¼šåœ¨è½¬è´¦æ—¶ï¼Œåªæœ‰ä¿è¯è½¬å‡ºå’Œè½¬å…¥çš„é‡‘é¢ä¸€è‡´æ‰èƒ½æ„æˆäº‹åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡å‘ç”Ÿå‰å’Œå‘ç”Ÿåï¼Œæ•°æ®çš„æ€»é¢ä¾ç„¶åŒ¹é…ã€‚ä¸€è‡´æ€§æ˜¯é€šè¿‡åŸå­æ€§æ¥ä¿è¯çš„</td></tr><tr><td>éš”ç¦»æ€§(Isolation)</td><td>ä¸€ä¸ªäº‹åŠ¡ä¸ä¼šå½±å“å…¶ä»–äº‹åŠ¡çš„è¿è¡Œ,å¤šä¸ªäº‹åŠ¡å¹¶å‘è¦äº’ç›¸éš”ç¦»ã€‚</td></tr><tr><td>æŒä¹…æ€§ (Durability)</td><td>åœ¨äº‹åŠ¡å®Œæˆä»¥åï¼Œè¯¥äº‹åŠ¡å¯¹æ•°æ®åº“æ‰€ä½œçš„æ›´æ”¹å°†æŒä¹…åœ°ä¿å­˜åœ¨æ•°æ®åº“ä¹‹ä¸­ï¼Œå¹¶ä¸ä¼šè¢«å›æ»šã€‚</td></tr></tbody></table>
<h2><a id="63_392"></a>6.3äº‹åŠ¡çš„éš”ç¦»çº§åˆ«</h2>
<blockquote>
<p><font size="4">1. <code>Isolation.DEFAULT</code>: ä»¥è¿æ¥çš„æ•°æ®åº“çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸ºä¸»<br/> 2. <code>Isolation.READ_UNCOMMITTED</code>: è¯»æœªæäº¤, å¯ä»¥è¯»å–åˆ°æœªæäº¤çš„äº‹åŠ¡, å­˜åœ¨è„è¯»<br/> 3.<code> Isolation.READ_COMMITTED</code>: è¯»å·²æäº¤, åªèƒ½è¯»å–åˆ°å·²ç»æäº¤çš„äº‹åŠ¡, è§£å†³äº†è„è¯», ä½†å­˜åœ¨ä¸å¯é‡å¤è¯»<br/> 4 <code>Isolation.REPEATABLE_READ</code>: å¯é‡å¤è¯», è§£å†³äº†ä¸å¯é‡å¤è¯», ä½†å­˜åœ¨å¹»è¯»<br/> 5.<code> Isolation.SERIALIZABLE</code>: ä¸²è¡ŒåŒ–, å¯ä»¥è§£å†³æ‰€æœ‰å¹¶å‘é—®é¢˜, ä½†æ€§èƒ½ä½</font></p>
</blockquote>
<h2><a id="64_399"></a>6.4äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶(å›¾è§£)</h2>
<p><strong>Spring äº‹åŠ¡ä¼ æ’­æœºåˆ¶å®šä¹‰äº†å¤šä¸ªåŒ…å«äº†äº‹åŠ¡çš„æ–¹æ³•, ç›¸äº’è°ƒç”¨æ—¶, äº‹åŠ¡æ˜¯å¦‚ä½•åœ¨è¿™äº›æ–¹æ³•é—´è¿›è¡Œä¼ é€’çš„</strong><br/> <font color="red">Spring äº‹åŠ¡çš„ä¼ æ’­æœºåˆ¶åŒ…å«ä»¥ä¸‹ 7 ç§ :</font></p>
<blockquote>
<p><font size="4">1. <code>Propagation.REQUIRED</code>: é»˜è®¤çš„äº‹åŠ¡ä¼ æ’­çº§åˆ«, å®ƒè¡¨ç¤ºå¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, Båˆ™ä½¿ç”¨è¯¥äº‹åŠ¡; å¦‚æœAå½“å‰æ²¡æœ‰äº‹åŠ¡,åˆ™Båˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡.<br/> 2.<code> Propagation.SUPPORTS</code>: å¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, åˆ™Bä½¿ç”¨è¯¥äº‹åŠ¡; å¦‚æœAå½“å‰æ²¡æœ‰äº‹åŠ¡, åˆ™Bä»¥éäº‹åŠ¡çš„æ–¹å¼ç»§ç»­è¿è¡Œ.<br/> 3.<code> Propagation.MANDATORY</code>: å¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, åˆ™Bä½¿ç”¨è¯¥äº‹åŠ¡; å¦‚æœAå½“å‰æ²¡æœ‰äº‹åŠ¡,åˆ™BæŠ›å‡ºå¼‚å¸¸.<br/> 4.<code> Propagation.REQUIRES_NEW</code>: è¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡, å¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, åˆ™æŠŠAå½“å‰äº‹åŠ¡æŒ‚èµ·ï¼ŒBåˆ›å»ºæ–°äº‹åŠ¡ï¼ŒAå¦‚æœæ²¡æœ‰äº‹åŠ¡ï¼ŒBåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡<br/> 5. <code>Propagation.NOT_SUPPORTED</code>: ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œ, å¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, åˆ™æŠŠAå½“å‰äº‹åŠ¡æŒ‚èµ·.Bä»¥éäº‹åŠ¡æ‰§è¡Œï¼›å¦‚æœAæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™Bä»¥éäº‹åŠ¡æ‰§è¡Œ<br/> 6. <code> Propagation.NEVER</code>: ä»¥éäº‹åŠ¡æ–¹å¼è¿è¡Œ, å¦‚æœAå½“å‰å­˜åœ¨äº‹åŠ¡, åˆ™æŠ›å‡ºå¼‚å¸¸.å¦‚æœAæ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™Bä»¥éäº‹åŠ¡æ‰§è¡Œ<br/> 7. <code>Propagation.NESTED</code>: åµŒå¥—çš„äº‹åŠ¡ï¼Œè‡ªå·±ä¼šåˆ›å»ºä¸€ä¸ªæ–°äº‹åŠ¡ï¼Œä½†æ˜¯è¿™ä¸ªæ–°äº‹åŠ¡å¹¶<code>ä¸æ˜¯è‡ªå·±å•ç‹¬æäº¤çš„</code>ï¼Œè€Œæ˜¯ç­‰å¾…å¤–å±‚äº‹åŠ¡ä¸€èµ·æäº¤ï¼Œæ‰€ä»¥äº‹åŠ¡Båé¢ äº‹åŠ¡ Aä¸­çš„å…¶ä»–ä»£ç å¦‚æœé€ æˆäº†<code>rollback</code>åˆ™ä¹Ÿä¼šå¯¼è‡´äº‹åŠ¡B <code>rollback</code><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/20bf3cde50364e098e5f3a24829cdeaf.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/8437c374d6874f2191e1ad4ae5e3174d.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/49a6733166424646abfb78802e07ce83.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/1d8fb82bd38c40f4bf2b6b45cb75a33f.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/2ad51ecedbb74200a2edc409a41b8c81.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/b7141d1998a947358002cd614e372845.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/46949d186f054a698138657c5bc2f8bc.png"/></font></p>
</blockquote>
<h2><a id="65_428"></a>6.5äº‹åŠ¡çš„å®ç°</h2>
<p><font size="4">Springå¯¹æ•°æ®åº“äº‹åŠ¡çš„æ”¯æŒæœ‰ä¸¤ç§æ–¹å¼</font></p>
<ul><li>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†:æ‰‹åŠ¨å®ç°äº‹åŠ¡ç®¡ç†ï¼Œéœ€è¦é€šè¿‡TransactionManageræ‰‹åŠ¨ç®¡ç†äº‹åŠ¡</li><li>å£°æ˜å¼äº‹åŠ¡ç®¡ç†:åœ¨serviceçš„æ–¹æ³•å®ç°ä¸Šï¼Œç”¨@Transactionæ³¨è§£è¿›è¡Œäº‹åŠ¡ç®¡ç†</li></ul>
<h2><a id="66_433"></a>6.6ä»£ç å®ç°</h2>
<blockquote>
<p><font color="red" size="4"><strong>äº‹åŠ¡æ“ä½œçš„ä»£ç çº§åˆ«åº”è¯¥æ”¾åœ¨serviceå±‚(æ¶‰åŠä¸šåŠ¡é€»è¾‘)</strong><br/> â‘ åˆ›å»ºSpring Booté¡¹ç›®<br/> â‘¡ç¯å¢ƒé…ç½®<br/> â‘¢å‡†å¤‡å¥½æ•°æ®åº“å’Œè¡¨(dept)<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/7ace580fbd5b4e289b8dadf82c6523c3.png"/><br/> â‘£æä¾›å¯¹åº”mapperæ¥å£å’Œç›¸å…³æ“ä½œæ•°æ®åº“æ–¹æ³•ï¼Œä»¥åŠå¯¹åº”çš„å®ä½“ç±»<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/d37b2df69733495d9d9fae93bb047019.png"/><br/> â‘¤å‡†å¤‡serviceå±‚<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/634c445ecc1147dca3be8693dc77343a.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/e1fc1623447f4abaa4a569de1b79a0ea.png"/><br/> â‘¥æµ‹è¯•<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/4de49b7a2c424a0eac7eaa18915140a7.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/fd469085f3374f99a783e21364268e2e.png"/></font></p>
</blockquote>
<blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/0bda1729a7f546039df43641a3c8703e.png"/></p>
</blockquote>
<h1><a id="7Mybatis_450"></a>7.Mybatisç¼“å­˜</h1>
<h2><a id="71_451"></a>7.1ä½¿ç”¨ç¼“å­˜çš„åŸå› </h2>
<p><font size="4">å¯¹äºä¸€äº›æˆ‘ä»¬ç»å¸¸æŸ¥è¯¢ä½†æ˜¯åˆä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ï¼Œå¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½è¦å’Œæ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œä¼šå¤§å¤§é™ä½æ•ˆç‡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç¼“å­˜ï¼ŒæŠŠä¸€äº›å¯¹ç»“æœå½±å“ä¸å¤§ä½†æ˜¯ç»å¸¸æŸ¥è¯¢çš„æ•°æ®å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œä»è€Œå‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¥æé«˜æ•ˆç‡ã€‚</font></p>
<h2><a id="72Mybatis_455"></a>7.2Mybatisçš„ç¼“å­˜åˆ†ç±»</h2>
<ul><li>ä¸€çº§ç¼“å­˜ 
  <ul><li>SqlSessionçº§åˆ«çš„ç¼“å­˜</li><li>åŒä¸€ä¸ªSqlSessionå¯¹è±¡ï¼Œåœ¨å‚æ•°å’ŒSQLå®Œå…¨ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œåªæ‰§è¡Œä¸€æ¬¡SQLè¯­å¥(åŸºæœ¬ä¸ç”¨)</li></ul> </li><li>äºŒçº§ç¼“å­˜ 
  <ul><li>Mapperå‘½åç©ºé—´çº§åˆ«çš„ç¼“å­˜</li><li>äºŒçº§ç¼“å­˜çš„ä½œç”¨åŸŸæ˜¯åŒä¸€ä¸ªnamespaceæ˜ å°„æ–‡ä»¶å†…å®¹ï¼Œå¤šä¸ªSqlSessionå…±äº«</li></ul> </li></ul>
<h2><a id="73_Spring_BootMybatis_465"></a>7.3 Spring Bootå¯¹Mybatisçš„æ”¯æŒ</h2>
<p>Spring Booté»˜è®¤æ”¯æŒäºŒçº§ç¼“å­˜<br/> Mybatisé»˜è®¤æ”¯æŒä¸€çº§ç¼“å­˜</p>
<ul><li><font color="red">Mapperä¸­çš„å®ä½“ç±»éœ€è¦å®ç°åºåˆ—åŒ–</font></li><li>æ³¨è§£å¼å¼€å‘éœ€è¦åœ¨Mapperæ¥å£æ·»åŠ <code>@CacheNamespace</code>,å¼€å¯äºŒçº§ç¼“å­˜</li><li>xmlæ˜ å°„æ–‡ä»¶é€šè¿‡<code>&lt;cache/&gt;</code>,å¼€å¯äºŒçº§ç¼“å­˜</li><li>ä½¿ç”¨äºŒçº§ç¼“å­˜çš„æ—¶å€™ï¼Œsqlè¯­å¥çš„æ˜ å°„è¦ä¹ˆå…¨éƒ¨éƒ½æ˜¯xmlæ ¼å¼è¡¨ç¤ºï¼Œè¦ä¹ˆéƒ½æ˜¯æ³¨è§£è¡¨ç¤ºï¼Œé€‰ä¸­å…¶ä¸­ä¸€ç§æƒ…å†µå°±å¯ä»¥</li><li><font color="red">åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨Rediséå…³ç³»å‹æ•°æ®åº“ä½œä¸ºç¼“å­˜æ•°æ®åº“</font></li></ul>
<h2><a id="74_474"></a>7.4ä»£ç å®ç°</h2>
<p>é¦–å…ˆæ˜¯ç¯å¢ƒæ­å»ºï¼Œç„¶åæ˜¯ä»£ç å®ç°<br/> æä¾›å®ä½“ç±»</p>
<pre><code class="prism language-css"><span class="token atrule"><span class="token rule">@Data</span>
@AllArgsConstructor
@NoArgsConstructor
public class Dept implements Serializable</span> <span class="token punctuation">{<!-- --></span>
    private Integer deptno<span class="token punctuation">;</span>
    private String dname<span class="token punctuation">;</span>
    private String loc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>æä¾›å¯¹åº”çš„æ¥å£</p>
<pre><code class="prism language-css"><span class="token atrule"><span class="token rule">@Mapper</span>
@CacheNamespace
public interface DeptMapper</span> <span class="token punctuation">{<!-- --></span>
    //æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯
    <span class="token atrule"><span class="token rule">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from dept "</span><span class="token punctuation">)</span>
    List&lt;Dept&gt; <span class="token function">queryAllDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="token punctuation">}</span>

</code></pre>
<p>æµ‹è¯•</p>
<pre><code class="prism language-css"><span class="token atrule"><span class="token rule">@SpringBootTest</span>
@Slf4j
class DeptMapperTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token atrule"><span class="token rule">@Autowired</span>
    private DeptMapper deptMapper<span class="token punctuation">;</span></span>
    <span class="token atrule"><span class="token rule">@Test</span>
    public void <span class="token function">testQueryAllDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">{<!-- --></span>
        List&lt;Dept&gt; deptList = deptMapper.<span class="token function">queryAllDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token selector">for (Dept dept:deptList)</span><span class="token punctuation">{<!-- --></span>

            log.<span class="token function">debug</span><span class="token punctuation">(</span>dept.<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        List&lt;Dept&gt; deptList2 = deptMapper.<span class="token function">queryAllDept</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token selector">for (Dept dept:deptList2)</span><span class="token punctuation">{<!-- --></span>
            log.<span class="token function">debug</span><span class="token punctuation">(</span>dept.<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/07fe2aabbd714c21a9908ddd5e857193.png"/></p>
<h2><a id="75_533"></a>7.5ç¼“å­˜çš„åº•å±‚ç»†èŠ‚(åšå®¢æ¨è)</h2>
<p>è¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘æ¨èå¤§å®¶å»çœ‹äº¦å±±å¤§ä½¬çš„åšå®¢ï¼Œè®²è§£å¾ˆæ¸…æ¥š<a href="https://blog.csdn.net/luanlouis/category_9263284.html">æ·±å…¥ç†è§£MyBatisåŸç†</a><br/> å¦‚æœæƒ³è¦æ›´é€å½»çš„ç†è§£çš„è¯ï¼Œå…¶å®å¤§å®¶å¯ä»¥å»çœ‹çœ‹è®¡ç®—æœºç»„æˆåŸç†ã€‚</p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>