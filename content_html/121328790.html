<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h2><a id="_0"></a>一、概述</h2>
<p>Java 8 是一个非常成功的版本，这个版本新增的Stream，配合同版本出现的Lambda ，给我们操作集合（Collection）提供了极大的便利。Stream流是JDK8新增的成员，允许以声明性方式处理数据集合，可以把Stream流看作是遍历数据集合的一个高级迭代器。Stream 是 Java8 中处理集合的关键抽象概念，它可以指定你希望对集合进行的操作，可以执行非常复杂的查找/筛选/过滤、排序、聚合和映射数据等操作。使用Stream API 对集合数据进行操作，就类似于使用 SQL 执行的数据库查询。也可以使用 Stream API 来并行执行操作。简而言之，Stream API 提供了一种高效且易于使用的处理数据的方式。</p>
<h3><a id="1_3"></a>1、使用流的好处</h3>
<p>代码以声明性方式书写，说明想要完成什么，而不是说明如何完成一个操作。<br/> 可以把几个基础操作连接起来，来表达复杂的数据处理的流水线，同时保持代码清晰可读。</p>
<h3><a id="2_7"></a>2、流是什么?</h3>
<p>从支持数据处理操作的源生成元素序列.数据源可以是集合,数组或IO资源。</p>
<p>从操作角度来看,流与集合是不同的. 流不存储数据值; 流的目的是处理数据,它是关于算法与计算的。</p>
<p>如果把集合作为流的数据源,创建流时不会导致数据流动; 如果流的终止操作需要值时,流会从集合中获取值; 流只使用一次。</p>
<p>流中心思想是延迟计算,流直到需要时才计算值。<br/> <img alt="图片" src="https://img-blog.csdnimg.cn/6bd1a334c4f0485193bda6f8e74d12f5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> Stream可以由数组或集合创建，对流的操作分为两种：</p>
<p>中间操作，每次返回一个新的流，可以有多个。</p>
<p>终端操作，每个流只能进行一次终端操作，终端操作结束后流无法再次使用。终端操作会产生一个新的集合或值。</p>
<p><strong>特性：</strong></p>
<p>不是数据结构，不会保存数据。</p>
<p>不会修改原来的数据源，它会将操作后的数据保存到另外一个对象中。（保留意见：毕竟peek方法可以修改流中元素）</p>
<p>惰性求值，流在中间处理过程中，只是对操作进行了记录，并不会立即执行，需要等到执行终止操作的时候才会进行实际的计算。</p>
<h2><a id="_30"></a>二、分类</h2>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/31ef5c6ebd744b7f91cc012d572f9c81.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>无状态：指元素的处理不受之前元素的影响；</p>
<p>有状态：指该操作只有拿到所有元素之后才能继续下去。</p>
<p>非短路操作：指必须处理所有元素才能得到最终结果；</p>
<p>短路操作：指遇到某些符合条件的元素就可以得到最终结果，如 A || B，只要A为true，则无需判断B的结果。</p>
<h2><a id="Stream_41"></a>三、Stream的创建</h2>
<p>Stream可以通过集合数组创建。</p>
<p>1、通过 java.util.Collection.stream() 方法用集合创建流</p>
<pre><code class="prism language-bash">List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token string">"a"</span>, <span class="token string">"b"</span>, <span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
// 创建一个顺序流
Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
// 创建一个并行流
Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> parallelStream <span class="token operator">=</span> list.parallelStream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>2、使用 java.util.Arrays.stream(T[]array)方法用数组创建流</p>
<pre><code class="prism language-bash">int<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token assign-left variable">array</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1,3</span>,5,6,8<span class="token punctuation">}</span><span class="token punctuation">;</span>
IntStream stream <span class="token operator">=</span> Arrays.stream<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>3、使用 Stream的静态方法：of()、iterate()、generate()</p>
<pre><code class="prism language-bash">Stream<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> stream <span class="token operator">=</span> Stream.of<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span>, <span class="token number">5</span>, <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
Stream<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> stream2 <span class="token operator">=</span> Stream.iterate<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token punctuation">(</span>x<span class="token punctuation">)</span> -<span class="token operator">&gt;</span> x + <span class="token number">3</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream2.forEach<span class="token punctuation">(</span>System.out::println<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
Stream<span class="token operator">&lt;</span>Double<span class="token operator">&gt;</span> stream3 <span class="token operator">=</span> Stream.generate<span class="token punctuation">(</span>Math::random<span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
stream3.forEach<span class="token punctuation">(</span>System.out::println<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>输出结果：</p>
<pre><code class="prism language-bash"><span class="token number">0</span> <span class="token number">3</span> <span class="token number">6</span> <span class="token number">9</span>
<span class="token number">0.6796156909271994</span>
<span class="token number">0.1914314208854283</span>
<span class="token number">0.8116932592396652</span>
</code></pre>
<p>stream和 parallelStream的简单区分：stream是顺序流，由主线程按顺序对流执行操作，而 parallelStream是并行流，内部以多线程并行执行的方式对流进行操作，但前提是流中的数据处理没有顺序要求。例如筛选集合中的奇数，两者的处理不同之处：<br/> <img alt="图片" src="https://img-blog.csdnimg.cn/6a22423322ab46cea3275820115a1ae2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 如果流中的数据量足够大，并行流可以加快处速度。</p>
<p>除了直接创建并行流，还可以通过 parallel()把顺序流转换成并行流：</p>
<pre><code class="prism language-bash">Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> findFirst <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.parallel<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x-<span class="token operator">&gt;</span>x<span class="token operator">&gt;</span><span class="token number">6</span><span class="token punctuation">)</span>.findFirst<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a id="Stream_API_86"></a>四、Stream API简介</h2>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a811bb8ece4a4ed89c8b7838573aed3f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="图片" src="https://img-blog.csdnimg.cn/e339f004f4fd4cd5ad3bccafe14989cf.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-handlebars"><span class="token variable">先贴上几个案例，水平高超的同学可以挑战一下：</span>

<span class="token variable">从员工集合中筛选出salary大于</span><span class="token number">8000</span><span class="token variable">的员工，并放置到新的集合里。</span>

<span class="token variable">统计员工的最高薪资、平均薪资、薪资之和。</span>

<span class="token variable">将员工按薪资从高到低排序，同样薪资者年龄小者在前。</span>

<span class="token variable">将员工按性别分类，将员工按性别和地区分类，将员工按薪资是否高于</span><span class="token number">8000</span><span class="token variable">分为两部分。</span>

<span class="token variable">用传统的迭代处理也不是很难，但代码就显得冗余了，跟Stream相比高下立判。</span>
</code></pre>
<p>前提：员工类</p>
<pre><code class="prism language-bash">static List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> personList <span class="token operator">=</span> new ArrayList<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
private static void <span class="token function-name function">initPerson</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"张三"</span>, <span class="token number">8</span>, <span class="token number">3000</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"李四"</span>, <span class="token number">18</span>, <span class="token number">5000</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"王五"</span>, <span class="token number">28</span>, <span class="token number">7000</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"孙六"</span>, <span class="token number">38</span>, <span class="token number">9000</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="1foreachfindmatch_116"></a>1、遍历/匹配（foreach/find/match）</h3>
<p>Stream也是支持类似集合的遍历和匹配元素的，只是 Stream中的元素是以 Optional类型存在的。Stream的遍历、匹配非常简单。</p>
<pre><code class="prism language-bash">// import已省略，请自行添加，后面代码亦是
 
public class StreamTest <span class="token punctuation">{<!-- --></span>
  public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token number">7</span>, <span class="token number">6</span>, <span class="token number">9</span>, <span class="token number">3</span>, <span class="token number">8</span>, <span class="token number">2</span>, <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        // 遍历输出符合条件的元素
        list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>.forEach<span class="token punctuation">(</span>System.out::println<span class="token punctuation">)</span><span class="token punctuation">;</span>
        // 匹配第一个
        Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> findFirst <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>.findFirst<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        // 匹配任意（适用于并行流）
        Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> findAny <span class="token operator">=</span> list.parallelStream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">6</span><span class="token punctuation">)</span>.findAny<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        // 是否包含符合特定条件的元素
        boolean anyMatch <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.anyMatch<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"匹配第一个值："</span> + findFirst.get<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"匹配任意一个值："</span> + findAny.get<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"是否存在大于6的值："</span> + anyMatch<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="2filter_141"></a>2、按条件匹配filter</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4b0850cc6d21423eac526af94fbead7a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_18,color_FFFFFF,t_70,g_se,x_16"/></p>
<p><strong>（1）筛选员工中已满18周岁的人，并形成新的集合</strong></p>
<pre><code class="prism language-bash">/**
 * 筛选员工中已满18周岁的人，并形成新的集合
 * @思路
 * List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> list <span class="token operator">=</span> new ArrayList<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 * for<span class="token punctuation">(</span>Person person <span class="token builtin class-name">:</span> personList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 *     if<span class="token punctuation">(</span>person.getAge<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 *          list.add<span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
 *     <span class="token punctuation">}</span>
 * <span class="token punctuation">}</span>
 */
private static void <span class="token function-name function">filter01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    initPerson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> collect <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x.getAge<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token number">18</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b6a7d1a4250140fb99ca821ad04d96fa.png"/><br/> <strong>（2）自定义条件匹配</strong><br/> <img alt="图片" src="https://img-blog.csdnimg.cn/52a4143f676c4566b943ee216c816057.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="3maxmincount_166"></a>3、聚合max、min、count</h3>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/5971646528c84d1e9feec3809a3a7223.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_17,color_FFFFFF,t_70,g_se,x_16"/></p>
<p><strong>（1）获取String集合中最长的元素</strong></p>
<pre><code class="prism language-bash">/**
 * 获取String集合中最长的元素
 * @思路
 * List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token string">"zhangsan"</span>, <span class="token string">"lisi"</span>, <span class="token string">"wangwu"</span>, <span class="token string">"sunliu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 * String max <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
 * int length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 * int tempLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 * for<span class="token punctuation">(</span>String str <span class="token builtin class-name">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 *     tempLength <span class="token operator">=</span> str.length<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 *     if<span class="token punctuation">(</span>tempLength <span class="token operator">&gt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 *         length  <span class="token operator">=</span> str.length<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 *         max <span class="token operator">=</span> str<span class="token punctuation">;</span>
 *      <span class="token punctuation">}</span>
 * <span class="token punctuation">}</span>
 * @return zhangsan
 */
private static void <span class="token function-name function">test02</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token string">"zhangsan"</span>, <span class="token string">"lisi"</span>, <span class="token string">"wangwu"</span>, <span class="token string">"sunliu"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Comparator<span class="token operator">&lt;</span>? super String<span class="token operator">&gt;</span> comparator <span class="token operator">=</span> Comparator.comparing<span class="token punctuation">(</span>String::length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Optional<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> max <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.max<span class="token punctuation">(</span>comparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/22899b917a33442b982f4abcc024353c.png"/><br/> <strong>（2）获取Integer集合中的最大值</strong></p>
<pre><code class="prism language-bash">//获取Integer集合中的最大值
private static void <span class="token function-name function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">17</span>, <span class="token number">27</span>, <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> max <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.max<span class="token punctuation">(</span>Integer::compareTo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    // 自定义排序
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> max2 <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.max<span class="token punctuation">(</span>new Comparator<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        @Override
        public int compare<span class="token punctuation">(</span>Integer o1, Integer o2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token builtin class-name">return</span> o1.compareTo<span class="token punctuation">(</span>o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>max2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/43dcfaa667ff4c029b8d42f69c7c5ca9.png"/></p>
<pre><code class="prism language-bash">//获取员工中年龄最大的人
private static void <span class="token function-name function">test06</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    initPerson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Comparator<span class="token operator">&lt;</span>? super Person<span class="token operator">&gt;</span> comparator <span class="token operator">=</span> Comparator.comparingInt<span class="token punctuation">(</span>Person::getAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Optional<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> max <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.max<span class="token punctuation">(</span>comparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>（3）获取员工中年龄最大的人</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b92e7d8d6d21458585dd53a3bae39a2d.png"/><br/> （<strong>4）计算integer集合中大于10的元素的个数</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d1a51312e4cf46f49d20e8349575336a.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="4mapflatMap_228"></a>4、map与flatMap</h3>
<p>map：接收一个函数作为参数，该函数会被应用到每个元素上，并将其映射成一个新的元素。</p>
<p>flatMap：接收一个函数作为参数，将流中的每个值都换成另一个流，然后把所有流连接成一个流。</p>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/8e7d2ff4d489413da47f88ebe9d06be6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_17,color_FFFFFF,t_70,g_se,x_16"/></p>
<p><strong>（1）字符串大写</strong><br/> <img alt="图片" src="https://img-blog.csdnimg.cn/11f3a4b435684a34b5587c9a6fbcfd5e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <strong>（2）整数数组每个元素+3</strong></p>
<pre><code class="prism language-bash">/**
 * 整数数组每个元素+3
 * @思路
 * List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">17</span>, <span class="token number">27</span>, <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list2 <span class="token operator">=</span> new ArrayList<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   for<span class="token punctuation">(</span>Integer num <span class="token builtin class-name">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      list2.add<span class="token punctuation">(</span>num + <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   @return <span class="token punctuation">[</span><span class="token number">4</span>, <span class="token number">20</span>, <span class="token number">30</span>, <span class="token number">10</span><span class="token punctuation">]</span>
 */
private static void <span class="token function-name function">test09</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">17</span>, <span class="token number">27</span>, <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> collect <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x + <span class="token number">3</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>（3）公司效益好，每人涨2000</strong></p>
<pre><code class="prism language-bash">/**
 * 公司效益好，每人涨2000
 *
 */
private static void <span class="token function-name function">test10</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    initPerson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span> collect <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        x.setAge<span class="token punctuation">(</span>x.getSalary<span class="token punctuation">(</span><span class="token punctuation">)</span>+2000<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>（4）将两个字符数组合并成一个新的字符数组</strong></p>
<pre><code class="prism language-bash">/**
 * 将两个字符数组合并成一个新的字符数组
 *
 */
private static void <span class="token function-name function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"z, h, a, n, g"</span>, <span class="token string">"s, a, n"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> collect <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.flatMap<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> x.split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream <span class="token operator">=</span> Arrays.stream<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> stream<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>（5）将两个字符数组合并成一个新的字符数组</strong></p>
<pre><code class="prism language-bash">/**
 * 将两个字符数组合并成一个新的字符数组
 * @return <span class="token punctuation">[</span>z,  h,  a,  n,  g, s,  a,  n<span class="token punctuation">]</span>
 */
private static void <span class="token function-name function">test11</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"z, h, a, n, g"</span>, <span class="token string">"s, a, n"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> collect <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.flatMap<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
        String<span class="token punctuation">[</span><span class="token punctuation">]</span> array <span class="token operator">=</span> x.split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream <span class="token operator">=</span> Arrays.stream<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin class-name">return</span> stream<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="5reduce_314"></a>5、规约reduce</h3>
<p>归约，也称缩减，顾名思义，是把一个流缩减成一个值，能实现对集合求和、求乘积和求最值操作。<br/> <img alt="图片" src="https://img-blog.csdnimg.cn/9d68cbf1c813452baa2dc982a488565b.png"/><br/> <strong>（1）求Integer集合的元素之和、乘积和最大值</strong></p>
<pre><code class="prism language-bash">/**
 * 求Integer集合的元素之和、乘积和最大值
 *
 */
private static void <span class="token function-name function">test13</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> list <span class="token operator">=</span> Arrays.asList<span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">2</span>, <span class="token number">3</span>, <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    //求和
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> reduce <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.reduce<span class="token punctuation">((</span>x,y<span class="token punctuation">)</span> -<span class="token operator">&gt;</span> x+ y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求和:"</span>+reduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    //求积
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> reduce2 <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.reduce<span class="token punctuation">((</span>x,y<span class="token punctuation">)</span> -<span class="token operator">&gt;</span> x * y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求积:"</span>+reduce2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    //求最大值
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> reduce3 <span class="token operator">=</span> list.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.reduce<span class="token punctuation">((</span>x,y<span class="token punctuation">)</span> -<span class="token operator">&gt;</span> x<span class="token operator">&gt;</span>y?x:y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求最大值:"</span>+reduce3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>（2）求所有员工的工资之和和最高工资</strong></p>
<pre><code class="prism language-bash">/*
 * 求所有员工的工资之和和最高工资
 */
private static void <span class="token function-name function">test14</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    initPerson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> reduce <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>Person :: getSalary<span class="token punctuation">)</span>.reduce<span class="token punctuation">(</span>Integer::sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> reduce2 <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>Person :: getSalary<span class="token punctuation">)</span>.reduce<span class="token punctuation">(</span>Integer::max<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"工资之和:"</span>+reduce<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"最高工资:"</span>+reduce2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="6toListtoSettoMap_352"></a>6、收集（toList、toSet、toMap）</h3>
<p>取出大于18岁的员工转为map</p>
<pre><code class="prism language-bash">/**
 * 取出大于18岁的员工转为map
 *
 */
private static void <span class="token function-name function">test15</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    initPerson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Map<span class="token operator">&lt;</span>String, Person<span class="token operator">&gt;</span> collect <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x.getAge<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">18</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toMap<span class="token punctuation">(</span>Person::getName, y -<span class="token operator">&gt;</span> y<span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="7collect_365"></a>7、collect</h3>
<p>Collectors提供了一系列用于数据统计的静态方法：</p>
<p>计数： count</p>
<p>平均值： averagingInt、 averagingLong、 averagingDouble</p>
<p>最值： maxBy、 minBy</p>
<p>求和： summingInt、 summingLong、 summingDouble</p>
<p>统计以上所有： summarizingInt、 summarizingLong、 summarizingDouble</p>
<pre><code class="prism language-bash">/**
 * 统计员工人数、平均工资、工资总额、最高工资
 */
private static void <span class="token function-name function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    //统计员工人数
    Long count <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.counting<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    //求平均工资
    Double average <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.averagingDouble<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">))</span><span class="token punctuation">;</span>
    //求最高工资
    Optional<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> max <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.maxBy<span class="token punctuation">(</span>Integer::compare<span class="token punctuation">))</span><span class="token punctuation">;</span>
    //求工资之和
    Integer <span class="token function">sum</span> <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.summingInt<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">))</span><span class="token punctuation">;</span>
    //一次性统计所有信息
    DoubleSummaryStatistics collect <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.summarizingDouble<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">))</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"统计员工人数:"</span>+count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求平均工资:"</span>+average<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求最高工资:"</span>+max<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"求工资之和:"</span>+sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"一次性统计所有信息:"</span>+collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="8partitioningBygroupingBy_402"></a>8、分组(partitioningBy/groupingBy)</h3>
<p>分区：将stream按条件分为两个 Map，比如员工按薪资是否高于8000分为两部分。</p>
<p>分组：将集合分为多个Map，比如员工按性别分组。有单级分组和多级分组。<br/> <img alt="图片" src="https://img-blog.csdnimg.cn/65265ca97bd64858ae6ad8ff70b2258b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>将员工按薪资是否高于8000分为两部分；将员工按性别和地区分组</p>
<pre><code class="prism language-bash">public class StreamTest <span class="token punctuation">{<!-- --></span>
  public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"zhangsan"</span>,25, <span class="token number">3000</span>, <span class="token string">"male"</span>, <span class="token string">"tieling"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"lisi"</span>,27, <span class="token number">5000</span>, <span class="token string">"male"</span>, <span class="token string">"tieling"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"wangwu"</span>,29, <span class="token number">7000</span>, <span class="token string">"female"</span>, <span class="token string">"tieling"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"sunliu"</span>,26, <span class="token number">3000</span>, <span class="token string">"female"</span>, <span class="token string">"dalian"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"yinqi"</span>,27, <span class="token number">5000</span>, <span class="token string">"male"</span>, <span class="token string">"dalian"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        personList.add<span class="token punctuation">(</span>new Person<span class="token punctuation">(</span><span class="token string">"guba"</span>,21, <span class="token number">7000</span>, <span class="token string">"female"</span>, <span class="token string">"dalian"</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
 
    // 将员工按薪资是否高于8000分组
        Map<span class="token operator">&lt;</span>Boolean, List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;&gt;</span> part <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.partitioningBy<span class="token punctuation">(</span>x -<span class="token operator">&gt;</span> x.getSalary<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">8000</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
        // 将员工按性别分组
        Map<span class="token operator">&lt;</span>String, List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;&gt;</span> group <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.groupingBy<span class="token punctuation">(</span>Person::getSex<span class="token punctuation">))</span><span class="token punctuation">;</span>
        // 将员工先按性别分组，再按地区分组
        Map<span class="token operator">&lt;</span>String, Map<span class="token operator">&lt;</span>String, List<span class="token operator">&lt;</span>Person<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> group2 <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.groupingBy<span class="token punctuation">(</span>Person::getSex, Collectors.groupingBy<span class="token punctuation">(</span>Person::getArea<span class="token punctuation">))</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"员工按薪资是否大于8000分组情况："</span> + part<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"员工按性别分组情况："</span> + group<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span><span class="token string">"员工按性别、地区："</span> + group2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="9joining_433"></a>9、连接joining</h3>
<p>joining可以将stream中的元素用特定的连接符（没有的话，则直接连接）连接成一个字符串。<br/> <img alt="图片" src="https://img-blog.csdnimg.cn/365adc7beda14036b995bf5e9f2326ec.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="10sorted_436"></a>10、排序sorted</h3>
<p>将员工按工资由高到低（工资一样则按年龄由大到小）排序</p>
<pre><code class="prism language-bash">private static void <span class="token function-name function">test04</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    // 按工资升序排序（自然排序）
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> newList <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.sorted<span class="token punctuation">(</span>Comparator.comparing<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">))</span>.map<span class="token punctuation">(</span>Person::getName<span class="token punctuation">)</span>
            .collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // 按工资倒序排序
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> newList2 <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.sorted<span class="token punctuation">(</span>Comparator.comparing<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">)</span>.reversed<span class="token punctuation">(</span><span class="token punctuation">))</span>
            .map<span class="token punctuation">(</span>Person::getName<span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // 先按工资再按年龄升序排序
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> newList3 <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>
            .sorted<span class="token punctuation">(</span>Comparator.comparing<span class="token punctuation">(</span>Person::getSalary<span class="token punctuation">)</span>.thenComparing<span class="token punctuation">(</span>Person::getAge<span class="token punctuation">))</span>.map<span class="token punctuation">(</span>Person::getName<span class="token punctuation">)</span>
            .collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // 先按工资再按年龄自定义排序（降序）
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> newList4 <span class="token operator">=</span> personList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.sorted<span class="token variable"><span class="token punctuation">((</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> {
        if <span class="token punctuation">(</span>p1.getSalary<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> p2.getSalary<span class="token punctuation">(</span><span class="token punctuation">))</span></span> <span class="token punctuation">{<!-- --></span>
            <span class="token builtin class-name">return</span> p2.getAge<span class="token punctuation">(</span><span class="token punctuation">)</span> - p1.getAge<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token builtin class-name">return</span> p2.getSalary<span class="token punctuation">(</span><span class="token punctuation">)</span> - p1.getSalary<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>.map<span class="token punctuation">(</span>Person::getName<span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
 
    System.out.println<span class="token punctuation">(</span><span class="token string">"按工资升序排序："</span> + newList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"按工资降序排序："</span> + newList2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"先按工资再按年龄升序排序："</span> + newList3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"先按工资再按年龄自定义降序排序："</span> + newList4<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="11_466"></a>11、提取/组合</h3>
<p>流也可以进行合并、去重、限制、跳过等操作。</p>
<pre><code class="prism language-bash">private static void <span class="token function-name function">test05</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"a"</span>, <span class="token string">"b"</span>, <span class="token string">"c"</span>, <span class="token string">"d"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> arr2 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"d"</span>, <span class="token string">"e"</span>, <span class="token string">"f"</span>, <span class="token string">"g"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream1 <span class="token operator">=</span> Stream.of<span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Stream<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> stream2 <span class="token operator">=</span> Stream.of<span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    // concat:合并两个流 distinct：去重
    List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> newList <span class="token operator">=</span> Stream.concat<span class="token punctuation">(</span>stream1, stream2<span class="token punctuation">)</span>.distinct<span class="token punctuation">(</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // limit：限制从流中获得前n个数据
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> collect <span class="token operator">=</span> Stream.iterate<span class="token punctuation">(</span><span class="token number">1</span>, x -<span class="token operator">&gt;</span> x + <span class="token number">2</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    // skip：跳过前n个数据
    List<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span> collect2 <span class="token operator">=</span> Stream.iterate<span class="token punctuation">(</span><span class="token number">1</span>, x -<span class="token operator">&gt;</span> x + <span class="token number">2</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
 
    System.out.println<span class="token punctuation">(</span><span class="token string">"流合并："</span> + newList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"limit："</span> + collect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"skip："</span> + collect2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="12_487"></a>12、读取文件的流操作</h3>
<p><img alt="图片" src="https://img-blog.csdnimg.cn/68b5c8d8bef9481cbf0fe55804c77bdd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YC-5oOF5YaZ5qKm,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="13list_490"></a>13、计算两个list中的差集</h3>
<pre><code class="prism language-bash">//计算两个list中的差集
List<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span> reduce1 <span class="token operator">=</span> allList.stream<span class="token punctuation">(</span><span class="token punctuation">)</span>.filter<span class="token punctuation">(</span>item -<span class="token operator">&gt;</span> <span class="token operator">!</span>wList.contains<span class="token punctuation">(</span>item<span class="token punctuation">))</span>.collect<span class="token punctuation">(</span>Collectors.toList<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>