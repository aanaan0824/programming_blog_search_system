<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1e121fa370f742bca98f6b3179d30d13.gif#pic_center"/></p>
<blockquote>
<p><strong><font color="#FF7F50"> 欢迎来到我的博客</font></strong><br/> <strong>📔博主是一名大学在读本科生，主要学习方向是前端。<br/> 🍭目前已经更新了<font color="#FF7F50">【Vue】、【React–从基础到实战】、【TypeScript】等等系列专栏</font><br/> 🛠目前正在学习的是🔥<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          e
         
         
          a
         
         
          c
         
         
          t
         
         
          框架
         
        
        
         React框架
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">框架</span></span></span></span></span>🔥，中间穿插了一些基础知识的回顾<br/> 🌈博客主页👉<a href="https://blog.csdn.net/Svik_zy?type=blog">codeMak1r.小新的博客</a></strong></p>
<p></p>
<div class="toc">
<h3>😇本文目录😇</h3>
<ul><li><a href="#Mobx_16">Mobx介绍</a></li><li><ul><li><a href="#1Mobx_18">1.什么是Mobx</a></li><li><a href="#2Mobx_28">2.Mobx有什么优势</a></li><li><a href="#3_49">3.社区评价</a></li></ul>
</li><li><a href="#_52">配置开发环境</a></li><li><a href="#_76">浏览器支持</a></li><li><a href="#_84">基础使用</a></li><li><ul><li><a href="#1_mobx_89">1. 初始化mobx</a></li><li><a href="#2_Reactstore_120">2. React使用store</a></li></ul>
</li><li><a href="#Mobx__computed_148">Mobx - computed</a></li><li><a href="#Mobx___213">Mobx - 模块化</a></li><li><a href="#Mobx___322">Mobx - 总结</a></li></ul>
</div>
<p></p>
<p><strong><font color="#FF7F50">本文被专栏<a href="https://blog.csdn.net/svik_zy/category_11671445.html?spm=1001.2014.3001.5482">【React–从基础到实战】</a>收录</font></strong></p>
</blockquote>
<blockquote>
<p><strong><font color="#FF7F50">🕹坚持创作✏️，一起学习📖，码出未来👨🏻‍💻！</font></strong></p>
</blockquote>
<h1><a id="Mobx_16"></a>Mobx介绍</h1>
<h2><a id="1Mobx_18"></a>1.什么是Mobx</h2>
<blockquote>
<p>一个可以和React良好配合的集中状态管理工具，和Redux解决的问题相似，都可以独立组件进行集中状态管理</p>
<p>mobx与react的关系，相当于vuex与vue的关系。</p>
<p>同类工具还有：<code>redux</code>、<code>dva</code>、<code>recoil</code></p>
</blockquote>
<p><img alt="在这里插入图片描述" height="50%" src="https://img-blog.csdnimg.cn/6c01493c226e4e3c95ff15753e96389e.png#pic_center" width="50%"/></p>
<h2><a id="2Mobx_28"></a>2.Mobx有什么优势</h2>
<ol><li>简单</li></ol>
<blockquote>
<p>编写无模板的极简代码精准描述你的意图 (原生js)</p>
</blockquote>
<ol start="2"><li>轻松实现最优渲染</li></ol>
<blockquote>
<p>依赖自动追踪，实现最小渲染优化。</p>
<p>其实在原生的react上，react的性能并不是强项（vue的渲染速度确实折服了一票粉丝），但是mobx可以帮助react实现依赖的自动追踪，实现优化react组件的性能。</p>
</blockquote>
<ol start="3"><li>架构自由</li></ol>
<blockquote>
<p>可移植, 可测试 无特殊心智负担</p>
</blockquote>
<blockquote>
<p>React 和 MobX 是一对强力组合。React 通过提供机制把应用状态转换为可渲染组件树并对其进行渲染。而MobX提供机制来存储和更新应用状态供 React 使用。</p>
<p>对于应用开发中的常见问题，React 和 MobX 都提供了最优和独特的解决方案。React 提供了优化UI渲染的机制， 这种机制就是通过使用虚拟DOM来减少昂贵的DOM变化的数量。MobX 提供了优化应用状态与 React 组件同步的机制，这种机制就是使用响应式虚拟依赖状态图表，它只有在真正需要的时候才更新并且永远保持是最新的。</p>
</blockquote>
<h2><a id="3_49"></a>3.社区评价</h2>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/748b112065f6454cb9b82a48468a965d.png#pic_center"/></p>
<h1><a id="_52"></a>配置开发环境</h1>
<blockquote>
<p>Mobx是一个独立的响应式的库，可以独立于任何UI框架存在，但是通常大家习惯把它和React进行绑定使用，<em>用Mobx来做响应式数据建模，React作为UI视图框架渲染内容</em>，我们环境的配置需要三个部分</p>
<ol><li>一个create-react-app创建好的React项目环境</li><li>mobx框架本身</li><li>一个用来链接mobx和React的中间件</li></ol>
</blockquote>
<pre><code class="prism language-shell"><span class="token comment"># 创建项目</span>
$ <span class="token function">npm</span> create-react-app react_mobx_app

<span class="token comment"># 安装mobx</span>
<span class="token function">npm</span> <span class="token function">install</span> mobx --save

<span class="token comment"># 中间件工具 mobx-react-lite</span>
$ <span class="token function">npm</span> <span class="token function">install</span> mobx-react-lite

<span class="token comment"># 官网推荐：mobx与react绑定库</span>
$ <span class="token function">npm</span> <span class="token function">install</span> mobx-react --save
</code></pre>
<h1><a id="_76"></a>浏览器支持</h1>
<ul><li>MobX &gt;=5 版本运行在任何支持 ES6 proxy 的浏览器。如果运行在像 IE11、Node.js 6 以下版本或依靠与较旧的 JavaScripCore 的安卓端的 React Native。</li><li>MobX 4 可以运行在任何支持 ES5 的浏览器上，而且也将进行持续地维护。MobX 4 和 5 的 API 是相同的，并且语义上也能达到相同的效果，只是 MobX 4 存在一些 <a href="https://cn.mobx.js.org/#mobx-4-vs-mobx-5">局限性</a>。</li></ul>
<p><em>小贴士: MobX 5 包的主入口点附带 ES5 代码，以便向后兼容所有构建工具。但因为 MobX 5 只能运行在现代浏览器上，所以可以考虑使用速度最快、体积最小的 ES6 构建: <code>lib/mobx.es6.js</code> 。例如，通过设置 webpack 的别名: <code>resolve: { alias: { mobx: __dirname + "/node_modules/mobx/lib/mobx.es6.js" }}</code></em></p>
<h1><a id="_84"></a>基础使用</h1>
<blockquote>
<p>需求: 使用mobx实现一个计数器的案例</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c3f3727a4df5431f924c084541a67fda.png#pic_center"/></p>
<h2><a id="1_mobx_89"></a>1. 初始化mobx</h2>
<blockquote>
<p>初始化步骤</p>
<ol><li>定义数据状态（state）</li><li>在构造器中实现数据响应式处理</li><li>定义action函数</li><li>实例化store并导出</li></ol>
</blockquote>
<pre><code class="prism language-js"><span class="token comment">// 编写第一个mobx store小案例</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> makeAutoObservable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span>

<span class="token keyword">class</span> <span class="token class-name">CounterStore</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 1.定义数据</span>
  count <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 2.把数据弄成响应式</span>
    <span class="token function">makeAutoObservable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 3.定义action函数，用来修改数据</span>
  <span class="token function-variable function">addCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4.实例化导出给react使用</span>
<span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CounterStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> counterStore <span class="token punctuation">}</span>
</code></pre>
<h2><a id="2_Reactstore_120"></a>2. React使用store</h2>
<blockquote>
<p>实现步骤</p>
<ol><li>在组件中导入counterStore实例对象</li><li>在组件中使用storeStore实例对象中的数据</li><li>通过事件调用修改数据的方法修改store中的数据</li><li>让组件响应数据变化</li></ol>
</blockquote>
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> counterStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/counter'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-react-lite'</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 1.把store中的count渲染出来 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span>counterStore<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 2.通过点击事件触发action函数，修改count值 */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>counterStore<span class="token punctuation">.</span>addCount<span class="token punctuation">}</span><span class="token operator">&gt;</span>点我<span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 包裹组件让视图响应数据变化</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span>
</code></pre>
<h1><a id="Mobx__computed_148"></a>Mobx - computed</h1>
<p>计算属性（衍生状态）</p>
<blockquote>
<p>概念: 有一些状态根据现有的状态计算（衍生）得到，我们把这种状态叫做计算属性, 看下面的例子</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1d15249158d7438da5b2686c2425f4d3.png#pic_center"/><br/> 实现步骤</p>
<ol><li> <p>声明一个存在的数据</p> </li><li> <p>通过get关键词 定义计算属性</p> </li><li> <p>在 makeAutoObservable 方法中标记计算属性</p>
<blockquote>
<p>不标记不影响计算属性的使用，这里的标记只是为了让代码更直观，程序员一看到这行代码就知道filterList是通过计算属性得来的。</p>
</blockquote> </li><li> <p>修改声明的数据，计算属性的数据也会一起改变</p> </li><li> <p><strong>Mobx提供的计算属性与<code>vue</code>中的<code>computed</code>差别不大</strong></p> </li></ol>
<pre><code class="prism language-js"><span class="token comment">// counterStore.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> makeAutoObservable<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span>

<span class="token keyword">class</span> <span class="token class-name">CounterStore</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 1.声明一个list数组</span>
  list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">makeAutoObservable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 3.标记计算属性</span>
      <span class="token comment">// 不标记不影响计算属性的使用，这里的标记只是为了让代码更直观，程序员一看到这行代码就知道filterList是通过计算属性得来的</span>
      <span class="token literal-property property">filterList</span><span class="token operator">:</span> computed
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 2.定义计算属性</span>
  <span class="token keyword">get</span> <span class="token function">filterList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">changeList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> counterStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CounterStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> counterStore <span class="token punctuation">}</span>
</code></pre>
<pre><code class="prism language-js"><span class="token comment">// Count.jsx</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> counterStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../store/counter'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-react-lite'</span>

<span class="token keyword">function</span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{<!-- --></span><span class="token comment">/* 使用计算属性 */</span><span class="token punctuation">}</span>
      <span class="token punctuation">{<!-- --></span>counterStore<span class="token punctuation">.</span>filterList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>counterStore<span class="token punctuation">.</span>changeList<span class="token punctuation">}</span><span class="token operator">&gt;</span>修改List<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 包裹组件让视图响应数据变化</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span>
</code></pre>
<h1><a id="Mobx___213"></a>Mobx - 模块化</h1>
<blockquote>
<p>场景: 一个项目有很多的业务模块，我们不能把所有的代码都写到一起，这样不好维护，为了提供可维护性，需要引入模块化机制</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6cc69c207c12404e9ef4a7af133686da.png#pic_center"/></p>
<p><strong>实现步骤</strong></p>
<ol><li>拆分模块js文件，每个模块中定义自己独立的state/actions</li><li>在store/index.js中导入拆分之后的模块，进行模块组合</li><li>利用React的useContext的机制导出统一的useStore方法，给业务组件使用</li></ol>
<p><strong>代码实现</strong></p>
<blockquote>
<p>项目结构</p>
<pre><code>src
├─App.jsx
├─index.js
├─store
|   ├─count.Store.js
|   ├─index.js
|   └list.Store.js
├─components
|     ├─Count.jsx
|     └List.jsx
</code></pre>
</blockquote>
<p>/src/store/count.Store.js</p>
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> makeAutoObservable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span>
<span class="token keyword">class</span> <span class="token class-name">CountStore</span> <span class="token punctuation">{<!-- --></span>
  count <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">makeAutoObservable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">addCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> CountStore <span class="token punctuation">}</span>
</code></pre>
<p>/src/store/list.Store.js</p>
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> makeAutoObservable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"mobx"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">ListStore</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">makeAutoObservable</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'vue'</span><span class="token punctuation">]</span>
  <span class="token function-variable function">changeList</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'angular'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> ListStore <span class="token punctuation">}</span>
</code></pre>
<p>/src/store/index.js</p>
<pre><code class="prism language-js"><span class="token comment">// 组合子模块 封装统一导出的供组件使用的方法</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> CountStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./count.Store"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ListStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./list.Store"</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">RootStore</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 对子模块进行实例化操作</span>
    <span class="token comment">// 将来实例化rootstore的时候，rootstore实例上有两个属性，分别存放了子模块的两个实例。</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>countStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>listStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 使用react context机制，完成统一方法封装</span>

<span class="token comment">// 1.实例化rootStore注入context</span>
<span class="token keyword">const</span> rootStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RootStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span>rootStore<span class="token punctuation">)</span>

<span class="token comment">// 2.导出useStore方法，供组件通过调用该方法使用根实例</span>
<span class="token comment">// 作用：通过useContext拿到rootStore实例对象，然后返回</span>
<span class="token comment">// 只要在业务组件中 调用useStore() 就可以拿到 rootStore实例对象</span>
<span class="token keyword">const</span> <span class="token function-variable function">useStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">useContext</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token punctuation">{<!-- --></span> useStore <span class="token punctuation">}</span>
</code></pre>
<p>组件使用模块中的数据</p>
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-react-lite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> countStore <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> countStore<span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span>countStore<span class="token punctuation">.</span>count<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 包裹组件让视图响应数据变化</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">observer</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
</code></pre>
<h1><a id="Mobx___322"></a>Mobx - 总结</h1>
<ol><li> <p>初始化Mobx的过程是怎样的？</p>
<blockquote>
<p>声明数据 -&gt; 响应式处理 -&gt; 定义action函数 -&gt; 实例化导出</p>
</blockquote> </li><li> <p>Mobx如何配合react，需要依赖什么包？</p>
<blockquote>
<p>mobx-react-lite作为连接包，导出<code>observer</code>方法，包裹组件</p>
</blockquote> </li><li> <p>模块化解决了什么问题？</p>
<blockquote>
<p>维护性问题</p>
</blockquote> </li><li> <p>如何实现Mobx的模块化？</p>
<blockquote>
<p>按照功能拆分store模块，根模块中组合子模块，利用<code>context</code>机制依赖注入</p>
</blockquote> </li></ol>
<blockquote>
<p>今天的分享就到这里啦，感谢您的观看，下篇文章将会使用Mobx完成一个小案例，感兴趣的话可以订阅本专栏以获取最新的文章动态哟～</p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>