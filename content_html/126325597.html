<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>æ–‡ç« ç›®å½•</h3>
<ul><li><a href="#_4">ğŸ’¨æ›´å¤šç›¸å…³çŸ¥è¯†ğŸ‘‡</a></li><li><ul><li><a href="#Spring_47">Springçº¯æ³¨è§£å¼€å‘</a></li><li><ul><li><a href="#1ComponentbeanIOC_51">ï¼ˆ1ï¼‰@Componentæ³¨è§£å¼€å‘å®šä¹‰beanï¼ˆåœ¨IOCå®¹å™¨åˆ›å»ºå¯¹è±¡ï¼‰</a></li><li><ul><li><a href="#_89">â­ä»£ç æ¼”ç¤º</a></li></ul>
</li><li><a href="#2Component_181">ï¼ˆ2ï¼‰@Componentæ³¨è§£çš„ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£</a></li><li><ul><li><a href="#_197">â­ä»£ç æ¼”ç¤º</a></li></ul>
</li><li><a href="#3ConfigurationComponentScan_209">ï¼ˆ3ï¼‰@Configurationçº¯æ³¨è§£å¼€å‘å’Œ@ComponentScanæ³¨è§£ä½¿ç”¨</a></li><li><ul><li><a href="#_257">ğŸŒŸé…ç½®æ–‡ä»¶åˆ°çº¯æ³¨è§£å¼€å‘æ¼”å˜å›¾</a></li><li><a href="#_268">â­ä»£ç æ¼”ç¤º</a></li></ul>
</li><li><a href="#4bean_328">ï¼ˆ4ï¼‰beançš„ä½œç”¨èŒƒå›´</a></li><li><ul><li><a href="#singleton_354">â­singletonä»£ç æ¼”ç¤º</a></li><li><a href="#prototype_417">â­prototypeä»£ç æ¼”ç¤º</a></li></ul>
</li><li><a href="#5bean_481">ï¼ˆ5ï¼‰beançš„ç”Ÿå‘½å‘¨æœŸ</a></li><li><ul><li><a href="#_507">â­ä»£ç æ¼”ç¤º</a></li></ul>
</li></ul>
</li></ul>
</li><li><a href="#KJJK_585">ä½œè€…ï¼šKJ.JK</a></li></ul>
</div>
<p></p>
<h1><a id="_4"></a>ğŸ’¨æ›´å¤šç›¸å…³çŸ¥è¯†ğŸ‘‡</h1>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/126197853?spm=1001.2014.3001.5502">Springä¸­çš„åˆ›å»ºå¯¹è±¡çš„ä¸‰ç§æ–¹å¼ã€ç¬¬ä¸‰æ–¹èµ„æºé…ç½®ç®¡ç†è¯¦ç»†æè¿°åŠä½¿ç”¨ï¼ˆXMLç‰ˆå®Œç»“ç¯‡ï¼‰</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/126074954">Springä¸­çš„beançš„é…ç½®ã€ä½œç”¨èŒƒå›´ã€ç”Ÿå‘½å‘¨æœŸè¯¦ç»†æè¿°åŠä½¿ç”¨ï¼ˆXMLç‰ˆä¸Šç¯‡ï¼‰</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/126111088?spm=1001.2014.3001.5502">Springä¸­çš„ä¾èµ–æ³¨å…¥ã€setterä¸æ„é€ å™¨æ³¨å…¥ã€è‡ªåŠ¨è£…é…ä¸é›†åˆæ³¨å…¥è¯¦ç»†æè¿°åŠä½¿ç”¨ï¼ˆXMLç‰ˆä¸­ç¯‡ï¼‰</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125882818">å¼‚å¸¸å¤„ç†ä¸è§£å†³æ–¹æ¡ˆè¯¦è§£ä¸Šç¯‡</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125882855">å¼‚å¸¸å¤„ç†ä¸è§£å†³æ–¹æ¡ˆè¯¦è§£ä¸‹ç¯‡</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125919963">Mathç±»ä¸Systemç±»çš„å¸¸ç”¨æ–¹æ³•ä½¿ç”¨</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125376882">JavaEEä¸­çš„é™æ€æ–¹æ³•å®šä¹‰ã€æ–¹æ³•é‡è½½è¦æ±‚ã€returnä½œç”¨è¯¦è§£</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125833781">Listæ¥å£çš„å¸¸ç”¨æ–¹æ³•ï¼Œç²¾åæ€»ç»“</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125375899">JavaEEä¸­çš„Streamæµçš„å¸¸ç”¨æ–¹æ³•</a></strong></p>
<p><strong>ğŸ’–<a href="https://sars2025.blog.csdn.net/article/details/125374965">JavaEEä¸­çš„StreamæµçŸ¥è¯†ç‚¹ä½¿ç”¨ï¼Œç²¾åæ€»ç»“ï¼Œä¸€æ–‡ç›´æ¥ä¸Šæ‰‹</a></strong></p>
<hr/>
<blockquote>
<p>ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ ğŸŒˆ<br/>  <br/> <strong>ğŸ‚ä¸ªäººåšå®¢é¦–é¡µï¼š</strong> <a href="https://blog.csdn.net/m0_47384542?type=blog">KJ.JK</a><br/>  <br/> <strong>æ¬¢è¿å¤§å®¶ç‚¹èµğŸ‘æ”¶è—ğŸ’–è¯„è®ºğŸ’¬å…³æ³¨ğŸ”’</strong><br/>  <br/> <strong>ğŸ’–æºç è·å– | ğŸ’»å­¦ä¹ äº¤æµ | ğŸ¤å•†åŠ¡åˆä½œ | ğŸ’¨ç§ä¿¡ä½œè€…</strong><br/>  <br/> <strong>ğŸ’¨æ¨èä¸€æ¬¾å®ç”¨çš„æ¨¡æ‹Ÿé¢è¯•ã€åˆ·é¢˜ç»ƒä¹ ç®—æ³•çš„ç¥å™¨ã€é€‚ç”¨äºæ‰€æœ‰çš„ç¨‹åºçŒ¿ğŸ‘‰<a href="https://www.nowcoder.com/link/pc_csdncpt_kjjk_java">ç‚¹å‡»å¼€å§‹å…è´¹åˆ·é¢˜ï¼Œè·Ÿç€åšä¸»èµ°ä¸Šå·…å³°ğŸ’ª</a></strong></p>
</blockquote>
<hr/>
<h2><a id="Spring_47"></a>Springçº¯æ³¨è§£å¼€å‘</h2>
<hr/>
<h3><a id="1ComponentbeanIOC_51"></a>ï¼ˆ1ï¼‰@Componentæ³¨è§£å¼€å‘å®šä¹‰beanï¼ˆåœ¨IOCå®¹å™¨åˆ›å»ºå¯¹è±¡ï¼‰</h3>
<pre><code class="prism language-java">              <span class="token string">"æ³¨è§£å¼€å‘å®šä¹‰beané¡ºåº:"</span>
                  
                  <span class="token number">1.</span>åœ¨æ‰€æœ‰éœ€è¦æ”¾åˆ°å®¹å™¨ä¸­çš„ç±»ï¼Œåœ¨ç±»ä¸Šä½¿ç”¨<span class="token annotation punctuation">@Component</span>æ³¨è§£
                  
                    <span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span>     
                    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>
                      
                    <span class="token punctuation">}</span>

                    <span class="token annotation punctuation">@Component</span>   <span class="token comment">//å¦‚æœæ²¡æœ‰æŒ‡å®šidï¼Œåˆ™ä½¿ç”¨ç±»åé¦–å­—æ¯å°å†™åšä¸ºidï¼Œå³:bookServiceImpl</span>
                    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
                         
                    <span class="token punctuation">}</span>


                      <span class="token number">2.</span>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é€šè¿‡åŸºåŒ…æ‰«æåŠ è½½bean   <span class="token string">"(ä¼šæ‰«æè¿™ä¸ªåŒ…å’Œå®ƒæ‰€æœ‰çš„å­åŒ…)"</span>
                          
                         <span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"com.itheima"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">/*
  æ³¨æ„:
       @Component("bookDao") // é…ç½®äº†Componentæ³¨è§£çš„ç±»,IoCå®¹å™¨å°±ä¼šåˆ›å»ºè¯¥ç±»çš„å¯¹è±¡,å¹¶æ”¾åˆ°å®¹å™¨ä¸­, idåå­—å«bookDao 
       
       @Component // å¦‚æœæ²¡æœ‰æŒ‡å®šid,è‡ªåŠ¨å–idåå­—: ç±»åé¦–å­—æ¯å˜å°å†™ å¦‚: (BookServiceImpl -&gt; id:bookServiceImpl)
*/</span>


</code></pre>
<hr/>
<h4><a id="_89"></a>â­ä»£ç æ¼”ç¤º</h4>
<pre><code class="prism language-java"><span class="token comment">// BookDaoImplç±»</span>

<span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span> <span class="token comment">// é…ç½®äº†Componentæ³¨è§£çš„ç±»,IoCå®¹å™¨å°±ä¼šåˆ›å»ºè¯¥ç±»çš„å¯¹è±¡,å¹¶æ”¾åˆ°å®¹å™¨ä¸­, idåå­—å«bookDao</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"book dao save ..."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//BookServiceImplç±»</span>
<span class="token annotation punctuation">@Component</span><span class="token comment">// æ²¡æœ‰æŒ‡å®šid,è‡ªåŠ¨å–idåå­—: ç±»åé¦–å­—æ¯å˜å°å†™(bookServiceImpl)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">BookDao</span> bookDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookDao</span><span class="token punctuation">(</span><span class="token class-name">BookDao</span> bookDao<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>bookDao <span class="token operator">=</span> bookDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"book service save ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//xmlç±»</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd"</span><span class="token operator">&gt;</span>



    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>ç»„ä»¶æ‰«æ<span class="token operator">:</span> å»æŒ‡å®šåŒ…ä¸­å’Œå­åŒ…ä¸­æ‰¾å¸¦æœ‰
           <span class="token annotation punctuation">@Component</span> çš„ç±»å¹¶åˆ›å»ºå¯¹è±¡æ”¾åˆ°å®¹å™¨ä¸­
        base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">:</span> åŸºåŒ…<span class="token punctuation">,</span> æŒ‡å®šè¦æŸ¥æ‰¾åŒ…å’Œå­åŒ…<span class="token operator">--</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"com.itheima"</span><span class="token operator">/</span><span class="token operator">&gt;</span>



<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//æµ‹è¯•ç±»</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AnnotationTest</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1.åŠ è½½ç±»è·¯å¾„ä¸‹çš„é…ç½®æ–‡ä»¶</span>
        <span class="token class-name">ClassPathXmlApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.ä½¿ç”¨åç§°è·å–bean</span>

        <span class="token class-name">BookDao</span> bookDao <span class="token operator">=</span>   <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>




        <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookServiceImpl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.å…³é—­å®¹å™¨</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre>
<hr/>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/ceb9abd26143452ab2d786ad5135b6fd.png"/></p>
<hr/>
<h3><a id="2Component_181"></a>ï¼ˆ2ï¼‰@Componentæ³¨è§£çš„ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£</h3>
<pre><code class="prism language-java">                    <span class="token operator">*</span> <span class="token annotation punctuation">@Controller</span><span class="token operator">:</span>ç”¨äº<span class="token string">"è¡¨ç°å±‚beanå®šä¹‰"</span>    <span class="token comment">//Controlleræ³¨è§£ä¸èƒ½ä½¿ç”¨å…¶å®ƒçš„æ³¨è§£ä»£æ›¿</span>
                    
                    <span class="token operator">*</span> <span class="token annotation punctuation">@Service</span><span class="token operator">:</span> ç”¨äº<span class="token string">"ä¸šåŠ¡å±‚beanå®šä¹‰"</span>         <span class="token string">"(serviceç±»)"</span>
                    
                    <span class="token operator">*</span> <span class="token annotation punctuation">@Repository</span><span class="token operator">:</span> ç”¨äº<span class="token string">"æ•°æ®å±‚beanå®šä¹‰"</span>      <span class="token string">" (Daoå±‚æ³¨è§£,æ¥å£ç±»)"</span>
</code></pre>
<hr/>
<h4><a id="_197"></a>â­ä»£ç æ¼”ç¤º</h4>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/bfa963e07c4f4e4fbbb8d1884a00931b.png"/></p>
<hr/>
<h3><a id="3ConfigurationComponentScan_209"></a>ï¼ˆ3ï¼‰@Configurationçº¯æ³¨è§£å¼€å‘å’Œ@ComponentScanæ³¨è§£ä½¿ç”¨</h3>
<pre><code class="prism language-java">                 <span class="token operator">*</span> <span class="token class-name">Spring3</span><span class="token number">.0</span>å¼€å¯äº†<span class="token string">"çº¯æ³¨è§£å¼€å‘æ¨¡å¼"</span>ï¼Œä½¿ç”¨<span class="token string">"Javaç±»æ›¿ä»£é…ç½®æ–‡ä»¶"</span>ï¼Œå¼€å¯äº†<span class="token class-name">Spring</span>å¿«é€Ÿå¼€å‘èµ›é“
                 
                 <span class="token operator">*</span> <span class="token class-name">Java</span>ç±»ä»£æ›¿<span class="token class-name">Spring</span>æ ¸å¿ƒé…ç½®æ–‡ä»¶
                 
                     
                 <span class="token operator">*</span> <span class="token string">"@Configurationæ³¨è§£"</span> <span class="token operator">:</span> <span class="token string">"ç”¨äºè®¾å®šå½“å‰ç±»ä¸ºé…ç½®ç±»"</span>     
                                 <span class="token comment">//(æœ‰è¿™ä¸ªæ³¨è§£çš„å¹¶ä¸”@ComponentScané…ç½®äº†æ‰«æçš„è·¯å¾„å°±ä¼šè¢«å¸¦ä¸Šè½¦)</span>
                        <span class="token comment">//Springåœ¨å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨æ‰«æå¹¶åŠ è½½æ‰€æœ‰é…ç½®ç±»ï¼Œç„¶åå°†é…ç½® ç±»ä¸­beanæ”¾å…¥å®¹å™¨</span>
                     
                 <span class="token operator">*</span> <span class="token string">"@ComponentScanæ³¨è§£"</span> <span class="token operator">:</span> <span class="token string">"ç”¨äºè®¾å®šåŸºåŒ…æ‰«æè·¯å¾„"</span>ï¼Œæ­¤æ³¨è§£åªèƒ½æ·»åŠ ä¸€æ¬¡ï¼Œ<span class="token string">"å¤šä¸ªæ•°æ®è¯·ç”¨æ•°ç»„æ ¼å¼{}"</span>
                                      <span class="token comment">//æ‰«æåŒ…æˆ–å­åŒ…ä¸­ç±»é‡Œé¢å’ŒSpringç›¸å…³çš„æ³¨è§£</span>
                              <span class="token comment">//é’ˆå¯¹æ ‡æ³¨äº†@Controllerã€@Serviceã€@Repositoryã€@Component çš„ç±»éƒ½å¯ä»¥åˆ«springæ‰«æåˆ°</span>
                 
                    å¦‚<span class="token operator">:</span> <span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.itheima.service"</span><span class="token punctuation">,</span><span class="token string">"com.itheima.dao"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                       <span class="token comment">//ç›¸å½“äºæ‰«æåˆ°å¸¦æœ‰æ³¨è§£çš„å¸¦å®ƒä¸Šè½¦</span>
                   

                 <span class="token operator">*</span> è¯»å–<span class="token class-name">Spring</span>æ ¸å¿ƒé…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨å¯¹è±¡åˆ‡æ¢ä¸º<span class="token string">"è¯»å–Javaé…ç½®ç±»åˆå§‹åŒ–å®¹å™¨å¯¹è±¡"</span>
                     
                                                                    <span class="token comment">//åŠ è½½é…ç½®æ–‡ä»¶åˆå§‹åŒ–å®¹å™¨    </span>
               <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                                                                   <span class="token comment">//åŠ è½½é…ç½®ç±»åˆå§‹åŒ–å®¹å™¨</span>
               <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                     
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    
         <span class="token string">"çº¯æ³¨è§£å¼€å‘é¡ºåº"</span>

                      <span class="token number">1.</span>ç”¨ä¸€ä¸ª<span class="token class-name">Java</span>ç±»æ¥å†™<span class="token string">"@Configurationæ³¨è§£"</span> <span class="token punctuation">(</span>è®¾å®šå½“å‰ç±»ä¸ºé…ç½®ç±»<span class="token punctuation">,</span>ä»£æ›¿<span class="token class-name">Spring</span>çš„é…ç½®ç±»æ–‡ä»¶<span class="token punctuation">)</span>
                                  <span class="token string">"@ComponentScanæ³¨è§£"</span> <span class="token punctuation">(</span>è®¾å®šåŸºåŒ…æ‰«æè·¯å¾„<span class="token punctuation">)</span>
    
                      <span class="token number">2.</span>è¯»å–<span class="token class-name">Java</span>é…ç½®ç±»åˆå§‹åŒ–å®¹å™¨å¯¹è±¡

             <span class="token class-name">ApplicationContext</span> ctx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token string">"javaé…ç½®ç±».class"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<hr/>
<h4><a id="_257"></a>ğŸŒŸé…ç½®æ–‡ä»¶åˆ°çº¯æ³¨è§£å¼€å‘æ¼”å˜å›¾</h4>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/5130a335e0544efd886d7bc237262f4d.png"/></p>
<hr/>
<h4><a id="_268"></a>â­ä»£ç æ¼”ç¤º</h4>
<pre><code class="prism language-java"><span class="token comment">//javaç±»ä»£æ›¿é…ç½®æ–‡ä»¶</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ComponentScan</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Import</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span> <span class="token comment">// Springçš„é…ç½®ç±», ç›¸å½“äºapplicationContext.xml</span>

<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"com.itheima.dao"</span><span class="token punctuation">,</span> <span class="token string">"com.itheima.service"</span><span class="token punctuation">,</span> <span class="token string">"com.itheima.util"</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// ç›¸å½“äºåŸºåŒ…æ‰«æ</span>



<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1.åŠ è½½é…ç½®ç±»</span>
         <span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span>
                 <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.è·å–bean</span>
        <span class="token class-name">BookDao</span> bookDao1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookDao1<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">BookService</span> bookService  <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookServiceImpl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 3.å…³é—­å®¹å™¨</span>
         context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre>
<hr/>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/56b9f5087c4a40958371630798bde41c.png"/></p>
<hr/>
<h3><a id="4bean_328"></a>ï¼ˆ4ï¼‰beançš„ä½œç”¨èŒƒå›´</h3>
<pre><code class="prism language-java">                          <span class="token operator">*</span> ä½¿ç”¨<span class="token string">"@Scope"</span>æ³¨è§£å®šä¹‰beanä½œç”¨èŒƒå›´
                               
                          <span class="token operator">*</span> èŒƒä¾‹
                              
                              <span class="token annotation punctuation">@Component</span>
                              <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"singleton"</span><span class="token punctuation">)</span>
                              <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token punctuation">{<!-- --></span>
                                  
                              <span class="token punctuation">}</span>
<span class="token comment">/*
   singleton : å•ä¾‹
   prototype : å¤šä¾‹
*/</span>
</code></pre>
<hr/>
<h4><a id="singleton_354"></a>â­singletonä»£ç æ¼”ç¤º</h4>
<pre><code class="prism language-java"><span class="token comment">//ä½œç”¨èŒƒå›´ç±»</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scope</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PreDestroy</span><span class="token punctuation">;</span>

<span class="token comment">// @Component("bookDao") // æŒ‡å®šidä¸ºbookDao</span>
<span class="token annotation punctuation">@Repository</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span>

 <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"singleton"</span><span class="token punctuation">)</span> <span class="token comment">// singleton: å•ä¾‹    prototype: å¤šä¾‹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"book dao save ..."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1.åŠ è½½é…ç½®ç±»</span>
         <span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span>
                 <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.è·å–bean</span>
        <span class="token class-name">BookDao</span> bookDao1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BookDao</span> bookDao2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bookDao1<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŒä¸€ä¸ªå¯¹è±¡: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bookDao1 <span class="token operator">==</span> bookDao2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookServiceImpl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 3.å…³é—­å®¹å™¨</span>
         context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
</code></pre>
<hr/>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/cb8f7fcb124b480e90518b1d18983aec.png"/></p>
<hr/>
<h4><a id="prototype_417"></a>â­prototypeä»£ç æ¼”ç¤º</h4>
<pre><code class="prism language-java"><span class="token comment">//ä½œç”¨èŒƒå›´ç±»</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scope</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PreDestroy</span><span class="token punctuation">;</span>

<span class="token comment">// @Component("bookDao") // æŒ‡å®šidä¸ºbookDao</span>
<span class="token annotation punctuation">@Repository</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span>

 <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span> <span class="token comment">// singleton: å•ä¾‹    prototype: å¤šä¾‹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"book dao save ..."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1.åŠ è½½é…ç½®ç±»</span>
         <span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span>
                 <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.è·å–bean</span>
        <span class="token class-name">BookDao</span> bookDao1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BookDao</span> bookDao2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bookDao1<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŒä¸€ä¸ªå¯¹è±¡: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bookDao1 <span class="token operator">==</span> bookDao2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookServiceImpl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 3.å…³é—­å®¹å™¨</span>
         context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
</code></pre>
<hr/>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/579cde17941f4d62b72cd67ade93c994.png"/></p>
<hr/>
<h3><a id="5bean_481"></a>ï¼ˆ5ï¼‰beançš„ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="prism language-java">                 <span class="token operator">*</span> ä½¿ç”¨ <span class="token string">"@PostConstruct"</span>ã€<span class="token string">"@PreDestroy"</span> å®šä¹‰beanç”Ÿå‘½å‘¨æœŸ
                     
                 <span class="token operator">*</span> è¿™ä¸¤ä¸ªæ³¨è§£ä¸æ˜¯<span class="token class-name">Spring</span>æ¡†æ¶æä¾›çš„ï¼Œç”±JDKæä¾›çš„ï¼Œä½†<span class="token string">"JDK9.0ä»¥åå»æ‰äº†"</span><span class="token punctuation">,</span>æ‰€ä»¥é«˜ç‰ˆæœ¬ä½¿ç”¨è¦åœ¨pom<span class="token punctuation">.</span>xmlå¯¼åŒ…
                     
                             <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
                                  <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>annotation<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
                                  <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>annotation<span class="token operator">-</span>api<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
                                  <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.3</span><span class="token number">.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
                             <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

                     
                 <span class="token operator">*</span> <span class="token string">"@PostConstruct"</span><span class="token operator">:</span> åˆå§‹åŒ–æ–¹æ³•<span class="token punctuation">,</span> åœ¨<span class="token string">"æ„é€ å™¨åæ‰§è¡Œ"</span>
                     
                 <span class="token operator">*</span> <span class="token string">"@PreDestroy"</span> <span class="token operator">:</span> é”€æ¯æ–¹æ³•<span class="token punctuation">,</span> åœ¨<span class="token string">"å¯¹è±¡é”€æ¯å‰æ‰§è¡Œ"</span>   <span class="token comment">//å¯¹å¤šä¾‹æ¨¡å¼æ— æ•ˆ</span>

</code></pre>
<hr/>
<h4><a id="_507"></a>â­ä»£ç æ¼”ç¤º</h4>
<pre><code class="prism language-java"><span class="token comment">//ç”Ÿå‘½å‘¨æœŸç±»</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Scope</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Repository</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PostConstruct</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PreDestroy</span><span class="token punctuation">;</span>

<span class="token comment">// @Component("bookDao") // æŒ‡å®šidä¸ºbookDao</span>
<span class="token annotation punctuation">@Repository</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span>

 <span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"singleton"</span><span class="token punctuation">)</span> <span class="token comment">// singleton: å•ä¾‹    prototype: å¤šä¾‹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookDao</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"book dao save ..."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// åˆå§‹åŒ–æ–¹æ³•, åœ¨æ„é€ å™¨åæ‰§è¡Œ</span>
     <span class="token annotation punctuation">@PostConstruct</span>      <span class="token comment">//beanåˆå§‹åŒ–å®¹å™¨æ³¨è§£</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"BookDaoImpl åˆå§‹åŒ–å®Œæ¯•!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// é”€æ¯æ–¹æ³•, åœ¨å¯¹è±¡é”€æ¯å‰æ‰§è¡Œ</span>
     <span class="token annotation punctuation">@PreDestroy</span>        <span class="token comment">//beané”€æ¯å®¹å™¨æ³¨è§£</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"BookDaoImpl é”€æ¯äº†!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
 <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 1.åŠ è½½é…ç½®ç±»</span>
         <span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span>
                 <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.è·å–bean</span>
        <span class="token class-name">BookDao</span> bookDao1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BookDao</span> bookDao2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookDao</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookDao"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        bookDao1<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åŒä¸€ä¸ªå¯¹è±¡: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>bookDao1 <span class="token operator">==</span> bookDao2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">BookService</span> bookService <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">BookService</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"bookServiceImpl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bookService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 3.å…³é—­å®¹å™¨</span>
         context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre>
<hr/>
<p><img alt="è¯·æ·»åŠ å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/a3eac04944f94b8fbd12a2c6403138ae.png"/></p>
<hr/>
<h1><a id="KJJK_585"></a>ä½œè€…ï¼šKJ.JK</h1>
<p>æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿ç»™ä¸ªèµæˆ–è€… starï¼Œä½ çš„æ”¯æŒæ˜¯å¯¹ä½œè€…æœ€å¤§çš„é¼“åŠ±ï¼Œä¸è¶³ä¹‹å¤„å¯ä»¥åœ¨è¯„è®ºåŒºå¤šå¤šæŒ‡æ­£ï¼Œäº¤æµå­¦ä¹ </p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>