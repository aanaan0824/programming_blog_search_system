<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<blockquote>
<p>âœ…ä½œè€…ç®€ä»‹ï¼šå¤§å®¶å¥½æˆ‘æ˜¯@æ¯å¤©éƒ½è¦æ•²ä»£ç ï¼Œä¸€ä½ææ–™è½¬ç å†œçš„é€‰æ‰‹ï¼Œå¸Œæœ›ä¸€èµ·åŠªåŠ›ï¼Œä¸€èµ·è¿›æ­¥ï¼<br/> ğŸ“ƒä¸ªäººä¸»é¡µï¼š<a href="https://blog.csdn.net/m0_61933976?spm=1010.2135.3001.5421" title="@æ¯å¤©éƒ½è¦æ•²ä»£ç çš„ä¸ªäººä¸»é¡µ">@æ¯å¤©éƒ½è¦æ•²ä»£ç çš„ä¸ªäººä¸»é¡µ</a></p>
<p>ğŸ”¥ç³»åˆ—ä¸“æ ï¼š<a href="https://blog.csdn.net/m0_61933976/category_11820121.html?spm=1001.2014.3001.5482" title="JavaSEä»å…¥é—¨åˆ°ç²¾é€š">JavaSEä»å…¥é—¨åˆ°ç²¾é€š</a><br/> ğŸ’¬æ¨èä¸€æ¬¾æ¨¡æ‹Ÿé¢è¯•ã€åˆ·é¢˜ç¥å™¨ï¼Œä»åŸºç¡€åˆ°å¤§å‚é¢è¯•é¢˜ğŸ‘‰<a href="https://www.nowcoder.com/link/pc_csdncpt_mtdyqdm_c" title="ç‚¹å‡»è·³è½¬åˆ·é¢˜ç½‘ç«™è¿›è¡Œæ³¨å†Œå­¦ä¹ ">ç‚¹å‡»è·³è½¬åˆ·é¢˜ç½‘ç«™è¿›è¡Œæ³¨å†Œå­¦ä¹ </a></p>
</blockquote>
<p id="main-toc"><strong>ç›®å½•</strong></p>
<p id="%E7%BA%BF%E7%A8%8B%E5%86%85%E5%AE%B9%E8%A1%A5%E5%85%85-toc" style="margin-left:0px;"><a href="#%E7%BA%BF%E7%A8%8B%E5%86%85%E5%AE%B9%E8%A1%A5%E5%85%85">çº¿ç¨‹å†…å®¹è¡¥å……</a></p>
<p id="1.%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B-toc" style="margin-left:40px;"><a href="#1.%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B">1. å®ˆæŠ¤çº¿ç¨‹</a></p>
<p id="2%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8">2. å®šæ—¶å™¨</a></p>
<p id="3%E3%80%81%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F">3. å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼šå®ç°Callableæ¥å£</a></p>
<p id="4%E3%80%81wait%E5%92%8Cnotify-toc" style="margin-left:40px;"><a href="#4%E3%80%81wait%E5%92%8Cnotify">4. waitå’Œnotify(ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼)</a></p>
<p id="%E7%BB%93%E6%9D%9F%E8%AF%AD-toc" style="margin-left:0px;"><a href="#%E7%BB%93%E6%9D%9F%E8%AF%AD">ç»“æŸè¯­</a></p>
<hr id="hr-toc"/>
<h1><strong>çº¿ç¨‹å†…å®¹è¡¥å……</strong></h1>
<blockquote>
<p>1ã€å®ˆæŠ¤çº¿ç¨‹<br/> 2ã€å®šæ—¶å™¨<br/> 3ã€å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼šFutureTaskæ–¹å¼ï¼Œå®ç°Callableæ¥å£ã€‚ï¼ˆJDK8æ–°ç‰¹æ€§ï¼‰<br/> 4ã€å…³äºObjectç±»ä¸­çš„waitå’Œnotifyæ–¹æ³•ã€‚ï¼ˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ï¼‰</p>
</blockquote>
<h2 id="1.%E5%AE%88%E6%8A%A4%E7%BA%BF%E7%A8%8B">1. å®ˆæŠ¤çº¿ç¨‹</h2>
<blockquote>
<p>ï¼ˆ1ï¼‰javaè¯­è¨€ä¸­çº¿ç¨‹åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<br/>            <strong> ä¸€ç±»æ˜¯ï¼šç”¨æˆ·çº¿ç¨‹</strong><br/>             <strong>ä¸€ç±»æ˜¯ï¼šå®ˆæŠ¤çº¿ç¨‹ï¼ˆåå°çº¿ç¨‹ï¼‰</strong>ï¼Œå…¶ä¸­å…·æœ‰ä»£è¡¨æ€§çš„å°±æ˜¯<span style="color:#fe2c24;">åƒåœ¾å›æ”¶çº¿ç¨‹(å®ˆæŠ¤çº¿ç¨‹)</span></p>
<p>ï¼ˆ2ï¼‰å®ˆæŠ¤çº¿ç¨‹çš„ç‰¹ç‚¹ï¼š<br/>             ä¸€èˆ¬å®ˆæŠ¤çº¿ç¨‹æ˜¯ä¸€ä¸ªæ­»å¾ªç¯ï¼Œæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹åªè¦ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸã€‚   <br/>            æ³¨æ„ï¼š<span style="color:#fe2c24;">ä¸»çº¿ç¨‹mainæ–¹æ³•æ˜¯ä¸€ä¸ªç”¨æˆ·çº¿ç¨‹</span>ã€‚</p>
<p>ï¼ˆ3ï¼‰å®ˆæŠ¤çº¿ç¨‹ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹å‘¢ï¼Ÿ<br/>            ä¾‹å¦‚ï¼šæ¯å¤©00:00çš„æ—¶å€™ç³»ç»Ÿæ•°æ®è‡ªåŠ¨å¤‡ä»½ã€‚è¿™ä¸ªéœ€è¦ä½¿ç”¨åˆ°å®šæ—¶å™¨ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥å°†å®šæ—¶å™¨è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚ ä¸€ç›´åœ¨é‚£é‡Œçœ‹ç€ï¼Œæ¯åˆ°00:00çš„æ—¶å€™å°±å¤‡ä»½ä¸€æ¬¡ã€‚æ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹<br/> å¦‚æœç»“æŸäº†ï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨é€€å‡ºï¼Œæ²¡æœ‰å¿…è¦è¿›è¡Œæ•°æ®å¤‡ä»½äº†ã€‚</p>
</blockquote>
<p><strong>æ¨¡æ‹Ÿå®ˆæŠ¤çº¿ç¨‹</strong></p>
<blockquote>
<p>ä¸»çº¿ç¨‹ç”¨æˆ·çº¿ç¨‹ç»“æŸï¼›å®ˆæŠ¤çº¿ç¨‹ä¹Ÿä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼Œå³ä½¿æ­»å¾ªç¯ä¹Ÿä¸è¡Œï¼</p>
<p>ä¾‹å¦‚ï¼šä¸‹é¢ä¸»çº¿ç¨‹mainè¿è¡Œå®Œï¼Œå¤‡ä»½æ•°æ®çš„çº¿ç¨‹ä¹Ÿä¼šè‡ªåŠ¨ç»ˆæ­¢</p>
</blockquote>
<pre><code class="language-java">package com.bjpowernode.java.thread;
// å®ˆæŠ¤çº¿ç¨‹
public class ThreadTest014 {
    public static void main(String[] args) {
        Thread t = new BackThread();
        t.setName("å¤‡ä»½æ•°æ®çš„çº¿ç¨‹");

        // å¯åŠ¨çº¿ç¨‹ä¹‹å‰ï¼Œå°†çº¿ç¨‹è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹
        t.setDaemon(true);

        t.start();

        // ä¸»çº¿ç¨‹æ˜¯ç”¨æˆ·çº¿ç¨‹
        for (int i = 0; i &lt;10 ; i++) {
            System.out.println(Thread.currentThread().getName()+"---&gt;"+i);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }

    }
}

class BackThread extends Thread{

    public void run() {
        int i = 0;
        // å³ä½¿æ˜¯æ­»å¾ªç¯ï¼Œä½†ç”±äºè¯¥çº¿ç¨‹æ˜¯å®ˆæŠ¤è€…ï¼Œå½“ç”¨æˆ·çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»ˆæ­¢ã€‚
        while(true){
            System.out.println(Thread.currentThread().getName()+"---&gt;"+ (++i));
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}</code></pre>
<h3></h3>
<h2 id="2%E3%80%81%E5%AE%9A%E6%97%B6%E5%99%A8">2. å®šæ—¶å™¨</h2>
<blockquote>
<p>ï¼ˆ1ï¼‰å®šæ—¶å™¨çš„ä½œç”¨ï¼š é—´éš”ç‰¹å®šçš„æ—¶é—´ï¼Œæ‰§è¡Œç‰¹å®šçš„ç¨‹åºã€‚</p>
<p>        ä¾‹å¦‚ï¼šæ¯å‘¨è¦è¿›è¡Œé“¶è¡Œè´¦æˆ·çš„æ€»è´¦æ“ä½œã€‚</p>
<p>                   æ¯å¤©è¦è¿›è¡Œæ•°æ®çš„å¤‡ä»½æ“ä½œã€‚</p>
<p>ï¼ˆ2ï¼‰åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæ¯éš”å¤šä¹…æ‰§è¡Œä¸€æ®µç‰¹å®šçš„ç¨‹åºï¼Œè¿™ç§éœ€æ±‚æ˜¯å¾ˆå¸¸è§çš„ï¼Œé‚£ä¹ˆåœ¨javaä¸­å…¶å®å¯ä»¥é‡‡ç”¨å¤šç§æ–¹å¼å®ç°ï¼š                <br/>         1ï¼‰å¯ä»¥ä½¿ç”¨sleepæ–¹æ³•ï¼Œç¡çœ ï¼Œè®¾ç½®ç¡çœ æ—¶é—´ï¼Œæ¯åˆ°è¿™ä¸ªæ—¶é—´ç‚¹é†’æ¥ï¼Œæ‰§è¡Œä»»åŠ¡ã€‚è¿™ç§æ–¹å¼æ˜¯æœ€åŸå§‹çš„å®šæ—¶å™¨ã€‚</p>
<p>        2ï¼‰åœ¨<strong>javaçš„ç±»åº“ä¸­</strong>å·²ç»å†™å¥½äº†ä¸€ä¸ª<strong><span style="color:#fe2c24;">å®šæ—¶å™¨ï¼šjava.util.Timer</span></strong>ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ã€‚ä¸è¿‡ï¼Œè¿™ç§æ–¹å¼åœ¨ç›®å‰çš„å¼€å‘ä¸­ä¹Ÿå¾ˆå°‘ç”¨ï¼Œå› ä¸ºç°åœ¨æœ‰å¾ˆå¤šé«˜çº§æ¡†æ¶éƒ½æ˜¯æ”¯æŒå®šæ—¶ä»»åŠ¡çš„ã€‚</p>
<p>        3ï¼‰åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œç›®å‰ä½¿ç”¨è¾ƒå¤šçš„æ˜¯Springæ¡†æ¶ä¸­æä¾›çš„SpringTaskæ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶åªè¦è¿›è¡Œç®€å•çš„é…ç½®ï¼Œå°±å¯ä»¥å®Œæˆå®šæ—¶å™¨çš„ä»»åŠ¡ã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>ç»§æ‰¿TimerTaskç±»ï¼Œåˆ›å»ºTimerå¯¹è±¡ï¼Œè°ƒç”¨scheduleæ–¹æ³•</strong></p>
<p>      <span style="color:#fe2c24;">  timer.schedule(å®šæ—¶ä»»åŠ¡ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶é—´ï¼Œé—´éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡);</span></p>
</blockquote>
<pre><code class="language-java">package com.bjpowernode.java.thread;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;

// ä½¿ç”¨å®šæ—¶å™¨æŒ‡å®šå®šæ—¶å¯¹è±¡
public class ThreadTest15 {
    public static void main(String[] args) throws Exception {
        // åˆ›å»ºå®šæ—¶å™¨å¯¹è±¡
        Timer timer = new Timer();
        // Timer timer = new Timer(true); // å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼

        // æŒ‡å®šå®šæ—¶ä»»åŠ¡
        // timer.schedule(å®šæ—¶ä»»åŠ¡ï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶é—´ï¼Œé—´éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡);

        // è·å–ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶é—´
        SimpleDateFormat sdf = new SimpleDateFormat("yyy-MM-dd HH:mm:ss");
        Date firstTime = sdf.parse("2022-7-31 22:19:00");

        timer.schedule(new logTimerTask(),firstTime,10*1000); // é—´éš”10ç§’æ‰§è¡Œä¸€æ¬¡
        
    }

}

// å®šæ—¶ä»»åŠ¡ç±»ï¼Œç»§æ‰¿TimerTask
// å‡è®¾è¿™æ˜¯ä¸€ä¸ªè®°å½•æ—¥å¿—çš„å®šæ—¶ä»»åŠ¡
class logTimerTask extends TimerTask{ // TimerTaskæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»
    public void run() {
        // ç¼–å†™æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡
        SimpleDateFormat sdf = new SimpleDateFormat("yyy-MM-dd HH:mm:ss");
        String strTime = sdf.format(new Date());
        System.out.println(strTime+"ï¼šå®Œæˆäº†ä¸€æ¬¡æ•°æ®å¤‡ä»½");
    }
}</code></pre>
<h3></h3>
<h2 id="3%E3%80%81%E5%AE%9E%E7%8E%B0%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F">3. å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼šå®ç°Callableæ¥å£</h2>
<blockquote>
<p id="1.%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A%E7%9B%B4%E6%8E%A5%E7%BB%A7%E6%89%BFThread%EF%BC%8C%E9%87%8D%E5%86%99run%E6%96%B9%E6%B3%95-toc">ï¼ˆ1ï¼‰<strong>å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼š</strong><span style="color:#fe2c24;">å®ç°Callableæ¥å£</span><br/>      <strong>ä¼˜ç‚¹ï¼š</strong><span style="color:#fe2c24;">å¯ä»¥è·å–åˆ°çº¿ç¨‹çš„æ‰§è¡Œç»“æœã€‚</span><br/>      <strong>ç¼ºç‚¹ï¼š</strong><span style="color:#fe2c24;">æ•ˆç‡æ¯”è¾ƒä½ï¼Œåœ¨è·å–tçº¿ç¨‹æ‰§è¡Œç»“æœçš„æ—¶å€™ï¼Œå½“å‰çº¿ç¨‹å—é˜»å¡ï¼Œæ•ˆç‡è¾ƒä½ã€‚</span></p>
<p>ï¼ˆ2ï¼‰å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼šå®ç°Callableæ¥å£ã€‚ï¼ˆJDK8æ–°ç‰¹æ€§ï¼‰<br/>         è¿™ç§æ–¹å¼å®ç°çš„çº¿ç¨‹<span style="color:#fe2c24;">å¯ä»¥è·å–çº¿ç¨‹çš„è¿”å›å€¼ï¼›</span>ä¹‹å‰è®²è§£çš„é‚£ä¸¤ç§æ–¹å¼æ˜¯æ— æ³•è·å–çº¿ç¨‹è¿”å›å€¼çš„ï¼Œå› ä¸ºrunæ–¹æ³•è¿”å›voidã€‚</p>
<p>        æ€è€ƒï¼šç³»ç»Ÿå§”æ´¾ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œè¯¥çº¿ç¨‹æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åï¼Œå¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬æ€ä¹ˆèƒ½æ‹¿åˆ°è¿™ä¸ªæ‰§è¡Œç»“æœå‘¢ï¼Ÿä½¿ç”¨ç¬¬ä¸‰ç§æ–¹å¼ï¼šå®ç°Callableæ¥å£</p>
<p>ï¼ˆ3ï¼‰è¿™ç§æ–¹å¼æ‰§è¡Œæ•ˆç‡è¾ƒä½ï¼Œåœ¨è·å–è¿”å›å€¼æ—¶æœ‰å¯èƒ½é€ æˆå½“å‰çº¿ç¨‹é˜»å¡ï¼</p>
</blockquote>
<pre><code class="language-java">import java.util.concurrent.Callable;
import java.util.concurrent.FutureTask;

// å®ç°çº¿ç¨‹çš„ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå®ç°callableæ¥å£
public class ThreadTest08 {
    public static void main(String[] args) throws Exception{
        //ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºä¸€ä¸ªâ€œæœªæ¥ä»»åŠ¡ç±»â€
        // å‚æ•°æ—¢å¯ä»¥ä¼ Runnable(æ²¡æœ‰è¿”å›å€¼),ä¹Ÿå¯ä»¥ä¼ Callable(æœ‰è¿”å›å€¼)
        FutureTask task = new FutureTask(new MyCallable()); // Callableæ¥å£å®ç°ç±»å¯¹è±¡

        // åˆ›å»ºçº¿ç¨‹å¯¹è±¡
        Thread t = new Thread(task);
        // å¯åŠ¨çº¿ç¨‹
        t.start();

        // mainæ–¹æ³•æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ€ä¹ˆè·å–tçº¿ç¨‹çš„è¿”å›å€¼
        // get()æ–¹æ³•çš„æ‰§è¡Œä¼šå¯¼è‡´â€œå½“å‰çº¿ç¨‹é˜»å¡â€ï¼Œè¦ç­‰æ‹¿åˆ°call()æ–¹æ³•returnçš„ç»“æœ
        Object obj = task.get();
        System.out.println("çº¿ç¨‹æ‰§è¡Œç»“æœï¼š"+obj);

        // mainæ–¹æ³•è¿™é‡Œçš„ç¨‹åºè¦æƒ³æ‰§è¡Œå¿…é¡»ç­‰å¾…get()æ–¹æ³•çš„ç»“æŸ
        // è€Œget()æ–¹æ³•å¯èƒ½éœ€è¦å¾ˆä¹…ã€‚å› ä¸ºget()æ–¹æ³•æ˜¯ä¸ºäº†æ‹¿å¦ä¸€ä¸ªçº¿ç¨‹çš„æ‰§è¡Œç»“æœ
        // å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ˜¯éœ€è¦æ—¶é—´çš„ã€‚
        System.out.println("Hello World");

    }
}


class MyCallable implements Callable{
    // é‡å†™call()æ–¹æ³•ï¼Œctrl+Oï¼›
    // call()æ–¹æ³•å°±ç›¸å½“äºrun()æ–¹æ³•ï¼Œåªä¸è¿‡run()æ–¹æ³•æœ‰è¿”å›å€¼
    public Object call() throws Exception {
        System.out.println("call method begin");
        Thread.sleep(1000*10);
        System.out.println("call method end");
        int a = 10;
        int b = 20;
        return a+b; //è‡ªåŠ¨è£…ç®±ï¼ˆè¿”å›çš„æ˜¯Objectç±»å‹ï¼Œ300ç»“æœä¼šå˜æˆIntegerï¼‰
    }
}

/*æ‰§è¡Œç»“æœï¼š
 call method begin
 call method end
 çº¿ç¨‹æ‰§è¡Œç»“æœï¼š30
 Hello World
*/

</code></pre>
<p><strong>é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼ </strong></p>
<pre><code class="language-java">package com.bjpowernode.java.thread;
import java.util.concurrent.Callable;
import java.util.concurrent.FutureTask; 
// é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼
public class ThreadTest16 {
    public static void main(String[] args) throws Exception, InterruptedException {
        // åŒ¿åå†…éƒ¨ç±»çš„æ–¹å¼
        FutureTask task = new FutureTask(new Callable() {
            public Object call() throws Exception {   
                System.out.println("call method begin");
                Thread.sleep(1000 * 10);
                System.out.println("call method end!");
                int a = 100;
                int b = 200;
                return a + b; //è‡ªåŠ¨è£…ç®±(300ç»“æœå˜æˆInteger)
            }
        });

        // åˆ›å»ºçº¿ç¨‹å¯¹è±¡
        Thread t = new Thread(task);
        // å¯åŠ¨çº¿ç¨‹
        t.start();
        Object obj = task.get();
        System.out.println(obj);

        System.out.println("Hello World!");


    }
}
</code></pre>
<h3></h3>
<h2 id="4%E3%80%81wait%E5%92%8Cnotify">4. waitå’Œnotify(<strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼</strong>)</h2>
<blockquote>
<p>ï¼ˆ1ï¼‰å…³äºObjectç±»ä¸­çš„waitå’Œnotifyæ–¹æ³•ï¼ˆç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼ï¼‰</p>
<p>Tçº¿ç¨‹åœ¨oå¯¹è±¡ä¸Šæ´»åŠ¨ï¼ŒTçº¿ç¨‹æ˜¯å½“å‰çº¿ç¨‹å¯¹è±¡ï¼›å½“è°ƒç”¨o.wait()æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚o.notify()æ–¹æ³•çš„è°ƒç”¨å¯ä»¥è®©æ­£åœ¨oå¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹å”¤é†’ã€‚ä¾‹å¦‚ï¼šæˆ‘èµ°åœ¨å¤§è¡—ä¸Šï¼ˆå¯¹è±¡oï¼‰ï¼Œæœ‰äººè¦æ‰“æˆ‘(çº¿ç¨‹T)ï¼›æˆ‘è¯´â€œç­‰ä¼šåˆ«æ‰“è„¸â€œï¼ˆç›¸å½“äºè°ƒç”¨äº†o.wait()ï¼‰ï¼›â€œç»§ç»­å§â€ï¼ˆç›¸å½“äºè°ƒç”¨äº†o.notify()ï¼‰</p>
<p>ï¼ˆ2ï¼‰<span style="color:#0d0016;">waitå’Œnotifyæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å¯¹è±¡çš„æ–¹æ³•ï¼Œæ˜¯javaä¸­ä»»ä½•ä¸€ä¸ªjavaå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ–¹å¼æ˜¯Objectç±»ä¸­è‡ªå¸¦çš„</span>ã€‚waitæ–¹æ³•å’Œnotifyæ–¹æ³•ä¸æ˜¯é€šè¿‡çº¿ç¨‹å¯¹è±¡è°ƒç”¨ï¼</p>
<p>ï¼ˆ3ï¼‰wait()æ–¹æ³•ä½œç”¨      </p>
<pre><code class="language-java">Object o = new Object();
o.wait();</code></pre>
<p>è¡¨ç¤ºï¼šè®©æ­£åœ¨oå¯¹è±¡ä¸Šæ´»åŠ¨çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œæ— æœŸé™ç­‰å¾…ï¼Œç›´åˆ°è¢«å”¤é†’ä¸ºæ­¢ã€‚o.wait();æ–¹æ³•çš„è°ƒç”¨ï¼Œä¼šè®©â€œå½“å‰çº¿ç¨‹ï¼ˆæ­£åœ¨oå¯¹è±¡ä¸Šæ´»åŠ¨çš„çº¿ç¨‹ï¼‰â€è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚</p>
<p>ï¼ˆ4ï¼‰notify()æ–¹æ³•ä½œç”¨        </p>
<pre><code class="language-java">Object o = new Object();
o.notify();</code></pre>
<p> è¡¨ç¤ºï¼šå”¤é†’æ­£åœ¨oå¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹ã€‚è¿˜æœ‰ä¸€ä¸ªnotifyAll()æ–¹æ³•ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯å”¤é†’oå¯¹è±¡ä¸Šå¤„äºç­‰å¾…çš„æ‰€æœ‰çº¿ç¨‹ã€‚</p>
</blockquote>
<p><strong>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼</strong></p>
<blockquote>
<p>ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼æ˜¯ä¸ºäº†ä¸“é—¨è§£å†³æŸä¸ªç‰¹å®šéœ€æ±‚çš„ï¼›</p>
<p>ä¸€ä¸ªçº¿ç¨‹è´Ÿè´£ç”Ÿäº§ï¼Œä¸€ä¸ªçº¿ç¨‹è´Ÿè´£æ¶ˆè´¹ï¼›æœ€ç»ˆè¦è¾¾åˆ°ç”Ÿäº§å’Œæ¶ˆè´¹å¹³è¡¡ </p>
</blockquote>
<p><img alt="" height="712" src="image\c813dc65c74b428cbdc063dc00fb94b0.png" width="1200"/></p>
<blockquote>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨waitæ–¹æ³•å’Œnotifyæ–¹æ³•å®ç°â€œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼â€<br/> ï¼ˆ2ï¼‰ä»€ä¹ˆæ˜¯â€œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¨¡å¼â€ï¼Ÿ<br/>      ç”Ÿäº§çº¿ç¨‹è´Ÿè´£ç”Ÿäº§ï¼Œæ¶ˆè´¹çº¿ç¨‹è´Ÿè´£æ¶ˆè´¹ã€‚<br/>      ç”Ÿäº§çº¿ç¨‹å’Œæ¶ˆè´¹çº¿ç¨‹è¦è¾¾åˆ°å‡è¡¡ã€‚<br/>      è¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨è¿™ç§ç‰¹æ®Šçš„æƒ…å†µä¸‹éœ€è¦ä½¿ç”¨waitæ–¹æ³•å’Œnotifyæ–¹æ³•ã€‚<br/> ï¼ˆ3ï¼‰<span style="color:#fe2c24;"><strong>waitå’Œnotifyæ–¹æ³•ä¸æ˜¯çº¿ç¨‹å¯¹è±¡çš„æ–¹æ³•ï¼Œæ˜¯æ™®é€šjavaå¯¹è±¡éƒ½æœ‰çš„æ–¹æ³•</strong></span><br/> ï¼ˆ4ï¼‰waitæ–¹æ³•å’Œnotifyæ–¹æ³•å»ºç«‹åœ¨çº¿ç¨‹åŒæ­¥çš„åŸºç¡€ä¹‹ä¸Šï¼›å› ä¸ºå¤šçº¿ç¨‹è¦åŒæ—¶æ“ä½œä¸€ä¸ªä»“åº“ã€‚æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚<br/> ï¼ˆ5ï¼‰waitæ–¹æ³•ä½œç”¨ï¼šo.wait()è®©æ­£åœ¨oå¯¹è±¡ä¸Šæ´»åŠ¨çš„çº¿ç¨‹tè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾æ‰tçº¿ç¨‹ä¹‹å‰å æœ‰çš„oå¯¹è±¡çš„é”ã€‚<br/> ï¼ˆ6ï¼‰notifyæ–¹æ³•ä½œç”¨ï¼šo.notify()è®©æ­£åœ¨oå¯¹è±¡ä¸Šç­‰å¾…çš„çº¿ç¨‹å”¤é†’ï¼Œåªæ˜¯é€šçŸ¥ï¼Œä¸ä¼šé‡Šæ”¾oå¯¹è±¡ä¸Šä¹‹å‰å æœ‰çš„é”ã€‚<br/> ï¼ˆ7ï¼‰æ¨¡æ‹Ÿè¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼š<br/>     1ï¼‰ä»“åº“æˆ‘ä»¬é‡‡ç”¨Listé›†åˆ<br/>     2ï¼‰Listé›†åˆä¸­å‡è®¾åªèƒ½å­˜å‚¨1ä¸ªå…ƒç´ <br/>     3ï¼‰1ä¸ªå…ƒç´ å°±è¡¨ç¤ºä»“åº“æ»¡äº†<br/>     4ï¼‰å¦‚æœListé›†åˆä¸­å…ƒç´ ä¸ªæ•°æ˜¯0ï¼Œå°±è¡¨ç¤ºä»“åº“ç©ºäº†<br/>     5ï¼‰ä¿è¯Listé›†åˆä¸­æ°¸è¿œéƒ½æ˜¯æœ€å¤šå­˜å‚¨1ä¸ªå…ƒç´ </p>
<p>    6ï¼‰å¿…é¡»åšåˆ°è¿™ç§æ•ˆæœï¼šç”Ÿäº§1ä¸ªæ¶ˆè´¹1ä¸ª</p>
</blockquote>
<pre><code class="language-java">package com.bjpowernode.java.thread;

import java.util.ArrayList;
import java.util.List;

public class ThreadTest17 {
    public static void main(String[] args) {
        // åˆ›å»º1ä¸ªä»“åº“å¯¹è±¡ï¼Œå…±äº«çš„
        List list = new ArrayList();
        // åˆ›å»º2ä¸ªçº¿ç¨‹å¯¹è±¡
        Thread t1 = new Thread(new Producer(list));
        Thread t2 = new Thread(new Consumer(list));

        t1.setName("ç”Ÿäº§è€…çº¿ç¨‹");
        t2.setName("æ¶ˆè´¹è€…çº¿ç¨‹");

        t1.start();
        t2.start();

    }

}

// ç”Ÿäº§çº¿ç¨‹
class Producer implements Runnable{
    // ä»“åº“
    private List list;
    // é€šè¿‡æ„é€ æ–¹æ³•ä¼ è¿‡æ¥
    public Producer(List list) {
        this.list = list;
    }

    public void run() {
        // ä¸€ç›´ç”Ÿäº§ï¼ˆä½¿ç”¨æ­»å¾ªç¯ï¼‰
         while(true){
             // ç»™ä»“åº“å¯¹è±¡ListåŠ é”
             synchronized (list){
                 if(list.size()&gt;0){ // å¤§äº0,è¯´æ˜ä»“åº“ä¸­å·²ç»æœ‰ä¸€ä¸ªå…ƒç´ äº†
                     try {
                         // å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œå¹¶ä¸”é‡Šæ”¾Producerä¹‹å‰å æœ‰çš„Listé›†åˆçš„é”
                         list.wait();
                     } catch (InterruptedException e) {
                         e.printStackTrace();
                     }
                 }

                 // å¦‚æœä»“åº“ç©ºï¼Œç”Ÿäº§
                 Object obj = new Object();
                 list.add(obj);
                 System.out.println(Thread.currentThread().getName()+"---&gt;"+obj);

                 // å”¤é†’æ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹
                 list.notify();
             }
         }
    }
}

// æ¶ˆè´¹çº¿ç¨‹
class Consumer implements Runnable{
    // ä»“åº“
    private List list;
    // é€šè¿‡æ„é€ æ–¹æ³•ä¼ è¿‡æ¥
    public Consumer(List list) {
        this.list = list;
    }

    public void run() {
        // ä¸€ç›´æ¶ˆè´¹
        while(true){
            synchronized (list){
                if(list.size() == 0){
                    try {
                        // ä»“åº“å·²ç»ç©ºäº†
                        // æ¶ˆè´¹è€…çº¿ç¨‹ç­‰å¾…ï¼Œé‡Šæ”¾æ‰Listé›†åˆçš„é”
                        list.wait();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }

                // è¯´æ˜ä»“åº“ä¸­æœ‰æ•°æ®ï¼Œæ¶ˆè´¹è€…è¿›è¡Œæ¶ˆè´¹
                Object obj = list.remove(0);
                System.out.println(Thread.currentThread().getName()+"---&gt;"+obj);

                // å”¤é†’ç”Ÿäº§è€…ç”Ÿäº§
                list.notify();
            }
        }
    }
}</code></pre>
<h1 id="%E7%BB%93%E6%9D%9F%E8%AF%AD">ç»“æŸè¯­</h1>
<blockquote>
<p>ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦ï¼å¿«å¿«é€šè¿‡ä¸‹æ–¹é“¾æ¥æ³¨å†ŒåŠ å…¥åˆ·é¢˜å¤§å†›å§ï¼å„ç§å¤§å‚é¢è¯•çœŸé¢˜åœ¨ç­‰ä½ å“¦ï¼<br/> ğŸ’¬åˆ·é¢˜ç¥å™¨ï¼Œä»åŸºç¡€åˆ°å¤§å‚é¢è¯•é¢˜ğŸ‘‰<a href="https://www.nowcoder.com/link/pc_csdncpt_mtdyqdm_c" title="ç‚¹å‡»è·³è½¬åˆ·é¢˜ç½‘ç«™è¿›è¡Œæ³¨å†Œå­¦ä¹ ">ç‚¹å‡»è·³è½¬åˆ·é¢˜ç½‘ç«™è¿›è¡Œæ³¨å†Œå­¦ä¹ </a></p>
</blockquote>
<p><img alt="" height="511" src="image\184068dc41e94efbb14e555f972eaa17.png" width="1200"/></p>
<p> </p>
</div>
</div>