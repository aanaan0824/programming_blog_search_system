<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<blockquote>
<p>参考资料<br/> 思否：<a href="https://segmentfault.com/a/1190000019920162">https://segmentfault.com/a/1190000019920162</a><br/> 手册：<a href="https://cli.vuejs.org/zh/config/">https://cli.vuejs.org/zh/config/</a></p>
</blockquote>
<h2><a id="vueconfigjs__4"></a>vue.config.js 全局配置</h2>
<p>配置参数：</p>
<h3><a id="1_7"></a>1.两种配置方式</h3>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  // 选项……
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="prism language-bash">const <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> require<span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span>
module.exports <span class="token operator">=</span> defineConfig<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  // 选项……
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3><a id="2baseUrl__baseUrl_22"></a>2.baseUrl / baseUrl</h3>
<p>静态资源地址。</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	// baseURL:<span class="token string">'./'</span>  // vue-cli版本是3.2.0以前的
	publicPath:<span class="token string">'./'</span> // publicPath属性适用于vue-cli 高于3.2.0的项目
<span class="token punctuation">}</span>
</code></pre>
<p>不同开发环境的切换模式：</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  publicPath: process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span> ? <span class="token string">'/生产环境路径/'</span> <span class="token keyword">:</span> <span class="token string">'/'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="3outputDir_41"></a>3.outputDir</h3>
<p>生产环境<strong>构建文件</strong>的目录地址。</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  outputDir:<span class="token string">'newBuild'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="4assetsDir_51"></a>4.assetsDir</h3>
<p>放置生成的<strong>静态资源 (js、css、img、fonts)</strong> 的 (相对于 outputDir 的) 目录。</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  assetsDir:<span class="token string">'staticDir'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="5indexPath_61"></a>5.indexPath</h3>
<p>指定生成的 index.html 的输出路径 (相对于 outputDir)。</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  indexPath:<span class="token string">'indexHtmlPath'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="6filenameHashing_71"></a>6.filenameHashing</h3>
<p>生成的静态资源在它们的文件名中包含了 hash 以便更好的控制缓存,通过将这个选项设为 false 来关闭文件名哈希。</p>
<pre><code class="prism language-bash">module.exports<span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	filenameHashing:false,
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="7pages_81"></a>7.pages</h3>
<p>多页打包</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  pages: <span class="token punctuation">{<!-- --></span>
    index: <span class="token punctuation">{<!-- --></span>
      // page 的入口
      entry: <span class="token string">'src/index/main.js'</span>,
      // 模板来源
      template: <span class="token string">'public/index.html'</span>,
      // 在 dist/index.html 的输出
      filename: <span class="token string">'index.html'</span>,
      chunks: <span class="token punctuation">[</span><span class="token string">'chunk-vendors'</span>, <span class="token string">'chunk-common'</span>, <span class="token string">'index'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="8lintOnSave_101"></a>8.lintOnSave</h3>
<p>是否在开发环境下通过 eslint-loader 在每次保存时 lint 代码。这个值会在 @vue/cli-plugin-eslint 被安装之后生效。</p>
<pre><code class="prism language-bash">module.exports<span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	lintOnSave:false,
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="9devServer_110"></a>9.devServer</h3>
<p>让浏览器 overlay 同时显示警告和错误</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  devServer: <span class="token punctuation">{<!-- --></span>
    overlay: <span class="token punctuation">{<!-- --></span>
      warnings: true,
      errors: <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="_125"></a></h3>
<p>文件初始值：</p>
<pre><code class="prism language-javascript"><span class="token comment">/**
 * @type {import('@vue/cli-service').ProjectOptions}
 */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 选项...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>或者，也可以使用 @vue/cli-service 提供的 <code>defineConfig</code> 帮手函数，以获得更好的类型提示：</p>
<pre><code class="prism language-javascript"><span class="token comment">// vue.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@vue/cli-service'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 选项</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3><a id="10runtimeCompiler_153"></a>10.<mark>runtimeCompiler</mark></h3>
<p>是否使用包含运行时编译器的 Vue 构建版本。</p>
<pre><code class="prism language-bash">
</code></pre>
<h3><a id="publicPath_161"></a>publicPath</h3>
<p>原来的<code>baseUrl</code>，从Vue CLI 3.3 起已弃用baseUrl改用<code>publicPath</code></p>
<p>部署应用包时的<code>基本 URL</code>。用法和 webpack 本身的 output.publicPath 一致，但是 Vue CLI 在一些其他地方也需要用到这个值，所以始终使用 publicPath 而不要直接修改 webpack 的 output.publicPath。</p>
<p>默认情况下，Vue CLI 会假设你的应用是被部署在一个域名的<code>根路径上</code>，例如 https://www.my-app.com/。如果应用被部署在一个子路径上，你就需要用这个选项指定这个子路径。例如，如果你的应用被部署在 https://www.my-app.com/my-app/，则设置 <code>publicPath 为 /my-app/</code></p>
<p>这个值也可以被设置为<code>空字符串 ('') 或是相对路径 ('./')</code>，这样所有的<code>资源都会被链接为相对路径</code>，这样打出来的包可以被<strong>部署在任意路径</strong>，也可以用在类似 Cordova hybrid 应用的文件系统中。</p>
<blockquote>
<p>相对 publicPath 的限制<br/> 相对路径的 publicPath 有一些使用上的限制。在以下情况下，应当避免使用相对 publicPath:</p>
<ul><li>使用基于 HTML5 history.pushState 的路由时；</li><li>使用 pages 选项构建多页面应用时。</li></ul>
</blockquote>
<p>这个值在开发环境下同样生效。如果你想把开发服务器架设在根路径，可以使用一个条件式的值：</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  publicPath<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">===</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'/production-sub-path/'</span> <span class="token punctuation">:</span> <span class="token string">'/'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="outputDir_183"></a>outputDir</h3>
<p>当运行 <code>vue-cli-service build</code> 时生成的<strong>生产环境构建文件的目录</strong>。<code>注意目标目录的内容在构建之前会被清除</code> (构建时传入 <code>--no-clean</code> 可关闭该行为)。</p>
<blockquote>
<p>提示:<br/> 请始终使用 outputDir 而不要修改 webpack 的 output.path。</p>
</blockquote>
<h3><a id="assetsDir_189"></a>assetsDir</h3>
<p>放置生成的静态资源 (js、css、img、fonts) 的目录。</p>
<h3><a id="indexPath_192"></a>indexPath</h3>
<p>指定生成的 index.html 的输出路径 (相对于 outputDir)。也可以是一个绝对路径</p>
<h3><a id="filenameHashing_195"></a>filenameHashing</h3>
<p>文件名hash加密设置。</p>
<p>参考：<a href="https://blog.csdn.net/weixin_35773751/article/details/121726540">https://blog.csdn.net/weixin_35773751/article/details/121726540</a></p>
<h3><a id="pages_200"></a>pages</h3>
<p>在 multi-page 模式下构建应用。每个“page”应该有一个对应的 JavaScript 入口文件。其值应该是一个对象，对象的 key 是入口的名字，value 是：</p>
<ol><li>指定 <code>entry, template, filename, title 和 chunks</code> 的对象 (除了 entry 之外都是可选的)</li><li>指定其 entry 的字符串</li></ol>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  pages<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    index<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// page 的入口</span>
      entry<span class="token punctuation">:</span> <span class="token string">'src/index/main.js'</span><span class="token punctuation">,</span>
      <span class="token comment">// 模板来源</span>
      template<span class="token punctuation">:</span> <span class="token string">'public/index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 在 dist/index.html 的输出</span>
      filename<span class="token punctuation">:</span> <span class="token string">'index.html'</span><span class="token punctuation">,</span>
      <span class="token comment">// 当使用 title 选项时，</span>
      <span class="token comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span>
      title<span class="token punctuation">:</span> <span class="token string">'Index Page'</span><span class="token punctuation">,</span>
      <span class="token comment">// 在这个页面中包含的块，默认情况下会包含</span>
      <span class="token comment">// 提取出来的通用 chunk 和 vendor chunk。</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'chunk-vendors'</span><span class="token punctuation">,</span> <span class="token string">'chunk-common'</span><span class="token punctuation">,</span> <span class="token string">'index'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 当使用只有入口的字符串格式时，</span>
    <span class="token comment">// 模板会被推导为 `public/subpage.html`</span>
    <span class="token comment">// 并且如果找不到的话，就回退到 `public/index.html`。</span>
    <span class="token comment">// 输出文件名会被推导为 `subpage.html`。</span>
    subpage<span class="token punctuation">:</span> <span class="token string">'src/subpage/main.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="lintOnSave_230"></a>lintOnSave</h3>
<p>开发环境下通过 eslint-loader 在每次保存时 lint 代码</p>
<p>设置为 true 或 warning 时，eslint-loader 会将 lint 错误输出为编译警告。默认情况下，警告仅仅会被输出到命令行，且不会使得编译失败。</p>
<p>如果你希望让 lint 错误在开发时直接显示在浏览器中，你可以使用 lintOnSave: ‘default’。这会强制 eslint-loader 将 lint 错误输出为编译错误，同时也意味着 lint 错误将会导致编译失败。</p>
<p>设置为 error 将会使得 eslint-loader 把 lint 警告也输出为编译错误，这意味着 lint 警告将会导致编译失败。</p>
<p>或者，你也可以通过设置让浏览器 overlay 同时显示警告和错误：</p>
<pre><code class="prism language-javascript"><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    overlay<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      warnings<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      errors<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>当 lintOnSave 是一个 truthy 的值时，eslint-loader 在开发和生产构建下都会被启用。如果你想要在生产构建时禁用 eslint-loader，你可以用如下配置：</p>
<pre><code class="prism language-javascript"><span class="token comment">// vue.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  lintOnSave<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="runtimeCompiler_262"></a>runtimeCompiler</h3>
<p>对比：vue中runtimecompiler和runtimeonly的区别</p>
<p>如果在之后的开发中，你依然使用template，就需要选择runtimecompiler<br/> 如果你之后的开发中，使用的是.vue文件夹开发，那么可以选择runtimeonly</p>
<p>runtimecompiler<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/106a2d19280541789dcd809a23e27475.png"/></p>
<p>runtimeonly<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a1f3ff61906e4a45bb23574d47fd3b18.png"/></p>
<h3><a id="transpileDependencies_274"></a>transpileDependencies</h3>
<p>默认情况下 babel-loader 会忽略所有 node_modules 中的文件。你可以启用本选项，以避免构建后的代码中出现未转译的第三方依赖。</p>
<p>不过，对所有的依赖都进行转译可能会降低构建速度。如果对构建性能有所顾虑，你可以只转译部分特定的依赖：给本选项传一个数组，列出需要转译的第三方包包名或正则表达式即可。</p>
<h3><a id="productionSourceMap_279"></a>productionSourceMap</h3>
<p>不需要生产环境的 source map，可以将其设置为 false 以加速生产环境构建</p>
<h3><a id="crossorigin_282"></a>crossorigin</h3>
<h3><a id="integrity_283"></a>integrity</h3>
<h3><a id="configureWebpack_284"></a>configureWebpack</h3>
<p>这个值是一个对象，会通过 webpack-merge 合并到最终的配置中。</p>
<p>如果这个值是一个函数，则会接收被解析的配置作为参数。该函数既可以修改配置并不返回任何东西，也可以返回一个被克隆或合并过的配置版本。</p>
<h3><a id="chainWebpack_289"></a>chainWebpack</h3>
<p>是一个函数，会接收一个基于 webpack-chain 的 ChainableConfig 实例。允许对内部的 webpack 配置进行更细粒度的修改。</p>
<h3><a id="cssrequireModuleExtension_292"></a>css.requireModuleExtension</h3>
<p>默认情况下，只有 *.module.[ext] 结尾的文件才会被视作 CSS Modules 模块。设置为 false 后你就可以去掉文件名中的 .module 并将所有的 *.(css|scss|sass|less|styl(us)?) 文件视为 CSS Modules 模块。</p>
<h3><a id="cssextract_295"></a>css.extract</h3>
<p>是否将组件中的 CSS 提取至一个独立的 CSS 文件中 (而不是动态注入到 JavaScript 中的 inline 代码)。</p>
<p>同样当构建 Web Components 组件时它总是会被禁用 (样式是 inline 的并注入到了 shadowRoot 中)。</p>
<p>当作为一个库构建时，你也可以将其设置为 false 免得用户自己导入 CSS。</p>
<p>提取 CSS 在开发环境模式下是默认不开启的，因为它和 CSS 热重载不兼容。然而，你仍然可以将这个值显性地设置为 true 在所有情况下都强制提取。</p>
<h3><a id="csssourceMap_304"></a>css.sourceMap</h3>
<p>是否为 CSS 开启 source map。设置为 true 之后可能会影响构建的性能。</p>
<h3><a id="cssloaderOptions_308"></a>css.loaderOptions</h3>
<p>向 CSS 相关的 loader 传递选项。例如：</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  css<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    loaderOptions<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      css<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里的选项会传递给 css-loader</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      postcss<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 这里的选项会传递给 postcss-loader</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="devServer_326"></a>devServer</h3>
<p>有些值像 host、port 和 https 可能会被命令行参数覆写。</p>
<p>有些值像 publicPath 和 historyApiFallback 不应该被修改，因为它们需要和开发服务器的 publicPath 同步以保障正常的工作。</p>
<h3><a id="devServerproxy_331"></a>devServer.proxy</h3>
<p>如果你的<code>前端应用</code>和<code>后端 API 服务器</code>没有运行在同一个主机上，你需要在开发环境下将 API 请求代理到 API 服务器。这个问题可以通过 vue.config.js 中的 devServer.proxy 选项来配置。</p>
<p>devServer.proxy 可以是一个指向开发环境 API 服务器的字符串：</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    proxy<span class="token punctuation">:</span> <span class="token string">'http://localhost:4000'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>更多的代理控制行为，也可以使用一个 path: options 成对的对象</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        target<span class="token punctuation">:</span> <span class="token string">'&lt;url&gt;'</span><span class="token punctuation">,</span>
        ws<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string">'/foo'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        target<span class="token punctuation">:</span> <span class="token string">'&lt;other_url&gt;'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="pluginOptions_363"></a>pluginOptions</h3>
<p>这是一个不进行任何 schema 验证的对象，因此它可以用来传递任何第三方插件选项。例如：</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  pluginOptions<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    foo<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 插件可以作为 `options.pluginOptions.foo` 访问这些选项。</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="Babel_376"></a>Babel</h3>
<p>Babel 可以通过 babel.config.js 进行配置。</p>
<h3><a id="ESLint_379"></a>ESLint</h3>
<p>ESLint 可以通过 .eslintrc 或 package.json 中的 eslintConfig 字段来配置。</p>
<h3><a id="TypeScript_382"></a>TypeScript</h3>
<p>TypeScript 可以通过 tsconfig.json 来配置。</p>
<hr/>
<h2><a id="2_387"></a><mark>2.实例演示</mark></h2>
<p>vue.config.js</p>
<p>（基本讲解在注释，详细讲解在实例下）</p>
<pre><code class="prism language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  lintOnSave<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ------------------------ 设置在开发环境下每次保存代码都启用eslint验证</span>
  productionSourceMap<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// -------------- 设置生产环境的 source map 开启与关闭</span>
  css<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// ----------------------------------- 全局引入公共样式文件</span>
    loaderOptions<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      sass<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        data<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`@import "@src/css/base.scss";`</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  chainWebpack<span class="token punctuation">:</span> <span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// -------------- webpack 配置</span>
    config<span class="token punctuation">.</span><span class="token function">externals</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token comment">// --------------------- 忽略打包的文件</span>
      <span class="token string">'vue'</span><span class="token punctuation">:</span> <span class="token string">'Vue'</span><span class="token punctuation">,</span>
      <span class="token string">'vue-router'</span><span class="token punctuation">:</span> <span class="token string">'VueRouter'</span><span class="token punctuation">,</span>
      <span class="token string">'vuex'</span><span class="token punctuation">:</span> <span class="token string">'Vuex'</span><span class="token punctuation">,</span>
      <span class="token string">'axios'</span><span class="token punctuation">:</span> <span class="token string">'axios'</span><span class="token punctuation">,</span>
      <span class="token string">'element-ui'</span><span class="token punctuation">:</span> <span class="token string">'ELEMENT'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> entry <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span> <span class="token comment">// ------ 入口起点</span>
    entry
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'babel-polyfill'</span><span class="token punctuation">)</span> <span class="token comment">// --------------- 添加插件，用于实现浏览器不支持原生功能的代码，例如对于一些不支持ES6的浏览器</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    entry
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'classlist-polyfill'</span><span class="token punctuation">)</span> <span class="token comment">// ----------- 解决部分浏览器不支持一些方法，添加以后达到能支持的效果，例如element.classlist.add()方法在ie9中是不支持</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    entry
      <span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'@/mock'</span><span class="token punctuation">)</span> <span class="token comment">// ----------------------- 添加mock</span>
      <span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// ----------------------------- 代理</span>
    <span class="token comment">// 端口配置</span>
    port<span class="token punctuation">:</span> <span class="token number">1888</span><span class="token punctuation">,</span>
    <span class="token comment">// 反向代理配置</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        target<span class="token punctuation">:</span> <span class="token string">'https://saber.bladex.vip'</span><span class="token punctuation">,</span>
        ws<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// ------------------------- 代理 websockets</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//  ------------------- 重写</span>
          <span class="token string">'^/api'</span><span class="token punctuation">:</span> <span class="token string">'/'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="_439"></a>配置难点解析：</h3>
<ul><li>lintOnSave：是否在开发环境下每次保存代码时都启用 eslint验证</li></ul>
<pre><code class="prism language-bash">false：   关闭每次保存都进行检测
true：    开启每次保存都进行检测，效果与warning一样
warning： 开启每次保存都进行检测，lint 错误将显示到控制台命令行，而且编译并不会失败。
error：   开启每次保存都进行检测，lint 错误将显示到浏览器页面上，且编译失败。
default： 同’error’
</code></pre>
<ul><li>productionSourceMap：设置生产环境的 source map 开启与关闭</li></ul>
<p>用法：</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  publicPath: <span class="token string">'./'</span>, // 基本路径
  outputDir: <span class="token string">'dist'</span>, // 输出文件目录
  assetsDir: <span class="token string">'./assets'</span>,
  indexPath: <span class="token string">'index.html'</span>,
  filenameHashing: true, // 生成的静态资源在它们的文件名中包含了 <span class="token function">hash</span> 以便更好的控制缓存
  lintOnSave: false, // eslint-loader 是否在保存的时候检查
  productionSourceMap: true, // 生产环境是否生成 sourceMap 文件
<span class="token punctuation">}</span>
</code></pre>
<p>什么是 source map?</p>
<p>source map 直译过来就是资源地图。所以，source map的作用就是定位。source map定位的时浏览器控制台输出语句在项目文件的位置。</p>
<p>例如：</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c34ac3a52b294e68ba3697f23f62cabb.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5riF6aOO57uG6ZuoX-ael-acqOacqA==,size_14,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>打包后：</p>
<p>没有开启 productionSourceMap的：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/74e20e43217e4f0a8a014530f78f81fd.png"/></p>
<p>打开的：</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e73bcd41b9434dc9b3aa6893d3aa9af4.png"/><br/> 可以看出，开启productionSourceMap后，浏览器控制台明确的告诉我们test这条结果的输出语句在main.js的20行。这就是source map的作用，对于开发人员差错时非常有用的。</p>
<p>下面看一下开启/关闭productionSourceMap 打包出来的项目文件对比：</p>
<p>打开的：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d2dfda1f347c43388a605ce1fba084af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5riF6aOO57uG6ZuoX-ael-acqOacqA==,size_8,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>关闭的：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b1787671c3884890b01c11fe4f292686.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5riF6aOO57uG6ZuoX-ael-acqOacqA==,size_7,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>可以看出，开启productionSourceMap后，打包生成的 js 文件都有一个 .map 文件。这里要注意，只有 js 才有 .map 文件。</p>
<p>到此基本配置讲解结束。</p>
<h2><a id="_496"></a>开发环境和生产环境切换写法</h2>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  configureWebpack: config <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      // 为生产环境修改配置<span class="token punctuation">..</span>.
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      // 为开发环境修改配置<span class="token punctuation">..</span>.
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="configureWebpack__chainWebpack_509"></a>configureWebpack 与 chainWebpack的区别</h2>
<blockquote>
<p>博客园：<a href="https://www.cnblogs.com/zjianfei/p/15141030.html">https://www.cnblogs.com/zjianfei/p/15141030.html</a></p>
</blockquote>
<p><code>configureWebpack</code>与<code>chainWebpack</code>的作用相同，唯一的区别就是他们修改webpack配置方式不同：</p>
<ul><li><code>chainWebpack</code>通过<strong>链式</strong>编程的形式，来修改默认的webpack配置</li><li><code>configureWebpack</code>通过操作<strong>对象</strong>的形式，来修改默认的webpack配置</li></ul>
<p>（1）chainWebpack方式：</p>
<blockquote>
<p><a href="https://www.cnblogs.com/chuanmin/p/15838988.html">https://www.cnblogs.com/chuanmin/p/15838988.html</a></p>
</blockquote>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  chainWebpack: config <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    config.module
    .rule<span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span>
    .use<span class="token punctuation">(</span><span class="token string">'vue-loader'</span><span class="token punctuation">)</span>
    .tap<span class="token punctuation">(</span>options <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
      // 修改他的选项
      <span class="token keyword">return</span> options
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>（2）以下都是<code>configureWebpack</code> 配置方式：</p>
<p>configureWebpack <strong>对象形式</strong>：</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	configureWebpack:<span class="token punctuation">{<!-- --></span>
	   resolve: <span class="token punctuation">{<!-- --></span>
	       // 别名配置
	        alias: <span class="token punctuation">{<!-- --></span>
	          <span class="token string">'assets'</span><span class="token keyword">:</span> <span class="token string">'@/assets'</span>,
	          <span class="token string">'common'</span><span class="token keyword">:</span> <span class="token string">'@/common'</span>,
	          <span class="token string">'components'</span><span class="token keyword">:</span> <span class="token string">'@/components'</span>,
	          <span class="token string">'network'</span><span class="token keyword">:</span> <span class="token string">'@/network'</span>,
	          <span class="token string">'configs'</span><span class="token keyword">:</span> <span class="token string">'@/configs'</span>,
	          <span class="token string">'views'</span><span class="token keyword">:</span> <span class="token string">'@/views'</span>,
	          <span class="token string">'plugins'</span><span class="token keyword">:</span> <span class="token string">'@/plugins'</span>,
	         <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>configureWebpack <strong>函数形式</strong>：</p>
<pre><code class="prism language-bash">module.exports <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	configureWebpack:<span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>process.env.NODE_ENV <span class="token operator">==</span><span class="token operator">=</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        // 为生产环境修改配置<span class="token punctuation">..</span>.
	        config.mode <span class="token operator">=</span> <span class="token string">'production'</span>
	    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	        // 为开发环境修改配置<span class="token punctuation">..</span>.
	        config.mode <span class="token operator">=</span> <span class="token string">'development'</span>
	    <span class="token punctuation">}</span>
	    // 开发生产共同配置别名
	    Object.assign<span class="token punctuation">(</span>config.resolve, <span class="token punctuation">{<!-- --></span>
	        alias: <span class="token punctuation">{<!-- --></span>
	            <span class="token string">'@'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src'</span><span class="token punctuation">)</span>,
	            <span class="token string">'assets'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/assets'</span><span class="token punctuation">)</span>,
	            <span class="token string">'common'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/common'</span><span class="token punctuation">)</span>,
	            <span class="token string">'components'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/components'</span><span class="token punctuation">)</span>,
	            <span class="token string">'network'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/network'</span><span class="token punctuation">)</span>,
	            <span class="token string">'configs'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/configs'</span><span class="token punctuation">)</span>,
	            <span class="token string">'views'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/views'</span><span class="token punctuation">)</span>,
	            <span class="token string">'plugins'</span><span class="token keyword">:</span> path.resolve<span class="token punctuation">(</span>__dirname, <span class="token string">'./src/plugins'</span><span class="token punctuation">)</span>,
	        <span class="token punctuation">}</span>
	    <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<hr/>
<h2><a id="processenvNODE_ENV_588"></a>process.env.NODE_ENV详解</h2>
<blockquote>
<p>参考：<a href="https://www.jianshu.com/p/f4638f5df1c7">https://www.jianshu.com/p/f4638f5df1c7</a></p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>