<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="STLunordered_map_0"></a>STL：unordered_map使用笔记</h1>
<p>参考网址：</p>
<ul><li><a href="http://www.cplusplus.com/reference/unordered_map/unordered_map/?kw=unordered_map">cpluscplus</a></li><li><a href="https://blog.csdn.net/jpc20144055069/article/details/108170073">unordered_map与map的区别（CSDN）</a></li></ul>
<h2><a id="1_7"></a>1.概述</h2>
<p>unordered_map的模板定义如下：</p>
<pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span> <span class="token keyword">class</span> <span class="token class-name">Key</span><span class="token punctuation">,</span>                                    <span class="token comment">// unordered_map::key_type</span>
           <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span>                                      <span class="token comment">// unordered_map::mapped_type</span>
           <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> hash<span class="token operator">&lt;</span>Key<span class="token operator">&gt;</span><span class="token punctuation">,</span>                       <span class="token comment">// unordered_map::hasher</span>
           <span class="token keyword">class</span> <span class="token class-name">Pred</span> <span class="token operator">=</span> equal_to<span class="token operator">&lt;</span>Key<span class="token operator">&gt;</span><span class="token punctuation">,</span>                   <span class="token comment">// unordered_map::key_equal</span>
           <span class="token keyword">class</span> <span class="token class-name">Alloc</span> <span class="token operator">=</span> allocator<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> Key<span class="token punctuation">,</span>T<span class="token operator">&gt;</span> <span class="token operator">&gt;</span>  <span class="token comment">// unordered_map::allocator_type</span>
           <span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">unordered_map</span><span class="token punctuation">;</span>
</code></pre>
<p>unordered_map是一种关联容器，存储基于键值和映射组成的元素，即key-value。允许基于键快速查找元素。在unordered_map中，键值唯一标识元素，映射的值是一个与该对象关联的内容的对象。</p>
<p>对于有序和无序性：</p>
<ul><li>unordered_map的无序体现在内部存储结构为<strong>哈希表</strong>，以便通过键值快速访问元素。</li><li>与之对应的有序的关联容器为map，map的有序体现在内部存储结构为<strong>红黑树</strong>，存储时元素自动按照从小到大的顺序排列。</li></ul>
<p>而内部存储结构也决定了unordered_map和map在某些特性上的不同：</p>
<ul><li>查找的效率 
  <ul><li>unordered_map查找效率更高，可以达到<code>O(1)</code>，但是对于元素子集的范围迭代效率较低。</li><li>对于map，按照中序遍历的遍历次序，能够方便迭代得出从小到大的元素</li></ul> </li></ul>
<p>无序映射实现了直接访问操作符(operator[])，该操作符允许使用其键值作为参数直接访问映射值。容器中的迭代器至少是前向迭代器<a href="http://www.cplusplus.com/ForwardIterator">forward iterators</a>。</p>
<h2><a id="2_35"></a>2.属性</h2>
<h3><a id="21__37"></a>2.1 关联性</h3>
<p>关联容器中的元素由他们的键引用，而不是由他们在容器中的绝对位置引用。</p>
<h3><a id="22__41"></a>2.2 无序性</h3>
<p>无序容器使用散列表来组织它们的元素，散列表允许通过它们的键快速访问元素。</p>
<h3><a id="23_Map_45"></a>2.3 Map映射</h3>
<p>每个元素将一个键key与一个映射值value相关联：键意味着标识其主要内容是映射值的元素。</p>
<h3><a id="24_key_49"></a>2.4 key的唯一性</h3>
<p>在容器中没有两个元素有相同的key</p>
<h3><a id="25_Allocatoraware_53"></a>2.5 Allocator-aware</h3>
<p>容器使用一个分配器对象来动态地处理它的存储需求。</p>
<h2><a id="3_57"></a>3.模板参数</h2>
<pre><code class="prism language-cpp"><span class="token keyword">template</span> <span class="token operator">&lt;</span> <span class="token keyword">class</span> <span class="token class-name">Key</span><span class="token punctuation">,</span>                                    <span class="token comment">// unordered_map::key_type</span>
           <span class="token keyword">class</span> <span class="token class-name">T</span><span class="token punctuation">,</span>                                      <span class="token comment">// unordered_map::mapped_type</span>
           <span class="token keyword">class</span> <span class="token class-name">Hash</span> <span class="token operator">=</span> hash<span class="token operator">&lt;</span>Key<span class="token operator">&gt;</span><span class="token punctuation">,</span>                       <span class="token comment">// unordered_map::hasher</span>
           <span class="token keyword">class</span> <span class="token class-name">Pred</span> <span class="token operator">=</span> equal_to<span class="token operator">&lt;</span>Key<span class="token operator">&gt;</span><span class="token punctuation">,</span>                   <span class="token comment">// unordered_map::key_equal</span>
           <span class="token keyword">class</span> <span class="token class-name">Alloc</span> <span class="token operator">=</span> allocator<span class="token operator">&lt;</span> pair<span class="token operator">&lt;</span><span class="token keyword">const</span> Key<span class="token punctuation">,</span>T<span class="token operator">&gt;</span> <span class="token operator">&gt;</span>  <span class="token comment">// unordered_map::allocator_type</span>
           <span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">unordered_map</span><span class="token punctuation">;</span>
</code></pre>
<ul><li> <p>key</p> <p>键值的类型。unordered_map中的每个元素都是由其键值唯一标识的。</p> </li><li> <p>T</p> <p>映射值的类型。unordered_map中的每个元素都用来存储一些数据作为其映射值。</p> </li><li> <p>Hash</p> <p>一种一元函数对象类型，它接受一个key类型的对象作为参数，并根据该对象返回size_t类型的唯一值。这可以是一个实现函数调用操作符的类，也可以是一个指向函数的指针(参见构造函数)。默认为<code>hash&lt;Key&gt;</code>。</p> </li><li> <p>Pred</p> <p>接受两个键类型参数并返回bool类型的二进制谓词。表达式pred (a, b), pred是这种类型的一个对象,a和b是键值,返回true,如果是应考虑相当于b。这可以是一个类实现一个函数调用操作符或指向函数的指针(见构造函数为例)。这默认为equal_to&lt;Key&gt;，它返回与应用相等操作符(a==b)相同的结果。</p> </li><li> <p>Allloc</p> <p>用于定义存储分配模型的allocator对象的类型。默认情况下，使用allocator类模板，它定义了最简单的内存分配模型，并且与值无关。</p> </li></ul>
<h2><a id="4_88"></a>4.成员函数</h2>
<h3><a id="41__90"></a>4.1 构造函数与初始化</h3>
<p>（1）模板类的默认构造函数，创建空的unordered_map</p>
<pre><code class="prism language-cpp">unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> umap<span class="token punctuation">;</span>
</code></pre>
<p>（2）使用初始化列表初始化</p>
<pre><code class="prism language-cpp">unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> umap <span class="token operator">=</span> unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"a"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 显式调用C++的构造函数</span>
unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> <span class="token function">umap2</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">"c"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">"d"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 隐式调用构造函数，更简洁</span>
unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> umap<span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"淘宝"</span><span class="token punctuation">,</span><span class="token string">"https://www.taobao.com/"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"京东"</span><span class="token punctuation">,</span><span class="token string">"https://www.jd.com/"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"天猫商城"</span><span class="token punctuation">,</span><span class="token string">"https://jx.tmall.com/"</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>（3）拷贝构造函数初始化</p>
<pre><code class="prism language-cpp"><span class="token comment">// 拷贝构造函数 </span>
unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> <span class="token function">umap4</span><span class="token punctuation">(</span>umap3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>（4）迭代器初始化</p>
<pre><code class="prism language-cpp"><span class="token comment">// range</span>
unordered_map<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> string<span class="token operator">&gt;</span> <span class="token function">umap5</span><span class="token punctuation">(</span>umap1<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> umap1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>（5）拷贝初始化</p>
<pre><code class="prism language-cpp"><span class="token keyword">typedef</span> std<span class="token operator">::</span>unordered_map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span> stringmap<span class="token punctuation">;</span>
first <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"AAPL"</span><span class="token punctuation">,</span><span class="token string">"Apple"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"MSFT"</span><span class="token punctuation">,</span><span class="token string">"Microsoft"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// init list</span>
second <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"GOOG"</span><span class="token punctuation">,</span><span class="token string">"Google"</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"ORCL"</span><span class="token punctuation">,</span><span class="token string">"Oracle"</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// init list</span>
third <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>first<span class="token punctuation">,</span>second<span class="token punctuation">)</span><span class="token punctuation">;</span>                      <span class="token comment">// move</span>
first <span class="token operator">=</span> third<span class="token punctuation">;</span>                                    <span class="token comment">// copy	</span>
</code></pre>
<h3><a id="42_capacity_133"></a>4.2 capacity</h3>
<p>（1）是否为空</p>
<pre><code class="prism language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token string">"first "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>first<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"is empty"</span> <span class="token operator">:</span> <span class="token string">"is not empty"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token string">"first "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>second<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">"is empty"</span> <span class="token operator">:</span> <span class="token string">"is not empty"</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre>
<p>（2）目前容量</p>
<pre><code class="prism language-cpp">cout <span class="token operator">&lt;&lt;</span> <span class="token string">"thrid.size is"</span> <span class="token operator">&lt;&lt;</span> third<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre>
<h3><a id="43__148"></a>4.3 迭代</h3>
<pre><code class="prism language-cpp"><span class="token comment">/**  Iteration **/</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> first<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> first<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
</code></pre>
<h3><a id="44__158"></a>4.4 元素的访问</h3>
<p>（1）operator[]</p>
<pre><code class="prism language-cpp">first<span class="token punctuation">[</span><span class="token string">"GOOG"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Google"</span><span class="token punctuation">;</span>		<span class="token comment">// new element inserted</span>
first<span class="token punctuation">[</span><span class="token string">"AAPL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Apple"</span><span class="token punctuation">;</span>		<span class="token comment">// new element inserted</span>
first<span class="token punctuation">[</span><span class="token string">"MSFT"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Microsoft"</span><span class="token punctuation">;</span>	<span class="token comment">// new element inserted</span>
first<span class="token punctuation">[</span><span class="token string">"BOB"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Bob"</span><span class="token punctuation">;</span>
string brand1 <span class="token operator">=</span> first<span class="token punctuation">[</span><span class="token string">"GOOG"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	<span class="token comment">// read</span>
first<span class="token punctuation">[</span><span class="token string">"BOB"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>				<span class="token comment">// writen</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> it <span class="token operator">=</span> first<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> first<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>second<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
cout<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
</code></pre>
<p>（2）at</p>
<pre><code class="prism language-cpp">unrdered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">int</span><span class="token operator">&gt;</span> mymap <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"Mars"</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"Saturn"</span><span class="token punctuation">,</span> <span class="token number">60000</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span><span class="token string">"Jupiter"</span><span class="token punctuation">,</span> <span class="token number">70000</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
mymap<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">"Mars"</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">3396</span><span class="token punctuation">;</span>
mymap<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">"Saturn"</span><span class="token punctuation">)</span> <span class="token operator">+=</span> <span class="token number">127</span><span class="token punctuation">;</span>
mymap<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">"Jupiter"</span><span class="token punctuation">)</span> <span class="token operator">=</span> mymap<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">"Saturn"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">9638</span><span class="token punctuation">;</span>
	
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span> mymap<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="45__191"></a>4.5 元素的查找</h3>
<h4><a id="1find_193"></a>（1）find</h4>
<p>find函数的原型如下：</p>
<pre><code class="prism language-cpp">iterator <span class="token function">find</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> k <span class="token punctuation">)</span><span class="token punctuation">;</span>
const_iterator <span class="token function">find</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> k <span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
</code></pre>
<p>find函数可以用来获取元素的迭代器：</p>
<pre><code class="prism language-cpp">std<span class="token operator">::</span>unordered_map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span> mymap1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	    <span class="token punctuation">{<!-- --></span><span class="token string">"mom"</span><span class="token punctuation">,</span><span class="token number">5.4</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	    <span class="token punctuation">{<!-- --></span><span class="token string">"dad"</span><span class="token punctuation">,</span><span class="token number">6.1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	    <span class="token punctuation">{<!-- --></span><span class="token string">"bro"</span><span class="token punctuation">,</span><span class="token number">5.9</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	
string person <span class="token operator">=</span> <span class="token string">"dad"</span><span class="token punctuation">;</span>
unordered_map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">::</span>const_iterator got <span class="token operator">=</span> mymap1<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>got <span class="token operator">==</span> mymap1<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"not found"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> got<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">" is "</span> <span class="token operator">&lt;&lt;</span> got<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre>
<p>注意迭代器的声明方式：</p>
<pre><code class="prism language-cpp">unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span><span class="token operator">::</span>const_iterator
</code></pre>
<h4><a id="2count_226"></a>（2）count</h4>
<p>成员函数count判断集合中有没有键值k，函数原型如下：</p>
<pre><code class="prism language-cpp">size_type <span class="token function">count</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> key_type<span class="token operator">&amp;</span> k <span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
</code></pre>
<p>其中<code>size_type</code>是一个整型变量，如果无序map中有key k，那么返回值为1，否则返回值为0。</p>
<h3><a id="46__236"></a>4.6 修改</h3>
<h4><a id="1_238"></a>（1）元素的插入</h4>
<ul><li> <p>operator[]</p> <p>使用操作符<code>map_name [key_name] = value</code>，实现对应key的value值的覆盖，若是key值是原来不存在的key，那么实现了新的元素的插入。</p> </li><li> <p><code>emplace()</code></p> <p>在unordered_map中插入一个新元素（如果其键是唯一的）。此新元素是使用 <em>args</em> 作为元素构造函数的参数来构造的。</p> <p>仅当容器中没有元素具有与要放置的元素等效的键（unordered_map中的键是唯一的）时<a href="http://www.cplusplus.com/unordered_map">，</a>才会进行插入。</p> <p>如果插入，这实际上会将容器大小增加一个。</p> <p>存在类似的成员函数 insert，它将现有对象复制或移动到容器中。</p> <pre><code class="prism language-cpp"><span class="token comment">// unordered_map::emplace</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;string&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unordered_map&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  std<span class="token operator">::</span>unordered_map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span> mymap<span class="token punctuation">;</span>

  mymap<span class="token punctuation">.</span><span class="token function">emplace</span> <span class="token punctuation">(</span><span class="token string">"NCC-1701"</span><span class="token punctuation">,</span> <span class="token string">"J.T. Kirk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mymap<span class="token punctuation">.</span><span class="token function">emplace</span> <span class="token punctuation">(</span><span class="token string">"NCC-1701-D"</span><span class="token punctuation">,</span> <span class="token string">"J.L. Picard"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  mymap<span class="token punctuation">.</span><span class="token function">emplace</span> <span class="token punctuation">(</span><span class="token string">"NCC-74656"</span><span class="token punctuation">,</span> <span class="token string">"K. Janeway"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"mymap contains:"</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span> mymap<span class="token punctuation">)</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">": "</span> <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p><code>insert()</code></p> <p>insert的插入和emplace的插入类似，只有当键是唯一时，才能进行插入，同时size增加。</p> <p>insert的插入形式比emplace更加灵活：</p> <pre><code class="prism language-cpp"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>	
pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span> <span class="token punctuation">(</span> <span class="token keyword">const</span> value_type<span class="token operator">&amp;</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>	
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">P</span><span class="token operator">&gt;</span>
    pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">insert</span> <span class="token punctuation">(</span> P<span class="token operator">&amp;&amp;</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>	
iterator <span class="token function">insert</span> <span class="token punctuation">(</span> const_iterator hint<span class="token punctuation">,</span> <span class="token keyword">const</span> value_type<span class="token operator">&amp;</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>	
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">P</span><span class="token operator">&gt;</span>
    iterator <span class="token function">insert</span> <span class="token punctuation">(</span> const_iterator hint<span class="token punctuation">,</span> P<span class="token operator">&amp;&amp;</span> val <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>	
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">InputIterator</span><span class="token operator">&gt;</span>
    <span class="token keyword">void</span> <span class="token function">insert</span> <span class="token punctuation">(</span> InputIterator first<span class="token punctuation">,</span> InputIterator last <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>	
<span class="token keyword">void</span> <span class="token function">insert</span> <span class="token punctuation">(</span> initializer_list<span class="token operator">&lt;</span>value_type<span class="token operator">&gt;</span> il <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <pre><code class="prism language-cpp"><span class="token comment">/** 元素的插入 **/</span>
<span class="token comment">// insert</span>
unordered_map<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span> myrecipe<span class="token punctuation">,</span> mypantry <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"milk"</span><span class="token punctuation">,</span><span class="token number">2.0</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"flour"</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">;</span>					
pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span><span class="token keyword">double</span><span class="token operator">&gt;</span> <span class="token function">myshopping</span> <span class="token punctuation">(</span><span class="token string">"baking powder"</span><span class="token punctuation">,</span><span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myrecipe<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>myshopping<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// copy insertion</span>
myrecipe<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>mypantry<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mypantry<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// range inseration</span>
myrecipe<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span><span class="token string">"sugar"</span><span class="token punctuation">,</span><span class="token number">0.8</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"salt"</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token string">"sugar"</span><span class="token punctuation">,</span><span class="token number">0.9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// initializer list inseration</span>

cout <span class="token operator">&lt;&lt;</span> <span class="token string">"myrecipe contains："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x<span class="token operator">:</span>myrecipe<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <p><img alt="image-20220204200919401" src="https://img-blog.csdnimg.cn/img_convert/f75fde3e79edf091b127bf9261b2ced6.png"/></p> </li></ul>
<h4><a id="2_318"></a>（2）元素的删除</h4>
<p>元素的删除使用<code>erase()</code>方法，删除的形式有多种：</p>
<blockquote>
<table><thead><tr><th align="right">by position (1)</th><th><code>iterator erase ( const_iterator position );</code></th></tr></thead><tbody><tr><td align="right">by key (2)</td><td><code>size_type erase ( const key_type&amp; k );</code></td></tr><tr><td align="right">range (3)</td><td><code>iterator erase ( const_iterator first, const_iterator last );</code></td></tr></tbody></table>
</blockquote>
<pre><code class="prism language-cpp"><span class="token comment">//erase</span>
std<span class="token operator">::</span>unordered_map<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token punctuation">,</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span> mymap3<span class="token punctuation">;</span>

<span class="token comment">// populating container:</span>
mymap3<span class="token punctuation">[</span><span class="token string">"U.S."</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Washington"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"U.K."</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"London"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"France"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Paris"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"Russia"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Moscow"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"China"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Beijing"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"Germany"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Berlin"</span><span class="token punctuation">;</span>
mymap3<span class="token punctuation">[</span><span class="token string">"Japan"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"Tokyo"</span><span class="token punctuation">;</span>

cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token string">"------------------------------------------"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token comment">// 根据位置，删除第一个：</span>
mymap3<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>mymap3<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 根据key</span>
mymap3<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token string">"France"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// range</span>
mymap3<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span>mymap3<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">"Germany"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> mymap3<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> x <span class="token operator">:</span> mymap3<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">"："</span> <span class="token operator">&lt;&lt;</span> x<span class="token punctuation">.</span>second <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>