<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p>最近有位网友私信我咨询一个SpringBoot项目打包的问题。</p>
<p></p>
<p class="img-center"><img alt="" src="image\ceee5ca1fbb0a80bcbc7d421d76f5bd8.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>这位朋友说网络上有很多重复、不可用的技术文章，这个倒是事实，更糟糕的一些自媒体为了流量抄来抄去，增加我们查找解决方案的时间成本，我也尝试去搜索了一下“SpringBoot打包”，结果不尽人意，所以，总结了这篇打包解决方案。</p>
<p>基于SpringBoot开发的项目代码可以打包成可执行jar，也可以打包成war，这个视不同需求而定，下面以SpringBoot2.4.0版本为例，分别列举了不同使用方式下的jar和war打包操作。</p>
<h2></h2>
<p>构建可执行jar包</p>
<p>SpringBoot推荐将应用系统构建成可执行jar包，使用内置应用服务器运行项目代码。</p>
<p>继承 spring-boot-starter-parent</p>
<p>如果项目配置了pom继承spring-boot-starter-parent，就像下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\e0099589eff7a99a140a30dde1b242c0.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>此时要把项目代码打包成jar，需要在pom中配置packaging=jar，就是下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\af05a9fba6d9059fc6819e1b576927d0.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>接着，使用finalName标签配置最终jar包的名字，然后配置spring-boot-maven-plugin插件，例如如下配置：</p>
<p></p>
<p class="img-center"><img alt="" src="image\af2e71b90cf8f35721a21fba557a90a0.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>以上就是pom中的配置了，接下来执行jar打包操作，如果使用IDEA图形化工具打包，双击执行Maven窗口下Lifecycle中的package，即执行打jar包。</p>
<p></p>
<p class="img-center"><img alt="" src="https://img-blog.csdnimg.cn/img_convert/74bc98258226a156ff66cef5d88527d3.jpeg"/></p>
<p>​</p>
<p></p>
<p></p>
<p>如果想通过执行mvn指令打jar，需要cd到源码根目录，即pom.xml所在的目录，然后执行mvn clean package，即执行打jar包。</p>
<p>不继承 spring-boot-starter-parent</p>
<p>如果项目pom文件没有继承spring-boot-starter-parent，要想将项目代码构建成可执行jar包，同样需要在pom中配置packaging=jar，就是下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\c7cd68803073fd4f038d25372e2f84c3.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>接着，使用finalName标签配置最终jar包的名字，然后配置spring-boot-maven-plugin插件，这里不一样的是需要配置goal=repackage，例如如下配置：</p>
<p></p>
<p class="img-center"><img alt="" src="image\91fc6168d9b917b66b6b1d9deedf71fe.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>以上就是pom中的配置了，接下来执行jar打包操作，如果使用IDEA图形化工具打包，双击执行Maven窗口下Lifecycle中的package，即执行打jar包；如果想通过执行mvn指令打jar，需要cd到源码根目录，即pom.xml所在的目录，然后执行mvn clean package，即执行打jar包。</p>
<h2></h2>
<p>构建可部署war包</p>
<p>如果需要将项目代码构建成war包，可参考如下两个不同的方式。不过需要注意，对于web应用，SpringBoot2.4使用Servlet3，所以war包需要部署在支持Servlet3的应用服务器上，例如tomcat8.0及以上版本。</p>
<p>继承 spring-boot-starter-parent</p>
<p>如果配置了项目pom继承spring-boot-starter-parent，就像下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\fe4bb510ea812ba17a789dd736d40bdb.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>此时要把项目代码打包成jar，需要在pom中配置packaging=war，就是下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\0a597b1371f7ac671fff7a411c9c0adc.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>接着，使用finalName标签配置最终war包的名字，然后配置spring-boot-maven-plugin插件，例如如下配置：</p>
<p></p>
<p class="img-center"><img alt="" src="image\806d8574fab2eeb29ace1361c7d7e978.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>以上就是pom中的配置了，接下来执行war打包操作，如果使用IDEA图形化工具打包，双击执行Maven窗口下Lifecycle中的package，即执行打war包；如果想通过执行mvn指令打war，需要cd到源码根目录，即pom.xml所在的目录，然后执行mvn clean package，即执行打war包。</p>
<p>不继承 spring-boot-starter-parent</p>
<p>如果项目pom文件没有继承spring-boot-starter-parent，要想将项目代码构建成war包，同样需要在pom中配置packaging=war，就是下面这样：</p>
<p></p>
<p class="img-center"><img alt="" src="image\766b6ad734203fc07af191889be68cbd.png"/></p>
<p>​</p>
<p></p>
<p></p>
<p>接着，使用finalName标签配置最终war包的名字，然后配置构建war包需要使用到的插件，spring-boot-maven-plugin中同样需要配置goal=repackage，例如如下配置：</p>
<pre>
</pre>
<pre>
</pre>
<pre><code> &lt;build&gt;
	&lt;finalName&gt;demo&lt;/finalName&gt;
	&lt;plugins&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;
			&lt;version&gt;1.8&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.3.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.1.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.8.1&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.1.2&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.8.2&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.0.0-M3&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.22.2&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-help-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.5.2&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-invoker-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.1&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.0&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.4&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.2.1&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.22.2&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
			&lt;version&gt;3.3.1&lt;/version&gt;
		&lt;/plugin&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.4.0&lt;/version&gt;
			&lt;executions&gt;
				&lt;execution&gt;
					&lt;goals&gt;
						&lt;goal&gt;repackage&lt;/goal&gt;
					&lt;/goals&gt;
				&lt;/execution&gt;
			&lt;/executions&gt;
		&lt;/plugin&gt;
	&lt;/plugins&gt;
&lt;/build&gt;</code></pre>
<p>以上配置中的插件版本号参考自SpringBoot2.4.0中的 spring-boot-dependencies-2.4.0.pom，它是spring-boot-starter-parent的父文件。</p>
<p>以上就是pom中的配置了，接下来执行war打包操作，如果使用IDEA图形化工具打包，双击执行Maven窗口下Lifecycle中的package，即执行打war包；如果想通过执行mvn指令打war，需要cd到源码根目录，即pom.xml所在的目录，然后执行mvn clean package，即执行打war包。</p>
<h2></h2>
<p>小结</p>
<p>从上述操作可以看到，是否继承spring-boot-starter-parent，打包配置还是有些不同的。因为spring-boot-starter-parent pom.xml中已经帮我们管理好了打包需要用到的spring-boot-maven-plugin插件和它需要依赖的其它插件，所以通过继承可以直接使用spring-boot-maven-plugin。有时，我们的项目有自己的parent pom.xml，此时没有继承spring-boot-starter-parent，那么如果还要想使用spring-boot-maven-plugin插件，就需要自定义管理它所依赖的maven插件。</p>
</div>
</div>