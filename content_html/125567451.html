<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°ğŸ‘é˜¿æè¯´è¯´ğŸ‘åšå®¢<br/> è¯¥ç¯‡æ–‡ç« ï¼Œç”±æµ…å…¥æ·±çš„ä»‹ç»äº†Spring Boot Admin çš„ç‰¹æ€§ä»¥åŠè‡ªå®šä¹‰äºŒæ¬¡å¼€å‘ï¼Œæƒ³è¦å¿«é€Ÿä½¿ç”¨ï¼Œè¯·ç‚¹å‡»ã€å¿«é€Ÿå¼€å§‹ã€‘ï¼Œæƒ³è¦æ·±å…¥äº†è§£çš„ç»§ç»­å¾€ä¸‹é˜…è¯»ã€‚</p>
</blockquote>
<p></p>
<div class="toc">
<h3>Spring Boot Adminå‚è€ƒæŒ‡å—</h3>
<ul><li><a href="#1Spring_Boot_Admin_6">1.ä»€ä¹ˆæ˜¯Spring Boot Admin</a></li><li><a href="#2_10">2.å¿«é€Ÿå¼€å§‹</a></li><li><ul><li><a href="#21_Spring_Boot_Admin_Server_11">2.1 è®¾ç½®Spring Boot Admin Server</a></li><li><a href="#22__75">2.2 æ³¨å†Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åº</a></li><li><ul><li><a href="#221_Spring_Boot_Admin__77">2.2.1 Spring Boot Admin å®¢æˆ·ç«¯</a></li><li><a href="#222_Spring_Cloud_Discovery_113">2.2.2 Spring Cloud Discovery</a></li><li><a href="#223_PyctuatorPython_183">2.2.3 ä½¿ç”¨Pyctuatoræ³¨å†ŒPythonåº”ç”¨</a></li></ul>
</li></ul>
</li><li><a href="#3_219">3.å®¢æˆ·ç«¯åº”ç”¨</a></li><li><ul><li><a href="#31_Application_220">3.1 åœ¨Applicationåˆ—è¡¨æ˜¾ç¤ºç‰ˆæœ¬</a></li><li><a href="#32_JMXBean__242">3.2 JMX-Bean ç®¡ç†</a></li><li><a href="#33__251">3.3 æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹å™¨</a></li><li><a href="#34__263">3.4 æ¯ä¸ªå®ä¾‹æ˜¾ç¤ºæ ‡ç­¾</a></li><li><a href="#35_Spring_Boot_Admin_Client_274">3.5 Spring Boot Admin Client</a></li></ul>
</li><li><a href="#4Spring_Boot_Admin_Server_308">4.Spring Boot Admin Server</a></li><li><ul><li><a href="#41__309">4.1 åœ¨åå‘ä»£ç†ä¸‹é¢è¿è¡Œ</a></li><li><a href="#42__311">4.2 å±æ€§é…ç½®é€‰é¡¹</a></li><li><a href="#43_Spring_Cloud_Discovery_346">4.3 Spring Cloud Discovery</a></li><li><ul><li><a href="#431_SimpleDiscoveryClient_348">4.3.1 SimpleDiscoveryClienté™æ€é…ç½®</a></li><li><a href="#432_DiscoveryClients_373">4.3.2 å…¶ä»–DiscoveryClients</a></li><li><a href="#433_ServiceInstances_375">4.3.3 è½¬æ¢ServiceInstances</a></li><li><a href="#434_CloudFoundry_405">4.3.4 CloudFoundry</a></li></ul>
</li><li><a href="#44__418">4.4 é›†ç¾¤</a></li><li><a href="#45__466">4.5 é€šçŸ¥</a></li><li><ul><li><a href="#451__467">4.5.1 é‚®ä»¶é€šçŸ¥</a></li><li><a href="#453_OpsGenie_1_499">4.5.3 OpsGenieé€šçŸ¥ [^1]</a></li><li><a href="#454_Hipchat__516">4.5.4 Hipchat é€šçŸ¥</a></li><li><a href="#455_Slack__530">4.5.5 Slack é€šçŸ¥</a></li><li><a href="#456_Lets_Chat__546">4.5.6 Let's Chat é€šçŸ¥</a></li><li><a href="#457_Microsoft_Teams_560">4.5.7 Microsoft Teamsé€šçŸ¥</a></li><li><a href="#458_Telegram__577">4.5.8 Telegram é€šçŸ¥</a></li><li><a href="#459_Discord_591">4.5.9 Discordé€šçŸ¥</a></li><li><a href="#4510__604">4.5.10 é€šçŸ¥ä»£ç†è®¾ç½®</a></li><li><a href="#4511__616">4.5.11 é€šçŸ¥æé†’</a></li><li><a href="#4512__641">4.5.12 è¿‡æ»¤é€šçŸ¥</a></li><li><a href="#4513__682">4.5.13 é’‰é’‰é€šçŸ¥</a></li></ul>
</li></ul>
</li><li><a href="#5__694">5. å®‰å…¨</a></li><li><ul><li><a href="#51_Spring_Boot_Admin_Server__695">5.1 Spring Boot Admin Server å®‰å…¨</a></li><li><a href="#52_Actuator_767">5.2 ä¿æŠ¤å®¢æˆ·ç«¯Actuatorç«¯ç‚¹</a></li><li><ul><li><a href="#521_SBA_777">5.2.1 SBAå®¢æˆ·ç«¯</a></li><li><a href="#522_SBA_788">5.2.2 SBAæœåŠ¡ç«¯</a></li><li><a href="#523_Eureka_815">5.2.3 Eureka</a></li><li><a href="#524_Consul_825">5.2.4 Consul</a></li><li><a href="#525_Actuator_CSRF_836">5.2.5 Actuatorç«¯ç‚¹ä¸Šçš„ CSRF</a></li></ul>
</li><li><a href="#53_Mutual_TLS_848">5.3 ä½¿ç”¨Mutual TLS</a></li></ul>
</li><li><a href="#6__862">6 è‡ªå®šä¹‰</a></li><li><ul><li><a href="#61__863">6.1 è‡ªå®šä¹‰é€šçŸ¥</a></li><li><a href="#62_HTTP_891">6.2 æ³¨å…¥è‡ªå®šä¹‰HTTPå¤´</a></li><li><a href="#63__903">6.3 æ‹¦æˆªè¯·æ±‚å’Œå“åº”</a></li><li><a href="#64__916">6.4 é“¾æ¥/åµŒå…¥å¤–éƒ¨é¡µé¢</a></li><li><a href="#65__930">6.5 è‡ªå®šä¹‰è§†å›¾</a></li><li><ul><li><a href="#651__947">6.5.1 æ·»åŠ é¡¶å±‚è§†å›¾</a></li><li><a href="#652__996">6.5.2 å¯è§†åŒ–è‡ªå®šä¹‰ç«¯ç‚¹</a></li></ul>
</li><li><a href="#66_Logo_1068">6.6 è‡ªå®šä¹‰å¤´éƒ¨Logoå’Œæ ‡é¢˜</a></li><li><a href="#67_Logo_1074">6.7 è‡ªå®šä¹‰ç™»å½•Logo</a></li><li><a href="#68_Favicon_1080">6.8 è‡ªå®šä¹‰Favicon</a></li><li><a href="#69__1089">6.9 è‡ªå®šä¹‰å¯ç”¨è¯­è¨€</a></li><li><a href="#_1093">æ˜¾ç¤º/éšè—è§†å›¾</a></li></ul>
</li><li><a href="#7_Spring_Boot_15x_1104">7. ç›‘æ§Spring Boot 1.5.x</a></li></ul>
</div>
<p></p>
<blockquote>
<p>Spring Boot Admin 2.5.1<br/> Johannes Edmeier @joshiste Version 2.5.1,23.08.2021</p>
</blockquote>
<h1><a id="1Spring_Boot_Admin_6"></a>1.ä»€ä¹ˆæ˜¯Spring Boot Admin</h1>
<p>codecentric çš„Spring Boot Admin æ˜¯ä¸€ä¸ªç¤¾åŒºé¡¹ç›®ï¼Œèƒ½å¤Ÿç›‘æ§å’Œç®¡ç†æ‚¨çš„Spring Boot åº”ç”¨ã€‚è¿™äº›åº”ç”¨é€šè¿‡Httpæ³¨å†Œåˆ°Spring Boot Admin æˆ–è€…é€šè¿‡Spring Cloudçš„æ³¨å†Œä¸­å¿ƒ(å¦‚Eurekaã€Consul)æ¥å‘ç°ã€‚UIæ˜¯Spring Boot Actuatorç«¯ç‚¹ä¸Šçš„Vue.jsåº”ç”¨ã€‚</p>
<p>ä½¿ç”¨Pyctuatorå¯ä»¥æ”¯æŒç›‘æ§Pythonåº”ç”¨ç¨‹åºã€‚</p>
<h1><a id="2_10"></a>2.å¿«é€Ÿå¼€å§‹</h1>
<h2><a id="21_Spring_Boot_Admin_Server_11"></a>2.1 è®¾ç½®Spring Boot Admin Server</h2>
<p>é¦–å…ˆï¼Œéœ€è¦è®¾ç½®ä¸€ä¸‹æœåŠ¡ç«¯ï¼Œåªéœ€è¦é€šè¿‡<code>start.spring.io</code>åˆ›å»ºä¸€ä¸ªç®€å•çš„Spring Booté¡¹ç›®ã€‚ç”±äºSpring Boot Admin Serverèƒ½å¤Ÿåšä¸ºservletæˆ–webfluxåº”ç”¨è¿è¡Œï¼Œå› æ­¤æ‚¨éœ€è¦å†³å®šæ·»åŠ å¯¹åº”çš„Spring Boot Starterã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨servlet web starterã€‚</p>
<p>1.æ·»åŠ Spring Boot Adminå¯åŠ¨å™¨åˆ°ä¾èµ–<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>de.codecentric<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-admin-starter-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<blockquote>
<p>ğŸš©<br/> å¦‚æœè¦ä½¿ç”¨snapshotç‰ˆæœ¬çš„Spring boot Admin Serverï¼Œæ‚¨å¯èƒ½éœ€è¦æŠŠspring å’Œ sonatypeçš„å¿«ç…§ä»“åº“åŠ åˆ°pomä¸­<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://repo.spring.io/milestone<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-snapshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://repo.spring.io/snapshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>sonatype-nexus-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Sonatype Nexus Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://oss.sonatype.org/content/repositories/snapshots/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
</code></pre>
</blockquote>
<p>2.é€šè¿‡æ·»åŠ @EnableAdminServeré…ç½®å¼•å…¥Spring Boot Admin Serveré…ç½®</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@EnableAdminServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootAdminApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringBootAdminApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>ğŸš©<br/> å¦‚æœæƒ³è¦åœ¨waråŒ…ä¸­é…ç½®Spring Boot Admin Serverï¼Œå¹¶éƒ¨ç½²åœ¨servletå®¹å™¨ä¸­ï¼Œè¯·æŸ¥çœ‹ <a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-war/">spring-boot-admin-sample-war</a></p>
</blockquote>
<p>å¦å¤–å¯ä»¥å‚è€ƒ<a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-servlet/">spring-boot-admin-sample-servlet</a>é¡¹ç›®ï¼Œè¯¥é¡¹ç›®å¢åŠ äº†å®‰å…¨æ€§æ ¡éªŒ</p>
<h2><a id="22__75"></a>2.2 æ³¨å†Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åº</h2>
<p>è¦åœ¨Spring Boot Admin Serverï¼ˆåé¢ç®€ç§°SBAï¼‰ æ³¨å†Œæ‚¨çš„åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯ä»¥åŒ…å«SBAå®¢æˆ·ç«¯æˆ–ä½¿ç”¨Spring Cloud Discoveryï¼ˆå¦‚Eureka,Consulç­‰ï¼‰ï¼ŒSBAæœåŠ¡ç«¯ä¹Ÿæä¾›é™æ€é…ç½®é€‰é¡¹ã€‚</p>
<h3><a id="221_Spring_Boot_Admin__77"></a>2.2.1 Spring Boot Admin å®¢æˆ·ç«¯</h3>
<p>æ¯ä¸ªè¦æ³¨å†Œçš„åº”ç”¨ç¨‹åºéƒ½å¿…é¡»åŒ…å«Spring Boot Admin Clientï¼Œä¸ºäº†æ›´å¥½çš„ä¿æŠ¤ç«¯ç‚¹ï¼Œä¹Ÿå°†<code>spring-boot-starter-security</code>æ·»åŠ åˆ°ä¾èµ–ä¸­ã€‚</p>
<p>1.å°†spring-boot-admin-starter-client æ·»åŠ åˆ°ä¾èµ–ä¸­<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>de.codecentric<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-admin-starter-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>2.é…ç½®SBA Server çš„URLæ¥å¼€å¯SBA Client<br/> <em>application.properties</em></p>
<pre><code class="prism language-xml">#SBA Server æ³¨å†Œåœ°å€
spring.boot.admin.client.url=http://localhost:8080  
#å…¬å¼€æ‰€æœ‰ç«¯ç‚¹ï¼Œç”Ÿäº§ç¯å¢ƒåº”è¯¥ä»”ç»†é€‰æ‹©è¦å…¬å¼€çš„ç«¯ç‚¹
management.endpoints.web.exposure.include=*  
</code></pre>
<p>3.ä½¿actuatorç«¯ç‚¹å¯è®¿é—®</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SecurityPermitAllConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
        http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
            <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>permitAll</code>ä¸ºäº†ç®€æ´èµ·è§ï¼Œè¿™é‡Œç¦ç”¨äº†å®‰å…¨æ ¡éªŒã€‚æŸ¥çœ‹å®‰å…¨éƒ¨åˆ†äº†è§£å¦‚ä½•å¤„ç†å®‰å…¨ç«¯ç‚¹ã€‚</p>
<h3><a id="222_Spring_Cloud_Discovery_113"></a>2.2.2 Spring Cloud Discovery</h3>
<p>å¦‚æœæ‚¨å·²ç»ä½¿ç”¨äº†Spring Cloud Discoveryï¼Œé‚£ä¹ˆä¸éœ€è¦SBAå®¢æˆ·ç«¯ã€‚åªéœ€è¦å°†DiscoveryClientæ·»åŠ åˆ°Spring Boot Admin Serverä¸­ï¼Œå…¶ä½™éƒ¨åˆ†ç”±AutoConfigurationè‡ªåŠ¨å®Œæˆã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨äº†Eurekaï¼Œä½†ä¹Ÿæ”¯æŒå…¶ä»–å®ç°äº†Spring Cloud Discoveryçš„æ³¨å†Œä¸­å¿ƒã€‚ç‚¹å‡»é“¾æ¥æŸ¥çœ‹<a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-consul/">Consul</a>å’Œ<a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-zookeeper/">Zookeeper</a>çš„ä¾‹å­ã€‚</p>
<p>å…¶ä»–ï¼Œè¯·çœ‹<a href="http://projects.spring.io/spring-cloud/spring-cloud.html">Spring Cloud æ–‡æ¡£</a></p>
<p>1.æ·»åŠ spring-cloud-starter-eureka åˆ°ä¾èµ–ä¸­<br/> <em>pom.xml</em></p>
<pre><code class="prism language-java"><span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>cloud<span class="token operator">-</span>starter<span class="token operator">-</span>netflix<span class="token operator">-</span>eureka<span class="token operator">-</span>client<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre>
<p>2.æ·»åŠ <code>@EnableDiscoveryClient</code>é…ç½®æ¥å¼€å¯å‘ç°</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableScheduling</span>
<span class="token annotation punctuation">@EnableAdminServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringBootAdminApplication</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringBootAdminApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Configuration</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SecurityPermitAllConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{<!-- --></span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
            http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
                <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>permitAll</code>ä¸ºäº†ç®€æ´èµ·è§ï¼Œè¿™é‡Œç¦ç”¨äº†å®‰å…¨æ ¡éªŒã€‚æŸ¥çœ‹å®‰å…¨éƒ¨åˆ†äº†è§£å¦‚ä½•å¤„ç†å®‰å…¨ç«¯ç‚¹ã€‚</p>
<p>3.é…ç½®Eurekaå®¢æˆ·ç«¯<br/> <em>application.yml</em></p>
<pre><code class="prism language-yml"><span class="token comment">#é…ç½®eurekaå®¢æˆ·ç«¯</span>
<span class="token key atrule">eureka</span><span class="token punctuation">:</span>   
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">leaseRenewalIntervalInSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
    <span class="token key atrule">health-check-url-path</span><span class="token punctuation">:</span> /actuator/health
    <span class="token key atrule">metadata-map</span><span class="token punctuation">:</span>
      <span class="token key atrule">startup</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>random.int<span class="token punctuation">}</span>    <span class="token comment">#é‡æ–°å¯åŠ¨åéœ€è¦è§¦å‘ä¿¡æ¯å’Œç«¯ç‚¹çš„æ›´æ–°</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">registryFetchIntervalSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token key atrule">serviceUrl</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>EUREKA_SERVICE_URL<span class="token punctuation">:</span>http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8761</span><span class="token punctuation">}</span>/eureka/

<span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> "*"  <span class="token comment">#å…¬å¼€æ‰€æœ‰ç«¯ç‚¹ï¼Œç”Ÿäº§ç¯å¢ƒåº”è¯¥ä»”ç»†é€‰æ‹©è¦å…¬å¼€çš„ç«¯ç‚¹</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> ALWAYS
</code></pre>
<p>å…¶ä»–å‚è€ƒ <a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-eureka/">spring-boot-admin-sample-eureka</a>ç¤ºä¾‹ã€‚</p>
<blockquote>
<p>ğŸš©<br/> æ‚¨å¯ä»¥å°†SBA ServeråŒ…å«åœ¨Eurekaçš„æœåŠ¡ç«¯ä¸­ï¼ŒåŒä¸Šé¢çš„é…ç½®ï¼Œå¦å¤–è®¾ç½®<code>spring.boot.admin.context-path</code>ä¸ºä¸åŒçš„åœ°å€ï¼Œä»¥é¿å…SBA UI ä¸ä¼šä¸Eurekaçš„äº§ç”Ÿå†²çªã€‚</p>
</blockquote>
<blockquote>
<p>é˜¿æè¯´è¯´(itsaysay)ï¼ŒPMï¼š2022å¹´7æœˆ2æ—¥01:08:02</p>
</blockquote>
<h3><a id="223_PyctuatorPython_183"></a>2.2.3 ä½¿ç”¨Pyctuatoræ³¨å†ŒPythonåº”ç”¨</h3>
<p>æ‚¨å¯ä»¥è½»æ¾çš„ä½¿ç”¨Pyctuatorå°†SBAå’ŒFlaskæˆ–è€…FastAPIé›†æˆã€‚</p>
<p>ä¸‹é¢çš„æ­¥éª¤ä½¿ç”¨Flaskï¼Œä½†æ˜¯ä¹Ÿæ”¯æŒå…¶ä»–webæ¡†æ¶ã€‚è¯·æŸ¥çœ‹Pyctuatoræ–‡æ¡£æµè§ˆæ”¯æŒçš„æ¡†æ¶å’ŒåŠŸèƒ½åˆ—è¡¨ã€‚</p>
<p>1.å®‰è£…pyctuator</p>
<pre><code class="prism language-shell">pip <span class="token function">install</span> pyctuator
</code></pre>
<p>2.å¼€å¯pyctuator,å°†å…¶æŒ‡å‘Flaskåº”ç”¨ç¨‹åºï¼Œå¹¶é…ç½®Spring Boot Adminåœ°å€</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> os
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask
<span class="token keyword">from</span> pyctuator<span class="token punctuation">.</span>pyctuator <span class="token keyword">import</span> Pyctuator

app_name <span class="token operator">=</span> <span class="token string">"Flask App with Pyctuator"</span>
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>app_name<span class="token punctuation">)</span>


@app<span class="token punctuation">.</span>route<span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string">"Hello World!"</span>


Pyctuator<span class="token punctuation">(</span>
    app<span class="token punctuation">,</span>
    app_name<span class="token punctuation">,</span>
    app_url<span class="token operator">=</span><span class="token string">"http://example-app.com"</span><span class="token punctuation">,</span>
    pyctuator_endpoint_url<span class="token operator">=</span><span class="token string">"http://example-app.com/pyctuator"</span><span class="token punctuation">,</span>
    registration_url<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"SPRING_BOOT_ADMIN_URL"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>æ›´å¤šåŠŸèƒ½å’Œç¤ºä¾‹ï¼Œè¯·æŸ¥çœ‹<a href="https://github.com/SolarEdgeTech/pyctuator/blob/master/README.md">Pyctuatoræ–‡æ¡£</a>å’Œ<a href="https://github.com/SolarEdgeTech/pyctuator/tree/master/examples">ç¤ºä¾‹</a></p>
<h1><a id="3_219"></a>3.å®¢æˆ·ç«¯åº”ç”¨</h1>
<h2><a id="31_Application_220"></a>3.1 åœ¨Applicationåˆ—è¡¨æ˜¾ç¤ºç‰ˆæœ¬</h2>
<p>å¯¹äºSpring Bootåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ˜¾ç¤ºç‰ˆæœ¬æœ€ç®€å•çš„åŠæ³•æ˜¯ä½¿ç”¨<code>spring-boot-maven-plugin</code>ç”Ÿæˆ<code>build-info</code>æ–‡ä»¶<code>META-INF/build-info.properties</code>ã€‚å¦è¯·å‚è€ƒ<a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-build-info">Spring Bootå‚è€ƒæŒ‡å—</a></p>
<p>å¯¹äºéSpring Bootåº”ç”¨ç¨‹åºï¼Œæ‚¨ä¹Ÿå¯ä»¥æ·»åŠ versionæˆ–build.versionæ³¨å†Œå…ƒæ•°æ®ï¼Œç‰ˆæœ¬å°†æ˜¾ç¤ºåœ¨Applicationåˆ—è¡¨ä¸­ã€‚<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>build-info<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2><a id="32_JMXBean__242"></a>3.2 JMX-Bean ç®¡ç†</h2>
<p>è¦åœ¨admin UIä¸­ä½¿ç”¨JMX-beansï¼Œå¿…é¡»å°†Jolokiaå¼•å…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ã€‚ç”±äºJolokiaæ˜¯åŸºäºservletçš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒå“åº”å¼åº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨å·²ç»å¼•å…¥äº†<code>spring-boot-admin-starter-client</code>,å®ƒä¼šè¢«è‡ªåŠ¨å¼•å…¥ï¼Œå¦‚æœæ²¡æœ‰å°±éœ€è¦æ·»åŠ Jolokiaä¾èµ–ã€‚åœ¨Spring Boot 2.2.0ä¸­ï¼Œå¦‚æœæ‚¨æƒ³è¦é€šè¿‡JMXç®¡ç†Spring beans,æ‚¨éœ€è¦è®¾ç½®<code>spring.jmx.enabled=true</code>ã€‚<br/> <em>pom.mxl</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jolokia<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jolokia-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2><a id="33__251"></a>3.3 æ—¥å¿—æ–‡ä»¶æŸ¥çœ‹å™¨</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ—¥å¿—æ–‡ä»¶æ— æ³•é€šè¿‡actuatorç«¯ç‚¹è®¿é—®ã€‚ä¸ºäº†å¼€å¯æ—¥å¿—æ–‡ä»¶ç«¯ç‚¹ï¼Œæ‚¨éœ€è¦é…ç½®Spring Boot ä»¥ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼Œæ–¹æ³•æ˜¯è®¾ç½®<code>logging.file.path</code>æˆ–è€…<code>logging.file.name</code>ã€‚</p>
<p>SBAè¿˜æ”¯æŒANSIé¢œè‰²è½¬ä¹‰ï¼Œæ‚¨éœ€è¦è®¾ç½®è‡ªå®šä¹‰æ—¥å¿—æ–‡ä»¶ï¼ŒSBA æ—¥å¿—é»˜è®¤æ˜¯ä¸ä½¿ç”¨é¢œè‰²çš„ã€‚</p>
<p><em>application.properties</em></p>
<pre><code class="prism language-xml">#æ—¥å¿—å†™å…¥ç›®æ ‡æ–‡ä»¶
logging.file.name=/var/log/sample-boot-application.log 
#æ—¥å¿—æ–‡ä»¶ä½¿ç”¨ANSIé¢œè‰²è½¬ä¹‰
logging.pattern.file=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID}){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx
</code></pre>
<h2><a id="34__263"></a>3.4 æ¯ä¸ªå®ä¾‹æ˜¾ç¤ºæ ‡ç­¾</h2>
<p>Tagsæ˜¯ä¸€ç§ä¸ºæ¯ä¸ªå®ä¾‹æ·»åŠ å¯è§†æ ‡è®°çš„æ–¹æ³•ï¼Œå®ƒä»¬å°†å‡ºç°åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨ä»¥åŠå®ä¾‹è§†å›¾ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸å‘å®ä¾‹æ·»åŠ ä»»ä½•æ ‡è®°ï¼Œç”±å®¢æˆ·ç«¯é€šè¿‡å‘å…ƒæ•°æ®æˆ–ä¿¡æ¯ç«¯ç‚¹æ·»åŠ ä¿¡æ¯æ¥æŒ‡å®šæ‰€éœ€çš„æ ‡è®°ã€‚</p>
<p><em>application.properties</em></p>
<pre><code class="prism language-xml">#ä½¿ç”¨å…ƒæ•°æ®
spring.boot.admin.client.instance.metadata.tags.environment=test

#ä½¿ç”¨infoç«¯ç‚¹
info.tags.environment=test
</code></pre>
<h2><a id="35_Spring_Boot_Admin_Client_274"></a>3.5 Spring Boot Admin Client</h2>
<p>Spring Boot Admin Client ä¼šå‘Admin æœåŠ¡ç«¯æ³¨å†Œåº”ç”¨ç¨‹åºã€‚è¿™æ˜¯é€šè¿‡Clientå®šæœŸå‘AdminæœåŠ¡ç«¯å‘é€HTTP POSTè¯·æ±‚æ¥å®Œæˆçš„ã€‚</p>
<blockquote>
<p>ğŸš©<br/> SBAå®¢æˆ·ç«¯æ³¨å†Œåº”ç”¨ç¨‹åºæœ‰å¾ˆå¤šå±æ€§å¯ä»¥ä½¿ç”¨ï¼Œå¦‚æœè¿™ä¸ç¬¦åˆæ‚¨çš„éœ€æ±‚ï¼Œæ‚¨å¯ä»¥è‡ªå·±å®ç°ApplicationFactoryã€‚</p>
</blockquote>
<p><em>Table 1. Spring Boot Admin Client å±æ€§é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.client.enabled</td><td align="left">å¼€å¯ Spring Boot Admin å®¢æˆ·ç«¯</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.client.url</td><td align="left">è¦æ³¨å†Œçš„SBAæœåŠ¡ç«¯åœ°å€åˆ—è¡¨ï¼Œé€—å·åˆ†å‰²ã€‚è¿™ä¼šè§¦å‘<strong>å¼ºåˆ¶æ€§</strong>è‡ªåŠ¨é…ç½®</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.client.api-path</td><td align="left">ç®¡ç†AdminæœåŠ¡ç«¯ä¸Šæ³¨å†Œç«¯ç‚¹çš„HTTPè·¯å¾„</td><td align="left"><code>"instances"</code></td></tr><tr><td align="left">spring.boot.admin.client.username spring.boot.admin.client.password</td><td align="left">ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç ä¿æŠ¤SBAæœåŠ¡ç«¯çš„API</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.client.period</td><td align="left">é‡å¤æ³¨å†Œé—´éš”ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>10,000</code></td></tr><tr><td align="left">spring.boot.admin.client.connect-timeout</td><td align="left">æ³¨å†Œåº”ç”¨æ—¶çš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>5,000</code></td></tr><tr><td align="left">spring.boot.admin.client.read-timeout</td><td align="left">æ³¨å†Œåº”ç”¨æ—¶çš„è¯»å–è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>5,000</code></td></tr><tr><td align="left">spring.boot.admin.client.auto-registration</td><td align="left">ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºåœ¨åº”ç”¨ç¨‹åºå‡†å¤‡å°±ç»ªåé€šè¿‡å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ³¨å†Œåº”ç”¨</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.client.auto-deregistration</td><td align="left">tureæ—¶ï¼Œå¯ç”¨åœ¨å…³é—­ä¸Šä¸‹æ–‡æ—¶è‡ªåŠ¨æ³¨é”€SBAæœåŠ¡ç«¯ä¸Šçš„åº”ç”¨ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œä½†æ£€æµ‹åˆ°æ­£åœ¨è¿è¡Œçš„CloudPlatformæ—¶ï¼Œè¯¥åŠŸèƒ½ä¼šå¤„äºæ´»åŠ¨çŠ¶æ€</td><td align="left"><code>null</code></td></tr><tr><td align="left">spring.boot.admin.client.register-once</td><td align="left">ä¸ºtrueï¼Œåˆ™å®¢æˆ·ç«¯å°†ï¼ˆæŒ‰ç…§â€œspring.boot.admin.instance.urlâ€å®šä¹‰çš„é¡ºåºï¼‰ä»…é’ˆå¯¹ä¸€ä¸ªSBAæœåŠ¡ç«¯è¿›è¡Œæ³¨å†Œï¼›å¦‚æœè¯¥SBAæœåŠ¡ç«¯å…³é—­ï¼Œåˆ™å°†è‡ªåŠ¨æ³¨å†Œåˆ°ä¸‹ä¸€ä¸ªæœåŠ¡ç«¯ã€‚å¦‚æœä¸ºfalseï¼Œå°†é’ˆåœ¨æ‰€æœ‰çš„æœåŠ¡ç«¯è¿›è¡Œæ³¨å†Œã€‚</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.client.instance.health-url</td><td align="left">å¥åº·æ£€æµ‹URLã€‚å¦‚æœURLä¸åŒ(å¦‚ï¼šDocker)ï¼Œåˆ™å¯ä»¥è¦†ç›–ï¼Œä½†å¿…é¡»å”¯ä¸€</td><td align="left">Guessed based on management-url and <code>endpoints.health.id</code>.</td></tr><tr><td align="left">spring.boot.admin.client.instance.management-base-url</td><td align="left">ç”¨äºè®¡ç®—è¦æ³¨å†Œçš„ç®¡ç†URLçš„åŸºæœ¬URLã€‚è¯¥è·¯å¾„æ˜¯åœ¨è¿è¡Œæ—¶æ¨æ–­çš„ï¼Œå¹¶é™„åŠ åˆ°åŸºæœ¬URL</td><td align="left">Guessed based on <code>management.port</code>, service-url and <code>server.servlet-path</code>.</td></tr><tr><td align="left">spring.boot.admin.client.instance.management-url</td><td align="left">è¦æ³¨å†Œçš„management-urlã€‚å¦‚æœå¯è®¿é—®çš„URLä¸åŒï¼ˆä¾‹å¦‚Dockerï¼‰ï¼Œåˆ™å¯ä»¥è¦†ç›–</td><td align="left">Guessed based on management-base-url and <code>management.context-path</code>.</td></tr><tr><td align="left">spring.boot.admin.client.instance.service-base-url</td><td align="left">ç”¨äºè®¡ç®—è¦æ³¨å†Œçš„service-urlçš„åŸºæœ¬URLã€‚è¯¥è·¯å¾„æ˜¯åœ¨è¿è¡Œæ—¶æ¨æ–­çš„ï¼Œå¹¶é™„åŠ åˆ°åŸºæœ¬URLã€‚åœ¨Cloudfoundryä¸­ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·åˆ‡æ¢åˆ°httpsï¼šspring.boot.admin.client.instance.service-base-url=https://${vcap.application.uris[0]}</td><td align="left">Guessed based on hostname, <code>server.port</code>.</td></tr><tr><td align="left">spring.boot.admin.client.instance.service-url</td><td align="left">è¦æ³¨å†Œçš„æœåŠ¡ç½‘å€ã€‚å¦‚æœå¯è®¿é—®çš„URLä¸åŒï¼ˆä¾‹å¦‚Dockerï¼‰ï¼Œåˆ™å¯ä»¥è¦†ç›–</td><td align="left">Guessed based on service-base-url and <code>server.context-path</code>.</td></tr><tr><td align="left">spring.boot.admin.client.instance.service-path</td><td align="left">è¦æ³¨å†Œçš„service-pathï¼Œå¦‚æœè·¯å¾„ä¸åŒï¼ˆå¦‚ç”¨ç¼–ç¨‹æ–¹å¼è®¾ç½®çš„context-pathï¼‰ï¼Œåˆ™å¯ä»¥è¦†ç›–ã€‚</td><td align="left">/</td></tr><tr><td align="left">spring.boot.admin.client.instance.name</td><td align="left">è¦æ³¨å†Œçš„å®ä¾‹åç§°</td><td align="left">å¦‚æœè®¾ç½®äº†<code>${spring.application.name}</code> ï¼Œé‚£ä¹ˆåŸæ¥çš„å€¼å°†è¢«è¦†ç›–</td></tr><tr><td align="left">spring.boot.admin.client.instance.prefer-ip</td><td align="left">ä½¿ç”¨ipåœ°å€è€Œä¸æ˜¯ä¸»æœºåï¼Œå¦‚æœ<code>server.address</code> / <code>management.address</code>å·²ç»è®¾ç½®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™ä»<code>InetAddress.getLocalHost()</code>è·å–</td><td align="left"><code>false</code></td></tr><tr><td align="left">spring.boot.admin.client.instance.metadata.*</td><td align="left">è¦ä¸æ­¤å®ä¾‹ç›¸å…³è”çš„å…ƒæ•°æ®é”®å€¼å¯¹</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.client.instance.metadata.tags.*</td><td align="left">è¦ä¸æ­¤å®ä¾‹ç›¸å…³è”çš„Tagsé”®å€¼å¯¹</td><td align="left"></td></tr></tbody></table>
<p><em>Table 2.å®ä¾‹å…ƒæ•°æ®</em></p>
<table><thead><tr><th align="left">Key</th><th align="left">Value</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">user.name user.password</td><td align="left">è®¿é—®ç«¯ç‚¹çš„å‡­è¯</td><td align="left"></td></tr></tbody></table>
<h1><a id="4Spring_Boot_Admin_Server_308"></a>4.Spring Boot Admin Server</h1>
<h2><a id="41__309"></a>4.1 åœ¨åå‘ä»£ç†ä¸‹é¢è¿è¡Œ</h2>
<p>å¦‚æœSBA æœåŠ¡ç«¯è¿è¡Œåœ¨åå‘ä»£ç†æœåŠ¡å™¨ä¸‹é¢ï¼Œå¯èƒ½éœ€è¦è¿›è¡Œé…ç½®ï¼Œå¯ä»¥é€šè¿‡ï¼ˆ<code>spring.boot.admin.ui.public-url</code>ï¼‰æ¥è®¿é—®æœåŠ¡å™¨çš„å…¬å…±urlã€‚å¦å¤–å½“åå‘ä»£ç†ç»ˆæ­¢httpsè¿æ¥æ—¶ï¼Œå¯èƒ½éœ€è¦é…ç½®<code>server.forward-headers-strategy=native</code> (also see <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto-use-tomcat-behind-a-proxy-server">Spring Boot Reference Guide</a>)ã€‚</p>
<h2><a id="42__311"></a>4.2 å±æ€§é…ç½®é€‰é¡¹</h2>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.server.enabled</td><td align="left">å¼€å¯ Spring Boot Admin Server.</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.context-path</td><td align="left">ç”¨ä½œAdmin Serveré™æ€èµ„æºå’ŒAPIè·¯å¾„çš„å‰ç¼€ï¼Œç›¸å½“äºDispatcher-Servlet</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.monitor.status-interval</td><td align="left">æ£€æŸ¥å®ä¾‹çŠ¶æ€çš„æ—¶é—´é—´éš”</td><td align="left">10,000ms</td></tr><tr><td align="left">spring.boot.admin.monitor.status-lifetime</td><td align="left">çŠ¶æ€çš„ç”Ÿå­˜æœŸã€‚åªè¦æœ€åä¸€ä¸ªçŠ¶æ€æœªè¿‡æœŸï¼ŒçŠ¶æ€å°±ä¸ä¼šæ›´æ–°ã€‚</td><td align="left">10,000ms</td></tr><tr><td align="left">spring.boot.admin.monitor.info-interval</td><td align="left">æ£€æŸ¥å®ä¾‹ä¿¡æ¯çš„æ—¶é—´é—´éš”ã€‚</td><td align="left">1m</td></tr><tr><td align="left">spring.boot.admin.monitor.info-lifetime</td><td align="left">ä¿¡æ¯çš„ç”Ÿå­˜æœŸã€‚åªè¦æœ€åä¸€æ¡ä¿¡æ¯æœªè¿‡æœŸï¼Œè¯¥ä¿¡æ¯å°±ä¸ä¼šæ›´æ–°ã€‚</td><td align="left">1m</td></tr><tr><td align="left">spring.boot.admin.monitor.default-timeout</td><td align="left">å‘å‡ºè¯·æ±‚æ—¶çš„é»˜è®¤è¶…æ—¶ã€‚å¯ä»¥ä½¿ç”¨è¦†ç›–ç‰¹å®šç«¯ç‚¹çš„å•ä¸ªå€¼<code>spring.boot.admin.monitor.timeout.*</code>.</td><td align="left">10,000</td></tr><tr><td align="left">spring.boot.admin.monitor.timeout.*</td><td align="left">ç«¯ç‚¹IDå’Œè¶…æ—¶æ—¶é—´çš„Key-Valueé”®å€¼å¯¹ã€‚ é»˜è®¤ä¸ºé»˜è®¤è¶…æ—¶ã€‚</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.monitor.default-retries</td><td align="left">å¤±è´¥è¯·æ±‚çš„é»˜è®¤é‡è¯•æ¬¡æ•°ã€‚Modyfingè¯·æ±‚ï¼ˆ<code>PUTï¼ŒPOSTï¼ŒPATCHï¼ŒDELETE</code>ï¼‰å°†æ°¸è¿œä¸ä¼šé‡è¯•ã€‚<code>spring.boot.admin.monitor.retries.*</code>å¯ä»¥è¦†ç›–æŒ‡å®šç«¯ç‚¹çš„å•ä¸ªå€¼</td><td align="left">0</td></tr><tr><td align="left">spring.boot.admin.monitor.retries.*</td><td align="left">é”®å€¼å¯¹ï¼Œç«¯ç‚¹IDçš„é‡è¯•æ¬¡æ•°ã€‚é»˜è®¤ä¸ºé»˜è®¤é‡è¯•ã€‚Modyfingè¯·æ±‚ï¼ˆ<code>PUTï¼ŒPOSTï¼ŒPATCHï¼ŒDELETE</code>ï¼‰å°†æ°¸è¿œä¸ä¼šé‡è¯•</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.metadata-keys-to-sanitize</td><td align="left">è¦è¢«è¿‡æ»¤æ‰çš„å…ƒæ•°æ®ï¼ˆå½“ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…æ—¶ï¼Œè¿™äº›æ•°æ®ä¼šåœ¨è¾“å‡ºçš„jsonæ•°æ®ä¸­è¿‡æ»¤æ‰ï¼‰</td><td align="left"><code>".**password$", ".\*secret$", ".\*key$", ".\*token$", ".\*credentials.**", ".*vcap_services$"</code></td></tr><tr><td align="left">spring.boot.admin.probed-endpoints</td><td align="left">Spring Boot 1.x ç‰ˆæœ¬æŒ‡å®šçš„æ£€æŸ¥ç«¯ç‚¹ï¼Œå¦‚æœè·¯å¾„ä¸idä¸åŒï¼Œæ‚¨å¯ä»¥å°†å…¶æŒ‡å®šä¸ºid:path(å¦‚health:ping)</td><td align="left"><code>"health", "env", "metrics", "httptrace:trace", "threaddump:dump", "jolokia", "info", "logfile", "refresh", "flyway", "liquibase", "heapdump", "loggers", "auditevents"</code></td></tr><tr><td align="left">spring.boot.admin.instance-auth.enabled</td><td align="left">å¯ç”¨ä»springé…ç½®å±æ€§ä¸­æå–å‡­æ®</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.instance-auth.default-user-name</td><td align="left">ç”¨äºå¯¹æ³¨å†ŒæœåŠ¡è¿›è¡Œèº«ä»½è®¤è¯çš„é»˜è®¤ç”¨æˆ·åã€‚<code>spring.boot.admin.instance-auth.enabled</code> é…ç½®å¿…é¡»æ˜¯<code>true</code></td><td align="left"><code>null</code></td></tr><tr><td align="left">spring.boot.admin.instance-auth.default-password</td><td align="left">ç”¨äºå¯¹æ³¨å†ŒæœåŠ¡è¿›è¡Œèº«ä»½è®¤è¯çš„é»˜è®¤ç”¨æˆ·å¯†ç ã€‚<code>spring.boot.admin.instance-auth.enabled</code> é…ç½®å¿…é¡»æ˜¯ <code>true</code>.</td><td align="left"><code>null</code></td></tr><tr><td align="left">spring.boot.admin.instance-auth.service-map.*.user-name</td><td align="left">ç”¨äºå¯¹æŒ‡å®šåç§°çš„æ³¨å†ŒæœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯çš„ç”¨æˆ·åã€‚ <code>spring.boot.admin.instance-auth.enabled</code> å¿…é¡»æ˜¯ <code>true</code>.</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.instance-auth.service-map.*.user-password</td><td align="left">ç”¨äºå¯¹æŒ‡å®šåç§°çš„æ³¨å†ŒæœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯çš„ç”¨æˆ·å¯†ç ã€‚ <code>spring.boot.admin.instance-auth.enabled</code> å¿…é¡»æ˜¯ <code>true</code>.</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.instance-proxy.ignored-headers</td><td align="left">ä¸å‘å®¢æˆ·ç«¯å‘é€çš„header</td><td align="left"><code>"Cookie", "Set-Cookie", "Authorization"</code></td></tr><tr><td align="left">spring.boot.admin.ui.public-url</td><td align="left">ç”¨äºåœ¨uiä¸­æ„å»ºåŸºæœ¬hrefçš„åŸºæœ¬URL</td><td align="left">å¦‚æœåœ¨åå‘ä»£ç†åé¢è¿è¡Œï¼ˆä½¿ç”¨è·¯å¾„é‡å†™ï¼‰ï¼Œåˆ™å¯ç”¨äºè¿›è¡Œæ­£ç¡®çš„è‡ªæˆ‘å¼•ç”¨ã€‚å¦‚æœçœç•¥äº†ä¸»æœº/ç«¯å£ï¼Œå°†ä»è¯·æ±‚ä¸­æ¨æ–­å‡ºæ¥</td></tr><tr><td align="left">spring.boot.admin.ui.brand</td><td align="left">å¯¼èˆªæ ä¸­æ˜¾ç¤ºçš„å“ç‰Œ</td><td align="left"><code>"&lt;img src="assets/img/icon-spring-boot-admin.svg"&gt;&lt;span&gt;Spring Boot Admin&lt;/span&gt;"</code></td></tr><tr><td align="left">spring.boot.admin.ui.title</td><td align="left">è¦æ˜¾ç¤ºçš„é¡µé¢æ ‡é¢˜</td><td align="left"><code>"Spring Boot Admin"</code></td></tr><tr><td align="left">spring.boot.admin.ui.login-icon</td><td align="left">ç™»å½•é¡µé¢ä¸Šçš„å›¾æ ‡</td><td align="left"><code>"assets/img/icon-spring-boot-admin.svg"</code></td></tr><tr><td align="left">spring.boot.admin.ui.favicon</td><td align="left">ç”¨ä½œé»˜è®¤å›¾æ ‡çš„å›¾æ ‡ï¼Œç”¨äºæ¡Œé¢é€šçŸ¥çš„å›¾æ ‡</td><td align="left"><code>"assets/img/favicon.png"</code></td></tr><tr><td align="left">spring.boot.admin.ui.favicon-danger</td><td align="left">å½“ä¸€é¡¹æˆ–å¤šé¡¹æœåŠ¡å…³é—­å¹¶ç”¨äºæ¡Œé¢é€šçŸ¥æ—¶ï¼Œç”¨ä½œç½‘ç«™å›¾æ ‡</td><td align="left"><code>"assets/img/favicon-danger.png"</code></td></tr><tr><td align="left">spring.boot.admin.ui.remember-me-enabled</td><td align="left">ç™»å½•ç•Œé¢remember-meå¼€å…³</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.cache</td><td align="left">è·å–æ–°ç¼“å­˜æ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.datasource</td><td align="left">è·å–æ–°æ•°æ®æºæ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.gc</td><td align="left">è·å–æ–°gcæ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.process</td><td align="left">è·å–æ–°è¿‡ç¨‹æ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.memory</td><td align="left">è·å–æ–°å†…å­˜æ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr><tr><td align="left">spring.boot.admin.ui.poll-timer.threads</td><td align="left">è·å–æ–°çº¿ç¨‹æ•°æ®çš„è½®è¯¢æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td><td align="left"><code>2500</code></td></tr></tbody></table>
<h2><a id="43_Spring_Cloud_Discovery_346"></a>4.3 Spring Cloud Discovery</h2>
<p>SBA æœåŠ¡ç«¯èƒ½é€šè¿‡<code>DiscoveryClient</code>å‘ç°åº”ç”¨ç¨‹åºã€‚ä¼˜ç‚¹æ˜¯å®¢æˆ·ç«¯ä¸éœ€è¦å¼•å…¥<code>spring-boot-admin-starter-client</code>ä¾èµ–ã€‚ä½ åªéœ€è¦æ·»åŠ ä¸€ä¸ª<code>DiscoveryClient</code>çš„å®ç°ï¼Œå…¶ä»–éƒ½æœ‰AutoConfigurationè‡ªåŠ¨å®Œæˆã€‚</p>
<h3><a id="431_SimpleDiscoveryClient_348"></a>4.3.1 SimpleDiscoveryClienté™æ€é…ç½®</h3>
<p>Spring Cloud æä¾›äº†<code>SimpleDiscoveryClient</code>ã€‚å®ƒå…è®¸æ‚¨é€šè¿‡é™æ€é…ç½®æ¥æŒ‡å®šå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><em>application.yml</em></p>
<pre><code class="prism language-xml">spring:
  cloud:
    discovery:
      client:
        simple:
          instances:
            test:
              - uri: http://instance1.intern:8080
                metadata:
                  management.context-path: /actuator
              - uri: http://instance2.intern:8080
                metadata:
                  management.context-path: /actuator
</code></pre>
<h3><a id="432_DiscoveryClients_373"></a>4.3.2 å…¶ä»–DiscoveryClients</h3>
<p>Spring Boot Admin æ”¯æŒæ‰€æœ‰å®ç°äº†Spring Cloud <code>DiscoveryClient</code>çš„ç»„ä»¶ï¼ˆå¦‚Eureka, Zookeeper, Consulâ€¦ï¼‰ã€‚æ‚¨éœ€è¦æ·»åŠ å®ƒåˆ°Spring Boot Admin Serverä¸­ï¼Œå¹¶æ­£ç¡®é…ç½®ã€‚</p>
<h3><a id="433_ServiceInstances_375"></a>4.3.3 è½¬æ¢ServiceInstances</h3>
<p>æœåŠ¡æ³¨å†Œä¿¡æ¯é€šè¿‡<code>ServiceInstanceConverter</code>è½¬æ¢ï¼ŒSBAé™„å¸¦é»˜è®¤è½¬æ¢å’ŒEurekaçš„è½¬æ¢å®ç°ã€‚é€šè¿‡AutoConfigurationä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæ­£ç¡®çš„å®ç°ã€‚</p>
<blockquote>
<p>ğŸš©<br/> æ‚¨å¯ä»¥ä½¿ç”¨SBAæœåŠ¡ç«¯é…ç½®é€‰é¡¹å’Œå®ä¾‹çš„å…ƒæ•°æ®æ¥ä¿®æ”¹æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ã€‚å…ƒæ•°æ®ä¸­çš„å€¼ä¼˜å…ˆäºæœåŠ¡å™¨é…ç½®ã€‚å¦‚æœé…ç½®é€‰é¡¹ä¸æ»¡è¶³éœ€æ±‚ï¼Œæ‚¨å¯ä»¥æä¾›è‡ªå·±çš„<code>ServiceInstanceConverter</code>ã€‚</p>
</blockquote>
<blockquote>
<p>â—ï¸ <br/> å½“ä½¿ç”¨Eurekaæ—¶ï¼Œå·²ç»çŸ¥é“äº†<code>healthCheckUrl</code>ç”¨äºEurekaç›‘æ§æ£€æŸ¥ï¼Œæ‚¨å¯ä»¥åœ¨Eurekaçš„å®¢æˆ·ç«¯é…ç½®<code>eureka.instance.healthCheckUrl</code>ã€‚</p>
</blockquote>
<p><em>Table 3. å®ä¾‹å…ƒæ•°æ®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Key</th><th align="left">Value</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">user.name user.password</td><td align="left">ç”¨äºè®¿é—®ç«¯ç‚¹çš„å‡­æ®ã€‚</td><td align="left"></td></tr><tr><td align="left">management.scheme</td><td align="left">è¯¥schemeå€¼åœ¨service URLä¸­æ›¿æ¢ä»¥ä¾¿è®¿é—®actuatorç«¯ç‚¹ã€‚</td><td align="left"></td></tr><tr><td align="left">management.address</td><td align="left">è¯¥addresså€¼åœ¨service URLä¸­æ›¿æ¢ä»¥ä¾¿è®¿é—®actuatorç«¯ç‚¹ã€‚</td><td align="left"></td></tr><tr><td align="left">management.port</td><td align="left">è¯¥portå€¼åœ¨service URLä¸­æ›¿æ¢ä»¥ä¾¿è®¿é—®actuatorç«¯ç‚¹ã€‚</td><td align="left"></td></tr><tr><td align="left">management.context-path</td><td align="left">è¯¥è·¯å¾„å°†ä¼šè¿½åŠ åœ¨service URLä¸­ï¼Œç”¨äºè®¿é—®actuatorç«¯ç‚¹</td><td align="left"><code>${spring.boot.admin.discovery.converter.management-context-path}</code></td></tr><tr><td align="left">health.path</td><td align="left">è¯¥è·¯å¾„å°†ä¼šè¿½åŠ åœ¨service URLä¸­ï¼Œç”¨äºå¥åº·æ£€æŸ¥ã€‚å¿½ç•¥ <code>EurekaServiceInstanceConverter</code>.</td><td align="left"><code>${spring.boot.admin.discovery.converter.health-endpoint}</code></td></tr></tbody></table>
<p><em>Table 4. Discoveryé…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.discovery.enabled</td><td align="left">å¯ç”¨å¯¹Admin æœåŠ¡ç«¯çš„DiscoveryClientæ”¯æŒ</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.discovery.converter.management-context-path</td><td align="left">å½“<code>DefaultServiceInstanceConverter</code>è½¬æ¢management-urlæ—¶ï¼Œå°†é™„åŠ åˆ°å‘ç°æœåŠ¡çš„æœåŠ¡urlã€‚</td><td align="left"><code>/actuator</code></td></tr><tr><td align="left">spring.boot.admin.discovery.converter.health-endpoint-path</td><td align="left">å½“ä½¿ç”¨<code>DefaultServiceInstanceConverter</code>è½¬æ¢health-urlæ—¶ï¼Œå°†é™„åŠ åˆ°management-urlä¸­ã€‚</td><td align="left"><code>"health"</code></td></tr><tr><td align="left">spring.boot.admin.discovery.ignored-services</td><td align="left">åœ¨ä½¿ç”¨å‘ç°å’Œæœªæ³¨å†Œä¸ºåº”ç”¨ç¨‹åºæ—¶ï¼Œå°†å¿½ç•¥æ­¤æœåŠ¡ã€‚æ”¯æŒç®€å•æ¨¡å¼ï¼ˆä¾‹å¦‚<code>"foo*", "*bar", "foo*bar*"</code>ï¼‰ã€‚</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.discovery.services</td><td align="left">åœ¨ä½¿ç”¨å‘ç°å’Œæœªæ³¨å†Œä¸ºåº”ç”¨ç¨‹åºæ—¶ï¼Œå°†åŒ…å«æ­¤æœåŠ¡ã€‚æ”¯æŒç®€å•æ¨¡å¼ï¼ˆä¾‹å¦‚<code>"foo*", "*bar", "foo*bar*"</code>ï¼‰ã€‚</td><td align="left"><code>"*"</code></td></tr><tr><td align="left">spring.boot.admin.discovery.ignored-instances-metadata</td><td align="left">å¦‚æœæœåŠ¡å®ä¾‹è‡³å°‘åŒ…å«ä¸€ä¸ªä¸æ­¤åˆ—è¡¨åŒ¹é…çš„å…ƒæ•°æ®é¡¹ï¼Œåˆ™å°†å¿½ç•¥è¿™äº›å®ä¾‹ã€‚(e.g. â€œdiscoverable=falseâ€)</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.discovery.instances-metadata</td><td align="left">å¦‚æœæœåŠ¡å®ä¾‹åŒ…å«è‡³å°‘ä¸€ä¸ªä¸æ­¤åˆ—è¡¨åŒ¹é…çš„å…ƒæ•°æ®é¡¹ï¼Œåˆ™å°†åŒ…æ‹¬è¿™äº›å®ä¾‹ã€‚ (e.g. â€œdiscoverable=trueâ€)</td><td align="left"></td></tr></tbody></table>
<h3><a id="434_CloudFoundry_405"></a>4.3.4 CloudFoundry</h3>
<p>å¦‚æœæ‚¨å°†åº”ç”¨éƒ¨ç½²åœ¨CloudFoundryï¼Œé‚£ä¹ˆ<code>vcap.application.application_id</code>å’Œ<code>vcap.application.instance_index</code>å¿…é¡»é…ç½®åœ¨å…ƒæ•°æ®ä¸­ï¼Œä»¥ä¾¿æ­£ç¡®æ³¨å†Œåˆ°SBA æœåŠ¡ä¸­ã€‚å¦‚ä¸‹æ˜¯å…³äºEurekaçš„ç®€å•ç¤ºä¾‹ï¼š</p>
<p><em>application.yml</em></p>
<pre><code class="prism language-xml">eureka:
  instance:
    hostname: ${vcap.application.uris[0]}
    nonSecurePort: 80
    metadata-map:
      applicationId: ${vcap.application.application_id}
      instanceId: ${vcap.application.instance_index}
</code></pre>
<h2><a id="44__418"></a>4.4 é›†ç¾¤</h2>
<p>Spring Boot Admin Serveræ”¯æŒé€šè¿‡Hazelcastè¿›è¡Œç¾¤é›†å¤åˆ¶ã€‚å½“å­˜åœ¨HazelcastConfigæˆ–HazelcastInstance Beanæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¯ç”¨ã€‚æ‚¨è¿˜å¯ä»¥å°†Hazelcasté…ç½®ä¸ºæŒä¹…çš„ï¼Œä»¥ä¾¿åœ¨é‡æ–°å¯åŠ¨æ—¶ä¿æŒè¯¥çŠ¶æ€ã€‚å¦è¯·å‚é˜… <a href="http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#boot-features-hazelcast/">Spring Boot support for Hazelcast</a>ã€‚</p>
<ol><li>æ·»åŠ Hazelcastä¾èµ–<br/> <em>pom.xml</em></li></ol>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.hazelcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hazelcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<ol start="2"><li>å®ä¾‹åŒ–HazelcastConfig</li></ol>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> Config <span class="token function">hazelcastConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// ç”¨äºå­˜å‚¨äº‹ä»¶çš„map</span>
  <span class="token comment">// åº”è¯¥è¦å¯é çš„ä¿å­˜æ•°æ®ï¼Œå¦‚æœäº‹ä»¶å¤ªå¤šï¼ŒSpring Boot Adminå°†ä¼šè¿›è¡Œå‹ç¼©</span>
  MapConfig eventStoreMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapConfig</span><span class="token punctuation">(</span>DEFAULT_NAME_EVENT_STORE_MAP<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setInMemoryFormat</span><span class="token punctuation">(</span>InMemoryFormat<span class="token punctuation">.</span>OBJECT<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBackupCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setMergePolicyConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MergePolicyConfig</span><span class="token punctuation">(</span>PutIfAbsentMergePolicy<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// è¯¥mapç”¨äºæ¸…é™¤é€šçŸ¥ä¸­çš„é‡å¤æ•°æ®ã€‚</span>
 <span class="token comment">//å¦‚æœæ­¤æ˜ å°„ä¸­çš„æ•°æ®ä¸¢å¤±ï¼Œè¿™åº”è¯¥ä¸æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå› ä¸ºè¿™å°†å¯¼è‡´å¤šä¸ªå®ä¾‹å‘é€ç›¸åŒçš„é€šçŸ¥</span>
  MapConfig sentNotificationsMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapConfig</span><span class="token punctuation">(</span>DEFAULT_NAME_SENT_NOTIFICATIONS_MAP<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setInMemoryFormat</span><span class="token punctuation">(</span>InMemoryFormat<span class="token punctuation">.</span>OBJECT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBackupCount</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setEvictionConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">EvictionConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setEvictionPolicy</span><span class="token punctuation">(</span>EvictionPolicy<span class="token punctuation">.</span>LRU<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">setMaxSizePolicy</span><span class="token punctuation">(</span>MaxSizePolicy<span class="token punctuation">.</span>PER_NODE<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setMergePolicyConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MergePolicyConfig</span><span class="token punctuation">(</span>PutIfAbsentMergePolicy<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Config config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">addMapConfig</span><span class="token punctuation">(</span>eventStoreMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">addMapConfig</span><span class="token punctuation">(</span>sentNotificationsMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
  config<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"hazelcast.jmx"</span><span class="token punctuation">,</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// WARNING: è¿™å°†è®¾ç½®ä¸€ä¸ªæœ¬åœ°é›†ç¾¤ï¼Œæ‚¨å¯ä»¥æ ¹æ®éœ€è¦å¯¹å…¶è¿›è¡Œæ›´æ”¹ã€‚</span>
  config<span class="token punctuation">.</span><span class="token function">getNetworkConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMulticastConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  TcpIpConfig tcpIpConfig <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getNetworkConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJoin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTcpIpConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tcpIpConfig<span class="token punctuation">.</span><span class="token function">setEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tcpIpConfig<span class="token punctuation">.</span><span class="token function">setMembers</span><span class="token punctuation">(</span><span class="token function">singletonList</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>Table 5. Hazelcast é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.hazelcast.enabled</td><td align="left">å¼€å¯Hazelcast æ”¯æŒ</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.hazelcast.event-store</td><td align="left">ç”¨äºå­˜å‚¨äº‹ä»¶çš„Hazelcast-mapçš„åç§°</td><td align="left"><code>"spring-boot-admin-event-store"</code></td></tr><tr><td align="left">spring.boot.admin.hazelcast.sent-notifications</td><td align="left">ç”¨äºå­˜å‚¨å»é‡é€šçŸ¥çš„Hazelcast-mapçš„åç§°</td><td align="left"><code>"spring-boot-admin-sent-notifications"</code></td></tr></tbody></table>
<h2><a id="45__466"></a>4.5 é€šçŸ¥</h2>
<h3><a id="451__467"></a>4.5.1 é‚®ä»¶é€šçŸ¥</h3>
<p>é‚®ä»¶é€šçŸ¥ä½¿ç”¨Thymeleafä½œä¸ºæ¨¡ç‰ˆã€‚è¦å¼€å¯é‚®ä»¶é€šçŸ¥ï¼Œä½¿ç”¨<code>spring-boot-starter-mail</code>é…ç½®<code>JavaMailSender</code>å¹¶è®¾ç½®æ”¶ä»¶äººã€‚</p>
<p><em>Figure 1. ç®€å•çš„é‚®ä»¶é€šçŸ¥</em></p>
<blockquote>
<p>â—ï¸ ä¸ºäº†é˜²æ­¢æ³„éœ²æ•æ„Ÿä¿¡æ¯ï¼Œé»˜è®¤é‚®ä»¶æ¨¡æ¿ä¸æ˜¾ç¤ºå®ä¾‹çš„ä»»ä½•å…ƒæ•°æ®ã€‚å¦‚æœæ‚¨æƒ³æ˜¾ç¤ºä¸€äº›å…ƒæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ¨¡æ¿ã€‚</p>
</blockquote>
<p>1.æ·»åŠ spring-boot-starter-mail ä¾èµ–<br/> <em>pom.xml</em></p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>2.é…ç½®JavaMailSender<br/> <em>application.properties</em></p>
<pre><code class="prism language-xml">spring.mail.host=smtp.example.com
spring.boot.admin.notify.mail.to=admin@example.com
</code></pre>
<p>3.ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹é…ç½®é‚®ä»¶<br/> <em>Table 6. é‚®ä»¶é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.mail.enabled</td><td align="left">å¼€å¯é‚®ä»¶é€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.mail.ignore-changes</td><td align="left">è¦å¿½ç•¥çš„çŠ¶æ€å˜æ›´: â€œ:â€ã€‚å…è®¸ä½¿ç”¨é€šé…ç¬¦</td><td align="left"><code>"UNKNOWN:UP"</code></td></tr><tr><td align="left">spring.boot.admin.notify.mail.template</td><td align="left">ç”¨äºæ¸²æŸ“çš„Thymeleafæ¨¡æ¿çš„èµ„æºè·¯å¾„ã€‚</td><td align="left"><code>"classpath:/META-INF/spring-boot-admin-server/mail/status-changed.html"</code></td></tr><tr><td align="left">spring.boot.admin.notify.mail.to</td><td align="left">ä»¥é€—å·åˆ†éš”çš„é‚®ä»¶æ”¶ä»¶äººåˆ—è¡¨</td><td align="left"><code>"root@localhost"</code></td></tr><tr><td align="left">spring.boot.admin.notify.mail.cc</td><td align="left">ä»¥é€—å·åˆ†éš”çš„æŠ„é€æ”¶ä»¶äººåˆ—è¡¨</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.mail.from</td><td align="left">é‚®ä»¶å‘é€äºº</td><td align="left"><code>"Spring Boot Admin &lt;noreply@localhost&gt;"</code></td></tr><tr><td align="left">spring.boot.admin.notify.mail.additional-properties</td><td align="left">å¯ä»¥ä»æ¨¡æ¿è®¿é—®çš„å…¶ä»–å±æ€§</td><td align="left"></td></tr></tbody></table>
<h3><a id="453_OpsGenie_1_499"></a>4.5.3 OpsGenieé€šçŸ¥ <sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></h3>
<p>è¦å¯ç”¨<a href="https://www.opsgenie.com/">OpsGenie</a>é€šçŸ¥ï¼Œæ‚¨åªéœ€å°†æ–°çš„JSON Rest APIé›†æˆæ·»åŠ åˆ°æ‚¨çš„OpsGenieå¸æˆ·å¹¶è®¾ç½®æ¥æ”¶çš„apiKey <code>spring.boot.admin.notify.opsgenie.api-key</code></p>
<p><em>Table 8. OpsGenie é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.opsgenie.enabled</td><td align="left">å¼€å¯OpsGenie é€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.ignore-changes</td><td align="left">è¦å¿½ç•¥çš„çŠ¶æ€å˜æ›´ <code>&lt;from-status&gt;:&lt;to-status&gt;</code>ã€‚å…è®¸ä½¿ç”¨é€šé…ç¬¦</td><td align="left"><code>"UNKNOWN:UP"</code></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.api-key</td><td align="left">opsgenieçš„apikey</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.url</td><td align="left">OpsGenie å‘Šè­¦url</td><td align="left"><code>"https://api.opsgenie.com/v2/alerts"</code></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.description</td><td align="left">æè¿°äº‹ä»¶çš„è¯´æ˜ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼ã€‚</td><td align="left"><code>"#{instance.registration.name}/#{instance.id} is #{instance.statusInfo.status}"</code></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.actions</td><td align="left">å¯ä»¥æ‰§è¡Œçš„åŠ¨ä½œï¼Œé€—å·åˆ†éš”</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.source</td><td align="left">ç”¨äºæŒ‡å®šè­¦æŠ¥æºçš„å­—æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†è¢«åˆ†é…åˆ°ä¼ å…¥è¯·æ±‚çš„IPåœ°å€ã€‚</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.tags</td><td align="left">é™„åŠ åˆ°è­¦æŠ¥çš„æ ‡ç­¾çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.entity</td><td align="left">ä¸è­¦æŠ¥ç›¸å…³çš„å®ä½“ã€‚</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.opsgenie.user</td><td align="left">æ‰§è¡Œçš„é»˜è®¤æ‰€æœ‰è€…ã€‚å¦‚æœæœªæŒ‡å®šç”¨æˆ·ï¼Œç³»ç»Ÿå°†æˆä¸ºæ‰§è¡Œçš„æ‰€æœ‰è€…ã€‚</td><td align="left"></td></tr></tbody></table>
<h3><a id="454_Hipchat__516"></a>4.5.4 Hipchat é€šçŸ¥</h3>
<p>å¼€å¯<a href="https://www.hipchat.com/">Hipchat</a>é€šçŸ¥ï¼Œæ‚¨ä»…ä»…éœ€è¦ç”¨æ‚¨çš„Hipchatè´¦æˆ·åˆ›å»ºä¸€ä¸ªAPI tokenï¼Œå¹¶è®¾ç½®æ­£ç¡®çš„é…ç½®ã€‚<br/> <em>Table 9. Hipchat é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.hipchat.enabled</td><td align="left">å¼€å¯Hipchaté€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.ignore-changes</td><td align="left">è¦å¿½ç•¥çš„çŠ¶æ€å˜æ›´<code>&lt;from-status&gt;:&lt;to-status&gt;</code>ã€‚å…è®¸ä½¿ç”¨é€šé…ç¬¦ã€‚</td><td align="left"><code>"UNKNOWN:UP"</code></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.url</td><td align="left">HipChat çš„REST API (V2) URL</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.auth-token</td><td align="left">å¯è®¿é—®çš„API Token</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.room-id</td><td align="left">è¦å‘å…¶å‘é€é€šçŸ¥çš„æˆ¿é—´çš„IDæˆ–url-encodedçš„åç§°</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.notify</td><td align="left">æ¶ˆæ¯æ˜¯å¦åº”è§¦å‘ç”¨æˆ·é€šçŸ¥</td><td align="left"><code>false</code></td></tr><tr><td align="left">spring.boot.admin.notify.hipchat.description</td><td align="left">æè¿°äº‹ä»¶çš„è¯´æ˜ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼ã€‚</td><td align="left"><code>"&lt;strong&gt;#{instance.registration.name}&lt;/strong&gt;/#{instance.id} is &lt;strong&gt;#{event.statusInfo.status}&lt;/strong&gt;"</code></td></tr></tbody></table>
<h3><a id="455_Slack__530"></a>4.5.5 Slack é€šçŸ¥</h3>
<p>è¦å¯ç”¨<a href="https://slack.com/">Slack</a>é€šçŸ¥ï¼Œæ‚¨éœ€è¦åœ¨Slackå¸æˆ·çš„è‡ªå®šä¹‰é›†æˆä¸‹æ·»åŠ ä¸€ä¸ªä¼ å…¥çš„Webhookï¼Œå¹¶å¯¹å…¶è¿›è¡Œé€‚å½“é…ç½®ã€‚</p>
<p><em>Table 10. Slack é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.slack.enabled</td><td align="left">å¼€å¯Slacké€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.slack.ignore-changes</td><td align="left">è¦å¿½ç•¥çš„çŠ¶æ€å˜æ›´<code>&lt;from-status&gt;:&lt;to-status&gt;</code>ã€‚å…è®¸ä½¿ç”¨é€šé…ç¬¦ã€‚</td><td align="left"><code>"UNKNOWN:UP"</code></td></tr><tr><td align="left">spring.boot.admin.notify.slack.webhook-url</td><td align="left">å‘é€Slacké€šçŸ¥çš„ Webhook åœ°å€</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.slack.channel</td><td align="left">å¯é€‰é¢‘é“åç§°ï¼ˆå¼€å¤´æ²¡æœ‰#ï¼‰ã€‚å¦‚æœä¸Slack Webhooksè®¾ç½®ä¸­çš„é¢‘é“ä¸åŒ</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.slack.icon</td><td align="left">å¯é€‰çš„iconåç§°ï¼ˆå‘¨å›´æ²¡æœ‰å†’å·ï¼‰ã€‚ å¦‚æœä¸Slack Webhooksè®¾ç½®ä¸­çš„é¢‘é“ä¸åŒ</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.slack.username</td><td align="left">å¯é€‰çš„å‘é€ç”¨æˆ·åã€‚ å¦‚æœä¸Slack Webhooksè®¾ç½®ä¸­çš„é¢‘é“ä¸åŒ</td><td align="left"><code>Spring Boot Admin</code></td></tr><tr><td align="left">spring.boot.admin.notify.slack.message</td><td align="left">æè¿°äº‹ä»¶çš„è¯´æ˜ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼ã€‚</td><td align="left"><code>"*#{instance.registration.name}* (#{instance.id}) is *#{event.statusInfo.status}*"</code></td></tr></tbody></table>
<h3><a id="456_Lets_Chat__546"></a>4.5.6 Letâ€™s Chat é€šçŸ¥</h3>
<p>è¦å¯ç”¨<a href="https://sdelements.github.io/lets-chat/">Letâ€™s Chat</a>é€šçŸ¥ï¼Œæ‚¨éœ€è¦æ·»åŠ host urlï¼Œå¹¶ä»Letâ€™s Chatä¸­æ·»åŠ APIä»¤ç‰Œå’Œç”¨æˆ·åã€‚</p>
<p><em>Table 11. Letâ€™s Chat é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.letschat.enabled</td><td align="left">å¼€å¯letÂ´s Chat é€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.ignore-changes</td><td align="left">è¦å¿½ç•¥çš„çŠ¶æ€å˜æ›´<code>&lt;from-status&gt;:&lt;to-status&gt;</code>ã€‚å…è®¸ä½¿ç”¨é€šé…ç¬¦ã€‚</td><td align="left"><code>"UNKNOWN:UP"</code></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.url</td><td align="left">è¦å‘é€çš„é€šçŸ¥çš„letÂ´s Chat hoståœ°å€</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.room</td><td align="left">è¦å‘é€æ¶ˆæ¯æˆ¿é—´</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.token</td><td align="left">è®¿é—®letÂ´s Chat APIçš„token</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.username</td><td align="left">åˆ›å»ºtoken çš„ç”¨æˆ·å</td><td align="left"><code>Spring Boot Admin</code></td></tr><tr><td align="left">spring.boot.admin.notify.letschat.message</td><td align="left">æè¿°äº‹ä»¶çš„è¯´æ˜ï¼Œæ”¯æŒSpELè¡¨è¾¾å¼ã€‚</td><td align="left"><code>"*#{instance.registration.name}* (#{instance.id}) is *#{event.statusInfo.status}*"</code></td></tr></tbody></table>
<h3><a id="457_Microsoft_Teams_560"></a>4.5.7 Microsoft Teamsé€šçŸ¥</h3>
<p>è¦å¯ç”¨Microsoftå›¢é˜Ÿé€šçŸ¥ï¼Œæ‚¨éœ€è¦è®¾ç½®è¿æ¥å™¨çš„webhook urlåœ°å€å¹¶è®¾ç½®é€‚å½“çš„é…ç½®å±æ€§ã€‚</p>
<p><em>Table 12. Microsoft Teams é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.ms-teams.enabled</td><td align="left">å¼€å¯Microsoft Teamsé€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.webhook-url</td><td align="left">Microsoft Teams webhook urlåœ°å€</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.deRegisteredTitle</td><td align="left">åº”ç”¨ç¨‹åºæ³¨é”€æ—¶Teamsæ¶ˆæ¯çš„æ ‡é¢˜ã€‚</td><td align="left">De-Registered</td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.registeredTitle</td><td align="left">åº”ç”¨ç¨‹åºæ³¨å†Œæ—¶Teamsæ¶ˆæ¯çš„æ ‡é¢˜ã€‚</td><td align="left">Registered</td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.statusChangedTitle</td><td align="left">åº”ç”¨ç¨‹åºçŠ¶æ€å˜æ›´æ—¶Teamsæ¶ˆæ¯çš„æ ‡é¢˜</td><td align="left">Status Changed</td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.messageSummary</td><td align="left">Teamsæ¶ˆæ¯çš„æ‘˜è¦</td><td align="left">Spring Boot Admin Notification</td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.theme_color</td><td align="left">è®¾ç½®æ¶ˆæ¯é¢œè‰²ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>#{event.type == 'STATUS_CHANGED' ? (event.statusInfo.status=='UP' ? '6db33f' : 'b32d36') : '439fe0'}</code></td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.deregister_activity_subtitle</td><td align="left">åº”ç”¨ç¨‹åºæ³¨é”€æ—¶Teamsæ¶ˆæ¯æ´»åŠ¨éƒ¨åˆ†çš„å‰¯æ ‡é¢˜ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>#{instance.registration.name} with id #{instance.id} has de-registered from Spring Boot Admin</code></td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.register_activity_subtitle</td><td align="left">åº”ç”¨ç¨‹åºæ³¨å†Œæ—¶Teamsæ¶ˆæ¯æ´»åŠ¨éƒ¨åˆ†çš„å‰¯æ ‡é¢˜ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>#{instance.registration.name} with id #{instance.id} has registered with Spring Boot Admin</code></td></tr><tr><td align="left">spring.boot.admin.notify.ms-teams.status_activity_subtitle</td><td align="left">åº”ç”¨ç¨‹åºçŠ¶æ€å˜æ›´æ—¶Teamsæ¶ˆæ¯æ´»åŠ¨éƒ¨åˆ†çš„å‰¯æ ‡é¢˜ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>#{instance.registration.name} with id #{instance.id} changed status from #{lastStatus} to #{event.statusInfo.status}</code></td></tr></tbody></table>
<h3><a id="458_Telegram__577"></a>4.5.8 Telegram é€šçŸ¥</h3>
<p>è¦å¯ç”¨<a href="https://telegram.org/">Telegram</a>é€šçŸ¥ï¼Œæ‚¨éœ€è¦åˆ›å»ºå¹¶æˆæƒä¸€ä¸ªæœºå™¨äººï¼Œå¹¶è®¾ç½®æ­£ç¡®çš„<code>auth-token</code> å’Œ <code>chat-id</code></p>
<p><em>Table 13. Telegram é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.telegram.enabled</td><td align="left">å¼€å¯Telegram é€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.telegram.auth-token</td><td align="left">Telegram æœºå™¨äººæˆæƒToken(å¦‚<code>123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11</code>).</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.telegram.chat-id</td><td align="left">ç›®æ ‡èŠå¤©çš„å”¯ä¸€æ ‡è¯†ç¬¦æˆ–ç›®æ ‡é¢‘é“çš„ç”¨æˆ·å</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.telegram.disable-notify</td><td align="left">å¦‚æœæ˜¯trueï¼Œç”¨æˆ·å°†æ”¶åˆ°ä¸€ä¸ªæ²¡æœ‰å£°éŸ³çš„é€šçŸ¥ã€‚</td><td align="left"><code>false</code></td></tr><tr><td align="left">spring.boot.admin.notify.telegram.parse_mode</td><td align="left">å‘é€æ¶ˆæ¯çš„æ ¼å¼åŒ–æ¨¡å¼. å½“å‰æ”¯æŒHTML å’Œ Markdown</td><td align="left"><code>'HTML'</code></td></tr><tr><td align="left">spring.boot.admin.notify.telegram.message</td><td align="left">å‘é€çš„æ–‡æœ¬ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>"&lt;strong&gt;#{instance.registration.name}&lt;/strong&gt;/#{instance.id} is &lt;strong&gt;#{event.statusInfo.status}&lt;/strong&gt;"</code></td></tr></tbody></table>
<h3><a id="459_Discord_591"></a>4.5.9 Discordé€šçŸ¥</h3>
<p>è¦å¯ç”¨Discordé€šçŸ¥ï¼Œæ‚¨éœ€è¦åˆ›å»ºwebhookå¹¶è®¾ç½®é€‚å½“çš„é…ç½®å±æ€§ã€‚</p>
<p><em>Table 14. Discord é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.discord.enabled</td><td align="left">å¼€å¯Discordé€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.discord.webhook-url</td><td align="left">å‘é€é€šçŸ¥çš„webhook url</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.discord.username</td><td align="left">å¯é€‰ç”¨æˆ·å</td><td align="left"><em>Default set in Discord</em></td></tr><tr><td align="left">spring.boot.admin.notify.discord.avatar-url</td><td align="left">å¯é€‰çš„å¤´åƒURL</td><td align="left"><em>Default set in Discord</em></td></tr><tr><td align="left">spring.boot.admin.notify.discord.tts</td><td align="left">æ–‡æœ¬æ¶ˆæ¯æ˜¯å¦è½¬æ¢æˆè¯­éŸ³</td><td align="left"><code>false</code></td></tr><tr><td align="left">spring.boot.admin.notify.discord.message</td><td align="left">å‘é€çš„æ–‡æœ¬ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>"*#{instance.registration.name}* (#{instance.id}) is *#{event.statusInfo.status}*"</code></td></tr></tbody></table>
<h3><a id="4510__604"></a>4.5.10 é€šçŸ¥ä»£ç†è®¾ç½®</h3>
<p>æ‰€æœ‰ä½¿ç”¨RestTemplateçš„é€šçŸ¥ç¨‹åºéƒ½å¯ä»¥é…ç½®ä¸ºä½¿ç”¨ä»£ç†ã€‚</p>
<p><em>Table 15. Notification Proxy é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.proxy.host</td><td align="left">ä»£ç†åœ°å€</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.proxy.port</td><td align="left">ä»£ç†ç«¯å£</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.proxy.username</td><td align="left">é‰´æƒç”¨æˆ·å(å¦‚æœéœ€è¦)</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.proxy.password</td><td align="left">é‰´æƒå¯†ç (å¦‚æœéœ€è¦)</td><td align="left"></td></tr></tbody></table>
<h3><a id="4511__616"></a>4.5.11 é€šçŸ¥æé†’</h3>
<p><code>RemindingNotifier</code>ä¸ºdown/offlineçš„åº”ç”¨ç¨‹åºå‘é€æé†’ï¼Œå®ƒå¯ä»¥å°†å‘é€é€šçŸ¥å§”æ‰˜ç»™å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚</p>
<p>åº”ç”¨ç¨‹åºé»˜è®¤åœ¨çŠ¶æ€å˜ä¸º<code>DOWN</code>æˆ–è€…<code>OFFLINE</code>æ˜¯è§¦å‘æé†’ã€‚æ‚¨å¯ä»¥é€šè¿‡<code>setReminderStatuses()</code>ä¿®æ”¹è¯¥è¡Œä¸ºã€‚å½“çŠ¶æ€æ›´æ”¹ä¸ºéè§¦å‘çŠ¶æ€æˆ–ç›¸å…³åº”ç”¨ç¨‹åºæ³¨é”€æ—¶ï¼Œæé†’ç»“æŸã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯10åˆ†é’Ÿå‘é€ä¸€æ¬¡æé†’ï¼Œè¦æ›´æ”¹æ­¤è®¾ç½®ï¼Œè¯·ä½¿ç”¨<code>setReminderPeriod()</code>ã€‚æé†’é€šçŸ¥ç¨‹åºæœ¬èº«ä¸ä¼šå¯åŠ¨åå°çº¿ç¨‹æ¥å‘é€æé†’ï¼Œæ‚¨éœ€è¦æ³¨æ„è¿™ä¸€ç‚¹ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹æ‰€ç¤ºï¼›</p>
<p><em>å¦‚ä½•é…ç½®æé†’</em></p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NotifierConfiguration</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> Notifier notifier<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Primary</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">"start"</span><span class="token punctuation">,</span> destroyMethod <span class="token operator">=</span> <span class="token string">"stop"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> RemindingNotifier <span class="token function">remindingNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        RemindingNotifier notifier <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RemindingNotifier</span><span class="token punctuation">(</span>notifier<span class="token punctuation">,</span> repository<span class="token punctuation">)</span><span class="token punctuation">;</span>
        notifier<span class="token punctuation">.</span><span class="token function">setReminderPeriod</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        notifier<span class="token punctuation">.</span><span class="token function">setCheckReminderInverval</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">return</span> notifier<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="4512__641"></a>4.5.12 è¿‡æ»¤é€šçŸ¥</h3>
<p><code>FilteringNotifier</code>å…è®¸æ‚¨åœ¨è¿è¡Œæ—¶æ ¹æ®è§„åˆ™è¿‡æ»¤æŸäº›é€šçŸ¥ã€‚å®ƒå°†é€šçŸ¥å‘é€å§”æ‰˜ç»™å¦ä¸€ä¸ªé€šçŸ¥ç¨‹åºã€‚</p>
<p>å¦‚æœæ‚¨æ·»åŠ <code>FilteringNotifier</code>åˆ°æ‚¨çš„<code>ApplicationContext</code>ä¸­ï¼Œ<code>notifications/filter</code>ä¸Šçš„RESTfulæ¥å£å¯ç”¨ã€‚</p>
<p>å¦‚æœæ‚¨ä¸å¸Œæœ›åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºæ—¶æ”¶åˆ°é€šçŸ¥ï¼Œåˆ™æ­¤é€šçŸ¥ç¨‹åºéå¸¸æœ‰ç”¨ã€‚åœ¨åœæ­¢åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡POSTè¯·æ±‚æ·»åŠ ï¼ˆè¿‡æœŸï¼‰è¿‡æ»¤å™¨ã€‚</p>
<p><em>å¦‚ä½•é…ç½®filtering</em></p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">NotifierConfig</span> <span class="token punctuation">{<!-- --></span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> InstanceRepository repository<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> ObjectProvider<span class="token operator">&lt;</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>Notifier<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> otherNotifiers<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token function">NotifierConfig</span><span class="token punctuation">(</span>InstanceRepository repository<span class="token punctuation">,</span> ObjectProvider<span class="token operator">&lt;</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>Notifier<span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> otherNotifiers<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>repository <span class="token operator">=</span> repository<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>otherNotifiers <span class="token operator">=</span> otherNotifiers<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> FilteringNotifier <span class="token function">filteringNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
    CompositeNotifier delegate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CompositeNotifier</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>otherNotifiers<span class="token punctuation">.</span><span class="token function">getIfAvailable</span><span class="token punctuation">(</span>Collections<span class="token operator">:</span><span class="token operator">:</span>emptyList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">FilteringNotifier</span><span class="token punctuation">(</span>delegate<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

	<span class="token comment">//ä½¿ç”¨FilterInNotifierä½œä¸ºå§”æ‰˜ï¼Œå°†RemindingNotifier åšä¸ºä¸»bean</span>
  <span class="token annotation punctuation">@Primary</span>
  <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">"start"</span><span class="token punctuation">,</span> destroyMethod <span class="token operator">=</span> <span class="token string">"stop"</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> RemindingNotifier <span class="token function">remindingNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
    RemindingNotifier notifier <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RemindingNotifier</span><span class="token punctuation">(</span><span class="token function">filteringNotifier</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>
    notifier<span class="token punctuation">.</span><span class="token function">setReminderPeriod</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    notifier<span class="token punctuation">.</span><span class="token function">setCheckReminderInverval</span><span class="token punctuation">(</span>Duration<span class="token punctuation">.</span><span class="token function">ofSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> notifier<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>â—ï¸ æœ¬ä¾‹ç»“åˆäº†æé†’å’Œè¿‡æ»¤é€šçŸ¥ã€‚è¿™å…è®¸æ‚¨éƒ¨ç½²çš„åº”ç”¨ç¨‹åºåœ¨ä¸€å®šæ—¶é—´å†…ï¼ˆç›´åˆ°è¿‡æ»¤å™¨è¿‡æœŸï¼‰æ²¡æœ‰é‡æ–°å¯åŠ¨åè·å–é€šçŸ¥ã€‚</p>
</blockquote>
<h3><a id="4513__682"></a>4.5.13 é’‰é’‰é€šçŸ¥</h3>
<p>è¦å¼€å¯<a href="https://www.dingtalk.com/">DingTalk</a>é€šçŸ¥ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªé’‰é’‰æœºå™¨äººï¼Œå¹¶æ­£ç¡®è®¾ç½®webhookUrl å’Œç§˜é’¥</p>
<p><em>Table 16. DingTalk é€šçŸ¥é…ç½®é€‰é¡¹</em></p>
<table><thead><tr><th align="left">Property name</th><th align="left">Description</th><th align="left">Default value</th></tr></thead><tbody><tr><td align="left">spring.boot.admin.notify.dingtalk.enabled</td><td align="left">å¼€å¯é’‰é’‰é€šçŸ¥</td><td align="left"><code>true</code></td></tr><tr><td align="left">spring.boot.admin.notify.dingtalk.webhook-url</td><td align="left">DingTalk webhook URLåœ°å€</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.dingtalk.secret</td><td align="left">æ¶ˆæ¯ç§˜é’¥</td><td align="left"></td></tr><tr><td align="left">spring.boot.admin.notify.dingtalk.message</td><td align="left">å‘é€çš„æ–‡æœ¬ã€‚æ”¯æŒSpELè¡¨è¾¾å¼</td><td align="left"><code>"#{instance.registration.name} #{instance.id} is #{event.statusInfo.status} "</code></td></tr></tbody></table>
<h1><a id="5__694"></a>5. å®‰å…¨</h1>
<h2><a id="51_Spring_Boot_Admin_Server__695"></a>5.1 Spring Boot Admin Server å®‰å…¨</h2>
<p>ç”±äºæœ‰å‡ ç§æ–¹æ³•å¯ä»¥è§£å†³åˆ†å¸ƒå¼webåº”ç”¨ç¨‹åºä¸­çš„èº«ä»½éªŒè¯å’Œæˆæƒé—®é¢˜ï¼Œå› æ­¤Spring Boot Adminæ²¡æœ‰æä¾›é»˜è®¤æ–¹æ³•ã€‚<code>spring-boot-admin-server-ui</code>é»˜è®¤ä¼šæä¾›ä¸€ä¸ªç™»å½•é¡µé¢å’Œç™»å‡ºã€‚</p>
<p>Spring Securityé…ç½®åœ¨æœåŠ¡ç«¯çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecuritySecureConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{<!-- --></span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> AdminServerProperties adminServer<span class="token punctuation">;</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> SecurityProperties security<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token function">SecuritySecureConfig</span><span class="token punctuation">(</span>AdminServerProperties adminServer<span class="token punctuation">,</span> SecurityProperties security<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>adminServer <span class="token operator">=</span> adminServer<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>security <span class="token operator">=</span> security<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
    SavedRequestAwareAuthenticationSuccessHandler successHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SavedRequestAwareAuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    successHandler<span class="token punctuation">.</span><span class="token function">setTargetUrlParameter</span><span class="token punctuation">(</span><span class="token string">"redirectTo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    successHandler<span class="token punctuation">.</span><span class="token function">setDefaultTargetUrl</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>authorizeRequests<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> 
   
<span class="token comment">//æˆäºˆå¯¹æ‰€æœ‰é™æ€èµ„äº§å’Œç™»å½•é¡µé¢çš„å…¬å…±è®¿é—®æƒé™ã€‚</span>
       authorizeRequests<span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/assets/**"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/actuator/info"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/actuator/health"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
            <span class="token comment">//å…¶ä»–è¯·æ±‚å¿…é¡»éªŒè¯</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span>
    <span class="token operator">/</span><span class="token operator">/</span>é…ç½®ç™»å½•å’Œç™»å‡º
        <span class="token punctuation">(</span>formLogin<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> formLogin<span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span>successHandler<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">(</span>logout<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> logout<span class="token punctuation">.</span><span class="token function">logoutUrl</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/logout"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span>Customizer<span class="token punctuation">.</span><span class="token function">withDefaults</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
    <span class="token operator">/</span><span class="token operator">/</span>ä½¿ç”¨Cookieå¯ç”¨CSRFä¿æŠ¤
       <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">(</span>csrf<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> csrf<span class="token punctuation">.</span><span class="token function">csrfTokenRepository</span><span class="token punctuation">(</span>CookieCsrfTokenRepository<span class="token punctuation">.</span><span class="token function">withHttpOnlyFalse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
       <span class="token operator">/</span><span class="token operator">/</span>ç¦ç”¨Spring Bootç®¡ç†å®¢æˆ·ç«¯ç”¨äºï¼ˆå–æ¶ˆï¼‰æ³¨å†Œçš„ç«¯ç‚¹çš„CSRFä¿æŠ¤ã€‚
           <span class="token punctuation">.</span><span class="token function">ignoringRequestMatchers</span><span class="token punctuation">(</span>
                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/instances"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    HttpMethod<span class="token punctuation">.</span>POST<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/instances/*"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    HttpMethod<span class="token punctuation">.</span>DELETE<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
                    <span class="token comment">//ç¦ç”¨actuatorç«¯ç‚¹çš„CSRFä¿æŠ¤</span>
                <span class="token keyword">new</span> <span class="token class-name">AntPathRequestMatcher</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>adminServer<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">"/actuator/**"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
            <span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>rememberMe<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> rememberMe<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span>UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokenValiditySeconds</span><span class="token punctuation">(</span><span class="token number">1209600</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Required to provide UserDetailsService for "remember functionality"</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>AuthenticationManagerBuilder auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
    auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span>security<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">"{noop}"</span> <span class="token operator">+</span> security<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"USER"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<p>å¦‚æœæ‚¨ä½¿ç”¨Spring Boot Adminå®¢æˆ·ç«¯ï¼Œå®ƒéœ€è¦è®¿é—®æœåŠ¡å™¨çš„å‡­æ®ï¼š<br/> <em>application.yml</em></p>
<pre><code class="prism language-xml">spring.boot.admin.client:
   username: sba-client
   password: s3cret
</code></pre>
<p>æœ‰å…³å®Œæ•´çš„ç¤ºä¾‹ï¼Œè¯·å‚é˜…<a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-servlet/">spring-boot-admin-sample-servlet</a>ã€‚</p>
<blockquote>
<p>â—ï¸ å¦‚æœæ‚¨è®¾ç½®äº†ä¿æŠ¤<code>/instances</code>ç«¯ç‚¹ï¼Œé‚£ä¹ˆä¸è¦å¿˜è®°åœ¨SBA-Clientå®¢æˆ·ç«¯è®¾ç½®ç”¨æˆ·åå’Œå¯†ç <code>spring.boot.admin.client.username</code> å’Œ <code>spring.boot.admin.client.password</code>ã€‚</p>
</blockquote>
<h2><a id="52_Actuator_767"></a>5.2 ä¿æŠ¤å®¢æˆ·ç«¯Actuatorç«¯ç‚¹</h2>
<p>å½“ä½¿ç”¨HTTPåŸºæœ¬èº«ä»½éªŒè¯ä¿æŠ¤æ‰§è¡Œå™¨ç«¯ç‚¹æ—¶ï¼ŒSBAæœåŠ¡å™¨éœ€è¦å‡­æ®æ‰èƒ½è®¿é—®å®ƒä»¬ã€‚æ³¨å†Œåº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥åœ¨å…ƒæ•°æ®ä¸­æäº¤å‡­æ®ã€‚<code>BasicAuthHttpHeaderProvider</code>ä½¿ç”¨æ­¤å…ƒæ•°æ®æ·»åŠ <code>Authorization</code>å¤´ä»¥è®¿é—®åº”ç”¨ç¨‹åºçš„æ‰§è¡Œå™¨ç«¯ç‚¹ã€‚æ‚¨å¯ä»¥æä¾›è‡ªå·±çš„<code>HttpHeadersProvider</code>æ¥æ”¹å˜è¡Œä¸ºï¼ˆä¾‹å¦‚æ·»åŠ ä¸€äº›è§£å¯†ï¼‰æˆ–æ·»åŠ é¢å¤–çš„å¤´ã€‚</p>
<blockquote>
<p>â—ï¸ SBAæœåŠ¡ç«¯ä¼šå±è”½HTTPæ¥å£ä¸­çš„æŸäº›å…ƒæ•°æ®ï¼Œä»¥é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„æ¼ã€‚</p>
</blockquote>
<blockquote>
<p>â—ï¸ é€šè¿‡å…ƒæ•°æ®æäº¤å‡­æ®æ—¶ï¼Œåº”ä¸ºSBAæœåŠ¡å™¨æˆ–ï¼ˆæœåŠ¡æ³¨å†Œè¡¨ï¼‰é…ç½®HTTPSã€‚</p>
</blockquote>
<blockquote>
<p>â—ï¸ä½¿ç”¨Spring Cloud Discoveryæ—¶ï¼Œæ‚¨å¿…é¡»çŸ¥é“ï¼Œä»»ä½•å¯ä»¥æŸ¥è¯¢æ‚¨çš„æœåŠ¡æ³¨å†Œè¡¨çš„äººéƒ½å¯ä»¥è·å¾—å‡­æ®ã€‚</p>
</blockquote>
<blockquote>
<p>ğŸ’¡ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼ŒSBAæœåŠ¡å™¨å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®å·²æ³¨å†Œçš„åº”ç”¨ç¨‹åºã€‚å¯èƒ½æœ‰æ›´å¤æ‚çš„è§£å†³æ–¹æ¡ˆï¼ˆä½¿ç”¨OAuth2ï¼‰è®©å®¢æˆ·ç«¯å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç«¯ç‚¹ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ç¤ºä¾‹<a href="https://github.com/joshiste/spring-boot-admin-samples">joshiste/spring-boot-admin-samples</a></p>
</blockquote>
<h3><a id="521_SBA_777"></a>5.2.1 SBAå®¢æˆ·ç«¯</h3>
<p><em>application.yml</em></p>
<pre><code class="prism language-yml"><span class="token key atrule">spring.boot.admin.client</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">instance</span><span class="token punctuation">:</span>
      <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
        <span class="token key atrule">user.name</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.name<span class="token punctuation">}</span>
        <span class="token key atrule">user.password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.password<span class="token punctuation">}</span>
</code></pre>
<h3><a id="522_SBA_788"></a>5.2.2 SBAæœåŠ¡ç«¯</h3>
<p>æ‚¨å¯ä»¥åœ¨AdminæœåŠ¡ç«¯ä¸­é€šè¿‡é…ç½®å±æ€§æŒ‡å®šå‡­æ®ã€‚</p>
<blockquote>
<p>ğŸ’¡æ‚¨å¯ä»¥å°†å…¶ä¸<a href="https://cloud.spring.io/spring-cloud-kubernetes/1.1.x/reference/html/#secrets-propertysource">spring cloud kubernetes</a>ç»“åˆä½¿ç”¨ï¼Œä»<a href="https://kubernetes.io/docs/concepts/configuration/secret/">secrets</a>ä¸­æå–å‡­æ®ã€‚</p>
</blockquote>
<p>å¯ç”¨ä»å±æ€§ä¸­æå–å‡­æ®ï¼Œ<code>spring.boot.admin.instance-auth.enabled</code>å¿…é¡»è®¾ç½®ä¸ºtrue(é»˜è®¤)ã€‚</p>
<blockquote>
<p>â—ï¸å¦‚æœæ‚¨çš„å®¢æˆ·ç«¯é€šè¿‡å…ƒæ•°æ®æä¾›å‡­æ®ï¼Œåˆ™å°†ä½¿ç”¨è¯¥å…ƒæ•°æ®è€Œä¸æ˜¯å±æ€§ã€‚</p>
</blockquote>
<p>æ‚¨å¯ä»¥é€šè¿‡ <code>spring.boot.admin.instance-auth.default-user-name</code>å’Œ<code>spring.boot.admin.instance-auth.default-user-password</code>è®¾ç½®é»˜è®¤ç”¨æˆ·åå’Œå¯†ç ã€‚ï¼ˆå¯é€‰çš„ï¼‰æ‚¨å¯ä»¥æä¾›æŒ‡å®šæœåŠ¡çš„å‡­æ®ï¼ˆæŒ‰åç§°ï¼‰<code>spring.boot.admin.instance-auth.service-map.*.user-name</code>,å°†<code>*</code>ä»£æ›¿ä¸ºå…·ä½“çš„æœåŠ¡åã€‚</p>
<p><em>application.yml</em></p>
<pre><code class="prism language-yml"><span class="token key atrule">spring.boot.admin</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance-auth</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">default-user-name</span><span class="token punctuation">:</span> <span class="token string">"${some.user.name.from.secret}"</span>
    <span class="token key atrule">default-password</span><span class="token punctuation">:</span> <span class="token string">"${some.user.password.from.secret}"</span>
    <span class="token key atrule">service-map</span><span class="token punctuation">:</span>
      <span class="token key atrule">my-first-service-to-monitor</span><span class="token punctuation">:</span>
        <span class="token key atrule">user-name</span><span class="token punctuation">:</span> <span class="token string">"${some.user.name.from.secret}"</span>
        <span class="token key atrule">user-password</span><span class="token punctuation">:</span> <span class="token string">"${some.user.password.from.secret}"</span>
      <span class="token key atrule">my-second-service-to-monitor</span><span class="token punctuation">:</span>
        <span class="token key atrule">user-name</span><span class="token punctuation">:</span> <span class="token string">"${some.user.name.from.secret}"</span>
        <span class="token key atrule">user-password</span><span class="token punctuation">:</span> <span class="token string">"${some.user.password.from.secret}"</span>
</code></pre>
<h3><a id="523_Eureka_815"></a>5.2.3 Eureka</h3>
<p><em>application.yml</em></p>
<pre><code class="prism language-yml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata-map</span><span class="token punctuation">:</span>
      <span class="token key atrule">user.name</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.name<span class="token punctuation">}</span>
      <span class="token key atrule">user.password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.password<span class="token punctuation">}</span>
</code></pre>
<h3><a id="524_Consul_825"></a>5.2.4 Consul</h3>
<p><em>application.yml</em></p>
<pre><code class="prism language-yml"><span class="token key atrule">spring.cloud.consul</span><span class="token punctuation">:</span>
  <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
        <span class="token key atrule">user-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.name<span class="token punctuation">}</span>
        <span class="token key atrule">user-password</span><span class="token punctuation">:</span> $<span class="token punctuation">{<!-- --></span>spring.security.user.password<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>â—ï¸ Consul ä¸å…è®¸<code>.</code>åœ¨å…ƒæ•°æ®keyä¸­ï¼Œè¯·æ”¹ç”¨<code>-</code></p>
</blockquote>
<h3><a id="525_Actuator_CSRF_836"></a>5.2.5 Actuatorç«¯ç‚¹ä¸Šçš„ CSRF</h3>
<p>ä¸€äº›actuator ç«¯ç‚¹ï¼ˆå¦‚ï¼š<code>/loggers</code>ï¼‰æ”¯æŒPOSTè¯·æ±‚ã€‚ä½†ä½¿ç”¨Spring Security æ—¶ï¼Œæ‚¨éœ€è¦å¿½ç•¥ç«¯ç‚¹ä¸Šçš„CSRFä¿æŠ¤ï¼Œå› ä¸ºå½“å‰Spring Boot Admin Server è¿˜ç¼ºå°‘æ”¯æŒã€‚</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span>HttpSecurity http<span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
    http<span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">ignoringAntMatchers</span><span class="token punctuation">(</span><span class="token string">"/actuator/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<h2><a id="53_Mutual_TLS_848"></a>5.3 ä½¿ç”¨Mutual TLS</h2>
<p>SBAæœåŠ¡å™¨è¿˜å¯ä»¥åœ¨è®¿é—®æ‰§è¡Œå™¨ç«¯ç‚¹æ—¶ä½¿ç”¨å®¢æˆ·ç«¯è¯ä¹¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœå­˜åœ¨è‡ªå®šä¹‰é…ç½®çš„<code>ClientHttpConnector</code>beanï¼ŒSpring Bootå°†è‡ªåŠ¨é…ç½®<code>WebClient.Builder</code>ï¼Œå®ƒå°†è¢«SBAä½¿ç”¨ã€‚</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> ClientHttpConnector <span class="token function">customHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    SslContextBuilder sslContext <span class="token operator">=</span> SslContextBuilder<span class="token punctuation">.</span><span class="token function">forClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ‚¨çš„è‡ªå®šä¹‰sslContext å°†è½¬åˆ°æ­¤å¤„</span>
    HttpClient httpClient <span class="token operator">=</span> HttpClient<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">secure</span><span class="token punctuation">(</span>
        ssl <span class="token operator">-</span><span class="token operator">&gt;</span> ssl<span class="token punctuation">.</span><span class="token function">sslContext</span><span class="token punctuation">(</span>sslContext<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ReactorClientHttpConnector</span><span class="token punctuation">(</span>httpClient<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h1><a id="6__862"></a>6 è‡ªå®šä¹‰</h1>
<h2><a id="61__863"></a>6.1 è‡ªå®šä¹‰é€šçŸ¥</h2>
<p>æ‚¨å¯ä»¥é€šè¿‡å®ç°<code>Notifier</code>æ¥è‡ªå®šä¹‰é€šçŸ¥ã€‚æ¨èç»§æ‰¿<code>AbstractEventNotifier</code>æˆ–è€…<code>AbstractStatusChangeNotifier</code>ã€‚</p>
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomNotifier</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractEventNotifier</span> <span class="token punctuation">{<!-- --></span>

  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Logger LOGGER <span class="token operator">=</span> LoggerFactory<span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span>LoggingNotifier<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token function">CustomNotifier</span><span class="token punctuation">(</span>InstanceRepository repository<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>repository<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> Mono<span class="token generics function"><span class="token punctuation">&lt;</span>Void<span class="token punctuation">&gt;</span></span> <span class="token function">doNotify</span><span class="token punctuation">(</span>InstanceEvent event<span class="token punctuation">,</span> Instance instance<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> Mono<span class="token punctuation">.</span><span class="token function">fromRunnable</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>event <span class="token keyword">instanceof</span> <span class="token class-name">InstanceStatusChangedEvent</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Instance {} ({}) is {}"</span><span class="token punctuation">,</span> instance<span class="token punctuation">.</span><span class="token function">getRegistration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token punctuation">(</span>InstanceStatusChangedEvent<span class="token punctuation">)</span> event<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatusInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        LOGGER<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"Instance {} ({}) {}"</span><span class="token punctuation">,</span> instance<span class="token punctuation">.</span><span class="token function">getRegistration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            event<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<h2><a id="62_HTTP_891"></a>6.2 æ³¨å…¥è‡ªå®šä¹‰HTTPå¤´</h2>
<p>å¦‚æœè¦åœ¨ç›‘æ§åº”ç”¨ç¨‹åºactuatorç«¯ç‚¹çš„è¯·æ±‚ä¸­åŠ å…¥è‡ªå®šä¹‰çš„HTTPå¤´ï¼Œå¯ä»¥é€šè¿‡<code>HttpHeadersProvider</code>è½»æ¾å®ç°ã€‚</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> HttpHeadersProvider <span class="token function">customHttpHeadersProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>instance<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    HttpHeaders httpHeaders <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HttpHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    httpHeaders<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"X-CUSTOM"</span><span class="token punctuation">,</span> <span class="token string">"My Custom Value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> httpHeaders<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="63__903"></a>6.3 æ‹¦æˆªè¯·æ±‚å’Œå“åº”</h2>
<p>é€šè¿‡å®ç°<code>InstanceExchangeFilterFunction</code>æ¥å£ï¼Œå¯ä»¥æ‹¦æˆªå’Œä¿®æ”¹å¯¹å—ç›‘æ§åº”ç”¨ç¨‹åºçš„æ‰§è¡Œå™¨ç«¯ç‚¹çš„è¯·æ±‚å’Œå“åº”ã€‚è¿™å¯¹äºå®¡æ ¸æˆ–æ·»åŠ ä¸€äº›é¢å¤–çš„å®‰å…¨æ£€æŸ¥éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="prism language-java"><span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> InstanceExchangeFilterFunction <span class="token function">auditLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>instance<span class="token punctuation">,</span> request<span class="token punctuation">,</span> next<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> next<span class="token punctuation">.</span><span class="token function">exchange</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doOnSubscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>HttpMethod<span class="token punctuation">.</span>DELETE<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> HttpMethod<span class="token punctuation">.</span>POST<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"{} for {} on {}"</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> instance<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="64__916"></a>6.4 é“¾æ¥/åµŒå…¥å¤–éƒ¨é¡µé¢</h2>
<p>æ‚¨å¯ä»¥éå¸¸ç®€å•çš„å°†é“¾æ¥æˆ–è€…å¤–éƒ¨é¡µé¢æ·»åŠ åˆ°SBAï¼Œç”šè‡³æ˜¯åµŒå…¥(<code>iframe=true</code>)</p>
<pre><code class="prism language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">boot</span><span class="token punctuation">:</span>
    <span class="token key atrule">admin</span><span class="token punctuation">:</span>
      <span class="token key atrule">ui</span><span class="token punctuation">:</span>
        <span class="token key atrule">external-views</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">label</span><span class="token punctuation">:</span> <span class="token string">"ğŸš€"</span>
            <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//codecentric.de
            <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token number">2000</span>
</code></pre>
<h2><a id="65__930"></a>6.5 è‡ªå®šä¹‰è§†å›¾</h2>
<p>å¯ä»¥å‘uiæ·»åŠ è‡ªå®šä¹‰è§†å›¾ã€‚è§†å›¾å¿…é¡»æ˜¯åŸºäº<a href="https://vuejs.org/">Vue.js</a>çš„ã€‚</p>
<p>JavaScriptåŒ…å’ŒCSSæ ·å¼è¡¨å¿…é¡»æ”¾åœ¨<code>/META-INF/spring-boot-admin-server-ui/extensions/{name}/</code>çš„ç±»è·¯å¾„ä¸Šï¼Œä»¥ä¾¿æœåŠ¡å™¨å¯ä»¥æå–å®ƒä»¬ã€‚</p>
<p><a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-samples/spring-boot-admin-sample-custom-ui/">spring-boot-admin-sample-custom-ui</a> æä¾›äº†ä¸€ä¸ªç®€å•çš„UIï¼ŒåŒ…å«æ„å»ºè¿™æ ·ä¸€ä¸ªmoduleçš„å¿…è¦mavené…ç½®ã€‚</p>
<p>è‡ªå®šä¹‰æ‰©å±•é€šè¿‡<code>SBA.use()</code>è¿›è¡Œè‡ªæˆ‘æ³¨å†Œï¼Œå¹¶é€šè¿‡<code>install()</code>æš´éœ²è‡ªå·±ï¼Œå½“UIè®¾ç½®è·¯ç”±æ—¶è°ƒç”¨ã€‚<code>install()</code>å‡½æ•°æ¥å—ä»¥ä¸‹å‚æ•°ä»¥æ³¨å†Œè§†å›¾å’Œå›è°ƒã€‚</p>
<ul><li> <p>å¼•ç”¨<a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-server-ui/src/main/frontend/viewRegistry.js">viewRegistry</a>çš„å¯¹è±¡</p> </li><li> <p>å¼•ç”¨ <a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-server-ui/src/main/frontend/store.js">applicationStore</a>çš„å¯¹è±¡</p> </li><li> <p>å¼•ç”¨å…¨å±€Vueçš„å¯¹è±¡</p> </li><li> <p>å¼•ç”¨axiosçš„å¯¹è±¡</p> </li></ul>
<p>å¦‚æœå°†æ–°çš„é¡¶å±‚è·¯ç”±æ·»åŠ åˆ°å‰ç«¯ï¼Œåç«¯ä¹Ÿå¿…é¡»çŸ¥é“ã€‚åœ¨<code>/META-INF/spring-boot-admin-server-ui/extensions/{name}/routes.txt</code>ä¸­æ¯è¡Œæ·»åŠ ä¸€ä¸ªé¡¶å±‚è·¯ç”±ã€‚</p>
<h3><a id="651__947"></a>6.5.1 æ·»åŠ é¡¶å±‚è§†å›¾</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é¡¶å±‚è§†å›¾ï¼Œåˆ—å‡ºäº†æ‰€æœ‰æ³¨å†Œçš„åº”ç”¨ç¨‹åºï¼š</p>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pre</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stringify(applications, null, 4)<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  props<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    applications<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> 
      type<span class="token punctuation">:</span> Array<span class="token punctuation">,</span>
      required<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    stringify<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>stringify
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<blockquote>
<p>â—ï¸å¦‚æœæ‚¨å®šä¹‰äº†<code>applications</code>å±æ€§ï¼Œé‚£ä¹ˆå°†æ¥å—æ‰€æœ‰æ³¨å†Œçš„åº”ç”¨ç¨‹åº</p>
</blockquote>
<blockquote>
<p>ğŸ’¡ æœ‰ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ï¼ŒæŸ¥çœ‹ <a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-server-ui/src/main/frontend/services/application.js">application.js</a> å’Œ <a href="https://github.com/codecentric/spring-boot-admin/tree/master/spring-boot-admin-server-ui/src/main/frontend/services/instance.js">instance.js</a></p>
</blockquote>
<pre><code class="prism language-js"><span class="token constant">SBA</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>viewRegistry<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    viewRegistry<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//è§†å›¾åç§°</span>
      name<span class="token punctuation">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>
      <span class="token comment">//è§†å›¾è®¿é—®è·¯å¾„  </span>
      path<span class="token punctuation">:</span> <span class="token string">'/custom'</span><span class="token punctuation">,</span>
      <span class="token comment">//å¯¼å…¥çš„è‡ªå®šä¹‰ç»„ä»¶</span>
      component<span class="token punctuation">:</span> custom<span class="token punctuation">,</span>
      <span class="token comment">// è‡ªå®šä¹‰è§†å›¾åœ¨é¡¶éƒ¨å¯¼èˆªæ æ˜¾ç¤ºçš„æ ‡ç­¾</span>
      label<span class="token punctuation">:</span> <span class="token string">'Custom'</span><span class="token punctuation">,</span> 
      <span class="token comment">//è§†å›¾çš„é¡ºåºã€‚é¡¶éƒ¨å¯¼èˆªæ ä¸­çš„è§†å›¾æŒ‰å‡åºæ’åºã€‚</span>
      order<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>åœ¨<code>routes.txt</code>ä¸­æ·»åŠ è·¯ç”±</p>
<pre><code class="prism language-xml">/custom/**
</code></pre>
<h3><a id="652__996"></a>6.5.2 å¯è§†åŒ–è‡ªå®šä¹‰ç«¯ç‚¹</h3>
<p>ä»¥ä¸‹æ˜¯æ˜¾ç¤ºè‡ªå®šä¹‰ç«¯ç‚¹çš„è§†å›¾ï¼š</p>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>custom<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Instance: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>instance.id<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Output: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    props<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//å¦‚æœå®šä¹‰å®ä¾‹å±æ€§ï¼Œç»„ä»¶å°†æ¥æ”¶åº”æ¸²æŸ“è§†å›¾çš„å®ä¾‹ã€‚</span>
     instance<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> 
        type<span class="token punctuation">:</span> Object<span class="token punctuation">,</span>
        required<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      text<span class="token punctuation">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//æ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€ä¸ªé¢„é…ç½®çš„axioså®ä¾‹ï¼Œç”¨äºä½¿ç”¨æ­£ç¡®çš„è·¯å¾„å’Œå¤´è®¿é—®ç«¯ç‚¹ã€‚</span>
     <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'actuator/custom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
      <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
  <span class="token selector">.custom</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 80%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>æ³¨å†Œå®ä¾‹è§†å›¾çš„å·¥ä½œæ–¹å¼ä¸é¡¶çº§è§†å›¾ç±»ä¼¼ï¼Œå…·æœ‰ä¸€äº›é™„åŠ å±æ€§ï¼š</p>
<pre><code class="prism language-js"><span class="token constant">SBA</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>viewRegistry<span class="token punctuation">,</span> vueI18n<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    viewRegistry<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      name<span class="token punctuation">:</span> <span class="token string">'instances/custom'</span><span class="token punctuation">,</span>
      <span class="token comment">//çˆ¶å¯¹è±¡å¿…é¡»æ˜¯å®ä¾‹</span>
      parent<span class="token punctuation">:</span> <span class="token string">'instances'</span><span class="token punctuation">,</span> 
      path<span class="token punctuation">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>
      component<span class="token punctuation">:</span> customEndpoint<span class="token punctuation">,</span>
      label<span class="token punctuation">:</span> <span class="token string">'Custom'</span><span class="token punctuation">,</span>
      <span class="token comment">//ä½¿ç”¨ç»„æ¥ç»™è§†å›¾åˆ†ç»„</span>
      group<span class="token punctuation">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span> 
      order<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
      <span class="token comment">//æ‚¨å¯ä»¥åŠ¨æ€ç¡®å®šæ˜¯å¦åº”è¯¥ä¸ºç‰¹å®šå®ä¾‹æ˜¾ç¤ºè§†å›¾</span>
     isEnabled<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>instance<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> instance<span class="token punctuation">.</span><span class="token function">hasEndpoint</span><span class="token punctuation">(</span><span class="token string">'custom'</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//è‡ªå®šä¹‰ç¿»è¯‘</span>
    vueI18n<span class="token punctuation">.</span><span class="token function">mergeLocaleMessage</span><span class="token punctuation">(</span><span class="token string">'en'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> 
      sidebar<span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
        custom <span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span>
          title <span class="token punctuation">:</span> <span class="token string">"My Custom Extensions"</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>â—ï¸ é€šè¿‡è®¾ç½®ç»„åå’Œåç§°ï¼Œå¯ä»¥è¦†ç›–é»˜è®¤çš„è§†å›¾</p>
</blockquote>
<p>PM: 2022å¹´7æœˆ5æ—¥02:50:39</p>
<h2><a id="66_Logo_1068"></a>6.6 è‡ªå®šä¹‰å¤´éƒ¨Logoå’Œæ ‡é¢˜</h2>
<p>æ‚¨å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„é…ç½®ï¼Œåœ¨å¤´éƒ¨æ˜¾ç¤ºè‡ªå®šä¹‰ä¿¡æ¯ï¼š</p>
<ul><li>spring.boot.admin.ui.brandï¼š è¿™æ®µHTMLåœ¨å¤´éƒ¨å¯¼èˆªä¸­æ˜¾ç¤ºï¼Œé»˜è®¤ä¸º<code>&lt;img src="assets/img/icon-spring-boot-admin.svg"&gt;&lt;span&gt;Spring Boot Admin&lt;/span&gt;</code>ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¾ç¤ºSBA Logo åé¢ç´§è·Ÿåç§°ã€‚å¦‚æœä½ æƒ³è¦å±•ç¤ºè‡ªå®šä¹‰çš„Logoï¼Œè®¾ç½®ï¼š<code>spring.boot.admin.ui.brand=&lt;img src="custom/custom-icon.png"&gt;</code>ã€‚æˆ–è€…æ‚¨åªéœ€è¦å°†å›¾åƒæ·»åŠ åˆ°æ‚¨JaråŒ…çš„<code>/META-INF/spring-boot-admin-server-ui/</code>ä¸­(SBAé»˜è®¤ä»è¯¥è·¯å¾„æ³¨å†Œ<code>ResourceHandler</code>),æˆ–è€…æ‚¨å¿…é¡»ç¡®ä¿å›¾åƒå¾—åˆ°æ­£ç¡®çš„æœåŠ¡ï¼ˆå¦‚æ³¨å†Œæ‚¨è‡ªå·±çš„<code>ResourceHandler</code>ï¼‰</li><li>spring.boot.admin.ui.title: ä½¿ç”¨æ­¤é€‰é¡¹å¯è‡ªå®šä¹‰æµè§ˆå™¨çª—å£æ ‡é¢˜ã€‚</li></ul>
<h2><a id="67_Logo_1074"></a>6.7 è‡ªå®šä¹‰ç™»å½•Logo</h2>
<p>æ‚¨å¯ä»¥è®¾ç½®ä¸€ä¸ªè‡ªå®šä¹‰å›¾ç‰‡æ˜¾ç¤ºåœ¨ç™»å½•é¡µé¢ã€‚</p>
<ol><li>å°†å›¾åƒæ”¾åœ¨é€šè¿‡httpæä¾›æœåŠ¡çš„èµ„æºä½ç½®ï¼ˆå¦‚ï¼š/META-INF/spring-boot-admin-server-ui/assets/img/ï¼‰</li><li>é…ç½®ä¸‹é¢å±æ€§<br/> spring.boot.admin.ui.login-icon: ç”¨ä½œç™»å½•é¡µé¢ä¸Šçš„å›¾æ ‡ (æ¯”å¦‚ assets/img/custom-login-icon.svg)</li></ol>
<h2><a id="68_Favicon_1080"></a>6.8 è‡ªå®šä¹‰Favicon</h2>
<p>å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰faviconï¼Œå®ƒä¹Ÿç”¨äºæ¡Œé¢é€šçŸ¥ã€‚å½“ä¸€ä¸ªæˆ–å¤šä¸ªåº”ç”¨ç¨‹åºå…³é—­æ—¶ï¼ŒSpring Boot Adminä½¿ç”¨ä¸åŒçš„å›¾æ ‡ã€‚</p>
<ol><li> <p>æ”¾ç½®favicon(<code>.png</code>è‡³å°‘192x192åƒç´ )åœ¨èµ„æºè·¯å¾„(æ¯”å¦‚ï¼š/META-INF/spring-boot-admin-server-ui/assets/img/)</p> </li><li> <p>é…ç½®icons<br/> - spring.boot.admin.ui.favicon: ç”¨ä½œé»˜è®¤å›¾æ ‡. (æ¯”å¦‚ assets/img/custom-favicon.png<br/> - spring.boot.admin.ui.favicon-danger:å½“ä¸€ä¸ªæˆ–å¤šä¸ªæœåŠ¡å…³é—­æ—¶ä½¿ç”¨ã€‚(æ¯”å¦‚ assets/img/custom-favicon-danger.png)</p> </li></ol>
<h2><a id="69__1089"></a>6.9 è‡ªå®šä¹‰å¯ç”¨è¯­è¨€</h2>
<p>spring.boot.admin.ui.available-languagesï¼š è¦é€‰ç”¨çš„è¯­è¨€ã€‚ (æ¯”å¦‚ en,de out of existing de,en,fr,ko,pt-BR,ru,zh)</p>
<h2><a id="_1093"></a>æ˜¾ç¤º/éšè—è§†å›¾</h2>
<p>æ‚¨å¯ä»¥å¾ˆç®€å•çš„åœ¨å¯¼èˆªæ ä¸­éšè—è§†å›¾ï¼š</p>
<pre><code class="prism language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">boot</span><span class="token punctuation">:</span>
    <span class="token key atrule">admin</span><span class="token punctuation">:</span>
      <span class="token key atrule">ui</span><span class="token punctuation">:</span>
        <span class="token key atrule">view-settings</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"journal"</span>
            <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre>
<h1><a id="7_Spring_Boot_15x_1104"></a>7. ç›‘æ§Spring Boot 1.5.x</h1>
<p>å¯ä»¥ä½¿ç”¨SBA 2.xç›‘æ§ SB 1.5xçš„åº”ç”¨ã€‚æ—§çš„SBA Client å¯ä»¥æ³¨å†Œåœ¨æ–°çš„æœåŠ¡ç«¯ä¸Šã€‚ç”±äºAPIç•¥æœ‰å˜åŒ–ï¼Œæ‚¨éœ€è¦åœ¨æ—§å®¢æˆ·ç«¯ä¸Šè®¾ç½®ä»¥ä¸‹å±æ€§ï¼š</p>
<ol><li>åœ¨SBA Client 1.5xä¸Šé‡æ–°é…ç½® apiè·¯å¾„<br/> <em>application.yml</em></li></ol>
<pre><code class="prism language-xml">spring.boot.admin.api-path: instances

</code></pre>
<p>éšç€Spring Boot 2 release ç‰ˆæœ¬çš„å‘å¸ƒï¼Œä¸€äº›æ‰§è¡Œå™¨ç«¯ç‚¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå¹¶éæ‰€æœ‰é€‰é¡¹éƒ½å¯ç”¨ï¼ˆä¾‹å¦‚/metricsç«¯ç‚¹ï¼‰ï¼›å¯¹äºä¸€äº›ç«¯ç‚¹ï¼Œæˆ‘ä»¬æä¾›äº†è½¬æ¢å™¨ã€‚</p>
<p>PMï¼š2022å¹´7æœˆ5æ—¥03:23:20</p>
<hr class="footnotes-sep"/>
<section class="footnotes">
<ol class="footnotes-list"><li class="footnote-item" id="fn1"><p>Atlassianå‡ºå“ï¼Œè‘—åäº§å“æœ‰Confluence <a class="footnote-backref" href="#fnref1">â†©ï¸</a></p> </li></ol>
</section>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>