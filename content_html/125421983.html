<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>æœ¬æ–‡ç›®å½•</h3>
<ul><li><a href="#_1">ğŸšå‰è¨€</a></li><li><a href="#_5">ğŸšæµ‹è¯•</a></li><li><ul><li><a href="#Pytesseract_6">ğŸšå¯¹æ¯”Pytesseract</a></li></ul>
</li><li><a href="#ddddocr_41">ğŸšä½¿ç”¨ddddocr</a></li><li><ul><li><a href="#_42">ğŸšç®€ä»‹</a></li></ul>
</li><li><a href="#_74">ğŸšå®æˆ˜</a></li><li><ul><li><a href="#_152">ğŸšæˆæœ</a></li></ul>
</li></ul>
</div>
<p></p>
<h1><a id="_1"></a>ğŸšå‰è¨€</h1>
<p>åœ¨çˆ¬è™«è¿‡ç¨‹ä¸­ï¼Œå¤§å¤šæˆ‘ä»¬éƒ½ä¼šç¢°åˆ°éªŒè¯ç è¯†åˆ«ï¼Œå®ƒæ˜¯å¸¸ç”¨çš„ä¸€ç§åçˆ¬æ‰‹æ®µï¼ŒåŒ…æ‹¬ï¼šæ»‘å—éªŒè¯ç ï¼Œå›¾ç‰‡éªŒè¯ç ï¼Œç®—æœ¯éªŒè¯ç ï¼Œç‚¹å‡»éªŒè¯ç ï¼Œæ‰€è®²çš„å›¾ç‰‡éªŒè¯ç æ˜¯è¾ƒç®€å•çš„ï¼Œå› ä¸ºæœ‰å¤§ä½¬ï¼Œç»™æˆ‘ä»¬é€ å¥½äº†è½®å­ï¼Œæˆ‘ä»¬ç›´æ¥å¥—ç”¨å°±è¡Œï¼</p>
<h1><a id="_5"></a>ğŸšæµ‹è¯•</h1>
<h2><a id="Pytesseract_6"></a>ğŸšå¯¹æ¯”Pytesseract</h2>
<p>è¿™æ˜¯é¢˜å¤–çš„ï¼Œä¸ºä»€ä¹ˆè¦åšå¯¹æ¯”å‘¢ï¼Œæœ‰å¯¹æ¯”æ‰èƒ½çŸ¥é“ä»–çš„ä¼˜ç¼ºç‚¹ã€‚</p>
<ul><li>å®‰è£…pytesseract</li></ul>
<pre><code class="prism language-python">pip install pytesseract
</code></pre>
<ul><li>å‡†å¤‡<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/e2cf2f6818ff4648bdac99fd092487c6.png"/></li></ul>
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">get_captcha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

    image <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'VerifyCode.png'</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> image<span class="token punctuation">.</span>convert<span class="token punctuation">(</span><span class="token string">'L'</span><span class="token punctuation">)</span>  <span class="token comment"># ç°åº¦å¤„ç†</span>

    threshold <span class="token operator">=</span> <span class="token number">220</span> <span class="token comment"># é˜ˆå€¼,äºŒå€¼åŒ–å¤„ç†</span>
    table <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> threshold<span class="token punctuation">:</span>
            table<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            table<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    image <span class="token operator">=</span> image<span class="token punctuation">.</span>point<span class="token punctuation">(</span>table<span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span>
    image<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ans <span class="token operator">=</span> pytesseract<span class="token punctuation">.</span>image_to_string<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span>

get_captcha<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<ul><li>ç»“æœ<br/> è¿™æ˜¯å¤„ç†è¿‡çš„å›¾ç‰‡<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/5dcabf27d38f4b94bd86902e77f44555.png"/><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/3527bef45f1f402d90e1a280919dec43.png"/><br/> <strong>å‘ç°å·®åˆ«è¿˜æ˜¯æœ‰ç‚¹å¤§çš„ï¼Œè¦æ˜¯æ²¡æœ‰è®­ç»ƒæ¨¡å‹ï¼Œç”Ÿäº§ä½¿ç”¨ç¡®å®ä¸å¤ªè¡Œï¼</strong></li></ul>
<h1><a id="ddddocr_41"></a>ğŸšä½¿ç”¨ddddocr</h1>
<h2><a id="_42"></a>ğŸšç®€ä»‹</h2>
<p>ç¡¬æ€§è¦æ±‚</p>
<blockquote>
<p>python &gt;= 3.8</p>
</blockquote>
<p>å®‰è£…</p>
<pre><code class="prism language-python">pip install ddddocr
</code></pre>
<p>GitHub<br/> <a href="https://github.com/sml2h3/ddddocr">æ–‡æ¡£åœ°å€</a></p>
<p>æµ‹è¯•ï¼Œè¿˜æ˜¯åˆšåˆšé‚£ç§å›¾ã€‚</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> ddddocr

<span class="token keyword">def</span> <span class="token function">recognize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    ocr <span class="token operator">=</span> ddddocr<span class="token punctuation">.</span>DdddOcr<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'code_img/VerifyCode.png'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        img_bytes <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">=</span> ocr<span class="token punctuation">.</span>classification<span class="token punctuation">(</span>img_bytes<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

recognize<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>ç»“æœï¼Œä¸€çœ¼å¯è§ï¼Œæ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/5ef74ee47f6a48378a01f05cc90727cc.png"/><br/> <strong>çŸ­çŸ­5è¡Œä»£ç ï¼Œå°±é¥¶è¿‡äº†å›¾ç‰‡éªŒè¯ï¼Œæ˜¯ä¸æ˜¯è§‰å¾—å¾ˆçˆ½ï¼</strong></p>
<h1><a id="_74"></a>ğŸšå®æˆ˜</h1>
<p>åˆ©ç”¨Amazonçš„æœºå™¨äººéªŒè¯ï¼Œå¸®åŠ©æˆ‘ä»¬ç»•è¿‡åçˆ¬ï¼Œè·å–æˆ‘ä»¬æ‰€è¦çš„æ•°æ®<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/c7c88230cc444415ad43d99aff95aa22.png"/></p>
<pre><code class="prism language-python"><span class="token keyword">from</span> selenium <span class="token keyword">import</span> webdriver
<span class="token keyword">from</span> selenium<span class="token punctuation">.</span>webdriver <span class="token keyword">import</span> ChromeOptions
<span class="token keyword">from</span> io <span class="token keyword">import</span> BytesIO
<span class="token keyword">import</span> time
<span class="token keyword">from</span> ocr_code <span class="token keyword">import</span> recognize
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image

options <span class="token operator">=</span> ChromeOptions<span class="token punctuation">(</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_experimental_option<span class="token punctuation">(</span><span class="token string">'excludeSwitches'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'enable-automation'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">"disable-blink-features=AutomationControlled"</span><span class="token punctuation">)</span>
options<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span>
    <span class="token string">'User-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.75 Safari/537.36'</span><span class="token punctuation">)</span>

url <span class="token operator">=</span> <span class="token string">'https://www.amazon.com/errors/validateCaptcha'</span>
browser <span class="token operator">=</span> webdriver<span class="token punctuation">.</span>Chrome<span class="token punctuation">(</span><span class="token string">'chromedriver.exe'</span><span class="token punctuation">,</span> options<span class="token operator">=</span>options<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    browser<span class="token punctuation">.</span>set_window_size<span class="token punctuation">(</span><span class="token number">1920</span><span class="token punctuation">,</span> <span class="token number">1080</span><span class="token punctuation">)</span>
    browser<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token triple-quoted-string string">'''
    /å¤„ç†éªŒè¯ç 
    '''</span>
    <span class="token comment"># è¦æˆªå›¾çš„å…ƒç´ </span>
     <span class="token keyword">try</span><span class="token punctuation">:</span>
         element <span class="token operator">=</span> browser<span class="token punctuation">.</span>find_element_by_xpath<span class="token punctuation">(</span><span class="token string">'//div[@class="a-row a-text-center"]'</span><span class="token punctuation">)</span>
         <span class="token comment"># åæ ‡</span>
         x<span class="token punctuation">,</span> y <span class="token operator">=</span> element<span class="token punctuation">.</span>location<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token comment"># å®½é«˜</span>
         h<span class="token punctuation">,</span> w <span class="token operator">=</span> element<span class="token punctuation">.</span>size<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token comment"># æŠŠæˆªå›¾ä»¥äºŒè¿›åˆ¶å½¢å¼çš„æ•°æ®è¿”å›</span>
         image_data <span class="token operator">=</span> browser<span class="token punctuation">.</span>get_screenshot_as_png<span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token comment"># ä»¥æ–°å›¾ç‰‡æ‰“å¼€è¿”å›çš„æ•°æ®</span>
         screenshot <span class="token operator">=</span> Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>BytesIO<span class="token punctuation">(</span>image_data<span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token comment"># å¯¹æˆªå›¾è¿›è¡Œè£å‰ª</span>
         result <span class="token operator">=</span> screenshot<span class="token punctuation">.</span>crop<span class="token punctuation">(</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x <span class="token operator">+</span> w<span class="token punctuation">,</span> y <span class="token operator">+</span> h<span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token comment"># æ˜¾ç¤ºå›¾ç‰‡</span>
         <span class="token comment"># result.show()</span>
         <span class="token comment"># ä¿å­˜éªŒè¯ç å›¾ç‰‡</span>
         result<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token string">'VerifyCode.png'</span><span class="token punctuation">)</span>
         <span class="token comment"># è°ƒç”¨recognizeæ–¹æ³•è¯†åˆ«éªŒè¯ç </span>
         code <span class="token operator">=</span> recognize<span class="token punctuation">(</span><span class="token string">'VerifyCode.png'</span><span class="token punctuation">)</span>
         <span class="token keyword">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>
         <span class="token comment"># è¾“å…¥éªŒè¯ç </span>
         browser<span class="token punctuation">.</span>find_element_by_name<span class="token punctuation">(</span><span class="token string">'field-keywords'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>send_keys<span class="token punctuation">(</span>code<span class="token punctuation">)</span>
         <span class="token comment"># ç‚¹å‡»ç¡®è®¤</span>
         browser<span class="token punctuation">.</span>find_element_by_class_name<span class="token punctuation">(</span><span class="token string">'a-button-text'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>click<span class="token punctuation">(</span><span class="token punctuation">)</span>
         time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
     <span class="token keyword">except</span><span class="token punctuation">:</span>
         <span class="token keyword">break</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    getCookie<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>ocr_code.py</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> ddddocr

<span class="token keyword">def</span> <span class="token function">recognize</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ocr <span class="token operator">=</span> ddddocr<span class="token punctuation">.</span>DdddOcr<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        img_bytes <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">=</span> ocr<span class="token punctuation">.</span>classification<span class="token punctuation">(</span>img_bytes<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res


</code></pre>
<h2><a id="_152"></a>ğŸšæˆæœ</h2>
<p>æˆªå–çš„éªŒè¯ç </p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/2c345d6cdd5a4ac3b5d5a3cb416c3b72.png"/><br/> æ‰“å°</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/a3c70216bb8e42bebd6a192900355c77.png"/></p>
<blockquote>
<p><mark><strong>ç‚¹å…³æ³¨ä¸è¿·è·¯ï¼Œæœ¬æ–‡ç« è‹¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œçƒ¦è¯·ä¸‰è¿æ”¯æŒä¸€ä¸‹ â¤ï¸â¤ï¸â¤ï¸</strong></mark><br/> <mark><strong>å„ä½çš„æ”¯æŒå’Œè®¤å¯å°±æ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›â¤ï¸â¤ï¸â¤ï¸</strong></mark></p>
</blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="160" src="https://img-blog.csdnimg.cn/5df8a34481174d93b6af0539bc60b688.png#pic_center" width="160"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>