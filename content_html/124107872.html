<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">PHP中有各种内置函数用于对文件执行各种操作。他们可能对文件进行创建、打开、读取、写入等操作。</span></span></p>
<h3 style="margin-left:.382em;"><span style="color:#232c39;"><span style="background-color:#ffffff;">PHP写入文件的功能</span></span></h3>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">以下是 PHP 中默认可用的主要功能：</span></span></p>
<div style="margin-left:0;"></div>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">1. fopen()</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">首先，为了写入文件，我们必须知道如何创建该文件。这是在 open() 函数的帮助下完成的。该名称可能会让人误解为打开文件，但在 PHP 中，相同的函数用于创建和打开文件，就像 Linux 中的 vi 函数一样。该函数一执行就检查文件是否存在，然后只创建它。下面的示例演示了相同的内容：</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> // Creating a file for test<br/> $myfile = fopen("test.txt", "w")<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\99b50f42c04103c708364aeba817eda6.png"/></p>
<p style="margin-left:0;"></p>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">2. fwrite()</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">创建文件后，我们必须将所需的内容写入其中，因此我们使用此功能。此函数仅在到达文件末尾（EOF）或我们根据先到的顺序指定的长度时才会停止。</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>句法：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>fwrite(file, string, length)</code></span></span></p>
<ul><li>其中文件是描述我们应该写入的文件的必填字段</li><li>字符串是另一个必需的参数，它告诉字符串写入打开的文件</li><li>length 是一个可选参数，它为我们提供了要写入的最大字节数</li></ul>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> // Your code here!<br/> $f = fopen("testfile.txt", "w");<br/> $text = "Random data here\n";<br/> fwrite($f, $text);<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\42f3a154e8e35dc10687d73d83609cd9.png"/></p>
<p style="margin-left:0;"></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">这里 testfile.txt 是创建的文件，分配给 $text 的字符串值将被写入该文件。</span></span></p>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">3.file_put_contents()</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">这是另一个可用于将内容写入 PHP 文件的函数。在访问文件时，有一定数量的规则以相同的顺序被提及：</span></span></p>
<div style="margin-left:0;">
<div id="banner_1" style="margin-left:0;">
<div>
   有一个名为 FILE_USE_INCLUDE_PATH 的属性，它会检查路径是否在设置时包含文件名的副本。
  </div>
</div>
</div>
<ul><li>检查文件是否存在后创建文件</li><li>接下来，它打开文件</li><li>如果设置了属性 LOCK_EX，那么它会锁定文件</li><li>当属性 FILE_APPEND 被设置时，它会移动到文件的末尾，否则会清除文件的内容。</li><li>现在它将所需的数据写入文件。</li><li>如果存在任何锁，则关闭文件并释放</li></ul>
<div>
<span style="color:#232c39;"><span style="background-color:#ffffff;"><strong>注意：</strong>应使用属性 FILE_APPEND 以防止数据在将数据附加到文件末尾时被完全擦除。</span></span>
</div>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>句法：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>file_put_contents(filename, text, mode, context)</code></span></span></p>
<ul><li>其中文件名是强制性参数，它告诉我们必须写入的文件的完整路径，因此该函数检查并创建一个文件。</li><li>text 是另一个必填字段，它是我们必须写入文件的数据。它可以是简单字符串、字符串数组或数据流的形式。</li><li>mode 是可选字段，它为我们提供了对文件进行操作的各种方式。它的可能值是：</li></ul>
<ul><li><strong>FILE_USE_INCLUDE_PATH：</strong>在包含目录路径中搜索指定的文件名。</li></ul>
<ul><li><strong>FILE_APPEND：</strong>它将数据附加到文件而不是覆盖相同的文件。</li></ul>
<ul><li><strong>LOCK_EX：</strong>这会在写入文件时显式锁定文件。</li></ul>
<ul><li>context 是提供文件上下文的可选参数。它基本上是一堆可以改变流行为的选项。</li></ul>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>返回值：</strong>此函数在成功的情况下返回写入文件的字节总数，如果失败则返回值 FALSE。</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">下面是示例：</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> echo file_put_contents("filetest.txt","Testing for file write");<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\35eb44af95b9c3de2b40bde44e2d598e.png"/></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">这里我们创建的文件作为第一个参数给出，下一个参数是写入该文件的文本。</span></span></p>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">4.覆盖</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">我们可以覆盖上面已经写入数据的文件。文件中已经存在的任何数据都将被清除，它将作为一个全新的空文件开始。在下面的示例中，我们将打开一个现有文件并尝试在其上写入新数据。</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">下面是示例：</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> $f = fopen("testfile.txt", "w");<br/> $text = "Random data here\n";<br/> $filetext = "Over writing the data\n";<br/> fwrite($f, $filetext);<br/> $filetext = "File Dummy Data\n";<br/> fwrite($f, $filetext);<br/> fclose($f);<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\b5474f146f2353f719bcf7e025322a5f.png"/></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">这里我们覆盖了 testfile.txt 中的数据，因此 $filetext 字符串值中提到的任何内容都将写入文件中。并且当我们通过更改提供给 $filetext 的数据再次使用相同的写入命令时，旧数据将被清理并被提供的最新文本值占用。</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">在文件的末尾，我们总是应该使用我们使用 fwrite() 函数打开的 close() 函数来关闭它。如上例所示，我们还使用了 \n，它表示换行符，相当于按下键盘上的回车键。</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">现在让我们举个例子，看看如何在我们的文件中包含更多数据。</span></span></p>
<h3 style="margin-left:.382em;"><span style="color:#232c39;"><span style="background-color:#ffffff;">PHP写入文件的实现示例</span></span></h3>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">以下是 PHP 写入文件的示例：</span></span></p>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">示例 #1</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">首先，我们使用以下代码添加 2 行数据：</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> $testf = "TestFile.txt";<br/> $filehandle = fopen($testf, 'w');<br/> $fdata = "Julian Caesar\n";<br/> fwrite($filehandle, $fdata);<br/> $fdata = "Harry James\n";<br/> fwrite($filehandle, $fdata);<br/> print "Data writing completed";<br/> fclose($filehandle);<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\f8147090c3db9e7e458eb4a7a511dc13.png"/></p>
<p style="margin-left:0;"></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">这将创建一个包含 2 行数据的文件 TestFile.txt，如前所述。</span></span></p>
<p><span style="color:#1375b0;"><span style="background-color:#ffffff;">示例 #2</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">我们将在同一个文件中附加另外 2 个名称，如下所示：</span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>代码：</strong></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><code>&lt;?php<br/> $testf = "TestFile.txt";<br/> $filehandle = fopen($testf, 'a');<br/> $fdata = "Lilly Potter\n";<br/> fwrite($filehandle, $fdata);<br/> $fdata = "Edward Cullen\n";<br/> fwrite($filehandle, $fdata);<br/> print "Data has been appended";<br/> fclose($filehandle);<br/> ?&gt;</code></span></span></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;"><strong>输出：</strong></span></span></p>
<p class="img-center"><img alt="" src="image\229aef781d1e8c66a3980c158237a45d.png"/></p>
<p style="margin-left:0;"></p>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">此示例将给定名称附加到与第一个示例相同的文件中。</span></span></p>
<h3 style="margin-left:.382em;"><span style="color:#232c39;"><span style="background-color:#ffffff;">结论</span></span></h3>
<p style="margin-left:0;"><span style="color:#4d5968;"><span style="background-color:#ffffff;">如上所示，当我们要在 PHP 中写入文件时，需要遵循各种方法和步骤。fwrite() 是执行此操作的主要函数之一，主要用于将数据写入文件。它们可以对我们的文件进行基本的数据写入，但应该与其他强制性函数（如 open() 和 close()）结合使用，否则如果文件不存在，则无法对文件执行操作。</span></span></p>
</div>
</div>