<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>Python MySQL</h3>
<ul><li><a href="#mysql_2">mysql入门</a></li><li><ul><li><a href="#MySQL__4">MySQL 数据库</a></li><li><a href="#_MySQL__9">安装 MySQL 驱动程序</a></li><li><a href="#_MySQL_Connector_22">测试 MySQL Connector</a></li><li><a href="#_30">创建连接</a></li></ul>
</li><li><a href="#_47">创建数据库</a></li><li><ul><li><a href="#_49">创建数据库</a></li><li><a href="#_69">检查数据库是否存在</a></li></ul>
</li><li><a href="#_103">创建表</a></li><li><ul><li><a href="#_105">创建表</a></li><li><a href="#_125">检查表是否存在</a></li><li><a href="#_148">主键</a></li></ul>
</li><li><a href="#Insert_187">插入表（`Insert`）</a></li><li><ul><li><a href="#INSERT_INTO_188">INSERT INTO</a></li><li><a href="#_216">**插入多行**</a></li><li><a href="#id_247">**活动已插入的id**</a></li></ul>
</li><li><a href="#Python_Select_From_273">Python Select From</a></li><li><ul><li><a href="#_274">从表中选取</a></li><li><a href="#_295">选取列</a></li><li><a href="#_fetchone__307">使用 fetchone() 方法</a></li></ul>
</li><li><a href="#Python_MySQL_Where_319">Python MySQL Where</a></li><li><ul><li><a href="#_320">使用筛选器来选取</a></li><li><a href="#_333">通配符</a></li><li><a href="#_SQL__347">防止 SQL 注入</a></li></ul>
</li><li><a href="#Python_MySQL_Order_By_366">Python MySQL Order By</a></li><li><ul><li><a href="#_367">结果排序</a></li><li><a href="#_379">降序排序</a></li></ul>
</li><li><a href="#Python_MySQL_Delete_From_391">Python MySQL Delete From</a></li><li><ul><li><a href="#_392">删除记录</a></li><li><a href="#_SQL_httpsblogcsdnnetweixin_51047454articledetails123533237spm1001201430015501_407">防止 [SQL 注入](https://blog.csdn.net/weixin_51047454/article/details/123533237?spm=1001.2014.3001.5501)</a></li></ul>
</li><li><a href="#Python_MySQL_Drop_Table_423">Python MySQL Drop Table</a></li><li><ul><li><a href="#_424">删除表</a></li><li><a href="#_433">只在表存在时删除</a></li></ul>
</li><li><a href="#Python__440">Python 更新表</a></li><li><ul><li><a href="#_441">更新表</a></li><li><a href="#_SQL__454">防止 SQL 注入</a></li></ul>
</li><li><a href="#Python_MySQL_Limit_465">Python MySQL Limit</a></li><li><ul><li><a href="#_466">限定结果</a></li><li><a href="#_475">从另一个位置开始</a></li></ul>
</li></ul>
</div>
<p></p>
<h1><a id="mysql_2"></a>mysql入门</h1>
<h2><a id="MySQL__4"></a>MySQL 数据库</h2>
<p>为了能够试验本教程中的代码示例，应该在计算机上安装 MySQL。<br/> 请在这里下载免费的 MySQL 数据库：<a href="https://www.mysql.com/downloads/">下载地址</a>。</p>
<h2><a id="_MySQL__9"></a>安装 MySQL 驱动程序</h2>
<p>Python 需要 MySQL 驱动程序来访问 MySQL 数据库。<br/> 在本教程中，我们将使用驱动程序 “MySQL Connector”。<br/> 我们建议使用 PIP 安装 “MySQL Connector”。<br/> PIP 很可能已经安装在 Python 环境中。<br/> 将命令行导航到 PIP 的位置，然后键入以下内容：<br/> 下载并安装 “MySQL Connector”：</p>
<pre><code class="prism language-python">python <span class="token operator">-</span>m pip install mysql<span class="token operator">-</span>connector
</code></pre>
<h2><a id="_MySQL_Connector_22"></a>测试 MySQL Connector</h2>
<p>如需测试安装是否成功，或者是否已安装 “MySQL Connector”，运行下面代码，若无报错就表示安装成功：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector
</code></pre>
<h2><a id="_30"></a>创建连接</h2>
<p>首先创建与数据库的连接。<br/> 使用 MySQL 数据库中的用户名和密码：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector
mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span>
<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>mydb<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/390056515cb6415dac5a0e9a5df2893b.png"/></p>
<h1><a id="_47"></a>创建数据库</h1>
<h2><a id="_49"></a>创建数据库</h2>
<p>如需在 MySQL 中创建数据库，请使用 “<code>CREATE DATABASE</code>” 语句：</p>
<p>创建名为“zdz”的数据库</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb<span class="token operator">=</span>mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
	host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span>
<span class="token punctuation">)</span>

mycursor<span class="token operator">=</span>mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"create database zdz"</span><span class="token punctuation">)</span>
</code></pre>
<p>(mydb和mycursor为变量)</p>
<h2><a id="_69"></a>检查数据库是否存在</h2>
<p>可以通过使用“<code>SHOW DATABASES</code>”语句列出系统中所有数据库：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb<span class="token operator">=</span>mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
	host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span>
<span class="token punctuation">)</span>

mycursor<span class="token operator">=</span>mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"show databases"</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> mycursor<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/acfeea3cacef479e9ff74367cc7dc8e6.png"/><br/> 或者通过在建立连接时尝试访问数据库：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb<span class="token operator">=</span>mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
	host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>
</code></pre>
<p>如果不错在名为“zdz”的数据库，会返回错误。</p>
<h1><a id="_103"></a>创建表</h1>
<h2><a id="_105"></a>创建表</h2>
<p>如需在 MySQL 中创建表，请使用 “<code>CREATE TABLE</code>” 语句。<br/> （请确保在创建连接时定义数据库的名称。）</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>

mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"CREATE TABLE biao1 (id int(10),name varchar(10),passwd varchar(10))"</span><span class="token punctuation">)</span>
<span class="token comment">#sql语法：create table 表名(字段1名 字段1类型,字段2名 字段2类型,字段3名 字段3类型);</span>
</code></pre>
<h2><a id="_125"></a>检查表是否存在</h2>
<p>可以通过使用 “<code>SHOW TABLES</code>” 语句列出数据库中的所有表，来检查表是否存在：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>

mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SHOW TABLES"</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> x <span class="token keyword">in</span> mycursor<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c54d0c3a50bf4c2c995c28376c0d54aa.png"/></p>
<h2><a id="_148"></a>主键</h2>
<p>创建表时，还应该为每条记录创建一个具有唯一键的列。<br/> 这可以通过定义 PRIMARY KEY 来完成。<br/> 我们使用语句 “<code>INT AUTO_INCREMENT PRIMARY KEY</code>”，它将为每条记录插入唯一的编号。从 1 开始，每个记录递增 1。</p>
<p>1、创建表时创建主键：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"mydatabase"</span>
<span class="token punctuation">)</span>

mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"CREATE TABLE biao2 (id int auto_increment primary key,name varchar(10),passwd varchar(10))"</span><span class="token punctuation">)</span>
<span class="token comment">#这里把主键给到“id”</span>
</code></pre>
<p>2、如果表已存在，请使用 <code>ALTER TABLE</code> 关键字：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"mydatabase"</span>
<span class="token punctuation">)</span>

mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"alter table biao1 add column idid int auto_increment primary key"</span><span class="token punctuation">)</span>
</code></pre>
<h1><a id="Insert_187"></a>插入表（<code>Insert</code>）</h1>
<h2><a id="INSERT_INTO_188"></a>INSERT INTO</h2>
<p>如需填充 MySQL 中的表，请使用 “<code>INSERT INTO</code>” 语句。<br/> 在表 “biao1” 中插入记录：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>
mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

sql <span class="token operator">=</span> <span class="token string">"insert into biao1 (id,name, passwd) values ('1','admin','admin)"</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
<span class="token comment">#或者写成:</span>
<span class="token comment">#sql = "insert into biao1 (id,name,passwd) values (%s,%s,%s)"</span>
<span class="token comment">#val = ('1','admin','admin')</span>
<span class="token comment">#mycursor.execute(sql,val)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>mycursor<span class="token punctuation">.</span>rowcount<span class="token punctuation">,</span> <span class="token string">"record inserted."</span><span class="token punctuation">)</span>
</code></pre>
<p><strong><code>重要</code></strong>：请注意语句 <code>mydb.commit()</code>。需要进行更改，否则表不会有任何改变。</p>
<h2><a id="_216"></a><strong>插入多行</strong></h2>
<p>要在表中插入多行，请使用 <code>executemany()</code> 方法。<br/> executemany() 方法的第二个参数是元组列表，包含要插入的数据：</p>
<p>用数据填充biao2：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>
mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>
sql <span class="token operator">=</span> <span class="token string">"insert into biao2 (name, passwd) VALUES (%s, %s)"</span>
val <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token punctuation">(</span><span class="token string">'zdz'</span><span class="token punctuation">,</span><span class="token string">'zdz32'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token string">'bh'</span><span class="token punctuation">,</span><span class="token string">'bh01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token string">'mjw'</span><span class="token punctuation">,</span><span class="token string">'mjw16'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token string">'zxr'</span><span class="token punctuation">,</span><span class="token string">'zxr42'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span><span class="token string">'zyc'</span><span class="token punctuation">,</span><span class="token string">'zyc43'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
mycursor<span class="token punctuation">.</span>executemany<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>mycursor<span class="token punctuation">.</span>rowcount<span class="token punctuation">,</span> <span class="token string">"was inserted."</span><span class="token punctuation">)</span>
</code></pre>
<h2><a id="id_247"></a><strong>活动已插入的id</strong></h2>
<p>可以通过询问 <code>cursor</code> 对象来获取刚插入的行的 id。<br/> <strong>注释</strong>：如果插入不止一行，则返回最后插入行的 id。</p>
<p>插入一行并返回id：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>
mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>

sql <span class="token operator">=</span> <span class="token string">"INSERT INTO biao2 (name,passwd) VALUES (%s, %s)"</span>
val <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"admin666"</span><span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"1 record inserted, ID:"</span><span class="token punctuation">,</span> mycursor<span class="token punctuation">.</span>lastrowid<span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c95bdda742b449ae847b13c098224857.png"/></p>
<h1><a id="Python_Select_From_273"></a>Python Select From</h1>
<h2><a id="_274"></a>从表中选取</h2>
<p>从表 “biao2” 中选取所有记录，并显示结果：</p>
<pre><code class="prism language-python"><span class="token keyword">import</span> mysql<span class="token punctuation">.</span>connector

mydb <span class="token operator">=</span> mysql<span class="token punctuation">.</span>connector<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>
  host<span class="token operator">=</span><span class="token string">"localhost"</span><span class="token punctuation">,</span>
  user<span class="token operator">=</span><span class="token string">"yourusername"</span><span class="token punctuation">,</span>
  passwd<span class="token operator">=</span><span class="token string">"yourpassword"</span><span class="token punctuation">,</span>
  database<span class="token operator">=</span><span class="token string">"zdz"</span>
<span class="token punctuation">)</span>
mycursor <span class="token operator">=</span> mydb<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#和前面一样，下面为了简洁统统省略</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2"</span><span class="token punctuation">)</span><span class="token comment">#执行sql语句，结果赋给mycursor</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#用了 fetchall() 方法，该方法从最后执行的语句中获取所有行，结果赋给myresult。</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> myresult<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment">#遍历myresult结果（下面为了简洁统统省略）</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/983d3437d33a4e53b389ca29772cc1bd.png"/><br/> <strong>+</strong>：<code>fetchall()</code> 方法：从最后执行的语句中获取所有行</p>
<h2><a id="_295"></a>选取列</h2>
<p>如需只选择表中的某些列，请使用 “SELECT” 语句，后跟列名：<br/> 仅选择名称和地址列：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT id,name,passwd FROM biao2"</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8e58bae3555549eaadbac8cfb03232c8.png"/></p>
<h2><a id="_fetchone__307"></a>使用 fetchone() 方法</h2>
<p>如果只对一行感兴趣，可以使用 <code>fetchone()</code> 方法。<strong>fetchone() 方法将返回结果的第一行</strong>：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2"</span><span class="token punctuation">)</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchone<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>myresult<span class="token punctuation">)</span><span class="token comment">#只返回一行，所以不用遍历</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2696fc3e754048c59610ed28b50d7380.png"/></p>
<h1><a id="Python_MySQL_Where_319"></a>Python MySQL Where</h1>
<h2><a id="_320"></a>使用筛选器来选取</h2>
<p>从表中选择记录时，可以使用 “<code>where</code>” 语句对选择进行筛选：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM biao2 WHERE name='zyc'"</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> myresult<span class="token punctuation">:</span>
  <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token comment">#因为匹配条件的可能不止一条，所以需要遍历输出</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5c030108c5ae47ffa251402e8c77d922.png"/></p>
<h2><a id="_333"></a>通配符</h2>
<p>也可以选择以给定字母或短语开头、包含或结束的记录。请使用 <code>％</code> 表示通配符。<br/> 查找密码中包含"2"的记录：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM biao2 WHERE passwd LIKE '%1%'"</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d12b09fc705d492facd330c4e6a66900.png"/></p>
<h2><a id="_SQL__347"></a>防止 SQL 注入</h2>
<p>当用户提供查询值时，应该转义这些值。此举是为了防止 SQL 注入，这是一种常见的网络黑客技术，可以破坏或滥用你的数据库<br/> mysql.connector 模块拥有转义查询值的方法，<code>例</code>：<br/> 使用占位符 <code>％s</code> 方法来转义查询值：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

sql <span class="token operator">=</span> <span class="token string">"SELECT * FROM customers WHERE passwd=%s"</span>
pas <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"admin666"</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span>pas<span class="token punctuation">)</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9f8a3d5fbc1f4bc6b49ed7ba9ecae793.png"/><br/> sql注入教程——&gt;<a href="https://blog.csdn.net/weixin_51047454/article/details/123533237?spm=1001.2014.3001.5501">传送门</a></p>
<h1><a id="Python_MySQL_Order_By_366"></a>Python MySQL Order By</h1>
<h2><a id="_367"></a>结果排序</h2>
<p>请使用 <code>ORDER BY</code> 语句按升序或降序对结果进行排序。（ORDER BY 关键字默认按升序对结果进行排序。若要按降序对结果进行排序，请使用 <code>DESC</code> 关键字。）<br/> 以字符顺序对姓名进行排序：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2 ORDER BY name"</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f764ee3a86e84de68b0ade0bb0d7a672.png"/></p>
<h2><a id="_379"></a>降序排序</h2>
<p>请使用 <code>DESC</code> 关键字按降序对结果进行排序：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2 ORDER BY id DESC"</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9065cd8b1a4d4f55891d17c1965736f4.png"/></p>
<h1><a id="Python_MySQL_Delete_From_391"></a>Python MySQL Delete From</h1>
<h2><a id="_392"></a>删除记录</h2>
<p>可以使用 “<code>DELETE FROM</code>” 语句从已有的表中删除记录：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"DELETE FROM biao2 WHERE name = 'admin'"</span><span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p><strong><code>注意</code></strong>：<br/> 1.请注意语句 <code>mydb.commit()</code>。需要进行更改，否则表不会有任何改变。<br/> 2.请注意 DELETE 语法中的 WHERE 子句：WHERE 子句指定应删除哪些记录。如果省略 WHERE 子句，则将删除所有记录！</p>
<h2><a id="_SQL_httpsblogcsdnnetweixin_51047454articledetails123533237spm1001201430015501_407"></a>防止 <a href="https://blog.csdn.net/weixin_51047454/article/details/123533237?spm=1001.2014.3001.5501">SQL 注入</a></h2>
<p>☆在 delete 语句中，转义任何查询的值也是一种好习惯。此举是为了防止 SQL 注入，这是一种常见的网络黑客技术，可以破坏或滥用你的数据库。<br/> mysql.connector 模块使用占位符 ％s 来转义 delete 语句中的值：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

sql <span class="token operator">=</span> <span class="token string">"DELETE FROM biao2 WHERE passwd = %s"</span>
pas <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"ylj31"</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span>pas<span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<h1><a id="Python_MySQL_Drop_Table_423"></a>Python MySQL Drop Table</h1>
<h2><a id="_424"></a>删除表</h2>
<p>可以使用 “<code>DROP TABLE</code>” 语句来删除已有的表。<br/> 删除 “biao1” 表：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"DROP TABLE biao1"</span><span class="token punctuation">)</span>
</code></pre>
<h2><a id="_433"></a>只在表存在时删除</h2>
<p>如果要删除的表已被删除，或者由于任何其他原因不存在，那么可以使用 <code>IF EXISTS</code> 关键字以避免出错：</p>
<pre><code class="prism language-python">mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"DROP TABLE IF EXISTS biao1"</span><span class="token punctuation">)</span><span class="token comment">#添加'IF EXITS判断'</span>
</code></pre>
<h1><a id="Python__440"></a>Python 更新表</h1>
<h2><a id="_441"></a>更新表</h2>
<p>可以使用 “<code>UPDATE</code>” 语句来更新表中的现有记录。<br/> 把密码列中的 “zdz32” 覆盖为 “zdz3232”：</p>
<pre><code class="prism language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"UPDATE biao2 SET passwd='zdz3232' WHERE passwd='zdz32'"</span><span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#要有</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>mycursor<span class="token punctuation">.</span>rowcount<span class="token punctuation">,</span> <span class="token string">"record(s) affected"</span><span class="token punctuation">)</span>
</code></pre>
<p><strong><code>注意</code></strong>：请注意 UPDATE 语法中的 <code>WHERE</code> 子句：WHERE 子句指定应更新的记录。如果省略 WHERE 子句，则所有记录都将更新！</p>
<h2><a id="_SQL__454"></a>防止 SQL 注入</h2>
<p>同上，在update语句中要有转义的好习惯，防止sql注入。<br/> mysql.connector 模块使用占位符 ％s 来转义update 语句中的值：</p>
<pre><code class="prism language-python">sql <span class="token operator">=</span> <span class="token string">"UPDATE biao2 SET passwd= %s WHERE passwd = %s"</span>
pas <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">"pzdz32"</span><span class="token punctuation">,</span> <span class="token string">"zdz3232"</span><span class="token punctuation">)</span>
mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span>pas<span class="token punctuation">)</span>
mydb<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h1><a id="Python_MySQL_Limit_465"></a>Python MySQL Limit</h1>
<h2><a id="_466"></a>限定结果</h2>
<p>可以使用 “<code>LIMIT</code>” 语句限制从查询返回的记录数。<br/> 选取 “biao2” 表中的前四条记录：</p>
<pre><code class="prism language-python">mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2 LIMIT 4"</span><span class="token punctuation">)</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#记得遍历输出</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b3020212d50f4d599be174a91118fb35.png"/></p>
<h2><a id="_475"></a>从另一个位置开始</h2>
<p>如果想从第二条记录开始返回四条记录，您可以使用 “<code>OFFSET</code>” 关键字：</p>
<pre><code class="prism language-python">mycursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span><span class="token string">"SELECT * FROM biao2 LIMIT 4 OFFSET 1"</span><span class="token punctuation">)</span><span class="token comment">#因为从0开始数，所以要从第二个开始，offset后面跟1</span>
myresult <span class="token operator">=</span> mycursor<span class="token punctuation">.</span>fetchall<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/775f16e1184f4b8a8cd552dc4198a98b.png"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>