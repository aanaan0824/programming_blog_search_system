<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p id="main-toc"><strong>目录</strong></p>
<p id="%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E8%A1%A8%E8%BE%BE%E5%BC%8F-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E8%A1%A8%E8%BE%BE%E5%BC%8F">第四章 表达式</a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.1%20%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6-toc" style="margin-left:40px;"><a href="#4.1%20%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6">4.1 算术运算符</a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.2%20%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6%C2%A0-toc" style="margin-left:40px;"><a href="#4.2%20%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6%C2%A0">4.2 赋值运算符 </a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.2.1%20%E7%AE%80%E5%8D%95%E8%B5%8B%E5%80%BC-toc" style="margin-left:80px;"><a href="#4.2.1%20%E7%AE%80%E5%8D%95%E8%B5%8B%E5%80%BC">4.2.1 简单赋值</a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.2.2%20%E5%B7%A6%E5%80%BC%C2%A0-toc" style="margin-left:80px;"><a href="#4.2.2%20%E5%B7%A6%E5%80%BC%C2%A0">4.2.2 左值 </a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.3%20%E8%87%AA%E5%A2%9E%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%87%AA%E5%87%8F%E8%BF%90%E7%AE%97%E7%AC%A6-toc" style="margin-left:40px;"><a href="#4.3%20%E8%87%AA%E5%A2%9E%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%87%AA%E5%87%8F%E8%BF%90%E7%AE%97%E7%AC%A6">4.3 自增运算符和自减运算符</a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.4%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC-toc" style="margin-left:40px;"><a href="#4.4%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC">4.4 表达式求值</a><span style="color:#4da8ee;">🚀</span></p>
<p id="4.5%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E5%8F%A5-toc" style="margin-left:40px;"><a href="#4.5%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E5%8F%A5">4.5 表达式语句</a><span style="color:#4da8ee;">🚀</span></p>
<p id="%E9%97%AE%E4%B8%8E%E7%AD%94%C2%A0-toc" style="margin-left:0px;"><a href="#%E9%97%AE%E4%B8%8E%E7%AD%94%C2%A0">问与答 </a><span style="color:#4da8ee;">🚀</span></p>
<hr id="hr-toc"/>
<p></p>
<blockquote>
<p>从今天开始，<strong>各书</strong>的<strong>读书笔记</strong>就陆陆续续开展了哈（一本书一个专栏，订阅会第一时间推荐更新哈），主要会把<strong>作者认为比较重要</strong>或者<strong>比较新奇</strong>的知识点<strong>记录</strong>下来。但是要想真的了解一本书，自己去看可能才会有更深的体会哈。</p>
<hr/>
<p><strong>C语言</strong>的<strong>入门篇进阶篇</strong>和<strong>深剖篇</strong>都整理在<a class="link-info" href="https://blog.csdn.net/weixin_62700590/article/details/122200337" title="这里">这里</a>了哈。然后<a class="link-info" href="https://blog.csdn.net/weixin_62700590?spm=1011.2124.3001.5343" title="这里">这里</a>是<strong>个人主页</strong>，比点头像更好找文章哈。</p>
<p><span style="color:#fe2c24;">作者新建立的社区：</span><a class="link-info" href="https://bbs.csdn.net/forums/FKBZM" title="https://bbs.csdn.net/forums/FKBZM?typeId=22226">https://bbs.csdn.net/forums/FKBZM?typeId=22226</a>💖💛💙</p>
<p><span style="color:#956fe7;">期待hxd的支持哈</span>🎉 🎉 🎉</p>
<hr/>
<p><strong>最后是打鸡血环节：</strong><span style="color:#4da8ee;">改变的确很难，但结果值得冒险，拿出点勇气来。路还很长，现在才刚开始而已。过去无可挽回，未来可以改变。🚀 🚀 🚀</span></p>
</blockquote>
<h1 id="%E7%AC%AC%E5%9B%9B%E7%AB%A0%20%E8%A1%A8%E8%BE%BE%E5%BC%8F"><strong>第四章 表达式</strong><span style="color:#4da8ee;">🚀</span></h1>
<blockquote>
<ol><li><span style="color:#000000;"> </span><strong><span style="color:#000000;">算术运算符</span></strong><span style="color:#000000;">，包括加、减、乘和除。 </span></li><li><span style="color:#000000;"> </span><strong><span style="color:#000000;">关系运算符</span></strong><span style="color:#000000;">进行诸如“</span><span style="color:#000000;">i</span><span style="color:#000000;">比</span><span style="color:#000000;">0</span><span style="color:#000000;">大”这样的比较运算。 </span></li><li><span style="color:#000000;"> </span><strong><span style="color:#000000;">逻辑运算符</span></strong><span style="color:#000000;">实现诸如“</span><span style="color:#000000;">i</span><span style="color:#000000;">比</span><span style="color:#000000;">0</span><span style="color:#000000;">大并且</span><span style="color:#000000;">i</span><span style="color:#000000;">比</span><span style="color:#000000;">10</span><span style="color:#000000;">小”这样的关系运算。</span></li></ol>
</blockquote>
<h2 id="4.1%20%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><strong><span style="color:#000000;">4.1</span><span style="color:#000000;"> 算术运算符</span></strong><span style="color:#4da8ee;">🚀</span></h2>
<blockquote>
<p><img alt="" height="281" src="image\aec4fc8c77d54b84a9e1c5a45e2573f4.png" width="1200"/></p>
<div>
<span style="color:#000000;">一元运算符</span>
<span style="color:#000000;">+</span>
<span style="color:#000000;">什么都不做；实际上，经典</span>
<span style="color:#000000;">C中甚至不存在这种运算符。它主要用于强调某数值常量是正的。</span>
</div>
<div>
<div>
<span style="color:#fe2c24;"><strong>除%运算符以外，表4-1中的二元运算符既允许操作数是整数也允许操作数是浮点数，两者混合也是可以的。</strong></span>
<span style="color:#000000;">当把int</span>
<span style="color:#000000;">型操作数和</span>
<span style="color:#000000;">float</span>
<span style="color:#000000;">型操作数混合在一起时，运算结果是</span>
<span style="color:#000000;">float型的。因此，9+2.5f</span>
<span style="color:#000000;">的值为</span>
<span style="color:#000000;">11.5</span>
<span style="color:#000000;">，而</span>
<span style="color:#000000;">6.7f/2</span>
<span style="color:#000000;">的值为</span>
<span style="color:#000000;">3.35</span>
<span style="color:#000000;">。</span>
</div>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">运算符</span><span style="color:#000000;">/</span><span style="color:#000000;">和运算符</span><span style="color:#000000;">%</span><span style="color:#000000;">需要特别注意以下几点。</span></p>
<div>
<span style="color:#000000;"><strong>1.</strong>运算符</span>
<span style="color:#000000;">/</span>
<span style="color:#000000;">可能产生意外的结果。</span>
<span style="color:#ff9900;"><strong>当两个操作数都是整数时</strong></span>
<span style="color:#000000;">，运算符</span>
<span style="color:#000000;">/</span>
<span style="color:#000000;">会丢掉分数部分来“截 </span>
</div>
<div>
<span style="color:#000000;">取”结果。因此，</span>
<span style="color:#000000;">1 / 2</span>
<span style="color:#000000;">的结果是</span>
<span style="color:#000000;">0</span>
<span style="color:#000000;">而不是</span>
<span style="color:#000000;">0.5</span>
<span style="color:#000000;">。 </span>
</div>
<div>
<strong><span style="color:#000000;">2.</span><span style="color:#ff9900;">运算符%要求操作数是整数。</span></strong>
<span style="color:#000000;">如果两个操作数中有一个不是整数，程序将无法编译通过。 </span>
</div>
<div>
<span style="color:#000000;"><strong>3.</strong></span>
<span style="color:#ff9900;"><strong>把零用作/或%的右操作数会导致未定义的行为</strong></span>
<span style="color:#000000;">（ </span>
<span style="color:#000000;">4.4</span>
<span style="color:#000000;">节）。 </span>
</div>
<div>
<span style="color:#000000;"><strong>4.</strong></span>
<span style="color:#ff9900;"><strong>当运算符/和运算符%用于负操作数时，其结果难以确定。</strong></span>
<span style="color:#000000;">根据</span>
<span style="color:#000000;">C89</span>
<span style="color:#000000;">标准，如果两个 </span>
</div>
<div>
<span style="color:#000000;">操作数中有一个为负数，那么除法的结果既可以向上取整也可以向下取整。（例如，</span>
<span style="color:#000000;">-9/7 </span>
</div>
<div>
<span style="color:#000000;">的结果既可以是-</span>
<span style="color:#000000;">1</span>
<span style="color:#000000;">也可以是-</span>
<span style="color:#000000;">2</span>
<span style="color:#000000;">。）在</span>
<span style="color:#000000;">C89</span>
<span style="color:#000000;">中，如果</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">或者</span>
<span style="color:#000000;">j</span>
<span style="color:#000000;">是负数，</span>
<span style="color:#000000;">i%j</span>
<span style="color:#000000;">的符号与具体实现 </span>
</div>
<div>
<span style="color:#000000;">有关。（例如，</span>
<span style="color:#000000;">-9%7</span>
<span style="color:#000000;">的值可能是-</span>
<span style="color:#000000;">2</span>
<span style="color:#000000;">或者</span>
<span style="color:#000000;">5</span>
<span style="color:#000000;">。）</span>
<span style="color:#ff9900;"><strong>但是在C99中，除法的结果总是向零截取的（因此-9/7的结果是-1），i%j的值的符号与i的相同（因此-9%7的值是-2）。</strong></span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">                                                “由实现定义”的行为 </span> </p>
<div>
<span style="color:#000000;">        术语</span>
<span style="color:#6eaad7;"><strong>由实现定义</strong></span>
<span style="color:#000000;">（</span>
<span style="color:#000000;">implementation-defined</span>
<span style="color:#000000;">）出现频率很高，因此值得花些时间讨论一下。</span>
<span style="color:#6eaad7;"><strong>C 标准故意对C语言的部分内容未加指定，并认为其细节可以由“实现”来具体定义。所谓实现是指程序在特定的平台上编译、链接和执行所需要的软件。</strong></span>
<span style="color:#000000;">因此，根据实现的不同，程序的行为可能会稍有差异。C89中运算符</span>
<span style="color:#000000;">/</span>
<span style="color:#000000;">和运算符</span>
<span style="color:#000000;">%</span>
<span style="color:#000000;">对负操作数的行为就是一个由实现定义行为的例子。 </span>
</div>
<div>
<span style="color:#000000;">        留下语言的一部分内容未加指定看起来可能有点奇怪，甚至很危险，但这正反映了C</span>
<span style="color:#000000;">语言的基本理念。</span>
<strong><span style="color:#6eaad7;">C语言的目标之一是高效，这常常意味着要与硬件行为相匹配。</span><span style="color:#000000;">-</span></strong>
<span style="color:#000000;">9</span>
<span style="color:#000000;">除以</span>
<span style="color:#000000;">7</span>
<span style="color:#000000;">时，有些CPU产生的结果是-</span>
<span style="color:#000000;">1</span>
<span style="color:#000000;">，有些为-</span>
<span style="color:#000000;">2</span>
<span style="color:#000000;">。</span>
<span style="color:#000000;">C89</span>
<span style="color:#000000;">标准简单地反映了这一现实。 </span>
</div>
<div>
<span style="color:#000000;">        最好避免编写依赖于由实现定义的行为的程序。如果不可能做到，起码要仔细查阅手册—— C标准要求在文档中说明由实现定义的行为。</span>
</div>
</blockquote>
<p><strong><span style="color:#000000;">运算符的优先级和结合性</span> </strong></p>
<blockquote>
<p><img alt="" height="120" src="image\9de49a6845d7464191e6e8fd4479cbfd.png" width="871"/></p>
<div>
<span style="color:#000000;">当表达式包含两个或更多个相同优先级的运算符时，仅有运算符优先级规则是不够用的。 </span>
</div>
<div>
<span style="color:#000000;">这种情况下，运算符的</span>
<span style="color:#956fe7;"><strong>结合性</strong></span>
<span style="color:#000000;">（</span>
<span style="color:#000000;">associativity</span>
<span style="color:#000000;">）开始发挥作用。如果运算符是从左向右结合的，那么称这种运算符是<strong>左结合的</strong></span>
<span style="color:#000000;">（</span>
<span style="color:#000000;">left associative</span>
<span style="color:#000000;">）。</span>
<span style="color:#956fe7;"><strong>二元算术运算符（即*、/、%、+和-）都是左结合的</strong></span>
<span style="color:#000000;">，所以</span>
</div>
<div>
<img alt="" height="83" src="image\537fcef372c14a9e9451e3e8a5466b12.png" width="855"/>
</div>
<div>
<span style="color:#000000;">如果运算符是从右向左结合的，那么称这种运算符是</span>
<span style="color:#956fe7;"><strong>右结合的</strong></span>
<span style="color:#000000;">（</span>
<span style="color:#000000;">right associative</span>
<span style="color:#000000;">）。一元算 </span>
</div>
<div>
<span style="color:#000000;">术运算符（+和-</span>
<span style="color:#000000;">）都是右结合的，所以</span>
</div>
<p><img alt="" height="53" src="image\e7ef5488be9149f098960cda8c935907.png" width="820"/></p>
</blockquote>
<h2 id="4.2%20%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6%C2%A0"><strong><span style="color:#000000;">4.2</span><span style="color:#000000;"> 赋值运算符</span> </strong><span style="color:#4da8ee;">🚀</span></h2>
<h3 id="4.2.1%20%E7%AE%80%E5%8D%95%E8%B5%8B%E5%80%BC"><span style="color:#000000;">4.2.1 简单赋值</span><span style="color:#4da8ee;">🚀</span></h3>
<blockquote>
<p><span style="color:#000000;">表达式</span><span style="color:#000000;"><em>v</em></span><span style="color:#000000;"> = </span><span style="color:#000000;"><em>e</em></span><span style="color:#000000;">的赋值效果是求出表达式</span><span style="color:#000000;"><em>e</em></span><span style="color:#000000;">的值，并把此值复制给</span><span style="color:#000000;"><em>v</em></span><span style="color:#000000;">。</span></p>
<p><span style="color:#000000;">如果</span><span style="color:#000000;"><em>v</em></span><span style="color:#000000;">和</span><span style="color:#000000;"><em>e</em></span><span style="color:#000000;">的类型不同，那么赋值运算发生时会把</span><span style="color:#000000;"><em>e</em></span><span style="color:#000000;">的值转化为</span><span style="color:#000000;"><em>v</em></span><span style="color:#000000;">的类型：</span></p>
<p><img alt="" height="161" src="image\ef56a057576b4566a4459d9a4c6fcdf3.png" width="854"/></p>
<p><strong><span style="color:#000000;">                                                                副 作 用</span></strong></p>
<div>
<span style="color:#000000;">通常我们不希望运算符修改它们的操作数，数学中的运算符就是如此。表达式</span>
<span style="color:#000000;">i + j</span>
<span style="color:#000000;">不会 </span>
</div>
<div>
<span style="color:#000000;">改变</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">或</span>
<span style="color:#000000;">j</span>
<span style="color:#000000;">的值，只是计算出</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">加</span>
<span style="color:#000000;">j</span>
<span style="color:#000000;">的结果。 </span>
</div>
<div>
<span style="color:#000000;">大多数</span>
<span style="color:#000000;">C</span>
<span style="color:#000000;">语言运算符不会改变操作数的值，但是也有一些会改变。由于这类运算符所做的 </span>
</div>
<div>
<span style="color:#000000;">不再仅仅是计算出值，所以称它们有</span>
<span style="color:#000000;">副作用</span>
<span style="color:#000000;">（</span>
<span style="color:#000000;">side effect</span>
<span style="color:#000000;">）。</span>
<span style="color:#ed7976;"><strong>简单赋值运算符是已知的第一个有副作用的运算符，它改变了运算符的左操作数。对表达式i = 0求值产生的结果为0，并（作为副作用）把0赋值给i。</strong></span>
</div>
<p><img alt="" height="236" src="image\6037039c38c140eebb8b9968ebd7f07f.png" width="1089"/></p>
<p><strong>注意： </strong></p>
<div>
<span style="color:#000000;">注意由于存在类型转换，串在一起的赋值运算的最终结果可能不是预期的结果：</span>
</div>
<div>
<div>
<span style="color:#000000;">int i; </span>
</div>
<div>
<span style="color:#000000;">float f; </span>
</div>
<div>
<div>
<span style="color:#000000;">f = i = 33.3f; </span>
</div>
<div>
<div>
<span style="color:#000000;">首先把数值</span>
<span style="color:#000000;">33</span>
<span style="color:#000000;">赋值给变量</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">，然后把</span>
<span style="color:#000000;">33.0</span>
<span style="color:#000000;">（而不是预期的</span>
<span style="color:#000000;">33.3</span>
<span style="color:#000000;">）赋值给变量</span>
<span style="color:#000000;">f</span>
<span style="color:#000000;">。</span>
</div>
</div>
</div>
</div>
</blockquote>
<h3 id="4.2.2%20%E5%B7%A6%E5%80%BC%C2%A0"><strong><span style="color:#000000;">4.2.2</span><span style="color:#000000;"> 左值</span> </strong><span style="color:#4da8ee;">🚀</span></h3>
<blockquote>
<p><img alt="" height="217" src="image\ba7ceed5e8e547c6ac5655faad41722d.png" width="1065"/></p>
<div>
<span style="color:#000000;">注意，这里没有说</span>
<span style="color:#000000;"><em>v </em></span>
<span style="color:#000000;">+= </span>
<span style="color:#000000;"><em>e</em></span>
<span style="color:#000000;">“等价于”</span>
<span style="color:#000000;"><em>v </em></span>
<span style="color:#000000;">= </span>
<span style="color:#000000;"><em>v </em></span>
<span style="color:#000000;">+ </span>
<span style="color:#000000;"><em>e</em></span>
<span style="color:#000000;">。一个问题是运算符的优先级：表达式</span>
<span style="color:#000000;">i *= j </span>
</div>
<div>
<span style="color:#000000;">+ k</span>
<span style="color:#000000;">和表达式</span>
<span style="color:#000000;">i = i * j + k</span>
<span style="color:#000000;">是不一样的。在极少数情况下，由于<em>v</em></span>
<span style="color:#000000;">自身的副作用，</span>
<span style="color:#000000;"><em>v </em></span>
<span style="color:#000000;">+= </span>
<span style="color:#000000;"><em>e</em>也不等同于<em>v </em></span>
<span style="color:#000000;">= </span>
<span style="color:#000000;"><em>v</em></span>
<span style="color:#000000;">+ </span>
<span style="color:#000000;"><em>e</em></span>
<span style="color:#000000;">。类似的说明也适用于其他复合赋值运算符。</span>
</div>
<p><img alt="" height="170" src="image\87c71baeb2e24baea898c35552271c8b.png" width="1195"/></p>
<p><span style="color:#000000;">复合赋值运算符有着和</span><span style="color:#000000;">=</span><span style="color:#000000;">运算符一样的特性。特别是，它们都是右结合的，所以语句</span> </p>
<div>
<span style="color:#000000;">i += j += k; </span>
</div>
<div>
<div>
<span style="color:#000000;">意味着</span>
</div>
<div>
<div>
<span style="color:#000000;">i += (j += k); </span>
</div>
</div>
</div>
</blockquote>
<h2 id="4.3%20%E8%87%AA%E5%A2%9E%E8%BF%90%E7%AE%97%E7%AC%A6%E5%92%8C%E8%87%AA%E5%87%8F%E8%BF%90%E7%AE%97%E7%AC%A6"><span style="color:#000000;">4.3 自增运算符和自减运算符</span><span style="color:#4da8ee;">🚀</span></h2>
<blockquote>
<p><span style="color:#000000;">++i意味着“立即自增</span><span style="color:#000000;">i</span><span style="color:#000000;">”，而</span><span style="color:#000000;">i++</span><span style="color:#000000;">则意味着“现在先用</span><span style="color:#000000;">i</span><span style="color:#000000;">的原始值，稍后 再自增i</span><span style="color:#000000;">”。这个“稍后”有多久呢？ C语言标准没有给出精确的时间，但是可以放心地假 设i</span><span style="color:#000000;">将在下一条语句执行前进行自增。</span></p>
<div>
<span style="color:#000000;">需要记住的是，后缀</span>
<span style="color:#000000;">++</span>
<span style="color:#000000;">和后缀</span>
<span style="color:#000000;">--</span>
<span style="color:#000000;">比一元的正号、负号优先级高，而且都是左结合的。前缀 </span>
</div>
<div>
<span style="color:#000000;">++</span>
<span style="color:#000000;">和前缀</span>
<span style="color:#000000;">--</span>
<span style="color:#000000;">与一元的正号、负号优先级相同，而且都是右结合的。</span>
</div>
</blockquote>
<h2 id="4.4%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E6%B1%82%E5%80%BC"><span style="color:#000000;">4.4</span><span style="color:#000000;"> 表达式求值</span></h2>
<blockquote>
<div>
<span style="color:#000000;">（最高优先级为</span>
<span style="color:#000000;">1</span>
<span style="color:#000000;">，最低优先级为5</span>
<span style="color:#000000;">），最后一列显示了每种运算符的结合性。</span>
</div>
<div></div>
<p> <img alt="" height="476" src="image\28f78afb386b46208549097e1a3c2953.png" width="1200"/></p>
<p><span style="color:#000000;">                                                             <strong>未定义的行为</strong></span><strong> </strong></p>
<div>
<span style="color:#000000;">        根据C</span>
<span style="color:#000000;">标准，类似</span>
<span style="color:#000000;">c = (b = a + 2) – (a = 1);</span>
<span style="color:#000000;">和</span>
<span style="color:#000000;">j = i * i++;</span>
<span style="color:#000000;">这样的语句都会导致“未定义的行为”（undefined behavior</span>
<span style="color:#000000;">），这跟</span>
<span style="color:#000000;">4.1节中讲的由实现定义的行为是不同的。当程序中出</span>现未定义的行为时，后果是不可预料的。不同的编译器给出的编译结果可能是不同的，但这还不是唯一可能发生的事情：首先程序可能无法通过编译，就算通过了编译也可能无法运行，就 
  <div>
<span style="color:#000000;">算可以运行也有可能崩溃、不稳定或者产生无意义的结果。换句话说，应该像躲避瘟疫一样避免未定义的行为。</span>
</div>
</div>
</blockquote>
<h2 id="4.5%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%AD%E5%8F%A5"><span style="color:#000000;">4.5 表达式语句</span><span style="color:#4da8ee;">🚀</span></h2>
<blockquote>
<div>
<span style="color:#956fe7;"><strong>C语言有一条不同寻常的规则，那就是任何表达式都可以用作语句。换句话说，不论表达 </strong></span>
</div>
<div>
<span style="color:#956fe7;"><strong>式是什么类型，计算什么结果，我们都可以通过在后面添加分号的方式将其转换成语句。</strong></span>
<span style="color:#000000;">例如，可以把表达式++i</span>
<span style="color:#000000;">转换成语句</span>
</div>
<p> <span style="color:#000000;">++i;</span></p>
</blockquote>
<blockquote>
<div>
<span style="color:#000000;">键盘上的误操作很容易造成“什么也不做”的表达式语句。例如，本想输入 </span>
</div>
<div>
<span style="color:#000000;">i = j; </span>
</div>
<div>
<span style="color:#000000;">但是却错误地输入 </span>
</div>
<div>
<span style="color:#000000;">i + j; </span>
</div>
<div>
<span style="color:#000000;">（因为</span>
<span style="color:#000000;">=</span>
<span style="color:#000000;">和</span>
<span style="color:#000000;">+</span>
<span style="color:#000000;">两个字符通常在键盘的同一个键上，所以这种错误发生的频率可能会超出 </span>
</div>
<div>
<span style="color:#000000;">想象。）某些编译器</span>
<span style="color:#e6b223;"><strong>可能会检查出无意义的表达式语句</strong></span>
<span style="color:#000000;">，会显示类似“</span>
<span style="color:#e6b223;"><strong>statement with no </strong></span>
</div>
<div>
<span style="color:#e6b223;"><strong>effect</strong></span>
<span style="color:#000000;">”的警告。</span>
</div>
</blockquote>
<h1 id="%E9%97%AE%E4%B8%8E%E7%AD%94%C2%A0"><strong><span style="color:#000000;">问与答</span> </strong><span style="color:#4da8ee;">🚀</span></h1>
<blockquote>
<p><span style="color:#000000;">问：我注意到</span><span style="color:#000000;">C</span><span style="color:#000000;">语言没有指数运算符。如何求一个数的幂呢？</span></p>
<div>
<span style="color:#000000;">答：通过重复乘法运算的方法可以进行整数的较低的整数次幂运算（</span>
<span style="color:#000000;">i * i * i</span>
<span style="color:#000000;">是</span>
<span style="color:#000000;">i的立方运算）。如果想<strong>计算</strong></span>
<span style="color:#fe2c24;"><strong>非</strong></span>
<span style="color:#000000;"><strong>整数次幂</strong>，可以调用<strong>pow</strong>函数（ </span>
<span style="color:#000000;">23.3</span>
<span style="color:#000000;">节）。（abs（）绝对值）</span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">问：我想把</span><span style="color:#000000;"><strong>%</strong></span><span style="color:#000000;">运算符用于浮点数，但程序无法通过编译。该怎么办？</span><span style="color:#000000;">（</span><span style="color:#000000;">p.37</span><span style="color:#000000;">）</span></p>
<p><span style="color:#000000;">答：</span><span style="color:#9c8ec1;"><strong>%运算符要求操作数是整数</strong></span><span style="color:#000000;">，可以试试</span><span style="color:#000000;">fmod</span><span style="color:#000000;">函数（ </span><span style="color:#000000;">23.3</span><span style="color:#000000;">节）。</span> </p>
</blockquote>
<blockquote>
<div>
<span style="color:#000000;">C99</span>
<span style="color:#000000;">出现的时候，大多数</span>
<span style="color:#000000;">CPU</span>
<span style="color:#000000;">都对除法的结果向零取整，所以这也被写入这一标准作为唯一允许的结果。</span>
</div>
</blockquote>
<blockquote>
<p> <span style="color:#000000;">问：如果</span><span style="color:#000000;">C</span><span style="color:#000000;">语言有左值，那它也有右值吗？</span><span style="color:#000000;">（</span><span style="color:#000000;">p.41</span><span style="color:#000000;">）</span></p>
<div>
<span style="color:#000000;">答：是的，当然。左值是可以出现在赋值</span>
<span style="color:#000000;">左侧</span>
<span style="color:#000000;">的表达式，而右值则是可以出现在赋值</span>
<span style="color:#000000;">右侧</span>
<span style="color:#000000;">的表达式。因此，右值可以是变量、常量或更加复杂的表达式。本书和C</span>
<span style="color:#000000;">标准一样，采用“表达式”这一术语来代替“右值”。（左值-&gt;空间 右值-&gt;值）</span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;"><strong>*</strong></span><span style="color:#000000;">问：前面提到：如果</span><span style="color:#000000;"><strong><em>v</em></strong></span><span style="color:#000000;">有副作用，那么</span><span style="color:#000000;"><strong><em>v </em></strong></span><span style="color:#000000;"><strong>+= </strong></span><span style="color:#000000;"><strong><em>e </em></strong></span><span style="color:#000000;">不等价于 </span><span style="color:#000000;"><strong><em>v</em></strong></span><span style="color:#000000;"><strong> = </strong></span><span style="color:#000000;"><strong><em>v </em></strong></span><span style="color:#000000;"><strong>+ </strong></span><span style="color:#000000;"><strong><em>e</em></strong></span><span style="color:#000000;">。可以解释一下吗？</span><span style="color:#000000;">（</span><span style="color:#000000;">p.41</span><span style="color:#000000;">）</span> </p>
<div>
<span style="color:#000000;">答：</span>
<span style="color:#4da8ee;"><strong>计算<em>v </em>+= <em>e</em>只会求一次<em>v</em>的值，而计算<em>v </em>= <em>v </em>+ <em>e</em>则会求两次<em>v</em>的值</strong></span>
<span style="color:#000000;"><strong>。</strong>在后一种情况下，对</span>
<span style="color:#000000;"><em>v</em></span>
<span style="color:#000000;">求值可能引起的任何副作用也都会出现两次。在下面的例子中，i</span>
<span style="color:#000000;">只自增一次： </span>
</div>
<div>
<span style="color:#000000;">a[i++] += 2; </span>
</div>
<div>
<span style="color:#000000;">如果用</span>
<span style="color:#000000;">=</span>
<span style="color:#000000;">代替</span>
<span style="color:#000000;">+=</span>
<span style="color:#000000;">，语句变成： </span>
</div>
<div>
<span style="color:#000000;">a[i++] = a[i++] + 2; </span>
</div>
<div>
<span style="color:#ffffff;">* </span>
</div>
<div>
<span style="color:#000000;">i</span>
<span style="color:#000000;">的值在别处被修改和使用了，因此上述语句的结果是未定义的。</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">的值可能会自增两次，但我们无法确定到底会发生什么。</span>
</div>
</blockquote>
<blockquote>
<div>
<span style="color:#000000;">问：</span>
<span style="color:#000000;">C</span>
<span style="color:#000000;">语言为什么提供</span>
<span style="color:#000000;"><strong>++</strong></span>
<span style="color:#000000;">和</span>
<span style="color:#000000;"><strong>--</strong></span>
<span style="color:#000000;">运算符？它们是比其他的自增、自减方法执行得快，还是仅仅更便捷？ （p.42</span>
<span style="color:#000000;">）</span>
</div>
<div>
<div>
<span style="color:#000000;">对于现代编译器而言，使用</span>
<span style="color:#000000;">++</span>
<span style="color:#000000;">和</span>
<span style="color:#000000;">-- 不会使编译后的程序变得更短小或更快，继续普及这些运算符主要是由于它们的简洁和便利。</span>
</div>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">问：</span><span style="color:#000000;"><strong>++</strong></span><span style="color:#000000;">和</span><span style="color:#000000;"><strong>--</strong></span><span style="color:#000000;">是否可以处理</span><span style="color:#000000;"><strong>float</strong></span><span style="color:#000000;">型变量？</span></p>
<div>
<span style="color:#000000;">答：可以。自增和自减运算也可以用于浮点数，但实际应用中极少采用自增和自减运算符处理</span>
<span style="color:#000000;">float</span>
<span style="color:#000000;">型变量。</span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;"><strong>*</strong></span><span style="color:#000000;">问：在使用后缀形式的</span><span style="color:#000000;">++</span><span style="color:#000000;">或</span><span style="color:#000000;"><strong>--</strong></span><span style="color:#000000;">时，何时执行自增或自减操作？</span><span style="color:#000000;">（</span><span style="color:#000000;">p.42</span><span style="color:#000000;">）</span></p>
<div>
<span style="color:#000000;">答：这是一个非常好的问题，也是一个非常难回答的问题。</span>
<span style="color:#ff9900;"><strong>C语言标准引入了“顺序点”的概念，并且指出“应该在前一个顺序点和下一个顺序点之间对存储的操作数的值进行更新”。在C语言中有多种不同类型的顺序点，表达式语句的末尾是其中一种。在表达式语句的末尾，该语句中的所有自增和自减操作都必须执行完毕，否则不能执行下一条语句。</strong></span>
</div>
<div>
<span style="color:#000000;">在后面章节中会遇到的一些运算符（逻辑与</span>
<span style="color:#000000;">、逻辑</span>
<span style="color:#000000;">或</span>
<span style="color:#000000;">、条件和逗号）对顺序点也有影响。函数调用也是如此：在函数调用执行之前，所有的实际参数必须全部计算出来。如果实际参数恰巧是含有++</span>
<span style="color:#000000;">或</span>
<span style="color:#000000;">--</span>
<span style="color:#000000;">运算符的表达式，那么必须在调用前进行自增或自减操作。</span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">问：丢掉表达式语句的值意味着什么？</span><span style="color:#000000;">（</span><span style="color:#000000;">p.45</span><span style="color:#000000;">）</span></p>
<div>
<div>
<span style="color:#000000;">答：根据定义，一个表达式表示一个值。例如，如果</span>
<span style="color:#000000;">i</span>
<span style="color:#000000;">的值为</span>
<span style="color:#000000;">5</span>
<span style="color:#000000;">，那么计算</span>
<span style="color:#000000;">i + 1</span>
<span style="color:#000000;">产生的值为</span>
<span style="color:#000000;">6</span>
<span style="color:#000000;">。在末尾添加分号，把i+1</span>
<span style="color:#000000;">变成语句： </span>
</div>
<div>
<span style="color:#000000;">i + 1; </span>
</div>
<div>
<span style="color:#4da8ee;"><strong>执行这条语句时，我们计算出了i + 1的值；但是我们没有保存此值（也没有以某种方式使用这个值），因此这个值就丢失了。</strong></span>
</div>
</div>
</blockquote>
<blockquote>
<p><span style="color:#000000;">问：但是类似</span><span style="color:#000000;"><strong>i = 1;</strong></span><span style="color:#000000;">这样的语句会如何呢？我没发现有什么东西被丢掉了。</span></p>
<div>
<span style="color:#000000;">答：不要忘记在</span>
<span style="color:#000000;">C</span>
<span style="color:#000000;">语言中</span>
<span style="color:#000000;">=</span>
<span style="color:#000000;">是一种运算符，它可以像其他任何运算符一样产生值。赋值语句 </span>
</div>
<div>
<span style="color:#000000;">i = 1; </span>
</div>
<div>
<span style="color:#ed7976;"><strong>把1赋值给i。整个表达式的值是1，这个值被丢掉了。编写语句的首要目的是改变i的值，因此丢掉表达式的值不算什么大的损失。</strong></span>
</div>
</blockquote>
<blockquote>
<p><span style="color:#956fe7;">最后的最后，创作不易，希望读者三连支持💖</span></p>
<p><span style="color:#956fe7;">赠人玫瑰，手有余香💖</span></p>
</blockquote>
</div>
</div>