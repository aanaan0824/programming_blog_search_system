<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p id="main-toc"><strong>目录</strong></p>
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:40px;"><a href="#%E5%89%8D%E8%A8%80">前言</a></p>
<p id="%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">添加资源文件</a></p>
<p id="%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:40px;"><a href="#%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8">资源文件的使用</a></p>
<hr id="hr-toc"/>
<h2 id="%E5%89%8D%E8%A8%80">前言</h2>
<p>        当Qt工程打包好发给他人使用时可能会出现一些图片不显示或者一张图片都加载不出来情况，那么可能就是他人的电脑没有这些图片资源，或者源程序加载图片的方法采用的是绝对路径的写法，与他人电脑上面图片的绝对路径不一致导致加载不出来。</p>
<p>        通过Qt添加资源文件的方法就可以解决这个问题，而且项目打包发给别人的时候不需要把图片也一起打包，可以节省很多空间。本文就是介绍Qt如何添加资源文件并使用。</p>
<h2></h2>
<h2 id="%E6%B7%BB%E5%8A%A0%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6">添加资源文件</h2>
<p>        右键工程文件夹——&gt;点击添加新文件</p>
<p><img alt="" height="321" src="image\2ec457577a8543ddb43138dc3822e9fe.png" width="415"/></p>
<p>        依次选择Qt——&gt;Qt Resource File——&gt;choose</p>
<p><img alt="" height="1070" src="image\90a9690b92b94584a4f0c8647e1369fa.png" width="1200"/></p>
<p>        给资源起个名字，点击下一步，然后点击完成。</p>
<p><img alt="" height="426" src="image\97544cc216ba4016a8709d6762c7a6d9.png" width="681"/></p>
<p>        先选择添加前缀，然后把前缀改成自己需要的，或者直接用 / </p>
<p><img alt="" height="228" src="image\97df82e37be84e21b7d8e132d463d382.png" width="567"/></p>
<p> <img alt="" height="225" src="image\452e3a4981de424babbc2425761c85d7.png" width="560"/></p>
<p>        再选择添加文件，然后把需要的图片添加进去即可，Ctrl+s保存。</p>
<p><img alt="" height="246" src="image\b7c17b2731a7499da05ec15378b6f1f9.png" width="562"/></p>
<p>        在工程这边就可以看到添加的图片资源，至此资源添加就完成了。</p>
<p><img alt="" height="306" src="image\0eec24c73f244b89bc229b3bc58fc654.png" width="563"/></p>
<p>        后续有新的图片要添加，可以右键qrc文件，然后Open With ——&gt;资源编辑器，就可以重新到添加文件的界面。 </p>
<p><img alt="" height="339" src="image\47a3ea69a63f4557a7846bb439c79040.png" width="570"/></p>
<p></p>
<h2 id="%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8">资源文件的使用</h2>
<p>        图片路径的写法：冒号 + 之前添加的前缀 + 图片所在的文件夹 + /xxx.png</p>
<p>比如：    :/image/design.png</p>
<p><img alt="" height="206" src="image\d0bcfa1e1e3f45998ef57af37613de33.png" width="534"/></p>
<p> 以QLabel和QPushButton为例添加图片。代码如下：</p>
<pre><code class="language-cpp">//标签加载图片
QLabel *imgLabel = new QLabel(this);
imgLabel-&gt;resize(64,64);
imgLabel-&gt;move(200,100);
imgLabel-&gt;setPixmap(QPixmap(":/image/design.png").scaled(64,64));//图片大小改为64x64

//按钮加载图片
QPushButton *imgBtn = new QPushButton(this);
imgBtn-&gt;resize(64,64);
imgBtn-&gt;move(200,300);
imgBtn-&gt;setStyleSheet("QPushButton {background-image: url(:/image/edit.png)}");</code></pre>
<p>效果</p>
<p><img alt="" height="372" src="image\5084e47ad31c4d3f802588941259efb6.png" width="343"/></p>
<p>        之后项目打包发布的时候就不需要image文件夹了，所有的图片信息都以二进制形式存在xxx.qrc文件里了。</p>
<p></p>
</div>
</div>