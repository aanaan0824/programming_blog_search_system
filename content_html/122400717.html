<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<h1></h1>
<blockquote>
<p>本文主要是介绍了如何将本地编写的.Net Core程序部署到IIS中运行。</p>
</blockquote>
<h1 id="%E7%9B%B8%E5%85%B3%E7%8E%AF%E5%A2%83">相关环境</h1>
<ul><li>Windows Server 2016</li><li>Visual Studio 2022</li><li>.Net Core 6</li></ul>
<h1 id="%E6%BC%94%E7%A4%BA%E7%BD%91%E7%AB%99">演示网站</h1>
<blockquote>
<p>此步骤介绍在VS中如何新建一个.Net Core项目，用于部署到IIS中。</p>
<p>如果你当前有.Net Core项目，可跳过此步骤。</p>
</blockquote>
<p><img alt="" height="620" src="image\c912c4a1808d41da98db8192cc277d62.png" width="930"/></p>
<p> <img alt="" height="617" src="image\cf7b8f714b1948ae9ffcd578832e7467.png" width="927"/></p>
<p> <img alt="" height="615" src="image\e20ddd1a39b14075a28a005331a0fa66.png" width="924"/></p>
<p>如果框架版本没有.Net 6，可能是因为你使用的VS版本太低导致。可以在微软下载.Net 6 SDK，安装之后重启VS即可看到。</p>
<p> <img alt="" height="612" src="image\1e97a66038c5444ab8572821cda595d8.png" width="919"/></p>
<p>点击创建后，即可看到VS创建的默认网站模板，点击上方的运行按钮即可看到站点效果。</p>
<p> <img alt="" height="580" src="image\f772b9dfc8ba40a88a3a39bc67a63e1a.png" width="915"/></p>
<p> 站点效果</p>
<p><img alt="" height="186" src="image\3c24dc4476714de0a37a82706f237a9b.png" width="849"/></p>
<h1 id="%E5%B0%86%E7%AB%99%E7%82%B9%E5%8F%91%E5%B8%83%E5%88%B0%E6%9C%AC%E5%9C%B0">将站点发布到本地</h1>
<blockquote>
<p>此步骤介绍将项目代码编译发布到本地文件夹，后续将此文件夹的内容部署到IIS中运行</p>
</blockquote>
<p>在网站项目上，点击右键，选择发布</p>
<p><img alt="" height="868" src="image\9ec04ea83dc14a8087e3971b5ab70620.png" width="851"/></p>
<p>选择发布到文件夹。</p>
<p><img alt="" height="513" src="image\9ddcee6157b546ed8a67f483fcd9af6a.png" width="850"/></p>
<p> <img alt="" height="593" src="image\c05f58521a2b46c7a8ba875c7fae6cae.png" width="846"/></p>
<p> <img alt="" height="434" src="image\5095ee79a4674fcba2c3b9cdf6bebe4b.png" width="848"/></p>
<p>点击发布</p>
<p><img alt="" height="681" src="image\977f66a825f84d4c8bc6285f164319e4.png" width="850"/></p>
<p> 发布完成的文件夹内容如下</p>
<p><img alt="" height="361" src="image\22a3cb0251a84ed29bfc617f2c9f9d48.png" width="845"/></p>
<p> 好了，项目已经编译发布完成了，下一步配置服务器IIS环境后，就可以在服务器上运行你的项目了。 </p>
<h1 id="%E6%9C%8D%E5%8A%A1%E5%99%A8IIS%E9%85%8D%E7%BD%AE">服务器IIS配置</h1>
<p>打开【程序和功能】</p>
<p><img alt="" height="767" src="image\a99847e692394b5b987973a36960c1c6.png" width="1200"/></p>
<p>在【启用或关闭Windows功能】中，打开IIS服务</p>
<p><img alt="" height="334" src="image\533204108aef4ccb8ead48621ccd34f9.png" width="552"/></p>
<p> <img alt="" height="595" src="image\3ba774ad9b3b4a84b6eb96a9794c5c22.png" width="1143"/></p>
<p><img alt="" height="550" src="image\abc16ba113aa43a0adae5deb29030225.png" width="778"/></p>
<p> <img alt="" height="552" src="image\6a265ee9d175450088d8447e98fcdf51.png" width="777"/></p>
<p> <img alt="" height="550" src="image\c3b98b76f0b948289eddc49356038b02.png" width="772"/></p>
<p> <img alt="" height="523" src="image\2a340e96b1e54dfd833e28696f58a5d0.png" width="701"/></p>
<p> <img alt="" height="404" src="image\e582d4e470eb4a72940a1920a7f0614d.png" width="424"/></p>
<p> <img alt="" height="522" src="image\e441e59ead0846aab750dc55341cbcde.png" width="768"/></p>
<p> <img alt="" height="682" src="image\5a7dd1a872e84facb98e28076f0d4006.png" width="1076"/></p>
<p> <img alt="" height="727" src="image\846f459b9cf944fcb9af357a1eb6d1fc.png" width="1200"/></p>
<p> <img alt="" height="726" src="image\7203a28d54594febbe89045f72ecc78e.png" width="1200"/></p>
<p> 点击【下一步】，选择【安装】，开始安装IIS服务。</p>
<p><img alt="" height="723" src="image\73f0123ae867471f8cb93a100501ea1b.png" width="1200"/></p>
<p> 打开【IIS 管理器】</p>
<p><img alt="" height="734" src="image\33cbf82c22e641e6a611c39228d69ceb.png" width="570"/></p>
<p>至此，IIS服务就已经安装好了。可访问服务器的IP地址就可以看到默认的欢迎页了。</p>
<p><img alt="" height="705" src="image\893fac9881bc43ce812ccf93e28090b6.png" width="1200"/></p>
<p> 此时虽然安装好了IIS服务，但是想要运行.Net Core项目，还需要安装官方提供的Hosting安装包才可以。</p>
<p>下载地址：<br/><a class="has-card" href="https://dotnet.microsoft.com/zh-cn/download/dotnet" title=".NET 下载(Linux、macOS 和 Windows)"><span class="link-card-box"><span class="link-title">.NET 下载(Linux、macOS 和 Windows)</span><span class="link-desc">适用于 Linux、macOS 和 Windows 的官方 .NET 下载。.NET 是一个免费的跨平台开源开发人员平台，用于构建许多不同类型的应用程序。</span><span class="link-link"><img alt="" class="link-link-icon" src="image\apple-touch-icon.png"/>https://dotnet.microsoft.com/zh-cn/download/dotnet</span></span></a></p>
<p> <img alt="" height="478" src="image\7e58e160503d4bec919deed2df8365b7.png" width="1200"/></p>
<p> <img alt="" height="840" src="image\c72cd7f60ff44f0cb0f3c2ccfd728920.png" width="1200"/></p>
<p> 下载完成之后，在服务器安装即可。</p>
<p><img alt="" height="346" src="image\bdb10a7673bb4707a3a1c49380c6412b.png" width="481"/></p>
<p> <img alt="" height="348" src="image\6b7ac96e793641469b464b66829ae550.png" width="479"/></p>
<p><strong> 重启服务器后，就可以开始部署网站了。</strong></p>
<p>在服务器上新建文件夹，用于放置程序。</p>
<p> 将在本地发布的项目，拷贝到服务器上的文件夹里。</p>
<p><img alt="" height="324" src="image\b955b04b13bf4412afcc8c7734191b0e.png" width="723"/></p>
<p>打开【IIS管理器】，将【Default Web Site】网站停止。因为如果不停止，稍后部署的程序也会用到80端口，会造成端口号冲突。</p>
<p><img alt="" height="751" src="image\d86626b99eda4229b3ef09e881ea4a6c.png" width="1200"/></p>
<p> 新建网站</p>
<p><img alt="" height="413" src="image\2cb7bebe0a33420bbf5f40098c0ba182.png" width="447"/></p>
<p><img alt="" height="797" src="image\134a52291402432ca87205138ee0cf90.png" width="730"/></p>
<p> 默认网站已经停止，虽然这里提示冲突，但是后续不影响访问。</p>
<p><img alt="" height="721" src="image\b0a29e16683b4bebbe4b746a135ecf4b.png" width="798"/></p>
<p><img alt="" height="486" src="image\cb9ea50b04544fe3bfe8dcd90e4eef09.png" width="1169"/></p>
<p>网站显示【已启动】表示已经部署成功了。 </p>
<h1 id="%E9%AA%8C%E8%AF%81">验证</h1>
<p>访问服务器IP地址，验证网站是否部署成功。我的服务器IP为：192.168.31.101</p>
<p><img alt="" height="307" src="image\1039ae035149447aa55bad935100f07f.png" width="1200"/></p>
<p>可以看到服务器可以正常访问。</p>
<p></p>
<h1>问题排查</h1>
<p>网站部署完成后访问不了，可能是以下几种情况：</p>
<ul><li>服务器防火墙没有打开80端口，或者云厂商需要配置防火墙规则</li><li>网站没有正确启动</li></ul>
</div>
</div>