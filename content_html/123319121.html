<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atelier-sulphurpool-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_3">前言</a></li><li><a href="#_23">一、字符指针</a></li><li><ul><li><a href="#1_24">1.字符指针的定义</a></li><li><a href="#2_28">2.字符指针的作用</a></li><li><a href="#3_68">3.字符指针的特点</a></li></ul>
</li><li><a href="#_108">二、指针数组</a></li><li><ul><li><a href="#1_111">1.指针数组的定义</a></li><li><a href="#2_139">2.指针数组的使用</a></li></ul>
</li><li><a href="#_199">三、数组指针</a></li><li><ul><li><a href="#1_202">1.数组指针的定义</a></li><li><a href="#2_240">2.细说指针</a></li><li><ul><li><a href="#21_246">2.1.指针类型</a></li><li><a href="#22_263">2.2.指针所指向的类型</a></li><li><a href="#23_275">2.3.指针的值</a></li><li><a href="#24_285">2.4.指针大小</a></li></ul>
</li><li><a href="#3_289">3.数组名相关</a></li><li><a href="#4_317">4.数组指针的使用</a></li></ul>
</li><li><a href="#_455">四、数组传参和指针传参</a></li><li><ul><li><a href="#1_459">1.一维数组传参</a></li><li><a href="#2_493">2.二维数组传参</a></li><li><a href="#3_547">3.一级指针传参</a></li><li><a href="#4_589">4.二级指针传参</a></li></ul>
</li><li><a href="#_642">五、函数指针</a></li><li><ul><li><a href="#1_643">1.函数指针的定义</a></li><li><a href="#2_662">2.函数指针的类型</a></li><li><a href="#3_678">3.函数指针的使用</a></li></ul>
</li><li><a href="#_736">六、函数指针数组</a></li><li><ul><li><a href="#1_737">1.函数指针数组的定义</a></li><li><a href="#2_765">2.函数指针数组的使用</a></li></ul>
</li><li><a href="#_964">七、(函数指针数组)指针</a></li><li><ul><li><a href="#1_965">1.(函数指针数组)指针的定义</a></li><li><a href="#2_981">2.(函数指针数组)指针的使用</a></li></ul>
</li><li><a href="#_1002">八、回调函数</a></li><li><ul><li><a href="#1_1003">1.回调函数的定义</a></li><li><a href="#2_1013">2.回调函数的使用</a></li><li><a href="#3qsortquick_sort_1089">3.qsort函数(quick sort快速排序函数)</a></li><li><ul><li><a href="#31qsort_1172">3.1.qsort函数的使用</a></li><li><a href="#32qsort_1235">3.2.qsort函数的模拟实现</a></li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<hr/>
<h1><a id="_3"></a>前言</h1>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ecf256251a5844348bcfe985c77ba263.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<p>众所周知，C指针算是C最难的一部分。在这我会将和大家一起深究指针并征服C指针。</p>
<p>在正式学习进阶指针之前，我们先来简单回忆下<strong>指针基础</strong>：</p>
<blockquote>
<p>指针定义：指针变量，用于存放地址。地址唯一对应一块内存空间。<br/> 指针大小：32位平台下占4个字节，64位平台占8个字节。<br/> 指针类型：类型决定指针<code>±</code>整数的步长和指针解引用时访问的大小。<br/> 指针运算：指针解引用，指针<code>±</code>整数，指针-指针，指针的关系运算。<br/> 指针诞生：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/17c9cc27810b463f954910bcf830d7ba.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</blockquote>
<p>这些内容在<strong>C基础</strong>部分已经讲过，铁汁们可以复习一下👉<a href="https://blog.csdn.net/weixin_50614301/article/details/120242978?spm=1001.2014.3001.5502">传送门</a>👈，看完记得回来啊~</p>
<p>理解一遍后，就让我们正式起航扬帆吧！乌拉~<br/> <strong>注：</strong> 我们习惯把指针变量叫作指针，本文指针本质是指针变量</p>
<hr/>
<h1><a id="_23"></a>一、字符指针</h1>
<h2><a id="1_24"></a>1.字符指针的定义</h2>
<p><strong>字符指针：</strong> 指向字符的指针，类型为<code>char*</code></p>
<hr/>
<h2><a id="2_28"></a>2.字符指针的作用</h2>
<ol><li>指向单个字符变量</li></ol>
<pre><code class="prism language-c">	<span class="token keyword">char</span> ch <span class="token operator">=</span> <span class="token string">'w'</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span><span class="token operator">*</span> pch <span class="token operator">=</span> <span class="token operator">&amp;</span>ch<span class="token punctuation">;</span>
</code></pre>
<ol start="2"><li>指向字符串首字符</li></ol>
<pre><code class="prism language-c">	<span class="token keyword">char</span><span class="token operator">*</span> pc <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span>pc<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>看图说话：<br/> (为了理解简单，地址用<font color="#38B0DE" size="4">201、204</font>表示)<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/16080fc71b2249ce9decd04fa6ffd7a4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>①比较好理解，<code>pch</code>存有<code>ch</code>的地址，因此可通过解引用操作访问<code>ch</code><br/> ②并不是把字符串<code>"hello"</code>放进指针，而是把字符串首字符的地址放进指针，通过首字符地址，可以找到整个字符串</p>
</blockquote>
<p>对于上面的解析，我们可以进行验证：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8784b0ace8e247c2a5048d4785d4c6cc.png"/><br/> 为什么靠一个首字符的地址就可以找到整个字符串呢？</p>
<p>下面我们来证明一下：</p>
<pre><code class="prism language-c">	<span class="token keyword">char</span><span class="token operator">*</span> pc <span class="token operator">=</span> <span class="token string">"hello"</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>pc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//e</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%c\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>pc <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//l</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> pc<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//hello</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s\n"</span><span class="token punctuation">,</span> pc <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ello</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/91455cafa298492dac685ebb057f08de.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<ol><li>字符串中每<strong>1个字符占1个字节</strong>，且内存的单元是1个字节，为了方便管理，<font color="red" size="2"><strong>字符串在内存空间上是连续存放的</strong></font><br/> 即hello是连续的</li><li><code>%s</code>：输出字符串，从所给地址开始，一直打印到<code>\0</code>结束符号(不包括<code>'\0'</code>)</li></ol>
</blockquote>
<hr/>
<h2><a id="3_68"></a>3.字符指针的特点</h2>
<p>这是一道题面试题：</p>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> str1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello bit"</span><span class="token punctuation">;</span>
	<span class="token keyword">char</span> str2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello bit"</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str3 <span class="token operator">=</span> <span class="token string">"hello bit"</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str4 <span class="token operator">=</span> <span class="token string">"hello bit"</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>str1 <span class="token operator">==</span> str2<span class="token punctuation">)</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str1 and str2 are same\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str1 and str2 are not same\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
	<span class="token keyword">if</span><span class="token punctuation">(</span>str3 <span class="token operator">==</span> str4<span class="token punctuation">)</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str3 and str4 are same\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span> 
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"str3 and str4 are not same\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a68eadbb0d424789a51e878b5523a677.png"/></p>
<blockquote>
<p>数组名是数组首元素的地址；指针存有字符串首字符的地址<br/> 两者有异曲同工之妙，所以<br/> (str1 == str2) ，表示<strong>比较存放相同字符串的两个数组的地址是否相同</strong>；<br/> (str3 == str4)，表示<strong>比较存放相同字符串的两个指针的值是否相同</strong></p>
</blockquote>
<p>我们可以做出分析：</p>
<blockquote>
<p>1.str1[]和str2[]是字符数组，在内存上会开辟两块地址不一样空间，但存放相同的内容<code>"hello bit"</code><br/> 2.str3和str4是指向常量字符串的指针，而常量字符串存放在内存的<strong>常量区</strong>，常量区特点是<strong>常量值不可被修改</strong>且<strong>有唯一性</strong>(就没有存在2份或多份的必要)，所以指针指向的是同一份数据，故地址是相同的<br/> 图解：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ac983130c3e0435792a31153313e01b9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</blockquote>
<p><strong>注：</strong> 常量区的常量不可修改，通常用<code>const</code>来修饰。防止被意外修改</p>
<hr/>
<h1><a id="_108"></a>二、指针数组</h1>
<h2><a id="1_111"></a>1.指针数组的定义</h2>
<p>我们先看：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 整型数组
<span class="token keyword">char</span> ch<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  字符数组
<span class="token keyword">float</span> f<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 浮点型数组
</code></pre>
<blockquote>
<p>整型数组是存放整型的数组。<br/> 类比得<strong>指针数组是存放指针的数组</strong>。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token keyword">int</span><span class="token operator">*</span> parr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>整型指针数组
<span class="token keyword">char</span><span class="token operator">*</span> pch<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>字符指针数组
<span class="token keyword">float</span><span class="token operator">*</span> pf<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>浮点型指针数组
</code></pre>
<p>关于指针数组的数组名：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token operator">*</span> parr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>数组的数组名是首元素的地址：<br/> 整型数组的数组名<code>arr</code>，是首元素(整型)的地址，所以<code>arr</code>是一级指针。<br/> 整型指针数组的数组名<code>parr</code>，也是首元素(整型指针)的地址，所以<code>parr</code>是二级指针。</p>
</blockquote>
<hr/>
<h2><a id="2_139"></a>2.指针数组的使用</h2>
<p>整型指针数组的使用：</p>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">//int a = 10;</span>
    <span class="token comment">//int b = 20;</span>
    <span class="token comment">//int c = 30;</span>
    <span class="token comment">//int* arr[3] = { &amp;a, &amp;b, &amp;c };//不常用的写法</span>
    
    <span class="token keyword">int</span> arr1<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> arr2<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> arr3<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> parr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> arr1<span class="token punctuation">,</span>arr2<span class="token punctuation">,</span>arr3 <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//常见的写法</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> 
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//1.</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> parr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2.</span>
         <span class="token comment">// printf("%d ", *(*(parr + i) + j));</span>
        <span class="token punctuation">}</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/70aacd1b5eb241899b5a6b8ca483eba3.png"/></p>
<blockquote>
<p>通过指针数组访问整型数组的每一个元素<br/> <code>parr[i][j]</code>等价于<code>*(*(parr + i) + j)</code><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/02d7a0034eaa4a73afedd5d598363bd4.png"/></p>
</blockquote>
<p>字符指针数组的使用：</p>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> pch<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"abcde"</span><span class="token punctuation">,</span> <span class="token string">"bcdef"</span><span class="token punctuation">,</span> <span class="token string">"cdefg"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//1.</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> pch<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.</span>
    <span class="token comment">//  printf("%s", *(pch + i));</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/df19aa4e9fc740e6836355ed7807927b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p><code>pch[i]</code>是字符串首字符的地址，<code>%s</code>:打印字符串</p>
</blockquote>
<hr/>
<h1><a id="_199"></a>三、数组指针</h1>
<h2><a id="1_202"></a>1.数组指针的定义</h2>
<p>我们已经知道：<br/> 字符指针：指向字符的指针<br/> 整型指针：指向整型的指针</p>
<blockquote>
<p>C语言语法是有规律性的，也就是说，指针指向的类型&lt;==&gt;指针的类型(相互决定)<br/> 所以我们可以类比得：<br/> <strong>数组指针：指向数组的指针</strong>，即数组的地址存放在数组指针中。</p>
</blockquote>
<table><tbody><tr><td bgcolor="yellow">到此，我要说一下，指针部分会出现一些复杂的类型，那如何理解一个复杂的类型？<font color="Black" face="黑体" size="4"> </font> </td></tr></tbody></table>
<p>在这我先给大家抛出一个屡试不爽的<strong>技巧总结</strong>，有了这些法宝，后面的路就会容易走。</p>
<p>类型显得复杂的原因是<strong>它由多种的运算符组成</strong>，当我们分清运算符的优先级，理清顺序，自然会柳暗花明又一村~</p>
<blockquote>
<p>1.运算符主要有三种，它们的优先级是：<code>* &lt; [ ] &lt; ( )</code><br/> 2.变量名第一次与运算符结合就决定了它的本质。(变量名的处女情结?_?😂)<br/> 如，先与<code>*</code>结合是指针；先于<code>[ ]</code>结合是数组；<br/> <code>( )</code>:1.先于<code>( )</code>结合是函数，即<code>p( )</code> 2.用于改变优先级，如<code>(*p)</code></p>
</blockquote>
<p>下面我们一起来探索一下吧！</p>
<pre><code class="prism language-c"><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">p</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p><code>int* p[10];</code>//由优先级知：p先于<code>[]</code>结合，则p是数组；后与<code>*</code>结合，则是指针数组；最后与<code>int</code>结合，则是<strong>整型指针数组</strong><br/> <code>int(*p)[10];</code>//()优先级最高，p先与<code>*</code>结合，则p是指针；后<code>[]</code>结合，则是数组指针；最后与<code>int</code>结合，则是<strong>整型数组指针</strong><br/> <code>int p(int);</code>//p先与<code>( )</code>结合，则p是函数；参数是整型，返回值是整型，则是参数为整型，返回值是整型的函数<br/> <code>int (*p)(int);</code>//p先与<code>*</code>结合，则p是指针；后与<code>( )</code>结合，则指针指向的是函数，函数参数是整型，返回值是整型，则是一个指向参数为整型，返回值是整型的函数的指针(函数指针)<br/> <code>int *(*p(int))[10];</code>//p先与( )结合，则p是形参为<code>int</code>的函数；后与*结合，则是返回指针的函数；再与<code>[ ]</code>结合，则是返回的指针指向的是一个数组；再与<code>*</code>结合,说明数组里的元素是指针；最后与<code>int</code>结合，指针指向的内容是整型数据。所以p是返回值为整型指针数组指针，形参为int型的函数。</p>
</blockquote>
<hr/>
<h2><a id="2_240"></a>2.细说指针</h2>
<table><tbody><tr><td bgcolor="yellow">好了，现在我们已经学会了如何理解一个复杂的类型。那对于一个指针，我们要搞清楚它的什么呢？<font color="Black" face="黑体" size="4"> </font> </td></tr></tbody></table>
<p>指针是一个特殊的变量，它存放着内存中的地址。<br/> 要深入了解它从这四方面考虑：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/87a83ded4897445f8b50c47493d50a67.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="21_246"></a>2.1.指针类型</h3>
<p>上一章说过，<strong><font color="red" size="3">去掉名字就是类型</font></strong>。<br/> 同理，<strong>若把指针声明语句中的<font color="red" size="3">指针的名字</font>去掉，剩下部分就是该指针的类型。</strong></p>
<blockquote>
<p><code>int* ptr;</code>//指针的类型是int*<br/> <code>char* ptr;</code>//指针的类型是char*<br/> <code>int** ptr;</code>//指针的类型是int**<br/> <code>int (*ptr)[5];</code>//指针的类型是int(<em>)[5]<br/> <code>int* (*ptr)[10];</code>//指针的类型是int</em>(*)[10]</p>
</blockquote>
<p>指针类型的意义(C基础篇已经讲过)：</p>
<p>1.指针解引用访问几个字节(访问的内存空间大小)<br/> 2.指针类型决定了指针±整数跳过几个字节(步长)</p>
<h3><a id="22_263"></a>2.2.指针所指向的类型</h3>
<p>指针所指向的类型决定了编译器看待指针指向内存区的内容的方式<br/> <strong>若把指针声明语句中的<font color="red" size="3">指针的名字</font>和<font color="red" size="3">名字左边的指针声明符号<code>*</code></font>去掉，剩下部分就是指针所指向的类型。</strong></p>
<blockquote>
<p><code>int* ptr;</code>//指针所指向的类型是int<br/> <code>char* ptr;</code>//指针所指向的类型是char<br/> <code>int** ptr</code>;//指针所指向的类型是是int*<br/> <code>int (*ptr)[5];</code>//指针所指向的类型是int()[5]<br/> <code>int* (*ptr)[10];</code>//指针所指向的类型是int()[10]</p>
</blockquote>
<p>通过观察我们可以发现：</p>
<blockquote>
<p>二者可互推<img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/571f4e2344b04b09a1c8f2d8ee9b4b54.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</blockquote>
<h3><a id="23_275"></a>2.3.指针的值</h3>
<p>指针的值：指针里存放的地址<br/> 举个例子：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">;</span>	<span class="token comment">//定义一个指针</span>
<span class="token keyword">int</span> a<span class="token punctuation">;</span>	<span class="token comment">//定义一个int类型的变量</span>
p<span class="token operator">=</span><span class="token operator">&amp;</span>a<span class="token punctuation">;</span>	<span class="token comment">//使用取址运算符(&amp;)将变量a的地址赋给p</span>
</code></pre>
<p>指针的值：p本身的值，p里存放这变量a的内存的起始地址<br/> 而指针p所指向的内存区就是从a的起始地址开始，长度为<code>size(int)</code>的一片内存区。</p>
<h3><a id="24_285"></a>2.4.指针大小</h3>
<p>指针大小：32位平台下占4个字节，64位平台占8个字节。</p>
<hr/>
<h2><a id="3_289"></a>3.数组名相关</h2>
<p>老生常谈：</p>
<blockquote>
<p>①sizeof(数组名)，计算整个数组的大小，sizeof内部单独放一个数组名，数组名表示整个数组。<br/> ②&amp;数组名，取出的是数组的地址。&amp;数组名，数组名表示整个数组。<br/> 除这两种外，数组名都是数组首元素的地址。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p1 <span class="token operator">=</span> arr<span class="token punctuation">;</span><span class="token comment">//arr是数组首元素地址，为int型</span>
	<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p2<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">;</span><span class="token comment">//&amp;arr是整个数组的地址，为int [10]型</span>
	<span class="token comment">//arr和&amp;arr值一样，但类型不一样</span>
	
	<span class="token comment">//p1和p2是相同的指向同一位置</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//204</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//204</span>
	<span class="token comment">//指针类型决定指针±整数的步长</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> p1 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//跳过一个整型,208</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%p\n"</span><span class="token punctuation">,</span> p2 <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//跳过一个数组,244</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//为了简单理解,  204,208,244表示地址</span>
<span class="token punctuation">}</span>
</code></pre>
<hr/>
<h2><a id="4_317"></a>4.数组指针的使用</h2>
<p>当我们遍历一维数组时，可以这样做：</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Print1</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//printf("%d ", arr[i]); </span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Print2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//printf("%d ", *(arr + i));</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Print1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Print2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5317ea55b3214b00ac09d5bce0b4fd3a.png"/></p>
<blockquote>
<p>把数组名传给函数时，我们有两种接收方式：<br/> ①数组接收，编译器会将数组退化为指针<br/> ②指针接收<br/> 因为数组名是数组首元素的地址，用指针接收是正确的。</p>
</blockquote>
<p>当数组指针用来接收并访问一维数组时：</p>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>parr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">;</span><span class="token comment">//指针指向数组，数组有10个元素，每个元素为int型</span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>parr<span class="token punctuation">)</span> <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//*parr相当于arr</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>通常这种写法显得小题大作，比较别扭，非常不推荐这种写法。</p>
</blockquote>
<p>通常，数组指针用来接收并访问二维数组，会有很好的效果：</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Print1</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token comment">//二维数组传参,用二维数组接收,实际上不会创建二维数组,编译器会将int arr[3][5]退化为int(*pa)[5]</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> c<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//printf("%d ", arr[i][j]);</span>
			<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>arr <span class="token operator">+</span> i<span class="token punctuation">)</span> <span class="token operator">+</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Print2</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span><span class="token comment">//二维数组传参,用数组指针接收</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> c<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
            <span class="token comment">//1.</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> pa<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//2.</span>
		<span class="token comment">//	printf("%d ", *(*(pa + i) + j));</span>
		<span class="token punctuation">}</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">Print1</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//二维数组首元素是首行 </span>
	<span class="token function">Print2</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//二维数组首元素是首行 </span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/faad2c1cdd9b4d18ad2b6b3628ace6a8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <strong>分析：</strong><br/> 在C基础数组章节，我们知道二维数组在内存中也是连续存储的。<br/> 在这里简单提下，需要复习的，👉<a href="https://blog.csdn.net/weixin_50614301/article/details/119985779?spm=1001.2014.3001.5502">C基础数组传送门 </a>👈<br/> 连续存储：1.每一行内部的元素连续存放 2.行与行之间连续存放</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1c844c1de2184c66ad98e6169cabd1ab.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<ul><li>因此，二维数组的数组名是首行的地址，类型是<code>int(*)[5]</code></li><li>二维数组首元素地址和数组指针是等价的，即数组指针<code>pa</code>就是数组名。</li><li>指针类型是<code>int(*)[5]</code>，解一层引用找到的是二维数组的行</li><li>指针所指向的类型是<code>int[5]</code>，再解一层引用找到的是某行中的元素</li></ul>
</blockquote>
<blockquote>
<p>综上，<strong>正确</strong>的做法是：<strong>使用数组指针来接收二维数组</strong>。</p>
</blockquote>
<p>正确使用数组指针会有很好的效果，但如果随便用可能会很别扭。<br/> 下面是强行使用数组指针的<strong>错误</strong>用法：</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">Print3</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//printf("%d ", pa[i]);</span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>pa <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//一维数组</span>
	<span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">Print3</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//&amp;arr是整个数组的地址</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5b10f06e5b23429aabff84077f8afc50.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 实参为整个数组的地址，形参是数组指针，<code>*(pa+i)</code>解一层引用后，打印出来的为什么还是地址呢？</p>
<blockquote>
<ul><li><code>&amp;</code>是取地址运算符，<code>*</code>是间接运算符。<code>&amp;</code>和<code>*</code>互为逆运算</li><li>则<code>*&amp;x</code> 的含义是，先获取变量 x 的地址，再获取地址中的内容，相当于<strong>抵消</strong></li><li>所以<code>&amp;arr</code>传给<code>pa</code>，执行<code>*pa</code>，相当于<code>*&amp;arr</code>，实质就是<code>arr</code>，还是整个数组的地址。</li><li>整个数组的地址的类型是<code>int(*)[10]</code>，即指针<code>pa</code>的类型是<code>int(*)[10]</code></li><li>由指针类型决定指针±整数的步长可知，每个地址间相差40字节。</li></ul>
</blockquote>
<hr/>
<h1><a id="_455"></a>四、数组传参和指针传参</h1>
<table><tbody><tr><td bgcolor="yellow"><font color="Black" face="黑体" size="3">写代码时要把数组和指针传递给函数的情况在所难免，那函数参数该如何设计呢？ </font> </td></tr></tbody></table>
<h2><a id="1_459"></a>1.一维数组传参</h2>
<p>一维数组传参，下面的接收方式它合理吗？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> arr2<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test2</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>以上的接收方式都合理</p>
</blockquote>
<p><strong>分析：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c825ce90532a455a973882d73c774652.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>数组作为函数形参，会退化为指针。<br/> 所以一维数组传参，数组和指针都可以作为函数形参。</p>
</blockquote>
<hr/>
<h2><a id="2_493"></a>2.二维数组传参</h2>
<p>二维数组传参，下面的接收方式它合理吗？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//二维数组传参</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>分析：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/94ab9a5e76cd4087ba0eebccf314ff39.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<table><tbody><tr><td bgcolor="yellow"><font color="Black" face="黑体" size="3">为什么二维数组作为函数形参，行可省略，列不可省略。 </font> </td></tr></tbody></table>
<blockquote>
<p><strong>原因：</strong> 二维数组存储的时候是"先行后列"，如果不指定列数， 它就不能知道一行放几个数据了。只要知道了列数， 全部放完就可以知道一共能放多少行。<br/> 我们C基础数组在已经讲过，<a href="https://blog.csdn.net/weixin_50614301/article/details/119985779?spm=1001.2014.3001.5502">C基础数组传送门</a>🤏。</p>
</blockquote>
<p>二维数组传参，下面的接收方式它合理吗？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> arr<span class="token punctuation">)</span><span class="token comment">//合理吗？</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//二维数组传参</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>分析：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8abf0d9fa6aa4608b34609d533a95228.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>综上，我们可以总结出二维数组传参时，函数形参的两种设计方法：<br/> ①形参给出第二维(列)的长度<br/> ②形参为指向数组的指针</p>
</blockquote>
<p>另外，还有一种方式：<strong>形参声明为指针的指针<code>void test(int**a){}</code></strong>，该方式比较复杂，到后期学到CPP在详谈(<strong>关注我不迷路哦~</strong>)</p>
<hr/>
<h2><a id="3_547"></a>3.一级指针传参</h2>
<p>一级指针作为实参时，函数形参该如何设计？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> ptr<span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span><span class="token comment">//一级指针传参，用一级指针接收</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>ptr <span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>p <span class="token operator">=</span> arr<span class="token punctuation">;</span>
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//p是一级指针，传给函数</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token comment">//1 2 3 4 5 6 7 8 9 10</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>一级指针作为实参，函数形参可以是<strong>一级指针</strong>，也可以是<strong>一维数组(不推荐)</strong>。</p>
</blockquote>
<p><strong>反向思考：</strong> 若函数形参是一级指针，实参该如何设计？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span><span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">test1</span><span class="token punctuation">(</span>pa<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>函数形参为一级指针，实参可以是<strong>地址(一级指针)</strong>，也可以是<strong>数组</strong>。</p>
</blockquote>
<hr/>
<h2><a id="4_589"></a>4.二级指针传参</h2>
<p>二级指针作为实参时，函数形参该如何设计？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> pp<span class="token punctuation">)</span><span class="token comment">//二级指针接收</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//指针数组，会退化为二级指针，不推荐该写法</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> pp <span class="token operator">=</span> <span class="token operator">&amp;</span>p<span class="token punctuation">;</span>
	<span class="token function">test</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一级指针的地址，类型为二级指针</span>
	<span class="token function">test</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实参二级指针</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>二级指针作为实参时，函数形参可以是<strong>二级指针</strong>，也可以是<strong>指针数组(不推荐)</strong>。</p>
</blockquote>
<p>反向思考：若函数形参是二级指针，实参该如何设计？</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> pp<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token operator">*</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span><span class="token operator">*</span> pp <span class="token operator">=</span> <span class="token operator">&amp;</span>p<span class="token punctuation">;</span>
	<span class="token keyword">int</span><span class="token operator">*</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token operator">&amp;</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token function">test</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//一级指针p的地址，类型为二级指针</span>
	<span class="token function">test</span><span class="token punctuation">(</span>pp<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//实参二级指针</span>
	<span class="token function">test</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//数组名是数组首元素的地址，首元素是一级指针，它的地址是二级指针</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>函数形参为二级指针时，实参可以是<strong>二级指针(一级指针的地址)</strong>，也可以是<strong>指针数组的元素的地址</strong>(特殊的为数组名，因为它是数组首元素的地址嘛)。</p>
</blockquote>
<table><tbody><tr><td bgcolor="yellow"><font color="Black" face="黑体" size="4"> 我们为什么要学习如何设计实参和函数形参？</font> </td></tr></tbody></table>
<p>1.调用别人设计好的函数时，我们需要清楚传什么实参。<br/> 2.根据函数的目的，来设计函数形参。</p>
<hr/>
<h1><a id="_642"></a>五、函数指针</h1>
<h2><a id="1_643"></a>1.函数指针的定义</h2>
<blockquote>
<p>类比得，函数指针：指向函数的指针，它存放着函数的地址。</p>
</blockquote>
<p>没错，函数也是有地址的，可以看下面一组代码：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4c0a99550c064e59b863ecab7730707a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>表示函数地址的方式：</p>
<ul><li>函数名</li><li>&amp;函数名</li></ul>
</blockquote>
<p><font color="red" size="3"><strong>注：</strong></font>这里需要与数组名区别开来：</p>
<ul><li>函数名 == &amp;函数名 (都是函数地址，相同意义)</li><li>数组名 != &amp;数组名 (不同意义)</li></ul>
<hr/>
<h2><a id="2_662"></a>2.函数指针的类型</h2>
<p>函数的地址需要存放在函数指针里，那么函数指针的类型该如何写呢？</p>
<p>其实很简单，上面我们学习了<strong>如何去理解一个负责的类型</strong>，相信我们也可以自己写出来：</p>
<pre><code class="prism language-c"><span class="token comment">//以Add函数为例</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>Add<span class="token punctuation">;</span>
</code></pre>
<p><strong>解析：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/bce1946fa85d4a89b4075aca9858cd85.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 自我检测：如何保存<code>viod test(char* str){}</code>的地址</p>
<blockquote>
<p>答案：<code>void (*pt)(char*) = &amp;test;</code></p>
</blockquote>
<hr/>
<h2><a id="3_678"></a>3.函数指针的使用</h2>
<p>计算机硬件程序经常通过调用地址的方式来调用函数，因此需要使用函数指针调用函数。</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

    <span class="token comment">//int(*pf)(int, int) = &amp;Add;</span>
    <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> Add<span class="token punctuation">;</span>

    <span class="token keyword">int</span> ret0 <span class="token operator">=</span> <span class="token function">pf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ret1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ret2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ret3 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret1 = %d\n"</span><span class="token punctuation">,</span> ret0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret2 = %d\n"</span><span class="token punctuation">,</span> ret1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret3 = %d\n"</span><span class="token punctuation">,</span> ret2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret3 = %d\n"</span><span class="token punctuation">,</span> ret3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/80581de358564002ad793fdea1541381.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 因为<code>pf = Add;</code> 所以<code>pf(2,3)</code>相当于<code>Add(2,3)</code>，但pf是函数指针。<br/> <code>(*pf)(2,3)</code>中的<code>*</code>并没意义，可加可不加。</p>
</blockquote>
<p>阅读两端有趣的代码：(<strong>注：</strong> 出自 《C指针和陷阱》 )</p>
<p><strong>代码1：</strong></p>
<pre><code class="prism language-c"><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>解析：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c4302c70ec3943cf9d7c82c77d47c651.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <strong>代码2：</strong></p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">void</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>解析：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/118dda568fdc40d7aa587e637a25cc8f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 或者我们可以通过<strong>类型重定义</strong>来理解：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">typedef</span> <span class="token keyword">void</span> <span class="token punctuation">(</span><span class="token operator">*</span>PFUN<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把void(*)(int)类型重定义为PFUN</span>
	PFUN <span class="token function">signal</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> PFUN<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//等效于void (*signal(int, void(*)(int)))(int);</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<hr/>
<h1><a id="_736"></a>六、函数指针数组</h1>
<h2><a id="1_737"></a>1.函数指针数组的定义</h2>
<p>整型指针数组：存放整型指针的数组。<br/> 类比得，<strong>函数指针数组：存放函数指针的数组。</strong></p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token comment">//int(*)(int,int)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span><span class="token comment">//int(*)(int,int)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf1<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> Add<span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf2<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> Sub<span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pfArr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> pf1<span class="token punctuation">,</span> pf2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">//等效于int (*pfArr[2])(int, int) = { Add, Sub };</span>
			 <span class="token comment">//pfArr 就是函数指针数组</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<ul><li>类型相同的函数指针，放在同一个数组中。</li><li>数组去掉数组名和<code>[ ]</code>，剩下部分就是数组元素类型。<code>pfArr</code>的元素类型为<code>int(*)(int,int)</code></li></ul>
</blockquote>
<hr/>
<h2><a id="2_765"></a>2.函数指针数组的使用</h2>
<p>实现一个简易计算器，来进行加减乘除运算。</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    1. add     2. sub    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    3. mul     4. div    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**         0. exit         **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请选择:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
            ret <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
            ret <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
            ret <span class="token operator">=</span> <span class="token function">Mul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
            ret <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"退出程序\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"重新选择\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行并测试发现：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4460ef492ee146d3b7ea4f01b31f683f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>将<code>input = 0</code>和<code>input = 5</code>放进程序就很容易发现问题所在。</p>
</blockquote>
<p>我们对main主函数部分修改：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请选择:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> <span class="token function">Add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> <span class="token function">Mul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> <span class="token function">Div</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"退出程序\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"重新选择\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行并测试<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4b9984019ecb4eaaa0cab498cf73a0d9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_17,color_FFFFFF,t_70,g_se,x_16"/><br/> 经测试，虽然bug得到了解决，但代码仍存在如下缺陷：</p>
<blockquote>
<p>1.代码冗余，出现大量重复的代码(<code>case</code>中)<br/> 2.可维护性低(后期需要增加其他功能，就得多写一个case)<br/> 3.代码可读性差</p>
</blockquote>
<p>针对缺陷，我们利用函数指针数组进行优化，达到通过数组下标"跳转"来调用不同的函数的目的。</p>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
 
<span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    1. add     2. sub    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    3. mul     4. div    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**         0. exit         **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pfArr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> Add<span class="token punctuation">,</span> Sub<span class="token punctuation">,</span> Mul<span class="token punctuation">,</span> Div<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//pfArr就是函数指针数组</span>
        <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请选择:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>input <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> input <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            ret <span class="token operator">=</span> <span class="token punctuation">(</span>pfArr<span class="token punctuation">[</span>input<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"ret = %d\n"</span><span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>input <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"退出程序\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"选择错误\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行并测试成功：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f6ce7aafaa834f3da336cfd9e6cb7165.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<ul><li>这是函数指针数组的一个应用。函数指针数组的元素是<strong>函数形参同类型，返回值也同类型的函数指针</strong>，我们通过数组下标找到对应的函数指针，可直接调用函数。</li><li>通常我们把这样的数组叫作<strong>转移表</strong>(《C和指针》中有所提及)。</li></ul>
</blockquote>
<hr/>
<h1><a id="_964"></a>七、(函数指针数组)指针</h1>
<h2><a id="1_965"></a>1.(函数指针数组)指针的定义</h2>
<blockquote>
<p>(函数指针数组)指针：本质是一个指针，指针存放着函数指针数组的地址。</p>
</blockquote>
<p>给出一个函数，结合我们所学，请写出函数指针数组指针：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>答案：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/77fd8cf78ab5455a880f48396a34da6a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 用咱们上面说过的方法来写，这岂不是洒洒水的事情~😁</p>
<hr/>
<h2><a id="2_981"></a>2.(函数指针数组)指针的使用</h2>
<p>我们还是以Add函数，来说明(函数指针数组)指针的使用：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>

	<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pa<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token punctuation">)</span> <span class="token operator">=</span> Add<span class="token punctuation">;</span>	<span class="token comment">//函数指针pa</span>

	<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pArr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//函数指针的数组pArr</span>

	<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>ppArr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">,</span><span class="token keyword">int</span> <span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>pArr<span class="token punctuation">;</span>	<span class="token comment">//(函数指针数组)指针ppArr</span>
	
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<hr/>
<h1><a id="_1002"></a>八、回调函数</h1>
<h2><a id="1_1003"></a>1.回调函数的定义</h2>
<p><strong>回调函数就是一个通过函数指针调用的函数。</strong><br/> 如果你把函数的指针(地址)作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，我们就说这是回调函数。回调函数不是由该函数的实现方直接调用，而是在特定的事件或条件发生时由另外的一方调用的，用于对该事件或条件进行响应。</p>
<p><strong>用图来解析：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9a97418b7b4d414199acc696fbe64c25.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<hr/>
<h2><a id="2_1013"></a>2.回调函数的使用</h2>
<p>用刚才的 switch 版本的计算器为例：</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    1. add     2. sub    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**    3. mul     4. div    **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"**         0. exit         **\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"*****************************\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">-</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Mul</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">Div</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> x <span class="token operator">/</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">Calc</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//Calc形参为函数指针</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入2个操作数:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token operator">&amp;</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span> <span class="token function">pf</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> input <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">do</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请选择:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token function">Calc</span><span class="token punctuation">(</span>Add<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>
            <span class="token function">Calc</span><span class="token punctuation">(</span>Sub<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>
            <span class="token function">Calc</span><span class="token punctuation">(</span>Mul<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>
            <span class="token function">Calc</span><span class="token punctuation">(</span>Div<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"退出\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"选择错误\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>把冗余的代码封装成一个Calc函数。<br/> 把所需要用的函数地址传给Calc函数，Calc函数通过传进来的地址，找到所需要用的函数。<br/> <strong>图解：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/730dbae4bdcb4bf982bd7bfdcc82f772.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</blockquote>
<hr/>
<h2><a id="3qsortquick_sort_1089"></a>3.qsort函数(quick sort快速排序函数)</h2>
<p>回顾冒泡排序(我们在C基础数组谈过)：</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">bubble_sort</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 确认趟数</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//一趟冒泡排序</span>
        <span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> sz <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//交换</span>
                <span class="token keyword">int</span> tmp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">print_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">bubble_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>我们实现的冒泡排序函数bubble_sort只能对整型数组排序，当我们想对其他数组或字符串等排序时，bubble_sort就显得很鸡肋。</p>
</blockquote>
<p>因此，我们来了解一下在这方面无所不能的<code>qsort</code>函数：<br/> 说明：qsort函数是C库函数中的快速排序函数，可处理多种类型数组。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/62702abd38c343f5b9eb177591dd0629.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> (<strong>注：</strong> 给大家推荐一个学C的网站——<a href="https://www.runoob.com/cprogramming/c-tutorial.html">菜鸟教程</a>👍）</p>
<table><tbody><tr><td bgcolor="yellow"><font color="Black" face="黑体" size="4">为什么qsort函数可以处理多种类型数组、字符串、结构体等呢？</font> </td></tr></tbody></table>
<p>我们对比自己写的<code>bubble_sort</code>函数和<code>qsort</code>函数，可以从中找到答案：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ee1c1f3bafbc4b2fabe30e737dca2f86.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 因为<code>void* base</code>指针和<code>nitems</code>(待排序数组的元素个数)、<code>size</code>(待排序数组的元素大小)可以描述出任意类型。</p>
<table><tbody><tr><td bgcolor="yellow"><font color="Black" face="黑体" size="4">为什么将参数base的类型是viod*呢？</font> </td></tr></tbody></table>
<pre><code class="prism language-c">	<span class="token keyword">int</span> a<span class="token punctuation">;</span>
	<span class="token keyword">char</span><span class="token operator">*</span> pa <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">;</span><span class="token comment">//从int* 到char* 类型不兼容</span>
</code></pre>
<blockquote>
<p>确定类型的地址赋值给不同类型的指针会警告类型不兼容，强制转化还可能精度丢失。</p>
</blockquote>
<p>而viod*：无(具体)类型，又称通用类型。它可以接收任意类型的指针，<strong>但无法进行指针运算(解引用，指针±整数等)</strong></p>
<p>知道了<strong>待排序数组的元素个数</strong>、<strong>待排序数组的元素大小</strong>和<strong>遍历它们的指针<code>void* base</code></strong>，但是按升序还是降序的顺序还得依靠一个比较函数。</p>
<blockquote>
<p>这个比较函数指定元素的比较方式，而且需要我们自行定义，所以qsort可以说是一个半库函数半自定义函数。<br/> <code>compar</code>函数：</p>
<ul><li>elem1小于elem2，返回值小于0</li><li>elem1大于elem2，返回值大于0</li><li>elem1等于elem2，返回值为0<br/> <strong>(注：elem1，elem2：进行比较的两个元素的地址作参数。)</strong></li></ul>
</blockquote>
<p>现在我们把qsort函数内裤都摸透了，那我们一起来用一用吧~<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/92c6a3f2223c4f258f01f2b55358cfe3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_16,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="31qsort_1172"></a>3.1.qsort函数的使用</h3>
<p>qsort函数对整型数组排序：</p>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">int_cmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">-</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">;</span><span class="token comment">//e1 - e2:升序//将void* 强转为int*</span>
								 <span class="token comment">//e2 - e1降序 </span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">print_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">qsort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> int_cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2063865ee4294f3ea9e89649a89968b6.png"/></p>
<blockquote>
<p><code>qsort</code>函数实质是回调函数，<code>int_cmp</code>函数把地址传给<code>qsort</code>函数，<code>qsort</code>函数通过地址找到<code>int_cmp</code>函数。<br/> qsort函数对结构体排序：</p>
</blockquote>
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;string.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">struct</span> Stu
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> name<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">sort_by_age</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//return ((struct Stu*)e1) -&gt; age - ((struct Stu*)e2) -&gt; age;//升序</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Stu<span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Stu<span class="token operator">*</span><span class="token punctuation">)</span>e1<span class="token punctuation">)</span><span class="token operator">-&gt;</span>age<span class="token punctuation">;</span><span class="token comment">//降序</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">sort_by_name</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//return strcmp(((struct Stu*)e1) -&gt; name, ((struct Stu*)e2) -&gt; name);//升序</span>
	<span class="token keyword">return</span> <span class="token function">strcmp</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Stu<span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">)</span><span class="token operator">-&gt;</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">struct</span> Stu<span class="token operator">*</span><span class="token punctuation">)</span>e1<span class="token punctuation">)</span><span class="token operator">-&gt;</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">struct</span> Stu stu<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span><span class="token string">"zhangsan"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"lisi"</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"wangwu"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//按照年龄来升序</span>
	<span class="token function">qsort</span><span class="token punctuation">(</span>stu<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sort_by_age<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//按照名字来排序</span>
	<span class="token function">qsort</span><span class="token punctuation">(</span>stu<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sort_by_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><code>e1 - e2</code>为升序；<code>e2 - e1</code>为降序</p>
</blockquote>
<h3><a id="32qsort_1235"></a>3.2.qsort函数的模拟实现</h3>
<pre><code class="prism language-c"><span class="token comment">//打印函数</span>
<span class="token keyword">void</span> <span class="token function">print_arr</span><span class="token punctuation">(</span><span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> sz<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d "</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//交换函数</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> buf1<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> buf2<span class="token punctuation">,</span> size_t size<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> tmp <span class="token operator">=</span> <span class="token operator">*</span>buf1<span class="token punctuation">;</span>
		<span class="token operator">*</span>buf1 <span class="token operator">=</span> <span class="token operator">*</span>buf2<span class="token punctuation">;</span>
		<span class="token operator">*</span>buf2 <span class="token operator">=</span> tmp<span class="token punctuation">;</span>
		buf1<span class="token operator">++</span><span class="token punctuation">;</span>
		buf2<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//比较函数</span>
<span class="token keyword">int</span> <span class="token function">cmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e2<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>e1 <span class="token operator">-</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span>e2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//排序函数</span>
<span class="token keyword">void</span> <span class="token function">my_bubble_sort</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span> base<span class="token punctuation">,</span> size_t num<span class="token punctuation">,</span> size_t size<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span>cmp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e1<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">void</span><span class="token operator">*</span> e2<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>size_t j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> num <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> 
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">cmp</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>base <span class="token operator">+</span> j <span class="token operator">*</span> size<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>base <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//以字节为单位</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>base <span class="token operator">+</span> j <span class="token operator">*</span> size<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>base <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> sz <span class="token operator">=</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">my_bubble_sort</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">print_arr</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> sz<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>运行结果：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8e7c47c5448240ff8c53e892f08fc527.png"/></p>
<blockquote>
<ul><li>对于<code>base + j * size</code>，若<code>base</code>是<code>void*</code>类型 ，语法不支持(指针±整数)，而<code>char*</code>类型是任意类型中的最小单元。所以<code>(char*)base + j * size</code>可以确定元素地址。</li><li>Swap函数是以最小字节进行比较和交换，是代码具有普遍性。</li></ul>
</blockquote>
<p>指针进阶内容丰富，比较难理解，我们一定要多看多想多敲代码~</p>
<p>你听到了吗？经过我们跋山涉水，走过了千沟万壑，我们终于让C指针唱响了征服<br/> <strong>最后，各位老铁看了文章，请给我点赞关注评论吧，你的支持是我坚持的动力~</strong><br/> <strong>……未完待续</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/840f457f730643c0be054ab851f3cab7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5aSn54yp54yp77yB,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <strong>笔试题链接：<a href="https://blog.csdn.net/weixin_50614301?spm=1010.2135.3001.5343">【这些题我一拿到手就会】指针和数组笔试题详解（上）</a></strong></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>