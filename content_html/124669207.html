<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p id="main-toc"><strong>目录</strong></p>
<p id="1.substring_index%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%85%B6%E7%94%A8%E6%B3%95-toc" style="margin-left:0px;"><a href="#1.substring_index%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%85%B6%E7%94%A8%E6%B3%95">1.substring_index函数的语法及其用法</a></p>
<p id="%EF%BC%881%EF%BC%89%E8%AF%AD%E6%B3%95%EF%BC%9Asubstring_index(string%2Csep%2Cnum)-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89%E8%AF%AD%E6%B3%95%EF%BC%9Asubstring_index%28string%2Csep%2Cnum%29">（1）语法：substring_index(string,sep,num)</a></p>
<p id="%EF%BC%882%EF%BC%89%E7%94%A8%E4%BA%8E%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E7%94%A8%E4%BA%8E%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82">（2）用于截取目标字符串。</a></p>
<p id="2.%E5%AE%9E%E4%BE%8B-toc" style="margin-left:0px;"><a href="#2.%E5%AE%9E%E4%BE%8B">2.实例</a></p>
<p id="%EF%BC%881%EF%BC%89%E4%BB%8E%E6%9F%90%E5%AD%97%E6%AE%B5%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%881%EF%BC%89%E4%BB%8E%E6%9F%90%E5%AD%97%E6%AE%B5%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82">（1）从某字段截取目标字符串。</a></p>
<p id="%EF%BC%882%EF%BC%89%E4%B8%8Ecast%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%E6%88%AA%E5%8F%96%E6%9F%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B6%E8%BD%AC%E4%B8%BA%E7%9B%AE%E6%A0%87%E6%A0%BC%E5%BC%8F%E3%80%82-toc" style="margin-left:40px;"><a href="#%EF%BC%882%EF%BC%89%E4%B8%8Ecast%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%E6%88%AA%E5%8F%96%E6%9F%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B6%E8%BD%AC%E4%B8%BA%E7%9B%AE%E6%A0%87%E6%A0%BC%E5%BC%8F%E3%80%82">（2）与cast函数结合使用截取某字符串并转为目标格式。</a></p>
<hr id="hr-toc"/>
<p></p>
<h1 id="1.substring_index%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95%E5%8F%8A%E5%85%B6%E7%94%A8%E6%B3%95">1.substring_index函数的语法及其用法</h1>
<h2 id="%EF%BC%881%EF%BC%89%E8%AF%AD%E6%B3%95%EF%BC%9Asubstring_index(string%2Csep%2Cnum)">（1）语法：substring_index(string,sep,num)</h2>
<p><strong>即substring_index(字符串,分隔符,序号)</strong></p>
<blockquote>
<p>参数说明</p>
<p>string：用于截取目标字符串的字符串。可为字段，表达式等。</p>
<p>sep：分隔符，string存在且用于分割的字符，比如“，”、“.”等。</p>
<p>num：序号，为非0整数。若为整数则表示从左到右数，若为负数则从右到左数。比如“www.mysql.com”截取字符‘www’，分割符为“.”，从左到右序号为1，即substring_index("www.mysql.com",'.',1)；若从右开始获取“com”则为序号为-1即substring_index("www.mysql.com",'.',-1)</p>
</blockquote>
<h2 id="%EF%BC%882%EF%BC%89%E7%94%A8%E4%BA%8E%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82">（2）用于截取目标字符串。</h2>
<hr/>
<h1 id="2.%E5%AE%9E%E4%BE%8B">2.实例</h1>
<h2 id="%EF%BC%881%EF%BC%89%E4%BB%8E%E6%9F%90%E5%AD%97%E6%AE%B5%E6%88%AA%E5%8F%96%E7%9B%AE%E6%A0%87%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%82">（1）从某字段截取目标字符串。</h2>
<p>例：现有一个学生信息表student，详细地址address储存省、市、县等由逗号隔开的地址信息，比如“XX省，XX市，XX区，...，XXX号”。由于某种原因没有学生所在省信息需要获取，同时获取学生姓名name，性别sex，年龄age。</p>
<pre><code class="language-sql">select name,sex,age,
substring_index(address,',',1) as province
from student</code></pre>
<h2 id="%EF%BC%882%EF%BC%89%E4%B8%8Ecast%E5%87%BD%E6%95%B0%E7%BB%93%E5%90%88%E4%BD%BF%E7%94%A8%E6%88%AA%E5%8F%96%E6%9F%90%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B9%B6%E8%BD%AC%E4%B8%BA%E7%9B%AE%E6%A0%87%E6%A0%BC%E5%BC%8F%E3%80%82">（2）与cast函数结合使用截取某字符串并转为目标格式。</h2>
<p>例：现有一张订单信息data，由于2022-03-04日期 之后存储日期信息的格式出错，日期前加了一些前缀，并用空格隔开，比如“13d 2022-02-01”，需要获取该表2022-03-04之后具体日期信息，同时获取单子offer_id，以及产品名name。</p>
<pre><code class="language-sql">select cast(substring_index(ctime,' ',1) as date) as dt,
offer_id,name    
FROM data
WHERE substring_index(ctime,' ',1)&gt;= '2022-03-04'</code></pre>
<p></p>
<p>SQL的cast函数用法可参考<a href="https://blog.csdn.net/weixin_50853979/article/details/124466729?spm=1001.2014.3001.5502" title="SQL的CAST()——转换数据类型_小白修炼晋级中的博客-CSDN博客">SQL的CAST()——转换数据类型_小白修炼晋级中的博客-CSDN博客</a></p>
</div>
</div>