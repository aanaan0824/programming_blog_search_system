<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-dracula" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="wvpGB28181proZLMediaKitGB281812016_0"></a>基于wvp-GB28181-pro+ZLMediaKit实现的GB28181-2016流媒体服务</h1>
<h2><a id="1__2"></a>1. 用到的开源项目</h2>
<table><thead><tr><th align="left">项目名称</th><th align="left">项目描述</th><th align="left">项目地址</th></tr></thead><tbody><tr><td align="left">wvp-GB28181-pro</td><td align="left">一个基于GB28181-2016标准实现的网络视频平台，支持NAT穿透，支持海康、大华、宇视等品牌的IPC、NVR、DVR接入。支持国标级联，支持rtsp/rtmp等视频流转发到国标平台，支持rtsp/rtmp等推流转发到国标平台。</td><td align="left">https://github.com/648540858/wvp-GB28181-pro.git 国内：https://gitee.com/pan648540858/wvp-GB28181-pro.git</td></tr><tr><td align="left">ZLMediaKit</td><td align="left">基于C++11开发，避免使用裸指针，代码稳定可靠，性能优越。支持多种协议(RTSP/RTMP/HLS/HTTP-FLV/WebSocket-FLV/GB28181/HTTP-TS/WebSocket-TS/HTTP-fMP4/WebSocket-fMP4/MP4/WebRTC),支持协议互转</td><td align="left">https://github.com/ZLMediaKit/ZLMediaKit.git</td></tr></tbody></table>
<h2><a id="2_ZLMediaKit_9"></a>2. ZLMediaKit(流媒体服务)编译打包</h2>
<p><strong>打包前注意事项：</strong></p>
<p>​ ZLMediaKit是用c 和 c++ 编写的，所以打包工具使用Visual Studio 2017 或 &gt;2017版本，我本地使用的是Visual Studio 2019</p>
<p>​ ZLMediaKit目录下3rdpart(第三方包)文件夹下ZLToolKit和media-server需从另外两个git项目上拉取, 如果没有拉取这两个文件夹下面是空的，在编译的时候会报错，提示找不到文件。使用到的第三方包地址：<br/> <a href="https://gitee.com/ireader/media-server.git">media-server</a><br/> <a href="https://gitee.com/xia-chu/ZLToolKit.git">ZLToolKit</a></p>
<h3><a id="21___19"></a>2.1 编译</h3>
<p>打开 Visual Studio ，选择<strong>打开本地文件夹</strong>，然后选择从github拉取的ZLMediaKit文件夹打开，打开过程中可能需要加载一会<br/> <img alt="打开Visual Studio 2019" src="https://img-blog.csdnimg.cn/7f28c3680ee04e5481e1abc5263f0d99.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>打开后界面如下，然后选择<strong>CMake概述页</strong>下面的<strong>打开CMake设置编辑器</strong><br/> <img alt="打开ZLMediakit文件夹" src="https://img-blog.csdnimg.cn/7d0fd35e19c9463c9af5ace8808d75c7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>打开CMake设置编辑器界面如下，默认配置类型是<code>Debug</code>，我们先用默认配置，然后按<code>Ctrl+S</code>保存，此时右侧窗口会出现编辑打印日志，出现<strong>CMake生成完毕</strong>，表示<strong>编译成功</strong><br/> <img alt="CMake配置和编译" src="https://img-blog.csdnimg.cn/69ebdd8d679c4270a277a267aefa0c8f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>编译完成后我们开始打包生成可执行文件，在最上面菜单栏<code>生成</code>选项下选择<code>全部生成</code>，开始打包<br/> <img alt="打包生成可执行文件" src="https://img-blog.csdnimg.cn/f5d8629b9d9040e3bc56a3ed5fbd8465.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>最右边窗口出现<strong>全部生成 已成功</strong>，表示打包完成，打包后的可执行文件在 <code>ZLMediaKit\release\windows64\Debug</code>文件夹下，<code>MediaServer.exe</code>就是流媒体启动的服务。</p>
<p><strong>注意</strong>：在打包过程中可能会出现编译器堆空间不足时，此时尽量关闭其他服务程序，保证内存足够，再次尝试打包<br/> <img alt="打包完成" src="https://img-blog.csdnimg.cn/c9f539fc12ce475cbb6f7bb6618c1cb7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/> <img alt="打包完成后的文件目录" src="https://img-blog.csdnimg.cn/7ee3f9df41e5434ca4574f5b8fb32413.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<h3><a id="22__39"></a>2.2 运行</h3>
<p>在打包后的文件夹中找到MediaServer.exe可执行文件，双击运行，与此同时会生成config.ini配置文件。</p>
<p>启动成功：<br/> <img alt="MediaServer启动成功" src="https://img-blog.csdnimg.cn/5c6d959c64c142a0bb286bcd17e5fbd2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>生成config.ini配置文件<br/> <img alt="生成config.ini配置文件" src="https://img-blog.csdnimg.cn/8db931523ac14a3ba34287a40d2d97a0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/> 接下来，用记事本打开<code>config.ini</code>配置文件，找到<code>[http]</code>下面的<code>port</code>配置，默认为<code>80</code>，如果80端口<strong>被占用</strong>，可以<strong>修改成其他端口</strong>，我这里设置成9980，别的配置先默认，更多配置说明可以参考<code>ZLMediaKit\conf</code>下面的<code>config.ini</code>，这里说明和配置更全面，可以参考：</p>
<pre><code class="prism language-ini">; auto-generated by mINI class {

[api]
apiDebug=1
defaultSnap=./www/logo.png
secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc
snapRoot=./www/snap/

[ffmpeg]
bin=E:\installPackage\ffmpeg-n4.4-78-g031c0cb0b4-win64-gpl-4.4\bin\ffmpeg.exe
cmd=%s -re -i %s -c:a aac -strict -2 -ar 44100 -ab 48k -c:v libx264 -f flv %s
log=./ffmpeg/ffmpeg.log
snap=%s -i %s -y -f mjpeg -t 0.001 %s

[general]
addMuteAudio=1
enableVhost=0
enable_audio=1
flowThreshold=1024
fmp4_demand=0
hls_demand=0
maxStreamWaitMS=15000
mediaServerId=FxfnytvGJgXxECu6
mergeWriteMS=0
modifyStamp=0
publishToHls=1
publishToMP4=0
resetWhenRePlay=1
rtmp_demand=0
rtsp_demand=0
streamNoneReaderDelayMS=20000
ts_demand=0
unready_frame_cache=100
wait_add_track_ms=3000
wait_track_ready_ms=10000

[hls]
broadcastRecordTs=0
deleteDelaySec=0
fileBufSize=65536
filePath=./www
segDur=2
segNum=3
segRetain=5

[hook]
admin_params=secret=035c73f7-bb6b-4889-a715-d9eb2d1925cc
alive_interval=30.000000
enable=0
on_flow_report=
on_http_access=
on_play=
on_publish=
on_record_mp4=
on_record_ts=
on_rtsp_auth=
on_rtsp_realm=
on_server_keepalive=
on_server_started=
on_shell_login=
on_stream_changed=
on_stream_none_reader=
on_stream_not_found=
timeoutSec=10

[http]
charSet=gb2312
dirMenu=1
keepAliveSecond=15
maxReqSize=40960
notFound=&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;&lt;body bgcolor="white"&gt;&lt;center&gt;&lt;h1&gt;您访问的资源不存在！&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;ZLMediaKit(git hash:50c6c251,branch:master,build time:Dec 15 2021 15:46:09)&lt;/center&gt;&lt;/body&gt;&lt;/html&gt;
port=9980
rootPath=./www
sendBufSize=65536
sslport=443
virtualPath=

[multicast]
addrMax=239.255.255.255
addrMin=239.0.0.0
udpTTL=64

[record]
appName=record
fastStart=0
fileBufSize=65536
filePath=./www
fileRepeat=0
fileSecond=3600
sampleMS=500

[rtmp]
handshakeSecond=15
keepAliveSecond=15
modifyStamp=0
port=1935
sslport=19350

[rtp]
audioMtuSize=600
rtpMaxSize=10
videoMtuSize=1400

[rtp_proxy]
dumpDir=
port=10000
timeoutSec=15

[rtsp]
authBasic=0
directProxy=1
handshakeSecond=15
keepAliveSecond=15
port=554
sslport=332

[shell]
maxReqSize=1024
port=9000

; } ---

</code></pre>
<p>这一步完成后，ZLMediaKit编译和打包的基本操作就完成了，可以满足基本应用，如果有更深层次的可以查看<a href="https://github.com/ZLMediaKit/ZLMediaKit/wiki">ZLMediaKit wiki</a></p>
<h2><a id="3wvpGB28181proSIP_177"></a>3.拉取wvp-GB28181-pro(SIP信令服务器)编译打包并运行</h2>
<h3><a id="31__179"></a>3.1 创建数据库</h3>
<p>拉取完成后，在wvp-GB28181-pro文件夹下有个sql文件夹，里面存放了该项目的数据库结构(mysql.sql),在数据库管理软件，如navicat中运行mysql.sql，运行完成后会生成一个名为wvp的数据库，默认的登录用户: admin,密码：admin<br/> <img alt="wvp数据库结构" src="https://img-blog.csdnimg.cn/f2fa79c7b17e40849f0cc987e12176a1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_14,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<table><thead><tr><th align="left">表名</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>device</code></td><td align="left">设备表，主要存放GB对接过来的设备</td></tr><tr><td align="left"><code>device_alarm</code></td><td align="left">设备告警信息</td></tr><tr><td align="left"><code>device_channel</code></td><td align="left">设备下的通道信息（每个设备查看视频的主要信息表）</td></tr><tr><td align="left"><code>device_mobile_position</code></td><td align="left">移动设备的坐标信息表</td></tr><tr><td align="left"><code>gb_stream</code></td><td align="left">国标平台流信息</td></tr><tr><td align="left"><code>log</code></td><td align="left">日志表</td></tr><tr><td align="left"><code>media_server</code></td><td align="left">流媒体服务信息表</td></tr><tr><td align="left"><code>parent_platform</code></td><td align="left">上级平台</td></tr><tr><td align="left"><code>platform_gb_channel</code></td><td align="left">上级平台通道表</td></tr><tr><td align="left"><code>platform_gb_stream</code></td><td align="left">上级平台流信息表</td></tr><tr><td align="left"><code>role</code></td><td align="left">权限表</td></tr><tr><td align="left"><code>stream_proxy</code></td><td align="left">流代理表</td></tr><tr><td align="left"><code>stream_push</code></td><td align="left">推流表</td></tr><tr><td align="left"><code>user</code></td><td align="left">用户表</td></tr></tbody></table>
<h3><a id="32__201"></a>3.2 修改配置文件</h3>
<pre><code class="prism language-yml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token comment"># REDIS数据库配置</span>
    <span class="token key atrule">redis</span><span class="token punctuation">:</span>
        <span class="token comment"># [必须修改] Redis服务器IP, REDIS安装在本机的,使用127.0.0.1</span>
        <span class="token key atrule">host</span><span class="token punctuation">:</span> 127.0.0.1
        <span class="token comment"># [必须修改] 端口号</span>
        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
        <span class="token comment"># [可选] 数据库 DB</span>
        <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">6</span>
        <span class="token comment"># [可选] 访问密码,若你的redis服务器没有设置密码，就不需要用密码去连接</span>
        <span class="token key atrule">password</span><span class="token punctuation">:</span>
        <span class="token comment"># [可选] 超时时间</span>
        <span class="token key atrule">timeout</span><span class="token punctuation">:</span> <span class="token number">10000</span>
    <span class="token comment"># [可选] jdbc数据库配置, 项目使用sqlite作为数据库，一般不需要配置</span>
    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token comment"># 使用mysql 打开23-28行注释， 删除29-36行</span>
        <span class="token comment"># name: wvp</span>
        <span class="token comment"># url: jdbc:mysql://127.0.0.1:3306/wvp?useUnicode=true&amp;characterEncoding=UTF8&amp;rewriteBatchedStatements=true</span>
        <span class="token comment"># username:</span>
        <span class="token comment"># password:</span>
        <span class="token comment"># type: com.alibaba.druid.pool.DruidDataSource</span>
        <span class="token comment"># driver-class-name: com.mysql.cj.jdbc.Driver</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> wvp
        <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/wvp<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding</span>=UTF<span class="token punctuation">-</span>8<span class="token important">&amp;serverTimezone</span>=GMT%2B8
        <span class="token key atrule">username</span><span class="token punctuation">:</span> root
        <span class="token key atrule">password</span><span class="token punctuation">:</span> admin
        <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
        <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span>  com.mysql.cj.jdbc.Driver

<span class="token comment"># [可选] WVP监听的HTTP端口, 网页和接口调用都是这个端口</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9970</span>


<span class="token comment"># 作为28181服务器的配置</span>
<span class="token key atrule">sip</span><span class="token punctuation">:</span>
    <span class="token comment"># [必须修改] 本机的IP</span>
    <span class="token key atrule">ip</span><span class="token punctuation">:</span> 127.0.0.1
    <span class="token comment"># [可选] 28181服务监听的端口</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">9960</span>
    <span class="token comment"># 根据国标6.1.2中规定，domain宜采用ID统一编码的前十位编码。国标附录D中定义前8位为中心编码（由省级、市级、区级、基层编号组成，参照GB/T 2260-2007）</span>
    <span class="token comment"># 后两位为行业编码，定义参照附录D.3</span>
    <span class="token comment"># 3701020049标识山东济南历下区 信息行业接入</span>
    <span class="token comment"># [可选]</span>
    <span class="token key atrule">domain</span><span class="token punctuation">:</span> <span class="token number">3714810000</span>
    <span class="token comment"># [可选]</span>
    <span class="token key atrule">id</span><span class="token punctuation">:</span> <span class="token number">3714810000111000999</span>
    <span class="token comment"># [可选] 默认设备认证密码，后续扩展使用设备单独密码, 移除密码将不进行校验</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span>
    <span class="token comment"># [可选] 心跳超时时间， 建议设置为心跳周期的三倍</span>
    <span class="token key atrule">keepalive-timeout</span><span class="token punctuation">:</span> <span class="token number">180</span>
    <span class="token comment"># [可选] 国标级联注册失败，再次发起注册的时间间隔。 默认60秒</span>
    <span class="token key atrule">register-time-interval</span><span class="token punctuation">:</span> <span class="token number">60</span>

<span class="token comment">#zlm 默认服务器配置</span>
<span class="token key atrule">media</span><span class="token punctuation">:</span>
    <span class="token comment"># [必须修改] zlm服务器的内网IP</span>
    <span class="token key atrule">ip</span><span class="token punctuation">:</span> 127.0.0.1
    <span class="token comment"># [可选] 返回流地址时的ip，置空使用 media.ip</span>
    <span class="token comment">#stream-ip: 192.168.1.68</span>
    <span class="token comment"># [可选] wvp在国标信令中使用的ip，此ip为摄像机可以访问到的ip， 置空使用 media.ip</span>
    <span class="token comment">#hook-ip: 192.168.1.68</span>
    <span class="token comment"># [可选] wvp在国标信令中使用的ip，此ip为摄像机可以访问到的ip， 置空使用 media.i</span>
    <span class="token comment">#sdp-ip: 192.168.1.68</span>
    <span class="token comment"># [必须修改] zlm服务器的http.port</span>
    <span class="token key atrule">http-port</span><span class="token punctuation">:</span> <span class="token number">9980</span>
    <span class="token comment"># [可选] zlm服务器的hook.admin_params=secret</span>
    <span class="token key atrule">secret</span><span class="token punctuation">:</span> 035c73f7<span class="token punctuation">-</span>bb6b<span class="token punctuation">-</span>4889<span class="token punctuation">-</span>a715<span class="token punctuation">-</span>d9eb2d1925cc
    <span class="token comment"># 启用多端口模式, 多端口模式使用端口区分每路流，兼容性更好。 单端口使用流的ssrc区分， 点播超时建议使用多端口测试</span>
    <span class="token key atrule">rtp</span><span class="token punctuation">:</span>
        <span class="token comment"># [可选] 是否启用多端口模式, 开启后会在portRange范围内选择端口用于媒体流传输</span>
        <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token comment"># [可选] 在此范围内选择端口用于媒体流传输,</span>
        <span class="token key atrule">port-range</span><span class="token punctuation">:</span> <span class="token number">26100</span><span class="token punctuation">,</span><span class="token number">26899</span>
        <span class="token comment"># [可选] 国标级联在此范围内选择端口发送媒体流,</span>
        <span class="token key atrule">send-port-range</span><span class="token punctuation">:</span> <span class="token number">26100</span><span class="token punctuation">,</span><span class="token number">26899 </span><span class="token comment"># 端口范围</span>
    <span class="token comment"># 录像辅助服务， 部署此服务可以实现zlm录像的管理与下载， 0 表示不使用</span>
    <span class="token key atrule">record-assist-port</span><span class="token punctuation">:</span> <span class="token number">18081</span>
<span class="token comment"># [可选] 日志配置, 一般不需要改</span>
<span class="token key atrule">logging</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span>
        <span class="token key atrule">name</span><span class="token punctuation">:</span> logs/wvp.log
        <span class="token key atrule">max-history</span><span class="token punctuation">:</span> <span class="token number">30</span>
        <span class="token key atrule">max-size</span><span class="token punctuation">:</span> 10MB
        <span class="token key atrule">total-size-cap</span><span class="token punctuation">:</span> 300MB
    <span class="token key atrule">level</span><span class="token punctuation">:</span>
        <span class="token key atrule">com.genersoft.iot</span><span class="token punctuation">:</span> debug
        <span class="token key atrule">com.genersoft.iot.vmp.storager.dao</span><span class="token punctuation">:</span> info
        <span class="token key atrule">com.genersoft.iot.vmp.gb28181</span><span class="token punctuation">:</span> info

<span class="token comment"># [根据业务需求配置]</span>
<span class="token key atrule">user-settings</span><span class="token punctuation">:</span>
    <span class="token comment"># 推流直播是否录制</span>
    <span class="token key atrule">record-push-live</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">auto-apply-play</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token comment"># 点播等待超时时间,单位：毫秒</span>
    <span class="token key atrule">play-timeout</span><span class="token punctuation">:</span> <span class="token number">16000</span>

<span class="token comment"># 在线文档： swagger-ui（生产环境建议关闭）</span>
<span class="token key atrule">swagger-ui</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment"># 版本信息， 不需修改</span>
<span class="token key atrule">version</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"@project.version@"</span>
    <span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"@project.description@"</span>
    <span class="token key atrule">artifact-id</span><span class="token punctuation">:</span> <span class="token string">"@project.artifactId@"</span>

</code></pre>
<p>注意：配置中 <code>meida.http-port</code> 端口<strong>必须</strong>和<code>ZLMediaKit</code>中<code>config.ini</code>配置中<code>[http]</code> 下面的<code>port</code><strong>一致</strong>，否则推流和拉流会接收不到</p>
<h3><a id="33__316"></a>3.3 项目启动</h3>
<p>配置文件配置完成后，开始启动项目，项目启动成功后会连接ZLMediaServer,如果ZLMediaServer没有启动，会一直重连<br/> <img alt="启动成功并尝试连接ZLMediaServer" src="https://img-blog.csdnimg.cn/67b0dd385e1d43748aa6b7de9f07fa1a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>当我们启动ZLMediaKit流媒体服务后，打印连接成功<br/> <img alt="ZLMediaKit服务连接成功" src="https://img-blog.csdnimg.cn/a55c0f4091a44c7fa2f39eb092957f1a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<h3><a id="34___324"></a>3.4 运行前台可视化界面</h3>
<p>前端文件在wvp-GB28181-pro目录下web_src文件夹下，我们在<code>web_src</code>下打开<strong>命令行窗口</strong>，并执行<code>npm install</code>, 安装前端依赖包，执行完成后，等待依赖加载完成<br/> <img alt="运行npm install" src="https://img-blog.csdnimg.cn/8dbdf053c102490a8eb170846ea342be.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>依赖加载完成后，执行npm run dev， 在开发环境下启动前台， 启动成功后在控制台会打印出前台地址，在浏览器访问这个地址<br/> <img alt="启动前台" src="https://img-blog.csdnimg.cn/e64bc178bd304aa88467010c8d1d7c9b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/> <img alt="访问前台并登录" src="https://img-blog.csdnimg.cn/9603390b25ee456dab81ff943a059577.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>访问成功后在登录页输入用户名和密码登录，账号密码默认均为<code>admin</code>，登录成功后进入首页<br/> <img alt="登录成功后进入首页" src="https://img-blog.csdnimg.cn/859e3117ec3d419091c63d83c19d0f85.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAd2FuaWs2NjY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center"/><br/> 如果你是上级平台，需要把下面一些配置提供给下级平台，让下级平台推流过来，这些配置是在wvp-GB28181-pro后台配置文件中<code>sip</code>配置节点下配置的</p>
<pre><code class="prism language-properties">#SIP 信令服务
     1）IP: 192.168.1.143
     2）port: 9960
     3）domain: 3714810000
     4）id: 3714810000111000001
</code></pre>
<p>如果是前后台分离，前台需单独打包，放在如nginx下，具体wvp-GB28181-pro更多配置细节可以查看<a href="https://github.com/648540858/wvp-GB28181-pro/wiki">wiki</a></p>
<p>以上就是整个基于wvp-GB28181-pro+ZLMediaKit实现的GB28181-2016流媒体的具体操作步骤。</p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>