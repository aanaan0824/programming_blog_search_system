<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>目录</h3>
<ul><li><a href="#1__1">1 背景</a></li><li><a href="#2__7">2 准备</a></li><li><a href="#3__11">3 安装</a></li><li><a href="#4__20">4 测试</a></li></ul>
</div>
<p></p>
<h1><a id="1__1"></a>1 背景</h1>
<ol><li>之所以写这篇文章，是因为upload-labs靶场对组成环境的版本要求比较高，搭配不当容易导致部分漏洞无法复现。 
  <ol><li>为了复现<code>%00</code>截断漏洞，需要PHP版本小于5.3.4，因此靶场环境建议PHP版本采用5.2.17。</li><li>而为了配合5.2.17版本的PHP，需要Apache2.2。</li><li>手动搭建满足上述版本要求的环境较难。</li></ol> </li><li>为了能让更多的时间花费在渗透测试的实验中，减少搭配环境过程的犯错，建议一步步跟随本节内容从0搭建靶场环境。</li></ol>
<h1><a id="2__7"></a>2 准备</h1>
<ol><li>在虚拟机中安装好Windows系统，本节内容采用的是win2008R2SP1版本。</li><li>下载靶场代码，这是一个为了免去大家环境搭建的烦恼、基于phpstudy这个php集成环境搭建的、直接安装就能使用的靶场代码。下载网址为<a href="https://github.com/c0ny1/upload-labs/releases">https://github.com/c0ny1/upload-labs/releases</a>。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/10079492355e4e4ba6e64bbd5f258c61.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_20,color_FFFFFF,t_70,g_se,x_16"/></li></ol>
<h1><a id="3__11"></a>3 安装</h1>
<ol><li>将上述下载的靶场代码文件进行解压，重命名为upload-labs，并将解压后文件复制到win2008虚拟机C盘中。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b4ae754d87f144b4991f949d9dc8b49b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_20,color_FFFFFF,t_70,g_se,x_16"/></li><li>可以看看使用说明，先双击运行这个批处理文件，用于修改phpStudy.ini,httpd.conf,php.ini三个配置文件中的路径为最新的路径。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/946158450cbf4bfeb47a4c5657ef732a.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_20,color_FFFFFF,t_70,g_se,x_16"/></li><li>再运行phpStudy。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/da5e717ff73e459d867b99557b3c7ca7.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_20,color_FFFFFF,t_70,g_se,x_16"/></li><li>phpStudy运行状态如下，本靶场无需MySQL该软件也没有部署数据库，所有MySQL启动失败。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/63c99c2f43114c5abbb7ee8f53458897.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_10,color_FFFFFF,t_70,g_se,x_16"/></li></ol>
<h1><a id="4__20"></a>4 测试</h1>
<p>将真实机与虚拟机桥接在同一局域网，真实机浏览器输入虚拟机IP地址访问靶场，可以看到访问结果如下：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b63a01a5c07a4b8f837e808d9b381511.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBARmlnaHRpbmdfaGF3aw==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>