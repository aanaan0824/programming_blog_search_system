<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p>mysql从8.0开始支持窗口函数，使用窗口函数，会令我们的分组查询变得便捷。</p>
<p>窗口函数，简单来说就是对于一个查询SQL，将其结果集按指定的规则进行分区，每个分区可以看作是一个窗口，分区内的每一行，根据其所属分区内的行数据进行函数计算，获取计算结果，作为该行的窗口函数结果值。</p>
<p>窗口函数和group by有类似之处，其区别在于窗口会对每个分组之后的数据进行分别操作，而group by一般对分组之后的函数使用聚集函数汇总。</p>
<p></p>
<p><span style="color:#fe2c24;"><strong>窗口函数的语法：</strong></span></p>
<blockquote>
<p>&lt;窗口函数&gt; over (partition by &lt;用于分组的列名&gt; order by &lt;用于排序的列名&gt;)</p>
</blockquote>
<p>&lt;窗口函数&gt; 的位置，可以放以下两种函数：<br/> 1） 专用窗口函数，包括后面要讲到的 rank, dense_rank, row_number 等专用窗口函数。<br/> 2） 聚合函数，如 sum, avg, count, max, min 等</p>
<p><span style="color:#fe2c24;">需要强调的一点是：窗口函数是对 where 或者 group by 子句处理后的结果进行操作，所以窗口函数原则上只能写在 select 子句中。 </span></p>
<p></p>
<p>以下是mysql的专用窗口函数一览。点击各函数链接查看具体应用。(※持续更新中)</p>
<table align="left" border="1" cellpadding="1" cellspacing="1" style="width:636px;"><tbody><tr><td style="text-align:center;width:56px;"><span style="color:#4da8ee;"><strong>No</strong></span></td><td style="text-align:center;width:195px;"><span style="color:#4da8ee;"><strong>名称</strong></span></td><td style="text-align:center;width:382px;"><span style="color:#4da8ee;"><strong>描述</strong></span></td></tr><tr><td style="text-align:center;width:56px;"><strong>1</strong></td><td style="width:195px;"><strong>CUME_DIST()</strong></td><td style="width:382px;"><strong>累积分配值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>2</strong></td><td style="width:195px;"><strong>DENSE_RANK()</strong></td><td style="width:382px;"><strong>当前行在其分区中的排名，稠密排序</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>3</strong></td><td style="width:195px;"><strong>FIRST_VALUE()</strong></td><td style="width:382px;"><strong>指定区间范围内的第一行的值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>4</strong></td><td style="width:195px;"><strong>LAG()</strong></td><td style="width:382px;"><strong>取排在当前行之前的值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>5</strong></td><td style="width:195px;"><strong>LAST_VALUE() </strong></td><td style="width:382px;"><strong>指定区间范围内的最后一行的值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>6</strong></td><td style="width:195px;"><strong>LEAD()</strong></td><td style="width:382px;"><strong>取排在当前行之后的值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>7</strong></td><td style="width:195px;"><strong>NTH_VALUE()</strong></td><td style="width:382px;"><strong>指定区间范围内第N行的值</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>8</strong></td><td style="width:195px;"><strong>NTILE()</strong></td><td style="width:382px;"><strong>将数据分到N个桶，当前行所在的桶号</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>9</strong></td><td style="width:195px;"><strong>PERCENT_RANK()</strong></td><td style="width:382px;"><strong>排名值的百分比</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>10</strong></td><td style="width:195px;"><strong>RANK()</strong></td><td style="width:382px;"><strong>当前行在其分区中的排名，稀疏排序</strong></td></tr><tr><td style="text-align:center;width:56px;"><strong>11</strong></td><td style="width:195px;"><strong><a class="link-info" href="https://blog.csdn.net/m0_63073742/article/details/124999699?spm=1001.2014.3001.5502" title="ROW_NUMBER()">ROW_NUMBER()</a></strong></td><td style="width:382px;"><strong>分区内当前行的行号</strong></td></tr></tbody></table>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</div>
</div>