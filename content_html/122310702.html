<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<h1>什么是正则表达式？</h1>
<blockquote>
<p>正则表达式，又称规则表达式。（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文</p>
</blockquote>
<h2>正则表达式的特点：</h2>
<blockquote>
<p>1. 灵活性、逻辑性和功能性非常强；</p>
<p>2. 可以迅速地用极简单的方式达到字符串的复杂控制。</p>
<p>3. 对于刚接触的人来说，比较晦涩难懂。</p>
</blockquote>
<h2>正则表达式用途</h2>
<blockquote>
<p>判断字符串是否符合某一规则（判断是否符合手机号、邮箱规则）。</p>
<p>从一个字符串中找出符合规则的所有子字符串（取HTML标签名）。</p>
</blockquote>
<p></p>
<h2 style="text-align:justify;">正则表达式的格式？</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">"/表达式/[修饰符]"</p>
</blockquote>
<h2 style="text-align:justify;">当使用正则表达式时要注意什么？</h2>
<blockquote>
<p>PHP中使用正则规则一定要加代表正则的标识 / /</p>
</blockquote>
<p></p>
<h2 style="margin-left:.0001pt;text-align:justify;">php中正则表达式常用相关函数是什么</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;"><strong>Preg_match_all(正则表达式、匹配字符串、匹配到的东西放入数组)</strong></p>
<p style="margin-left:.0001pt;text-align:justify;">该函数会返回匹配到的次数（可能是0），或者如果发生错误返回FALSE</p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"><strong>preg_replace(正则表达式、替换成什么、匹配字符串)</strong></p>
<p style="margin-left:.0001pt;text-align:justify;">该函数会返回替换后的结果</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;">正则表达式的语法——字符（一）</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">数字：\d</p>
<p style="margin-left:.0001pt;text-align:justify;">非数字：\D</p>
<p style="margin-left:.0001pt;text-align:justify;">空白字符（空格、制表符、换页符等）：\s</p>
<p style="margin-left:.0001pt;text-align:justify;">非空白字符：\S</p>
<p style="margin-left:.0001pt;text-align:justify;">单词字符（26个英文字母+数字+下划线）：\w</p>
<p style="margin-left:.0001pt;text-align:justify;">非单词字符：\W</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;"><strong>正则表达式的语法——字符（二）</strong></h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">字符集合：[单个字符或字符区间]，用于匹配集合内字符</p>
<p style="margin-left:.0001pt;text-align:justify;">比如：</p>
<p style="margin-left:.0001pt;text-align:justify;">[a-z]表示a-z这26个小写字母</p>
<p style="margin-left:.0001pt;text-align:justify;">[0-9a-z]表示0-9这10个数字和a-z这26个小写字母</p>
<p style="margin-left:.0001pt;text-align:justify;">[123a-h]表示包含数字1，2，3和a-h这8个字母</p>
</blockquote>
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">注意：两个不同的字符段间一定不要用逗号隔开</span></p>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">非集合字符：[^单个字符或字符区间]，用于匹配非集合内字符</p>
<p style="margin-left:.0001pt;text-align:justify;">比如：</p>
<p style="margin-left:.0001pt;text-align:justify;">[^0-9]表示匹配所有非数字字符</p>
<p style="margin-left:.0001pt;text-align:justify;">[^a-zA-Z]表示匹配所有非字母字符</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;">字符集合的数字区间该注意什么？</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">数字区间正则只能匹配0-9的数字，因为正则只能一位一位的匹配，所以超过9以外的数字只是我们给的概念，对于正则机制来说它是认不到的，比如[100-120]就无法被匹配</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;">正则表达式的语法——关键字</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">() 表示一个整体</p>
<p style="margin-left:.0001pt;text-align:justify;">^ 匹配输入字符串的开始位置</p>
<p style="margin-left:.0001pt;text-align:justify;">$ 匹配输入字符串的结尾位置</p>
<p style="margin-left:.0001pt;text-align:justify;">. 通配符，代表任意字符但不匹配换行</p>
<p style="margin-left:.0001pt;text-align:justify;">* 匹配0次或者多次</p>
<p style="margin-left:.0001pt;text-align:justify;">+ 匹配1次或者多次</p>
<p style="margin-left:.0001pt;text-align:justify;">\ 转义字符</p>
<p style="margin-left:.0001pt;text-align:justify;">| 两项之间的一个选择</p>
</blockquote>
<h3 style="text-align:justify;">转义字符“\”的使用</h3>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">转义字符主要是将一些特殊字符转为普通字符。而这些常用特殊字符有”.”、”?”、”\”等</p>
</blockquote>
<h3 style="margin-left:.0001pt;text-align:justify;">^和$结合使用的注意问题</h3>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">如果^和$结合使用且中间没有其他表达式，那么他们中间就不能出现别的字符，不然无法匹配，比如/^3b$/表示3开头b结尾，所以只有3b才能被匹配，如果写了3acb就无法被匹配。什么情况下才能被匹配呢，可以使用.（通配符）。</p>
</blockquote>
<h3 style="margin-left:.0001pt;text-align:justify;">非集合字符的“^”和关键字“^”的区别</h3>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">非集合字符的“^”可理解为排除字符，排除操作，一般放在［］中，如［^1-5］, 表示该字符不是1-5之间的数字；而关键字的“^”表示行开始，如"^ab"表示以ab开头的字符串。</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;">正则表达式的语法——限定符</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">{n} 例如0{8} 表示只有连起来8个0才会被匹配</p>
<p style="margin-left:.0001pt;text-align:justify;">{n,} 例如0{2,} 表示只要2个0及其以上的就会被匹配</p>
<p style="margin-left:.0001pt;text-align:justify;">{n,m} 例如0{2,4} 表示最少匹配2个0，最多匹配4个0</p>
</blockquote>
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#fe2c24;">注：被匹配时，默认匹配最多的次数</span></p>
<h2 style="margin-left:.0001pt;text-align:justify;">正则表达式的语法——修饰符</h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">i 表示不区分大小写</p>
<p style="margin-left:.0001pt;text-align:justify;">A 匹配规则必须从头开始匹配</p>
<p style="margin-left:.0001pt;text-align:justify;">s 表示.将匹配一切字符</p>
<p style="margin-left:.0001pt;text-align:justify;">x 表示正则表达式中的空白字符会被忽略</p>
<p style="margin-left:.0001pt;text-align:justify;">e 代码执行仅限preg_replace()</p>
</blockquote>
<h2 style="margin-left:.0001pt;text-align:justify;">匹配模式的优先级是什么？（优先级从高到低排） </h2>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">\转义字符；()[]大原子和原子表；*+?{n}{n,}{n,m}重复匹配（匹配次数）；^$\b\B边界限制；|模式选择</p>
</blockquote>
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#a2e043;">好了，该说的都说完了</span></p>
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#38d8f0;">可以来看CTF题吧</span></p>
<p style="margin-left:.0001pt;text-align:justify;"><a class="link-info" href="http://b-regex-1s.lab.aqlab.cn/?id=1" title="http://b-regex-1s.lab.aqlab.cn/?id=1">http://b-regex-1s.lab.aqlab.cn/?id=1</a></p>
<pre><code class="language-php">&lt;?php  
$key='flag{********************************}'; 
$Regular= preg_match("/zkaq.*key.{2,9}:\/.*\/(key*key)/i", trim($_GET["id"]), $match); 
if( $Regular ){  
  die('key: '.$key); 
} </code></pre>
<h2 style="margin-left:.0001pt;text-align:justify;">来分析分析吧~~~</h2>
<p style="margin-left:.0001pt;text-align:justify;"><br/> $key='flag{********************************}';   很明显flag就是这个</p>
<p style="margin-left:.0001pt;text-align:justify;"><br/> $Regular= preg_match("/zkaq.*key.{2,9}:\/.*\/(key*key)/i", trim($_GET["id"]), $match); <br/> 这就是flag能出来的条件</p>
<p style="margin-left:.0001pt;text-align:justify;">又上面说过</p>
<p style="margin-left:.0001pt;text-align:justify;"><strong>Preg_match_all(正则表达式、匹配字符串、匹配到的东西放入数组)</strong></p>
<p style="margin-left:.0001pt;text-align:justify;">该函数会返回匹配到的次数（可能是0），或者如果发生错误返回FALSE</p>
<p style="margin-left:.0001pt;text-align:justify;">所以，</p>
<p style="margin-left:.0001pt;text-align:justify;">/zkaq.*key.{2,9}:\/.*\/(key*key)/i   是正则表达式</p>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">/zkaq.*key.{2,9}:\/.*\/(key*key)/i </p>
<p style="margin-left:.0001pt;text-align:justify;">/i     这是修饰符，表示我们输入的key值不限制大小写</p>
<p style="margin-left:.0001pt;text-align:justify;">zkaq     这是字符串的内容</p>
<p style="margin-left:.0001pt;text-align:justify;">.*      表示任意字符的任意次数，输入什么都可以</p>
<p style="margin-left:.0001pt;text-align:justify;">key    这个是字符串的内容</p>
<p style="margin-left:.0001pt;text-align:justify;">.{2,9}  表示 最少匹配2个任意字符，最多匹配9个任意字符</p>
<p style="margin-left:.0001pt;text-align:justify;">:          直接复制下来</p>
<p style="margin-left:.0001pt;text-align:justify;">\/         表示对斜杠/进行转义，就是直接将/使用</p>
<p style="margin-left:.0001pt;text-align:justify;">（key*key）    （）是关键字，表示key*key是一个整体，*是匹配y的次，即key*key中只能有0个或者多个y</p>
</blockquote>
<p style="margin-left:.0001pt;text-align:justify;">所以呀，flag可以是 </p>
<p style="margin-left:.0001pt;text-align:justify;">zkaq--key--:/--/kekey</p>
<p style="margin-left:.0001pt;text-align:justify;">zkaq22key222222:/4444/kekeyyy</p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"><strong>trim($_GET["id"])    是要匹配的字符串</strong></p>
<blockquote>
<p style="margin-left:.0001pt;text-align:justify;">trim() 方法用于删除字符串的头尾空白符，空白符包括：空格、制表符 tab、换行符等其他空白符等。在这里匹配的是id</p>
</blockquote>
<p style="margin-left:.0001pt;text-align:justify;"><strong>$match     是匹配到的东西</strong></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="352" src="image\7850e72fa2064cc2ad979a3bcbee2613.png" width="963"/></p>
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="277" src="image\0c68243410a6472b8ac99172e7dbdb17.png" width="898"/></p>
<p> </p>
<p style="margin-left:.0001pt;text-align:justify;">大家去玩玩吧~~~</p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p style="margin-left:.0001pt;text-align:justify;"></p>
<p></p>
</div>
</div>