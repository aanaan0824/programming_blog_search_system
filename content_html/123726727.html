<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>目录</h3>
<ul><li><a href="#_2">导入地图（联网的话可不进行此步骤）</a></li><li><ul><li><a href="#GMap_3">下载GMap及离线地图</a></li></ul>
</li><li><a href="#_25">开始开发</a></li><li><ul><li><ul><li><a href="#winform_26">新建winform工程</a></li><li><a href="#_29">添加程序包</a></li><li><a href="#_38">导入地图</a></li><li><a href="#_57">鼠标移动获取经纬度</a></li><li><a href="#_70">在地图上添加标记</a></li><li><a href="#_107">在地图上添加连线</a></li><li><a href="#_126">在地图上添加多边形</a></li><li><a href="#_144">在地图上添加图片</a></li><li><a href="#_169">在地图上清除图层</a></li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<h1><a id="_2"></a>导入地图（联网的话可不进行此步骤）</h1>
<h2><a id="GMap_3"></a>下载GMap及离线地图</h2>
<p>内容包含GMap源码以及地图下载器（用于生成GMDB格式离线地图文件）</p>
<p>下载地址：https://archive.codeplex.com/?p=greatmaps（地址无法找到），我翻资源找到了（链接：https://pan.baidu.com/s/1AFGzkobdj_cIBfEYtC1lQA?pwd=bbj0<br/> 提取码：bbj0）<br/> 或者私信告诉我邮箱，给你们发。<br/> 打开工程：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/016b9e5a968d49398a6fa66f8192564e.png"/><br/> VS打开报警告没关系，直接继续<br/> 运行软件：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/381f5210fcfb4a4a9421d5c75ca82457.png"/><br/> 找到合适的地图，很多地图是无法显示的，我用的这个地图：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/de193352df3c4fcb8be5133988dbe699.png"/></p>
<p>按住alt，鼠标左键框选需要下载的地图，进行地图下载：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/cd3da8bdad50430cb04217e0080f28b5.png"/><br/> 如下，选择“是”就会下载对应Zoom的地图内容，下载完成后就会弹出新一轮的细化，选择下载的Zoom越多，地图占用存储空间越大，看个人需求，我是下载到10，会比较慢。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d7f0d0ef901846189ed44f51c8362d7f.png"/><br/> 不需要细化之后就点击否。进行导出gmdb文件：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6611bac88c6243e99d69e2db3fabc693.png"/></p>
<h1><a id="_25"></a>开始开发</h1>
<h3><a id="winform_26"></a>新建winform工程</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/16453148ab514684af7422319ee0d92b.png"/></p>
<h3><a id="_29"></a>添加程序包</h3>
<p>建立WindowsForms工程后，右键工程-&gt;管理NuGet包-&gt;下载安装GMap.NET.WindowsForms<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/491adcc8743d435280d2de38752a8bce.png"/></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7be98ee4d7a64df5b105ff6a2dae1e95.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWXl1YW55dXhpbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 成功后可以看到工具箱多了控件：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/57181f044fa1437d806f475269068278.png"/></p>
<h3><a id="_38"></a>导入地图</h3>
<p>拖动控件GMapControl到窗体，并将之前生成的地图文件放到自己定义的目录下。<br/> 输入代码</p>
<pre><code class="prism language-csharp"><span class="token class-name"><span class="token keyword">string</span></span> mapPath <span class="token operator">=</span> Application<span class="token punctuation">.</span>StartupPath <span class="token operator">+</span> <span class="token string">"\\ChinaMap1To10.gmdb"</span><span class="token punctuation">;</span><span class="token comment">//地图路径</span>
GMap<span class="token punctuation">.</span>NET<span class="token punctuation">.</span>GMaps<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">ImportFromGMDB</span><span class="token punctuation">(</span>mapPath<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果使用内部包，直接不要前面这两句</span>
gMapControl1<span class="token punctuation">.</span>Manager<span class="token punctuation">.</span>Mode <span class="token operator">=</span> AccessMode<span class="token punctuation">.</span>ServerAndCache<span class="token punctuation">;</span>
gMapControl1<span class="token punctuation">.</span>MapProvider <span class="token operator">=</span> GMapProviders<span class="token punctuation">.</span>OpenCycleMap<span class="token punctuation">;</span>
gMapControl1<span class="token punctuation">.</span>MinZoom <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>      <span class="token comment">//最小比例</span>
gMapControl1<span class="token punctuation">.</span>MaxZoom <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>     <span class="token comment">//最大比例</span>
gMapControl1<span class="token punctuation">.</span>Zoom <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>        <span class="token comment">//当前比例</span>
gMapControl1<span class="token punctuation">.</span>ShowCenter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token comment">//不显示中心十字标记</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>gMapControl1<span class="token punctuation">.</span>DragButton <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>MouseButtons<span class="token punctuation">.</span>Left<span class="token punctuation">;</span><span class="token comment">//左键拖拽地图</span>
gMapControl1<span class="token punctuation">.</span>MouseWheelZoomType <span class="token operator">=</span> MouseWheelZoomType<span class="token punctuation">.</span>MousePositionAndCenter<span class="token punctuation">;</span><span class="token comment">//鼠标缩放模式</span>
gMapControl1<span class="token punctuation">.</span>Position <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.21</span><span class="token punctuation">,</span><span class="token number">113</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//地图中心坐标，（纬度，经度）</span>

</code></pre>
<p>ps:直接使用内部地图包比较推荐，感觉demo的作用更像是让你学习怎么使用Gmap，而不是用来下载地图包。</p>
<h3><a id="_57"></a>鼠标移动获取经纬度</h3>
<p>添加MouseMove事件</p>
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">gMapControl1_MouseMove</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">MouseEventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
     <span class="token class-name">PointLatLng</span> point <span class="token operator">=</span> gMapControl1<span class="token punctuation">.</span><span class="token function">FromLocalToLatLng</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>Location<span class="token punctuation">.</span>X<span class="token punctuation">,</span> e<span class="token punctuation">.</span>Location<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取鼠标位置（FromLocalToLatLng是将数值转换成坐标  ）</span>
     label1<span class="token punctuation">.</span>Text <span class="token operator">=</span> point<span class="token punctuation">.</span>Lat<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"0.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     label2<span class="token punctuation">.</span>Text <span class="token operator">=</span> point<span class="token punctuation">.</span>Lng<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"0.000000"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
<h3><a id="_70"></a>在地图上添加标记</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d6fdf62be9ad4f20a6c445d803d1ccf2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWXl1YW55dXhpbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 代码：</p>
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token class-name">GMapOverlay</span> marker_Overlay<span class="token punctuation">;</span>
</code></pre>
<pre><code class="prism language-csharp">marker_Overlay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapOverlay</span><span class="token punctuation">(</span><span class="token string">"marker_Overlay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建一个名为“marker_Overlay”的图层</span>
gMapControl1<span class="token punctuation">.</span>Overlays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>marker_Overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">DrawMarker</span><span class="token punctuation">(</span>marker_Overlay<span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.221</span><span class="token punctuation">,</span> <span class="token number">113.55377</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="prism language-csharp"><span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DrawMarker</span><span class="token punctuation">(</span><span class="token class-name">GMapOverlay</span> overlay<span class="token punctuation">,</span> <span class="token class-name">PointLatLng</span> point<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
     <span class="token comment">//创建标记，并设置位置及样式</span>
     <span class="token class-name">GMapMarker</span> marker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMarkerGoogle</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span> GMarkerGoogleType<span class="token punctuation">.</span>blue_small<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//将标记添加到图层</span>
     overlay<span class="token punctuation">.</span>Markers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//将图层添加到地图</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>gMapControl1<span class="token punctuation">.</span>Overlays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token comment">//鼠标标记点提示框ToolTip</span>
     marker<span class="token punctuation">.</span>ToolTip <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapToolTip</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//Brush tooltipBackColor = new SolidBrush(Color.Transparent);//颜色获取，可用于填充背景</span>
     marker<span class="token punctuation">.</span>ToolTipText <span class="token operator">=</span> <span class="token string">"坐标("</span><span class="token operator">+</span> point<span class="token punctuation">.</span>Lng <span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span> point<span class="token punctuation">.</span>Lat <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
     marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Font</span><span class="token punctuation">(</span><span class="token string">"微软雅黑"</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Fill <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SolidBrush</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span><span class="token function">FromArgb</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Foreground <span class="token operator">=</span> Brushes<span class="token punctuation">.</span>White<span class="token punctuation">;</span>
     marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>TextPadding <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Size</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">//marker.ToolTipMode= MarkerTooltipMode.Always;//标注一直显示</span>
     marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Offset <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span>marker<span class="token punctuation">.</span>Offset<span class="token punctuation">.</span>X <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>marker<span class="token punctuation">.</span>ToolTipText<span class="token punctuation">.</span>Length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">15</span><span class="token punctuation">,</span> marker<span class="token punctuation">.</span>Offset<span class="token punctuation">.</span>Y <span class="token operator">+</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示位置</span>

<span class="token punctuation">}</span>
</code></pre>
<h3><a id="_107"></a>在地图上添加连线</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c92e3faa5019454398f04b98748c7d99.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWXl1YW55dXhpbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-csharp"><span class="token comment">//起点水滴标记</span>
<span class="token class-name">PointLatLng</span> start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.3</span><span class="token punctuation">,</span> <span class="token number">112.5337</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//路径起点</span>
<span class="token function">DrawMarker</span><span class="token punctuation">(</span>marker_Overlay<span class="token punctuation">,</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//是添加标记的函数</span>

<span class="token comment">//终点水滴标记</span>
<span class="token class-name">PointLatLng</span> end <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.81</span><span class="token punctuation">,</span> <span class="token number">113.557</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//路径终点</span>
<span class="token function">DrawMarker</span><span class="token punctuation">(</span>marker_Overlay<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//是添加标记的函数</span>

<span class="token comment">//根据起止点start、end和当前的zoom查找路径</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>PointLatLng<span class="token punctuation">&gt;</span></span> points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>PointLatLng<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> start<span class="token punctuation">,</span> end <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">GMapRoute</span> route <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapRoute</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
route<span class="token punctuation">.</span>Stroke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Pen</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 折线颜色，线宽</span>
marker_Overlay<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>route<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3><a id="_126"></a>在地图上添加多边形</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/67eefd878dc34586a5067f76e069cf55.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWXl1YW55dXhpbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-csharp"><span class="token class-name">GMapOverlay</span> polygon_Overlay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapOverlay</span><span class="token punctuation">(</span><span class="token string">"polygon_Overlay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>gMapControl1<span class="token punctuation">.</span>Overlays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>polygon_Overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 多边形的顶点</span>
<span class="token class-name">List<span class="token punctuation">&lt;</span>PointLatLng<span class="token punctuation">&gt;</span></span> points <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>PointLatLng<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">113</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.1</span><span class="token punctuation">,</span> <span class="token number">112.99</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.3</span><span class="token punctuation">,</span> <span class="token number">113.66</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
points<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28.1</span><span class="token punctuation">,</span> <span class="token number">113.88</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">GMapPolygon</span> polygon <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapPolygon</span><span class="token punctuation">(</span>points<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
polygon<span class="token punctuation">.</span>Fill <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SolidBrush</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span><span class="token function">FromArgb</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
polygon<span class="token punctuation">.</span>Stroke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Pen</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Red<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
polygon_Overlay<span class="token punctuation">.</span>Polygons<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>polygon<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3><a id="_144"></a>在地图上添加图片</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f2d9048679db4a2c8953f82114fda550.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWXl1YW55dXhpbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<pre><code class="prism language-csharp"><span class="token class-name">GMapOverlay</span> img_Overlay <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMapOverlay</span><span class="token punctuation">(</span><span class="token string">"polygon_Overlay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>gMapControl1<span class="token punctuation">.</span>Overlays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>img_Overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Bitmap</span> bitmap <span class="token operator">=</span> Bitmap<span class="token punctuation">.</span><span class="token function">FromFile</span><span class="token punctuation">(</span><span class="token string">@"E:\yuanyuxin\工作文档\升级压裂软件系统\警告.png"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">Bitmap</span><span class="token punctuation">;</span>

<span class="token comment">//创建标记，并设置位置及样式</span>
<span class="token class-name">GMapMarker</span> marker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GMarkerGoogle</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PointLatLng</span><span class="token punctuation">(</span><span class="token number">28</span><span class="token punctuation">,</span> <span class="token number">113</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bitmap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将标记添加到图层</span>
img_Overlay<span class="token punctuation">.</span>Markers<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>marker<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//将图层添加到地图</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>gMapControl1<span class="token punctuation">.</span>Overlays<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>img_Overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//鼠标标记点提示框ToolTip</span>
marker<span class="token punctuation">.</span>ToolTipText <span class="token operator">=</span> <span class="token string">"报警信息"</span><span class="token punctuation">;</span>
marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Fill <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SolidBrush</span><span class="token punctuation">(</span>Color<span class="token punctuation">.</span><span class="token function">FromArgb</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> Color<span class="token punctuation">.</span>Black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>Foreground <span class="token operator">=</span> Brushes<span class="token punctuation">.</span>White<span class="token punctuation">;</span>
marker<span class="token punctuation">.</span>ToolTip<span class="token punctuation">.</span>TextPadding <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Size</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3><a id="_169"></a>在地图上清除图层</h3>
<pre><code class="prism language-csharp">overlay<span class="token punctuation">.</span>Markers<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>