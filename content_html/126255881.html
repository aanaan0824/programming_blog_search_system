<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-dracula" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><strong>å‰è¨€</strong></p>
<blockquote>
<p>åšä¸»ä¸»é¡µğŸ‘‰ğŸ»<a href="https://blog.csdn.net/xuxuii?spm=1011.2415.3001.5343">èœ¡ç¬”é›ç”°å­¦ä»£ç </a><br/> ä¸“æ é“¾æ¥ğŸ‘‰ğŸ»<a href="https://blog.csdn.net/xuxuii/category_11838680.html">Reactä¸“æ </a><br/> ä»Šå¤©æ¥å­¦ä¹ Reactçš„ä¸€äº›æ‰©å±•çŸ¥è¯†<br/> ä¸‹ä¸€ç¯‡æ–‡ç« ä¹Ÿä¼šå†ä»‹ç»å¦å¤–ä¸€äº›<a href="http://t.csdn.cn/5I6FA">Reactæ‰©å±•çŸ¥è¯†</a><br/> æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¸€èµ·æ¥çœ‹çœ‹å§~ğŸ¤</p>
</blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="70%" src="https://img-blog.csdnimg.cn/d906de47ede14a0a87401fcc24c75517.jpeg#pic_center" width="70%"/></p>
<p></p>
<div class="toc">
<h3>æ–‡ç« ç›®å½•</h3>
<ul><li><a href="#1_setState_11">1. setState</a></li><li><ul><li><a href="#setState2_13">setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•</a></li><li><a href="#_57">æ€»ç»“</a></li></ul>
</li><li><a href="#2_lazyLoad_66">2. lazyLoad</a></li><li><ul><li><a href="#lazyLoad_68">è·¯ç”±ç»„ä»¶çš„lazyLoadæ‡’åŠ è½½</a></li></ul>
</li><li><a href="#3_Hooks_101">3. Hooks</a></li><li><ul><li><a href="#React_HookHooks_103">React Hook/Hooksæ˜¯ä»€ä¹ˆ?</a></li><li><a href="#Hook_109">ä¸‰ä¸ªå¸¸ç”¨çš„Hook</a></li><li><a href="#State_Hook_117">State Hook</a></li><li><a href="#Effect_Hook_164">Effect Hook</a></li><li><a href="#Ref_Hook_206">Ref Hook</a></li></ul>
</li><li><a href="#4_Fragment_216">4. Fragment</a></li><li><ul><li><a href="#_219">ä½œç”¨</a></li><li><a href="#_223">ä½¿ç”¨</a></li></ul>
</li><li><a href="#5_Context_264">5. Context</a></li><li><ul><li><a href="#_268">ä½¿ç”¨</a></li><li><a href="#_303">ç¤ºä¾‹</a></li><li><a href="#_380">æ³¨æ„</a></li></ul>
</li></ul>
</div>
<p></p>
<h1><a id="1_setState_11"></a>1. setState</h1>
<h2><a id="setState2_13"></a>setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•</h2>
<p>1ï¸âƒ£ <strong>setState(stateChange, [callback])</strong>------<code>å¯¹è±¡å¼çš„setState</code></p>
<ul><li>stateChangeä¸ºçŠ¶æ€æ”¹å˜å¯¹è±¡(è¯¥<strong>å¯¹è±¡å¯ä»¥ä½“ç°å‡ºçŠ¶æ€çš„æ›´æ”¹</strong>)</li></ul>
<pre><code class="prism language-js"><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 1.è·å–åŸæ¥çš„countå€¼</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token comment">// 2.æ›´æ–°çŠ¶æ€</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'12è¡Œçš„è¾“å‡º'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>ç”±äºsetState()æ˜¯åŒæ­¥çš„æ–¹æ³•, ä½†æ˜¯æ˜¯<code>å¼‚æ­¥æ‰§è¡Œ</code>çš„,æ‰€ä»¥ä¼šå…ˆæ‰“å°clg,å†æ›´æ–°çŠ¶æ€ã€‚</p>
</blockquote>
<ul><li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨<code>çŠ¶æ€æ›´æ–°å®Œæ¯•</code>ã€<code>ç•Œé¢ä¹Ÿæ›´æ–°</code>å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨</li></ul>
<pre><code class="prism language-js"><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 1.è·å–åŸæ¥çš„countå€¼</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token comment">// 2.æ›´æ–°çŠ¶æ€</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>2ï¸âƒ£ <strong>setState(updater, [callback])</strong>------<code>å‡½æ•°å¼çš„setState</code></p>
<ul><li>updaterä¸ºè¿”å›stateChangeå¯¹è±¡çš„å‡½æ•°ã€‚</li><li>updaterå¯ä»¥<strong>æ¥æ”¶åˆ°stateå’Œprops</strong>ã€‚</li><li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°, å®ƒåœ¨çŠ¶æ€æ›´æ–°ã€ç•Œé¢ä¹Ÿæ›´æ–°å(renderè°ƒç”¨å)æ‰è¢«è°ƒç”¨ã€‚</li></ul>
<pre><code class="prism language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> props<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2><a id="_57"></a>æ€»ç»“</h2>
<blockquote>
<p>1ï¸âƒ£å¯¹è±¡å¼çš„setStateæ˜¯å‡½æ•°å¼çš„setStateçš„ç®€å†™æ–¹å¼(è¯­æ³•ç³–)</p>
<p>2ï¸âƒ£ä½¿ç”¨åŸåˆ™ï¼š</p>
<ul><li>å¦‚æœæ–°çŠ¶æ€<strong>ä¸ä¾èµ–äº</strong>åŸçŠ¶æ€ ===&gt; <strong>ä½¿ç”¨å¯¹è±¡æ–¹å¼</strong></li><li>å¦‚æœæ–°çŠ¶æ€<strong>ä¾èµ–äº</strong>åŸçŠ¶æ€ ===&gt; <strong>ä½¿ç”¨å‡½æ•°æ–¹å¼</strong></li><li>å¦‚æœéœ€è¦åœ¨setState()æ‰§è¡Œåè·å–æœ€æ–°çš„çŠ¶æ€æ•°æ®, è¦åœ¨ç¬¬äºŒä¸ªcallbackå‡½æ•°ä¸­è¯»å–</li></ul>
</blockquote>
<h1><a id="2_lazyLoad_66"></a>2. lazyLoad</h1>
<h2><a id="lazyLoad_68"></a>è·¯ç”±ç»„ä»¶çš„lazyLoadæ‡’åŠ è½½</h2>
<p>1ï¸âƒ£å¼•å…¥lazyå‡½æ•°å’ŒSuspenseç»„ä»¶</p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component<span class="token punctuation">,</span> lazy<span class="token punctuation">,</span> Suspense <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
</code></pre>
<p><code>å®ç°è·¯ç”±çš„æ‡’åŠ è½½</code></p>
<p>2ï¸âƒ£é€šè¿‡Reactçš„lazyå‡½æ•°é…åˆimport()å‡½æ•°åŠ¨æ€åŠ è½½è·¯ç”±ç»„ä»¶ ===&gt; è·¯ç”±ç»„ä»¶ä»£ç ä¼šè¢«åˆ†å¼€æ‰“åŒ…</p>
<pre><code class="prism language-js"><span class="token keyword">const</span> Home <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./Home'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token keyword">const</span> About <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./About'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre>
<p>3ï¸âƒ£é€šè¿‡æŒ‡å®šåœ¨åŠ è½½å¾—åˆ°è·¯ç”±æ‰“åŒ…æ–‡ä»¶å‰æ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰loadingç•Œé¢</p>
<pre><code class="prism language-js"><span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">/* æ³¨å†Œè·¯ç”± */</span><span class="token punctuation">}</span>
		<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/about"</span> component<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>About<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  	<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">"/home"</span> component<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>Home<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
</code></pre>
<h1><a id="3_Hooks_101"></a>3. Hooks</h1>
<p>ä¸Šä¸¤ç¯‡æ–‡ç« ç€é‡è®²è§£äº†<a href="https://blog.csdn.net/xuxuii/article/details/126209441?spm=1001.2014.3001.5502">React HooksåŸºç¡€</a>å’Œ<a href="https://blog.csdn.net/xuxuii/article/details/126225877?spm=1001.2014.3001.5502">React Hooksè¿›é˜¶</a>ï¼Œåœ¨æ­¤ç®€å•æ¦‚æ‹¬ä¸€ä¸‹ï¼š</p>
<h2><a id="React_HookHooks_103"></a>React Hook/Hooksæ˜¯ä»€ä¹ˆ?</h2>
<blockquote>
<p>Hookæ˜¯React 16.8.0ç‰ˆæœ¬å¢åŠ çš„æ–°ç‰¹æ€§/æ–°è¯­æ³•</p>
<p>å¯ä»¥è®©ä½ åœ¨<strong>å‡½æ•°ç»„ä»¶</strong>ä¸­ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</p>
</blockquote>
<h2><a id="Hook_109"></a>ä¸‰ä¸ªå¸¸ç”¨çš„Hook</h2>
<blockquote>
<p>State Hook: React.useState()</p>
<p>Effect Hook: React.useEffect()</p>
<p>Ref Hook: React.useRef()</p>
</blockquote>
<h2><a id="State_Hook_117"></a>State Hook</h2>
<blockquote>
<p>State Hookè®©<strong>å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æœ‰stateçŠ¶æ€</strong>, å¹¶è¿›è¡Œ<strong>çŠ¶æ€æ•°æ®çš„è¯»å†™æ“ä½œ</strong></p>
<p>è¯­æ³•: <code>const [xxx, setXxx] = React.useState(initValueåˆå§‹å€¼) </code></p>
<p>ğŸ”¥useState()è¯´æ˜:</p>
<p>â€‹ 1ï¸âƒ£<strong>å‚æ•°:</strong> ç¬¬ä¸€æ¬¡åˆå§‹åŒ–æŒ‡å®šçš„å€¼åœ¨å†…éƒ¨ä½œç¼“å­˜</p>
<p>â€‹ 2ï¸âƒ£<strong>è¿”å›å€¼:</strong> åŒ…å«<code>2ä¸ªå…ƒç´ </code>çš„<code>æ•°ç»„</code>, <strong>ç¬¬1ä¸ª</strong>ä¸º<code>å†…éƒ¨å½“å‰çŠ¶æ€å€¼</code>, <strong>ç¬¬2ä¸ª</strong>ä¸º<code>æ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°(æ–¹æ³•)</code></p>
<p>ğŸ”¥setXxx()2ç§å†™æ³•:</p>
<p>â€‹ 1ï¸âƒ£<strong>setXxx(newValue):</strong> å‚æ•°ä¸º<strong>éå‡½æ•°å€¼</strong>, ç›´æ¥æŒ‡å®šæ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼</p>
<p>â€‹ 2ï¸âƒ£<strong>setXxx(value =&gt; newValue):</strong> å‚æ•°ä¸º<strong>å‡½æ•°</strong>, æ¥æ”¶åŸæœ¬çš„çŠ¶æ€å€¼, è¿”å›æ–°çš„çŠ¶æ€å€¼, å†…éƒ¨ç”¨å…¶è¦†ç›–åŸæ¥çš„çŠ¶æ€å€¼</p>
</blockquote>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è¿”å›å€¼ç¬¬1ä¸ªä¸ºå†…éƒ¨å½“å‰çŠ¶æ€å€¼, ç¬¬2ä¸ªä¸ºæ›´æ–°çŠ¶æ€å€¼çš„å‡½æ•°(æ–¹æ³•)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>name<span class="token punctuation">,</span> setName<span class="token punctuation">]</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'tom'</span><span class="token punctuation">)</span>

  <span class="token comment">// åŠ çš„å›è°ƒ</span>
  <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// setCount(count + 1) //ç¬¬ä¸€ç§å†™æ³•</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>  <span class="token comment">//ç¬¬äºŒç§å†™æ³•</span>
      <span class="token keyword">return</span> count <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š<span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>æˆ‘çš„åå­—æ˜¯ï¼š<span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>add<span class="token punctuation">}</span><span class="token operator">&gt;</span>ç‚¹æˆ‘åŠ <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>change<span class="token punctuation">}</span><span class="token operator">&gt;</span>ç‚¹æˆ‘æ”¹å<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="Effect_Hook_164"></a>Effect Hook</h2>
<blockquote>
<p>Effect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ(ç”¨äºæ¨¡æ‹Ÿç±»ç»„ä»¶ä¸­çš„<strong>ç”Ÿå‘½å‘¨æœŸé’©å­</strong>)</p>
<p>ğŸ”¥Reactä¸­çš„å‰¯ä½œç”¨æ“ä½œ:</p>
<p>1ï¸âƒ£å‘ajaxè¯·æ±‚æ•°æ®è·å–</p>
<p>2ï¸âƒ£è®¾ç½®è®¢é˜… / å¯åŠ¨å®šæ—¶å™¨</p>
<p>3ï¸âƒ£æ‰‹åŠ¨æ›´æ”¹çœŸå®DOM</p>
<p>ğŸ”¥è¯­æ³•å’Œè¯´æ˜:</p>
<pre><code class="prism language-js"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> 
  <span class="token comment">// åœ¨æ­¤å¯ä»¥æ‰§è¡Œä»»ä½•å¸¦å‰¯ä½œç”¨æ“ä½œ</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// åœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œ</span>
    <span class="token comment">// åœ¨æ­¤åšä¸€äº›æ”¶å°¾å·¥ä½œ, æ¯”å¦‚æ¸…é™¤å®šæ—¶å™¨/å–æ¶ˆè®¢é˜…ç­‰</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>stateValue<span class="token punctuation">]</span><span class="token punctuation">)</span> 
</code></pre>
<p>ğŸ”¥å¯ä»¥æŠŠ useEffect Hook çœ‹åšå¦‚ä¸‹ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆ:</p>
<pre><code>  componentDidMount()
  componentDidUpdate()
  componentWillUnmount() 
</code></pre>
</blockquote>
<pre><code class="prism language-js">React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setCount</span><span class="token punctuation">(</span><span class="token parameter">count</span> <span class="token operator">=&gt;</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//è¿™ä¸ªè¿”å›çš„å‡½æ•°ç›¸å½“äºcomponentWillUnmount()</span>
      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token comment">//å¦‚æœä¸å†™æ•°ç»„,ä¼šç›‘æµ‹ä»»ä½•æ”¹å˜(ç›¸å½“äºcomponentDidMount()å’ŒcomponentDidUpdate())</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// å¦‚æœæŒ‡å®šçš„æ˜¯[], å›è°ƒå‡½æ•°åªä¼šåœ¨ç¬¬ä¸€æ¬¡render()åæ‰§è¡Œ(ç›¸å½“äºcomponentDidMount())</span>
</code></pre>
<h2><a id="Ref_Hook_206"></a>Ref Hook</h2>
<blockquote>
<p>1ï¸âƒ£Ref Hookå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶ä¸­<strong>å­˜å‚¨/æŸ¥æ‰¾ç»„ä»¶å†…çš„æ ‡ç­¾æˆ–ä»»æ„å…¶å®ƒæ•°æ®</strong></p>
<p>2ï¸âƒ£è¯­æ³•: <code>const refContainer = React.useRef()</code></p>
<p>3ï¸âƒ£ä½œç”¨: ä¿å­˜æ ‡ç­¾å¯¹è±¡,<strong>åŠŸèƒ½ä¸React.createRef()ä¸€æ ·</strong></p>
</blockquote>
<h1><a id="4_Fragment_216"></a>4. Fragment</h1>
<h2><a id="_219"></a>ä½œç”¨</h2>
<blockquote>
<p>å¯ä»¥ä¸ç”¨å¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„DOMæ ¹æ ‡ç­¾äº†</p>
</blockquote>
<h2><a id="_223"></a>ä½¿ç”¨</h2>
<p><code>Demoç»„ä»¶:</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token comment">//Fragmentåªèƒ½æ‹¥æœ‰keyå±æ€§</span>
      <span class="token operator">&lt;</span>Fragment key<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
	<span class="token comment">//è¿™ç§å†™æ³•ä¹Ÿè¡Œ,ä½†æ˜¯è¿™ç§å†™æ³•ä¸èƒ½å†™keyç­‰å±æ€§</span>
      <span class="token comment">//&lt;&gt;</span>
      <span class="token comment">//&lt;input type="text" /&gt;</span>
      <span class="token comment">//&lt;/&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>App.jsx:</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component<span class="token punctuation">,</span> Fragment <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Demo <span class="token keyword">from</span> <span class="token string">'./components/5_Fragment'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Demo <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h1><a id="5_Context_264"></a>5. Context</h1>
<blockquote>
<p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼, å¸¸ç”¨äºã€ç¥–ç»„ä»¶ã€‘ä¸ã€åä»£ç»„ä»¶ã€‘é—´é€šä¿¡</p>
</blockquote>
<h2><a id="_268"></a>ä½¿ç”¨</h2>
<blockquote>
<p>1ï¸âƒ£åˆ›å»ºContextå®¹å™¨å¯¹è±¡ï¼š</p>
</blockquote>
<pre><code class="prism language-js"><span class="token keyword">const</span> XxxContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  
</code></pre>
<blockquote>
<p>2ï¸âƒ£æ¸²æŸ“å­ç»„ä»¶æ—¶ï¼Œå¤–é¢åŒ…è£¹xxxContext.Provider, é€šè¿‡valueå±æ€§ç»™åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼š</p>
</blockquote>
<pre><code class="prism language-js"><span class="token operator">&lt;</span>XxxContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>æ•°æ®<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  å­ç»„ä»¶
<span class="token operator">&lt;</span><span class="token operator">/</span>XxxContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>3ï¸âƒ£åä»£ç»„ä»¶è¯»å–æ•°æ®ï¼š</p>
</blockquote>
<pre><code class="prism language-js"><span class="token comment">//ç¬¬ä¸€ç§æ–¹å¼:ä»…é€‚ç”¨äºç±»ç»„ä»¶ </span>
<span class="token keyword">static</span> contextType <span class="token operator">=</span> XxxContext  <span class="token comment">// å£°æ˜æ¥æ”¶context</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token comment">// è¯»å–contextä¸­çš„valueæ•°æ®</span>
</code></pre>
<pre><code class="prism language-js"><span class="token comment">//ç¬¬äºŒç§æ–¹å¼: å‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶éƒ½å¯ä»¥</span>
<span class="token operator">&lt;</span>XxxContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
  <span class="token punctuation">{<!-- --></span>
  	<span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span> <span class="token comment">// valueå°±æ˜¯contextä¸­çš„valueæ•°æ®</span>
  	è¦æ˜¾ç¤ºçš„å†…å®¹
  	<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>XxxContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
</code></pre>
<h2><a id="_303"></a>ç¤ºä¾‹</h2>
<p>ç¥–ç»„ä»¶Aæƒ³è¦ç»™å­™ç»„ä»¶Cä¼ é€’æ•°æ®: ç”¨æˆ·åå’Œå¹´é¾„</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="70%" src="https://img-blog.csdnimg.cn/304a5d2faf3242a6aaf2bd9844be4086.png#pic_center" width="70%"/></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token string">'./index.css'</span>

<span class="token comment">// åˆ›å»ºContextå¯¹è±¡</span>
<span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>

  state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> username<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'parent'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯<span class="token constant">A</span>ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>æˆ‘çš„ç”¨æˆ·åæ˜¯ï¼š<span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Provider value<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> username<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token constant">B</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Provider<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'child'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯<span class="token constant">B</span>ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token constant">C</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å­™ç»„ä»¶ä¸ºç±»ç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// å£°æ˜æ¥æ”¶context</span>
  <span class="token keyword">static</span> contextType <span class="token operator">=</span> MyContext
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// æ‰“å°å‡ºåä»£ç»„ä»¶çš„thisæ˜¾ç¤ºå‡ºåä»£ç»„ä»¶çš„context</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'grand'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯<span class="token constant">C</span>ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>æˆ‘ä»<span class="token constant">A</span>ç»„ä»¶æ¥æ”¶åˆ°çš„ç”¨æˆ·åæ˜¯ï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">,</span>å¹´é¾„æ˜¯ï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span>age<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å­™ç»„ä»¶ä¸ºå‡½æ•°ç»„ä»¶</span>
<span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'grand'</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯<span class="token constant">C</span>ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>æˆ‘ä»<span class="token constant">A</span>ç»„ä»¶æ¥æ”¶åˆ°çš„ç”¨æˆ·åæ˜¯ï¼š
        <span class="token operator">&lt;</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>value<span class="token punctuation">.</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,å¹´é¾„æ˜¯</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>value<span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>MyContext<span class="token punctuation">.</span>Consumer<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_380"></a>æ³¨æ„</h2>
<blockquote>
<p>åœ¨åº”ç”¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨context, ä¸€èˆ¬éƒ½ç”¨å®ƒå°è£…reactæ’ä»¶, react-reduxåº“åº•å±‚ä½¿ç”¨äº†context.</p>
</blockquote>
<blockquote>
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦âœ¨
         
        
       
       
        \textcolor{red}{ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦âœ¨}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: red;">ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦</span><span class="mord" style="color: red;">âœ¨</span></span></span></span></span> <br/><br/> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹
         
        
       
       
        \textcolor{blue}{åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: blue;">åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹</span></span></span></span></span> <br/><br/> ğŸ¤ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼
         
        
       
       
        \textcolor{green}{ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼</span></span></span></span></span> <br/><br/> â­ï¸ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼
         
        
       
       
        \textcolor{green}{æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼</span></span></span></span></span> <br/><br/> âœï¸ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼
         
        
       
       
        \textcolor{green}{è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼</span></span></span></span></span> <br/></p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>