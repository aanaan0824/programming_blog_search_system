<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="CSDN_0"></a>【本文章发布于CSDN，未经个人同意不得转载】</h1>
<h1><a id="CCLICCCLIDLLhttpsblogcsdnnetweixin_44733774articledetails124024001_1"></a>【原文地址：<a href="https://blog.csdn.net/weixin_44733774/article/details/124024001">【托管C++(CLI)】【简单示例】C#调用C++/CLI（以DLL形式调用）</a>】</h1>
<br/>
<br/>
<br/>
<br/>
<br/>
<h1><a id="font_color00FFFF_size5font_10"></a><font color="#00FFFF" size="5">因为操作太多了，纯文本描述实在是不方便，直接来个图文说明</font></h1>
<blockquote>
<p><font color="#FFFF00" size="5"><strong>①、【一个平淡无奇的C++空项目】</strong></font><br/> <img height="50%" src="image\bfdeaf70ca974cfe9c0b857d24abb8bc.png" width="50%"/><img height="50%" src="image\2a8192f80d8444a9bd0728f06073503d.png" width="50%"/></p>
</blockquote>
<br/>
<blockquote>
<p><font color="#FFFF00" size="5"><strong>②、【设置该C++项目的项目属性】</strong></font><br/> “符合模式”这个东西我也不知道是干啥的，但我也不怎么感兴趣，翻车的时候再来看看好了<br/> <img height="30%" src="image\14067539e4f8415cb72c0e2a142a2584.png" width="30%"/><img height="50%" src="image\12dda806484f4cd1868e83d786cde79b.png" width="50%"/><img height="50%" src="image\e4e77ee8d88f4c2cbe382c95cd02e13a.png" width="50%"/><img height="50%" src="image\69c900879db548c6bf902f925ac5e6aa.png" width="50%"/></p>
</blockquote>
<br/>
<blockquote>
<p><font color="#FFFF00" size="5"><strong>③、【写一个C++的托管类(CLI)，调用之前写的C++类，然后生成DLL文件】</strong></font><br/> 简单说明下这个CLI的语法：<br/> ①、托管类要用ref声明，并且添加public声明用于外部项目的使用；<br/> ②、托管类里头的公有部分的复杂数据类型统统都是C#的数据类型例如System::Collections::Generic::List啥的(当然也可以是自己写的其他的托管类)，并且那些数据类型都必须使用引用^；<br/> ③、在cpp文件里生成个C#的数据对象是使用gcnew的而不是new的；<br/> ④、C++的类/数据结构是不能出现在公有部分中的(你写了就直接给你报错)，但可以出现在私有部分中。<br/> 更多关于CLI语法上的细节请自行搜索查看其它人的文章博客。<br/> <img height="50%" src="image\74ea8865160341259596a5522b21e6c5.png" width="50%"/><img height="50%" src="image\af9a0d5ff5b248f4ac2dcf35a9468707.png" width="50%"/></p>
</blockquote>
<br/>
<blockquote>
<p><font color="#FFFF00" size="5"><strong>④、【添加一个CS项目去调用这个DLL文件】</strong></font><br/> <img height="50%" src="image\2de97bf1e4f9401aa66fbee2e9fe39ff.png" width="50%"/><br/> <img height="50%" src="image\6cae9374e3a649d8a0a62501a5c0599b.png" width="50%"/><img height="50%" src="image\3be22f91610741d6b8ebe64e62a5b88a.png" width="50%"/><br/> <img height="50%" src="image\803bf3cf38994eab952e3a562f0f4aaa.png" width="50%"/></p>
</blockquote>
<br/>
<blockquote>
<p><font color="#FFFF00" size="5"><strong>【其他】</strong></font><br/> 那时我可是被那“CLI 字典 数组 列表”啥的给整恶心了啊，搜需要的数据类型但啥也搜不到(姿势不对?)。然后不知道怎么的我打开了“对象浏览器”于是走进新大陆。（其实CLI的数据类型说白了就是C#的数据类型只是当时蠢没有意识到<br/> <img height="50%" src="image\853f0d1084df4b6897d877091ea1564e.png" width="50%"/><img height="50%" src="image\00c60205d1464aee9e5130c255f65943.png" width="50%"/></p>
</blockquote>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<p>不想一个个文件复制黏贴的话可以直接在GitHub里下载项目，传送门：<a href="https://github.com/Ls-Jan/CLI_Demo/tree/main">【GitHub/CLI_Demo】</a></p>
<p><font color="#00FF00" size="5"><strong>【Record.h】</strong></font></p>
<pre><code class="prism language-cpp"><span class="token comment">//【Record.h】</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span>  <span class="token expression">RECORD_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RECORD_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;map&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>

<span class="token comment">//C++的原生类，生成库之后该类并不会出现在在C#项目中</span>
<span class="token keyword">class</span> <span class="token class-name">Record</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span>std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;&gt;</span>mapping<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token keyword">void</span> <span class="token function">AddString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//加入字符串，以首字符为索引存进mapping中</span>
	std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据索引获取字串列表</span>
	std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;&gt;</span><span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取mapping</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// ! RECORD_H</span></span>

</code></pre>
<p><font color="#00FF00" size="5"><strong>【Record.cpp】</strong></font></p>
<pre><code class="prism language-cpp"><span class="token comment">//【Record.cpp】</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Record.h"</span></span>

<span class="token keyword">void</span> <span class="token class-name">Record</span><span class="token double-colon punctuation">::</span><span class="token function">AddString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span>string str<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	mapping<span class="token punctuation">[</span>str<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> <span class="token class-name">Record</span><span class="token double-colon punctuation">::</span><span class="token function">GetString</span><span class="token punctuation">(</span><span class="token keyword">char</span> ch<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>mapping<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">==</span> mapping<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> std<span class="token double-colon punctuation">::</span><span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> mapping<span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

std<span class="token double-colon punctuation">::</span>map<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;&gt;</span> <span class="token class-name">Record</span><span class="token double-colon punctuation">::</span><span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> mapping<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p><font color="#00FF00" size="5"><strong>【Main.cpp】</strong></font></p>
<pre><code class="prism language-cpp"><span class="token comment">//【main.cpp】</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Record.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	Record rec<span class="token punctuation">;</span>
	rec<span class="token punctuation">.</span><span class="token function">AddString</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	rec<span class="token punctuation">.</span><span class="token function">AddString</span><span class="token punctuation">(</span><span class="token string">"134"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	rec<span class="token punctuation">.</span><span class="token function">AddString</span><span class="token punctuation">(</span><span class="token string">"234"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">auto</span> mapping<span class="token operator">=</span>rec<span class="token punctuation">.</span><span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> p <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> p <span class="token operator">!=</span> mapping<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>p<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> p<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">"]\n"</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> q <span class="token operator">=</span> p<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q <span class="token operator">!=</span> p<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>q<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>q <span class="token operator">&lt;&lt;</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



</code></pre>
<p><font color="#00FF00" size="5"><strong>【Controller.h】</strong></font></p>
<pre><code class="prism language-cpp"><span class="token comment">//【Controller.h】</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">CONTROLLER_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">CONTROLLER_H</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> System<span class="token double-colon punctuation">::</span>Collections<span class="token double-colon punctuation">::</span>Generic<span class="token punctuation">;</span>
<span class="token comment">//C++的托管类(CLI)，将在C#代码中生效。暴露出来的数据类型必须是System::里头的，且必须用引用^</span>
<span class="token comment">//托管类必须public要不然在C#项目里访问不到</span>
<span class="token keyword">class</span> <span class="token class-name">Record</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> ref <span class="token keyword">class</span> <span class="token class-name">Controller</span> <span class="token punctuation">{<!-- --></span>
<span class="token keyword">private</span><span class="token operator">:</span>
	Record<span class="token operator">*</span> ptr<span class="token punctuation">;</span>
<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token operator">~</span><span class="token function">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">XJ_AddString</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//加入字符串，以首字符为索引保存到Record中</span>
	List<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span> <span class="token function">XJ_GetString</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span>Char<span class="token operator">^</span> ch<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//根据字符获取字串列表</span>
	Dictionary<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>Char<span class="token punctuation">,</span>List<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span><span class="token function">XJ_GetDict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取Record记录</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

</code></pre>
<p><font color="#00FF00" size="5"><strong>【Controller.cpp】</strong></font></p>
<pre><code class="prism language-cpp"><span class="token comment">//【Controller.cpp】</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Controller.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"Record.h"</span></span>

<span class="token class-name">Controller</span><span class="token double-colon punctuation">::</span><span class="token function">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	ptr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">Record</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Controller</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">delete</span> ptr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">Controller</span><span class="token double-colon punctuation">::</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span> str<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	ptr<span class="token operator">-&gt;</span><span class="token function">AddString</span><span class="token punctuation">(</span>std<span class="token double-colon punctuation">::</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span>Runtime<span class="token double-colon punctuation">::</span>InteropServices<span class="token double-colon punctuation">::</span><span class="token class-name">Marshal</span><span class="token double-colon punctuation">::</span><span class="token function">StringToHGlobalAnsi</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToPointer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

List<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span> <span class="token class-name">Controller</span><span class="token double-colon punctuation">::</span><span class="token function">XJ_GetString</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span>Char<span class="token operator">^</span> ch<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//	mbstowcs_s(ch-&gt;ToChar(gcnew System::Globalization::CultureInfo("zh-chs-Hans")));</span>
<span class="token comment">//	System::Convert::ToByte(ch);</span>
	std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>std<span class="token double-colon punctuation">::</span>string<span class="token operator">&gt;</span> rst <span class="token operator">=</span> ptr<span class="token operator">-&gt;</span><span class="token function">GetString</span><span class="token punctuation">(</span>System<span class="token double-colon punctuation">::</span><span class="token class-name">Convert</span><span class="token double-colon punctuation">::</span><span class="token function">ToByte</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//	std::vector&lt;std::string&gt; rst = ptr-&gt;GetString(ch-&gt;ToByte(gcnew System::Globalization::CultureInfo("zh-chs-Hans")));</span>
	<span class="token keyword">auto</span> data<span class="token operator">=</span>gcnew <span class="token generic-function"><span class="token function">List</span><span class="token generic class-name"><span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">=</span> rst<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> rst<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
		data<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span>gcnew <span class="token class-name">System</span><span class="token double-colon punctuation">::</span><span class="token function">String</span><span class="token punctuation">(</span>i<span class="token operator">-&gt;</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Dictionary<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>Char<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span> <span class="token class-name">Controller</span><span class="token double-colon punctuation">::</span><span class="token function">XJ_GetDict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">auto</span> data <span class="token operator">=</span>gcnew <span class="token generic-function"><span class="token function">Dictionary</span><span class="token generic class-name"><span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>Char<span class="token punctuation">,</span> List<span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span><span class="token operator">^</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">auto</span> tmp <span class="token operator">=</span> ptr<span class="token operator">-&gt;</span><span class="token function">GetMapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> i <span class="token operator">=</span> tmp<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> tmp<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> key <span class="token operator">=</span> i<span class="token operator">-&gt;</span>first<span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> j <span class="token operator">=</span> i<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> j <span class="token operator">!=</span> i<span class="token operator">-&gt;</span>second<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">char</span> key <span class="token operator">=</span> i<span class="token operator">-&gt;</span>first<span class="token punctuation">;</span>
			std<span class="token double-colon punctuation">::</span>string str <span class="token operator">=</span> <span class="token operator">*</span>j<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token operator">-&gt;</span><span class="token function">ContainsKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
				data<span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> gcnew <span class="token generic-function"><span class="token function">List</span><span class="token generic class-name"><span class="token operator">&lt;</span>System<span class="token double-colon punctuation">::</span>String<span class="token operator">^</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			data<span class="token punctuation">[</span><span class="token class-name">System</span><span class="token double-colon punctuation">::</span><span class="token function">Char</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">Add</span><span class="token punctuation">(</span>gcnew <span class="token class-name">System</span><span class="token double-colon punctuation">::</span><span class="token function">String</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p><font color="#00FF00" size="5"><strong>【Main.cs】</strong></font></p>
<pre><code class="prism language-csharp"><span class="token comment">//Main.cs</span>
<span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Program</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Controller</span> ctr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Controller</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"AB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"ABC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"12"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctr<span class="token punctuation">.</span><span class="token function">XJ_AddString</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name"><span class="token keyword">char</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> test <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token char">'A'</span><span class="token punctuation">,</span> <span class="token char">'B'</span><span class="token punctuation">,</span> <span class="token char">'C'</span><span class="token punctuation">,</span> <span class="token char">'1'</span><span class="token punctuation">,</span> <span class="token char">'2'</span><span class="token punctuation">,</span> <span class="token char">'3'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">uint</span></span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> t <span class="token operator">&lt;</span> test<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> <span class="token operator">++</span>t<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">var</span></span> rst <span class="token operator">=</span> ctr<span class="token punctuation">.</span><span class="token function">XJ_GetString</span><span class="token punctuation">(</span>test<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"【"</span> <span class="token operator">+</span> test<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">"】"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> str <span class="token keyword">in</span> rst<span class="token punctuation">)</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Console<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">var</span></span> dict <span class="token operator">=</span> ctr<span class="token punctuation">.</span><span class="token function">XJ_GetDict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> x <span class="token keyword">in</span> dict<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"【"</span> <span class="token operator">+</span> x<span class="token punctuation">.</span>Key <span class="token operator">+</span> <span class="token string">"】"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> str <span class="token keyword">in</span> x<span class="token punctuation">.</span>Value<span class="token punctuation">)</span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        Console<span class="token punctuation">.</span><span class="token function">ReadKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>