<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<h1>一.编写Web API</h1>
<p>1.创建ASP.NET Web应用程序</p>
<p><img alt="" height="367" src="image\02b5f5d14f904d818bd2c6cc11fc9a24.png" width="554"/></p>
<p>2.添加MVC5控制器和视图(便于测试API接口)</p>
<p><img alt="" height="179" src="image\aa4f2c014bba4206aea2f263a2af5e68.png" width="554"/></p>
<p><img alt="" height="238" src="image\c812da69810a4414beb985c5549a9a00.png" width="554"/></p>
<p><img alt="" height="328" src="image\ac63bf39e1074ce28fa25de05d991027.png" width="554"/></p>
<p> 3.添加Web API 2控制器</p>
<p><img alt="" height="212" src="image\daaf4e0eab5246bbbc116d03892eaeda.png" width="554"/></p>
<p> 4.在Web API中编写业务调用方法(<span style="color:#fe2c24;">核心内容</span>)</p>
<p>注:如果是Post请求,直接写参数是无法请求到的,因为get方式可以以明文方式,所以post传参时需要添加FromBody.</p>
<p><img alt="" height="407" src="image\7d3056144c7c4ca1b3c4705a257177b0.png" width="556"/></p>
<p> 5.在视图Index里添加测试按钮</p>
<p>注:需引入jquery相关文件,没有的话,可建一个MVC项目,在Scrip文件夹中就有,只需要4项</p>
<p><img alt="" height="310" src="image\3085c2d7f64f41b9800550ec7b71e78b.png" width="273"/></p>
<p> <img alt="" height="618" src="image\e36f4c04fe984f6e9c37d8540122bca6.png" width="683"/></p>
<p> 6.测试结果</p>
<p><img alt="" height="523" src="image\cbe95f469e5249a2aabddc5214f003aa.png" width="763"/></p>
<p><img alt="" height="537" src="image\7be3565c97074f779ad3af79f44fa478.png" width="756"/></p>
<h1> 二.发布Web API</h1>
<p><img alt="" height="554" src="image\52a85c6535e24f95809c63101733398b.png" width="801"/></p>
<p> <img alt="" height="560" src="image\538f0136efb048939a48b912f6019b08.png" width="801"/></p>
<p> <img alt="" height="366" src="image\d8298f8d50254e18a5fbed16e1cc4d62.png" width="804"/></p>
<p> 控制面板---管理工具---IIS管理器</p>
<p> <img alt="" height="434" src="image\7a350e27f6354de2aafbfc4c17e70040.png" width="569"/></p>
<p>发布完成</p>
<h1> 三.WinForm调用测试</h1>
<p><img alt="" height="731" src="image\7293a4842226468d936837b597ee697b.png" width="746"/></p>
<p></p>
<p><img alt="" height="418" src="image\b450daa848c04b3c8316d6c9c92325a4.png" width="817"/></p>
<h1> 四.Web调用</h1>
<p>4.1此时涉及到跨域(就是不同项目访问API的问题)调用的问题,需要添加cors的NuGet包</p>
<p><img alt="" height="474" src="image\f62499ee27c64747b5a08d718b47d137.png" width="921"/></p>
<p> <img alt="" height="443" src="image\56e729e97f1f4f6aa104ef5df88935ca.png" width="1133"/></p>
<p>方式二可对指定访问地址设置访问权限</p>
<p><img alt="" height="525" src="image\8d9671ff327447598168be50c429950c.png" width="1007"/></p>
<p> 4.2编写web测试程序</p>
<p>创建步骤可参考第一节</p>
<p>在视图中添加如下测试代码</p>
<p><img alt="" height="456" src="image\ea2e75216f144602887f8b7d0d4c2756.png" width="688"/></p>
<p><span style="color:#fe2c24;">注:发布后需在url加api,本地调试可省略</span></p>
<p>运行结果如下</p>
<p> <img alt="" height="526" src="image\dafedcbee6124d23a8456ebd1dab309f.png" width="768"/></p>
<p>使用PostMan测试API接口</p>
<p></p>
<p><img alt="" height="781" src="image\ef162885d6b9468b9c544d6081e104b9.png" width="1200"/></p>
<p><img alt="" height="805" src="image\047c1e1c86d946aabbbd6b3d84a384ba.png" width="1200"/></p>
<p> </p>
<p>至此结束!</p>
<p></p>
<p></p>
</div>
</div>