<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><ul><li><a href="#openCV__C_2">openCV 配置 （C++)</a></li><li><a href="#chapter_1__85">chapter 1 读取图像、视频和摄像头</a></li><li><a href="#chapter_2__148">chapter 2 基本功能</a></li><li><a href="#chapter_3__206">chapter 3 调整大小和裁剪</a></li><li><a href="#chapter4__250">chapter4 绘制形状和文本</a></li><li><a href="#chapter_5_Warp_Perspective___280">chapter 5 Warp Perspective 透视调整</a></li><li><a href="#chapter_6_Color_Detection__338">chapter 6 Color Detection 颜色检测</a></li><li><a href="#Chapter_7__ShapesContour_Detection_412">Chapter 7 - Shapes/Contour Detection形状/轮廓检测</a></li><li><a href="#Chapter_8__Face_Detection__418">Chapter 8 - Face Detection 人脸检测</a></li></ul>
</li></ul>
</div>
<p></p>
<h2><a id="openCV__C_2"></a>openCV 配置 （C++)</h2>
<p>课程链接：</p>
<p>https://www.bilibili.com/video/BV11A411T7rL/?spm_id_from=333.788</p>
<ol><li> <p>下载visual studio</p> </li><li> <p>github 下载 opencv ：</p> <p>Release-&gt;选择windows 的 .exe文件</p> <p><img alt="image-20220509094150234" src="https://img-blog.csdnimg.cn/img_convert/b627c15afd757ccc50e1c1c65d4b8b97.png"/></p> </li></ol>
<p><img alt="image-20220509094217583" src="https://img-blog.csdnimg.cn/img_convert/27454fb8c4a1babd81b687105f0207d2.png"/></p>
<p>配置环境变量： 本文将opencv放在了以下路径中：</p>
<p><code>G:\github_code\rep\opencv\build\x64\vc15\bin</code></p>
<p>重启计算机</p>
<ol start="3"><li>打开vs，创建c++ 工程： 并将plateform target 设置为 x64</li></ol>
<p><img alt="image-20220509094323956" src="https://img-blog.csdnimg.cn/img_convert/1006e461b2aecdc2117898d7c0396f54.png"/></p>
<ol start="4"><li> <p>工程配置</p>
<blockquote>
<ul><li>vc++ 目录：</li></ul>
<p>​ 包含目录：G:\github_code\rep\opencv\build\include</p>
<p>​ 库目录：G:\github_code\rep\opencv\build\x64\vc15\lib</p>
<ul><li>链接器：</li></ul>
<p>输入：附加依赖项 opencv_world455d.lib （版本号从</p>
<p>G:\github_code\rep\opencv\build\x64\vc15\bin 可以看到）</p>
</blockquote> </li></ol>
<p>VC++ directories:</p>
<ul><li>点击工程名称 -&gt; 项目 -&gt; 属性</li></ul>
<p><img alt="image-20220509094737555" src="https://img-blog.csdnimg.cn/img_convert/ae0207244ea5c38b2fe9061840687c65.png"/></p>
<ul><li>配置vc++ 的包含目录和库目录</li></ul>
<p><img alt="image-20220509094919382" src="https://img-blog.csdnimg.cn/img_convert/95ed2e5d6c25c9183ca45ba1601d6e1e.png"/></p>
<ul><li>配置链接器以及版本号查询</li></ul>
<p><img alt="image-20220509093013024" src="https://img-blog.csdnimg.cn/img_convert/c2494e14c0a1a79037a7aed20b837405.png"/></p>
<p><img alt="image-20220509093027421" src="https://img-blog.csdnimg.cn/img_convert/0aed211c23785f28372dcff0b74d62c9.png"/></p>
<ol start="5"><li>测试</li></ol>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//Images</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test.jpg"</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//由Opencv 引入的矩阵数据类型</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 :指等待事件无穷大（infinite），这样打开的图片就不会关闭</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>代码能够成功运行，显示图片，说明环境配置正确</p>
<h2><a id="chapter_1__85"></a>chapter 1 读取图像、视频和摄像头</h2>
<p>对于图片：由opencv引入的矩阵类型 Mat 来进行读取</p>
<p>对于视频：是由一系列的图片组成的，需要使用while循环读取所有的img</p>
<p>对于摄像头：与读取视频的方式一致，区别在于路径获取 为摄像头的编号<code>VideoCapture cap(0);</code> 如果只有一个摄像头，通常设置为ID=0 ，如果有多个摄像头，注意修改ID的值</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token comment">//----------------------------------------------------------------------//</span>
<span class="token comment">//Images</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test.jpg"</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//由Opencv 引入的矩阵数据类型</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//----------------------------------------------------------------------//</span>
<span class="token comment">//video</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test_video.mp4"</span><span class="token punctuation">;</span> <span class="token comment">//视频的位置</span>
	<span class="token comment">//读取视频</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	<span class="token comment">//显示视频</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//等待时间20ms</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//----------------------------------------------------------------------//</span>
<span class="token comment">//摄像头</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	
	<span class="token comment">//读取视频</span>
	VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	<span class="token comment">//显示视频</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//等待时间1ms </span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>​</p>
<h2><a id="chapter_2__148"></a>chapter 2 基本功能</h2>
<ol><li>转换成灰度图 ：</li></ol>
<p>使用函数 <code>cvtColor(src,dst,code_color，dstCn)</code></p>
<p>函数说明：将图片从一个色域转换成另一个色域。注意OpenCV的默认颜色格式是BGR而不是RGB。 code_color 可以从 ColorConversionCodes 中查看。dstCn：目标图片的通道数，如果为0，通道数自动从 src 和 code 派生</p>
<ol start="2"><li> <p>高斯模糊 ： <code>GaussianBlur(src,dst,Size(),x,y)</code></p> </li><li> <p>边缘检测：canny</p> </li><li> <p>腐蚀erode()膨胀dilate（）</p> <p>c++ 中没有 numpy，因此使用<code>getStructuringElement</code>为erode和dilate创建kernal</p> </li></ol>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token comment">//Images</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test.jpg"</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat dst_img<span class="token punctuation">,</span> gauss_img<span class="token punctuation">,</span> canny_img<span class="token punctuation">,</span>dilate_img<span class="token punctuation">,</span>erode_img<span class="token punctuation">;</span>
	<span class="token comment">//颜色转换</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> dst_img<span class="token punctuation">,</span> ColorConversionCodes<span class="token double-colon punctuation">::</span>COLOR_BGR2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//高斯模糊</span>
	<span class="token function">GaussianBlur</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> gauss_img<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//边缘检测 canny</span>
	<span class="token function">Canny</span><span class="token punctuation">(</span>gauss_img<span class="token punctuation">,</span> canny_img<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//threashold1,2  自己设定 ，可以使用拖拽栏来调节参数，从而设置这两个阈值，找到最佳检测</span>
	
	<span class="token comment">//腐蚀erode()和膨胀dilate()</span>
	<span class="token comment">//c++ 中没有 numpy，因此使用如下方式创建kernal，为dilate() 使用</span>
	Mat kernal <span class="token operator">=</span> <span class="token function">getStructuringElement</span><span class="token punctuation">(</span>MORPH_RECT<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//膨胀</span>
	<span class="token function">dilate</span><span class="token punctuation">(</span>canny_img<span class="token punctuation">,</span> dilate_img<span class="token punctuation">,</span> kernal<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//腐蚀</span>
	<span class="token function">erode</span><span class="token punctuation">(</span>canny_img<span class="token punctuation">,</span> erode_img<span class="token punctuation">,</span> kernal<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> erode_img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2><a id="chapter_3__206"></a>chapter 3 调整大小和裁剪</h2>
<ul><li> <p>resize</p> <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test.jpg"</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgResize<span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> img<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token comment">//查看当前图片的大小 ，显示为 [640*480]</span>
	<span class="token comment">//修改图片的大小为指定的宽和高</span>
	<span class="token function">resize</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgResize<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token number">320</span><span class="token punctuation">,</span> <span class="token number">240</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//按照比例进行缩小</span>
	<span class="token function">resize</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgResize<span class="token punctuation">,</span> <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"Image"</span><span class="token punctuation">,</span> imgResize<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>裁剪： ROI</p> <p>对于object 对其进行修剪以找到ROI (感兴趣区域)</p> <pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/test.jpg"</span><span class="token punctuation">;</span>
	Mat img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat imgCrop<span class="token punctuation">;</span>

	Rect <span class="token function">roi</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//定义了一个矩形的ROI，x,y, width,height</span>
	imgCrop <span class="token operator">=</span> <span class="token function">img</span><span class="token punctuation">(</span>roi<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//将roi 放到img（）中，从而裁剪出一个新的图片</span>

	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> imgCrop<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> </li></ul>
<h2><a id="chapter4__250"></a>chapter4 绘制形状和文本</h2>
<p>学习如何在图片上画 矩形、圆形，添加文本的操作</p>
<ul><li>画圆 :circle（图片，圆心位置，半径，颜色，粗细）（粗细用FILLED 是填充）</li><li>画矩形：rectangle（图片，左上角点，右下角点，颜色，粗细）</li><li>划线：line （图片，起点，重点，颜色，粗细）</li><li>添加text：putText(图片，“内容”，起点，字体，字体大小，颜色)</li></ul>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//Blank Image</span>
	<span class="token comment">//Mat img(512, 512, CV_8UC3,Scalar(255,0,0)); //创建图片：0-255 (2^8 unsigned) ,3通道（C3)的图片,Scalar(255,0,0):分别代表BGR三个颜色</span>
	Mat <span class="token function">img</span><span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">,</span> <span class="token number">512</span><span class="token punctuation">,</span> CV_8UC3<span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//创建白色的图片</span>
	<span class="token comment">//在图片上绘制一个圆形，输入圆心、半径</span>
	<span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">256</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">155</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//FILLED 指填充颜色</span>
	<span class="token comment">//在图片上绘制一个蓝色的矩形，输入矩形的左上角点，右下角点，颜色和线条粗细</span>
	<span class="token function">rectangle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">266</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">382</span><span class="token punctuation">,</span> <span class="token number">286</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//在圆形上面画一条线</span>
	<span class="token function">line</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">382</span><span class="token punctuation">,</span> <span class="token number">296</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//text:</span>
	<span class="token function">putText</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">"Elio"</span><span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">262</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FONT_HERSHEY_COMPLEX<span class="token punctuation">,</span><span class="token number">0.75</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="image-20220510194405999" src="https://img-blog.csdnimg.cn/img_convert/784685e7bab89eaae7da813e83f5c1be.png"/></p>
<h2><a id="chapter_5_Warp_Perspective___280"></a>chapter 5 Warp Perspective 透视调整</h2>
<p>在windows自带的绘图软件中打开img，在该软件的下部能够显示出图片相应点的坐标</p>
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span>
using namespace cv<span class="token punctuation">;</span>
using namespace std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//读取图片</span>
	Mat img<span class="token punctuation">,</span>imgdst<span class="token punctuation">;</span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/card.jpg"</span><span class="token punctuation">;</span>
	img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//设置需要变换的区域，src的四个点均为float，使用Point2f 创建</span>
	Point2f src<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span><span class="token number">216</span><span class="token punctuation">,</span><span class="token number">48</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">349</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">254</span><span class="token punctuation">,</span><span class="token number">183</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">416</span><span class="token punctuation">,</span><span class="token number">156</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//添加扑克牌的四个点</span>
    
    <span class="token comment">//设置扑克的宽度和长度</span>
	<span class="token keyword">float</span> width <span class="token operator">=</span> <span class="token function">sqrtf</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span>src<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> src<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">pow</span><span class="token punctuation">(</span>src<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> src<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">float</span> height <span class="token operator">=</span> <span class="token function">sqrtf</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span>src<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">-</span> src<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">pow</span><span class="token punctuation">(</span>src<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">-</span> src<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"宽度: "</span> <span class="token operator">&lt;&lt;</span> width <span class="token operator">&lt;&lt;</span> <span class="token string">"  高度："</span> <span class="token operator">&lt;&lt;</span> height <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
   <span class="token comment">//设置目标图片的显示坐标，注意dst和src的坐标顺序要一一对应</span>
	Point2f dst<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">{<!-- --></span><span class="token number">0.0f</span><span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">,</span><span class="token number">0.0f</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span><span class="token number">0.0f</span><span class="token punctuation">,</span>height<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>width<span class="token punctuation">,</span>height<span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token comment">//进行透视变换</span>
	Mat matrix<span class="token punctuation">;</span>
	matrix <span class="token operator">=</span> <span class="token function">getPerspectiveTransform</span><span class="token punctuation">(</span>src<span class="token punctuation">,</span> dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">warpPerspective</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgdst<span class="token punctuation">,</span> matrix<span class="token punctuation">,</span> <span class="token function">Point</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">,</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//圈出待测区域的四个点</span>
        <span class="token function">circle</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span>src<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>FILLED<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
	
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"image"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"目标图片"</span><span class="token punctuation">,</span> imgdst<span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>效果如下：</p>
<p>原图：（坐标点是自己找的）</p>
<p><img alt="card" src="https://img-blog.csdnimg.cn/img_convert/395e905e7f816eebba3a91216666d006.png"/></p>
<p>效果图：</p>
<p><img alt="image-20220510204711519" src="https://img-blog.csdnimg.cn/img_convert/ab787f6f2748197108f277cdfa5eccfb.png"/></p>
<h2><a id="chapter_6_Color_Detection__338"></a>chapter 6 Color Detection 颜色检测</h2>
<ol><li> <p>需要将图片转换为HSV space因为在HSV 中查找颜色更加容易，<code>cvtColor(img,imgHSV,COLOR_BGR2HSV)</code></p> </li><li> <p>选择需要的颜色<code>inRange(imgHSV,lower,upper,mask)</code> 颜色通常设置成一个范围，例如红色可以选择从深红到浅红，因为阴影光线等会造成颜色的误差。输出是一个mask （Mat）</p> </li><li> <p>颜色都是用 <code>Scalar(B,G,R)</code> 来定义</p> </li><li> <p><strong>如何找到需要的颜色范围？</strong></p> <p>创建一个跟踪栏（track bar），opencv 中具有内置的功能，跟踪栏需要写在while 循环中</p> <p><code>namedWindow("名称"，（大小x,y）)</code></p> </li></ol>
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgcodecs.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;opencv2/imgproc.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;math.h&gt;</span></span>
using namespace cv<span class="token punctuation">;</span>
using namespace std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//读取图片</span>
	string path <span class="token operator">=</span> <span class="token string">"Resources/color.jpg"</span><span class="token punctuation">;</span>
	Mat img<span class="token punctuation">;</span>
	img <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//1. 将图片转成HSV</span>
	Mat imgHSV<span class="token punctuation">;</span>
	<span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> imgHSV<span class="token punctuation">,</span> COLOR_BGR2HSV<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//2. 绘制颜色选择框窗口</span>
	<span class="token keyword">int</span> hmin<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> hmax <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> smin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> smax <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> vmin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> vmax <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">640</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//窗口名称，窗口大小</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Hue Min"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmin<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//179：h的最大范围</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Hue Max"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>hmax<span class="token punctuation">,</span> <span class="token number">179</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Sat Min"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Sat Max"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>smax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Val Min"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmin<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"Val Max"</span><span class="token punctuation">,</span> <span class="token string">"颜色选择"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>vmax<span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	
	Mat mask<span class="token punctuation">;</span>
    <span class="token comment">//绘制mask, 注意waitKey（1） ，将显示的内容放到while循环中，可以实时变化</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>true<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		Scalar <span class="token function">lower</span><span class="token punctuation">(</span>hmin<span class="token punctuation">,</span> smin<span class="token punctuation">,</span> vmin<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置lower值</span>
		Scalar <span class="token function">upper</span><span class="token punctuation">(</span>hmax<span class="token punctuation">,</span> smax<span class="token punctuation">,</span> vmax<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置upper值</span>
		<span class="token function">inRange</span><span class="token punctuation">(</span>imgHSV<span class="token punctuation">,</span> lower<span class="token punctuation">,</span> upper<span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"HSV"</span><span class="token punctuation">,</span> imgHSV<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"mask"</span><span class="token punctuation">,</span> mask<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>显示效果如下：通过拖拽可以识别出不同的颜色。</p>
<p><img alt="image-20220510212540655" src="https://img-blog.csdnimg.cn/img_convert/d6f8f108b5859f0e18f5f73497629c3f.png"/></p>
<p><img alt="image-20220510212617879" src="https://img-blog.csdnimg.cn/img_convert/45edc59e7f4c50b5b5f9fdcb099c8314.png"/></p>
<h2><a id="Chapter_7__ShapesContour_Detection_412"></a>Chapter 7 - Shapes/Contour Detection形状/轮廓检测</h2>
<h2><a id="Chapter_8__Face_Detection__418"></a>Chapter 8 - Face Detection 人脸检测</h2>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>