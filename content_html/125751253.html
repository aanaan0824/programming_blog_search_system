<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/afa29efdcb734abea52373bfea14c487.jpeg#pic_center"/></p>
<blockquote>
<p>🎉作者简介:👓<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          博
         
         
          主
         
         
          在
         
         
          读
         
         
          机
         
         
          器
         
         
          人
         
         
          研
         
         
          究
         
         
          生
         
         
          ，
         
         
          目
         
         
          前
         
         
          研
         
         
          一
         
         
          。
         
         
          对
         
         
          计
         
         
          算
         
         
          机
         
         
          后
         
         
          端
         
         
          感
         
         
          兴
         
         
          趣
         
         
          ，
         
         
          喜
         
         
          欢
         
         
          c
         
         
          +
         
         
          +
         
         
          ,
         
         
          g
         
         
          o
         
         
          ,
         
         
          p
         
         
          y
         
         
          t
         
         
          h
         
         
          o
         
         
          n
         
         
          ,
         
         
          目
         
         
          前
         
         
          熟
         
         
          悉
         
         
          c
         
         
          +
         
         
          +
         
         
          ，
         
         
          g
         
         
          o
         
         
          语
         
         
          言
         
         
          ，
         
         
          数
         
         
          据
         
         
          库
         
         
          ，
         
         
          网
         
         
          络
         
         
          编
         
         
          程
         
         
          ，
         
         
          了
         
         
          解
         
         
          分
         
         
          布
         
         
          式
         
         
          等
         
         
          相
         
         
          关
         
         
          内
         
         
          容
         
        
       
       
        \textcolor{orange}{博主在读机器人研究生，目前研一。对计算机后端感兴趣，喜欢c++,go,python,目前熟悉c++，go语言，数据库，网络编程，了解分布式等相关内容}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord cjk_fallback" style="color: orange;">博</span><span class="mord cjk_fallback" style="color: orange;">主</span><span class="mord cjk_fallback" style="color: orange;">在</span><span class="mord cjk_fallback" style="color: orange;">读</span><span class="mord cjk_fallback" style="color: orange;">机</span><span class="mord cjk_fallback" style="color: orange;">器</span><span class="mord cjk_fallback" style="color: orange;">人</span><span class="mord cjk_fallback" style="color: orange;">研</span><span class="mord cjk_fallback" style="color: orange;">究</span><span class="mord cjk_fallback" style="color: orange;">生</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord cjk_fallback" style="color: orange;">目</span><span class="mord cjk_fallback" style="color: orange;">前</span><span class="mord cjk_fallback" style="color: orange;">研</span><span class="mord cjk_fallback" style="color: orange;">一</span><span class="mord cjk_fallback" style="color: orange;">。</span><span class="mord cjk_fallback" style="color: orange;">对</span><span class="mord cjk_fallback" style="color: orange;">计</span><span class="mord cjk_fallback" style="color: orange;">算</span><span class="mord cjk_fallback" style="color: orange;">机</span><span class="mord cjk_fallback" style="color: orange;">后</span><span class="mord cjk_fallback" style="color: orange;">端</span><span class="mord cjk_fallback" style="color: orange;">感</span><span class="mord cjk_fallback" style="color: orange;">兴</span><span class="mord cjk_fallback" style="color: orange;">趣</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord cjk_fallback" style="color: orange;">喜</span><span class="mord cjk_fallback" style="color: orange;">欢</span><span class="mord mathdefault" style="color: orange;">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin" style="color: orange;">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord" style="color: orange;">+</span><span class="mpunct" style="color: orange;">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em; color: orange;">g</span><span class="mord mathdefault" style="color: orange;">o</span><span class="mpunct" style="color: orange;">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="color: orange;">p</span><span class="mord mathdefault" style="margin-right: 0.03588em; color: orange;">y</span><span class="mord mathdefault" style="color: orange;">t</span><span class="mord mathdefault" style="color: orange;">h</span><span class="mord mathdefault" style="color: orange;">o</span><span class="mord mathdefault" style="color: orange;">n</span><span class="mpunct" style="color: orange;">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord cjk_fallback" style="color: orange;">目</span><span class="mord cjk_fallback" style="color: orange;">前</span><span class="mord cjk_fallback" style="color: orange;">熟</span><span class="mord cjk_fallback" style="color: orange;">悉</span><span class="mord mathdefault" style="color: orange;">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin" style="color: orange;">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.19444em;"></span><span class="mord" style="color: orange;">+</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord mathdefault" style="margin-right: 0.03588em; color: orange;">g</span><span class="mord mathdefault" style="color: orange;">o</span><span class="mord cjk_fallback" style="color: orange;">语</span><span class="mord cjk_fallback" style="color: orange;">言</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord cjk_fallback" style="color: orange;">数</span><span class="mord cjk_fallback" style="color: orange;">据</span><span class="mord cjk_fallback" style="color: orange;">库</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord cjk_fallback" style="color: orange;">网</span><span class="mord cjk_fallback" style="color: orange;">络</span><span class="mord cjk_fallback" style="color: orange;">编</span><span class="mord cjk_fallback" style="color: orange;">程</span><span class="mord cjk_fallback" style="color: orange;">，</span><span class="mord cjk_fallback" style="color: orange;">了</span><span class="mord cjk_fallback" style="color: orange;">解</span><span class="mord cjk_fallback" style="color: orange;">分</span><span class="mord cjk_fallback" style="color: orange;">布</span><span class="mord cjk_fallback" style="color: orange;">式</span><span class="mord cjk_fallback" style="color: orange;">等</span><span class="mord cjk_fallback" style="color: orange;">相</span><span class="mord cjk_fallback" style="color: orange;">关</span><span class="mord cjk_fallback" style="color: orange;">内</span><span class="mord cjk_fallback" style="color: orange;">容</span></span></span></span></span><br/> 📃<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          个
         
         
          人
         
         
          主
         
         
          页
         
         
          ：
         
        
       
       
        \textcolor{gray}{个人主页：}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0em; vertical-align: 0em;"></span><span class="mord cjk_fallback" style="color: gray;">个</span><span class="mord cjk_fallback" style="color: gray;">人</span><span class="mord cjk_fallback" style="color: gray;">主</span><span class="mord cjk_fallback" style="color: gray;">页</span><span class="mord cjk_fallback" style="color: gray;">：</span></span></span></span></span> <a href="https://blog.csdn.net/weixin_45043334?spm=1011.2266.3001.5343">小呆鸟_coding</a><br/> 🔎<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          支
         
         
          持
         
         
          :
         
        
       
       
        \textcolor{gray}{支持:}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord cjk_fallback" style="color: gray;">支</span><span class="mord cjk_fallback" style="color: gray;">持</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel" style="color: gray;">:</span></span></span></span></span><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          如
         
         
          果
         
         
          觉
         
         
          得
         
         
          博
         
         
          主
         
         
          的
         
         
          文
         
         
          章
         
         
          还
         
         
          不
         
         
          错
         
         
          或
         
         
          者
         
         
          您
         
         
          用
         
         
          得
         
         
          到
         
         
          的
         
         
          话
         
         
          ，
         
         
          可
         
         
          以
         
         
          免
         
         
          费
         
         
          的
         
         
          关
         
         
          注
         
         
          一
         
         
          下
         
         
          博
         
         
          主
         
         
          ，
         
         
          如
         
         
          果
         
         
          三
         
         
          连
         
         
          收
         
         
          藏
         
         
          支
         
         
          持
         
         
          就
         
         
          更
         
         
          好
         
         
          啦
         
        
       
       
        \textcolor{green}{如果觉得博主的文章还不错或者您用得到的话，可以免费的关注一下博主，如果三连收藏支持就更好啦}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0em; vertical-align: 0em;"></span><span class="mord cjk_fallback" style="color: green;">如</span><span class="mord cjk_fallback" style="color: green;">果</span><span class="mord cjk_fallback" style="color: green;">觉</span><span class="mord cjk_fallback" style="color: green;">得</span><span class="mord cjk_fallback" style="color: green;">博</span><span class="mord cjk_fallback" style="color: green;">主</span><span class="mord cjk_fallback" style="color: green;">的</span><span class="mord cjk_fallback" style="color: green;">文</span><span class="mord cjk_fallback" style="color: green;">章</span><span class="mord cjk_fallback" style="color: green;">还</span><span class="mord cjk_fallback" style="color: green;">不</span><span class="mord cjk_fallback" style="color: green;">错</span><span class="mord cjk_fallback" style="color: green;">或</span><span class="mord cjk_fallback" style="color: green;">者</span><span class="mord cjk_fallback" style="color: green;">您</span><span class="mord cjk_fallback" style="color: green;">用</span><span class="mord cjk_fallback" style="color: green;">得</span><span class="mord cjk_fallback" style="color: green;">到</span><span class="mord cjk_fallback" style="color: green;">的</span><span class="mord cjk_fallback" style="color: green;">话</span><span class="mord cjk_fallback" style="color: green;">，</span><span class="mord cjk_fallback" style="color: green;">可</span><span class="mord cjk_fallback" style="color: green;">以</span><span class="mord cjk_fallback" style="color: green;">免</span><span class="mord cjk_fallback" style="color: green;">费</span><span class="mord cjk_fallback" style="color: green;">的</span><span class="mord cjk_fallback" style="color: green;">关</span><span class="mord cjk_fallback" style="color: green;">注</span><span class="mord cjk_fallback" style="color: green;">一</span><span class="mord cjk_fallback" style="color: green;">下</span><span class="mord cjk_fallback" style="color: green;">博</span><span class="mord cjk_fallback" style="color: green;">主</span><span class="mord cjk_fallback" style="color: green;">，</span><span class="mord cjk_fallback" style="color: green;">如</span><span class="mord cjk_fallback" style="color: green;">果</span><span class="mord cjk_fallback" style="color: green;">三</span><span class="mord cjk_fallback" style="color: green;">连</span><span class="mord cjk_fallback" style="color: green;">收</span><span class="mord cjk_fallback" style="color: green;">藏</span><span class="mord cjk_fallback" style="color: green;">支</span><span class="mord cjk_fallback" style="color: green;">持</span><span class="mord cjk_fallback" style="color: green;">就</span><span class="mord cjk_fallback" style="color: green;">更</span><span class="mord cjk_fallback" style="color: green;">好</span><span class="mord cjk_fallback" style="color: green;">啦</span></span></span></span></span>👍<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          就
         
         
          是
         
         
          给
         
         
          予
         
         
          我
         
         
          最
         
         
          大
         
         
          的
         
         
          支
         
         
          持
         
         
          ！
         
        
       
       
        \textcolor{green}{就是给予我最大的支持！}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0em; vertical-align: 0em;"></span><span class="mord cjk_fallback" style="color: green;">就</span><span class="mord cjk_fallback" style="color: green;">是</span><span class="mord cjk_fallback" style="color: green;">给</span><span class="mord cjk_fallback" style="color: green;">予</span><span class="mord cjk_fallback" style="color: green;">我</span><span class="mord cjk_fallback" style="color: green;">最</span><span class="mord cjk_fallback" style="color: green;">大</span><span class="mord cjk_fallback" style="color: green;">的</span><span class="mord cjk_fallback" style="color: green;">支</span><span class="mord cjk_fallback" style="color: green;">持</span><span class="mord cjk_fallback" style="color: green;">！</span></span></span></span></span>🎁<br/> 💛本文摘要💛</p>
<table><tbody><tr><td bgcolor="Pink">本专栏主要是对c++ primer这本圣经的总结，以及每章的相关笔记。目前正在复习这本书。同时希望能够帮助大家一起，学完这本书。 本文主要讲解第6章 函数 </td></tr></tbody></table>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><ul><li><a href="#61__15">🎯6.1 函数基础</a></li><li><ul><li><a href="#611__38">🎨6.1.1 局部对象</a></li><li><a href="#612__52">🎨6.1.2 函数声明</a></li><li><a href="#613__58">🎨6.1.3 分离式编译</a></li></ul>
</li><li><a href="#62__61">🎯6.2 参数传递</a></li><li><ul><li><a href="#621__66">🎨6.2.1 传值参数</a></li><li><a href="#622___71">🎨6.2.2 传引用参数</a></li><li><a href="#623_const__94">🎨6.2.3 const 形参和实参</a></li><li><a href="#624__137">🎨6.2.4 数组形参</a></li><li><a href="#625_main_168">🎨6.2.5 main:处理命令行选项</a></li><li><a href="#626__173">🎨6.2.6 含有可变形参的函数</a></li></ul>
</li><li><a href="#63__return__219">🎯6.3 返回类型和 return 语句</a></li><li><ul><li><a href="#631__226">🎨6.3.1 无返回值函数</a></li><li><a href="#632__230">🎨6.3.2 有返回值函数</a></li><li><a href="#633__290">🎨6.3.3 返回数组指针</a></li></ul>
</li><li><a href="#64__332">🎯6.4 函数的重载</a></li><li><ul><li><a href="#641__378">6.4.1 重载与作用域</a></li></ul>
</li><li><a href="#65__382">🎯6.5 特殊用途语言特性</a></li><li><ul><li><a href="#651__383">🎨6.5.1 默认实参</a></li><li><a href="#652_constexpr_397">🎨6.5.2 内联函数和constexpr函数</a></li><li><ul><li><a href="#constexpr_408">🎨constexpr函数</a></li></ul>
</li></ul>
</li><li><a href="#66__415">🎯6.6 函数匹配</a></li><li><ul><li><a href="#661__424">🎨6.6.1 实参类型转换</a></li></ul>
</li><li><a href="#67__438">🎯6.7 函数指针</a></li></ul>
</li></ul>
</div>
<p></p>
</blockquote>
<ul><li>本章主要介绍函数传参及函数返回结果、函数重载、重载函数应该选择哪个进行调用。</li></ul>
<h2><a id="61__15"></a>🎯6.1 函数基础</h2>
<ul><li>通过调用<code>运算符 () </code>来执行函数。</li></ul>
<p><strong>函数调用完成俩项工作：</strong></p>
<ul><li><code>用实参初始化函数对应的形参。</code></li><li><code>将控制器转移给被调用函数。</code></li></ul>
<p><strong>此时主调函数被中断，被调函数开始执行。</strong></p>
<p><strong>函数执行的第一步：隐式地定义并初始化它的形参。实参是形参的初始值，第一个实参初始化第一个形参。</strong></p>
<p><strong>return 语句完成俩项工作:</strong></p>
<ul><li><code>返回return 语句中的值</code></li><li><code>将控制权从被调函数转移回主调函数</code></li></ul>
<p><strong>形参</strong></p>
<ul><li>实参是形参的初始值。</li><li>实参的类型与形参类型匹配，或者可以转换成形参类型。</li><li>可以没有形参名，但是函数无法使用未命名的形参，即使形参未命名，也要传入实参。</li></ul>
<p><strong>返回类型</strong></p>
<ul><li>函数返回类型不能是<code>数组类型</code>或者<code>函数类型</code>.</li><li>但是可以是<code>数组指针</code>或<code>函数指针</code></li></ul>
<h3><a id="611__38"></a>🎨6.1.1 局部对象</h3>
<ul><li><code>名字有作用域，对象有生命周期</code></li><li>形参和函数体<code>内部定义</code>的变量统称为<code>局部变量</code></li></ul>
<p><strong>形参属于自动对象</strong>：</p>
<ul><li>函数开始时为形参<code>申请存储空间</code>，因为形参定义在函数体作用域之内，<code>函数终止，形参被销毁</code></li><li>在所有函数外定义的对象存在于程序的整个执行过程中</li></ul>
<p><strong>局部静态变量</strong></p>
<ul><li>在程序的执行路径第一次经过对象定义语句时初始化，直到程序终止被销毁。</li><li>只存在于<code>块执行期间的对象</code>。当块的执行结束后，它的值就变成未定义的了。</li><li>如果想要局部变量声明周期在<code>整个程序结束</code>，可以将局部变量定义成<code>static类型</code></li><li>如果局部静态变量没有显式的初始值，将执行值初始化。</li></ul>
<h3><a id="612__52"></a>🎨6.1.2 函数声明</h3>
<ul><li>函数的声明和定义唯一的区别是<code>声明无需函数体，用一个分号替代。</code></li><li>函数声明主要用于<code>描述函数的接口</code>，也称函数原型。</li><li><code>函数的声明无需形参的名字</code>（因为声明不包含函数体）。</li><li>函数的三要素：<code>返回类型</code>、<code>函数名</code>、<code>形参类型</code>。</li><li>建议在头文件中声明函数，在源文件中定义函数。</li></ul>
<h3><a id="613__58"></a>🎨6.1.3 分离式编译</h3>
<p>分离式编译允许把程序分割到几个文件中，每个文件独立编译。</p>
<h2><a id="62__61"></a>🎯6.2 参数传递</h2>
<ul><li><strong>引用传递</strong>：又称传引用调用，指形参是<code>引用类型</code>，引用形参是它对应的实参的别名。</li><li><strong>值传递</strong>：又称传值调用，指实参的值是通过<code>拷贝</code>传递给形参。</li><li>形参初始化的机理和变量初始化一样。</li></ul>
<h3><a id="621__66"></a>🎨6.2.1 传值参数</h3>
<ul><li>当初始化一个非引用类型的变量时，初始值被<code>拷贝</code>给变量。</li><li>函数对形参做的所有操作都<code>不会影响实参</code>。</li><li><strong>指针形参</strong>：C++建议使用<code>引用类型的形参代替指针</code>。</li></ul>
<h3><a id="622___71"></a>🎨6.2.2 传引用参数</h3>
<ul><li>通过使用引用形参，允许函数改变一个或多个实参的值。</li><li>通过引用可以避免拷贝(如果对象太长，可以使用引用来避免拷贝，拷贝太浪费内存了)</li><li><code>如果无需改变引用形参的值，最好将其声明为常量引用</code>。</li><li>引用形参直接关联到绑定的对象，而非对象的副本。</li><li><code>使用引用形参可以用于返回额外的信息。</code></li></ul>
<pre><code class="prism language-c"><span class="token comment">//既返回位置也返回次数，此时可以给函数传入一个额外的引用实参，令其保存字符出现的次数</span>
string<span class="token operator">::</span>size_type <span class="token function">find_char</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">char</span> c<span class="token punctuation">,</span> string<span class="token operator">::</span>size_type <span class="token operator">&amp;</span>occurs<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">auto</span> size <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	occurs <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>	
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> ret <span class="token operator">=</span> i<span class="token punctuation">;</span>
			<span class="token operator">++</span> occurs<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span>            <span class="token comment">//出现次数通过occurs隐式地返回</span>
<span class="token punctuation">}</span>
</code></pre>
<h3><a id="623_const__94"></a>🎨6.2.3 const 形参和实参</h3>
<ul><li><code>实参初始化形参时以及进行拷贝时，都会忽略掉顶层const</code>,因此导致<code>void func (const int i)</code>;调用既可以传入<code>const int</code>也可以传入<code>int</code></li></ul>
<p><strong>加深理解</strong>：引用是没有顶层 const 的，因此顶层 const 适用于指针及其他类型，对于传值来说传递的是实参的副本，无论如何都不会改变实参，因此形参加不加顶层 const 都是一样的。</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">fcn</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> i <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">fcn</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>         <span class="token comment">//错误:重复定义了fcn(int)</span>
</code></pre>
<p><strong>指针或引用形参与const</strong></p>
<ul><li>使用非常量初始化一个底层const对象，但是反过来不行。</li><li>普通引用必须用同类型的对象初始化。</li></ul>
<p><strong>加深理解</strong>：不能把普通引用绑定到const 对象上，不能把普通的引用绑定在字面值上。</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">reset</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> 
<span class="token function">reset</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//错误：不能把普通引用绑定到const 对象上</span>
<span class="token function">reset</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//错误：不能把普通的引用绑定在字面值上</span>
</code></pre>
<p><strong>尽量使用常量引用</strong></p>
<ul><li><code>尽量使用常量引用做形参</code>（注意常量引用的 const 是底层 const。）</li><li>可以用字面值初始化常量引用</li></ul>
<p><strong>使用常量引用的优点</strong>：</p>
<ol><li><code>想要调用引用版本的reset，只能使用int 类型对象。而不能使用字面值、求值结果为int 的表达式、需要转换的对象或者const int 类型的对象。</code></li><li>想要调用指针班的reset 只能使用 int *</li></ol>
<p><code>不能把 const 对象、字面值或需要类型转换的对象传递给普通的引用形参。但是可以传递给常量引用形参。</code></p>
<p><strong>注意</strong>: 如果函数 a 把形参定义为了常量引用，函数 b 形参是普通引用，那么不能在 a 中使用 b 调用该常量引用形参。</p>
<pre><code class="prism language-c">bool  <span class="token function">is_sentence</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//如果在s的末尾有且只有一个句号，则s是一个句子</span>
	string <span class="token operator">::</span> size_type ctr <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">find_char</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token char">'.'</span><span class="token punctuation">,</span> ctr<span class="token punctuation">)</span> <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> ctr <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

错误因为is_sentence是<span class="token keyword">const</span>对象而find_char是普通对象
</code></pre>
<h3><a id="624__137"></a>🎨6.2.4 数组形参</h3>
<p>数组的两个特殊性质：<code>不允许拷贝数组、使用数组时常会将其转换成指针</code></p>
<ul><li>因为数组不能进行拷贝，所以无法使用值传递的方式使用数组参数。因为数组会被转换成指针，所实际上传递的是指向数组的首元素指针。</li></ul>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//三种声明等价，数字 10 没有什么实际影响</span>

<span class="token keyword">int</span> i<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">printf</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">//正确：&amp;i的类型是int *</span>
<span class="token function">printf</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">//正确：j转换成int * 并指向j[0]</span>
                       <span class="token comment">//传入的是一个数组，那么实参会自动转换成指向数组首元素的指针</span>
</code></pre>
<p><strong>使用数组做形参确保数组访问不越界的方法：</strong></p>
<ul><li>使用一个结束标记指定数组已结束，典型代表为 C 风格字符串</li><li><code>传递指向数组首元素和尾后元素的指针</code></li><li><code>显示传递一个表示数组大小的形参</code></li></ul>
<p><strong>数组引用形参</strong></p>
<ul><li><code>可以定义数组的引用，但是没有引用数组，因为引用不是一个对象。注意数组的大小是构成数组类型的一部分</code></li></ul>
<pre><code class="prism language-c"><span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//错误：arr 是引用的数组</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//正确：array 是包含 10 个整数的整型数组的引用</span>

<span class="token keyword">int</span> <span class="token operator">*</span>arr<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">//指针的数组</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>arr<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">//指向数组的指针</span>
</code></pre>
<h3><a id="625_main_168"></a>🎨6.2.5 main:处理命令行选项</h3>
<ul><li><code>int main(int argc, char *argv[]){...}</code></li><li>第一个形参代表<code>数组中字符串的数量</code>；第二个形参argv是一个数组，<code>它的元素是指向C风格字符串的指针</code>。</li></ul>
<h3><a id="626__173"></a>🎨6.2.6 含有可变形参的函数</h3>
<p>无法预知应该向函数传递几个实参，处理不同数量实参的主要方法有俩种：</p>
<ul><li><code>如果所有实参类型相同，传递一个 initializer_list 类型</code></li><li><code>使用省略符形参，它可以传递可变数量的实参，注意它一般仅用于与 C 函数交互的接口程序</code></li></ul>
<p><strong>initializer_list 形参特点</strong></p>
<ul><li><code>initializer_list</code> 也是一种模板类型，定义在同名的头文件中。</li><li><code>initializer_list</code> 与 vector 容器大致相同，但是它的元素都是<code>常量值</code>。</li><li><code>initializer_list </code>对象<code>只能使用花括号初始化</code>。</li><li>C++ 里的 vector 等各类容器使用列表初始化时本质上都是通过一个采用了 initializer_list 形参的构造函数进行初始化的。</li></ul>
<table><thead><tr><th>操作</th><th>解释</th></tr></thead><tbody><tr><td><code>initializer_list&lt;T&gt; lst;</code></td><td>默认初始化；<code>T</code>类型元素的空列表</td></tr><tr><td><code>initializer_list&lt;T&gt; lst{a,b,c...};</code></td><td><code>lst</code>的元素数量和初始值一样多；<code>lst</code>的元素是对应初始值的副本；列表中的元素是<code>const</code>。</td></tr><tr><td><code>lst2(lst)</code></td><td>拷贝或赋值一个<code>initializer_list</code>对象不会拷贝列表中的元素；拷贝后，原始列表和副本共享元素。</td></tr><tr><td><code>lst2 = lst</code></td><td>同上</td></tr><tr><td><code>lst.size()</code></td><td>列表中的元素数量</td></tr><tr><td><code>lst.begin()</code></td><td>返回指向<code>lst</code>中首元素的指针</td></tr><tr><td><code>lst.end()</code></td><td>返回指向<code>lst</code>中微元素下一位置的指针</td></tr></tbody></table>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">err_msg</span><span class="token punctuation">(</span>ErrCode e<span class="token punctuation">,</span> initializer_list<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> il<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>msg <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> bed <span class="token operator">=</span> il<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> beg <span class="token operator">!=</span> il<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span> beg<span class="token punctuation">)</span>
        cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>beg <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">err_msg</span><span class="token punctuation">(</span><span class="token function">ErrCode</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">"functionX"</span><span class="token punctuation">,</span> "okay<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>如果向 initailizer_list 形参中传递一个值的序列，必须把序列放在花括号里。</p>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>initializer_list<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> il<span class="token punctuation">)</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>省略符形参</strong></p>
<ul><li>省略符形参仅用于 C 和 C++ 通用的类型，大多数类类型的对象传递给省略符形参都无法正确拷贝。</li><li>省略符形参只能出现于形参列表的最后一个位置</li></ul>
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span>parm_list<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2><a id="63__return__219"></a>🎯6.3 返回类型和 return 语句</h2>
<ul><li><code>与参数传递一样，不能返回数组，只能返回指向数组的指针或数组的引用</code></li></ul>
<p><strong>return 俩个作用：</strong></p>
<ul><li>返回 return 语句中的值</li><li>终止当前正在执行的函数，将控制权返回到调用该函数的地方</li></ul>
<h3><a id="631__226"></a>🎨6.3.1 无返回值函数</h3>
<ul><li>没有返回值的 return语句只能用在返回类型是 void的函数中</li><li><code>返回 void的函数不要求非得有 return语句。因为它会在最后一句后面隐式地执行 return。</code></li></ul>
<h3><a id="632__230"></a>🎨6.3.2 有返回值函数</h3>
<ul><li>return语句的返回值的类型<code>必须和函数的返回类型相同</code>，或者能够<code>隐式地转换成函数的返回类型</code>。</li><li><code>在含有 return 语句的循环和条件后面也应该有一条 return 语句</code>。</li><li>返回一个值和初始化一个变量或形参的方式一样，返回的值用于初始化调用点的变量。</li><li><code>不要返回局部对象的引用和指针</code></li></ul>
<p><strong>因为局部对象在函数调用完成后，他所占用的存储空间被释放，此时函数终止意味着局部变量的引用将指向不再有效的内存区域</strong></p>
<pre><code class="prism language-c"><span class="token keyword">const</span> string<span class="token operator">&amp;</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	string s<span class="token punctuation">;</span>
	s <span class="token operator">=</span> <span class="token string">"xiaodainiao"</span>
    <span class="token keyword">return</span> s<span class="token punctuation">;</span>          <span class="token comment">//错误，字符串字面值转换成一个局部临时变量，不能返回局部对象的引用</span>
<span class="token punctuation">}</span>      
</code></pre>
<pre><code class="prism language-c">bool <span class="token function">str_cmp</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>str1<span class="token punctuation">,</span> <span class="token keyword">const</span> string <span class="token operator">&amp;</span>str2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
	   <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">!=</span> str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
	   <span class="token keyword">return</span><span class="token punctuation">;</span>               <span class="token comment">//错误</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> true<span class="token punctuation">;</span>              <span class="token comment">//这个往往会被忽略，在含有 return 语句的循环和条件后面也应该有一条 return 语句</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>引用返回左值</strong></p>
<ul><li><code>返回引用的函数返回的是左值，其他返回类型得到右值</code>。</li><li><code>可以为返回类型是非常量引用的函数的结果赋值</code>。</li></ul>
<pre><code class="prism language-c"><span class="token keyword">char</span> <span class="token operator">&amp;</span><span class="token function">get_val</span><span class="token punctuation">(</span>string <span class="token operator">&amp;</span>str<span class="token punctuation">,</span> string<span class="token operator">::</span>size_type ix<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> str<span class="token punctuation">[</span>ix<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">get_val</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token char">'A'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>列表初始化返回值</strong></p>
<pre><code class="prism language-c">vector<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    string s<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>expected<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 返回一个空 vector 对象</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>expected <span class="token operator">==</span> actual<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token string">"funcitonX"</span><span class="token punctuation">,</span><span class="token string">"okay"</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//返回一个列表初始化的 vector 对象    </span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>main 的返回值</strong></p>
<ul><li>如果结尾没有return，编译器将<code>隐式地插入一条返回0的return语句</code>。</li><li>返回0代表执行成功,返回其它值代表失败。</li><li><code>cstdlib </code>头文件定义了两个预处理变量来表示成功与失败</li></ul>
<pre><code class="prism language-c"><span class="token keyword">return</span> EXIT_FAILURE<span class="token punctuation">;</span><span class="token comment">//失败</span>
<span class="token keyword">return</span> EXIT_SUCCESS<span class="token punctuation">;</span><span class="token comment">//成功</span>
</code></pre>
<h3><a id="633__290"></a>🎨6.3.3 返回数组指针</h3>
<ul><li>函数不能返回数组，但是可以返回数组的指针或引用</li></ul>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token operator">*</span>p<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// 错误，指针的数组，p是一个含有10个指针的数组</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 正确，数组的指针，p是一个指针，指向含有10个整数的数组</span>
<span class="token keyword">int</span> <span class="token operator">&amp;</span>p<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">//错误，引用数组，引用不是对象，没有引用的数组，有数组的引用</span>
<span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 正确，数组引用</span>
</code></pre>
<p><code>int（*function（int i ）[10]）;</code></p>
<ul><li><code>func(int i ) </code>表示调用func函数需要传递一个int 实参</li><li><code>(*func(int i ))</code> 对函数调用的结果执行解引用</li><li><code>(*function(int i )[10])</code>表示解引用结果是一个大小为10的数组</li><li><code>int（*function（int i ）[10]）</code>表示数组中的元素是int 类型</li></ul>
<p><strong>有三种方法简化返回数组指针或引用。</strong></p>
<ul><li><code>使用类型别名</code></li><li><code>使用尾置返回类型</code></li><li><code>使用 decltype</code></li></ul>
<p><strong>使用类型别名</strong></p>
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> arrT<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// arrT 表示含有 10 个整数的数组</span>
using arrT <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//等价声明</span>
arrT<span class="token operator">*</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 函数 func 返回一个指向含有 10 个整数的数组的指针</span>
</code></pre>
<p><strong>使用尾置返回类型</strong></p>
<ul><li>任何函数的定义都可以使用尾置返回，适用于返回类型<code>复杂的函数</code></li></ul>
<pre><code class="prism language-c"><span class="token keyword">auto</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//func接受一个int 类型的实参，返回一个指针，该指针指向含有10个整数的数组</span>
</code></pre>
<p><strong>使用 decltype</strong></p>
<ul><li>如果已知函数返回的指针将指向哪个数组，可以使用 decltype</li></ul>
<pre><code class="prism language-c"><span class="token keyword">int</span> odd<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">decltype</span><span class="token punctuation">(</span>odd<span class="token punctuation">)</span><span class="token operator">*</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个数组指针</span>
</code></pre>
<p><strong>注意 decltype 的结果是一个数组，要想表示func返回指针还必须在函数声明时加一个<code>*</code>号。</strong></p>
<h2><a id="64__332"></a>🎯6.4 函数的重载</h2>
<ul><li>main 函数不能重载</li><li>函数<code>名字相同</code>，但是<code>形参数量</code>和<code>形参类型</code>不同，此时发生重载。</li><li>函数<code>返回值类型不同</code>，不是函数重载</li></ul>
<p><strong>重载和const形参</strong></p>
<ul><li>函数重载<code>无法区分顶层 const 形参和非顶层 const 形参</code>，但是可以区分底层 <code>const 形参与普通形参</code></li></ul>
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//顶层const，无法区分，相当于重复声明</span>

<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> <span class="token keyword">const</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//顶层const，无法区分，相当于重复声明</span>

<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">*</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//底层const，可以区分，一个普通指针，一个常量指针</span>

<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//底层const，可以区分，一个普通引用，一个常量引用</span>
</code></pre>
<p><strong>const_cast</strong></p>
<ul><li>强制类型转化，可以将常量引用转换为非常量引用，也可以将非常量引用转换为常量引用</li><li>当要重载常量引用与非常量引用的版本时，<code>在非常量引用的版本中可以通过 const_cast 将参数和返回值从常量引用转换为非常量引用，以实现对常量引用版本的调用。</code></li></ul>
<pre><code class="prism language-c">string<span class="token operator">&amp;</span> s<span class="token punctuation">;</span>
const_cast <span class="token operator">&lt;</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 将 s 转换为常量引用</span>
const_cast <span class="token operator">&lt;</span>string<span class="token operator">&amp;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 将 s 转换回非常量引用</span>

<span class="token keyword">const</span> string <span class="token operator">&amp;</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s1<span class="token punctuation">,</span> <span class="token keyword">const</span> string <span class="token operator">&amp;</span>s2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> s1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> s2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

 string <span class="token operator">&amp;</span><span class="token function">str</span><span class="token punctuation">(</span> string <span class="token operator">&amp;</span>s1<span class="token punctuation">,</span>  string <span class="token operator">&amp;</span>s2<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
 	<span class="token keyword">auto</span> <span class="token operator">&amp;</span>r <span class="token operator">=</span> <span class="token function">str</span><span class="token punctuation">(</span>const_cast<span class="token operator">&lt;</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">,</span> const_cast<span class="token operator">&lt;</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">)</span>
 	<span class="token keyword">return</span> const_cast<span class="token operator">&lt;</span>string<span class="token operator">&amp;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
</code></pre>
<ol><li>将实参转换为const的引用，然后调用str的const版本。</li><li>当返回时，因为返回类型是非常量引用，所以需要再次转换一下。</li></ol>
<h3><a id="641__378"></a>6.4.1 重载与作用域</h3>
<ul><li>不同的重载版本要定义在同一作用域中（一般都是全局）</li></ul>
<h2><a id="65__382"></a>🎯6.5 特殊用途语言特性</h2>
<h3><a id="651__383"></a>🎨6.5.1 默认实参</h3>
<ul><li>一旦某个形参被赋予了默认值，那么它之后的形参都必须要有默认值。(反过来就是设置默认值的形参必须都放在没有默认值的形参后面。)</li></ul>
<pre><code class="prism language-c">string <span class="token function">screen</span><span class="token punctuation">(</span>sz ht <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">,</span> sz wid <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token keyword">char</span> backgrnd <span class="token operator">=</span> <span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul><li><code>如果想使用默认值实参时，只要在调用该函数的时候省略该实参就可以（默认实参负责填补函数调用时缺少的尾部实参。）</code></li><li><code>局部变量不能作为默认实参，全局变量和字面值都可以。</code></li><li>如果函数有默认实参，则调用函数时传入的实参数量可能少于它实际使用的实参数量</li><li><code>通常应该在函数声明中指定默认实参，并将该声明放在合适的头文件中</code>。</li></ul>
<pre><code class="prism language-c">string <span class="token function">screen</span><span class="token punctuation">(</span>sz<span class="token punctuation">,</span> sz<span class="token punctuation">,</span> <span class="token keyword">char</span> <span class="token operator">=</span> <span class="token char">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
string <span class="token function">screen</span><span class="token punctuation">(</span>sz<span class="token punctuation">,</span> sz <span class="token punctuation">,</span><span class="token keyword">char</span> <span class="token operator">=</span> <span class="token char">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//错误重复声明，不能修改已经存在的默认值</span>
</code></pre>
<h3><a id="652_constexpr_397"></a>🎨6.5.2 内联函数和constexpr函数</h3>
<ul><li><code>内联函数可避免函数调用时的开销</code></li><li>内联函数适合于规模小、流程直接、频繁调用的函数。</li></ul>
<p><strong>使用函数的缺点</strong></p>
<ul><li><code>调用函数更慢</code>,调用前要先保存寄存器（保护现场），并在返回时恢复：可能需要拷贝实参；程序转向一个新的位置继续执行。</li></ul>
<p><strong>在函数前用 inline 声明一下即表明是内联函数</strong></p>
<h4><a id="constexpr_408"></a>🎨constexpr函数</h4>
<ul><li> <p><code>只能用于常量表达式的函数。</code>但是 constexpr 函数不一定返回常量表达式。</p> </li><li> <p>constexpr int new_sz() {return 42;}</p> </li><li> <p><code>constexpr 函数的返回类型及所有的形参类型都必须是字面值类型，函数体中必须有且只有一条 return 语句</code></p> </li><li> <p>constexpr函数应该在头文件中定义。</p> </li><li> <p>应该把内联函数和constexpr函数的定义放到头文件里。</p> </li></ul>
<h2><a id="66__415"></a>🎯6.6 函数匹配</h2>
<ul><li>重载函数匹配的三个步骤：<code>1.候选函数；2.可行函数；3.寻找最佳匹配。</code></li><li><strong>候选函数</strong>：选定本次调用对应的重载函数集，集合中的函数称为候选函数（candidate function）。</li><li><strong>可行函数</strong>：考察本次调用提供的实参，选出可以被这组实参调用的函数，新选出的函数称为可行函数</li><li><strong>寻找最佳匹配</strong>：基本思想：实参类型和形参类型越接近，它们匹配地越好。</li></ul>
<p><strong>调用重载函数应尽量避免强制类型转换。</strong></p>
<h3><a id="661__424"></a>🎨6.6.1 实参类型转换</h3>
<p><strong>实参类型到形参类型的转换分为几个等级，具体排序如下：</strong></p>
<ol><li><strong>精确匹配</strong><br/> 实参类型和形参类型相同<br/> 从数组类型或函数类型转化为对应的指针类型<br/> 向实参中添加顶层const或删除顶层const</li><li><strong>通过const转换实现的匹配。</strong></li><li><strong>通过类型提升实现的匹配</strong></li><li><strong>通过算术类型转换或指针转换实现的匹配</strong></li><li><strong>通过类类型转换实现的匹配</strong></li></ol>
<p>注意：所有算数类型转换的级别都一样。</p>
<h2><a id="67__438"></a>🎯6.7 函数指针</h2>
<ul><li>函数指针指向的是函数而非对象</li><li><code>一种函数指针只能指向一种特定的函数类型：</code></li></ul>
<pre><code class="prism language-c">bool <span class="token function">Compare</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 此函数的类型是 bool(const string&amp;, const string&amp;);</span>
<span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 声明了一个指向 bool(const string&amp;, const string&amp;) 类型函数的指针，注意括号不能少；</span>
pf <span class="token operator">=</span> Compare<span class="token punctuation">;</span>                                <span class="token comment">// 给指针赋值，指向 Compare 函数</span>
pf <span class="token operator">=</span> <span class="token operator">&amp;</span>Compare<span class="token punctuation">;</span>                               <span class="token comment">// 这两种赋值语句完全等价</span>
bool b1 <span class="token operator">=</span> <span class="token function">pf</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"goodbye"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// 可以直接使用指针替代函数名调用函数。</span>
bool b2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"goodbye"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 与上面的等价</span>
bool b3 <span class="token operator">=</span> <span class="token function">Compare</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token string">"goodbye"</span><span class="token punctuation">)</span>         <span class="token comment">//与上面等价</span>
</code></pre>
<ul><li><code>当把函数名作为一个值使用时，函数自动地转换成指针</code>。</li><li>不同函数类型的指针间不能相互转换。函数指针也可以指向 <code>nullptr 或 0</code>。</li><li>对于重载函数，指针类型必须与重载函数中的某一个精确比配。</li></ul>
<pre><code class="prism language-c">string<span class="token operator">::</span>size_type <span class="token function">str</span><span class="token punctuation">(</span>cosnt string<span class="token operator">&amp;</span><span class="token punctuation">,</span><span class="token keyword">const</span> strint<span class="token operator">&amp;</span><span class="token punctuation">)</span>
bool <span class="token function">str1</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span>
pf <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
pf <span class="token operator">=</span> str<span class="token punctuation">;</span>      <span class="token comment">//错误，返回类型不匹配</span>
pf <span class="token operator">=</span> str1<span class="token punctuation">;</span>     <span class="token comment">//错误，形参类型不匹配</span>
pf <span class="token operator">=</span> Compare<span class="token punctuation">;</span>  <span class="token comment">//正确，函数和指针类型精确匹配</span>
</code></pre>
<p><strong>函数指针形参</strong></p>
<ul><li><code>函数不能作形参，但是函数指针可以做形参，之后在调用时可以直接传入函数名作实参</code></li><li><code>函数名做形参也会自动的转换为指针。</code></li></ul>
<p><strong>类似于数组不能做形参，但是数组指针可以做形参</strong></p>
<pre><code class="prism language-c">bool <span class="token function">GetBigger</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> s1<span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span> s2<span class="token punctuation">,</span> <span class="token function">bool</span><span class="token punctuation">(</span><span class="token operator">*</span>comp<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> string<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 函数指针做形参</span>
<span class="token function">GetBigger</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> Compare<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 实参直接传入函数名 Compare </span>
</code></pre>
<p><strong>返回函数指针</strong></p>
<ul><li><code>不能返回一个函数，但是可以返回函数指针（注意这时函数名不会自动转换为函数指针）</code>。</li></ul>
<p><strong>类似于返回数组，数组不能返回，只能返回指向数组的指针</strong></p>
<ul><li>声明一个返回函数指针的函数有几种方法，其中直接声明最麻烦，使用尾置类型和 decltype 更简单一些，但是最好使用类型别名。</li></ul>
<pre><code class="prism language-c"><span class="token char">'直接声明'</span>
<span class="token function">bool</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// f1 是一个函数，函数的形参列表为 int，返回类型为函数指针。这个函数指针的类型为 bool (*)(double)，即形参为 double，返回类型为 bool。</span>
<span class="token char">'使用尾置类型'</span>
<span class="token keyword">auto</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">bool</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token char">'使用 decltype'</span>
bool <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">decltype</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token operator">*</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     
<span class="token char">'使用类型别名'</span>
using PF <span class="token operator">=</span> <span class="token function">bool</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PF <span class="token function">f1</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>和数组的类似，可以进行对比</strong></p>
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">int</span> arrT<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// arrT 表示含有 10 个整数的数组</span>
using arrT <span class="token operator">=</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//等价声明</span>
arrT<span class="token operator">*</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 函数 func 返回一个指向含有 10 个整数的数组的指针</span>

<span class="token keyword">auto</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//func接受一个int 类型的实参，返回一个指针，该指针指向含有10个整数的数组</span>

<span class="token keyword">int</span> odd<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">decltype</span><span class="token punctuation">(</span>odd<span class="token punctuation">)</span><span class="token operator">*</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个数组指针</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>