<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h2><a id="CC_0"></a>大二C#实现酒店管理系统（C端展示、前台操作、登记入住、入住管理、职位管理、公告系统等）</h2>
<blockquote>
<p>前言项目技术介绍<br/> 1、开发工具：VS2022<br/> 2、数据库：SqlServer<br/> 3、前端+请求：HTML5+jQuery<br/> 4、第三方框架：Layui、视图可视化插件</p>
<p>项目声明：<br/> 该项目是大二老师布置的一个作业，我是根据老师给定的项目内容定向到酒店，从而在网上查找酒店所就有的基本的功能结合自己的想法来完成的，下面是我的一些项目展示，如果需要源码的可以在我的博客资源中下载（带项目技术指导，欢迎问答）</p>
</blockquote>
<h3><a id="_11"></a>项目总体脑图介绍</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b69510ba644d4de0aeee766622bd6baa.png"/></p>
<h3><a id="1C_14"></a>1、C端展示</h3>
<blockquote>
<p>页面分析：<br/> 总体页面采用简介的布局方式，突出房间的可预订信息和房间价格，在右上角有一个头像信息，点击用户可以对自己的账号信息进行一个更改和房间预定的订单记录</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/be2f3e761f9d4cf29ae3f4281efd7dc7.png"/><br/> 在线预订展示</p>
<blockquote>
<p>具体流程思路分析：<br/> 当用户第一次进入官网可预订房间是不需要登录的，当点击订单提交，先进行一个登录登录，如果有登录就会根据填写的预订信息进行房间的预订，如果没有登录会先跳转到登录页面完成C端登录才可以进行一个房间预订</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7ef0c1b20992486cac9807e33e167b03.png"/><br/> 部分代码展示</p>
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">region</span> 1.2、用户登录逻辑</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// 1.2、用户登录逻辑</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token comment">/// &lt;param name="user"&gt;接收登录数据的视图&lt;/param&gt;</span>
        <span class="token comment">/// &lt;returns&gt;&lt;/returns&gt;</span>
        <span class="token keyword">public</span> <span class="token class-name">ActionResult</span> <span class="token function">UserEntrance</span><span class="token punctuation">(</span><span class="token class-name">S_User</span> user<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ReturnJson</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReturnJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 判断登录的信息身是否为空或不存在</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>Telephone<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>UserPaw<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">try</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 将页面传递进来的数据进行数据库查询</span>
                        <span class="token class-name">S_User</span> listUser <span class="token operator">=</span> myModels<span class="token punctuation">.</span>S_User<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>o <span class="token operator">=</span><span class="token operator">&gt;</span> o<span class="token punctuation">.</span>Telephone <span class="token operator">==</span> user<span class="token punctuation">.</span>Telephone<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 根据查询出来的数据进行登录</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>listUser<span class="token punctuation">.</span>UserPaw <span class="token operator">==</span> user<span class="token punctuation">.</span>UserPaw<span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 判断账号的状态信息</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>listUser<span class="token punctuation">.</span>UserStatus <span class="token operator">==</span> <span class="token keyword">true</span><span class="token punctuation">)</span>
                            <span class="token punctuation">{<!-- --></span>
                                msg<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
                                <span class="token comment">// 保存数据到Session中</span>
                                Session<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>
                                Session<span class="token punctuation">[</span><span class="token string">"UserID"</span><span class="token punctuation">]</span> <span class="token operator">=</span> listUser<span class="token punctuation">.</span>UserID<span class="token punctuation">;</span>
                                Session<span class="token punctuation">[</span><span class="token string">"UserName"</span><span class="token punctuation">]</span> <span class="token operator">=</span> listUser<span class="token punctuation">.</span>UserName<span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                            <span class="token keyword">else</span>
                            <span class="token punctuation">{<!-- --></span>
                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"您的账号状态信息有误，可能已封号"</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span>
                        <span class="token punctuation">{<!-- --></span>
                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"您输入的密码有误，请检查"</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"该手机号还未注册，请注册"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{<!-- --></span>
                    msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请输入完整的登录信息"</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"登录数据异常"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
</code></pre>
<h3><a id="2B_90"></a>2、B端管理页面</h3>
<blockquote>
<p>B端登录分析：<br/> 带有科技感的背景，主要登录位置居中显示，通过员工的唯一员工号和密码进行一个B端操作的登录，验证码是防止非人机登录，区分大小写</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/36e43590dc6b4af8a77a51e2183ba2bf.png"/><br/> 基础代码演示</p>
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">region</span> 2.1、员工登录逻辑</span>
        <span class="token keyword">public</span> <span class="token class-name">ActionResult</span> <span class="token function">StaffRedirect</span><span class="token punctuation">(</span><span class="token class-name">S_Staff</span> staff<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ReturnJson</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReturnJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 事务开启</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">TransactionScope</span> scope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 判断登录的数据是否为空</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>staff<span class="token punctuation">.</span>JobCode<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> staff<span class="token punctuation">.</span>JobCode<span class="token punctuation">.</span>Length <span class="token operator">==</span> <span class="token number">8</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>staff<span class="token punctuation">.</span>StaffPaw<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 根据工号查询员工信息</span>
                    <span class="token class-name">S_Staff</span> listStaff <span class="token operator">=</span> myModels<span class="token punctuation">.</span>S_Staff<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=</span><span class="token operator">&gt;</span> m<span class="token punctuation">.</span>JobCode <span class="token operator">==</span> staff<span class="token punctuation">.</span>JobCode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 判断账号是否正确</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>listStaff <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"工号信息有误，请检查"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 判断员工的密码与状态是否正确</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>listStaff<span class="token punctuation">.</span>StaffPaw <span class="token operator">==</span> staff<span class="token punctuation">.</span>StaffPaw<span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>listStaff<span class="token punctuation">.</span>StaffStatus <span class="token operator">==</span> <span class="token keyword">true</span><span class="token punctuation">)</span>
                            <span class="token punctuation">{<!-- --></span>
                                    <span class="token preprocessor property">#<span class="token directive keyword">region</span> 考勤打卡</span>
                                  <span class="token comment">// 登录成功</span>
                                  msg<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                                  msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"succeed"</span><span class="token punctuation">;</span>
                                  ViewBag<span class="token punctuation">.</span>StaffName <span class="token operator">=</span> listStaff<span class="token punctuation">.</span>StaffName<span class="token punctuation">;</span>
                                  <span class="token comment">// 保存到session</span>
                                  Session<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>
                                  Session<span class="token punctuation">[</span><span class="token string">"StaffID"</span><span class="token punctuation">]</span> <span class="token operator">=</span> listStaff<span class="token punctuation">.</span>StaffId<span class="token punctuation">;</span>
                                  Session<span class="token punctuation">[</span><span class="token string">"StaffName"</span><span class="token punctuation">]</span> <span class="token operator">=</span> listStaff<span class="token punctuation">.</span>StaffName<span class="token punctuation">;</span>
                                  Session<span class="token punctuation">[</span><span class="token string">"StaffJobCode"</span><span class="token punctuation">]</span> <span class="token operator">=</span> listStaff<span class="token punctuation">.</span>JobCode<span class="token punctuation">;</span>
                                  Session<span class="token punctuation">[</span><span class="token string">"logInTime"</span><span class="token punctuation">]</span> <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">else</span>
                            <span class="token punctuation">{<!-- --></span>
                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"该工号处于禁用状态，请联系管理员"</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span>
                        <span class="token punctuation">{<!-- --></span>
                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请输入正确的登录密码"</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span><span class="token string">"没有查询到该工号信息，请重新检查"</span><span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请输入8位工号或密码"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
</code></pre>
<h3><a id="3B_163"></a>3、B端导航首页展示</h3>
<blockquote>
<p>页面分析：<br/> 页面简介为主，突出每一个菜单的选项，中间是超一个导航位置，左侧是一级菜单，下面还可以分为二级菜单选项<br/> 又上角有一个登录信息和时间，B端员工可以修改自己的账号等信息</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c64eccb9186e42ca87acf9ea03aee33b.png"/></p>
<h3><a id="4B_171"></a>4、B端前台操作展示</h3>
<blockquote>
<p>页面分析：<br/> 页面主题以整洁为主，突出房间重点信息，右侧有快速看板，能一眼看出当前的登录信息和房间信息等，每一个房间的状态信息都通过不同的颜色来代表</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9488af5a889f4bcb9cdce19756daa91b.png"/><br/> 页面布局代码</p>
<blockquote>
<p>基于时间紧迫右边今日入住并没有完成实现，只写上一个静态</p>
</blockquote>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row p-3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--中间显示区域--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-10<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--顶部的模糊搜索--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-form-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-form<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--房间类型下拉框--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-inline<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token attr-name">lay-filter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>type<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>房间类型<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--房间状态--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-inline<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token attr-name">lay-filter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>房间状态<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>可使用<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>已入住<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>待维修<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>待打扫卫生<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--所属栋数下拉框--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-inline<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token attr-name">lay-filter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>HouseNumber<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>HouseNumber<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择栋数<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>

                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--房间楼层下拉框--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-inline<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>city<span class="token punctuation">"</span></span> <span class="token attr-name">lay-filter</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>floor<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>floor<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>选择楼层<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--第二快捷功能按钮--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>but<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-primary<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Subscribe/Subscribe/SubscribeIndex<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>预约信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-secondary<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Check_InFor/CheckInMain/Index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>入住信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-success<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Maintain/MaintenanceReport/Index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>维修上报<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-danger<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/CeaningRoom/Cleaning/Index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>卫生打扫<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-warning<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/Charts/ChartsData/Index<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>日常报表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-info<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>upDataIframe(this)<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>夜间查询<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>btn btn-outline-dark<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>LogProcessing()<span class="token punctuation">"</span></span> <span class="token attr-name">data-url</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/PositionManagement/PositionManagementMain/LogProcessingView<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>交班处理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-btn layui-btn-sm<span class="token punctuation">"</span></span> <span class="token attr-name">lay-event</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>returnData<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>returnData<span class="token punctuation">"</span></span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>location.replace(location);<span class="token punctuation">"</span></span> <span class="token attr-name">hidden</span><span class="token punctuation">&gt;</span></span>返回<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--中间显示房间信息--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cards mt-4<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>cards<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                @*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card-body<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card-titles<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>101<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">padding</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h4</span><span class="token punctuation">&gt;</span></span>单人间<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h4</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>card-text<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>￥：88<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>A栋 1楼<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>*@
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!--分页器--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>demo20<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--右侧的操作也页--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col-2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-card-header<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>可视面板<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-card-body<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--操作员信息--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>operator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>操作员：@ViewBag.StaffName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>ID：@ViewBag.JobCode<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>职位：@ViewBag.PositionName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--默认分割线--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--页面颜色信息--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>colors<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 空房 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>@ViewBag.vacantRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background</span><span class="token punctuation">:</span> #ffc107<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 入住 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>@ViewBag.CheckCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background</span><span class="token punctuation">:</span> #6c757d<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 待维修 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>@ViewBag.maintainCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background</span><span class="token punctuation">:</span> #28a745<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 打扫 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>@ViewBag.sweepCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">background</span><span class="token punctuation">:</span> #dc3545!important<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span> 停用 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>@ViewBag.blockUpCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--默认分割线--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--房间基础信息--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>可入住房型：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>单人房：@ViewBag.singleRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>双人房：@ViewBag.doubleRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>豪华单人房：@ViewBag.luxurySingleRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>标准房：@ViewBag.normRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>双人标准房数量：@ViewBag.luxuryNormRoomCount<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--默认分割线--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">&gt;</span></span>
                    <span class="token comment">&lt;!--当日营销--&gt;</span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">font-size</span><span class="token punctuation">:</span>16px<span class="token punctuation">;</span><span class="token property">margin-bottom</span><span class="token punctuation">:</span>5px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>今天入住：10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-collapse<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>房费总额：1000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>现金：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>微信：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>支付宝：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>押金收入：500<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>现金：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>微信：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>支付宝：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-item<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-title<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>退还房费：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>现金：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>微信：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layui-colla-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>支付宝：100<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3><a id="5B_310"></a>5、B端入住管理</h3>
<blockquote>
<p>页面和实现思路分析：<br/> 1、双击房间可以根据房间状态进行对应的位置跳转页面，比如：空房间双击即可跳转到办理入住页面、打扫状态房间双击会跳转到卫生打扫页面<br/> 2、对于入住客户的必要信息是必填的否则不可以办理入住登记（姓名、电话、身份证等）<br/> 3、对于押金金额的限定，基于当前房间的价格一半为准<br/> 4、</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/216e2d03cdef4f9a8f6e0fb987bd5554.png"/><br/> 登录入住逻辑代码</p>
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">region</span> 六、前台登记入住</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// 六、前台登记入住</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token comment">/// &lt;param name="Register"&gt;&lt;/param&gt;</span>
        <span class="token comment">/// &lt;returns&gt;&lt;/returns&gt;</span>
        <span class="token keyword">public</span> <span class="token class-name">ActionResult</span> <span class="token function">CheckRnRegister2</span><span class="token punctuation">(</span><span class="token class-name">B_Register</span> Register<span class="token punctuation">,</span> <span class="token keyword">decimal</span><span class="token operator">?</span> RegisterMoney<span class="token punctuation">,</span> <span class="token keyword">decimal</span><span class="token operator">?</span> SecurityDeposit<span class="token punctuation">,</span> <span class="token keyword">decimal</span><span class="token operator">?</span> consume<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">?</span> modeOfPayments<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">ReturnJson</span> msg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReturnJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">TransactionOptions</span> transactionOption <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//设置事务隔离级别</span>
            transactionOption<span class="token punctuation">.</span>IsolationLevel <span class="token operator">=</span> System<span class="token punctuation">.</span>Transactions<span class="token punctuation">.</span>IsolationLevel<span class="token punctuation">.</span>ReadCommitted<span class="token punctuation">;</span>
            <span class="token comment">//设置事务超时时间，这里设置为8分钟</span>
            transactionOption<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeSpan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//开启事务</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//需要添加引用 System.Transactions</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 校验数据是否符合</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>StaffName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>Name<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>IDCard<span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 校验手机号和身份证</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>IdCardHelper<span class="token punctuation">.</span><span class="token function">CheckIdCard</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>IDCard<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>NameTel<span class="token punctuation">)</span> <span class="token operator">||</span> Regex<span class="token punctuation">.</span><span class="token function">IsMatch</span><span class="token punctuation">(</span>Register<span class="token punctuation">.</span>NameTel<span class="token punctuation">,</span> <span class="token string">"^[1][3-9][0-9]{9}$"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                            <span class="token punctuation">{<!-- --></span>
                                <span class="token comment">// 判断是否有入住时间个预离时间</span>
                                <span class="token keyword">if</span> <span class="token punctuation">(</span>Register<span class="token punctuation">.</span>LnitialTime <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> Register<span class="token punctuation">.</span>FinishTime <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                                <span class="token punctuation">{<!-- --></span>
                                    <span class="token comment">// 根据身份证或手机号查询入住信息</span>
                                    List<span class="token operator">&lt;</span>B_Register<span class="token operator">&gt;</span> list <span class="token operator">=</span> myModels<span class="token punctuation">.</span>B_Register<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>IDCard <span class="token operator">==</span> Register<span class="token punctuation">.</span>IDCard <span class="token operator">||</span> p<span class="token punctuation">.</span>NameTel <span class="token operator">==</span> Register<span class="token punctuation">.</span>NameTel<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                                    <span class="token punctuation">{<!-- --></span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>StatusId <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span>
                                        <span class="token punctuation">{<!-- --></span>
                                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"该登记身份证或手机号已被登记入住，还未退房"</span><span class="token punctuation">;</span>
                                            <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                    <span class="token comment">// 判断预离时间与入住时间是否符合（入住小于预离）</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>Register<span class="token punctuation">.</span>FinishTime <span class="token operator">&gt;</span> Register<span class="token punctuation">.</span>LnitialTime<span class="token punctuation">)</span>
                                    <span class="token punctuation">{<!-- --></span>
                                        <span class="token comment">// 根据房间的ID查询房间状态是否为可使用</span>
                                        <span class="token keyword">try</span>
                                        <span class="token punctuation">{<!-- --></span>
                                            <span class="token keyword">var</span> statu <span class="token operator">=</span> myModels<span class="token punctuation">.</span>B_RoomTable<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>o <span class="token operator">=</span><span class="token operator">&gt;</span> o<span class="token punctuation">.</span>RoomId <span class="token operator">==</span> Register<span class="token punctuation">.</span>RoomId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>statu<span class="token punctuation">.</span>StatusId <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>
                                            <span class="token punctuation">{<!-- --></span>
                                                <span class="token comment">// 判断押金是否符合房价的一半【押金大于房间定价的一半并不大于房价】</span>
                                                <span class="token keyword">if</span> <span class="token punctuation">(</span>SecurityDeposit <span class="token operator">&lt;=</span> statu<span class="token punctuation">.</span>ReservationPrice <span class="token operator">&amp;&amp;</span> SecurityDeposit <span class="token operator">&gt;=</span> <span class="token punctuation">(</span>statu<span class="token punctuation">.</span>ReservationPrice <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                                                <span class="token punctuation">{<!-- --></span>
                                                    Register<span class="token punctuation">.</span>StatusId <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                                                    Register<span class="token punctuation">.</span>VIPID <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>
                                                    <span class="token comment">//Register.consume = Register.RegisterMoney; // 消费金额</span>
                                                    <span class="token comment">// 办理入住</span>
                                                    <span class="token class-name">B_Payments</span> payment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B_Payments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                    payment<span class="token punctuation">.</span>PaymentTime <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span> <span class="token comment">// 支付日期</span>
                                                    payment<span class="token punctuation">.</span>ModeOfPaymentId <span class="token operator">=</span> modeOfPayments<span class="token punctuation">;</span> <span class="token comment">// 支付方式</span>

                                                    payment<span class="token punctuation">.</span>RegisterMoney <span class="token operator">=</span> RegisterMoney<span class="token punctuation">;</span> <span class="token comment">// 房费</span>
                                                    payment<span class="token punctuation">.</span>SecurityDeposit <span class="token operator">=</span> SecurityDeposit<span class="token punctuation">;</span> <span class="token comment">// 押金</span>
                                                    payment<span class="token punctuation">.</span>BeyondTheAmount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 超时金额</span>
                                                    payment<span class="token punctuation">.</span>consume <span class="token operator">=</span> RegisterMoney<span class="token punctuation">;</span> <span class="token comment">// 消费金额</span>

                                                    myModels<span class="token punctuation">.</span>B_Payments<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>payment<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                                                    <span class="token punctuation">{<!-- --></span>
                                                        <span class="token comment">// 修改入住表的信息</span>
                                                        Register<span class="token punctuation">.</span>paymentID <span class="token operator">=</span> payment<span class="token punctuation">.</span>paymentID<span class="token punctuation">;</span>

                                                        <span class="token comment">// 报错入住信息表</span>
                                                        myModels<span class="token punctuation">.</span>B_Register<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>Register<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                                                        <span class="token punctuation">{<!-- --></span>
                                                            <span class="token comment">// 对房间表的使用状态进行重新赋值</span>
                                                            <span class="token class-name">B_RoomTable</span> roomTable <span class="token operator">=</span> myModels<span class="token punctuation">.</span>B_RoomTable<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>RoomId <span class="token operator">==</span> Register<span class="token punctuation">.</span>RoomId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                            <span class="token comment">// 对状态信息查询赋值</span>
                                                            roomTable<span class="token punctuation">.</span>StatusId <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 已入住</span>
                                                            myModels<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>roomTable<span class="token punctuation">)</span><span class="token punctuation">.</span>State <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">.</span>EntityState<span class="token punctuation">.</span>Modified<span class="token punctuation">;</span>
                                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                                                            <span class="token punctuation">{<!-- --></span>
                                                                msg<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>
                                                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"入住办理成功"</span><span class="token punctuation">;</span>
                                                                <span class="token comment">// 指示范围内的所有操作都已成功都完成</span>
                                                                scope<span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                                            <span class="token punctuation">}</span>
                                                            <span class="token keyword">else</span>
                                                            <span class="token punctuation">{<!-- --></span>
                                                                msg<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                                                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"房间状态修改失败"</span><span class="token punctuation">;</span>
                                                            <span class="token punctuation">}</span>
                                                        <span class="token punctuation">}</span>
                                                        <span class="token keyword">else</span>
                                                        <span class="token punctuation">{<!-- --></span>
                                                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"入住办理失败"</span><span class="token punctuation">;</span>
                                                        <span class="token punctuation">}</span>
                                                    <span class="token punctuation">}</span>
                                                    <span class="token keyword">else</span>
                                                    <span class="token punctuation">{<!-- --></span>
                                                        msg<span class="token punctuation">.</span>State <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>
                                                        msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"入住支付记录表报错失败"</span><span class="token punctuation">;</span>
                                                    <span class="token punctuation">}</span>
                                                <span class="token punctuation">}</span>
                                                <span class="token keyword">else</span>
                                                <span class="token punctuation">{<!-- --></span>
                                                    msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"押金收取规则：大于或等于房价的一半与不超过房间价"</span><span class="token punctuation">;</span>
                                                <span class="token punctuation">}</span>
                                            <span class="token punctuation">}</span>
                                            <span class="token keyword">else</span>
                                            <span class="token punctuation">{<!-- --></span>
                                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"该房间状态查询不可用，请客服更换"</span><span class="token punctuation">;</span>
                                            <span class="token punctuation">}</span>
                                        <span class="token punctuation">}</span>
                                        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
                                        <span class="token punctuation">{<!-- --></span>
                                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"数据异常："</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>Message<span class="token punctuation">;</span>
                                        <span class="token punctuation">}</span>
                                    <span class="token punctuation">}</span>
                                    <span class="token keyword">else</span>
                                    <span class="token punctuation">{<!-- --></span>
                                        msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"入住时间不能大于入住时间"</span><span class="token punctuation">;</span>
                                    <span class="token punctuation">}</span>
                                <span class="token punctuation">}</span>
                                <span class="token keyword">else</span>
                                <span class="token punctuation">{<!-- --></span>
                                    msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"入住时间和预离时间为空"</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span>
                            <span class="token keyword">else</span>
                            <span class="token punctuation">{<!-- --></span>
                                msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请输入合法的手机号"</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span>
                        <span class="token punctuation">{<!-- --></span>
                            msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请输入合法的身份证号"</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">else</span>
                    <span class="token punctuation">{<!-- --></span>
                        msg<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"请按要求填写数据，才能办理入住登记"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
</code></pre>
<h3><a id="6B_477"></a>6、B端入住管理</h3>
<blockquote>
<p>实现分析：<br/> 1、所有的办理入住信息都会在这个页面进行展示<br/> 2、当前页面会显示入住客户的主要信息，点击右侧的详情按钮可以查看到入住详细信息，包括入住金额和押金及退房时间等<br/> 3、有一个超时退房的时间计算，是客户办理入住的时间开始到第二天的入住办理时间为准（24小时），如果客户超时未退房的消费计算如下（1、超时一小时内不进行押金扣费，超过一小时扣取押金的50%，超过两小时未退房的扣取全部押金信息并强制退房标注）</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/de5b2b799fce4bf7a6deade38dd2ae2f.png"/><br/> 超时未退房计计费代码如下：</p>
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">region</span> 一、入住信息超时逻辑查询（修改入住状态和待付金额）</span>
        <span class="token keyword">public</span> <span class="token class-name">ActionResult</span> <span class="token function">overTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//开启事务</span>
            <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TransactionScope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//需要添加引用 System.Transactions</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 循环遍历获取到所有入住的信息</span>
                <span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">from</span> tb <span class="token keyword">in</span> myModels<span class="token punctuation">.</span><span class="token class-name">B_Register</span>
                            <span class="token keyword">where</span> tb<span class="token punctuation">.</span>StatusId <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> tb<span class="token punctuation">.</span>StatusId <span class="token operator">==</span> <span class="token number">9</span> <span class="token operator">||</span> tb<span class="token punctuation">.</span>StatusId <span class="token operator">==</span> <span class="token number">1013</span> <span class="token comment">// 在住和超期</span>
                            <span class="token keyword">select</span> tb<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 遍历</span>
                <span class="token keyword">try</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> list<span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// -------- 计算入住时间到预里时间再到当前时间的实际入住天数 ---------</span>
                        <span class="token keyword">var</span> li <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>LnitialTime<span class="token punctuation">;</span> <span class="token comment">// 入住时间</span>
                        <span class="token keyword">var</span> FinishTime <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>FinishTime<span class="token punctuation">;</span> <span class="token comment">// 预离时间</span>
                        <span class="token class-name">TimeSpan</span> dayNumber <span class="token operator">=</span> <span class="token punctuation">(</span>TimeSpan<span class="token punctuation">)</span><span class="token punctuation">(</span>FinishTime <span class="token operator">-</span> li<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">int</span> Day2 <span class="token operator">=</span> dayNumber<span class="token punctuation">.</span>Days<span class="token punctuation">;</span> <span class="token comment">// 入住间隔的天数</span>


                        <span class="token comment">// 查询每一条数据的预离时间跟当前时间进行对比</span>
                        <span class="token keyword">var</span> RegisterId <span class="token operator">=</span> list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>RegisterId<span class="token punctuation">;</span> <span class="token comment">// 入住ID</span>
                        <span class="token comment">// 根据获取到的入住ID查询每一条数据进行修改</span>
                        <span class="token class-name">B_Register</span> reg <span class="token operator">=</span> myModels<span class="token punctuation">.</span>B_Register<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>RegisterId <span class="token operator">==</span> RegisterId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">B_Payments</span> payments <span class="token operator">=</span> myModels<span class="token punctuation">.</span>B_Payments<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>p <span class="token operator">=</span><span class="token operator">&gt;</span> p<span class="token punctuation">.</span>paymentID <span class="token operator">==</span> reg<span class="token punctuation">.</span>paymentID<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Single</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


                        <span class="token keyword">var</span> DateNow <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span> <span class="token comment">// 当前时间</span>
                        <span class="token comment">// 判断入住时间、预离时间与当前时间是否有超（修改状态信息）</span>
                        <span class="token class-name">TimeSpan</span> differ <span class="token operator">=</span> <span class="token punctuation">(</span>TimeSpan<span class="token punctuation">)</span><span class="token punctuation">(</span>DateNow <span class="token operator">-</span> FinishTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token keyword">int</span> Hours <span class="token operator">=</span> differ<span class="token punctuation">.</span>Hours<span class="token punctuation">;</span> <span class="token comment">// 间隔小时</span>
                        <span class="token keyword">int</span> Minutes <span class="token operator">=</span> differ<span class="token punctuation">.</span>Minutes<span class="token punctuation">;</span><span class="token comment">// 间隔分钟</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>Hours <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> Hours <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 超时1小时处理</span>
                            <span class="token preprocessor property">#<span class="token directive keyword">region</span> 一、对入住表的数据处理【未涉及金额修改】</span>
                            <span class="token comment">// 对入住的状态进行修改</span>
                            reg<span class="token punctuation">.</span>StatusId <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// 超时未退房</span>
                            reg<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span>Hours <span class="token operator">+</span> <span class="token string">"小时"</span> <span class="token operator">+</span> Minutes <span class="token operator">+</span> <span class="token string">"分钟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 超时天数</span>
                            <span class="token comment">// 保存数据</span>
                            myModels<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span>State <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">.</span>EntityState<span class="token punctuation">.</span>Modified<span class="token punctuation">;</span>
                            myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
                            
                            <span class="token comment">// 押金退房时再与超期金额相减扣除</span>
                            <span class="token comment">// 超时金额计算【大于2小时直接扣除押金，一个小时扣除押金一半】</span>
                            payments<span class="token punctuation">.</span>BeyondTheAmount <span class="token operator">=</span> Hours <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token punctuation">(</span>payments<span class="token punctuation">.</span>SecurityDeposit <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> payments<span class="token punctuation">.</span>SecurityDeposit<span class="token punctuation">;</span>

                            <span class="token comment">// 修改入住支付表信息</span>
                            myModels<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>payments<span class="token punctuation">)</span><span class="token punctuation">.</span>State <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">.</span>EntityState<span class="token punctuation">.</span>Modified<span class="token punctuation">;</span>
                            myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>Hours <span class="token operator">&gt;=</span> <span class="token number">2</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 超时2小时处理</span>
                            <span class="token preprocessor property">#<span class="token directive keyword">region</span> 一、对入住表的数据处理【押金抵扣】</span>
                            <span class="token comment">// 对入住的状态进行修改</span>
                            reg<span class="token punctuation">.</span>StatusId <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// 超时未退房</span>
                            reg<span class="token punctuation">.</span>Timeout <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span>Hours <span class="token operator">+</span> <span class="token string">"小时"</span> <span class="token operator">+</span> Minutes <span class="token operator">+</span> <span class="token string">"分钟"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 超时天数</span>
                            <span class="token comment">// 保存数据</span>
                            myModels<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span>State <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">.</span>EntityState<span class="token punctuation">.</span>Modified<span class="token punctuation">;</span>
                            myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

                            <span class="token comment">// 超时2小时处理</span>
                            reg<span class="token punctuation">.</span>StatusId <span class="token operator">=</span> <span class="token number">1013</span><span class="token punctuation">;</span> <span class="token comment">// 预期两小时强行退房</span>
                            <span class="token comment">// 修改超期金额 = 押金</span>
                            payments<span class="token punctuation">.</span>BeyondTheAmount <span class="token operator">=</span> payments<span class="token punctuation">.</span>SecurityDeposit<span class="token punctuation">;</span>
                            <span class="token comment">// 保存数据</span>
                            myModels<span class="token punctuation">.</span><span class="token function">Entry</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">.</span>State <span class="token operator">=</span> System<span class="token punctuation">.</span>Data<span class="token punctuation">.</span>Entity<span class="token punctuation">.</span>EntityState<span class="token punctuation">.</span>Modified<span class="token punctuation">;</span>
                            myModels<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token comment">// 讲房间设置为需要打扫</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//提交事务(设定交易完成)</span>
                scope<span class="token punctuation">.</span><span class="token function">Complete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
</code></pre>
<h3><a id="7B_579"></a>7、B端职位管理</h3>
<blockquote>
<p>思路分析：<br/> 1、作为一个前后端管理系统，他的权限操作更是重中之重，如果没有权限管理整个系统那么就没有他的存在意义<br/> 2、酒店管理系统分有如下几个权限角色，每一个角色拥有不同的功能<br/> 3、酒店系统的权限包含了页面的【增删盖查】这些具体的小功能，如下图二</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7b3d534e1a444236a27fc08e00c9fa99.png"/><br/> 权限赋值<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7e765016ea7144f089c4be797e220b17.png"/></p>
<h3><a id="8_590"></a>8、日常报表</h3>
<blockquote>
<p>思路分析：<br/> 这是使用一款国内的可视化插件开发的页面，只需要将需要的数据查询出来然后将数据填写上对于的数据展示位置即可直观的分析当前的数据信息</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/dac51d95d5c7409fb3d84b403d029c39.png"/></p>
<h3><a id="9BVIP_597"></a>9、B端VIP管理</h3>
<blockquote>
<p>思路分析：<br/> 当前的页面是为C端的用户账号来设计的，根据用户的在项预定的次数（入住成功）的+1，来进行一个VIP登记的提升，每一个VIP登记的会员优惠折扣都是不相同的，而目前的前台页面进行办理入住登记的并能使用VIP所拥有的优惠折扣</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/40db90e616f949dda53d465a7e38c214.png"/></p>
<h3><a id="10B_604"></a>10、B端酒店公告系统</h3>
<blockquote>
<p>思路分析：<br/> 一个完整的项目怎么可能没有自己的一个完整的公告系统呢，公告系统对于日常的信息发布尤为重要，当酒店退出了一个新的活动的时候需要第一时间去推广给C端的用户那么公告就会是很好的推荐助手，而且公告也是可以进行一个发布身份的鉴定，区分B端工作人员还是用户进行接收</p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ac4f26f90e734b83823eb18ddbca9020.png"/><br/> 公告系统的代码如下：</p>
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">region</span> 3.2、发布富文本 上传图片文件处理(在插件文件里的config.js中调用方法)</span>
        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// 3.2、发布富文本 上传图片文件处理</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token comment">/// &lt;param name="upload"&gt;接收上传过来的文件，不能乱改，与上传文件的 name对应&lt;/param&gt;</span>
        <span class="token comment">/// &lt;returns&gt;&lt;/returns&gt;</span>

        <span class="token comment">/* 文件的处理方式
         一般我们会把文件保存到文件夹里面：这里我们在做发布公告的时候会创建几个文件夹，如下：
        Temp 临时文件夹（上传的文件，在这里临时保存）

        Notice 最终文件夹：
            Attachment附件，
            Image：富文本编辑器图片；
            NoticeCarousel 轮播图片；
            Text：富文本编辑器内容
         */</span>

        <span class="token keyword">public</span> <span class="token class-name">ActionResult</span> <span class="token function">UpEditorFile</span><span class="token punctuation">(</span><span class="token class-name">HttpPostedFileBase</span> upload<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 封装 实例化 返回数据的状态</span>
            <span class="token class-name">Ckeditor4UploadResult</span> ck <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Ckeditor4UploadResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 使用 try 捕获错误</span>
            <span class="token keyword">try</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 判断上传的文件是否为空</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>upload <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 1、获取上传文件的扩展名 如：.png</span>
                    <span class="token keyword">string</span> fileExtension <span class="token operator">=</span> Path<span class="token punctuation">.</span><span class="token function">GetExtension</span><span class="token punctuation">(</span>upload<span class="token punctuation">.</span>FileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 重新拼接文件的名称(上传时间-唯一标识.扩展名)</span>
                    <span class="token keyword">string</span> filename <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> Guid<span class="token punctuation">.</span><span class="token function">NewGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> fileExtension<span class="token punctuation">;</span>
                    <span class="token comment">// 判断临时文件 Temp 是否存在（不存在就创建一个）</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Directory<span class="token punctuation">.</span><span class="token function">Exists</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span><span class="token function">MapPath</span><span class="token punctuation">(</span><span class="token string">"~/Document/Temp/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        Directory<span class="token punctuation">.</span><span class="token function">CreateDirectory</span><span class="token punctuation">(</span>Server<span class="token punctuation">.</span><span class="token function">MapPath</span><span class="token punctuation">(</span><span class="token string">"~/Document/Temp/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 保存文件的路径</span>
                    <span class="token keyword">string</span> filePath <span class="token operator">=</span> Server<span class="token punctuation">.</span><span class="token function">MapPath</span><span class="token punctuation">(</span><span class="token string">"~/Document/Temp/"</span><span class="token punctuation">)</span> <span class="token operator">+</span> filename<span class="token punctuation">;</span>
                    <span class="token comment">// 判断文件格式不为空</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileExtension <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// 将扩展名改为小写</span>
                        fileExtension <span class="token operator">=</span> fileExtension<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">// 判断是否具有该格式文件</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"(.gif)|(.jpg)|(.bmp)|(.jpeg)|(.png)"</span><span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>fileExtension<span class="token punctuation">)</span><span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token comment">// 保存已上传的文件</span>
                            upload<span class="token punctuation">.</span><span class="token function">SaveAs</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token comment">// 图片的路径</span>
                            <span class="token keyword">var</span> url <span class="token operator">=</span> <span class="token string">"/Document/Temp/"</span> <span class="token operator">+</span> filename<span class="token punctuation">;</span>
                            ck<span class="token punctuation">.</span>uploaded <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 上传成功的状态</span>
                            ck<span class="token punctuation">.</span>fileName <span class="token operator">=</span> filename<span class="token punctuation">;</span> <span class="token comment">// 重新拼接的文件名</span>
                            ck<span class="token punctuation">.</span>url <span class="token operator">=</span> url<span class="token punctuation">;</span> <span class="token comment">// 返回文件的路径</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">else</span>
                        <span class="token punctuation">{<!-- --></span>
                            ck<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"文件只能上传图片格式"</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">else</span>
                <span class="token punctuation">{<!-- --></span>
                    ck<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"上传文件不能为空，请检查再重新上传"</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
                ck<span class="token punctuation">.</span>error<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">"图片上传失败"</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span>ck<span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>