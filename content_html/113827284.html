<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p>插个小广告～<br/> 字节跳动前端开发工程师-番茄小说内推，校招、社招、实习均可。<br/> 欢迎加我q:2679330388，欢迎来撩～</p>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><ul><li><ul><li><ul><li><a href="#JS_11">说一下JS的基本数据类型</a></li><li><a href="#null__undefined__26">null 和 undefined 的区别？</a></li><li><a href="#JavaScript___32">介绍一下JavaScript 原型、原型链？原型链有什么特点？_</a></li><li><a href="#Array__44">Array 构造函数只有一个参数值时的表现？</a></li><li><a href="#toString_48">说一说其他值到字符串的转换规则？toString</a></li><li><a href="#_56">如何把对象转换成字符串/字符串和对象的相互转换。</a></li><li><a href="#_61">其他值到布尔类型的值的转换规则？</a></li><li><a href="#_74">其他值到数字值的转换规则？</a></li><li><a href="#___89">相等操作符 == 比较规则</a></li><li><a href="#____valueOf__toString__97">{} 和 [] 的 valueOf 和 toString 的结果是什么？</a></li><li><a href="#_109">判断数据类型的方法</a></li><li><a href="#_153">判断一个变量是否为数组</a></li><li><a href="#ObjectprototypetoString_159">Object.prototype.toString的原理</a></li><li><a href="#typeof_null_165">typeof null输出什么</a></li><li><a href="#typeof_NaN__171">typeof NaN 的结果是什么？</a></li><li><a href="#typeof_179">typeof的原理</a></li><li><a href="#instanceof_189">instanceof的原理</a></li><li><a href="#01__02__193">0.1 + 0.2 等于多少</a></li><li><a href="#0102_03_206">我想0.1+0.2 精确的等于0.3怎么办</a></li><li><a href="#_212">小数如何取整，或保留几位小数</a></li><li><a href="#JavaScript__229">JavaScript 什么是闭包?</a></li><li><a href="#_236">闭包的好处</a></li><li><a href="#_258">闭包的应用场景</a></li><li><a href="#_284">！！！节流、防抖了解吗？写一下节流防抖</a></li><li><a href="#Symbol_344">Symbol类型是做什么的？</a></li><li><a href="#Symbol_348">Symbol的具体用法</a></li><li><a href="#SymbolSymbolfor_362">Symbol和Symbol.for的区别</a></li><li><a href="#ES6_366">！！！列举ES6的新特性并说一下如何使用</a></li><li><a href="#new_471">new发生了什么</a></li><li><a href="#_490">什么是回调地域</a></li><li><a href="#PromisePromise_494">实现一下Promise/Promise的原理</a></li><li><a href="#call_apply_bind_741">call() 、apply() 和bind()的区别？</a></li><li><a href="#this_753">说一下this的指向</a></li><li><a href="#_Event_loop_919">事件循环 Event loop</a></li><li><a href="#call_apply_bind_977">手写call 、apply 、bind方法</a></li><li><a href="#_1039">深拷贝和浅拷贝</a></li><li><a href="#_1045">实现浅拷贝</a></li><li><a href="#_1067">实现深拷贝</a></li><li><a href="#WeakMapMap_1116">WeakMap和Map的区别，及其应用场景</a></li><li><a href="#WeakSetSet_1126">WeakSet和Set的区别，及其应用场景</a></li><li><a href="#MapSet_1136">Map与Set的区别</a></li><li><a href="#Set_1144">Set的方法</a></li><li><a href="#Map_1170">Map的方法</a></li><li><a href="#_1187">数组扁平化</a></li><li><a href="#flat_1201">实现数组拍平flat函数</a></li><li><a href="#_1257">介绍一下遍历方法</a></li><li><a href="#mapforeach_1296">map和foreach有什么区别</a></li><li><a href="#_1306">怎么用栈去实现队列</a></li><li><a href="#attributeproperty_1314">attribute和property的区别</a></li><li><a href="#async__defer__1321">async 和 defer 的作用是什么？有什么区别？（浏览器解析过程）</a></li><li><a href="#asyncdeferjs_1329">使用async/defer后的js脚本会阻塞文档的解析吗？</a></li><li><a href="#Cssdom__1335">Css会阻塞dom解析吗 为什么会阻塞渲染</a></li><li><a href="#cssjs_1341">css加载会阻塞js运行吗？</a></li><li><a href="#JS_1345">调试JS的工具</a></li><li><a href="#promiseall__promiserace_1350">promise.all 和 promise.race的区别</a></li><li><a href="#promiseallpromise_1356">promise.all是并行的，怎么封装promise做串行处理</a></li><li><a href="#Promisepromise_JS__1418">封装一个异步类，实现只能有两个Promise在执行，该如何实现？/限制promise的并发数/ JS 请求调度器</a></li><li><a href="#abc_5_1508">不用循环，实现abc *5的字符串的一个连接。</a></li><li><a href="#ArrayAPI_1518">说一下Array的内置的API</a></li><li><a href="#API_1744">说一下字符串的内置的API</a></li><li><a href="#_1884">事件流</a></li><li><a href="#_1888">介绍一下事件冒泡和捕获</a></li><li><a href="#_1908">事件代理/委托</a></li><li><a href="#_1916">事件代理/委托有什么作用，主要用于哪些场景</a></li><li><a href="#_1926">如何阻止冒泡</a></li><li><a href="#_1932">如何阻止默认事件</a></li><li><a href="#_1938">触发事件的方法</a></li><li><a href="#_1949">说一下鼠标事件和键盘事件有哪些？</a></li><li><a href="#_1969">对作用域的理解</a></li><li><a href="#_1979">对作用域链的理解（变量的一个搜索过程）</a></li><li><a href="#js_1985">js怎么实现继承，优缺点</a></li><li><a href="#04_2232">写代码，输出0-4，每隔一秒输一个</a></li><li><a href="#map_2278">手写数组的map函数</a></li><li><a href="#reduce_2309">手写数组的reduce函数</a></li><li><a href="#jsjs_2349">js是单线程的，为什么js能有异步任务？</a></li><li><a href="#_2363">如何查找一个对象数组</a></li><li><a href="#Promise_2376">Promise解决了什么问题？存在什么问题和优化？是最终解决方案吗？</a></li><li><a href="#async_2386">async函数</a></li><li><a href="#async__await_2392">async 和 await原理。</a></li><li><a href="#Promiseasync_awit_2469">Promise,async awit的区别</a></li><li><a href="#Typescript__JavaScript_2473">Typescript 和 JavaScript的区别是什么</a></li><li><a href="#require__import__2479">require 和 import 引入依赖的区别</a></li><li><a href="#_2485">函数柯里化</a></li><li><a href="#_2571">如果要实现一个加法函数，但是不知道传进来的参数有多少，你会怎么做？</a></li><li><a href="#_2593">正则表达式</a></li><li><a href="#2s1s3spromise_2595">实现一个红绿灯系统，红色2s，黄灯1s，绿灯3s，promise，循环</a></li><li><a href="#_2633">数组去重的方法</a></li><li><a href="#BOM__DOM_2715">BOM 和 DOM的区别</a></li><li><a href="#_2722">引入脚本的方式有哪些</a></li><li><a href="#DOMcontentload__load_2732">DOMcontentload 和 load的区别</a></li><li><a href="#_2737">介绍一下懒加载和预加载。图片懒加载和图片预加载的区别？分别在什么场景下使用？</a></li><li><a href="#_2780">为什么使用懒加载</a></li><li><a href="#_2788">懒加载的原理</a></li><li><a href="#_2859">为什么使用预加载</a></li><li><a href="#_2865">实现预加载的方法</a></li><li><a href="#_2873">预加载的应用场景</a></li><li><a href="#JS_2882">JS垃圾回收机制说一下</a></li><li><a href="#_2896">如果页面卡顿，你觉得可能是什么原因造成的？有什么办法锁定原因并解决吗？</a></li><li><a href="#_cookiessessionStorage__localStorage__2902">请描述一下 cookies，sessionStorage 和 localStorage 的区别</a></li><li><a href="#_2915">介绍一下你了解的设计模式</a></li><li><a href="#_3037">页面性能优化</a></li><li><a href="#_3090">首屏渲染优化方式</a></li><li><a href="#_3102">介绍一下预加载的原理</a></li><li><a href="#div_3106">实现div拖动效果</a></li><li><a href="#js_3148">js和其他语言的区别</a></li><li><a href="#_Js__3154">为什么 Js 要设计成弱类型语言</a></li><li><a href="#jssettimout_3160">为什么js是单线程但是有settimout</a></li><li><a href="#JS_3172">JS中的数组与其他语言的数组的区别</a></li><li><a href="#_3178">红宝书的目录结构说说</a></li><li><a href="#_3186">对移动端开发有什么了解</a></li><li><a href="#_3194">前端设计组件的原则</a></li><li><a href="#JS__sort__3210">JS 的 sort() 是怎么实现的</a></li><li><a href="#_3214">对象去重</a></li><li><a href="#id_3246">根据对象的id去重</a></li><li><a href="#_3264">手写一下发布-订阅模式</a></li><li><a href="#ReactVueEvent_Bus_3308">既然React/Vue可以用Event Bus进行组件通信,你可以实现下吗?</a></li><li><a href="#AST_3369">介绍一下AST</a></li><li><a href="#_tab__3382">两个 tab 的页面之间怎么通信？</a></li><li><a href="#Keys_3388">如何获取嵌套对象所有的Keys</a></li></ul>
</li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<hr color="#000000" size='1"'/>
<h4><a id="JS_11"></a>说一下JS的基本数据类型</h4>
<p><strong>JavaScript的数据类型分为俩种，一种是基本数据类型，一种是引用数据类型</strong></p>
<p>1.基本数据类型</p>
<p>js 一共有六种基本数据类型，分别是 Undefined、Null、Boolean、Number、String，还有在 ES6 中新增的 Symbol 类型。<br/> Symbol 代表创建后独一无二且不可变的数据类型，它的出现我认为主要是为了解决可能出现的全局变量冲突的问题。</p>
<p>2.引用数据类型</p>
<p>引用数据类型统称为 Object 对象，主要包括对象、数组、函数、日期和正则等等。</p>
<blockquote>
<ul><li>Symbol类型是做什么的？</li></ul>
</blockquote>
<h4><a id="null__undefined__26"></a>null 和 undefined 的区别？</h4>
<p>undefined 代表的含义是未定义，null 代表的含义是空对象。一般变量声明了但还没有定义的时候会返回 undefined，null主要用于赋值给一些可能会返回对象的变量，作为初始化。</p>
<p>当我们使用双等号对两种类型的值进行比较时会返回 true，使用三个等号时会返回 false。</p>
<h4><a id="JavaScript___32"></a>介绍一下JavaScript 原型、原型链？原型链有什么特点？_</h4>
<p>**构造函数原型：**每一个构造函数的内部都有一个 prototype 属性，这个属性时一个指针，指向另一个对象，这个对象包含了可以由该构造函数的所有实例共享的属性和方法。</p>
<p>**对象原型：**当我们使用构造函数新建一个对象后，在这个对象的内部将包含一个指针，这个指针指向构造函数的 prototype 属性对应的值，这个指针称为对象的原型。</p>
<p><strong>原型链</strong></p>
<p>当我们访问一个对象的属性时，如果这个对象内部不存在这个属性，那么它就会去它的原型对象里找这个属性，这个原型对象又会有自己的原型，于是就这样一直找下去，也就是原型链的概念。原型链的尽头一般来说都是 Object.prototype，然后Object.prototype.__proto _ _为null。</p>
<p><img alt="image-20210407210035841" src="https://img-blog.csdnimg.cn/img_convert/c54f7e5a9c7b24019590cde89c059c10.png"/></p>
<h4><a id="Array__44"></a>Array 构造函数只有一个参数值时的表现？</h4>
<p>Array 构造函数只带一个数字参数的时候，该参数会被作为数组的预设长度这样创建出来的只是一个空数组，只不过它的 length 属性被设置成了指定的值。</p>
<h4><a id="toString_48"></a>说一说其他值到字符串的转换规则？toString</h4>
<ul><li>null 和 undefined 类型 ，null 转换为 “null”，undefined 转换为 “undefined”，</li><li>Boolean 类型，true 转换为 “true”，false 转换为 “false”。</li><li>Number 类型的值直接转换，<strong>不过那些极小和极大的数字会使用指数形式。</strong></li><li>Symbol 类型的值直接转换，但是<strong>只允许显式</strong>强制类型转换，使用<strong>隐式</strong>强制类型转换会产生<strong>错误</strong>。</li><li>对象,会调用Object.prototype.toString()来返回内部属性 [[Class]] 的值，如"[object Object]"。</li></ul>
<h4><a id="_56"></a>如何把对象转换成字符串/字符串和对象的相互转换。</h4>
<p>对象转字符串 JSON.stringify(obj)<br/> 字符串转对象或数组 JSON.parse(str)</p>
<h4><a id="_61"></a>其他值到布尔类型的值的转换规则？</h4>
<p>利用Boolean对象进行转换</p>
<p>以下这些是假值：</p>
<ul><li>undefined</li><li>null</li><li>0和 NaN</li><li>“”</li></ul>
<p>假值的布尔强制类型转换结果为 false。从逻辑上说，假值列表以外的都应该是真值。</p>
<h4><a id="_74"></a>其他值到数字值的转换规则？</h4>
<p>Number()函数的转换规则</p>
<ul><li> <p>null，返回 0。</p> </li><li> <p>undefined，返回 NaN。</p> </li><li> <p>布尔值，true 转换为 1，false 转换为 0。</p> </li><li> <p>数值，直接返回。</p> </li><li> <p>字符串：</p>
<ul><li>只有数字，直接转</li></ul> </li><li> <p>空字符串，0</p>
<ul><li>其他情况，则返回 NaN。</li></ul> </li><li> <p>对象，调用 valueOf()方法，并按照上述规则转换返回的值。</p> </li></ul>
<h4><a id="___89"></a>相等操作符 == 比较规则</h4>
<p>1、两个简单数据类型，类型不同，转数字比较。</p>
<p>2、一个简单、一个复杂，复杂转简单后比较。</p>
<p>3、两个复杂，比地址。</p>
<h4><a id="____valueOf__toString__97"></a>{} 和 [] 的 valueOf 和 toString 的结果是什么？</h4>
<p>valueOf()方法会将对象转换为基本类型，如果无法转换为基本类型，则返回原对象。</p>
<p>toString返回当前对象的字符串形式。</p>
<pre><code>{} 的 valueOf 结果为 {} ，toString 的结果为 "[object Object]"

[] 的 valueOf 结果为 [] ，toString 的结果为 ""
</code></pre>
<h4><a id="_109"></a>判断数据类型的方法</h4>
<p><strong>基本类型判断</strong></p>
<p>在 JavaScript 里 使用 typeof 来判断数据类型，只能区分基本类型，即 “ number ” ， “ string ” ， “ undefined ” ， “ boolean ” ， “ object ” ，"function"六种。</p>
<pre><code class="prism language-js"><span class="token keyword">typeof</span> <span class="token string">''</span><span class="token punctuation">;</span>               <span class="token comment">// string 有效</span>
<span class="token keyword">typeof</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token comment">// number 有效</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">;</span>             <span class="token comment">// boolean 有效</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>        <span class="token comment">// undefined 有效</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">;</span>             <span class="token comment">// object 无效</span>
<span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">;</span>              <span class="token comment">// object 无效</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// function 有效</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// object 无效</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// object 无效</span>
</code></pre>
<p><strong>引用类型判断</strong></p>
<p>区别对象、数组、函数可以使用Object.prototype.toString.call 方法。判断某个对象值属于哪种内置类型。</p>
<pre><code class="prism language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span>          <span class="token comment">// [object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">// [object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// [object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment">// [object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>           <span class="token comment">// [object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>           <span class="token comment">// [object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// [object Window]</span>
</code></pre>
<p><strong>对象类型判断</strong></p>
<p><code>instanceof</code> 运算符也常常用来判断对象类型。用法: 左边的运算数是一个<code>object</code>，右边运算数是对象类的名字或者构造函数; 返回<code>true</code>或<code>false</code>。</p>
<pre><code class="prism language-js"><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span> <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre>
<h4><a id="_153"></a>判断一个变量是否为数组</h4>
<p>Array.isArray<br/> Object.prototype.toString.call()<br/> x instanceof Array</p>
<h4><a id="ObjectprototypetoString_159"></a>Object.prototype.toString的原理</h4>
<p>在 Object.prototype.toString 方法被调用时，他会找this对象的[[Class]]属性的值，将这个值与object字符串拼接并返回。</p>
<p>[[Class]]是一个内部属性，所有的对象都拥有该属性。在规范中，[[Class]]的值是一个字符串值，表明了该对象的类型。</p>
<h4><a id="typeof_null_165"></a>typeof null输出什么</h4>
<p>输出“object"，为什么？</p>
<p>因为不同的对象在底层都表示为二进制，在Javascript中二进制前三位都为0的话会被判断为Object类型，null的二进制表示全为0，自然前三位也是0，所以执行typeof时会返回"object"。</p>
<h4><a id="typeof_NaN__171"></a>typeof NaN 的结果是什么？</h4>
<p>typeof NaN; // “number”</p>
<p>NaN 意指“不是一个数字”（not a number），用于指出数字类型中的错误情况。</p>
<p>NaN != NaN为 true。 NaN==NaN为false</p>
<h4><a id="typeof_179"></a>typeof的原理</h4>
<p><code>typeof</code>原理：不同的对象在底层都表示为二进制，在Javascript中二进制低三位存储其类型信息。</p>
<ul><li>000: 对象</li><li>001： 整数</li><li>010: 浮点数</li><li>100：字符串</li><li>110： 布尔</li></ul>
<h4><a id="instanceof_189"></a>instanceof的原理</h4>
<p>Instanceof 是通过原型链去查找，找到某个对象的原型对象，使用原型对象的constructor找到构造函数，看看构造函数与Instanceof后面的是否相同，不相同，继续向上查找，直到尽头，找到为True，没找到为false。</p>
<h4><a id="01__02__193"></a>0.1 + 0.2 等于多少</h4>
<p>0.3000000000000004。不会精确等于0.3。</p>
<p>首先，十进制的0.1和0.2会被转换成二进制的，二进制浮点数表示法并不能精确的表示类似0.1这样的数值，因为浮点数在转化为二进制时，会出现无限循环</p>
<pre><code>0.1 -&gt; 0.0001 1001 1001 1001...(1100循环)
0.2 -&gt; 0.0011 0011 0011 0011...(0011循环)
</code></pre>
<p>两者相加之后得到二进制为再转换为十进制，会产生误差。</p>
<h4><a id="0102_03_206"></a>我想0.1+0.2 精确的等于0.3怎么办</h4>
<p>num.toFixed(小数点位数）<br/> 先✖️10相加 再除10</p>
<h4><a id="_212"></a>小数如何取整，或保留几位小数</h4>
<p>可以使用toFixed方法，可把 Number 四舍五入为指定小数位数的数字。</p>
<pre><code>var num = 5.56789;
var n=num.toFixed(2);
</code></pre>
<p>输出：</p>
<pre><code>5.57
</code></pre>
<h4><a id="JavaScript__229"></a>JavaScript 什么是闭包?</h4>
<p>闭包是指有权访问另一个函数作用域中变量的函数，创建闭包的最常见的方式就是在一个函数内创建另一个函数，创建的函数可以访问到当前函数的局部变量。</p>
<blockquote>
<ul><li>闭包的用途</li><li>闭包的应用场景</li></ul>
</blockquote>
<h4><a id="_236"></a>闭包的好处</h4>
<p>闭包有两个常用的用途。</p>
<p>1.可以让我们函数外部能够访问到函数内部的变量。</p>
<p>2.闭包函数保留了使用的变量对象的引用，保证变量对象不会被回收。</p>
<p>闭包有很多好处，如果我们过多的使用，就会导致大量的变量都被保存在内存中，内存消耗很大，造成网页的性能问题，且容易造成内存泄漏。解决方法是在退出函数之前，将不使用的局部变量全部删除。（至为null这样）</p>
<pre><code class="prism language-js"><span class="token comment">// 解除引用避免内存泄露</span>
<span class="token keyword">function</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>    
    <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token keyword">var</span> test <span class="token operator">=</span> div<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>
    div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    div <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a id="_258"></a>闭包的应用场景</h4>
<ul><li>构造函数的私有属性</li><li>函数节流、防抖</li></ul>
<p><strong>私有属性</strong></p>
<p>在函数中使用var来创建变量，这时候在函数外部就无法获取到这个变量，我们可以在函数内部提供一个特权方法来访问这个变量。</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> param<span class="token punctuation">.</span>name<span class="token punctuation">;</span> <span class="token comment">// 私有属性</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span> <span class="token comment">// 共有属性</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> tom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>name<span class="token operator">:</span> <span class="token string">'tom'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tom<span class="token punctuation">.</span>age <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 共有属性，外部可以更改</span>
tom<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tom</span>
tom<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'jerry'</span><span class="token punctuation">;</span><span class="token comment">// 私有属性，外部不可获取、更改</span>
tom<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// tom</span>
</code></pre>
<h4><a id="_284"></a>！！！节流、防抖了解吗？写一下节流防抖</h4>
<p><strong>函数节流</strong></p>
<p>节流是指在一段时间内只允许函数执行一次。我们可以使用定时器实现节流。</p>
<p>函数节流会用在比input, keyup更频繁触发的事件中，如resize, touchmove, mousemove, scroll。throttle 会强制函数以固定的速率执行</p>
<pre><code class="prism language-js"><span class="token comment">// 节流</span>
<span class="token keyword">var</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>防抖</strong></p>
<p>防抖的作用是，一个事件回调函数在一段时间后才执行，如果在这段时间内再次调用则重新计时。</p>
<p>实际应用场景： 搜索框，如果用户不断输入，通过防抖节约请求资源。</p>
<p>一般我是使用lodash的decounce进行防抖。</p>
<p>debounce(方法，时间）</p>
<p>在项目我开发一个备注搜索的时候，就是使用了防抖，避免频繁的发起请求。</p>
<p>原理：内部维护一个计时器timer，返回一个函数，在这个函数里清除计时器并重新计时，计时结束后执行fn函数。</p>
<pre><code class="prism language-js"><span class="token comment">// 防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 维护一个 timer</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 获取函数的作用域和变量</span>
        <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
        
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清除重新计时</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a id="Symbol_344"></a>Symbol类型是做什么的？</h4>
<p><code>Symbol</code> 是 <code>ES6</code> 新推出的一种基本类型，它表示独一无二的值。它最大的用途就是用来定义对象唯一的属性名，就能保证不会出现同名的属性，还能防止某一个属性被不小心覆盖。</p>
<h4><a id="Symbol_348"></a>Symbol的具体用法</h4>
<p>通过Symbol()方法可以生成一个symbol，里面可以带参数，也可以不带参数</p>
<p><strong>Symbol 类型的注意点</strong></p>
<ul><li>Symbol 函数前不能使用 new 命令，否则会报错。</li><li>Symbol 函数可以接受一个字符串作为参数，表示对 Symbol 实例的描述，主要是为了在控制台显示，或者转为字符串时，比较容易区分。</li><li>Symbol值不能与其他类型值运算，不能转数值；可以转字符串和布尔值</li><li>不能用<code>.</code>运算符，要用方括号</li><li>Symbol 作为属性名时，该属性不会出现在 for…in、for…of 循环中，也不会被 Object.keys() 返回。</li><li>Object.getOwnPropertySymbols 方法返回一个数组，成员是当前对象的所有用作属性名的 Symbol 值。</li><li>Symbol.for 接受一个字符串作为参数，首先在全局中搜索有没有以该参数为名称的Symbol值。如果有，就返回这个 Symbol 值，否则就新建并返回一个以该字符串为名称的 Symbol 值。</li></ul>
<h4><a id="SymbolSymbolfor_362"></a>Symbol和Symbol.for的区别</h4>
<p><code>Symbol.for()</code>与<code>Symbol()</code>这两种写法，都会生成新的 Symbol。它们的区别是，前者会被登记在全局环境中供搜索，后者不会。<code>Symbol.for()</code>不会每次调用就返回一个新的 Symbol 类型的值，而是会先检查给定的<code>key</code>是否已经存在，如果不存在才会新建一个值。</p>
<h4><a id="ES6_366"></a>！！！列举ES6的新特性并说一下如何使用</h4>
<p><strong>1.const 与 let以及var以及块级作用域</strong></p>
<ul><li>var是函数作用域，会变量提升。</li><li>let是块级作用域，不会变量提升。</li><li>const用于定义常量，是块级作用域，不会变量提升</li></ul>
<p><strong>什么是块级作用域？</strong></p>
<p>是比函数作用域更小的作用域，例如for循环、i语句的{}</p>
<blockquote>
<ul><li>什么是块级作用域？</li></ul>
</blockquote>
<p><strong>const是常量</strong></p>
<p>const声明一个只读的常量，const实际上保证的，并不是变量的值不得改动，而是变量指向的那个内存地址所保存的数据不得改动。对于简单类型的数据，值就保存在变量指向的那个内存地址，因此等同于常量。但对于复合类型的数据（主要是对象和数组），变量指向的内存地址，保存的只是一个指向实际数据的指针，<code>const</code>只能保证这个指针是固定的，至于它指向的数据结构是不是可变的，就完全不能控制了。</p>
<p><strong>let和const没有变量提升，会存在暂时性死区</strong></p>
<pre><code>var tmp = 123;
if (true) {
  tmp = 'abc'; // ReferenceError
  let tmp;
}
</code></pre>
<p>比如，存在全局变量<code>temp</code>，但是块级作用域内<code>let</code>又声明了一个局部变量<code>temp</code>，局部变量就绑定这个块级作用域，所以在<code>let</code>声明变量前，对<code>temp</code>赋值会<strong>报错</strong>。</p>
<p><strong>2.箭头函数</strong></p>
<p>ES6 中，箭头函数就是函数的一种简写形式，使用括号包裹参数，跟随一个 =&gt;，紧接着是函数体；</p>
<p>具体的使用细节：</p>
<p>箭头函数和普通函数的区别</p>
<ul><li>箭头函数不能使用arguments、super和new.target，可以使用rest参数访问参数列表</li><li>箭头函数没有prototype属性，不能用作构造函数</li><li>箭头函数的this指向，定义箭头函数的上下文</li><li>普通函数可以使用call修改this。但箭头函数不能用call、apply修改里面的this</li></ul>
<blockquote>
<ul><li>new发生了什么/为什么箭头函数不能用new实例化对象</li></ul>
</blockquote>
<p><strong>3.Promise（常用）</strong></p>
<p>Promise的出现主要是为了解决回调地狱的问题。</p>
<p>具体的使用的话：</p>
<p>Promise 是一个构造函数，接收一个函数作为参数，返回一个 Promise 实例。</p>
<p>一个 Promise 实例有三种状态，分别是 pending、fulfilled 和 rejected，分别代表了进行中、成功和失败。实例的状态只能由进行中转变成功或者进行中转失败，并且状态一经改变，就无法再被改变了。</p>
<p>状态的改变是通过 resolve() 和 reject() 函数来实现的，我们可以在异步操作结束后调用这两个函数改变 Promise 实例的状态。</p>
<p>Promise的原型上定义了一个 then 方法， 分别是成功和失败的回调。我们可以使用这个 then 方法可以为两个状态的改变注册回调函数。</p>
<p>这样子我们创建了一个最基本的promise。</p>
<blockquote>
<ul><li>实现一下Promise</li><li>什么是回调地域</li></ul>
</blockquote>
<p><strong>4.Generator</strong></p>
<p>Generator 函数也是 ES6 提供的一种异步编程解决方案。</p>
<p>在第一次调用Generator函数的时候并不会执行函数内部的代码，而是会返回一个生成器对象。而每次调用<code>next</code>方法则将函数执行到下一个<code>yield</code>的位置，同时向外界返回yield关键字后面的结果。如此往复，直到Generator函数内部的代码执行完毕或return。</p>
<p><strong>5.async 函数</strong></p>
<p>async 函数是 Generator 函数的语法糖，async不再需要执行器，执行async函数，就会自动执行函数内部的逻辑。await后面既可以是promise也可以是任意类型的值，此时等同于同步操作。</p>
<p>async 函数的返回值是 Promise 对象，可以使用<code>then</code>方法添加回调函数</p>
<p><strong>6.Proxy</strong></p>
<p>Proxy 这个词的原意是代理，用在这里表示由它来“代理”某些操作。它是在目标对象之前设置了一层“拦截”，当该对象被访问的时候，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。</p>
<p>具体的使用：</p>
<p>一个 Proxy 对象由两个部分组成： target 、 handler 。在通过 Proxy 构造函数生成实例对象时，需要提供这两个参数。 target是目标对象， handler 是一个对象，声明了代理 target 的指定行为。</p>
<p><strong>7.模板字符串</strong></p>
<p>ES6新增了模板字符串，用反引号(``)表示，可以用于定义多行字符串，或者在字符串中嵌入变量。如果要在模板字符串中嵌入变量，需要将变量名写在${}之中。</p>
<p><strong>8.Module模块化</strong></p>
<p>import导入，export导出。</p>
<blockquote>
<ul><li>什么是模块化开发</li></ul>
</blockquote>
<p><strong>9.解构赋值</strong></p>
<p>我对于数组解构原理的理解是，从数组中提取值，按照对应位置，对变量赋值。对象解构原理的理解是，通过键找键，找到了相同的属性名就赋值了。</p>
<p><strong>10.rest运算符</strong></p>
<p>用…表示，两个功能：展开、收集。</p>
<ul><li>可以展开一个数组，放入另一个数组。</li><li>放在最后，获取到剩余的元素放到数组中。</li></ul>
<h4><a id="new_471"></a>new发生了什么</h4>
<ol><li>首先创建了一个新的空对象</li><li>设置原型，将对象的原型设置为函数的 prototype 对象。</li><li>让函数的 this 指向这个对象，执行构造函数的代码。</li><li>判断函数return的是否为Object，若为Object则返回该object，否则返回创建的新对象</li></ol>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">Super</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> myObj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  myObj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>myObj<span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> res <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res
  <span class="token keyword">else</span> <span class="token keyword">return</span> myObj
<span class="token punctuation">}</span>
</code></pre>
<p>因为箭头函数既没有prototype，也没有自己的<code>this</code>，它的<code>this</code>其实是继承了外层执行环境中的<code>this</code>，且<code>this</code>指向永远不会改变，所以箭头函数不能作为构造函数使用，用new调用时会报错！</p>
<h4><a id="_490"></a>什么是回调地域</h4>
<p>回调地狱就是多层嵌套的问题。 每种任务的处理结果存在两种可能性（成功或失败），那么需要在每种任务执行结束后分别处理这两种可能性，需要多次异步请求的话，就会显得代码跳跃且乱。</p>
<h4><a id="PromisePromise_494"></a>实现一下Promise/Promise的原理</h4>
<p>promise的实现原理，Promise内部有一个变量记录当前状态为pending、fulfilled还是rejected，还有两个队列保存成功的回调和失败的回调。</p>
<p>当在Promise中调用resolve之后，如果当前状态为pending，则状态由pending转fulfilled，记录传入值，并依次执行成功回调；若在Promise中调用reject，如果当前状态为pending，则状态由pending转rejected，记录传入值，并依次执行失败回调。这就是resolve和reject的实现原理。</p>
<p>then方法的话，它允许注册成功、失败两个回调函数，如果当前状态为pending，则分别放入成功、失败回调数组中；如果为fulfilled，则执行成功回调；如果是rejected，则执行失败回调，最后返回this。</p>
<p>TODO: 为了支持同步的Promise，这里采用异步调用???</p>
<pre><code class="prism language-js"><span class="token comment">// 判断变量否为function</span>
<span class="token keyword">const</span> <span class="token function-variable function">isFunction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">variable</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> variable <span class="token operator">===</span> <span class="token string">'function'</span>
<span class="token comment">// 定义Promise的三种状态常量</span>
<span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">'pending'</span>
<span class="token keyword">const</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">'fulfilled'</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">'rejected'</span>

<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'MyPromise must accept a function as a parameter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_status <span class="token operator">=</span> <span class="token constant">PENDING</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//resolve的函数</span>
  <span class="token function">_resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_status <span class="token operator">!==</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">FULFILLED</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value
      <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">callback</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//reject的函数</span>
  <span class="token function">_reject</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_status <span class="token operator">!==</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_status <span class="token operator">=</span> <span class="token constant">REJECTED</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_value <span class="token operator">=</span> err
      <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加then方法</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> _value<span class="token punctuation">,</span> _status <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token comment">// 返回一个新的Promise对象</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onFulfilledNext<span class="token punctuation">,</span> onRejectedNext</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 封装一个成功时执行的函数</span>
      <span class="token keyword">let</span> <span class="token function-variable function">fulfilled</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">onFulfilledNext</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token function">onFulfilledNext</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 封装一个失败时执行的函数</span>
      <span class="token keyword">let</span> <span class="token function-variable function">rejected</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isFunction</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">onRejectedNext</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
          <span class="token function">onFulfilledNext</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>_status<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 当状态为pending时，将then方法回调函数加入执行队列等待执行</span>
        <span class="token keyword">case</span> <span class="token constant">PENDING</span><span class="token operator">:</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fulfilled<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>rejected<span class="token punctuation">)</span>
          <span class="token keyword">break</span>
        <span class="token comment">// 当状态已经改变时，立即执行对应的回调函数</span>
        <span class="token keyword">case</span> <span class="token constant">FULFILLED</span><span class="token operator">:</span>
          <span class="token function">fulfilled</span><span class="token punctuation">(</span>_value<span class="token punctuation">)</span>
          <span class="token keyword">break</span>
        <span class="token keyword">case</span> <span class="token constant">REJECTED</span><span class="token operator">:</span>
          <span class="token function">rejected</span><span class="token punctuation">(</span>_value<span class="token punctuation">)</span>
          <span class="token keyword">break</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加catch方法</span>
  <span class="token keyword">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
<span class="token punctuation">}</span>

<span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'成功啦'</span><span class="token punctuation">)</span>
    <span class="token comment">// reject('失败啦')</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hahah'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<pre><code class="prism language-js"><span class="token comment">//定义状态常量</span>
<span class="token keyword">const</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">"pending"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">"fulfilled"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">"rejected"</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyPromise</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//构造方法</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">handle</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">PENDING</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token comment">// 用于保存 resolve 的回调函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 用于保存 reject 的回调函数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCallbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//执行handle</span>
    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">handle</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//resolve的函数</span>
  <span class="token function">_resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">FULFILLED</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">callback</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//reject的函数</span>
  <span class="token function">_reject</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">!==</span> <span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token constant">REJECTED</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> err<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCallbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// then方法</span>
  <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value<span class="token punctuation">,</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// 返回一个新的Promise对象</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">onFulfilledNext<span class="token punctuation">,</span> onRejectedNext</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">switch</span> <span class="token punctuation">(</span>status<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">case</span> <span class="token constant">PENDING</span><span class="token operator">:</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>fulfilledCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>rejectedCallbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token comment">//状态改变，则立即执行对应的回调函数</span>
        <span class="token keyword">case</span> <span class="token constant">FULFILLED</span><span class="token operator">:</span>
          <span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token constant">REJECTED</span><span class="token operator">:</span>
          <span class="token function">onRejected</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
          <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
    
  <span class="token comment">// 添加catch方法</span>
  <span class="token comment">// 相当于调用 then 方法, 但只传入 Rejected 状态的回调函数</span>
  <span class="token keyword">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加静态resolve方法</span>
  <span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 如果参数是MyPromise实例，直接返回这个实例</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">MyPromise</span><span class="token punctuation">)</span> <span class="token keyword">return</span> value
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加静态reject方法</span>
  <span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加静态all方法</span>
  <span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//返回值的集合</span>
      <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>
      <span class="token comment">//entries() 方法返回一个数组的迭代对象，该对象包含数组的键值对 (key/value)。</span>
	  <span class="token comment">//迭代对象中数组的索引值作为 key， 数组元素作为 value。</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>i<span class="token punctuation">,</span> p<span class="token punctuation">]</span> <span class="token keyword">of</span> list<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 数组参数如果不是MyPromise实例，先调用MyPromise.resolve</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          values<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> res
          count<span class="token operator">++</span>
          <span class="token comment">// 所有状态都变成fulfilled时返回的MyPromise状态就变成fulfilled</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token function">resolve</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 有一个被rejected时返回的MyPromise状态就变成rejected</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 添加静态race方法</span>
  <span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MyPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> p <span class="token keyword">of</span> list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 只要有一个实例率先改变状态，新的MyPromise的状态就跟着改变</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// finally 方法用于指定不管 Promise 对象最后状态如何，都会执行的操作</span>
  <span class="token comment">//无论成功失败都执行的函数,其实就是给then方法分别传入这个方法。使用resolve将执行后的函数结果进行包装，调用then方法，该return return 该抛出错误该抛出错误</span>
  <span class="token keyword">finally</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
      <span class="token parameter">value</span> <span class="token operator">=&gt;</span> MyPromise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> MyPromise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">cb</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">throw</span> reason <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>

</code></pre>
<h4><a id="call_apply_bind_741"></a>call() 、apply() 和bind()的区别？</h4>
<p>apply 、 call 、bind 三者都是用来改变this指向的。</p>
<p>call：接受一个上下文对象，参数列表，返回函数执行后的值。</p>
<p>apply：接受一个上下文对象，参数数组，返回函数执行后的值。</p>
<p>bind：接受一个上下文对象，参数列表，返回新函数。</p>
<blockquote>
<ul><li>说一下this的指向</li></ul>
</blockquote>
<h4><a id="this_753"></a>说一下this的指向</h4>
<p>this的指向，在调用时才能确定。</p>
<p>this指向的优先级：箭头函数、new、call/apply/bind、对象.、直接调用</p>
<p>1、箭头函数的this，指向定义箭头函数的上下文，即指向外层的 this 。</p>
<p>2、new 对象，this 指向新创建的对象。</p>
<p>3、call、bind、apply修改this指向，指向这个传入的context上下文，不传指向window</p>
<p>4、通过obj.某函数调用，this指向Obj</p>
<p>5、在全局上下文中调用，非严格模式下，this指向windows，严格模式下指向undefined。如果不再全局，被谁调用 this 指向谁。</p>
<pre><code class="prism language-js">window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> 
 color<span class="token operator">:</span> <span class="token string">'blue'</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token keyword">function</span> <span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this指向windows</span>
<span class="token punctuation">}</span> 
<span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'red' </span>
o<span class="token punctuation">.</span>sayColor <span class="token operator">=</span> sayColor<span class="token punctuation">;</span> 
o<span class="token punctuation">.</span><span class="token function">sayColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 'blue'</span>
</code></pre>
<p>6、匿名函数、自动执行函数的this，指向window。</p>
<p><strong>测试题</strong></p>
<pre><code class="prism language-js"><span class="token comment">// 1、</span>
<span class="token keyword">function</span> <span class="token function">Pig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">99</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> pig<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Pig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pig<span class="token punctuation">)</span> 

<span class="token comment">// 2、</span>
<span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">printA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> obj<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
  a<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>
  foo<span class="token operator">:</span>printA<span class="token punctuation">,</span>
  <span class="token function-variable function">bar</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">printA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
obj<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">var</span> foo<span class="token operator">=</span>obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">// 3、</span>
<span class="token keyword">var</span> fullName <span class="token operator">=</span> <span class="token string">'language'</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  fullName<span class="token operator">:</span> <span class="token string">'javascript'</span><span class="token punctuation">,</span>
  prop<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">getFullName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fullName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prop<span class="token punctuation">.</span><span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> test <span class="token operator">=</span> obj<span class="token punctuation">.</span>prop<span class="token punctuation">.</span>getFullName
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 4、</span>
<span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">var</span> json <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  val<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
  <span class="token function-variable function">dbl</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    val <span class="token operator">*=</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
json<span class="token punctuation">.</span><span class="token function">dbl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>val <span class="token operator">+</span> val<span class="token punctuation">)</span>

<span class="token comment">// 5、</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span> 
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> num<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
obj<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">3</span>
  num<span class="token operator">++</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">+=</span> n 
    num<span class="token operator">++</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> 
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> obj<span class="token punctuation">.</span>fn
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span>

<span class="token comment">// 6、</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  _name<span class="token operator">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
  <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token function-variable function">arrowFunc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>_name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> arrowFunc
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> func <span class="token operator">=</span> obj<span class="token punctuation">.</span>func
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> _name<span class="token operator">:</span> <span class="token string">'newObj'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">func</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> _name<span class="token operator">:</span> <span class="token string">'bindObj'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> _name<span class="token operator">:</span> <span class="token string">'applyObj'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>答案：</p>
<p>1、Pig {age:99}</p>
<p>2、2、1、1</p>
<p>解释：</p>
<p>（1）obj.foo()，printA直接被obj调用，this指向obj。</p>
<p>（2）obj.bar()，bar的属性值是一个function，function中调用printA，没有明确哪个对象调用的printA，this默认指向全局window。</p>
<p>（3）foo()，将obj.foo赋予给foo，调用foo()，相当于调用window.foo()，this指向window。</p>
<p>3、undefined、language</p>
<p>4、12</p>
<p>解释：dbl方法中，没有使用this，此时的 val 为全局 val</p>
<p>5、22 23 65 30</p>
<p>解释：</p>
<p>（1）第三行 obj.fn 立即执行函数，将20传入，自动执行函数 this 指向 window ，此时<strong>全局 num 变为60</strong>，<strong>内部num变为21</strong>，返回一个函数。</p>
<p>（2）fn(5)，调用函数，此时在全局上下文中调用，this 执行window，**全局 num 变为65 **，<strong>内部num变为22</strong>，<strong>输出22</strong>。</p>
<p>（3）obj.fn(10)，此时 this 执行 obj ，<strong>obj 的 num 变为30</strong>，<strong>内部num变为23</strong>，<strong>输出23</strong></p>
<p>（4）最后输出全局num和obj.num，<strong>即65,30</strong></p>
<p>6、obj、undefined、newObj、undefined、bindObj</p>
<p>解释：</p>
<p>（1）调用obj.func()()，箭头函数的this指向func的this，func的this为obj，故<strong>输出obj</strong>。</p>
<p>（2）func()，func的指向为window，window没有_name，故<strong>输出undefined</strong></p>
<p>（3）bind 一个对象，<strong>输出newObj</strong></p>
<p>（4）bind没有指明上下文，则bind window，<strong>输出undefined</strong></p>
<p>（5）多次修改this指向，只认第一次，<strong>输出bindObj</strong></p>
<h4><a id="_Event_loop_919"></a>事件循环 Event loop</h4>
<p>JS的整个执行过程，我们称为事件循环过程，这个过程中涉及执行栈和两个任务队列：宏任务、微任务。</p>
<p>宏任务包括：</p>
<p>1、script整体代码</p>
<p>2、setTimeout、setInterval</p>
<p>3、node环境的setImmediate</p>
<p>4、输入输出和UI render</p>
<p>微任务包括：</p>
<p>1、node环境的process.nextTick</p>
<p>2、Promise的回调函数</p>
<p>3、MutationObserver的回调</p>
<p>4、await后面的代码</p>
<p>执行过程：执行宏任务，执行该宏任务产生的微任务，微任务执行完毕后，再回到宏任务中进行下一轮循环。</p>
<blockquote>
<ul><li>async函数里面await标记之前的语句和 await 后面的语句是<strong>同步</strong>执行的。</li><li>后面的语句是<strong>异步</strong>的，丢进Micro</li><li>new Promise在实例的过程中执行代码都是同步进行的，只有回调.then()才是微任务。</li><li><strong>注意：Promise中resolve之后，代码还会执行，除非在resolve的同时return</strong></li></ul>
</blockquote>
<p><strong>Q：</strong></p>
<pre><code class="prism language-js"><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'真的在300ms后打印吗？'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span>
</code></pre>
<p>**A：**不一定是精确的300ms之后打印。因为300ms的setTimeout并不是说300ms之后立马执行，而是300ms之后被放入任务列表里面。等待事件循环，等待它执行的时候才能执行代码。</p>
<p><strong>MutationObserve</strong></p>
<p>用于观察DOM节点的变化。</p>
<pre><code class="prism language-js"><span class="token keyword">var</span> observe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mutations<span class="token punctuation">,</span>observer</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>observe对象有三个方法：observe、disconnect、taskRecords。</p>
<ul><li>observe：设置观察目标，接受两个参数，target：观察目标，options：通过对象成员来设置观察选项</li></ul>
<pre><code class="prism language-js">observe<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span> childList<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4><a id="call_apply_bind_977"></a>手写call 、apply 、bind方法</h4>
<p>将函数this设置为context对象的属性，通过隐式绑定的方式调用函数，把context上的属性删了，并返回函数调用的返回值</p>
<p><strong>call</strong></p>
<pre><code class="prism language-js"><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_call</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context <span class="token operator">=</span> window<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//创建独一无二属性，以免覆盖原属性</span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">//通过隐式绑定的方式调用函数</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//删除添加的属性</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//返回函数调用的返回值</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>apply</strong></p>
<pre><code class="prism language-js"><span class="token comment">// 第二个参数是数组</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_apply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context <span class="token operator">=</span> window<span class="token punctuation">,</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token comment">//通过隐式绑定的方式调用函数</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//删除添加的属性</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//返回函数调用的返回值</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>bind</strong></p>
<pre><code class="prism language-js"><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_bind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">newFn</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>newArgs</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>newArgs<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>如何校验正确性：</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'chenhuan'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">sayName</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fn <span class="token operator">=</span> obj<span class="token punctuation">.</span>sayName
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre>
<h4><a id="_1039"></a>深拷贝和浅拷贝</h4>
<p>深拷贝是将一个对象从内存中完整的拷贝一份出来，开辟一个新的内存空间存放新对象，且<strong>修改新对象不会影响原对象</strong>。</p>
<p>浅拷贝是创建一个新对象，这个对象有着原始对象属性值的一份拷贝。如果属性是基本类型，拷贝的就是基本类型的值，如果属性是引用类型，拷贝的就是内存地址 ，所以<strong>如果其中一个对象改变了这个地址，就会影响到另一个对象</strong>。</p>
<h4><a id="_1045"></a>实现浅拷贝</h4>
<p>1.Object.assign()</p>
<p>Object.assign() 方法可以把源对象自身的可枚举属性拷贝给目标对象，然后返回目标对象。</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> person<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>name<span class="token operator">:</span> <span class="token string">"kobe"</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">41</span><span class="token punctuation">}</span><span class="token punctuation">,</span>sports<span class="token operator">:</span><span class="token string">'basketball'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"wade"</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>sports <span class="token operator">=</span> <span class="token string">'football'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { person: { name: 'wade', age: 41 }, sports: 'basketball' }</span>
</code></pre>
<p>3、Array.prototype.concat()</p>
<p>4、Array.prototype.slice()</p>
<p>5、函数库lodash的_.clone方法</p>
<p>6、展开运算符<code>...</code></p>
<h4><a id="_1067"></a>实现深拷贝</h4>
<p>1、函数库lodash的_.cloneDeep方法</p>
<p>2、</p>
<pre><code class="prism language-js"><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="prism language-js"><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'chenhuan'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"liuboyi"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//{name: 'chenhuan', age: 18}</span>
</code></pre>
<p>3、递归深拷贝</p>
<p>判断当前值是否为对象</p>
<p>1、如果不是对象，直接返回</p>
<p>2、如果是对象，创建结果数组，遍历对象，对当前值进行递归拷贝。</p>
<pre><code class="prism language-js"><span class="token comment">//递归实现深拷贝</span>
<span class="token keyword">function</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//递归拷贝</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      cloneTarget<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">cloneDeep</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//返回递归拷贝后的结果</span>
    <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//直接返回cuo</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4><a id="WeakMapMap_1116"></a>WeakMap和Map的区别，及其应用场景</h4>
<p>Map 叫字典，以键值对的形式存储。</p>
<p>Map 的键可以为任意值，而 WeakMap 的键只能是弱引用对象，在进行垃圾回收的时候不会考虑 WeakMap 对对象的引用。</p>
<p>Map的应用场景：数组去重，数据存储</p>
<p>WeakMap应用场景：保存DOM节点关联元数据。</p>
<h4><a id="WeakSetSet_1126"></a>WeakSet和Set的区别，及其应用场景</h4>
<p>Set 集合，与数组类似，但成员唯一且无序，无重复值。</p>
<p>Set 的元素可以为任意值，WeakSet 的元素只能为弱引用对象。</p>
<p>Set ：数组去重，数据存储</p>
<p>WeakSet应用：给对象打标签，例如查询元素是不是被禁用。</p>
<h4><a id="MapSet_1136"></a>Map与Set的区别</h4>
<p>Set 叫做集合，Map 叫做字典。</p>
<p>Set类似于数组，但成员是唯一且无序的，没有重复的值。</p>
<p>Map类似于对象，以键值对的形式进行存储，键可以为任意类型。</p>
<h4><a id="Set_1144"></a>Set的方法</h4>
<p>**属性：**set.size获取个数</p>
<p><strong>方法：</strong></p>
<ul><li>add(value)：新增</li><li>delete(value)：存在即删除集合中value</li><li>has(value)：判断集合中是否存在 value</li></ul>
<p><strong>Set转数组</strong></p>
<ul><li>Array.from 方法可以将 Set 结构转为数组</li><li>使用…剩余运算符</li></ul>
<p><strong>遍历</strong></p>
<ul><li><code>Set.prototype.keys()</code>：返回键名的遍历器</li><li><code>Set.prototype.values()</code>：返回键值的遍历器</li><li><code>Set.prototype.entries()</code>：返回键值对的遍历器</li><li><code>Set.prototype.forEach((item,key)=&gt;{})</code>：使用回调函数遍历每个成员</li></ul>
<h4><a id="Map_1170"></a>Map的方法</h4>
<p><strong>方法</strong></p>
<ul><li>set(key, value)：向字典中添加新元素</li><li>get(key)：通过键查找特定的数值并返回</li><li>has(key)：判断字典中是否存在键key</li><li>delete(key)：通过键 key 从字典中移除对应的数据</li><li>clear()：将这个字典中的所有元素删除</li></ul>
<p><strong>遍历</strong></p>
<ul><li><code>Map.prototype.forEach((item,key)=&gt;{})</code>：遍历 Map 的所有成员。</li><li><code>Map.prototype.keys()</code>：返回键名的遍历器。</li><li><code>Map.prototype.values()</code>：返回键值的遍历器。</li><li><code>Map.prototype.entries()</code>：返回所有成员的遍历器。</li></ul>
<h4><a id="_1187"></a>数组扁平化</h4>
<p>数组扁平化：将嵌套的数组进行降维处理。</p>
<p>可以使用数组拍平方法 <code>Array.prototype.flat()</code>，接受一个参数</p>
<ul><li> <p>不传参数时，默认“拉平”一层，可以传入一个整数，表示想要“拉平”的层数。</p> </li><li> <p>传入 <code>&lt;=0</code> 的整数将返回原数组，不“拉平”</p> </li><li> <p><code>Infinity</code> 关键字作为参数时，无论多少层嵌套，都会转为一维数组</p> </li><li> <p>如果原数组有空位，<code>Array.prototype.flat()</code> 会跳过空位。</p> </li></ul>
<h4><a id="flat_1201"></a>实现数组拍平flat函数</h4>
<p>实现思路：</p>
<p>1、遍历数组</p>
<p>2、判断当前数组是否为数组</p>
<p>3、展开一层数组</p>
<pre><code class="prism language-js"><span class="token comment">//拍平数组</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_flat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//&lt;=0不展开直接返回</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//展开</span>
      arr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">_flat</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  num<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>reduce拍平</strong></p>
<pre><code class="prism language-js"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_flat</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      sum <span class="token operator">=</span> sum<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span><span class="token function">_flat</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      sum<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> sum
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  num<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<h4><a id="_1257"></a>介绍一下遍历方法</h4>
<ul><li>for … of</li><li>for … in</li><li>forEach()</li><li>reduce()</li><li>map()</li></ul>
<p><strong>for … of</strong></p>
<p>for…of 循环可以使用的范围包括数组、Set 和 Map 结构以及字符串等可遍历对象。</p>
<pre><code class="prism language-js"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> v <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// red green blue</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>for … in</strong></p>
<p>for…in 一般用于遍历对象，循环读取键名。</p>
<p><strong>forEach()</strong></p>
<p>forEach() 方法用于调用数组的每个元素，并将元素传递给回调函数。</p>
<p><strong>reduce()</strong></p>
<p>reduce() 接收一个函数作为累加器，数组中的每个值（从左到右）开始获取，最终计算为一个值。</p>
<pre><code class="prism language-js">array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span> initialValue<span class="token punctuation">)</span>
</code></pre>
<p><strong>map()</strong></p>
<p>map() 方法返回一个新数组，数组中的元素为原始数组元素调用函数处理后的值。</p>
<h4><a id="mapforeach_1296"></a>map和foreach有什么区别</h4>
<p>forEach一般只用来遍历数组，不改变其数据。</p>
<p>map用来遍历数组并改变数据，返回新数组。</p>
<p>1、forEach()方法不会返回执行结果，而是undefined；map()方法会得到一个新的数组并返回。</p>
<p>2、map能保证原始数组的不变。forEach 不能确保数组的不变性，只有你不改变数据，原数组才会不变。</p>
<h4><a id="_1306"></a>怎么用栈去实现队列</h4>
<p>建两个栈s1、s2，在出栈的时候把栈底元素取出来，入栈的时候正常入栈。</p>
<p>1、入栈请求时，将数据压入s1。</p>
<p>2、出栈请求时，判断s2栈是否为空，不为空则将s2栈顶元素出栈；若为空，则将s1中数据依次压入s2，再取s2栈顶元素。</p>
<h4><a id="attributeproperty_1314"></a>attribute和property的区别</h4>
<p>attribute 是 <strong>dom 元素</strong>在文档中<strong>作为</strong> html 标签<strong>拥有的属性</strong><br/> property 是 <strong>dom 元素</strong>在 js 中<strong>作为</strong>对象<strong>拥有的属性。</strong></p>
<p>对于 html 的标准属性来说，attribute 和 property 是同步的，是会自动更新的(input的value值除外)，但是对于自定义的属性来说，他们是不同步的。</p>
<h4><a id="async__defer__1321"></a>async 和 defer 的作用是什么？有什么区别？（浏览器解析过程）</h4>
<p>如果不加 async 和 defer，代码执行到script就会立即加载和执行js脚本，阻塞文档解析。</p>
<ul><li>defer是延迟执行脚本，async是异步执行脚本。</li><li>加了defer属性后会立即加载脚本，但执行会推迟到文档渲染完成后。</li><li>加了async属性是脚本加载完毕后立即执行，脚本加载的过程，并不妨碍页面中的其他操作，但脚本的执行会阻塞文档解析。</li></ul>
<h4><a id="asyncdeferjs_1329"></a>使用async/defer后的js脚本会阻塞文档的解析吗？</h4>
<p>defer是在HTML解析完之后才会执行，不会阻塞文档的解析。</p>
<p>而 aysnc 它是加载完成后立即执行，也就是说，设置async属性的js脚本的加载不会阻塞文档的解析，但是他的执行会阻塞文档的解析。</p>
<h4><a id="Cssdom__1335"></a>Css会阻塞dom解析吗 为什么会阻塞渲染</h4>
<p>css不会阻塞Dom的解析，但会阻塞Dom的渲染。</p>
<p>我认为这是浏览器的优化机制，因为你加载css的时候，可能会修改下面DOM节点的样式，如果css加载不阻塞DOM树渲染的话，那么当css加载完之后，DOM树可能又得重新重绘或者回流了，这就造成了一些没有必要的损耗。所以干脆等css加载完后，再来渲染DOM。</p>
<h4><a id="cssjs_1341"></a>css加载会阻塞js运行吗？</h4>
<p>CSS的加载会阻塞JS运行。</p>
<h4><a id="JS_1345"></a>调试JS的工具</h4>
<ul><li>log输出</li><li>Source断点调试</li></ul>
<h4><a id="promiseall__promiserace_1350"></a>promise.all 和 promise.race的区别</h4>
<p>promise.all 全成功才成功，有失败则失败。</p>
<p>promise.race 跟随第一个状态改变的状态。</p>
<h4><a id="promiseallpromise_1356"></a>promise.all是并行的，怎么封装promise做串行处理</h4>
<p>并行：多个异步请求同时进行</p>
<p>串行：一个异步请求完了之后在进行下一个请求</p>
<p>**实际场景：**有三个方法，方法一、方法二、方法三，需要执行完方法一之后执行方法二，执行完方法二之后执行方法三。</p>
<pre><code class="prism language-js"><span class="token keyword">var</span> <span class="token function-variable function">p</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1000'</span><span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">p1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2000'</span><span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">p2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3000'</span><span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>思路1：then方法</strong></p>
<p>1、执行第一个promise，在第一个promise状态改变后，也就是在then方法中，返回第二个promise并执行，同理。</p>
<pre><code class="prism language-js"><span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">p1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">p2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre>
<p><strong>思路2：async</strong></p>
<pre><code class="prism language-js"><span class="token keyword">var</span> <span class="token function-variable function">fn</span><span class="token operator">=</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token operator">=</span>arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> result<span class="token operator">=</span><span class="token keyword">await</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>   
<span class="token function">fn</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
</code></pre>
<h4><a id="Promisepromise_JS__1418"></a>封装一个异步类，实现只能有两个Promise在执行，该如何实现？/限制promise的并发数/ JS 请求调度器</h4>
<p><strong>思路</strong></p>
<ol><li>类中有max、count、一个quene队列保存超出数量限制待执行的任务</li><li>一个addTask方法用来添加任务，该方法返回一个Promise，为了让外面感知，该任务什么时候执行完毕。addTask中获取一个待执行任务的函数，并判断count是否少于max，少于则执行，不少于则放入等待队列。</li><li>一个getTask方法用来返回待执行任务的函数，在函数中执行数量+1，随后执行任务，使用finally方法，无论成功失败，执行完后count-1，此时腾出位置，判断等待队列是否有任务，若有任务，则取出执行，并在finally执行完毕之后</li></ol>
<pre><code class="prism language-js"><span class="token keyword">class</span> <span class="token class-name">limitRun</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">maxNum</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>max <span class="token operator">=</span> maxNum
    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>quene <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//添加任务</span>
  <span class="token function">addTask</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 为什么return Promise 为了让外面感知 这个任务什么时候能执行完毕</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//获取待执行任务</span>
      <span class="token keyword">let</span> task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getTask</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> args<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>max<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'run'</span><span class="token punctuation">)</span>
        <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'wait'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>quene<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>task<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//获取待执行任务的函数 返回一个函数</span>
  <span class="token function">getTask</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> args<span class="token punctuation">,</span> resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//执行数量+1</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
      <span class="token function">p</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>reject<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">//无论执行成功或失败，执行完毕-1</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">--</span>
          <span class="token comment">// 空位置腾出 如果有排队 重新拿出任务执行</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>quene<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'get from quene'</span><span class="token punctuation">)</span>
            <span class="token keyword">let</span> task <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>quene<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> limit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">limitRun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token function-variable function">p</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>delay<span class="token punctuation">)</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  limit<span class="token punctuation">.</span><span class="token function">addTask</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">个任务执行完毕</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre>
<p>最后输出：<br/> run<br/> run<br/> run<br/> wait<br/> wait<br/> 1000<br/> 第1个任务执行完毕<br/> get from quene<br/> 2000<br/> 第2个任务执行完毕<br/> get from quene<br/> 3000<br/> 第3个任务执行完毕<br/> 4000<br/> 第4个任务执行完毕<br/> 5000<br/> 第5个任务执行完毕</p>
<h4><a id="abc_5_1508"></a>不用循环，实现abc *5的字符串的一个连接。</h4>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">strn</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">strn</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//abcabcabcabcabc</span>
</code></pre>
<h4><a id="ArrayAPI_1518"></a>说一下Array的内置的API</h4>
<p>增删 push pop shift unshift splice</p>
<p>查找 indexOf lastIndexOf includes find findIndex some every</p>
<p>拷贝 / 连接 concat slice</p>
<p>筛选 /遍历 filter map reduce forEach</p>
<p>其他 join reverse fill Array.isArray Array.from</p>
<p>concat() 连接两个或更多的数组，并返回结果。</p>
<p>copyWithin() 从数组的指定位置拷贝元素到数组的另一个指定位置中。</p>
<p><strong>语法</strong></p>
<pre><code>array.copyWithin(target, start, end)
</code></pre>
<p><strong>参数</strong></p>
<table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>target</em></td><td align="left">必需。复制到指定目标索引位置。</td></tr><tr><td align="left"><em>start</em></td><td align="left">可选。元素复制的起始位置。</td></tr><tr><td align="left"><em>end</em></td><td align="left">可选。停止复制的索引位置 (默认为 <em>array</em>.length)。如果为负值，表示倒数。</td></tr></tbody></table>
<pre><code class="prism language-js">实例
复制数组的前面两个元素到后面两个元素上：
<span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"Banana"</span><span class="token punctuation">,</span> <span class="token string">"Orange"</span><span class="token punctuation">,</span> <span class="token string">"Apple"</span><span class="token punctuation">,</span> <span class="token string">"Mango"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fruits<span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fruits 输出结果：
Banana<span class="token punctuation">,</span>Orange<span class="token punctuation">,</span>Banana<span class="token punctuation">,</span>Orange
</code></pre>
<p>entries() 返回数组的可迭代对象。</p>
<p>every() 检测数值元素的每个元素是否都符合条件。</p>
<ul><li>如果数组中检测到有一个元素不满足，则整个表达式返回 <em>false</em> ，且剩余的元素不会再进行检测。</li><li>如果所有元素都满足条件，则返回 true。</li></ul>
<pre><code class="prism language-js">array<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span> thisValue<span class="token punctuation">)</span>
</code></pre>
<table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td><em>thisValue</em></td><td>可选。对象作为该执行回调时使用，传递给函数，用作 “this” 的值。 如果省略了 thisValue ，“this” 的值为 “undefined”</td></tr></tbody></table>
<p>fill() 使用一个固定值来填充数组。</p>
<p>filter() 检测数值元素，并返回符合条件所有元素的数组。</p>
<p>find() 返回通过测试（函数内判断）的数组的第一个元素的值。</p>
<p>find() 方法为数组中的每个元素都调用一次函数执行：</p>
<ul><li>当数组中的元素在测试条件时返回 <em>true</em> 时, find() 返回符合条件的元素，之后的值不会再调用执行函数。</li><li>如果没有符合条件的元素返回 <strong>undefined</strong></li></ul>
<pre><code>array.find(function(currentValue, index, arr),thisValue)
</code></pre>
<p>findIndex() 返回传入一个测试条件（函数）符合条件的数组第一个元素位置。</p>
<p>findIndex() 方法为数组中的每个元素都调用一次函数执行：</p>
<ul><li>当数组中的元素在测试条件时返回 <em>true</em> 时, findIndex() 返回符合条件的元素的索引位置，之后的值不会再调用执行函数。</li><li>如果没有符合条件的元素返回 -1</li></ul>
<p>forEach() 数组每个元素都执行一次回调函数。</p>
<p>from()方法就是将一个<strong>类数组对象</strong>或者<strong>可遍历对象</strong>转换成一个真正的数组。</p>
<pre><code class="prism language-js"><span class="token comment">//类数组对象转换为数组：</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'ch'</span><span class="token punctuation">,</span>
  <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> <span class="token string">'sex'</span><span class="token punctuation">,</span>
  <span class="token string">'length'</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr1 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[ 'ch', 'en', 'sex' ]</span>

<span class="token comment">//将Set结构的数据转换为真正的数组：</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">,</span><span class="token number">9797</span><span class="token punctuation">,</span><span class="token number">564</span><span class="token punctuation">,</span><span class="token number">134</span><span class="token punctuation">,</span><span class="token number">45642</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// [ 12, 45, 97, 9797, 564, 134, 45642 ]</span>

<span class="token comment">//将字符串转换为数组：</span>
<span class="token keyword">let</span>  str <span class="token operator">=</span> <span class="token string">'hello world!'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// ["h", "e", "l", "l", "o", " ", "w", "o", "r", "l", "d", "!"]</span>


</code></pre>
<blockquote>
<p>一个类数组对象转换为一个真正的数组，必须具备以下条件：</p>
<p>1、该类数组对象必须具有 <code>length</code> 属性，用于指定数组的长度。如果没有 <code>length</code> 属性，那么转换后的数组是一个空数组。</p>
<p>2、该类数组对象的属性名必须为数值型或字符串型的数字</p>
</blockquote>
<p>indexOf() 搜索元素在数组的位置，从前往后查找，返回它所在的位置，没找到返回-1。接收两个参数：查找元素、开始查找位置。</p>
<p>lastIndexOf() 搜索元素在数组的位置，从后往前找，返回它所在的位置，没找到返回-1。接收两个参数：查找元素、开始查找位置。</p>
<p>includes() 判断一个数组是否包含一个指定的值。如果是返回 true，否则false。接收两个参数：查找元素、开始查找位置。</p>
<p>isArray() 判断对象是否为数组。</p>
<p>join() 把数组的所有元素放入一个字符串。</p>
<p>map() 通过指定函数处理数组的每个元素，并返回处理后的数组。</p>
<p>pop() 删除数组的最后一个元素并返回删除的元素。</p>
<p>push() 向数组的末尾添加一个或更多元素，并<strong>返回新的长度。</strong></p>
<p>reduce() 接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。</p>
<pre><code>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)
</code></pre>
<p><strong>参数</strong></p>
<table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><em>function(total,currentValue, index,arr)</em></td><td align="left">必需。用于执行每个数组元素的函数。 total：必须，初始值，或者计算结束后的返回值。currentValue：必需，当前元素。currentIndex：可选，当前元素的索引。arr：可选，当前元素所属的数组对象。</td></tr><tr><td align="left"><em>initialValue</em></td><td align="left">可选。传递给函数的初始值</td></tr></tbody></table>
<p>reduceRight() 和reduce()功能一样，只不过是从右往左。</p>
<p>reverse() 反转数组的元素顺序。</p>
<p>shift() 删除并返回数组的第一个元素。</p>
<p>slice(start,[end]) 选取数组的一部分，并返回一个新数组。</p>
<p>some() 检测数组元素中是否有元素符合指定条件。</p>
<ul><li>如果有一个元素满足条件，则表达式返回<em>true</em> , 剩余的元素不会再执行检测。</li><li>如果没有满足条件的元素，则返回false。</li></ul>
<p>sort() 对数组的元素进行排序。</p>
<p>排序顺序可以是字母或数字，并按升序或降序。</p>
<p>默认排序顺序为按字母升序。</p>
<p>splice(index,deletenum,additem1,additem2…) 从数组中添加或删除元素。</p>
<p>toString() 把数组转换为字符串，并返回结果，数组中的元素之间用逗号分隔。</p>
<p>unshift() 向数组的开头添加一个或更多元素，并<strong>返回新的长度。</strong></p>
<p>valueOf() 返回数组对象的原始值。</p>
<h4><a id="API_1744"></a>说一下字符串的内置的API</h4>
<pre><code>记忆顺序：
查找、转换、拷贝/连接、填充、匹配。其他。
</code></pre>
<p>查找 indexOf lastIndexOf charAt includes</p>
<p>转换 toLowerCase toUpperCase</p>
<p>拷贝 / 连接 concat slice substr substring repeat</p>
<p>填充 padStart(len,str) padEnd(len,str)</p>
<p>其他 split trim</p>
<p>匹配 match search replace</p>
<p><strong>1、查找</strong></p>
<p>str.charAt(index) 获取指定位置的字符</p>
<p>indexOf() 返回某个指定的字符串值在字符串中首次出现的位置</p>
<p>lastIndexOf() 从后向前搜索字符串，并从起始位置（0）开始计算返回字符串最后出现的位置</p>
<p>includes() 查找字符串中是否包含指定的子字符串。</p>
<p>startsWith(x,[startindex])以x字符串开头，true/false。第二个参数为开始搜索位置。</p>
<p>endsWith(x,[endindex])以x字符串结尾,true/false。第二个参数表示字符串末尾位置。</p>
<p><strong>2、转换</strong></p>
<p>str.toLowerCase() 所有字符都转成小写</p>
<p>str.toUpperCase() 所有的字符都转成大写</p>
<p><strong>3.字符串连接与截取</strong></p>
<p>concat() 连接两个或更多字符串，并返回新的字符串。</p>
<p>slice(start,end) 提取字符串的片断，并在新的字符串中返回被提取的部分。 可以为负的整数</p>
<p>substr() 从起始索引号提取字符串中指定数目的字符。 非负的整数</p>
<p>substring() 提取字符串中两个指定的索引号之间的字符。 非负的整数</p>
<p>repeat() 复制字符串指定次数，并将它们连接在一起返回。</p>
<p><strong>4、字符串填充</strong></p>
<p>padStart(len,str)复制字符串，小于指定长度，在左边填充字符，直至长度满足，两个参数：长度、填充字符串（默认空格,可多个字符）。</p>
<p>padEnd(len,str)在右边填充</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> stringValue <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// " foo" </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "......foo" </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "foo " </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "foo......"</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "barbafoo" </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringValue<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "foo"</span>
</code></pre>
<p><strong>5、字符串分割</strong></p>
<p>split() 把字符串分割为字符串数组，接受两个参数，第一个为分隔符/正则，第二个为数组大小。</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> colorText <span class="token operator">=</span> <span class="token string">"red,blue,green,yellow"</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> colors1 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue", "green", "yellow"] </span>
<span class="token keyword">let</span> colors2 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue"] </span>
<span class="token keyword">let</span> colors3 <span class="token operator">=</span> colorText<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^,]+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["", ",", ",", ",", ""]</span>
</code></pre>
<p><strong>6、其他</strong></p>
<p>trim() 去除字符串前后的空白</p>
<p>valueOf() 返回某个字符串对象的原始值（基本数据类型，如果没有，返回对象本身）。</p>
<p><strong>7、字符串模式匹配</strong></p>
<p>search() 查找与正则表达式相匹配的值，<strong>返回第一个匹配的位置索引</strong>，没找到返回-1。</p>
<p>match() 查找找到一个或多个正则表达式的匹配，将会把所有的匹配打包成一个数组返回。</p>
<p><strong>replace(字符串/RegExp对象，字符串或函数)</strong></p>
<pre><code class="prism language-js"><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">"cat, bat, sat, fat"</span><span class="token punctuation">;</span> 
<span class="token keyword">let</span> result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"at"</span><span class="token punctuation">,</span> <span class="token string">"ond"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "cond, bat, sat, fat" </span>
result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">at</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"ond"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "cond, bond, sond, fond"</span>
</code></pre>
<ul><li> <p>第二个参数是字符串的情况下，有几个特殊的字符序列，可以用来插入正则表达式操作的值。</p> <p><code>$n</code> 匹配第 <em>n</em> 个捕获组的字符串。</p> <pre><code class="prism language-js"><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">"cat, bat, sat, fat"</span><span class="token punctuation">;</span> 
result <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(.at)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">"word ($1)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// word (cat), word (bat), word (sat), word (fat)</span>
</code></pre> </li><li> <p>replace()的第二个参数可以是一个函数。在只有一个匹配项时，这个函数会收到 3 个参数：与整个模式匹配的字符串、匹配项在字符串中的开始位置，以及整个字符串。在有多个捕获组的情况下，每个匹配捕获组的字符串也会作为参数传给这个函数，但最后两个参数还是与整个模式匹配的开始位置和原始字符串。这个函数应该返回一个字符串，表示应该把匹配项替换成什么。使用函数作为第二个参数可以更细致地控制替换过程</p> <pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
     <span class="token keyword">return</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&lt;&gt;"&amp;]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">match<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> originalText</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
         <span class="token keyword">switch</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
             <span class="token keyword">case</span> <span class="token string">"&lt;"</span><span class="token operator">:</span> 
             	<span class="token keyword">return</span> <span class="token string">"&amp;lt;"</span><span class="token punctuation">;</span> 
         	<span class="token keyword">case</span> <span class="token string">"&gt;"</span><span class="token operator">:</span> 
         		<span class="token keyword">return</span> <span class="token string">"&amp;gt;"</span><span class="token punctuation">;</span> 
        	 <span class="token keyword">case</span> <span class="token string">"&amp;"</span><span class="token operator">:</span> 
         		<span class="token keyword">return</span> <span class="token string">"&amp;amp;"</span><span class="token punctuation">;</span> 
        	 <span class="token keyword">case</span> <span class="token string">"\""</span><span class="token operator">:</span> 
        		 <span class="token keyword">return</span> <span class="token string">"&amp;quot;"</span><span class="token punctuation">;</span> 
         <span class="token punctuation">}</span> 
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">htmlEscape</span><span class="token punctuation">(</span><span class="token string">"&lt;p class=\"greeting\"&gt;Hello world!&lt;/p&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// "&amp;lt;p class=&amp;quot;greeting&amp;quot;&amp;gt;Hello world!&lt;/p&gt;"</span>
</code></pre> </li></ul>
<p><strong><code>matchAll()</code></strong> 方法返回一个包含所有匹配正则表达式的结果及分组捕获组的迭代器。</p>
<p><strong>8、字符串迭代和解构</strong></p>
<p>[…str]会变成元素为单个字符的数组</p>
<h4><a id="_1884"></a>事件流</h4>
<p>事件流一共由三个阶段分别是：1.捕获阶段 2.目标阶段 3.冒泡阶段</p>
<h4><a id="_1888"></a>介绍一下事件冒泡和捕获</h4>
<p><strong>事件冒泡</strong>是指，事件会从最内层的元素开始发生，一直向上传播，直到document对象。</p>
<pre><code>不支持冒泡的事件：blur、focus、mouseenter、mouseleave
</code></pre>
<p>而<strong>事件捕获</strong>与事件冒泡相反，事件会从最外层开始发生，直到最具体的元素。</p>
<p>在进行项目开发的时候，我们可以自行选择事件处理函数在哪一个阶段被调用。addEventListener方法用来素绑定事件处理的函数，它的第三个参数允许我们设置为捕获阶段(true)或冒泡阶段(false)触发，默认冒泡。</p>
<p><strong>事件冒泡和事件捕获过程图：</strong></p>
<p><img alt="image-20210406141845729" src="https://img-blog.csdnimg.cn/img_convert/7e68aa45976ae26d4847387d5f581230.png"/></p>
<p>1-5是捕获过程，5-6是目标阶段，6-10是冒泡阶段；</p>
<blockquote>
<ul><li>如何阻止冒泡</li></ul>
</blockquote>
<h4><a id="_1908"></a>事件代理/委托</h4>
<p>事件代理是将事件监听函数加到父元素上，利用事件冒泡来处理多个子元素相同事件的方式。</p>
<p>因为在事件冒泡中，子元素的事件触发会冒泡到父元素中，触发父元素相同的事件。所以我们只需给父元素添加事件监听即可。</p>
<p>如果我们不使用事件代理，那需要遍历父元素下的子元素，挨个进行事件监听。当元素量很大的时候，会影响页面性能。</p>
<h4><a id="_1916"></a>事件代理/委托有什么作用，主要用于哪些场景</h4>
<p>作用：不用给多个子元素添加事件监听函数，只给父元素添加。</p>
<p>应用场景：</p>
<ul><li>当要给一组子元素添加相同事件时，可以直接添加给父元素。</li></ul>
<p>最经典的应用就是，一个列表会不断有新的数据的添加，如果每添加一个数据就生成一个li，就需要添加一个新的监听，代码结构就特别不好，这时候使用事件代理就很方便。</p>
<h4><a id="_1926"></a>如何阻止冒泡</h4>
<ul><li> <p>给子级加 event.stopPropagation( )/IE8以下 cancelBubble</p> </li><li> <p>在事件处理函数中返回 false</p> </li></ul>
<h4><a id="_1932"></a>如何阻止默认事件</h4>
<ul><li> <p>event.preventDefault( )</p> </li><li> <p>return false</p> </li></ul>
<h4><a id="_1938"></a>触发事件的方法</h4>
<p>如果我们是使用on+type的方法添加的事件监听，可以直接使用xx.click()触发。</p>
<p>如果是addEventListener，我们可以使用new Event创建一个事件对象，参数为要触发的事件，然后使用触发对象.dispatchEvent(事件对象)触发。</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
elem<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4><a id="_1949"></a>说一下鼠标事件和键盘事件有哪些？</h4>
<p><strong>鼠标事件</strong><br/> click<br/> dbllick<br/> mousedown<br/> mouseup<br/> mousemove<br/> mouseenter<br/> mouseleave<br/> mouseover<br/> mouseout</p>
<p><strong>键盘事件</strong><br/> keydown<br/> keyup<br/> keypress</p>
<h4><a id="_1969"></a>对作用域的理解</h4>
<p>作用域包括全局作用域、函数作用域、块级作用域。</p>
<p>全局作用域中创建的变量，在任意地方都可以访问。</p>
<p>函数作用域中的变量，只有在函数内部才能访问。</p>
<p>块级作用域中的变量，只能在当前块中进行访问</p>
<h4><a id="_1979"></a>对作用域链的理解（变量的一个搜索过程）</h4>
<p>所谓作用域链，其实就是我们在某个作用域中获取某个变量的值，如果在该函数中没有该变量的定义，则会到<strong>创建这个函数的那个域</strong>寻找，如果也没有，就会一层一层的向上寻找，直到找到全局作用域还是没有找到，就结束。</p>
<p>这个一层层搜索的过程就是作用域链。</p>
<h4><a id="js_1985"></a>js怎么实现继承，优缺点</h4>
<p><strong>一、原型链继承</strong></p>
<p>将父类的实例作为子类的原型，这样根据原型链，子类就可以访问到父类的属性和方法。</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">true</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
       name<span class="token operator">:</span> <span class="token string">"yhd"</span><span class="token punctuation">,</span>
       age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
   <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isShow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> Child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Child1<span class="token punctuation">.</span>info<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">"男"</span><span class="token punctuation">;</span>
Child1<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// {name: "yhd", age: 18, gender: "男"}</span>

<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child2<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// {name: "yhd", age: 18, gender: "男"}</span>
child2<span class="token punctuation">.</span>isShow <span class="token operator">=</span> <span class="token boolean">false</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>isShow<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

</code></pre>
<p><strong>优点：</strong></p>
<blockquote>
<p>1、父类方法可以复用</p>
</blockquote>
<p><strong>缺点：</strong></p>
<blockquote>
<ol><li>父类的所有<code>引用属性</code>（info）会被所有子类共享，更改一个子类的引用属性，其他子类也会受影响</li><li>子类型实例不能给父类型构造函数传参</li></ol>
</blockquote>
<p><strong>二、构造函数继承</strong></p>
<p>通过使用<code>call()</code>或<code>apply()</code>方法，<code>Parent</code>构造函数在为<code>Child</code>的实例创建的新对象的上下文执行了，就相当于新的<code>Child</code>实例对象上运行了<code>Parent()</code>函数中的所有初始化代码，结果就是每个实例都有自己的<code>info</code>属性。</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token operator">:</span> <span class="token string">"yhd"</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">19</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>info<span class="token punctuation">.</span>gender <span class="token operator">=</span> <span class="token string">"男"</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: "yhd", age: 19, gender: "男"};</span>

<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {name: "yhd", age: 19}</span>

</code></pre>
<p>相比于原型链继承，构造函数继承可以给父类构造函数传参。</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>info <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> name <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//继承自Parent，并传参</span>
    <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
     <span class="token comment">//实例属性</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">"yhd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "yhd"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>

<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">"wxb"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "wxb"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 18</span>

</code></pre>
<p><strong>优点:</strong></p>
<blockquote>
<ol><li>可以在子类构造函数中向父类传参数</li><li>父类的引用属性不会被共享</li></ol>
</blockquote>
<p><strong>缺点：</strong></p>
<blockquote>
<ol><li>子类不能访问父类原型上的方法（即不能访问Parent.prototype上定义的方法），因此所有方法属性都写在构造函数中，每次创建实例都会初始化</li></ol>
</blockquote>
<p><strong>三、组合继承</strong></p>
<p>组合继承综合了原型链继承和构造函数继承，将两者的优点结合了起来。</p>
<p>基本的思路就是使用原型链继承原型上的属性和方法，而通过构造函数继承实例属性，这样既可以把方法定义在原型上以实现重用，又可以让每个实例都有自己的属性</p>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">Parent</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
   <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"yellow"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token class-name">Parent</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">// 继承父类属性</span>
   <span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 继承父类方法</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> child1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">"yhd"</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
child1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"pink"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["red", "blue", "yellow", "pink"]</span>
child1<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 19</span>
child1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "yhd"</span>

<span class="token keyword">let</span> child2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">"wxb"</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child2<span class="token punctuation">.</span>colors<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ["red", "blue", "yellow"]</span>
child2<span class="token punctuation">.</span><span class="token function">sayAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>
child2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "wxb"</span>

复制代码
</code></pre>
<p>​ <strong>优点：</strong></p>
<blockquote>
<ol><li>父类的方法可以复用</li><li>可以在Child构造函数中向Parent构造函数中传参</li><li>父类构造函数中的引用属性不会被共享</li></ol>
</blockquote>
<p><strong>四、原型式继承</strong></p>
<p>一个对象作为创建对象的原型</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 创建临时类</span>
  <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 修改类的原型为o, 于是f的实例都将继承o上的方法</span>
  f<span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'sss'</span><span class="token punctuation">,</span>
  friends<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">object</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Gss"</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Lihua"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">object</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"SKK"</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"HAH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[ '1', '2', '3', 'Lihua', 'HAH' ]</span>
</code></pre>
<p>缺点：</p>
<ul><li>原型链继承多个实例的引用类型属性指向相同，存在篡改的可能。</li><li>无法传递参数</li></ul>
<p><strong>五、寄生式继承</strong></p>
<p>通过原型式继承的方法创建一个实例，然后为这个实例添加属性和方法，最后返回这个实例。</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">createObject</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> myobj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
  myobj<span class="token punctuation">.</span><span class="token function-variable function">sayname</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> myobj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'123'</span><span class="token punctuation">,</span>
  friends<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">createObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'xixi'</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">createObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lala'</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

b<span class="token punctuation">.</span><span class="token function">sayname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//lala</span>
</code></pre>
<p><strong>五、寄生组合继承</strong></p>
<p>寄生组合式继承在吸取了组合式继承的优点上，避免了在子函数的原型上面创建不必要的、多余的属性</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">inherit</span><span class="token punctuation">(</span><span class="token parameter">child<span class="token punctuation">,</span> parent</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建父类原型对象</span>
  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> child<span class="token punctuation">;</span> <span class="token comment">// 增强对象 </span>
  child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype<span class="token punctuation">;</span> <span class="token comment">// 赋值父类原型对象给子类原型</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"red"</span><span class="token punctuation">,</span> <span class="token string">"blue"</span><span class="token punctuation">,</span> <span class="token string">"green"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Child</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">inherit</span><span class="token punctuation">(</span>Child<span class="token punctuation">,</span> Father<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Child</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Child</span><span class="token punctuation">(</span><span class="token string">'ch'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
s<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>六、extends</strong></p>
<h4><a id="04_2232"></a>写代码，输出0-4，每隔一秒输一个</h4>
<p><strong>ES6</strong></p>
<pre><code class="prism language-js"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">*</span> i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>ES5</strong></p>
<pre><code class="prism language-js"><span class="token comment">// 形成闭包</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token operator">*</span> i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>aysnc</strong></p>
<pre><code class="prism language-js"><span class="token keyword">let</span> <span class="token function-variable function">sayNum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">await</span> <span class="token function">sayNum</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4><a id="map_2278"></a>手写数组的map函数</h4>
<pre><code class="prism language-js"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMap</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    context <span class="token operator">=</span> context <span class="token operator">?</span> context <span class="token operator">:</span> window<span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> tem <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tem<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<pre><code class="prism language-js"><span class="token comment">//map是一个函数，接受一个函数作为参数，这个函数又接受一个item index arr</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//对每一个执行fn函数后 返回fn的返回值</span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">_map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[ 2, 4, 6 ]</span>
</code></pre>
<h4><a id="reduce_2309"></a>手写数组的reduce函数</h4>
<pre><code class="prism language-js"><span class="token comment">//reduce</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_reduce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//如果没有提供sum，将第一个元素作为sum</span>
  <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> res <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//累加</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="prism language-js"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_reduce</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//累加器</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> initValue
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>initValue<span class="token punctuation">)</span> sum <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//累加</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    sum <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>sum<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum
<span class="token punctuation">}</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  arr<span class="token punctuation">.</span><span class="token function">_reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> sum <span class="token operator">+</span> item
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment">//6</span>

</code></pre>
<h4><a id="jsjs_2349"></a>js是单线程的，为什么js能有异步任务？</h4>
<p>JS是单线程的，但是浏览器是多线程的，js运行通常是在浏览器中进行的，像定时器、事件监听都是交给WebAPI处理，有结果后将回调函数放入任务队列等待js去取。</p>
<p>而一个浏览器通常由以下几个常驻的线程：</p>
<ul><li><strong>渲染引擎线程</strong>：该线程负责页面的渲染</li><li><strong>JS引擎线程</strong>：负责JS的解析和执行</li><li>定时触发器线程：处理定时事件，比如setTimeout, setInterval</li><li>事件触发线程：处理DOM事件</li><li>异步http请求线程：处理http请求</li></ul>
<p>虽然JavaScript是单线程的，可是浏览器内部不是单线程的。一些I/O操作、定时器的计时和事件监听（click, keydown…）等都是由浏览器提供的其他线程来完成的。</p>
<h4><a id="_2363"></a>如何查找一个对象数组</h4>
<p><strong>使用find</strong></p>
<p>find() 方法返回通过测试（函数内判断）的数组的第一个元素的值。</p>
<p>find() 方法为数组中的每个元素都调用一次函数执行：</p>
<ul><li>当数组中的元素在测试条件时返回 <em>true</em> 时, find() 返回符合条件的元素，之后的值不会再调用执行函数。</li><li>如果没有符合条件的元素返回 undefined</li></ul>
<p><strong>使用filter</strong></p>
<h4><a id="Promise_2376"></a>Promise解决了什么问题？存在什么问题和优化？是最终解决方案吗？</h4>
<p>解决了回调地域的问题。</p>
<p><strong>问题：</strong></p>
<p>1、Promise内部产生的错误或异常，如果我们不加catch方法，那么这些错误就会被吞掉，后期就不好调试。</p>
<p>2、Promise可以链式调用，是符合我们思考逻辑的，但是脑子还是得额外处理then，处理还是没有完全同步化，目前最优的方法是使用async函数。</p>
<h4><a id="async_2386"></a>async函数</h4>
<p>async 函数是 Generator 函数的语法糖，async不再需要执行器，执行async函数，就会自动执行函数内部的逻辑。await后面既可以是promise也可以是任意类型的值，此时等同于同步操作。</p>
<p>async 函数的返回值是 Promise 对象，可以使用<code>then</code>方法添加回调函数</p>
<h4><a id="async__await_2392"></a>async 和 await原理。</h4>
<p>async 函数本质上是generator函数的语法糖，内部有自动的执行器，不用我们手动执行next方法。</p>
<p>假设async函数是个方法，await 类比于 yield，设计思路：</p>
<p>1、async函数接受一个generator函数作为参数，返回一个函数，函数内部生成生成器，返回Promise</p>
<p>2、在 Promise 中有个自动执行的方法 step，step方法负责执行生成器，根据获取到的结果中的done，判断是否执行完成，执行完成，resolve修改Promise状态；没有完成，则等待当前的value执行完成，即Promise改变状态后，再执行step进行自动执行。</p>
<p>3、执行Step</p>
<pre><code class="prism language-js"><span class="token keyword">const</span> <span class="token function-variable function">asyncToGenerator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">generator</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">let</span> result

        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
          result <span class="token operator">=</span> gen<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> result

        <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">//等待value执行完毕</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">'throw'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//测试</span>
<span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//async函数调用</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data: '</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data2: '</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">'success'</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//使用我们的generator创建的async函数调用</span>
<span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">asyncToGenerator</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">testG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data: '</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'data2: '</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token string">'success'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h4><a id="Promiseasync_awit_2469"></a>Promise,async awit的区别</h4>
<p>都是用来解决异步编程的方法，Promise是使用链式调用，而aysnc更为简洁。</p>
<h4><a id="Typescript__JavaScript_2473"></a>Typescript 和 JavaScript的区别是什么</h4>
<p>1、Javascript是一个弱类型语言，Typescript他是提供了类型系统，会进行静态检查，如果发现有错误，编译的时候就会报错。</p>
<p>2、TypeScript 中引入了模块的概念，可以把声明、数据、函数和类封装在模块中。</p>
<h4><a id="require__import__2479"></a>require 和 import 引入依赖的区别</h4>
<ul><li>require 全部引入，Import可以部分引入</li><li>require将文件拷贝过来，Import引用定义</li><li>require运行时加载，import编译时加载</li></ul>
<h4><a id="_2485"></a>函数柯里化</h4>
<p>函数柯里化是指将一次性接受参数的函数变为可以多次接受参数，也就是内部返回接收参数的函数。</p>
<p>用处：<br/> 参数复用：公共的参数已经通过柯里化预置了。<br/> 例如，我们在一个页面即要校验多个邮箱，又要校验多个手机号码，这时候我们封装了一个校验的方法，接受正则表达式和字符串，我们需要校验多个的时候，需要重复的传入正则表达式，很冗余。<br/> 那么这个时候我们就可以通过柯里化，将公共的参数 正则表达式预置了，调用柯里化函数进行校验。</p>
<p><strong>通用柯里化</strong></p>
<p>注：</p>
<p>函数名.length表示的是函数定义的参数的个数。</p>
<p>arguments.length指的是外部调用时传入的形参的个数</p>
<pre><code class="prism language-js"><span class="token comment">//...args 预置公共参数</span>
<span class="token keyword">var</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">_curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> allArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>allArgs<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> len<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> allArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>allArgs<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//test1</span>
<span class="token keyword">function</span> <span class="token function">isNum</span><span class="token punctuation">(</span><span class="token parameter">reg<span class="token punctuation">,</span> str</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> checkNum <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[\d]{3}$</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">const</span> curryNum <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>isNum<span class="token punctuation">,</span> checkNum<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryNum</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryNum</span><span class="token punctuation">(</span><span class="token string">'123s'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryNum</span><span class="token punctuation">(</span><span class="token string">'1s23'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryNum</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//test2</span>
<span class="token keyword">var</span> <span class="token function-variable function">multify</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b <span class="token operator">*</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> multi <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span>multify<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">multi</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//6</span>

</code></pre>
<pre><code class="prism language-js"><span class="token comment">//固定长度</span>
<span class="token keyword">function</span> <span class="token function">Curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> len <span class="token operator">=</span> fn<span class="token punctuation">.</span>length
  <span class="token comment">//该函数返回一个新函数接受参数</span>
  <span class="token keyword">function</span> <span class="token function">_curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>fnargs</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>newargs</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> allargs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>fnargs<span class="token punctuation">,</span> <span class="token operator">...</span>newargs<span class="token punctuation">]</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>allargs<span class="token punctuation">.</span>length <span class="token operator">===</span> len<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//执行</span>
        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> allargs<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//返回新函数 接受参数</span>
        <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>allargs<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">multify</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b <span class="token operator">*</span> c
<span class="token punctuation">}</span>
<span class="token keyword">let</span> mul <span class="token operator">=</span> <span class="token function">Curry</span><span class="token punctuation">(</span>multify<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>**缺点：**需要提前知道参数长度</p>
<h4><a id="_2571"></a>如果要实现一个加法函数，但是不知道传进来的参数有多少，你会怎么做？</h4>
<p>使用函数柯里化</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">addCurry</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> fnArgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token function">addCurry</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fnArgs<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  fn<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>sum <span class="token operator">+=</span> num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addCurry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre>
<h4><a id="_2593"></a>正则表达式</h4>
<h4><a id="2s1s3spromise_2595"></a>实现一个红绿灯系统，红色2s，黄灯1s，绿灯3s，promise，循环</h4>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">createLight</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">createLight</span><span class="token punctuation">(</span>red<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">createLight</span><span class="token punctuation">(</span>yellow<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">createLight</span><span class="token punctuation">(</span>green<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4><a id="_2633"></a>数组去重的方法</h4>
<pre><code class="prism language-js"><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
</code></pre>
<p>针对以上Arr去重<br/> 1、new Set()</p>
<pre><code class="prism language-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>2、使用sort排序后，遍历一遍，与前一元素相同则删除</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&amp;&amp;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      i<span class="token operator">--</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>3、2层for循环，splice删除元素</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">//相同 删除</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>j<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token comment">//为什么要-1 因为删除元素后，下一个要拿取的元素就到了当前位置，如果不-1就会跳过。</span>
        j<span class="token operator">--</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>4、创建临时空间，使用indexOf去重</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">unique</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre>
<p>5、创建临时空间，使用includes去重<br/> 6、使用map去重</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h4><a id="BOM__DOM_2715"></a>BOM 和 DOM的区别</h4>
<ul><li> <p>DOM是文档对象模型，BOM是浏览器对象模型。</p> </li><li> <p>DOM是将页面抽象成了节点，节点组成DOM树。</p> </li><li> <p>BOM提供的API，用于支持访问和操作浏览器的窗口。</p> </li></ul>
<h4><a id="_2722"></a>引入脚本的方式有哪些</h4>
<p>1、行内脚本</p>
<p>2、内部js脚本，可以写async或defer属性。</p>
<p>3、外部脚本，引入脚本文件。</p>
<p>4、动态加载脚本</p>
<h4><a id="DOMcontentload__load_2732"></a>DOMcontentload 和 load的区别</h4>
<ul><li>DomcontentLoad：HTML文档加载完毕后，不等待其他资源加载，触发。</li><li>Load：所有资源加载完毕后触发。</li></ul>
<h4><a id="_2737"></a>介绍一下懒加载和预加载。图片懒加载和图片预加载的区别？分别在什么场景下使用？</h4>
<p><strong>图片懒加载</strong></p>
<p>核心逻辑：判断当前图片是否到了可视区域。</p>
<pre><code class="prism language-js"><span class="token keyword">let</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img[data-src][lazyload]'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> viewHeght <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight

<span class="token keyword">function</span> <span class="token function">LazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//遍历图片</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> img <span class="token keyword">of</span> imgs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//判断是否在可视区</span>
    <span class="token keyword">let</span> imgRect <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>imgRect<span class="token punctuation">.</span>bottom <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">**</span> imgRect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> viewHeght<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'src'</span><span class="token punctuation">]</span>
        img<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span>
        img<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'lazyload'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">LazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> LazyLoad<span class="token punctuation">)</span>

</code></pre>
<p><strong>图片预加载</strong></p>
<p>采用异步的方式的方式加载图片，在后面偷偷加载。</p>
<blockquote>
<ul><li>为什么使用懒加载</li><li>懒加载的原理</li><li>为什么使用预加载</li><li>实现预加载的方法</li><li>预加载的应用场景</li><li>预加载器的原理</li></ul>
</blockquote>
<h4><a id="_2780"></a>为什么使用懒加载</h4>
<p>1、优化用户体验，如果页面上所有图片都要加载并且数量很大，就需要等待很久，对用户体验不好。</p>
<p>2、减少服务器的压力。</p>
<p>3、防止并发加载图片资源阻塞js的加载。</p>
<h4><a id="_2788"></a>懒加载的原理</h4>
<p>核心逻辑：判断当前图片是否到了可视区域。</p>
<p>1、页面上的图片的 src 属性设为空字符串，而图片的真实路径则设置在data-src属性中</p>
<p>2、页面滚动，需要去监听scroll事件，在scroll事件的回调中，判断我们的懒加载的图片是否进入可视区域</p>
<p>3、如果图片在可视区内将图片的 src 属性设置为data-original 的值，这样就可以实现延迟加载。</p>
<pre><code class="prism language-js"><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Lazyload<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
      <span class="token punctuation">.</span>image<span class="token operator">-</span>item <span class="token punctuation">{<!-- --></span>
	    display<span class="token operator">:</span> block<span class="token punctuation">;</span>
	    margin<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>
	    height<span class="token operator">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span><span class="token comment">//一定记得设置图片高度</span>
	<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/1.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/2.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/3.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/4.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/5.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/6.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/7.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/8.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/9.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/10.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/11.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"image-item"</span> lazyload<span class="token operator">=</span><span class="token string">"true"</span>  data<span class="token operator">-</span>original<span class="token operator">=</span><span class="token string">"images/12.png"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">var</span> viewHeight <span class="token operator">=</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token comment">//获取可视区高度</span>
    <span class="token keyword">function</span> <span class="token function">lazyload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
   	 <span class="token keyword">var</span> eles<span class="token operator">=</span>document<span class="token punctuation">.</span>querySelectorAll（<span class="token string">'img[data-original][lazyload]'</span>）
   	 <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>eles<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    	<span class="token keyword">var</span> rect
    	<span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>original<span class="token operator">===</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
   	  rect<span class="token operator">=</span>item<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 用于获得页面中某个元素的左，上，右和下分别相对浏览器视窗的位置</span>
    	<span class="token keyword">if</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>bottom<span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> viewHeight<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token operator">!</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">var</span> img<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          img<span class="token punctuation">.</span>src<span class="token operator">=</span>item<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>original
          img<span class="token punctuation">.</span><span class="token function-variable function">onload</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            item<span class="token punctuation">.</span>src<span class="token operator">=</span>img<span class="token punctuation">.</span>src
            <span class="token punctuation">}</span>
          item<span class="token punctuation">.</span>removeAttribute（<span class="token string">"data-original"</span>）<span class="token comment">//移除属性，下次不再遍历</span>
          item<span class="token punctuation">.</span>removeAttribute（<span class="token string">"lazyload"</span>）
        <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">lazyload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//刚开始还没滚动屏幕时，要先触发一次函数，初始化首页的页面图片</span>
    document<span class="token punctuation">.</span>addEventListener（<span class="token string">"scroll"</span>，lazyload<span class="token punctuation">)</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>

</code></pre>
<p><strong>如何判断元素是否进入可视区域</strong></p>
<p>1、监听父级对象的scroll事件，触发图片load</p>
<p>2、通过<strong>getBoundingClientRect()</strong> 或者Intersection Observer 新API判断元素的可见性。</p>
<h4><a id="_2859"></a>为什么使用预加载</h4>
<p>在页面全部加载完毕之前，对一些主要内容进行加载，先让用户看到，减少用户的等待时间。</p>
<p>有一些资源我们希望浏览器能尽早发现，防止重新渲染。</p>
<h4><a id="_2865"></a>实现预加载的方法</h4>
<p><strong>link标签的prefetch和preload。</strong></p>
<p>prefetch ：利用浏览器空闲时间来下载未来可能访问的资源。（只获取不处理）</p>
<p>preload ：下载未来一定需要的访问的资源。（获取后放到内存中，遇到就执行）</p>
<h4><a id="_2873"></a>预加载的应用场景</h4>
<p>字体提前加载。提升视觉稳定性，尽可能避免字体闪烁。</p>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>preload</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>font.woff2<span class="token punctuation">'</span></span> <span class="token attr-name">as</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>font</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>font/woff2<span class="token punctuation">'</span></span> <span class="token attr-name">crossorigin</span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
<h4><a id="JS_2882"></a>JS垃圾回收机制说一下</h4>
<p>JS的垃圾回收机制是，垃圾回收程序会定期找出那些不再继续使用的变量，然后释放其内存。</p>
<p>垃圾回收实现方式主要有两种，<strong>标记清除</strong>和<strong>引用计数</strong>。</p>
<p><strong>标记清除：</strong></p>
<p>垃圾回收程序运行的时候，会标记内存中存储的所有变量。然后，它会将所有在上下文中的变量，以及被在上下文中的变量引用的变量的标记去掉。在此之后再被加上标记的变量就是待删除的了，随后垃圾回收程序做一次内存清理，销毁带标记的所有值并收回它们的内存。</p>
<p><strong>引用计数：</strong></p>
<p>引用计数是指每个值被引用的次数。当声明了一个变量并将一个引用类型值赋给该变量时，则这个值的引用次数就是1。如果同一个值又被赋给另一个变量，则该值的引用次数加1。相反，如果包含对这个值引用的变量又取得了另外一个值，则这个值的引用次数减1。当这个值的引用次数变成0时，则说明没有办法再访问这个值了，因而就可以将其占用的内存空间回收回来。这样，当垃圾回收器下次再运行时，它就会释放那些引用次数为0的值所占用的内存。</p>
<h4><a id="_2896"></a>如果页面卡顿，你觉得可能是什么原因造成的？有什么办法锁定原因并解决吗？</h4>
<p>1、network看请求时间，是不是返数据太慢。（文件体积大，bundle拆分）</p>
<p>2、使用Performance拍照，查看是哪个方法时间长，导致了什么问题</p>
<h4><a id="_cookiessessionStorage__localStorage__2902"></a>请描述一下 cookies，sessionStorage 和 localStorage 的区别</h4>
<p>浏览器端常用的存储技术是 cookie 、localStorage 和 sessionStorage。</p>
<p>cookie 其实最开始是服务器端用于记录用户状态的一种方式，由服务器设置，在客户端存储，然后每次发起同源请求时，发送给服务器端。cookie <strong>最多能存储 4 k</strong> 数据。</p>
<p>localStorage 、sessionStorage 是 html5 提供的浏览器本地存储的方法，均能存储5M左右数据。</p>
<ul><li>localStorage：除非手动删除，否则不会失效。</li><li>sessionStorage：关闭当前窗口则失效。</li></ul>
<p>详细的资料可以参考： <a href="https://segmentfault.com/a/1190000017423117">《请描述一下 cookies，sessionStorage 和 localStorage 的区别？》</a> [《浏览器数据库 IndexedDB 入门教程》](</p>
<h4><a id="_2915"></a>介绍一下你了解的设计模式</h4>
<p>单例模式、策略模式、代理模式、发布-订阅模式、观察者模式</p>
<p><strong>单例模式</strong></p>
<p>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p>
<p>应用场景：Vuex中的Store、 Mobx的Store</p>
<p>以Mobx为例，我们一般会抽象出一个功能的Store，这个Store在全局Store里实例化，并只能通过全局Store的stores进行访问。</p>
<p><strong>策略模式</strong></p>
<p>不同的参数命中不同的策略。</p>
<p>场景：比如一个结算系统，有A、B、C三类用户，不同用户的折扣不一样，这时候，我们可以使用策略模式来获取用户的优惠后金额。</p>
<p>Demo：获取年终奖。</p>
<pre><code class="prism language-js"><span class="token keyword">const</span> strategy <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token string">'S'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">4</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'A'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">3</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">'B'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">salary</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> salary <span class="token operator">*</span> <span class="token number">2</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">calculateBonus</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">level<span class="token punctuation">,</span> salary</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> strategy<span class="token punctuation">[</span>level<span class="token punctuation">]</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">calculateBonus</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token comment">// 30000</span>

</code></pre>
<p><strong>代理模式</strong></p>
<p>为一个对象提供一个占位符，方便控制。</p>
<p>场景：图片预加载，先通过一张loading图占位，然后通过异步的方式加载图片，等图片onload加载好后，再把完成的图片加载到img标签里面。</p>
<pre><code class="prism language-js"><span class="token keyword">const</span> myImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> imgNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>imgNode<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">setSrc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      imgNode<span class="token punctuation">.</span>src <span class="token operator">=</span> src
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> proxyImage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// http 图片加载完毕后才会执行</span>
    myImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>src<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">setSrc</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">src</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      myImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token string">'loading.jpg'</span><span class="token punctuation">)</span> <span class="token comment">// 本地 loading 图片</span>
      img<span class="token punctuation">.</span>src <span class="token operator">=</span> src
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

proxyImage<span class="token punctuation">.</span><span class="token function">setSrc</span><span class="token punctuation">(</span><span class="token string">'http://loaded.jpg'</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<ul><li>图片懒加载原理</li></ul>
</blockquote>
<p><strong>观察者模式</strong></p>
<p>定义对象间的一对多的依赖关系，一个对象维持一系列依赖于它的Observer对象，当状态发生变更时，通知一系列 Observer 对象进行更新。</p>
<pre><code class="prism language-js"><span class="token comment">/**
 * describe: 实现一个观察者模式
 */</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    hero<span class="token operator">:</span> <span class="token string">'凤凰'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//用来储存 订阅者 的数组</span>
<span class="token keyword">let</span> subscribers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//订阅 添加订阅者 方法</span>
<span class="token keyword">const</span> <span class="token function-variable function">addSubscriber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    subscribers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//发布</span>
<span class="token keyword">const</span> <span class="token function-variable function">deliver</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    data<span class="token punctuation">.</span>hero <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token comment">//当数据发生改变，调用（通知）所有方法（订阅者）</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>subscribers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> fn <span class="token operator">=</span> subscribers<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//通过 addSubscriber 发起订阅</span>
<span class="token function">addSubscriber</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>hero<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//改变data，就会自动打印名称</span>
<span class="token function">deliver</span><span class="token punctuation">(</span><span class="token string">'发条'</span><span class="token punctuation">)</span> 
<span class="token function">deliver</span><span class="token punctuation">(</span><span class="token string">'狐狸'</span><span class="token punctuation">)</span>
<span class="token function">deliver</span><span class="token punctuation">(</span><span class="token string">'卡牌'</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>发布-订阅模式</strong></p>
<p>发布-订阅模式是指：</p>
<p><strong>发布对象</strong>通过发布<strong>主题事件</strong>通知订阅该主题的对象。</p>
<p><strong>订阅对象</strong>通过<strong>自定义事件</strong>订阅多个主题</p>
<p>例子：Event Bus就是采用的发布订阅模式实现的。</p>
<h4><a id="_3037"></a>页面性能优化</h4>
<pre><code class="prism language-js"><span class="token number">1</span>、代码压缩层面
<span class="token number">2</span>、关键资源
<span class="token number">3</span>、浏览器缓存
<span class="token number">4</span>、<span class="token constant">CDN</span>
<span class="token number">5</span>、图片优化
<span class="token number">6</span>、防抖节流
<span class="token number">7</span>、减少回流与重绘
</code></pre>
<p>1、代码压缩：css、js代码代码压缩</p>
<p>2、Gzip压缩/Br压缩</p>
<p>3、推迟非关键资源的加载：异步加载的三种方式——async和defer、动态脚本创建</p>
<ul><li> <p>async属性</p>
<ul><li>在script上边使用async属性，会异步执行引入的JavaScript。</li><li>如果是多个脚本，该方法不能保证脚本按顺序执行。</li></ul> </li><li> <p>defer属性</p>
<ul><li>在script上边使用defer属性，会延迟执行引入的JavaScript。</li><li>若果是多个脚本，可以确保设置defer属性的脚本按顺序执行。</li></ul> </li><li> <p>动态创建script标签</p>
<ul><li>window.onload方法确保页面加载完毕再将script标签插入到DOM中</li></ul> </li></ul>
<p>4、利用浏览器缓存，减少服务器压力。</p>
<p>5、使用CDN</p>
<p>6、图片优化：懒加载、预加载。</p>
<p>7、针对一些行为进行节流和防抖，防止频繁向服务器发请求。</p>
<p>8、减少回流和重绘。</p>
<p>9、路由懒加载</p>
<blockquote>
<ul><li>async 和 defer 的作用是什么？有什么区别？</li><li>介绍一下浏览器缓存</li><li>强缓存是如何实现的</li><li>协商缓存是如何实现的</li><li>介绍一下CDN及其基本原理</li><li>介绍一下CDN回源策略</li><li>介绍一下节流和防抖</li><li>介绍一下懒加载的原理</li><li>介绍一下预加载的原理</li><li>介绍一下回流和重绘</li><li>如何减少回流和重绘</li></ul>
</blockquote>
<h4><a id="_3090"></a>首屏渲染优化方式</h4>
<p>1、推迟非关键资源的加载：异步加载的三种方式——async和defer、动态脚本创建</p>
<p>2、路由懒加载</p>
<p>3、CDN</p>
<p>4、压缩</p>
<p>5、浏览器缓存</p>
<h4><a id="_3102"></a>介绍一下预加载的原理</h4>
<p>先通过一张loading图占位，然后通过异步的方式加载图片，等图片onload加载好后，再把完成的图片加载到img标签里面。</p>
<h4><a id="div_3106"></a>实现div拖动效果</h4>
<pre><code class="prism language-css"><span class="token selector">div</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="prism language-js"><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
    <span class="token keyword">let</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
box<span class="token punctuation">.</span><span class="token function-variable function">onmousedown</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//获取当前坐标</span>
    <span class="token keyword">let</span> x_down <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX
    <span class="token keyword">let</span> y_down <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY
    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft
    <span class="token keyword">let</span> top <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'down'</span><span class="token punctuation">)</span>
    box<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//获取到移动的位置</span>
        <span class="token keyword">let</span> x_move <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX
        <span class="token keyword">let</span> y_move <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY
        <span class="token keyword">let</span> movex <span class="token operator">=</span> x_move <span class="token operator">-</span> x_down
        <span class="token keyword">let</span> movey <span class="token operator">=</span> y_move <span class="token operator">-</span> y_down
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'move'</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> movex <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> movey <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">}</span>

    box<span class="token punctuation">.</span><span class="token function-variable function">onmouseup</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//清除监听</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h4><a id="js_3148"></a>js和其他语言的区别</h4>
<ol><li>JS 是弱类型语言，其他语言基本是强类型语言</li><li>JavaScript 对象是基于原型的，其他语言基本是基于类的</li><li>JS是单线程的，其他语言基本上是多线程的。</li></ol>
<h4><a id="_Js__3154"></a>为什么 Js 要设计成弱类型语言</h4>
<p>优点：使用简单、灵活，可以专注于逻辑，更少的关心语法。</p>
<p>缺点：没有类型检查，容易出错，不好排查。</p>
<h4><a id="jssettimout_3160"></a>为什么js是单线程但是有settimout</h4>
<p>js是单线程的，但是浏览器是多线程的，浏览器有很多线程：</p>
<ul><li>js引擎线程</li><li>渲染引擎线程</li><li>定时器线程</li><li>事件线程</li><li>请求线程等等</li></ul>
<p>像SetTimeout，遇到的时候，会将其交给浏览器线程进行处理，处理完了之后，将回调放入任务队列中，执行栈执行完过来取。</p>
<h4><a id="JS_3172"></a>JS中的数组与其他语言的数组的区别</h4>
<p>在 C 或者 Java 等其他语言中，数组大小是固定的且内存地址是连续的，不会进行动态扩容。</p>
<p>而在 JS 中，数组就是对象，JS数组的元素在内存中并不一定是相邻的。</p>
<h4><a id="_3178"></a>红宝书的目录结构说说</h4>
<p>红宝书的目录结构是一个循序渐进的过程，首先他是先介绍一些基础，比如基础数据类型、引用数据类型，然后又围绕这些展开，讲对象、类、面向对象等等。</p>
<p>然后又继续深入的学习ES6的一些内容，Promise、代理等等。</p>
<p>再往后就是介绍一下请求、浏览器存储等等。</p>
<h4><a id="_3186"></a>对移动端开发有什么了解</h4>
<p><strong>常用的移动端适配方案</strong></p>
<p>1、flexble.js+rem</p>
<p>2、vw、wh</p>
<h4><a id="_3194"></a>前端设计组件的原则</h4>
<p>一般按照功能来进行组件的封装，原则</p>
<p>1、低耦合，提高复用能力。尽可能考虑到更加通用的使用场景，而不是满足特定的开发需求。</p>
<p>比如，数据不要写死，通过参数化配置传入；或者发送请求的API通过参数传入等。</p>
<p>2、统一的状态管理。可以把组件中特定功能的逻辑和数据抽离出来，用一个Store进行管理。</p>
<p>3、State或Props不要嵌套太深，3层以内。</p>
<p>4、使用封装组件的组件无感知，所有逻辑处理都在组件内。使用的组件不需要特殊处理。</p>
<p>具体还能结合业务进行考量。</p>
<h4><a id="JS__sort__3210"></a>JS 的 sort() 是怎么实现的</h4>
<p>是使用插入和快排实现的。在某个长度内使用插入，在大于某个长度时使用快排。</p>
<h4><a id="_3214"></a>对象去重</h4>
<pre><code class="prism language-js"><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'uzi'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'blue'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'pdd'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'white'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'mlxg'</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">'orange'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span> color<span class="token operator">:</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">'uzi'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token keyword">function</span> <span class="token function">delObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">var</span> uniques <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//获取当前对象的key值 并排序</span>
    <span class="token keyword">var</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment">//拼接键值对字符串</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> keys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      str <span class="token operator">+=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>keys<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>keys<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">[</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      uniques<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
      map<span class="token punctuation">[</span>str<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> uniques
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">delObj</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h4><a id="id_3246"></a>根据对象的id去重</h4>
<p>filter+Map</p>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">quchong</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>id<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> item<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p>两层for循环+辅助空间</p>
<h4><a id="_3264"></a>手写一下发布-订阅模式</h4>
<pre><code class="prism language-js"><span class="token keyword">class</span> <span class="token class-name">PubSub</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_listner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//注册订阅行为</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> hanlder <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_listner<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hanlder<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      handler <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_listner<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>handler<span class="token punctuation">,</span> fn<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//发布时间</span>
  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_listner<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">//取消订阅</span>
  <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_listner<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
    <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        position <span class="token operator">=</span> i
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      handler<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>_listner<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> hanlder<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="发布订阅模式图解" src="https://img-blog.csdnimg.cn/img_convert/b6064a8930f527096fb5d639d6beaa45.png"/></p>
<h4><a id="ReactVueEvent_Bus_3308"></a>既然React/Vue可以用Event Bus进行组件通信,你可以实现下吗?</h4>
<p>通过发布-订阅模式实现。首先发布者是要的 emit 方法发布事件，而订阅者则通过addListener 进行订阅。</p>
<pre><code class="prism language-js"><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_events <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//保存type及回调。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addListener</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//添加监听</span>
  <span class="token keyword">let</span> hanlder <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
  <span class="token comment">//如果没有handler</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hanlder<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    hanlder <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//展开放入</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>hanlder<span class="token punctuation">,</span> fn<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">removeListener</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
  <span class="token keyword">let</span> position <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token comment">//handler为数组，得找到对应的函数</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          position <span class="token operator">=</span> i
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        handler<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">//移除后只剩一个，则回归函数状态</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> handler<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">EventEmitter</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">emit</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>payload</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//通过type拿event并触发</span>
  <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_events<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
  <span class="token comment">//触发多个监听</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> handler<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    handler<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>payload<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> emitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hi </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
emitter<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'sayHi'</span><span class="token punctuation">,</span> sayHi<span class="token punctuation">)</span>
emitter<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'sayHi'</span><span class="token punctuation">,</span> sayHello<span class="token punctuation">)</span>
emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'sayHi'</span><span class="token punctuation">,</span> <span class="token string">'ch'</span><span class="token punctuation">)</span>

</code></pre>
<h4><a id="AST_3369"></a>介绍一下AST</h4>
<p>AST抽象语法树，本质上就是将源代码抽象为语法结构的树，比如一个函数，可能会被抽象为id为方法名，params参数，body函数体等等。</p>
<p><strong>如何从纯文本获取AST</strong></p>
<p>1、词法分析，扫描scanner。按预定规则合并成标识token，放入tokens列表中。</p>
<p>一个个读取代码，遇到空格、操作符或特殊符号，认为一个短暂的完成。</p>
<p>2、语法分析，解析器。将词法分析的数组转换为树形，同时验证语法。</p>
<h4><a id="_tab__3382"></a>两个 tab 的页面之间怎么通信？</h4>
<p>1、web scoket通信，服务器作为中间介，进行消息转发。</p>
<p>2、使用localStorage进行通信。一个页面修改数据，另一个页面监听localStorage变化，拿到最新数据。</p>
<h4><a id="Keys_3388"></a>如何获取嵌套对象所有的Keys</h4>
<p>1、递归获取：如果Key对应的value是对象，继续递归获取，直到不是对象。（有点类似于实现深拷贝）</p>
<pre><code class="prism language-js"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'ch'</span><span class="token punctuation">,</span>
  address<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    city<span class="token operator">:</span> <span class="token string">'peking'</span><span class="token punctuation">,</span>
    small<span class="token operator">:</span> <span class="token string">'haidian'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1、递归法</span>
<span class="token keyword">let</span> <span class="token function-variable function">findKeys</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">//递归出口</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> obj
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">//遍历obj</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">findKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">findKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">//['name','address','city','small']</span>
</code></pre>
<p>2、非递归获取：利用一个栈存放对象，如果是对象放入栈中，一直到不是对象 逐个取出。</p>
<pre><code class="prism language-js"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  name<span class="token operator">:</span> <span class="token string">'ch'</span><span class="token punctuation">,</span>
  address<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    city<span class="token operator">:</span> <span class="token string">'peking'</span><span class="token punctuation">,</span>
    small<span class="token operator">:</span> <span class="token string">'haidian'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  data<span class="token operator">:</span> <span class="token string">'ss'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 1、非递归法，先序遍历</span>
<span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span>
<span class="token keyword">const</span> <span class="token function-variable function">findKeys</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">let</span> current <span class="token operator">=</span> obj
  <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">||</span> <span class="token function">isObject</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//把current对象的keys全部拿出来，再将为对象的值推入stack中，current 再从stack中取</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> current<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>current<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>current<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    current <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">findKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>