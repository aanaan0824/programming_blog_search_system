<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><font color="#87CEFA" size="4">⭐️<strong>前面的话</strong>⭐️</font></p>
<p>本篇文章主要介绍数据库约束，数据表的聚合查询，多表查询，合并查询，难点基本上都集中在多表查询部分，大家要耐心地去看去练习哦。</p>
<blockquote>
<p>📒博客主页：<a href="https://weijianhuawen.blog.csdn.net/">未见花闻的博客主页</a><br/> 🎉欢迎关注🔎点赞👍收藏⭐️留言📝<br/> 📌本文由<strong>未见花闻</strong>原创，<strong>CSDN</strong>首发！<br/> 📆首发时间：🌴2022年3月19日🌴<br/> ✉️坚持和努力一定能换来诗与远方！<br/> 💭参考书籍：📚《MySQL必知必会》，📚《高性能MySQL》<br/> 💬参考在线编程网站：🌐<a href="https://www.nowcoder.com/">牛客网</a>🌐<a href="https://leetcode-cn.com/">力扣</a><br/> <a href="https://gitee.com/weijianhuawen/Java-learning-code-and-project">博主的码云gitee，平常博主写的程序代码都在里面。</a><br/> <a href="https://github.com/weijianhuawen">博主的github，平常博主写的程序代码都在里面。</a><br/> 🍭<font color="orange">作者水平很有限，如果发现错误，一定要及时告知作者哦！感谢感谢！</font></p>
</blockquote>
<hr/>
<p></p>
<div class="toc">
<h3>📌导航小助手📌</h3>
<ul><li><a href="#1_27">🌱1.数据库的约束</a></li><li><ul><li><a href="#11_28">🌾1.1数据库常用约束</a></li><li><a href="#12NOT_NULL_37">🌾1.2NOT NULL约束</a></li><li><a href="#13UNIQUE_89">🌾1.3UNIQUE约束</a></li><li><a href="#14DEFAULT_125">🌾1.4DEFAULT约定默认值</a></li><li><a href="#15_PRIMARY_KEY_161">🌾1.5 PRIMARY KEY约束</a></li><li><a href="#16_FOREIGN_KEY_258">🌾1.6 FOREIGN KEY约束</a></li></ul>
</li><li><a href="#2_370">🌱2.数据表的设计</a></li><li><ul><li><a href="#21_371">🌾2.1一对一</a></li><li><a href="#22_378">🌾2.2一对多</a></li><li><a href="#23_385">🌾2.3多对多</a></li></ul>
</li><li><a href="#3_392">🌱3.数据表的查询操作（进阶）</a></li><li><ul><li><a href="#31_393">🌾3.1将一个表中的数据插入到另一个表</a></li><li><a href="#32_462">🌾3.2聚合查询</a></li><li><ul><li><a href="#321_463">🌼3.2.1聚合查询函数</a></li><li><a href="#322_566">🌼3.2.2分组查询</a></li><li><a href="#323having_651">🌼3.2.3having</a></li></ul>
</li><li><a href="#33_688">🌾3.3联合（多表）查询</a></li><li><ul><li><a href="#331_689">🌼3.3.1笛卡尔积</a></li><li><a href="#332_1030">🌼3.3.2内连接</a></li><li><a href="#333_1159">🌼3.3.3外连接</a></li><li><a href="#334_1234">🌼3.3.4自连接</a></li><li><a href="#335_1270">🌼3.3.5子查询</a></li><li><a href="#336_1306">🌼3.3.6合并查询</a></li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<hr/>
<p><strong>温馨提示：</strong> 全文共2.9万字，阅读可能需要较长时间。<br/> <img alt="封面" src="https://img-blog.csdnimg.cn/557d9ad5648340559949f5cafc7d06da.png"/></p>
<hr/>
<h1><a id="1_27"></a>🌱1.数据库的约束</h1>
<h2><a id="11_28"></a>🌾1.1数据库常用约束</h2>
<ul><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> NOT NULL - 指示某列不能存储 NULL 值。</li><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> UNIQUE - 保证某列的每行必须有唯一的值。</li><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> DEFAULT - 规定没有给列赋值时的默认值。</li><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> PRIMARY KEY - NOT NULL 和 UNIQUE 的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。</li><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> FOREIGN KEY - 保证一个表中的数据匹配另一个表中的值的参照完整性。</li><li class="task-list-item"><input checked="true" class="task-list-item-checkbox" disabled="disabled" type="checkbox"/> CHECK - 保证列中的值符合指定的条件。对于MySQL数据库，对CHECK子句进行分析，但是忽略CHECK子句。</li></ul>
<h2><a id="12NOT_NULL_37"></a>🌾1.2NOT NULL约束</h2>
<p>该约束使用对象为列，创建数据表的时候使用，可以约束列的值不能为<code>null</code>。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型 <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql"><span class="token comment">-- 对id使用not null约束</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
<span class="token comment">--id值不能为null ，id默认值为null，所以插入数据时必须对id赋值</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 不为null的id，没问题</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 为null的id插入失败</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span>nul1<span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1054</span> <span class="token punctuation">(</span><span class="token number">42</span>S22<span class="token punctuation">)</span>: Unknown <span class="token keyword">column</span> <span class="token string">'nul1'</span> <span class="token operator">in</span> <span class="token string">'field list'</span>
<span class="token comment">-- 插入时不给id列赋值，插入失败</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1364</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Field <span class="token string">'id'</span> doesn't have a <span class="token keyword">default</span> <span class="token keyword">value</span>
</code></pre>
<p>该约束可以同时对多个使用。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 如果存在一个表则删除</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 对id和name都进行 not null 约束</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 查看表结构</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h2><a id="13UNIQUE_89"></a>🌾1.3UNIQUE约束</h2>
<p>该约束使用的对象为列，创建数据表的时候使用，可以约束该列的值不能重复。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型 <span class="token keyword">unique</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子:</p>
<pre><code class="prism language-sql"><span class="token comment">-- 删除原有的student表</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 创建student表，并对id和name使用unique约束</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">unique</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 查看表结构</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> YES  <span class="token operator">|</span> UNI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span> UNI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 插入不重复数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 插入id或name重复的数据，均失败</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: <span class="token keyword">Duplicate</span> entry <span class="token string">'1'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'id'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: <span class="token keyword">Duplicate</span> entry <span class="token string">'张三'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'name'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: <span class="token keyword">Duplicate</span> entry <span class="token string">'1'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'id'</span>
</code></pre>
<h2><a id="14DEFAULT_125"></a>🌾1.4DEFAULT约定默认值</h2>
<p>与上面约束使用方法一样，创建表时可使<code>default 默认值</code>来给某列设置默认值。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型 <span class="token keyword">default</span> 默认值<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">"匿名"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> 匿名    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 匿名   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h2><a id="15_PRIMARY_KEY_161"></a>🌾1.5 PRIMARY KEY约束</h2>
<p>该约束叫做主键约束，相当于<code>not null</code>和<code>unique</code>同时使用的效果，它能约束该列的值不能与其他列相同且不能为<code>null</code>，相当于一个身份证标识。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型 <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: <span class="token keyword">Duplicate</span> entry <span class="token string">'2'</span> <span class="token keyword">for</span> <span class="token keyword">key</span> <span class="token string">'PRIMARY'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>MySQL还支持自增主键，就是使用自增主键约束后，可以不用给这个列赋值，在插入记录时，它会自动从1开始自增（未初始值时），如果前一次插入时给定了一个值，则后续插入会基于该值自增。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型 <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> Field <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> id    <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------------+------+-----+---------+----------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">3</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 王五   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">"黑大帅"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"灰太狼"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"小灰灰"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">3</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">3</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-----------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 王五      <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+</span>
<span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h2><a id="16_FOREIGN_KEY_258"></a>🌾1.6 FOREIGN KEY约束</h2>
<p>该约束称为外键约束，是针对与两张表的情况下使用的，比如有一张学生表里面有学号，姓名，班级号，还有一张表是班级表，里面有班级号和班级名，该学生表里面的学生所在班级都能在班级表里面找到，这个时候就需要对学生表做一个外键约束，就能使学生表与班级表联系起来。我们发现学生表是依赖与班级表的，称学生表为子表，班级表为父表。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token comment">--父表已经创建</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>变量 数据类型<span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>子表中的一个变量<span class="token punctuation">)</span> <span class="token keyword">references</span> 父表名<span class="token punctuation">(</span>父表中的一个变量<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql"><span class="token comment">-- 创建class表作为student的父表</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> class <span class="token punctuation">(</span>classId <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> className <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> class<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> Field     <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> classId   <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span>
<span class="token operator">|</span> className <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+------+-----+---------+----------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> class <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"计算机1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"软工1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"英语1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"中文1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"机械1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"食工1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"化学1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"电子1班"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">"材料1班"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">9</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">9</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> class<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token operator">|</span> classId <span class="token operator">|</span> className     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">2</span> <span class="token operator">|</span> 软工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token number">9</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 添加外键约束创建子表student</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> classId <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>classId<span class="token punctuation">)</span> <span class="token keyword">references</span> class<span class="token punctuation">(</span>classId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> Field   <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+-------------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> id      <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span>
<span class="token operator">|</span> name    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">|</span> classId <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>     <span class="token operator">|</span> YES  <span class="token operator">|</span> MUL <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+-------------+------+-----+---------+----------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment">-- 添加学生</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>name<span class="token punctuation">,</span> classId<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">"喜羊羊"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"美羊羊"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"沸羊羊"</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"暖羊羊"</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"懒羊羊"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"慢羊羊"</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"灰太狼"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"小灰灰"</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">"黑大帅"</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">9</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">9</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span> classId <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token number">9</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 添加班级表中不存在的班级会插入失败</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token punctuation">(</span>name<span class="token punctuation">,</span> classId<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">"光头强"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ERROR <span class="token number">1452</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: Cannot <span class="token keyword">add</span> <span class="token operator">or</span> <span class="token keyword">update</span> a child <span class="token keyword">row</span>: a <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token keyword">constraint</span> fails <span class="token punctuation">(</span><span class="token punctuation">`</span>test<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student_ibfk_1<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>使用外键约束的数据表，依赖于其他一个表，这个被依赖的表称为父表，被约束的表被称为子表，当在子表插入记录时，必须在父表中存在某一对应关系才能插入。</p>
<p>除了插入记录，修改子表中的记录也有可能失败，就如上面的学生表和班级表，如果将黑大帅的班级id修改为10,但是这个id在班级表是不存在的，所以会发生修改失败的情况。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">update</span> student <span class="token keyword">set</span> classId <span class="token operator">=</span> <span class="token number">10</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">"黑大帅"</span><span class="token punctuation">;</span>
ERROR <span class="token number">1452</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: Cannot <span class="token keyword">add</span> <span class="token operator">or</span> <span class="token keyword">update</span> a child <span class="token keyword">row</span>: a <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token keyword">constraint</span> fails <span class="token punctuation">(</span><span class="token punctuation">`</span>test<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student_ibfk_1<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>同样，外键约束不仅约束子表，父表也是受约束的，当你试图将班级表中的id修改或删除，且在学生表中存在班级为此id的学生，那么你会操作失败。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">update</span> class <span class="token keyword">set</span> classId <span class="token operator">=</span> <span class="token number">10</span> <span class="token keyword">where</span> classId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
ERROR <span class="token number">1451</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span>: Cannot <span class="token keyword">delete</span> <span class="token operator">or</span> <span class="token keyword">update</span> a parent <span class="token keyword">row</span>: a <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token keyword">constraint</span> fails <span class="token punctuation">(</span><span class="token punctuation">`</span>test<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>student<span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token keyword">CONSTRAINT</span> <span class="token punctuation">`</span>student_ibfk_1<span class="token punctuation">`</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">`</span>class<span class="token punctuation">`</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>classId<span class="token punctuation">`</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>当然如果你试图删除或修改父表中的一个id所对应的记录，只要学生表中不存在班级为此id的学生，就可以删除。比如学生表中没有软工1班（对应id为2）的学生，那么这个记录在班级表可以修改或者删除。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">delete</span> <span class="token keyword">from</span> class <span class="token keyword">where</span> classId<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p><strong>外键约束的工作原理：</strong><br/> 在子表插入新的记录时，会根据对应的值先在父表查询，查询到了目标值之后才能完成子表的插入操作。<br/> 对于父表的查询操作，被依赖的这一列必须要要有索引（索引能加快查询效率），如果使用<code>primary key</code>或者<code>unique</code>约束该列，则该列会自动创建索引。所以上面的学生表与班级表的例子，虽然我们没有主动对父表中的<code>classId</code>列创建索引，但是该列被主键约束，自动创建了索引。</p>
<h1><a id="2_370"></a>🌱2.数据表的设计</h1>
<h2><a id="21_371"></a>🌾2.1一对一</h2>
<p>以教务系统为例，学生表有学号姓名班级等属性，教务系统上的用户表有账号密码等属性，每一个学生有且仅有一个教务系统的账号，并且教务系统上的一个账号仅对应一个学生，像这种关系就是一对一的关系。</p>
<p>那么如何在数据库表示这种一对一的关系呢？<br/> 方案1：把学生表与用户表放在一个表中一一对应。<br/> 方案2：学生表中增加一列，存放学生在教务系统上的账号，在教务系统用户表增加一列，存放学生的学号。</p>
<h2><a id="22_378"></a>🌾2.2一对多</h2>
<p>还是以教务系统为例，如学生与班级之间的关系就是一个一对多的关系，一个学生原则上只能在一个班级中，一个班级考研英语容纳多名学生。</p>
<p>那么如何在数据库表示这种一对多的关系呢？<br/> 方案1：在班级表中增加一列，存放一个班里面所有学生的学号。但是MySQL不支持这种方案，因为SQL中没有类似于数组的类型。<br/> 方案2：在一个学生表中增加一列，存放学生所在的班级。</p>
<h2><a id="23_385"></a>🌾2.3多对多</h2>
<p>还是以教务系统为例，如学生与课程之间的关系就是一个典型的多对多的关系，一个学生可以学习多门课程，一门课程中有多名学生学习。</p>
<p>那么如何在数据库表示这种多对多的关系呢？<br/> 只有一种方案：建立一个关联表，来关联学生表和课程表，这个关联表中有两列，一列用来存放学生学号，另一列存放课程编号，这样两表可以通过这一个关联表来实现多对多的一个关系。</p>
<h1><a id="3_392"></a>🌱3.数据表的查询操作（进阶）</h1>
<h2><a id="31_393"></a>🌾3.1将一个表中的数据插入到另一个表</h2>
<p>SQL支持将表A的数据插入到表B，但是前提的满足插入的时候需满足列与列之间的数据类型以及顺序要相同。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> B <span class="token keyword">select</span> 对应与表B的列集合 <span class="token keyword">from</span> A<span class="token punctuation">;</span>
</code></pre>
<p>栗子：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> A <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> A <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三疯"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"夏洛特"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">"熊大"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"刻晴"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"急先锋"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">5</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三疯    <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 夏洛特    <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 熊大      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 刻晴      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> 急先锋    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> B <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- A与B表数据类型顺序对应，不需调整</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> B <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">5</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> B<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三疯    <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 夏洛特    <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 熊大      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 刻晴      <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> 急先锋    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- A与C表数据类型顺序不对应，需要调整</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> C <span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> C <span class="token keyword">select</span> name<span class="token punctuation">,</span> id <span class="token keyword">from</span> A<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">5</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
Records: <span class="token number">5</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> C<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> id   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------+</span>
<span class="token operator">|</span> 张三疯    <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> 夏洛特    <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span> 熊大      <span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> 刻晴      <span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> 急先锋    <span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>将一个表A数据拷贝到另外一个表B本质是先查询表A的数据，查询出来的数据需要与表B对应，表A中查询结果为一临时表，然后再将这个临时表插入到表B。</p>
<h2><a id="32_462"></a>🌾3.2聚合查询</h2>
<h3><a id="321_463"></a>🌼3.2.1聚合查询函数</h3>
<table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>count(列名或表达式)</td><td>返回查询到的数据的个数</td></tr><tr><td>sum(列名或表达式)</td><td>返回查询到的数据的和</td></tr><tr><td>avg(列名或表达式)</td><td>返回查询到的数据的平均值</td></tr><tr><td>max(列名或表达式)</td><td>返回查询到的数据的最大值</td></tr><tr><td>min（列名或表达式)</td><td>返回查询到的数据的最小值</td></tr></tbody></table>
<p>对于上面的聚合函数可以在列名（表达式）前加入一个关键字<code>distinct</code>可以实现对查询到的数据去重后，再进行计算。</p>
<p>我们来对什么的聚合函数做一些演示，首先我们来创建一个表：</p>
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> exam_score<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> chinese <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> math <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>english <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> computer <span class="token keyword">double</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> exam_score <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'美羊羊'</span><span class="token punctuation">,</span><span class="token number">99.5</span><span class="token punctuation">,</span><span class="token number">90.5</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'懒羊羊'</span><span class="token punctuation">,</span> <span class="token number">58.5</span><span class="token punctuation">,</span><span class="token number">32.5</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">66.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'喜羊羊'</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'沸羊羊'</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">74.5</span><span class="token punctuation">,</span><span class="token number">81</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'暖羊羊'</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'灰太狼'</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token number">91</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">98.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token string">'小灰灰'</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">82</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'神秘人'</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>表格数据如下：</p>
<pre><code class="prism language-sql"><span class="token operator">+</span><span class="token comment">------+-----------+---------+------+---------+----------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span> computer <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+---------+------+---------+----------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>    <span class="token number">99.5</span> <span class="token operator">|</span> <span class="token number">90.5</span> <span class="token operator">|</span>    <span class="token number">98.0</span> <span class="token operator">|</span>     <span class="token number">82.0</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>    <span class="token number">58.5</span> <span class="token operator">|</span> <span class="token number">32.5</span> <span class="token operator">|</span>    <span class="token number">44.0</span> <span class="token operator">|</span>     <span class="token number">66.5</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>    <span class="token number">92.0</span> <span class="token operator">|</span> <span class="token number">98.0</span> <span class="token operator">|</span>    <span class="token number">92.0</span> <span class="token operator">|</span>    <span class="token number">100.0</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>    <span class="token number">78.0</span> <span class="token operator">|</span> <span class="token number">72.0</span> <span class="token operator">|</span>    <span class="token number">74.5</span> <span class="token operator">|</span>     <span class="token number">81.0</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>    <span class="token number">90.0</span> <span class="token operator">|</span> <span class="token number">91.0</span> <span class="token operator">|</span>    <span class="token number">98.0</span> <span class="token operator">|</span>     <span class="token number">76.0</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">6</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>    <span class="token number">33.0</span> <span class="token operator">|</span> <span class="token number">91.0</span> <span class="token operator">|</span>    <span class="token number">32.0</span> <span class="token operator">|</span>     <span class="token number">98.5</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>    <span class="token number">81.0</span> <span class="token operator">|</span> <span class="token number">82.0</span> <span class="token operator">|</span>    <span class="token number">78.0</span> <span class="token operator">|</span>     <span class="token number">88.0</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">8</span> <span class="token operator">|</span> 神秘人    <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+---------+------+---------+----------+</span>
</code></pre>
<p>首先我们来使用count函数，计算这个数据表有多少行，统计数据表行数可以对<code>*</code>的查询结果计数。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 一共8行</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span>        <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 当然也可以对输出的表名改名</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"全表行数"</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> 全表行数     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span>            <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>还有一个疑问，count函数能不能对<code>null</code>计数？我们来计算一下语文成绩的个数。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"语文成绩个数"</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> 语文成绩个数       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span>                  <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>所以说<code>null</code>值count函数不会计算，其实包括其他的聚合函数也不会计算<code>null</code>。</p>
<p>例如sum函数，对语文成绩进行求和。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 包含null结果</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"语文成绩总分"</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> 语文成绩总分       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span>              <span class="token number">532.0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 删除null的记录</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">delete</span> <span class="token keyword">from</span> exam_score <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"神秘人"</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"语文成绩总分"</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> 语文成绩总分       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span>              <span class="token number">532.0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
</code></pre>
<p>最后，聚合函数不能直接嵌套使用。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> exam_score<span class="token punctuation">;</span>
ERROR <span class="token number">1111</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Invalid <span class="token keyword">use</span> <span class="token keyword">of</span> <span class="token keyword">group</span> <span class="token keyword">function</span>
</code></pre>
<p>聚合函数针对的是行与行之间的计算，之前的表达式求值是列与列之间的计算。</p>
<h3><a id="322_566"></a>🌼3.2.2分组查询</h3>
<p>我们可以通过<code>group by 列名</code>关键字对行进行分组，按照列的值，将值相同的分成一组。<br/> 分组查询语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">select</span> 列<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">(</span>条件表达式<span class="token punctuation">)</span> <span class="token keyword">group</span> <span class="token keyword">by</span> 列名<span class="token punctuation">;</span>
</code></pre>
<p>其中条件表达式是类似<code>where</code>，<code>limit</code>的语句，可以省略。</p>
<p>栗子：<br/> 我们来建一个不同职位的薪水表。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 建表</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">table</span> emp <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> 
	name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> 
	role <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> 
	salary <span class="token keyword">numeric</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.03</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 插入数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token punctuation">(</span>name<span class="token punctuation">,</span> role<span class="token punctuation">,</span> salary<span class="token punctuation">)</span> <span class="token keyword">values</span>
     <span class="token punctuation">(</span><span class="token string">"幕后老板"</span><span class="token punctuation">,</span> <span class="token string">"董事长"</span><span class="token punctuation">,</span> <span class="token number">666666.66</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"诸葛亮"</span><span class="token punctuation">,</span> <span class="token string">"策划"</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"柯南"</span><span class="token punctuation">,</span> <span class="token string">"策划"</span><span class="token punctuation">,</span> <span class="token number">12800</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"梅毛冰"</span><span class="token punctuation">,</span> <span class="token string">"策划"</span><span class="token punctuation">,</span> <span class="token number">11000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"可莉"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"刻晴"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">5600</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"胡桃"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"八重神子"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">4888</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"枫原万叶"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">5200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"心海"</span><span class="token punctuation">,</span> <span class="token string">"游戏角色"</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"打工人"</span><span class="token punctuation">,</span> <span class="token string">"开发工程师"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"苦逼加班人"</span><span class="token punctuation">,</span> <span class="token string">"开发工程师"</span><span class="token punctuation">,</span> <span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"996专业户"</span><span class="token punctuation">,</span> <span class="token string">"开发工程师"</span><span class="token punctuation">,</span> <span class="token number">21000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
     <span class="token punctuation">(</span><span class="token string">"搬砖大师"</span><span class="token punctuation">,</span> <span class="token string">"开发工程师"</span><span class="token punctuation">,</span> <span class="token number">20888</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 查看数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-----------------+-----------------+-----------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name            <span class="token operator">|</span> role            <span class="token operator">|</span> salary    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------------+-----------------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 幕后老板        <span class="token operator">|</span> 董事长          <span class="token operator">|</span> <span class="token number">666666.66</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 诸葛亮          <span class="token operator">|</span> 策划            <span class="token operator">|</span>  <span class="token number">12000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 柯南            <span class="token operator">|</span> 策划            <span class="token operator">|</span>  <span class="token number">12800.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 梅毛冰          <span class="token operator">|</span> 策划            <span class="token operator">|</span>  <span class="token number">11000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 可莉            <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">5000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 刻晴            <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">5600.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 胡桃            <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">6666.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 八重神子        <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">4888.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 枫原万叶        <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">5200.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 心海            <span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">6000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> 打工人          <span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">20000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> 苦逼加班人      <span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">20000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">13</span> <span class="token operator">|</span> <span class="token number">996</span>专业户       <span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">21000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">14</span> <span class="token operator">|</span> 搬砖大师        <span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">20888.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------------+-----------------+-----------+</span>
<span class="token number">14</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>我们现在要查询每种岗位员工的薪水的平均值，最高值，最低值。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> role<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> role<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+-------------+-------------+</span>
<span class="token operator">|</span> role            <span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>   <span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+-------------+-------------+</span>
<span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">20472.000000</span> <span class="token operator">|</span>    <span class="token number">21000.00</span> <span class="token operator">|</span>    <span class="token number">20000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">5559.000000</span> <span class="token operator">|</span>     <span class="token number">6666.00</span> <span class="token operator">|</span>     <span class="token number">4888.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 策划            <span class="token operator">|</span>  <span class="token number">11933.333333</span> <span class="token operator">|</span>    <span class="token number">12800.00</span> <span class="token operator">|</span>    <span class="token number">11000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 董事长          <span class="token operator">|</span> <span class="token number">666666.660000</span> <span class="token operator">|</span>   <span class="token number">666666.66</span> <span class="token operator">|</span>   <span class="token number">666666.66</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+-------------+-------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 可以为查询的临时表更名</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> role<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"平均值"</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"最高薪资"</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"最低薪资"</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> role<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+--------------+--------------+</span>
<span class="token operator">|</span> role            <span class="token operator">|</span> 平均值        <span class="token operator">|</span> 最高薪资     <span class="token operator">|</span> 最低薪资     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+--------------+--------------+</span>
<span class="token operator">|</span> 开发工程师      <span class="token operator">|</span>  <span class="token number">20472.000000</span> <span class="token operator">|</span>     <span class="token number">21000.00</span> <span class="token operator">|</span>     <span class="token number">20000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>   <span class="token number">5559.000000</span> <span class="token operator">|</span>      <span class="token number">6666.00</span> <span class="token operator">|</span>      <span class="token number">4888.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 策划            <span class="token operator">|</span>  <span class="token number">11933.333333</span> <span class="token operator">|</span>     <span class="token number">12800.00</span> <span class="token operator">|</span>     <span class="token number">11000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> 董事长          <span class="token operator">|</span> <span class="token number">666666.660000</span> <span class="token operator">|</span>    <span class="token number">666666.66</span> <span class="token operator">|</span>    <span class="token number">666666.66</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+---------------+--------------+--------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>如果数据中存在<code>null</code>，那么聚合函数<code>avg</code>, <code>max</code>, <code>min</code>不会纳入计算。</p>
<h3><a id="323having_651"></a>🌼3.2.3having</h3>
<p>针对<code>group by</code>分组后的数据，需要对分组结果再进行条件过滤时，不能使用<code>where</code>条件语句进行过滤，只能使用<code>having</code>进行数据过滤。<br/> 语法格式与<code>where</code>差不多，只是<code>where</code>语句紧跟在表名后，而<code>having</code>跟在<code>group by</code>后。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token comment">-- having 用法</span>
<span class="token keyword">select</span> 聚合函数<span class="token punctuation">(</span>或者列<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名 <span class="token keyword">group</span> <span class="token keyword">by</span> 列 <span class="token keyword">having</span> 条件<span class="token punctuation">;</span>
<span class="token comment">-- where 用法</span>
<span class="token keyword">select</span> 聚合函数<span class="token punctuation">(</span>或者列<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件 <span class="token keyword">group</span> <span class="token keyword">by</span> 列<span class="token punctuation">;</span>
</code></pre>
<p>栗子：董事长的薪水太高了，算平均工资时不要把董事长的记录加进去（不是从服务器表中删除）</p>
<pre><code class="prism language-sql"><span class="token comment">-- where筛选</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> role<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"平均薪水"</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> role <span class="token operator">!=</span> <span class="token string">"董事长"</span> <span class="token keyword">group</span> <span class="token keyword">by</span> role<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token operator">|</span> role            <span class="token operator">|</span> 平均薪水     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token operator">|</span> 开发工程师      <span class="token operator">|</span> <span class="token number">20472.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>  <span class="token number">5559.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 策划            <span class="token operator">|</span> <span class="token number">11933.333333</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- having 筛选</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> role<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"平均薪水"</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> role <span class="token keyword">having</span> role <span class="token operator">!=</span> <span class="token string">"董事长"</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token operator">|</span> role            <span class="token operator">|</span> 平均薪水     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token operator">|</span> 开发工程师      <span class="token operator">|</span> <span class="token number">20472.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 游戏角色        <span class="token operator">|</span>  <span class="token number">5559.000000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 策划            <span class="token operator">|</span> <span class="token number">11933.333333</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+--------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h2><a id="33_688"></a>🌾3.3联合（多表）查询</h2>
<h3><a id="331_689"></a>🌼3.3.1笛卡尔积</h3>
<p>在数学中，两个集合<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        X
       
      
      
       X
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        Y
       
      
      
       Y
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span></span></span></span></span>的笛卡儿积(Cartesian product)，又称直积，表示为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        X
       
       
        ×
       
       
        Y
       
      
      
       X × Y
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault" style="margin-right: 0.07847em;">X</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span></span></span></span></span>，是其第一个对象是X的成员而第二个对象是Y的一个成员的所有可能的有序对。</p>
<p>例如，设集合<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        A
       
       
        =
       
       
        
         a
        
        
         ,
        
        
         b
        
       
      
      
       A={a,b}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault">b</span></span></span></span></span></span>，集合<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        B
       
       
        =
       
       
        
         0
        
        
         ,
        
        
         1
        
        
         ,
        
        
         2
        
       
      
      
       B={0,1,2}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.83888em; vertical-align: -0.19444em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span></span></span></span></span></span>，则两个集合的笛卡尔积为<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        (
       
       
        a
       
       
        ,
       
       
        0
       
       
        )
       
       
        ,
       
       
        (
       
       
        a
       
       
        ,
       
       
        1
       
       
        )
       
       
        ,
       
       
        (
       
       
        a
       
       
        ,
       
       
        2
       
       
        )
       
       
        ,
       
       
        (
       
       
        b
       
       
        ,
       
       
        0
       
       
        )
       
       
        ,
       
       
        (
       
       
        b
       
       
        ,
       
       
        1
       
       
        )
       
       
        ,
       
       
        (
       
       
        b
       
       
        ,
       
       
        2
       
       
        )
       
      
      
       {(a,0),(a,1),(a,2),(b,0),(b,1), (b,2)}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">0</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span></span>。</p>
<p>联合查询也称为多表查询，该查询基于笛卡尔积将多个表合并，再对这个合并表进行有效数据筛选。<br/> 笛卡尔积查询语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">select</span> 列<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表名<span class="token number">1</span><span class="token punctuation">,</span> 表名<span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
<p>栗子：假设我们有下面两张表，请把这两张表进行笛卡尔积。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 表1 stu 一共9个学生</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span> classId <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+</span>
<span class="token comment">-- 表2 class 没有id为2的班级 一共8个班级</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token operator">|</span> classId <span class="token operator">|</span> className     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------+---------------+</span>
<span class="token comment">-- 笛卡尔积结果 一共 9x8=72 条记录</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu<span class="token punctuation">,</span> class<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+---------+---------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span> classId <span class="token operator">|</span> classId <span class="token operator">|</span> className     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+---------+---------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">1</span> <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">3</span> <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">4</span> <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">5</span> <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">6</span> <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">7</span> <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span>       <span class="token number">8</span> <span class="token operator">|</span>       <span class="token number">9</span> <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------+---------+---------------+</span>
<span class="token number">72</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>对n条记录的表A和m条记录的表B进行笛卡尔积，一共会产生<code>n*m</code>条记录，所以这个操作很危险，因为实际工作时的表数据量非常大，进行笛卡尔积产生的记录就会更大，因此工作中很少使用，由于多表查询是基于笛卡尔积，因此多表查询操作也是危险的。</p>
<p>得到两表的笛卡尔积后，有大量的记录都是无效的，需要进行筛选，对于上面的这一个栗子，两表的<code>classId</code>相等的数据是有效的，我们可以通过条件查询来筛选出有效的数据，但是这两张表中都有<code>classId</code>这一列，当进行表合并时，存在同名列的情况，我们可以使用<code>表名.列名</code>的形式访问对应表中的列。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 筛选有效数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> className <span class="token keyword">from</span> stu<span class="token punctuation">,</span> class <span class="token keyword">where</span> stu<span class="token punctuation">.</span>classId<span class="token operator">=</span>class<span class="token punctuation">.</span>classId<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span> className     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span> 计算机<span class="token number">1</span>班     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 暖羊羊    <span class="token operator">|</span> 英语<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 美羊羊    <span class="token operator">|</span> 中文<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 沸羊羊    <span class="token operator">|</span> 机械<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span> 食工<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 小灰灰    <span class="token operator">|</span> 化学<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 灰太狼    <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 黑大帅    <span class="token operator">|</span> 电子<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 慢羊羊    <span class="token operator">|</span> 材料<span class="token number">1</span>班       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+---------------+</span>
</code></pre>
<p>我们来创建几个表来模拟不同班级不同学生不同课程的学生成绩信息：</p>
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> classes<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> student<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> course<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> score<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> classes <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">`</span><span class="token keyword">desc</span><span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> sn <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>
                      classes_id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> course<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> score<span class="token punctuation">(</span>score <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> student_id <span class="token keyword">int</span><span class="token punctuation">,</span> course_id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> classes<span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">`</span><span class="token keyword">desc</span><span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">values</span>
                                      <span class="token punctuation">(</span><span class="token string">'计算机系2020级1班'</span><span class="token punctuation">,</span> <span class="token string">'学习了计算机原理、C和Java语言、数据结构和算法'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      <span class="token punctuation">(</span><span class="token string">'中文系2020级3班'</span><span class="token punctuation">,</span><span class="token string">'学习了中国传统文学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      <span class="token punctuation">(</span><span class="token string">'自动化2020级5班'</span><span class="token punctuation">,</span><span class="token string">'学习了机械自动化'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      <span class="token punctuation">(</span><span class="token string">'数学系2020级2班'</span> <span class="token punctuation">,</span> <span class="token string">'学习了数学分析'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      <span class="token punctuation">(</span><span class="token string">'化学系2020级4班'</span> <span class="token punctuation">,</span> <span class="token string">'学习了有机化学，无机化学，物理化学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                      <span class="token punctuation">(</span><span class="token string">'生物系2020级6班'</span><span class="token punctuation">,</span> <span class="token string">'学习了生物学'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>sn<span class="token punctuation">,</span> name<span class="token punctuation">,</span> email<span class="token punctuation">,</span> classes_id<span class="token punctuation">)</span> <span class="token keyword">values</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020001'</span><span class="token punctuation">,</span><span class="token string">'喜羊羊'</span><span class="token punctuation">,</span><span class="token string">'xyy@163.com'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020002'</span><span class="token punctuation">,</span><span class="token string">'美羊羊'</span><span class="token punctuation">,</span><span class="token string">'myy@163.com'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020003'</span><span class="token punctuation">,</span><span class="token string">'沸羊羊'</span><span class="token punctuation">,</span><span class="token string">'fyy@163.com'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020004'</span><span class="token punctuation">,</span><span class="token string">'懒羊羊'</span><span class="token punctuation">,</span><span class="token string">'lyy@163.com'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020005'</span><span class="token punctuation">,</span><span class="token string">'花羊羊'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020006'</span><span class="token punctuation">,</span><span class="token string">'慢羊羊'</span><span class="token punctuation">,</span><span class="token string">'yjyj@163.com'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020007'</span><span class="token punctuation">,</span><span class="token string">'小灰灰'</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020008'</span><span class="token punctuation">,</span><span class="token string">'希儿'</span><span class="token punctuation">,</span><span class="token string">'nzdxierl@163.com'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020009'</span><span class="token punctuation">,</span><span class="token string">'布洛尼亚'</span><span class="token punctuation">,</span><span class="token string">'zzxt@163.com'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020010'</span><span class="token punctuation">,</span><span class="token string">'光头强'</span><span class="token punctuation">,</span><span class="token string">'wyfc@163.com'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020011'</span><span class="token punctuation">,</span><span class="token string">'黑大帅'</span><span class="token punctuation">,</span><span class="token string">'wwzz@163.com'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020012'</span><span class="token punctuation">,</span><span class="token string">'开心超人'</span><span class="token punctuation">,</span><span class="token string">'kxcr@163.com'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020013'</span><span class="token punctuation">,</span><span class="token string">'刻晴'</span><span class="token punctuation">,</span><span class="token string">'zjnz@163.com'</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020014'</span><span class="token punctuation">,</span><span class="token string">'可莉'</span><span class="token punctuation">,</span><span class="token string">'nslzknwdm@163.com'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020015'</span><span class="token punctuation">,</span><span class="token string">'万叶'</span><span class="token punctuation">,</span><span class="token string">'lypl@163.com'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                                       <span class="token punctuation">(</span><span class="token string">'2020016'</span><span class="token punctuation">,</span><span class="token string">'胡桃'</span><span class="token punctuation">,</span><span class="token string">'ylzh@163.com'</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> course<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span>
                             <span class="token punctuation">(</span><span class="token string">'Java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'中国传统文化'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'计算机原理'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'汉语言文学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'高等数学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'英语'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                             <span class="token punctuation">(</span><span class="token string">'大学物理'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'有机化学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'生物学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'数学分析'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'无机化学'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'机械制图'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> score<span class="token punctuation">(</span>score<span class="token punctuation">,</span> student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">)</span> <span class="token keyword">values</span>
<span class="token comment">-- 喜羊羊</span>
<span class="token punctuation">(</span><span class="token number">90.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">98.5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">93</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 美羊羊</span>
<span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">78.5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">94.5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 沸羊羊</span>
<span class="token punctuation">(</span><span class="token number">63</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">68</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 懒羊羊</span>
<span class="token punctuation">(</span><span class="token number">67</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 花羊羊</span>
<span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 慢羊羊</span>
<span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 小灰灰</span>
<span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">92</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 希儿</span>
<span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 布洛尼亚</span>
<span class="token punctuation">(</span><span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 光头强</span>
<span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 黑大帅</span>
<span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 开心超人</span>
<span class="token punctuation">(</span><span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 刻晴</span>
<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 可莉</span>
<span class="token punctuation">(</span><span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 万叶</span>
<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">82</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">91</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">-- 胡桃</span>
<span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">73</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>一共有四张表，<code>classes</code>为班级表，<code>student</code>为学生表，<code>course</code>表为课程表，<code>score</code>为成绩表，其中学生与班级的关系是一对多，学生与课程之间的关系是多对多。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> classes<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------------------+-------------------------------------------------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name                    <span class="token operator">|</span> <span class="token keyword">desc</span>                                                              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------------------+-------------------------------------------------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 计算机系<span class="token number">2020</span>级<span class="token number">1</span>班       <span class="token operator">|</span> 学习了计算机原理、C和Java语言、数据结构和算法                     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 中文系<span class="token number">2020</span>级<span class="token number">3</span>班         <span class="token operator">|</span> 学习了中国传统文学                                                <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 自动化<span class="token number">2020</span>级<span class="token number">5</span>班         <span class="token operator">|</span> 学习了机械自动化                                                  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 数学系<span class="token number">2020</span>级<span class="token number">2</span>班         <span class="token operator">|</span> 学习了数学分析                                                    <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 化学系<span class="token number">2020</span>级<span class="token number">4</span>班         <span class="token operator">|</span> 学习了有机化学，无机化学，物理化学                                <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 生物系<span class="token number">2020</span>级<span class="token number">6</span>班         <span class="token operator">|</span> 学习了生物学                                                      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------------------+-------------------------------------------------------------------+</span>
<span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+---------+--------------+-------------------+------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> sn      <span class="token operator">|</span> name         <span class="token operator">|</span> email             <span class="token operator">|</span> classes_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------+--------------+-------------------+------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2020001</span> <span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span> xyy<span class="token variable">@163.com</span>       <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">2020002</span> <span class="token operator">|</span> 美羊羊       <span class="token operator">|</span> myy<span class="token variable">@163.com</span>       <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">2020003</span> <span class="token operator">|</span> 沸羊羊       <span class="token operator">|</span> fyy<span class="token variable">@163.com</span>       <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2020004</span> <span class="token operator">|</span> 懒羊羊       <span class="token operator">|</span> lyy<span class="token variable">@163.com</span>       <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">2020005</span> <span class="token operator">|</span> 花羊羊       <span class="token operator">|</span> <span class="token boolean">NULL</span>              <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">2020006</span> <span class="token operator">|</span> 慢羊羊       <span class="token operator">|</span> yjyj<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> <span class="token number">2020007</span> <span class="token operator">|</span> 小灰灰       <span class="token operator">|</span> <span class="token boolean">NULL</span>              <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> <span class="token number">2020008</span> <span class="token operator">|</span> 希儿         <span class="token operator">|</span> nzdxierl<span class="token variable">@163.com</span>  <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> <span class="token number">2020009</span> <span class="token operator">|</span> 布洛尼亚     <span class="token operator">|</span> zzxt<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> <span class="token number">2020010</span> <span class="token operator">|</span> 光头强       <span class="token operator">|</span> wyfc<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> <span class="token number">2020011</span> <span class="token operator">|</span> 黑大帅       <span class="token operator">|</span> wwzz<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> <span class="token number">2020012</span> <span class="token operator">|</span> 开心超人     <span class="token operator">|</span> kxcr<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">13</span> <span class="token operator">|</span> <span class="token number">2020013</span> <span class="token operator">|</span> 刻晴         <span class="token operator">|</span> zjnz<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">14</span> <span class="token operator">|</span> <span class="token number">2020014</span> <span class="token operator">|</span> 可莉         <span class="token operator">|</span> nslzknwdm<span class="token variable">@163.com</span> <span class="token operator">|</span>          <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">15</span> <span class="token operator">|</span> <span class="token number">2020015</span> <span class="token operator">|</span> 万叶         <span class="token operator">|</span> lypl<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">16</span> <span class="token operator">|</span> <span class="token number">2020016</span> <span class="token operator">|</span> 胡桃         <span class="token operator">|</span> ylzh<span class="token variable">@163.com</span>      <span class="token operator">|</span>          <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------+--------------+-------------------+------------+</span>
<span class="token number">16</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> Java               <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 计算机原理         <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 汉语言文学         <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 英语               <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> 大学物理           <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">8</span> <span class="token operator">|</span> 有机化学           <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">9</span> <span class="token operator">|</span> 生物学             <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 数学分析           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> 无机化学           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> 机械制图           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+</span>
<span class="token number">12</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+</span>
<span class="token operator">|</span> score <span class="token operator">|</span> student_id <span class="token operator">|</span> course_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">90.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">98.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">93.0</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">78.5</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">94.5</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">98.0</span> <span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">63.0</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">68.0</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">79.0</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">67.0</span> <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">23.0</span> <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span>         <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">72.0</span> <span class="token operator">|</span>          <span class="token number">4</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">81.0</span> <span class="token operator">|</span>          <span class="token number">5</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">90.0</span> <span class="token operator">|</span>          <span class="token number">5</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">87.0</span> <span class="token operator">|</span>          <span class="token number">6</span> <span class="token operator">|</span>         <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">90.0</span> <span class="token operator">|</span>          <span class="token number">6</span> <span class="token operator">|</span>         <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">89.0</span> <span class="token operator">|</span>          <span class="token number">6</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">80.0</span> <span class="token operator">|</span>          <span class="token number">7</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">92.0</span> <span class="token operator">|</span>          <span class="token number">7</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">89.0</span> <span class="token operator">|</span>          <span class="token number">8</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">78.0</span> <span class="token operator">|</span>          <span class="token number">8</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">82.0</span> <span class="token operator">|</span>          <span class="token number">9</span> <span class="token operator">|</span>         <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">98.0</span> <span class="token operator">|</span>          <span class="token number">9</span> <span class="token operator">|</span>        <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">70.0</span> <span class="token operator">|</span>         <span class="token number">10</span> <span class="token operator">|</span>         <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">81.0</span> <span class="token operator">|</span>         <span class="token number">10</span> <span class="token operator">|</span>        <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>         <span class="token number">11</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">90.0</span> <span class="token operator">|</span>         <span class="token number">11</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">72.0</span> <span class="token operator">|</span>         <span class="token number">11</span> <span class="token operator">|</span>        <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">61.0</span> <span class="token operator">|</span>         <span class="token number">12</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">87.0</span> <span class="token operator">|</span>         <span class="token number">12</span> <span class="token operator">|</span>        <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">90.0</span> <span class="token operator">|</span>         <span class="token number">13</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>         <span class="token number">13</span> <span class="token operator">|</span>        <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">58.0</span> <span class="token operator">|</span>         <span class="token number">14</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">72.0</span> <span class="token operator">|</span>         <span class="token number">14</span> <span class="token operator">|</span>         <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">78.0</span> <span class="token operator">|</span>         <span class="token number">14</span> <span class="token operator">|</span>        <span class="token number">11</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">90.0</span> <span class="token operator">|</span>         <span class="token number">15</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">82.0</span> <span class="token operator">|</span>         <span class="token number">15</span> <span class="token operator">|</span>         <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">91.0</span> <span class="token operator">|</span>         <span class="token number">15</span> <span class="token operator">|</span>        <span class="token number">11</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">99.0</span> <span class="token operator">|</span>         <span class="token number">16</span> <span class="token operator">|</span>         <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">73.0</span> <span class="token operator">|</span>         <span class="token number">16</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">89.0</span> <span class="token operator">|</span>         <span class="token number">16</span> <span class="token operator">|</span>         <span class="token number">9</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+</span>
<span class="token number">43</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>我们根据这几张表来说明如何进行多表查询，其中多表查询需要对多个表进行连接，连接的常用方式有内连接，左外连接，右外连接，全外连接（MySQL不支持），如果多表之间的数据均有对应，内外连接没有区别，如果多表之间的记录没有全部对应，内连接只会显示多表对应的数据集合，左外连接以左表为主，右外连接以右表连接为主。</p>
<p>多表查询的主要步骤为：</p>
<ol><li>将多个表笛卡尔积。</li><li>筛选有效信息。</li><li>根据需求慢慢使查询结果达到预期。</li></ol>
<h3><a id="332_1030"></a>🌼3.3.2内连接</h3>
<p>格式语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表<span class="token number">1</span><span class="token punctuation">,</span> 表<span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>
<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表<span class="token number">1</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> 表<span class="token number">2</span> <span class="token keyword">on</span> 条件 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre>
<p>其中<code>inner</code>可以省略。<br/> 内连接查询的数据记录如下图涂色部分：<br/> <img alt="3-3-2" src="https://img-blog.csdnimg.cn/a5ee625f34e64cc0be9ca1ca081cde27.png"/><br/> 栗子：查询“喜羊羊”同学的成绩列表，无需显示科目。<br/> 首先要知道喜羊羊的成绩，那么必须得查询到喜羊羊的个人信息，除此之外，还得从分数表获取成绩，所以需要对学生表和分数表进行笛卡尔积。对上面所举例的学生表和成绩表进行笛卡尔积，一共会产生16*43条数据。<br/> 然后我们需要对这些数据进行筛选，首先学生姓名必须是喜羊羊，学生表中的学生id要与成绩表中学生id相同。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span> score <span class="token keyword">where</span> student<span class="token punctuation">.</span>name<span class="token operator">=</span><span class="token string">"喜羊羊"</span> <span class="token operator">and</span> student<span class="token punctuation">.</span>id<span class="token operator">=</span>score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+---------+-----------+-------------+------------+-------+------------+-----------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> sn      <span class="token operator">|</span> name      <span class="token operator">|</span> email       <span class="token operator">|</span> classes_id <span class="token operator">|</span> score <span class="token operator">|</span> student_id <span class="token operator">|</span> course_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------+-----------+-------------+------------+-------+------------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2020001</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span> xyy<span class="token variable">@163.com</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">90.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2020001</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span> xyy<span class="token variable">@163.com</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">98.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2020001</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span> xyy<span class="token variable">@163.com</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">93.0</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2020001</span> <span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span> xyy<span class="token variable">@163.com</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+---------+-----------+-------------+------------+-------+------------+-----------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 只保留姓名，成绩，课程编号即可</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> name<span class="token punctuation">,</span> score<span class="token punctuation">,</span> course_id <span class="token keyword">from</span> student<span class="token punctuation">,</span> score <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"喜羊羊"</span> <span class="token operator">and</span> student<span class="token punctuation">.</span>id<span class="token operator">=</span>score<span class="token punctuation">.</span>student_id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+-----------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> score <span class="token operator">|</span> course_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+-----------+</span>
<span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>  <span class="token number">90.5</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>  <span class="token number">98.5</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>  <span class="token number">93.0</span> <span class="token operator">|</span>         <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊    <span class="token operator">|</span>  <span class="token number">88.0</span> <span class="token operator">|</span>         <span class="token number">6</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+-----------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>再来一个栗子：查询所有同学的总成绩和个人信息。首先肯定是需要对学生表和成绩表进行笛卡尔积并筛选出有效数据，得到这些数据后，我们需要查询每位同学的总分，每位同学的分数是分布在多行的，所以需要使用分组聚合查询，整体思路就是先得到所有同学的有效成绩，再利用聚合查询将每个同学的成绩汇总。至于分组，我们可以按照<code>id</code>分组也可以按照<code>name</code>分组进行聚合查询。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span> score <span class="token keyword">where</span> id<span class="token operator">=</span>student_id <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+------------+</span>
<span class="token operator">|</span> name         <span class="token operator">|</span> <span class="token function">sum</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+------------+</span>
<span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span>      <span class="token number">370.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 美羊羊       <span class="token operator">|</span>      <span class="token number">359.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 沸羊羊       <span class="token operator">|</span>      <span class="token number">210.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 懒羊羊       <span class="token operator">|</span>      <span class="token number">162.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 花羊羊       <span class="token operator">|</span>      <span class="token number">171.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 慢羊羊       <span class="token operator">|</span>      <span class="token number">266.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 小灰灰       <span class="token operator">|</span>      <span class="token number">172.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 希儿         <span class="token operator">|</span>      <span class="token number">167.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 布洛尼亚     <span class="token operator">|</span>      <span class="token number">180.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 光头强       <span class="token operator">|</span>      <span class="token number">151.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 黑大帅       <span class="token operator">|</span>      <span class="token number">250.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 开心超人     <span class="token operator">|</span>      <span class="token number">148.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 刻晴         <span class="token operator">|</span>      <span class="token number">178.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 可莉         <span class="token operator">|</span>      <span class="token number">208.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 万叶         <span class="token operator">|</span>      <span class="token number">263.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 胡桃         <span class="token operator">|</span>      <span class="token number">261.0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+------------+</span>
<span class="token number">16</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>趁热打铁，继续加大难度，现在需要查询每位同学的成绩，个人信息以及需要将成绩具体对应到哪一门课程。这个问题，我们需要将学生表，分数表，课程表依次进行笛卡尔积运算并筛选出有效的信息。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> student<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token string">"姓名"</span><span class="token punctuation">,</span> course<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token string">"课程科目"</span><span class="token punctuation">,</span> score <span class="token keyword">as</span> <span class="token string">"成绩"</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span> score<span class="token punctuation">,</span> course <span class="token keyword">where</span> student<span class="token punctuation">.</span>id<span class="token operator">=</span>score<span class="token punctuation">.</span>student_id <span class="token operator">and</span> score<span class="token punctuation">.</span>course_id<span class="token operator">=</span>course<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+--------+</span>
<span class="token operator">|</span> 姓名         <span class="token operator">|</span> 课程科目           <span class="token operator">|</span> 成绩   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+--------+</span>
<span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span> Java               <span class="token operator">|</span>   <span class="token number">90.5</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span> 计算机原理         <span class="token operator">|</span>   <span class="token number">98.5</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">93.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 喜羊羊       <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">88.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 美羊羊       <span class="token operator">|</span> Java               <span class="token operator">|</span>   <span class="token number">88.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 美羊羊       <span class="token operator">|</span> 计算机原理         <span class="token operator">|</span>   <span class="token number">78.5</span> <span class="token operator">|</span>
<span class="token operator">|</span> 美羊羊       <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">94.5</span> <span class="token operator">|</span>
<span class="token operator">|</span> 美羊羊       <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">98.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 沸羊羊       <span class="token operator">|</span> Java               <span class="token operator">|</span>   <span class="token number">63.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 沸羊羊       <span class="token operator">|</span> 计算机原理         <span class="token operator">|</span>   <span class="token number">68.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 沸羊羊       <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">79.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 懒羊羊       <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">67.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 懒羊羊       <span class="token operator">|</span> 汉语言文学         <span class="token operator">|</span>   <span class="token number">23.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 懒羊羊       <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">72.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 花羊羊       <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">81.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 花羊羊       <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">90.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 慢羊羊       <span class="token operator">|</span> 大学物理           <span class="token operator">|</span>   <span class="token number">87.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 慢羊羊       <span class="token operator">|</span> 生物学             <span class="token operator">|</span>   <span class="token number">90.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 慢羊羊       <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">89.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 小灰灰       <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">80.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 小灰灰       <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">92.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 希儿         <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">89.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 希儿         <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">78.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 布洛尼亚     <span class="token operator">|</span> 大学物理           <span class="token operator">|</span>   <span class="token number">82.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 布洛尼亚     <span class="token operator">|</span> 机械制图           <span class="token operator">|</span>   <span class="token number">98.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 光头强       <span class="token operator">|</span> 大学物理           <span class="token operator">|</span>   <span class="token number">70.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 光头强       <span class="token operator">|</span> 机械制图           <span class="token operator">|</span>   <span class="token number">81.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 黑大帅       <span class="token operator">|</span> Java               <span class="token operator">|</span>   <span class="token number">88.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 黑大帅       <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">90.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 黑大帅       <span class="token operator">|</span> 机械制图           <span class="token operator">|</span>   <span class="token number">72.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 开心超人     <span class="token operator">|</span> 英语               <span class="token operator">|</span>   <span class="token number">61.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 开心超人     <span class="token operator">|</span> 数学分析           <span class="token operator">|</span>   <span class="token number">87.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 刻晴         <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">90.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 刻晴         <span class="token operator">|</span> 数学分析           <span class="token operator">|</span>   <span class="token number">88.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 可莉         <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">58.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 可莉         <span class="token operator">|</span> 有机化学           <span class="token operator">|</span>   <span class="token number">72.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 可莉         <span class="token operator">|</span> 无机化学           <span class="token operator">|</span>   <span class="token number">78.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 万叶         <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">90.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 万叶         <span class="token operator">|</span> 有机化学           <span class="token operator">|</span>   <span class="token number">82.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 万叶         <span class="token operator">|</span> 无机化学           <span class="token operator">|</span>   <span class="token number">91.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 胡桃         <span class="token operator">|</span> 中国传统文化       <span class="token operator">|</span>   <span class="token number">99.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 胡桃         <span class="token operator">|</span> 高等数学           <span class="token operator">|</span>   <span class="token number">73.0</span> <span class="token operator">|</span>
<span class="token operator">|</span> 胡桃         <span class="token operator">|</span> 生物学             <span class="token operator">|</span>   <span class="token number">89.0</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------------+--------+</span>
<span class="token number">43</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>使用<code>join</code>语句也是可以的：</p>
<pre><code class="prism language-sql"><span class="token keyword">select</span> 
	student<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token string">"姓名"</span><span class="token punctuation">,</span> course<span class="token punctuation">.</span>name <span class="token keyword">as</span> <span class="token string">"课程科目"</span><span class="token punctuation">,</span> score <span class="token keyword">as</span> <span class="token string">"成绩"</span> 
<span class="token keyword">from</span> 
	student <span class="token keyword">join</span> score <span class="token keyword">on</span> student<span class="token punctuation">.</span>id<span class="token operator">=</span>score<span class="token punctuation">.</span>student_id <span class="token keyword">join</span> course <span class="token keyword">on</span> score<span class="token punctuation">.</span>course_id<span class="token operator">=</span>course<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
</code></pre>
<h3><a id="333_1159"></a>🌼3.3.3外连接</h3>
<p>外连接分为左外连接，右外连接，全外连接（SQL不支持），其中左外连接是以左表为主，右外连接以右表为主。<br/> <img alt="3-3-3" src="https://img-blog.csdnimg.cn/01227436e12543278ecf7a194d501891.png"/><br/> <img alt="3-3-4" src="https://img-blog.csdnimg.cn/644747d1d7cc48499ed4ce24bb022dbd.png"/></p>
<p><img alt="3-3-5" src="https://img-blog.csdnimg.cn/fcbd7603f25940be81f4dc497c186e9f.png"/><br/> 外连接是通过<code>join on</code>关键字来实现的，具体语法如下：</p>
<pre><code class="prism language-sql"><span class="token comment">-- 左外连接</span>
<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表A <span class="token keyword">left</span> <span class="token keyword">join</span> 表B <span class="token keyword">on</span> 条件 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token comment">-- 右外连接</span>
<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表A <span class="token keyword">right</span> <span class="token keyword">join</span> 表B <span class="token keyword">on</span> 条件 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre>
<p>我们来看下面的一个例子：</p>
<pre><code class="prism language-sql"><span class="token comment">-- 建表A和B</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> A <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"李四"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> B <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">98.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">89.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">82.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- A， B表数据</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 王五   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+</span>
<span class="token operator">+</span><span class="token comment">------+-------+</span>
<span class="token operator">|</span> A_id <span class="token operator">|</span> score <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">98.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">89.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">82.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-------+</span>
</code></pre>
<p>使用左外连接多表查询：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">left</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>id<span class="token operator">=</span>B<span class="token punctuation">.</span>A_id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> A_id <span class="token operator">|</span> score <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">98.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">89.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 王五   <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>使用右外连接多表查询：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">right</span> <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>id<span class="token operator">=</span>B<span class="token punctuation">.</span>A_id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> A_id <span class="token operator">|</span> score <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">98.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">89.50</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>   <span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">82.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>使用内连接多表查询：</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">join</span> B <span class="token keyword">on</span> A<span class="token punctuation">.</span>id<span class="token operator">=</span>B<span class="token punctuation">.</span>A_id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> A_id <span class="token operator">|</span> score <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">98.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">89.50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+------+-------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h3><a id="334_1234"></a>🌼3.3.4自连接</h3>
<p>自连接其实也是多表查询的一种，只不过原来是多张不同的表进行笛卡尔积，自连接是多张相同的表进行笛卡尔积，主要用于将行与行转换为列与列。<br/> 语法：</p>
<pre><code class="prism language-sql"><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表A<span class="token punctuation">,</span> 表A<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>
</code></pre>
<p>栗子：根据3.3.1-3.3.2的成绩表，查找计算机组成原理成绩高于Java成绩的同学<code>id</code>，其中计算机组成原理课程<code>id</code>为<code>3</code>，Java课程<code>id</code>为<code>1</code>。<br/> 首先需要将两个成绩表笛卡尔积，由于两张相同的表存在列同名情况，需要使用<code>表名·.列名</code>来指定是哪一个表的列，对结果保留满足以下条件的数据：</p>
<ol><li>两表学生id相同。</li><li>使左边的表保留课程id为<code>3</code>的数据，右边的表保留课程<code>id</code>为<code>1</code>的数据。</li><li>上一步保证了左边的成绩是计算机原理，右边的成绩是Java，筛选计算机组成原理成绩大于Java成绩的同学id。</li></ol>
<p>最后将学生id输出即可。</p>
<pre><code class="prism language-sql">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">as</span> s1<span class="token punctuation">,</span> score <span class="token keyword">as</span> s2 <span class="token keyword">where</span> s1<span class="token punctuation">.</span>student_id<span class="token operator">=</span>s2<span class="token punctuation">.</span>student_id <span class="token operator">and</span> s1<span class="token punctuation">.</span>course_id<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">and</span> s2<span class="token punctuation">.</span>course_id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> s1<span class="token punctuation">.</span>score<span class="token operator">&gt;</span>s2<span class="token punctuation">.</span>score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+-------+------------+-----------+</span>
<span class="token operator">|</span> score <span class="token operator">|</span> student_id <span class="token operator">|</span> course_id <span class="token operator">|</span> score <span class="token operator">|</span> student_id <span class="token operator">|</span> course_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+-------+------------+-----------+</span>
<span class="token operator">|</span>  <span class="token number">98.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>  <span class="token number">90.5</span> <span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">68.0</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>         <span class="token number">3</span> <span class="token operator">|</span>  <span class="token number">63.0</span> <span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>         <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+-----------+-------+------------+-----------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- 仅保留学生id</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> s1<span class="token punctuation">.</span>student_id <span class="token keyword">from</span> score <span class="token keyword">as</span> s1<span class="token punctuation">,</span> score <span class="token keyword">as</span> s2 <span class="token keyword">where</span> s1<span class="token punctuation">.</span>student_id<span class="token operator">=</span>s2<span class="token punctuation">.</span>student_id <span class="token operator">and</span> s1<span class="token punctuation">.</span>course_id<span class="token operator">=</span><span class="token number">3</span> <span class="token operator">and</span> s2<span class="token punctuation">.</span>course_id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">and</span> s1<span class="token punctuation">.</span>score<span class="token operator">&gt;</span>s2<span class="token punctuation">.</span>score<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> student_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span>          <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>          <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<h3><a id="335_1270"></a>🌼3.3.5子查询</h3>
<p>所谓子查询就是将查询语句嵌套，原来需要多部查询的操作转换为一步操作，但是嵌套层数多了，非常容易出错，因为人类的大脑并不擅长同时维护<code>多个变量</code>。</p>
<p>比如，查找花羊羊的同班同学，正常操作是先查询花羊羊所处班级，在根据班级查询花羊羊的同班同学。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 分步查询</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> classes_id <span class="token keyword">from</span> student <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"花羊羊"</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> classes_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span>          <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> name <span class="token keyword">from</span> student <span class="token keyword">where</span> classes_id<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>
<span class="token operator">|</span> 花羊羊    <span class="token operator">|</span>
<span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>
<span class="token operator">|</span> 希儿      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token comment">-- 子查询</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> name <span class="token keyword">from</span> student <span class="token keyword">where</span> classes_id<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> classes_id <span class="token keyword">from</span> student <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"花羊羊"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span> 懒羊羊    <span class="token operator">|</span>
<span class="token operator">|</span> 花羊羊    <span class="token operator">|</span>
<span class="token operator">|</span> 小灰灰    <span class="token operator">|</span>
<span class="token operator">|</span> 希儿      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
</code></pre>
<p>当嵌套的查询语句出现多条记录，可以搭配<code>[not]in</code>，<code>[not]exists</code>来使用·，就不多说了，因为子查询的方式比较反人类，工作中用的也不多。</p>
<h3><a id="336_1306"></a>🌼3.3.6合并查询</h3>
<p>使用关键字<code>union</code>和<code>union all</code>能够取得两个结果集的并集，这两个合并查询关键字不同点就是带<code>all</code>的不会对结果去重，而不带<code>all</code>的会对结果去重，与<code>or</code>不相同的一点的是合并查询能够在多表进行查询得到并集，而<code>or</code>只能在单表中查询得到并集。<br/> 总的来说，合并查询能够查询不仅能够查询单表中两个结果的并集，也能查询多表中两个结果的并集，而<code>or</code>只能用于单表查询。<br/> 语法格式：</p>
<pre><code class="prism language-sql"><span class="token comment">-- 去重合并查询</span>
<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表A <span class="token keyword">where</span> 条件 <span class="token keyword">union</span> <span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表B <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>
<span class="token comment">-- 不去重合并查询</span>
<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表A <span class="token keyword">where</span> 条件 <span class="token keyword">union</span> <span class="token keyword">all</span> <span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表B <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>
</code></pre>
<p>表A与表B可以相同。</p>
<p>例如查询课程名为高等数学或者课程<code>id</code>大于等于<code>10</code>的课程名称。</p>
<pre><code class="prism language-sql"><span class="token comment">-- 合并查询</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"高等数学"</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> id<span class="token operator">&gt;=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 高等数学     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 数学分析     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> 无机化学     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> 机械制图     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment">-- or</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> course <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">"高等数学"</span> <span class="token operator">or</span> id<span class="token operator">&gt;=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 高等数学     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">10</span> <span class="token operator">|</span> 数学分析     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">11</span> <span class="token operator">|</span> 无机化学     <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">12</span> <span class="token operator">|</span> 机械制图     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre>
<p>到这里数据库的约束和数据表的一些稍微难一点的操作就全部介绍完毕了，最重要的还是实践，多写一些实例，多敲一些代码，这些知识完全是可以熟练掌握的。好了，内容就到这里了，下次见！</p>
<hr/>
<p><strong>修订补充时间：2022年3月21日</strong></p>
<p><strong>补充1：</strong> SQL查询中各个关键字的执行先后顺序： from &gt; on&gt; join &gt; where &gt; group by &gt; with &gt; having &gt;select &gt; distinct &gt; order by &gt; limit<br/> <strong>补充2：</strong> 外键约束语法补充</p>
<pre><code class="prism language-sql"><span class="token comment">-- 建表时创建外键</span>
<span class="token keyword">constraint</span> 外键名 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>子表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 父表名<span class="token punctuation">(</span>父表字段<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 建表是创建多个外键约束</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>子表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 父表名<span class="token punctuation">(</span>父表字段<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>子表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 父表名<span class="token punctuation">(</span>父表字段<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token comment">-- 建表后创建外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 子表名 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 外键名 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>子表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 父表名<span class="token punctuation">(</span>父表字段<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 子表名 <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> 外键约束名<span class="token punctuation">;</span>
</code></pre>
<hr/>
<p>CSDN社区 《原创标兵》活动，只要参与其中并发布原创就有机会获得官方奖品：精品日历、新程序员杂志，快来参与吧！链接直达 <a href="https://bbs.csdn.net/topics/605387592">https://bbs.csdn.net/topics/605387592</a></p>
<center>
<font color="red">觉得文章写得不错的老铁们，点赞评论关注走一波！谢谢啦！ </font>
</center>
<p><img alt="1-99" height="180" src="https://img-blog.csdnimg.cn/70dbcef1173945aa9b467ea939621bba.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pyq6KeB6Iqx6Ze7,size_13,color_FFFFFF,t_70,g_se,x_16#pic_center" width="160"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>