<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-light" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="___0"></a>文件管理 - 文件系统</h1>
<h6><a id="___2"></a>操作系统第三次课程作业 - 文件系统</h6>
<p>请勿删除可执行程序目录下的<code>BitMapInfo.txt</code> ,<code>CategoryInfo.txt </code>, <code>MyDiskInfo.txt</code>, 及其他配置文件, 否则可能导致文件系统无法正常运行</p>
<hr/>
<h2><a id="_8"></a>项目需求</h2>
<h3><a id="_10"></a>基本任务</h3>
<pre><code>在内存中开辟一个空间作为文件存储器，在其上实现一个简单的文件系统。

退出这个文件系统时，需要该文件系统的内容保存到磁盘上，以便下次可以将其恢复到内存中来。
</code></pre>
<h3><a id="_16"></a>功能描述</h3>
<ul><li> <p>文件存储空间管理可采取显式链接（如FAT）或者其他方法。（即自选一种方法）</p> </li><li> <p>空闲空间管理可采用位图或者其他方法。如果采用了位图，可将位图和FAT表合二为一。</p> </li><li> <p>文件目录采用多级目录结构。至于是否采用索引节点结构，自选。目录项目中应包含：文件名、物理地址、长度等信息。同学可在这里增加一些其他信息。</p> </li><li> <p>文件系统提供的操作：</p>
<ul><li> <p>格式化</p> </li><li> <p>创建子目录</p> </li><li> <p>删除子目录</p> </li><li> <p>显示目录</p> </li><li> <p>更改当前目录</p> </li><li> <p>创建文件</p> </li><li> <p>打开文件</p> </li><li> <p>关闭文件</p> </li><li> <p>写文件</p> </li><li> <p>读文件</p> </li><li> <p>删除文件</p> </li></ul> </li></ul>
<h3><a id="_48"></a>项目目的</h3>
<ul><li>熟悉文件存储空间的管理；</li><li>熟悉文件的物理结构、目录结构和文件操作；</li><li>熟悉文件系统管理实现；</li><li>加深对文件系统内部功能和实现过程的理解</li></ul>
<h2><a id="_57"></a>开发环境</h2>
<ul><li> <p><strong>开发环境:</strong> Windows 10</p> </li><li> <p><strong>开发软件:</strong></p> <p><strong>Visual Studio 2017</strong> <em>15.9.28307.665</em></p> </li><li> <p><strong>开发语言:</strong> C#</p> </li></ul>
<h2><a id="_69"></a>项目结构</h2>
<pre><code>│  BitMapInfo.txt   
│  CategoryInfo.txt   
│  FileManageSystem.exe   
│  FileManageSystem.exe.config   
│  FileManageSystem.pdb   
│  MyControl.dll   
│  MyControl.pdb   
│  MyDiskInfo.txt   
│  README.md   
│  文件管理系统_设计方案报告.md   
│  文件管理系统_设计方案报告.pdf   
│  
├─Resources   
│  │  file18.png   
│  │  file25.png   
│  │  fileopen48.ico   
│  │  folder18.png  
│  │  folder25.png   
│  │  
│  └─icon   
│          help.ico   
│          icon.ico   
│          note.ico   
│          
└─src
    │  Category.cs   
    │  FCB.cs   
    │  Program.cs   
    │  VirtualDisk.cs   
    │  
    └─Form   
        ├─HelpForm   
        │      HelpForm.cs   
        │      HelpForm.Designer.cs   
        │      HelpForm.resx   
        │      
        ├─MainForm   
        │      MainForm.cs   
        │      MainForm.Designer.cs   
        │      MainForm.resx   
        │      
        └─NoteForm   
                NoteForm.cs   
                NoteForm.Designer.cs   
                NoteForm.resx        
</code></pre>
<h2><a id="_119"></a>操作说明</h2>
<ul><li>双击目录下<code>FileManagementSystem.exe</code>可执行文件进入文件系统模拟界面</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ba07a5e564b6452a9377af9f849ca6b4.png"/></p>
<ul><li> <p>请详细阅读<strong>操作帮助</strong>了解模拟器功能, 点击<code>我知道了</code>关闭<strong>帮助信息窗口</strong></p> </li><li> <p>单击<strong>鼠标右键</strong>, 新建文件夹/新建文件</p> </li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/83a42023311d4962a6c61cf8cfcc2c78.png"/></p>
<ul><li>您也可以点击<strong>右侧按钮</strong>进行创建文件夹/文本文件</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/0878172f144b4df887997b1ee408b2ad.png"/></p>
<ul><li>输入文件夹名或文件名, 即可在目录中查看到创建的文件夹/文件</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/839937c9cf1c4053877250ba271447a5.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/56763e9736f8478ab4777e5960a5115f.png"/></p>
<ul><li>在文件夹/文件上点击鼠标右键可选择打开/删除</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/3f296781c1ab4249963b3cf6f87abe9f.png"/></p>
<ul><li><strong>单击文件夹</strong>可进入下一级文件夹, 上方可查看<strong>当前文件路径</strong></li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a9c3c6d945f54e968240046c6813aaf1.png"/></p>
<ul><li><strong>单击文件</strong>可打开<strong>编辑窗口</strong>, 编辑完成后点击右上角的<code>X</code>, <em>确定以保存, 取消则直接退出</em></li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6bb57487204d4885b6fe4e2ad7e942b9.png"/></p>
<ul><li>可查看<strong>文件相应信息</strong>(文件名, 上次修改日期, 文件大小*(自定义单位)*)</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/66d2bb8eadef452a80ca79136ecc7a3b.png"/></p>
<ul><li>左侧的<strong>目录树</strong>可点击展开, 以查看当前目录结构</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/643a9cece2f34a3c9254144ecd3149c0.png"/></p>
<ul><li> <p><strong>双击目录树</strong>中的文件夹打开文件夹, 双击目录树中的文件可打开文件进行浏览和编辑</p> </li><li> <p>点击<strong>返回上级目录</strong>可跳转到上级文件夹, 在root文件夹时无法返回</p> </li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/cd6fd6e6b28b484aa90114d168ee5543.png"/></p>
<ul><li>点击右侧<strong>格式化</strong>并再次确定可清空磁盘, 系统会清空所有文件夹和文本文件, 并清空目录树</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4ba6fc7ca9cb43769d43462f4f08e1ea.png"/></p>
<ul><li>受展示限制, 本文件系统模拟器在一个目录下最多可创建8个子项目, 超过8个时会受到系统提醒*<u>(只是受展示方式限制, 物理和逻辑上的存储理论上都允许创建无限多的子项目)</u>*</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/90820c23bab14367b76a57bc800593c6.png"/></p>
<h2><a id="_189"></a>系统分析</h2>
<h3><a id="_191"></a>显示链接法</h3>
<p>本文件系统中, 文件存储空间管理使用<strong>显示链接</strong>的方法，文件中的内容存放在磁盘不同的块中，每次创建文件时为文件分配数量合适的空闲块。每次写文件时按顺序将文件内容写在相应块中; 删除文件时将原先有内容的位置置为空即可。</p>
<h3><a id="FAT_195"></a>位图、FAT表</h3>
<p>磁盘空闲空间管理在<strong>位图</strong>的基础上进行改造，将存放磁盘上文件位置信息的<strong>FAT表</strong>与传统的位图进行结合，磁盘空闲的位置使用<code>EMPTY = -1</code>标识，放有文件的盘块存放文件所在的下一个盘块的位置，文件存放结束的盘块位置使用<code>END = -2</code>标识。</p>
<h2><a id="_201"></a>系统设计</h2>
<h3><a id="_203"></a>界面设计</h3>
<h4><a id="MainForm_205"></a>主界面MainForm</h4>
<ul><li>System.Windows.Forms.Button</li><li>System.Windows.Forms.Label</li><li>System.Windows.Forms.TextBox</li><li>System.Windows.Forms.TreeView<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e6b5d5cc3d41485f8d4b32095a17236a.png"/></li></ul>
<h4><a id="HelpForm_214"></a>帮助界面HelpForm</h4>
<ul><li>System.Windows.Forms.Label</li><li>System.Windows.Forms.Button<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/03f3978dd1fa4965ad4e0d7e6729e26d.png"/></li></ul>
<h4><a id="NoteForm_221"></a>记事本界面NoteForm</h4>
<ul><li>System.Windows.Forms.TextBox</li></ul>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/03e825c2ec1847fe98b26bac571acc82.png"/></p>
<h2><a id="_230"></a>功能实现截屏展示</h2>
<h3><a id="_232"></a>帮助信息界面</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ab138a5f211f45259a5c2f0bf7fe4f32.png"/></p>
<h3><a id="_237"></a>新建文件/文件夹</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/20306c9dab1f4c27b2eb74f425c49fa3.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/fd359811a3f54841bfbca70bf4520bf7.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/490c105622ce4c5e8e0271e4b1b8632b.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c316572534514084b8e9c100a7ff93d8.png"/></p>
<h3><a id="_245"></a>打开/删除文件项</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1f79e4769ba942a0858a3a510408ab77.png"/></p>
<h3><a id="_250"></a>编辑文本文件</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/07d8ab92cbbd4dadbd4aac47ef9a9897.png"/></p>
<h3><a id="_255"></a>查看文件信息</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4c7b7ac8c2fa446d8f059cc991a25bb4.png"/></p>
<h3><a id="_260"></a>展开目录树</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/9935b6bc59ca4bfb8a87bad586ba5705.png"/></p>
<h3><a id="_265"></a>返回上级目录</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b3e406dd1f794f1f8999f4070e699c43.png"/></p>
<h3><a id="_270"></a>格式化磁盘</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/5293145a1b2f4237b555bff1014a4646.png"/></p>
<h3><a id="_275"></a>创建最大数量的文件项</h3>
<p>受展示限制, 本文件系统模拟器在一个目录下最多可创建8个子项目, 超过8个时会受到系统提醒*<u>(只是受展示方式限制, 物理和逻辑上的存储理论上都允许创建无限多的子项目)</u>*<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a01a01a6a0cd4688bb68fdcc0cb093f9.png"/></p>
<h3><a id="_281"></a>退出系统重新进入后恢复目录</h3>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/90ecc81fadff4255bad2cba4cd45fbe3.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f5f494617b55436182ed8e87177e6949.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/86ec46df59004b3885812e2eb71ecb4b.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/71208145547141b18cb18a96b9b73edf.png"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>