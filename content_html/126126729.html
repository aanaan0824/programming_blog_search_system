<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/1e5d6b8900cb40eba3fa34885b62af84.gif#pic_center"/></p>
<blockquote>
<p><strong><font color="#FF7F50"> æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</font></strong><br/> <strong>ğŸ“”åšä¸»æ˜¯ä¸€åå¤§å­¦åœ¨è¯»æœ¬ç§‘ç”Ÿï¼Œä¸»è¦å­¦ä¹ æ–¹å‘æ˜¯å‰ç«¯ã€‚<br/> ğŸ­ç›®å‰å·²ç»æ›´æ–°äº†<font color="#FF7F50">ã€Vueã€‘ã€ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘ã€ã€TypeScriptã€‘ç­‰ç­‰ç³»åˆ—ä¸“æ </font><br/> ğŸ› ç›®å‰æ­£åœ¨å­¦ä¹ çš„æ˜¯ğŸ”¥<span class="katex--inline"><span class="katex"><span class="katex-mathml">
      
       
        
         
          R
         
         
          e
         
         
          a
         
         
          c
         
         
          t
         
         
          æ¡†æ¶
         
        
        
         Reactæ¡†æ¶
        
       
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord mathnormal">e</span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal">t</span><span class="mord cjk_fallback">æ¡†æ¶</span></span></span></span></span>ğŸ”¥ï¼Œä¸­é—´ç©¿æ’äº†ä¸€äº›åŸºç¡€çŸ¥è¯†çš„å›é¡¾<br/> ğŸŒˆåšå®¢ä¸»é¡µğŸ‘‰<a href="https://blog.csdn.net/Svik_zy?type=blog">codeMak1r.å°æ–°çš„åšå®¢</a></strong></p>
<p></p>
<div class="toc">
<h3>ğŸ˜‡æœ¬æ–‡ç›®å½•ğŸ˜‡</h3>
<ul><li><a href="#1PureComponent_16">1.ç»„ä»¶ä¼˜åŒ–PureComponent</a></li><li><ul><li><a href="#Component2_17">Componentçš„2ä¸ªé—®é¢˜</a></li><li><a href="#_29">æ•ˆç‡é«˜çš„åšæ³•</a></li><li><a href="#_35">åŸå› </a></li><li><a href="#_41">è§£å†³</a></li><li><a href="#1shouldComponentUpdate_59">ç¤ºä¾‹1:é‡å†™shouldComponentUpdateæ–¹æ³•</a></li><li><a href="#2PureComponent_77">ç¤ºä¾‹2:PureComponent</a></li></ul>
</li><li><a href="#2ErrorBoundary_110">2.é”™è¯¯è¾¹ç•ŒErrorBoundary</a></li><li><ul><li><a href="#_111">ç†è§£</a></li><li><a href="#_127">ç‰¹ç‚¹</a></li><li><a href="#_133">ä½¿ç”¨æ–¹å¼</a></li></ul>
</li><li><a href="#3render_props_186">3.render props</a></li><li><ul><li><a href="#_187">å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„ï¼ˆæ ‡ç­¾ï¼‰ï¼Ÿ</a></li><li><a href="#children_props_198">children props</a></li><li><a href="#render_props_208">render props</a></li><li><a href="#_217">ç¤ºä¾‹</a></li></ul>
</li><li><a href="#4_288">4.ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“</a></li><li><ul><li><a href="#_289">ç»„ä»¶é—´çš„å…³ç³»</a></li><li><a href="#_295">å‡ ç§é€šä¿¡æ–¹å¼</a></li><li><a href="#_317">æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼</a></li></ul>
</li></ul>
</div>
<p></p>
<p><strong><font color="#FF7F50">æœ¬æ–‡è¢«ä¸“æ <a href="https://blog.csdn.net/svik_zy/category_11671445.html?spm=1001.2014.3001.5482">ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘</a>æ”¶å½•</font></strong></p>
</blockquote>
<blockquote>
<p><strong><font color="#FF7F50">ğŸ•¹åšæŒåˆ›ä½œâœï¸ï¼Œä¸€èµ·å­¦ä¹ ğŸ“–ï¼Œç å‡ºæœªæ¥ğŸ‘¨ğŸ»â€ğŸ’»ï¼</font></strong><br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/0035f9cc12894cccbbc172ffd9139599.jpeg#pic_center"/></p>
</blockquote>
<h1><a id="1PureComponent_16"></a>1.ç»„ä»¶ä¼˜åŒ–PureComponent</h1>
<h2><a id="Component2_17"></a>Componentçš„2ä¸ªé—®é¢˜</h2>
<blockquote>
<ol><li> <p>åªè¦æ‰§è¡ŒsetState()ï¼Œå³ä½¿ä¸æ”¹å˜çŠ¶æ€æ•°æ®ï¼Œç»„ä»¶ä¹Ÿä¼šé‡æ–°render()ï¼›</p> <pre><code>this.setState({});
// ä¸æ”¹å˜çŠ¶æ€ï¼Œæ­¤æ—¶ä¹Ÿä¼šé‡æ–°render()
</code></pre> </li><li> <p>åªè¦å½“å‰ç»„ä»¶é‡æ–°render()ï¼Œå°±ä¼šè‡ªåŠ¨é‡æ–°renderå­ç»„ä»¶</p> <p>å³ä½¿å­ç»„ä»¶æ²¡æœ‰ç”¨åˆ°çˆ¶ç»„ä»¶çš„ä»»ä½•æ•°æ® ==&gt; æ•ˆç‡ä½ï¼›</p> </li></ol>
</blockquote>
<h2><a id="_29"></a>æ•ˆç‡é«˜çš„åšæ³•</h2>
<blockquote>
<p>åªæœ‰å½“ç»„ä»¶çš„stateæˆ–è€…propsæ•°æ®å‘ç”Ÿæ”¹å˜æ—¶æ‰é‡æ–°render()</p>
</blockquote>
<h2><a id="_35"></a>åŸå› </h2>
<blockquote>
<p>Componentä¸­çš„shouldComponentUpdate()æ€»æ˜¯è¿”å›true</p>
</blockquote>
<h2><a id="_41"></a>è§£å†³</h2>
<blockquote>
<ol><li> <p>é‡å†™shouldComponentUpdate()æ–¹æ³•</p> <p>æ¯”è¾ƒæ–°æ—§stateæˆ–è€…propsæ•°æ®ï¼Œå¦‚æœæœ‰å˜åŒ–æ‰è¿”å›trueï¼Œå¦‚æœæ²¡æœ‰è¿”å›false</p> </li><li> <p>ä½¿ç”¨PureComponent</p> <p>PureComponenté‡å†™äº†shouldComponentUpdate()ï¼Œåªæœ‰stateæˆ–è€…propsæ•°æ®æœ‰å˜åŒ–æ‰è¿”å›true</p> <p>æ³¨æ„âš ï¸ï¼š</p> <p>åªæ˜¯è¿›è¡Œstateå’Œpropsæ•°æ®çš„æµ…æ¯”è¾ƒï¼Œå¦‚æœåªæ˜¯æ•°æ®å¯¹è±¡å†…éƒ¨æ•°æ®å˜äº†ï¼Œè¿”å›falseï¼›</p> <p>ä¸è¦ç›´æ¥ä¿®æ”¹stateæ•°æ®ï¼Œè€Œæ˜¯è¦äº§ç”Ÿæ–°æ•°æ®</p> </li></ol>
<p>é¡¹ç›®ä¸­ä¸€èˆ¬ä½¿ç”¨PureComponentæ¥ä¼˜åŒ–ã€‚</p>
</blockquote>
<h2><a id="1shouldComponentUpdate_59"></a>ç¤ºä¾‹1:é‡å†™shouldComponentUpdateæ–¹æ³•</h2>
<pre><code class="prism language-js"><span class="token comment">// çˆ¶ç»„ä»¶this.setState({});ä½†æ˜¯æ²¡æœ‰ä¿®æ”¹æ•°æ®ï¼Œç»„ä»¶å°±ä¸ä¼šrender</span>
<span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span>  <span class="token comment">//ç›®å‰çš„propså’Œstate</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">,</span> nextState<span class="token punctuation">)</span>  <span class="token comment">// è¦å˜åŒ–çš„ç›®æ ‡propså’Œstate</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>xxx<span class="token operator">===</span> nextState<span class="token punctuation">.</span>xxx<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>åˆ¤æ–­çŠ¶æ€æ›´æ–°å‰åçš„åŒä¸€æ•°æ®çš„å€¼æ˜¯å¦ç›¸åŒ</p>
<p>è‹¥ç›¸åŒï¼Œåˆ™shouldComponentUpdateè¿”å›falseï¼ˆä¸renderï¼‰</p>
<p>è‹¥ä¸åŒï¼Œåˆ™shouldComponentUpdateè¿”å›trueï¼ˆå…è®¸renderï¼‰</p>
</blockquote>
<h2><a id="2PureComponent_77"></a>ç¤ºä¾‹2:PureComponent</h2>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> PureComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>PureComponentå†…éƒ¨é‡å†™äº†shouldComponentUpdateæ–¹æ³•ï¼Œä¸ç”¨æˆ‘ä»¬è‡ªå·±æ‰‹å†™ã€‚</p>
</blockquote>
<blockquote>
<p>æˆ‘ä»¬å†æ¥çœ‹å‰é¢æåˆ°çš„PureComponentå­˜åœ¨çš„é—®é¢˜ï¼š</p>
<p><code>PureComponent</code>è¿›è¡Œçš„æ˜¯æ•°æ®çš„<code>æµ…æ¯”è¾ƒ</code>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¿®æ”¹çŠ¶æ€æ•°æ®æ—¶ï¼Œ<strong>ä¸å¯ä»¥</strong></p>
<pre><code class="prism language-js"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
obj<span class="token punctuation">.</span>carName <span class="token operator">=</span> <span class="token string">'Porsche-911 GT3 RS'</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre>
<p>è¿™æ ·ä¿®æ”¹æ•°æ®ï¼Œåªæ˜¯å¯¹åŸstateå¯¹è±¡å†…çš„å€¼åšäº†ä¿®æ”¹ï¼Œä½†æ˜¯<strong>å¯¹è±¡çš„å¼•ç”¨åœ°å€æ²¡å˜ï¼ï¼</strong></p>
<p>åœ¨<code>PureComponent</code>çœ‹æ¥ï¼Œå¼•ç”¨åœ°å€æ²¡å˜æ—¶ï¼Œç»„ä»¶å†…éƒ¨çš„<code>shouldComponentUpdate</code>è¿”å›falseï¼Œä¹Ÿå°±ä¸ä¼šé‡æ–°renderï¼Œæ•°æ®æ›´æ–°å°±å¤±è´¥äº†ã€‚</p>
<p>æ­£ç¡®çš„æ›´æ–°çŠ¶æ€åº”è¯¥æ˜¯ï¼š</p>
<pre><code class="prism language-js"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">carName</span><span class="token operator">:</span> <span class="token string">'Porsche-911 GT3 RS'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>è¿™æ ·ä¿®æ”¹æ•°æ®ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªæ–°å¯¹è±¡<code>{ carName: 'Porsche-911 GT3 RS' }</code>æ›¿æ¢äº†åŸæ¥çš„stateå¯¹è±¡ï¼Œæ•°æ®çš„å¼•ç”¨åœ°å€å˜åŒ–äº†ï¼Œé‚£ä¹ˆPureComponentç»„ä»¶å†…éƒ¨çš„shouldComponentUpdateè¿”å›trueï¼Œç»„ä»¶é‡æ–°renderï¼Œæ•°æ®æ›´æ–°æˆåŠŸã€‚</p>
</blockquote>
<h1><a id="2ErrorBoundary_110"></a>2.é”™è¯¯è¾¹ç•ŒErrorBoundary</h1>
<h2><a id="_111"></a>ç†è§£</h2>
<p>é”™è¯¯è¾¹ç•Œï¼ˆErrorBoundaryï¼‰ï¼šç”¨æ¥æ•è·åä»£ç»„ä»¶é”™è¯¯ï¼Œæ¸²æŸ“å‡ºå¤‡ç”¨ç•Œé¢ã€‚</p>
<p>æ‰€è°“çš„è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŠŠé”™è¯¯æ§åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ã€‚æ¯”å¦‚åç«¯çš„æ•°æ®è¿”å›çš„æ˜¯<code>undefined</code>æˆ–è€…è¿”å›çš„æ•°æ®ç±»å‹å‡ºç°é”™è¯¯ï¼Œåˆæˆ–è€…æ˜¯å…¶ä»–çš„ä¸€äº›ä¸å¯æ§çš„ã€æœªçŸ¥çš„é”™è¯¯å‡ºç°æ—¶ï¼Œåœ¨é¡µé¢ä¸Šç›´æ¥æ˜¾ç¤ºæŠ¥é”™ä¿¡æ¯æ˜¾ç„¶æ˜¯ä¸å¯¹çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±åº”è¯¥æŠŠé”™è¯¯æ§åˆ¶åœ¨å¯æ§èŒƒå›´å†…ï¼Œä¸€æ—¦é”™è¯¯è¶…å‡ºå¯æ§èŒƒå›´ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨é¡µé¢ä¸­â€œå®‰æŠšâ€ä¸€ä¸‹ç”¨æˆ·ï¼Œå¯ä»¥æç¤ºç”¨æˆ·ï¼šâ€œç½‘ç»œç¹å¿™è¯·ç¨åé‡è¯•â€è¿™æ ·çš„ä¿¡æ¯ï¼Œ<strong>ç›´æ¥ç”©é”…ç»™è¿è¥å•†ï¼ï¼ˆdogeï¼‰</strong></p>
<blockquote>
<p>æ¯”å¦‚ï¼Œå­ç»„ä»¶ä¸­è¦å±•ç¤ºçš„é¡µé¢éœ€è¦å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œä½¿ç”¨åç«¯è¿”å›çš„æ•°æ®è¿›è¡Œé¡µé¢çš„å±•ç¤ºã€‚</p>
<p>é‚£ä¹ˆï¼Œåœ¨æ•°æ®æ— å¼‚å¸¸çš„æ—¶å€™ï¼Œæ­£å¸¸åœ°å±•ç¤ºæ­£å¸¸çš„é¡µé¢ï¼›</p>
<p>åœ¨æ•°æ®å‡ºé”™çš„æ—¶å€™ï¼Œå‘Šè¯‰ç”¨æˆ·ï¼šç½‘ç»œç¹å¿™è¯·ç¨åé‡è¯•ï¼</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é”™è¯¯è¾¹ç•Œæ¥è§£å†³ã€‚</p>
<p><strong>é”™è¯¯è¾¹ç•Œä¸€èˆ¬æ˜¯åœ¨å®¹æ˜“å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶çš„çˆ¶ç»„ä»¶ä¸­å¤„ç†ã€‚</strong></p>
</blockquote>
<h2><a id="_127"></a>ç‰¹ç‚¹</h2>
<p>åªèƒ½æ•è·åä»£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸäº§ç”Ÿçš„é”™è¯¯ï¼Œä¸èƒ½æ•è·è‡ªå·±ç»„ä»¶äº§ç”Ÿçš„é”™è¯¯å’Œå…¶ä»–ç»„ä»¶åœ¨åˆæˆäº‹ä»¶ã€å®šæ—¶å™¨ä¸­äº§ç”Ÿçš„é”™è¯¯ã€‚</p>
<p><strong>é”™è¯¯è¾¹ç•Œéœ€è¦å°†é”™è¯¯é™åˆ¶åœ¨å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å½“ä¸­ï¼Œä¸è¦è®©é”™è¯¯æ‰©æ•£åˆ°ä¸Šå±‚ç»„ä»¶ã€‚</strong></p>
<h2><a id="_133"></a>ä½¿ç”¨æ–¹å¼</h2>
<p>getDerivedStateFromErroré…åˆcomponentDidCatch</p>
<pre><code class="prism language-js">state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">//ç”¨äºæ ‡è¯†å­ç»„ä»¶æ˜¯å¦äº§ç”Ÿé”™è¯¯</span>
<span class="token punctuation">}</span>
<span class="token comment">// å¦‚æœå½“å‰ç»„ä»¶çš„å­ç»„ä»¶å‡ºç°äº†ä»»ä½•æŠ¥é”™ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªé’©å­</span>
<span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è¿™æ ·çš„è¯ï¼Œæ¸²æŸ“å­ç»„ä»¶æ—¶å°±å¯ä»¥è¿™æ ·ï¼š</p>
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError <span class="token operator">?</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>å½“å‰ç½‘ç»œä¸ç¨³å®šï¼Œç¨åé‡è¯•<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
</code></pre>
<p>å¦‚æœå­ç»„ä»¶å‡ºç°ä»»ä½•æŠ¥é”™ï¼Œéƒ½ä¸ä¼šå¹²æ‰°åˆ°å…¶ä»–ç»„ä»¶çš„æ¸²æŸ“ï¼Œè€Œåªæ˜¯åœ¨å­ç»„ä»¶çš„ä½ç½®æ˜¾ç¤ºä¸€è¡Œå­—ï¼šå½“å‰ç½‘ç»œä¸ç¨³å®šï¼Œç¨åé‡è¯•â€¦</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="60%" src="https://img-blog.csdnimg.cn/dfcb271737fb4b8496e16161d4fb985c.png#pic_center" width="60%"/><br/> ä¸Šé¢çš„ä»£ç é…åˆcomponentDidCatch</p>
<pre><code class="prism language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">hasError</span><span class="token operator">:</span> <span class="token string">''</span> <span class="token comment">//ç”¨äºæ ‡è¯†å­ç»„ä»¶æ˜¯å¦äº§ç”Ÿé”™è¯¯</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¦‚æœå½“å‰ç»„ä»¶çš„å­ç»„ä»¶å‡ºç°äº†ä»»ä½•æŠ¥é”™ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªé’©å­</span>
  <span class="token keyword">static</span> <span class="token function">getDerivedStateFromError</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">hasError</span><span class="token operator">:</span> error <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¦‚æœç»„ä»¶åœ¨æ¸²æŸ“çš„è¿‡ç¨‹ä¸­ï¼Œå­ç»„ä»¶å‡ºç°äº†é—®é¢˜å¼•å‘äº†é”™è¯¯ï¼Œå°±ä¼šè°ƒç”¨è¿™ä¸ªé’©å­</span>
  <span class="token function">componentDidCatch</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">,</span> info<span class="token punctuation">)</span>
    <span class="token comment">// è¿™é‡Œä¸€èˆ¬ç”¨æ¥ç»Ÿè®¡é”™è¯¯æ¬¡æ•°ï¼Œåé¦ˆç»™æœåŠ¡å™¨ï¼Œç”¨äºå‘ŠçŸ¥æœåŠ¡å™¨ç»´æŠ¤äººå‘˜è¿™é‡Œæœ‰bugã€‚</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">'parent'</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>æˆ‘æ˜¯Parentç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>hasError <span class="token operator">?</span> <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span>å½“å‰ç½‘ç»œä¸ç¨³å®šï¼Œç¨åé‡è¯•<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token operator">&lt;</span>Child <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h1><a id="3render_props_186"></a>3.render props</h1>
<h2><a id="_187"></a>å¦‚ä½•å‘ç»„ä»¶å†…éƒ¨åŠ¨æ€ä¼ å…¥å¸¦å†…å®¹çš„ç»“æ„ï¼ˆæ ‡ç­¾ï¼‰ï¼Ÿ</h2>
<blockquote>
<p>Vueä¸­ï¼š</p>
<ol><li>ä½¿ç”¨slotæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„ <code>&lt;A&gt; &lt;B/ &gt; &lt;/A&gt;</code></li></ol>
<p>Reactä¸­ï¼š</p>
<ol><li>ä½¿ç”¨<code>children props</code>ï¼šé€šè¿‡ç»„ä»¶æ ‡ç­¾ä½“ä¼ å…¥ç»“æ„</li><li>ä½¿ç”¨<code>render props</code>ï¼šé€šè¿‡ç»„ä»¶æ ‡ç­¾å±æ€§ä¼ å…¥ç»“æ„ï¼Œè€Œä¸”å¯ä»¥æºå¸¦æ•°æ®ï¼Œä¸€èˆ¬ç”¨renderå‡½æ•°å±æ€§</li></ol>
</blockquote>
<h2><a id="children_props_198"></a>children props</h2>
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token constant">B</span><span class="token operator">&gt;</span>xxxx<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">B</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">A</span><span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>
é—®é¢˜ï¼šå¦‚æœ<span class="token constant">B</span>ç»„ä»¶éœ€è¦<span class="token constant">A</span>ç»„ä»¶å†…çš„æ•°æ® <span class="token operator">==</span><span class="token operator">&gt;</span> åšä¸åˆ°
</code></pre>
<h2><a id="render_props_208"></a>render props</h2>
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token constant">A</span> render<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span><span class="token constant">C</span> data<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token constant">A</span><span class="token operator">&gt;</span>
  <span class="token constant">A</span>ç»„ä»¶ï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>å†…éƒ¨stateæ•°æ®<span class="token punctuation">)</span><span class="token punctuation">}</span>
	<span class="token constant">C</span>ç»„ä»¶ï¼šè¯»å–<span class="token constant">A</span>ç»„ä»¶ä¼ å…¥çš„æ•°æ®æ˜¾ç¤º <span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>data<span class="token punctuation">}</span>
</code></pre>
<h2><a id="_217"></a>ç¤ºä¾‹</h2>
<p>æ¯”å¦‚ï¼Œæœ‰ä¸€ä¸ªParentç»„ä»¶ä¸ºçˆ¶ç»„ä»¶ï¼ŒAç»„ä»¶ä¸ºå­ç»„ä»¶ï¼ŒBç»„ä»¶ä¸ºå­™ç»„ä»¶ã€‚</p>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="60%" src="https://img-blog.csdnimg.cn/069154e86cfc42a699cb865913973ef8.png#pic_center" width="60%"/></p>
<p>Aç»„ä»¶è‡ªèº«æœ‰ä¸€ä¸ªçŠ¶æ€ä¸ºnameï¼Œå€¼ä¸ºtomã€‚Bç»„ä»¶å¦‚æœè¦æƒ³ä½¿ç”¨Aç»„ä»¶çš„çŠ¶æ€çš„è¯ï¼Œæ­£å¸¸çš„åšæ³•æ˜¯ï¼š</p>
<pre><code class="prism language-js">Parentç»„ä»¶ï¼š
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      	<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span>ç»„ä»¶ï¼š
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'tom'</span> <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      	<span class="token operator">&lt;</span><span class="token constant">B</span> name<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>å°†å­ç»„ä»¶Açš„nameå±æ€§é€šè¿‡propsä¼ é€’ç»™å­™ç»„ä»¶Bã€‚</p>
<p>ä¸è¿‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨render propsæ¥å®Œæˆï¼š</p>
<pre><code class="prism language-js">Parentç»„ä»¶ï¼š
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      	<span class="token punctuation">{<!-- --></span><span class="token comment">/* 2.æ¥æ”¶nameå‚æ•°ï¼Œå†ä¼ ç»™B */</span><span class="token punctuation">}</span>	
      	<span class="token operator">&lt;</span><span class="token constant">A</span> render<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span><span class="token constant">B</span> name<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>name<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">A</span>ç»„ä»¶ï¼š
<span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  state <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'tom'</span> <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      	<span class="token punctuation">{<!-- --></span><span class="token comment">/* 1.æŠŠnameé€šè¿‡this.props.render()ä¼ è¿‡å» */</span><span class="token punctuation">}</span>
      	<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è¿™æ ·ï¼ŒBç»„ä»¶ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ°Aç»„ä»¶çš„çŠ¶æ€ï¼Œnameè¢«ä¿å­˜åœ¨Bç»„ä»¶çš„<code>this.props.name</code>ä¸Šã€‚</p>
<h1><a id="4_288"></a>4.ç»„ä»¶é€šä¿¡æ–¹å¼æ€»ç»“</h1>
<h2><a id="_289"></a>ç»„ä»¶é—´çš„å…³ç³»</h2>
<ol><li>çˆ¶å­ç»„ä»¶</li><li>å…„å¼Ÿç»„ä»¶ï¼ˆéåµŒå¥—ç»„ä»¶ï¼‰</li><li>ç¥–å­™ç»„ä»¶ï¼ˆè·¨çº§ç»„ä»¶ï¼‰</li></ol>
<h2><a id="_295"></a>å‡ ç§é€šä¿¡æ–¹å¼</h2>
<blockquote>
<ol><li> <p>props</p> <p>ï¼ˆ1ï¼‰children props</p> <p>ï¼ˆ2ï¼‰render props</p> </li><li> <p>æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ</p> <p>PubSubã€eventç­‰ç­‰</p> </li><li> <p>é›†ä¸­å¼ç®¡ç†</p> <p>reduxã€dvaã€mobxç­‰ç­‰</p> </li><li> <p>Context</p> <p>ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</p> </li></ol>
</blockquote>
<h2><a id="_317"></a>æ¯”è¾ƒå¥½çš„æ­é…æ–¹å¼</h2>
<blockquote>
<p>çˆ¶å­ç»„ä»¶ï¼šprops</p>
<p>å…„å¼Ÿç»„ä»¶ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†</p>
<p>ç¥–å­™ç»„ä»¶ï¼ˆè·¨çº§ç»„ä»¶ï¼‰ï¼šæ¶ˆæ¯è®¢é˜…-å‘å¸ƒã€é›†ä¸­å¼ç®¡ç†ã€Contextï¼ˆå¼€å‘ç”¨çš„å°‘ï¼Œå°è£…æ’ä»¶ç”¨çš„å¤šï¼‰</p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>