<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>ã€Vueå…¨å®¶æ¡¶ã€‘æ–°ä¸€ä»£çš„çŠ¶æ€ç®¡ç†--Pinia</h3>
<ul><li><ul><li><a href="#__Pinia_1">ğŸ¦´ ä»€ä¹ˆæ˜¯ Pinia</a></li><li><ul><li><a href="#_Pinia_13">å¦‚ä½•ä½¿ç”¨ Pinia</a></li></ul>
</li><li><a href="#_Store_41">ğŸŒ‚è®¤è¯† Store</a></li><li><ul><li><a href="#1_store_47">1. å®šä¹‰ä¸€ä¸ªstore</a></li><li><a href="#2__store_55">2. ä½¿ç”¨ store</a></li></ul>
</li><li><a href="#__State_63">ğŸ§³ æ“ä½œ State</a></li><li><a href="#_Getters_84">ğŸ¨ Getters</a></li><li><ul><li><a href="#1__Getters_86">1. è®¤è¯†å’Œå®šä¹‰ Getters</a></li><li><a href="#2__Getters_93">2. è®¿é—® Getters</a></li></ul>
</li><li><a href="#_Action_137">ğŸ³è®¤è¯†å’Œå®šä¹‰ Action</a></li></ul>
</li></ul>
</div>
<p></p>
<h2><a id="__Pinia_1"></a>ğŸ¦´ ä»€ä¹ˆæ˜¯ Pinia</h2>
<p>Pinia (è¥¿ç­ç‰™è¯­ä¸­çš„è è)ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ª<mark>çŠ¶æ€ç®¡ç†çš„åº“</mark>ï¼Œç”¨äºè·¨ç»„ä»¶ã€é¡µé¢è¿›è¡ŒçŠ¶æ€å…±äº«.</p>
<p>pinia ä¸ vuex çš„åŒºåˆ«ï¼š</p>
<ol><li> <p>æ›´å‹å¥½çš„TypeScriptæ”¯æŒï¼ŒVuexä¹‹å‰å¯¹TSçš„æ”¯æŒå¾ˆä¸å‹å¥½</p> </li><li> <p><strong>ä¸ Vuex ç›¸æ¯”ï¼ŒPinia æä¾›äº†ä¸€ä¸ªæ›´ç®€å•çš„ APIï¼Œå…·æœ‰æ›´å°‘çš„ä»ªå¼ï¼Œæä¾›äº† Composition-API é£æ ¼çš„ API</strong></p> </li><li> <p>ä¸å†æœ‰modulesçš„åµŒå¥—ç»“æ„</p> </li><li> <p>ä¹Ÿä¸å†æœ‰å‘½åç©ºé—´çš„æ¦‚å¿µï¼Œä¸éœ€è¦è®°ä½å®ƒä»¬çš„å¤æ‚å…³ç³»</p> </li></ol>
<h3><a id="_Pinia_13"></a>å¦‚ä½•ä½¿ç”¨ Pinia</h3>
<ol><li>å®‰è£… pinia</li></ol>
<pre><code class="prism language-shell"><span class="token function">yarn</span> <span class="token function">add</span> pinia
</code></pre>
<ol start="2"><li>åˆ›å»ºä¸€ä¸ªpinia</li></ol>
<pre><code class="prism language-js"><span class="token comment">// src/stores/index.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> pinia
</code></pre>
<pre><code class="prism language-js"><span class="token comment">//main.js</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">'./stores'</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
</code></pre>
<h2><a id="_Store_41"></a>ğŸŒ‚è®¤è¯† Store</h2>
<p>ä¸€ä¸ª Store ï¼ˆå¦‚ Piniaï¼‰æ˜¯ä¸€ä¸ªå®ä½“ï¼Œå®ƒä¼šæŒæœ‰ä¸ºç»‘å®šåˆ°ä½ ç»„ä»¶æ ‘çš„<mark>çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘</mark>ï¼Œä¹Ÿå°±æ˜¯ä¿å­˜äº†å…¨å±€çš„çŠ¶æ€</p>
<blockquote>
<p>è¿™æ ·å°±å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„Storeæ¥ç®¡ç†ä½ çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ <code>stateã€gettersã€actions</code></p>
</blockquote>
<h3><a id="1_store_47"></a>1. å®šä¹‰ä¸€ä¸ªstore</h3>
<ul><li> <p>Store æ˜¯ä½¿ç”¨ defineStore() å®šä¹‰çš„ï¼Œ</p> </li><li> <p>ä¸”å®ƒéœ€è¦ä¸€ä¸ªå”¯ä¸€åç§°ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’</p> </li></ul>
<p><img alt="image-20220812152348346" src="https://img-blog.csdnimg.cn/img_convert/55ddc85247e418a95e6a8f430116c48a.png"/></p>
<h3><a id="2__store_55"></a>2. ä½¿ç”¨ store</h3>
<p><img alt="image-20220812152432057" src="https://img-blog.csdnimg.cn/img_convert/9a26d2800541d38146baac32e0583655.png"/></p>
<p><img alt="image-20220812154916315" src="https://img-blog.csdnimg.cn/img_convert/80aa1894e174b3215f8ceb03dd5c8ed2.png"/></p>
<h2><a id="__State_63"></a>ğŸ§³ æ“ä½œ State</h2>
<p>state æ˜¯ store çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œstoreæ˜¯ç”¨æ¥å®ç°æˆ‘ä»¬ç®¡ç†çŠ¶æ€çš„ã€‚</p>
<p><img alt="image-20220812163115369" src="https://img-blog.csdnimg.cn/img_convert/631149fcad9f5a459986e61066b79f53.png"/></p>
<ul><li><strong>æ–¹å¼ä¸€ï¼šç›´æ¥ä¸€ä¸ªä¸ªä¿®æ”¹state</strong></li><li><strong>æ–¹å¼äºŒï¼šä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªçŠ¶æ€</strong></li><li><strong>æ–¹å¼ä¸‰ï¼šæ›¿æ¢state</strong></li><li><strong>æ–¹å¼å››ï¼šé‡ç½®state</strong></li></ul>
<p><img alt="image-20220812165009960" src="https://img-blog.csdnimg.cn/img_convert/3d35373d49c5399130e6d12155a14192.png"/></p>
<p><img alt="image-20220812165858904" src="https://img-blog.csdnimg.cn/img_convert/1b3ec94f5fadf2d232ba55ee963f6b30.png"/></p>
<p><img alt="image-20220812170350560" src="https://img-blog.csdnimg.cn/img_convert/5f814a130035215fc4f6556ac1008eb5.png"/></p>
<p><img alt="image-20220812170540664" src="https://img-blog.csdnimg.cn/img_convert/775b79997915e03ab9ece547e31b09ce.png"/></p>
<h2><a id="_Getters_84"></a>ğŸ¨ Getters</h2>
<h3><a id="1__Getters_86"></a>1. è®¤è¯†å’Œå®šä¹‰ Getters</h3>
<p><mark>Getters</mark>ç›¸å½“äºStoreçš„è®¡ç®—å±æ€§ï¼š</p>
<ul><li>å¯ä»¥ç”¨ defineStore() ä¸­çš„ getters å±æ€§å®šä¹‰ï¼›</li><li>gettersä¸­å¯ä»¥å®šä¹‰æ¥å—ä¸€ä¸ªstateä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›</li></ul>
<h3><a id="2__Getters_93"></a>2. è®¿é—® Getters</h3>
<ul><li> <p><strong>æ–¹å¼ä¸€ï¼šè®¿é—®å½“å‰ store çš„Getters</strong></p> </li><li> <p><strong>æ–¹å¼äºŒï¼šGetters ä¸­è®¿é—®è‡ªå·±çš„å…¶ä»–Getters</strong></p> </li><li> <p><strong>æ–¹å¼ä¸‰ï¼šè®¿é—®å…¶ä»–çš„ store çš„Getters</strong></p> </li></ul>
<pre><code class="prism language-js"><span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. åŸºæœ¬ä½¿ç”¨</span>
    <span class="token function">debouleCount</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>count <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 2. ä¸€ä¸ª getters å¼•å…¥å¦å¤–ä¸€ä¸ª getters</span>
    <span class="token function">useDebouleCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>debouleCount <span class="token operator">+</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 3. getterä¹Ÿæ”¯æŒè¿”å›ä¸€ä¸ªå‡½æ•°</span>
    <span class="token function">getFriendById</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> state<span class="token punctuation">.</span>vagetabel<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">const</span> vagetabel <span class="token operator">=</span> state<span class="token punctuation">.</span>vagetabel<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>vagetabel<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> vagetabel
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 4.è®¿é—®å…¶ä»–storeä¸­çš„Getters</span>
    <span class="token function">showMessage</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// è·å–userä¿¡æ¯</span>
      <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">useUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// è·å–è‡ªå·±çš„state</span>
      <span class="token comment">// æ‹¼æ¥ä¿¡æ¯</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">name:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>useStore<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - count:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${<!-- --></span>state<span class="token punctuation">.</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre>
<p><img alt="image-20220812181122665" src="https://img-blog.csdnimg.cn/img_convert/98dbb66d07ec4371836bce18f55c8c96.png"/></p>
<h2><a id="_Action_137"></a>ğŸ³è®¤è¯†å’Œå®šä¹‰ Action</h2>
<blockquote>
<p>Action å¯ä»¥ç†è§£æˆç»„ä»¶ä¸­çš„ methods ï¼Œå’Œgettersä¸€æ ·ï¼Œåœ¨actionä¸­å¯ä»¥é€šè¿‡thisè®¿é—®æ•´ä¸ªstoreå®ä¾‹çš„æ‰€æœ‰æ“ä½œã€‚</p>
</blockquote>
<p><img alt="image-20220813121159762" src="https://img-blog.csdnimg.cn/img_convert/5e9c085e496d362dc2c256c88d9e34f9.png"/></p>
<blockquote>
<p>Action æ˜¯æ”¯æŒå¼‚æ­¥æ“ä½œçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ awaitã€‚</p>
</blockquote>
<p><img alt="image-20220813121241994" src="https://img-blog.csdnimg.cn/img_convert/4da700421af9ecfe6e80c9fed0e1bc32.png"/></p>
<p><img alt="å–œæ¬¢å°±ä¸€é”®ä¸‰è¿å§ï¼" src="https://img-blog.csdnimg.cn/img_convert/bfb5dacd16813059ae2d91be6f88dae7.png"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>