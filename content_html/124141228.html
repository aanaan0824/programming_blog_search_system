<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-github-gist" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_1">前言</a></li><li><a href="#_8">一、大数加法</a></li><li><ul><li><a href="#1__9">1. 基本思想</a></li><li><a href="#2__12">2. 代码实现</a></li></ul>
</li><li><a href="#_64">二、大数减法</a></li><li><ul><li><a href="#1__65">1. 基本思想</a></li><li><a href="#2__68">2. 代码实现</a></li></ul>
</li><li><a href="#_135">三、大数乘法</a></li><li><ul><li><a href="#1__136">1. 基本思想</a></li><li><a href="#2__164">2. 代码实现</a></li></ul>
</li><li><a href="#_212">四、大数除法</a></li><li><ul><li><a href="#1__213">1. 基本思想</a></li><li><a href="#2__240">2. 代码实现</a></li></ul>
</li></ul>
</div>
<p></p>
<h1><a id="_1"></a>前言</h1>
<blockquote>
<p>由于编程语言提供的基本数值数据类型表示的数值范围有限，不能满足较大规模的高精度数值计算，因此需要利用其他方法实现高精度数值的计算，于是产生了大数运算。</p>
</blockquote>
<p>比如bc命令是任意精度计算器语言，通常在Linux下当计算器使用，它就可以进行大数的运算。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/29f1a53d23c348469c2a1c25a9b76ce4.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 对于这种大数的计算，编程语言提供的基本数值数据类型已经无法进行存储，此时可以将这些大数存储到字符串当中，然后实现基于字符串的加减乘除运算即可。</p>
<h1><a id="_8"></a>一、大数加法</h1>
<h2><a id="1__9"></a>1. 基本思想</h2>
<p>将两个字符串中的数相加其实非常简单，就像我们小学时列竖式计算一样。我们会从两个数字的最低位开始进行计算，如果低位相加时有进位，则会将该进位记录下来，下一次将两个数高一位对应的数字相加时就会将该进位一同加上。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4c81e0fd93e6424a847255172aef96d3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h2><a id="2__12"></a>2. 代码实现</h2>
<pre><code class="prism language-cpp"><span class="token comment">//大数加法</span>
string <span class="token function">AddString</span><span class="token punctuation">(</span>string num1<span class="token punctuation">,</span> string num2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> end1 <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> end2 <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	string ret<span class="token punctuation">;</span> <span class="token comment">//存储两个字符串相加后的结果</span>
	<span class="token keyword">int</span> carry <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//进位（初始时进位设置为0）</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end1 <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">||</span> end2 <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//1、取出num1中本次待相加的数字</span>
		<span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>end1 <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			a <span class="token operator">=</span> num1<span class="token punctuation">[</span>end1<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
			end1<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//2、取出num2中本次待相加的数字</span>
		<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>end2 <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			b <span class="token operator">=</span> num2<span class="token punctuation">[</span>end2<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
			end2<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//3、将这两个数字相加（注意加上进位）</span>
		<span class="token keyword">int</span> sum <span class="token operator">=</span> a <span class="token operator">+</span> b <span class="token operator">+</span> carry<span class="token punctuation">;</span>
		<span class="token comment">//4、判断是否需要进位</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>sum <span class="token operator">&gt;</span> <span class="token number">9</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			sum <span class="token operator">-=</span> <span class="token number">10</span><span class="token punctuation">;</span>
			carry <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//需要进位，将carry设置为1</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			carry <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//不需要进位，将carry设置为0</span>
		<span class="token punctuation">}</span>
		ret <span class="token operator">+=</span> <span class="token punctuation">(</span>sum <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>carry <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//判断是否还需进位（可能两个数的最高位相加后会进位）</span>
		ret <span class="token operator">+=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>

	<span class="token function">reverse</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将ret字符串进行反转</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span> <span class="token comment">//返回两个字符串相加后的结果</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>代码说明：</strong></p>
<ul><li>在代码中，需要进位时直接将<code>carry</code>设置成了1，因为两个数相加后如果有进位，其进位就是1。</li><li>如果将两个数的对应位相加后没有产生进位，需要及时将<code>carry</code>的值重新设置为0，防止对下一次相加造成影响。</li><li>当对两个数中所有的位都进行相加操作后，最后还需要判断<code>carry</code>的值是否为1，如果<code>carry</code>的值为1，则还需要在结果中尾插一个1（这个1在进行字符串反转后也就是最高位的1）。</li><li>由于我们是从最低位开始进行对应位的相加的，因此我们每得到一个位的结果就需要将其头插到<code>ret</code>字符串中，而头插时需要将字符串中所有的字符向后移动一位，时间复杂度是<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         O
        
        
         (
        
        
         N
        
        
         )
        
       
       
        O(N)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span></span></span></span></span>。因此我们这里选择先尾插，当需要返回最终结果时再进行一次字符串反转即可。</li></ul>
<h1><a id="_64"></a>二、大数减法</h1>
<h2><a id="1__65"></a>1. 基本思想</h2>
<p>将两个字符串中的数相减也是非常简单的，和字符串相加类似。也是从两个数字的最低位开始进行计算，如果低位相减时有借位，则会将该借位记录下来，下一次将两个数高一位对应的数字相减时就会将该借位一同减去。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4eb7f1600f9d4de1bb7b5af89d29e7a5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h2><a id="2__68"></a>2. 代码实现</h2>
<pre><code class="prism language-cpp"><span class="token comment">//大数比较</span>
<span class="token keyword">int</span> <span class="token function">Cmp</span><span class="token punctuation">(</span>string<span class="token operator">&amp;</span> num1<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> num2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> num1 <span class="token operator">&gt;</span> num2<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//num1大于num2，返回1</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> num1 <span class="token operator">&lt;</span> num2<span class="token punctuation">)</span><span class="token punctuation">)</span> 
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//num1小于num2，返回-1</span>
	<span class="token keyword">else</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//num1等于num2，返回0</span>
<span class="token punctuation">}</span>
<span class="token comment">//大数减法</span>
string <span class="token function">SubString</span><span class="token punctuation">(</span>string num1<span class="token punctuation">,</span> string num2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//保证num1大于等于num2</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Cmp</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token string">"-"</span> <span class="token operator">+</span> <span class="token function">SubString</span><span class="token punctuation">(</span>num2<span class="token punctuation">,</span> num1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//num1小于num2，则返回num2-num1所得到的结果的负值</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">int</span> end1 <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> end2 <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	string ret<span class="token punctuation">;</span> <span class="token comment">//存储两个字符串相减后的结果</span>
	<span class="token keyword">int</span> borrow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//借位（初始时借位设置为0）</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end1 <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">//1、取出num1中本次待相减的数字</span>
		<span class="token keyword">int</span> a <span class="token operator">=</span> num1<span class="token punctuation">[</span>end1<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
		end1<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token comment">//2、取出num2中本次待相减的数字</span>
		<span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>end2 <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			b <span class="token operator">=</span> num2<span class="token punctuation">[</span>end2<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
			end2<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//3、将这两个数字相减（注意减去借位）</span>
		<span class="token keyword">int</span> differ <span class="token operator">=</span> a <span class="token operator">-</span> b <span class="token operator">-</span> borrow<span class="token punctuation">;</span>
		<span class="token comment">//4、判断是否需要进位</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>differ <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			differ <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">+</span> differ<span class="token punctuation">;</span>
			borrow <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//需要借位，将borrow设置为1</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			borrow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//不需要借位，将borrow设置为0</span>
		<span class="token punctuation">}</span>
		ret <span class="token operator">+=</span> <span class="token punctuation">(</span>differ <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">reverse</span><span class="token punctuation">(</span>ret<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ret<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//将ret字符串进行反转</span>
	<span class="token comment">//过滤掉ret字符串前面的'0'</span>
	size_t pos <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">find_first_not_of</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>pos <span class="token operator">==</span> string<span class="token operator">::</span>npos<span class="token punctuation">)</span> <span class="token comment">//ret中全部为'0'，则两个数相减后的结果为0</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回两个字符串相减后的结果</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>代码说明：</strong></p>
<ul><li>与字符串相加时类似，当需要借位时直接将<code>borrow</code>设置成了1，因为两个数相减时如果需要借位，也只需要借一次就够了。</li><li>如果将两个数的对应位相减时没有进行借位，对应也需要及时将<code>borrow</code>的值重新设置为0，防止对下一次相减造成影响。</li><li>当<code>num1</code>的值小于<code>num2</code>时，其相减后的结果是一个负值，该负值的绝对值与<code>num2-num1</code>的值是相同的，因此我们可以选择重新调用SubString函数，得到<code>num2-num1</code>的值后，在该结果前面加上一个负号即可。</li><li>由于我们保证了实际在进行相减操作时，<code>num1</code>的值是大于等于<code>num2</code>的值的，因此对两个数中所有的位都进行相减操作后，无需再判断<code>borrow</code>的值是否为1，此时<code>borrow</code>的值必然为0。</li><li>与字符串相加时一样，为了避免每次插入字符的时间复杂度都是<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         O
        
        
         (
        
        
         N
        
        
         )
        
       
       
        O(N)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mclose">)</span></span></span></span></span>，每次插入字符时也是进行的尾插，当需要返回最终结果时再进行一次字符串反转即可。</li></ul>
<h1><a id="_135"></a>三、大数乘法</h1>
<h2><a id="1__136"></a>1. 基本思想</h2>
<p>字符串相乘相对来说会难一点，但其原理还是和我们平时列竖式时是一样的。我们平时会将乘数的每一位与被乘数的每一位相乘，将相乘后的结果写到对应的位置，然后将这些乘积对应加起来就得到了两个数相乘后的结果。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/3566dc2ccf1c490d9bf82ef665db78c0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 实际我们在计算的过程中也可以先不进行进位，先将每位相乘后的乘积放到对应的位置，然后将对应位置的乘积加起来。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/bceb93d7ada942798ee2223cf9fa6c02.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 最后再对这个序列从低位到高位依次进行进位操作，最终也能够得到这两个数相乘后的结果。只不过我们平时列竖式计算时是时刻都在进行进位操作的，而我们现在统一将进位的过程放到了最后。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c04c95a77063436db7b6c437992705b8.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<blockquote>
<p>问题一：如果我们将这些乘积累加到vector当中，这个vector应该开辟多大的空间？</p>
</blockquote>
<p>首先我们需要明确的是：如果被乘数num1的长度为<code>m</code>，乘数num2的长度为<code>n</code>，则它们乘积的长度为<code>m+n-1</code>或<code>m+n</code>。</p>
<blockquote>
<p>证明如下：</p>
<ul><li>若num1和num2都取最小值，则num1=10<sup>m-1</sup>, num2=10<sup>n-1</sup>，那么它们的乘积就为10<sup>m+n-2</sup>，此时乘积的长度为m+n-1。</li><li>若num1和num2都取最大值，则num1=10<sup>m</sup>-1, num2=10<sup>n</sup>-1，那么它们的乘积就为10<sup>m+n</sup>-10<sup>m</sup>-10<sup>n</sup>+1，该结果是小于10<sup>m+n</sup>而大于10<sup>m+n-1</sup>的，此时乘积的长度为m+n。</li></ul>
<p>综上所述：长度分别为m和n的数相乘后，乘积的长度为m+n-1或m+n。</p>
</blockquote>
<p>因此，如果我们要将这些乘积累加到vector当中，为了确保能够容纳得下这些乘积，这个vector的必须要能够存储<code>m+n</code>个元素。</p>
<blockquote>
<p>问题二：乘数的每一位与被乘数的每一位相乘后的结果，到底应该累加到vector中的哪一个下标位置？</p>
</blockquote>
<p>以图中的例子为例，这里的被乘数和乘数的长度都是3，因此vector的大小应该开辟为6，稍作观察可以看到，乘数的第<code>i</code>位与被乘数的第<code>j</code>位相乘后的乘积，应该累加到vector中下标为<code>i+j+1</code>的位置。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1b1f866abb8d4a8b998536dfa2262c51.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 将vector从低位到高位进行进位操作后，最终vector当中存储的序列就是这两个数相乘后的结果，此时我们需要从vector的高位开始，将其一个个尾插到一个字符串中，最后返回的这个字符串即为字符串相乘后的字符串。</p>
<p>此时需要注意，两个数相乘后乘积的长度可能是<code>m+n-1</code>，因此vector中下标为0的位置可能未使用，所以在将vector当中的序列插入到字符串中时，需要先判断vector中下标为0的位置是否被使用，如果未被使用则从vector中下标为1的位置开始往后才算作有效序列。</p>
<h2><a id="2__164"></a>2. 代码实现</h2>
<pre><code class="prism language-cpp"><span class="token comment">//大数乘法</span>
string <span class="token function">MulString</span><span class="token punctuation">(</span>string num1<span class="token punctuation">,</span> string num2<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>num1 <span class="token operator">==</span> <span class="token string">"0"</span> <span class="token operator">||</span> num2 <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token comment">//两个操作数中有一个为0，则结果为0</span>
		<span class="token keyword">return</span> <span class="token string">"0"</span><span class="token punctuation">;</span>

	<span class="token keyword">int</span> m <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> n <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">arr</span><span class="token punctuation">(</span>m <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开辟数组arr的大小为m+n，并且全部初始化为0</span>
	
	<span class="token comment">//1、取乘数的每一位与被乘数的每一位相乘，将结果累加到数组arr的对应下标位置</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token comment">//取乘数的每一位</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">int</span> a <span class="token operator">=</span> num2<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token comment">//取被乘数的每一位</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> b <span class="token operator">=</span> num1<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>
			arr<span class="token punctuation">[</span>i <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> a<span class="token operator">*</span>b<span class="token punctuation">;</span> <span class="token comment">//乘数第i位与被乘数第j位相乘后的结果累加到数组arr中下标为i+j+1的位置</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//2、从后往前对数组arr进行进位操作</span>
	<span class="token keyword">int</span> end <span class="token operator">=</span> m <span class="token operator">+</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		arr<span class="token punctuation">[</span>end <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//进位的值加到前一个位置</span>
		arr<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token operator">%=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//进位后剩下的值存放到当前位</span>
		end<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token comment">//处理下一位</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//3、依次将数据尾插到字符串ret当中</span>
	string ret<span class="token punctuation">;</span> <span class="token comment">//存放两个字符串相乘后的结果</span>
	<span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//默认有效值从数组arr当中下标为1的位置开始</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
		flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//若数组arr当中下标为0的位置的值不为0，则有效值从第0位开始</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> flag<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m <span class="token operator">+</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		ret <span class="token operator">+=</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span> <span class="token comment">//返回两个字符串相乘后的结果</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>代码说明：</strong></p>
<ul><li>若传入的两个操作数当中其中有一个为0，则相乘后的结果就是0，因此直接返回<code>"0"</code>即可。</li><li>代码中定义vector时，将开辟的<code>m+n</code>个位置都先初始化为了0，因此最后在将vector当中的序列尾插到字符串时，可以通过判断vector中下标为0的位置是否为0，来得知该位置是否算作有效值。</li></ul>
<h1><a id="_212"></a>四、大数除法</h1>
<h2><a id="1__213"></a>1. 基本思想</h2>
<p>两个数相除的商值代表的是，被除数当中最多有多少个除数，而两个数相除的余数代表的是，被除数被分成一个个除数后剩下的不够再分出一个除数的值。比如<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        456
       
       
        ÷
       
       
        123
       
      
      
       456\div123
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">3</span></span></span></span></span>，其中被除数456最多可以被分成3个123，此时分完后还剩下的87就不够再分出一个123了，因此<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        456
       
       
        ÷
       
       
        123
       
       
        =
       
       
        3...87
       
      
      
       456\div123=3...87
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">5</span><span class="mord">6</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">1</span><span class="mord">2</span><span class="mord">3</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">8</span><span class="mord">7</span></span></span></span></span>。</p>
<p>当然，如果要求最终结果精确到小数点后的若干位，在余数不够一个除数的大小时，应该在余数后面补0，然后继续进行计算。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ba05560a22964e24929bba05834c25fd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAMjAyMWRyYWdvbg==,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 以结果当中的小数点为界限，可以将除法分为两个过程：</p>
<ul><li>计算小数点前面的数。</li><li>计算小数点后面的数。</li></ul>
<blockquote>
<p>计算小数点前面的数</p>
</blockquote>
<p>首先，如果被除数的位数小于除数的位数，那么结果中小数点前的值就是0了，计算后的余数就是被除数本身，该余数用于后续计算小数点后的值。但如果被除数的位数大于或等于除数的位数，那么此时就需要计算了。</p>
<p>回想我们平时列竖式计算时，如果除数的位数<code>len</code>小于被除数的位数，那么我们刚开始时是先只看被除数的前<code>len</code>位的，将被除数的前<code>len</code>位与除数进行除法运算得到一个商值，当余数不够时再将被除数后面的位补到余数后面，然后继续进行除法运算。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1d83cae2230f41979c972c1b3a9e5a5d.png"/><br/> 因此当两个数相除时，如果除数的位数<code>len</code>小于被除数的位数，那么我们应该先用被除数的前<code>len</code>位进行判断，此时被除数的前<code>len</code>位最多可以被分成几个除数，则说明应该商几，当余数不够时再将被除数后面的位依次添加到余数后面继续进行计算，直到被除数的所有位都被用完，此时得到的商序列就是小数点前的值，而最终剩下的余数就用于后续计算小数点后的值。</p>
<blockquote>
<p>当我们要判断一个数<code>a</code>最多可以被分成多少个<code>b</code>时，实际上非常简单，我们只需要判断当前<code>a</code>的值是否大于等于<code>b</code>，如果是，则可以在<code>a</code>的基础上减去<code>b</code>，然后继续该判断。最终<code>a</code>最多可以被分成多少个<code>b</code>，也就却决于<code>a</code>执行多少次减<code>b</code>操作后是小于b的。因此字符串相除可以被转换成字符串相减。</p>
</blockquote>
<p>按照上述方法得到小数点前的结果后，需要判断所得字符串的最高位是否为0，如果为0并且0的后面不是小数点，则需要将这个0过滤掉，比如<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        200
       
       
        ÷
       
       
        30
       
       
        =
       
       
        06.66
       
      
      
       200\div30=06.66
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">2</span><span class="mord">0</span><span class="mord">0</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">6</span><span class="mord">.</span><span class="mord">6</span><span class="mord">6</span></span></span></span></span>，此时我们需要将前面的0过滤掉。但如果字符串的最高位为0，但是0后面是小数点，那么这个0不能被过滤，比如<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        1
       
       
        ÷
       
       
        3
       
       
        =
       
       
        0.33
       
      
      
       1\div3=0.33
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">3</span></span></span></span></span>，此时的0不能被过滤。</p>
<blockquote>
<p>计算小数点后面的数</p>
</blockquote>
<p>计算小数点后面的数的方法与计算小数点前面的数的方法类似，只不过此时我们在余数后面补的就不是被除数后面的位了，而直接是0，补0后再继续进行计算。</p>
<p>但实际有些数相除永远除不尽，因此这里我们可以给函数设置一个参数<code>n</code>，表示要求计算结果保留到小数点后的第<code>n</code>位，此时我们就将补<code>n</code>次0后最终得到的值进行返回即可。</p>
<h2><a id="2__240"></a>2. 代码实现</h2>
<pre><code class="prism language-cpp"><span class="token comment">//大数除法</span>
string <span class="token function">DivString</span><span class="token punctuation">(</span>string num1<span class="token punctuation">,</span> string num2<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>num2 <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token comment">//除数不能为0</span>
		<span class="token keyword">return</span> <span class="token string">"error"</span><span class="token punctuation">;</span>
	string ret<span class="token punctuation">;</span> <span class="token comment">//存储两个字符串相除后的结果</span>
	string tmp<span class="token punctuation">;</span> <span class="token comment">//余数</span>

	<span class="token comment">//1、先计算小数点前面的数</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//num1的位数小于num2</span>
	<span class="token punctuation">{<!-- --></span>
		ret <span class="token operator">+=</span> <span class="token string">"0."</span><span class="token punctuation">;</span> <span class="token comment">//商为0</span>
		tmp <span class="token operator">=</span> num1<span class="token punctuation">;</span> <span class="token comment">//余数为num1</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token comment">//num1的位数大于等于num2</span>
	<span class="token punctuation">{<!-- --></span>
		size_t len <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//除数的长度</span>
		tmp <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//先取出被除数的高len位</span>
		<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//a、计算tmp当中最多有多少个num2（tmp除以num2的商）</span>
			<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">Cmp</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//tmp大于等于num2，则说明商可以更大</span>
			<span class="token punctuation">{<!-- --></span>
				tmp <span class="token operator">=</span> <span class="token function">SubString</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>
				count<span class="token operator">++</span><span class="token punctuation">;</span> 
			<span class="token punctuation">}</span>

			<span class="token comment">//b、将商值尾插到ret当中</span>
			ret <span class="token operator">+=</span> <span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//c、如果num1的所有位都被取完了，则小数点之前的结果计算完毕</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&gt;=</span> num1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>

			<span class="token comment">//d、如果num1当中还有未取的位，则继续从num1中一位尾插到tmp当中</span>
			tmp <span class="token operator">+=</span> num1<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">;</span>
			len<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//下一次待取位下标</span>
		<span class="token punctuation">}</span>
		ret <span class="token operator">+=</span> <span class="token string">"."</span><span class="token punctuation">;</span> <span class="token comment">//小数点之前的结果计算完毕，加上小数点</span>

		<span class="token comment">//如果ret最高位为0，且该位后面不是小数点，则需要将这个0过滤掉</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
			ret <span class="token operator">=</span> ret<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">//2、再计算小数点后面的数（保留n位小数）</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>tmp <span class="token operator">==</span> <span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token comment">//tmp为0（余数为0）</span>
		<span class="token punctuation">{<!-- --></span>
			ret <span class="token operator">+=</span> <span class="token string">"0"</span><span class="token punctuation">;</span> <span class="token comment">//则直接在ret后面补0即可</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token comment">//tmp不为0（余数不为0）</span>
		<span class="token punctuation">{<!-- --></span>
			tmp <span class="token operator">+=</span> <span class="token string">"0"</span><span class="token punctuation">;</span> <span class="token comment">//在余数后面补0，继续进行计算</span>

			<span class="token comment">//a、计算tmp当中最多有多少个num2（tmp除以num2的商）</span>
			<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">Cmp</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				tmp <span class="token operator">=</span> <span class="token function">SubString</span><span class="token punctuation">(</span>tmp<span class="token punctuation">,</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>
				count<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//b、将商值尾插到ret当中</span>
			ret <span class="token operator">+=</span> <span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ret<span class="token punctuation">;</span> <span class="token comment">//返回两个字符串相除后的结果</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>代码说明：</strong></p>
<ul><li>两个数相除时要求除数不能为0，如果除数为0则可以做出相应的处理，代码中当除数为0时返回<code>"error"</code>字符串以示错误。</li></ul>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>