<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-tomorrow-night" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>最新zotero与obsidian笔记联动教程（可代替citations和mdnotes）</h3>
<ul><li><a href="#_4">一、联动原理</a></li><li><a href="#_10">二、插件配置</a></li><li><ul><li><a href="#1zoterobetterbibtex_18">1、zotero-better-bibtex</a></li><li><a href="#2Bibnotes_Formatter_42">2、Bibnotes Formatter</a></li><li><a href="#3MarkDBConnect_171">3、MarkDBConnect</a></li></ul>
</li><li><a href="#zoteroObsidian_192">三、zotero与Obsidian联动</a></li></ul>
</div>
<p></p>
<p>网上有很多关于zotero与obsidian联动的教程，大都使用better bibtex和citations进行联动，但在将笔记导入obsidian后在zotero中更新数据之后需要重新导入，经过一天折腾终于找到一个最新的插件可完全代替citations。（本文适用于习惯使用markdown做笔记的同学）。</p>
<h1><a id="_4"></a>一、联动原理</h1>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ae51e7ddb8524ec5bd36e8c4b27a6883.png"/><br/> zotero通过Better-BibTeX软件生成JSON文件导入至Obsidian文件目录，Obsidian插件Bibnotes Formatter读取JSON文件信息在用户命令下生成指定文献的md格式笔记，笔记中包含有<code>{<!-- -->{localLabraryLink}}</code>（zotero中文献条目链接）和<code>{<!-- -->{file}}</code>(zoterp中文献pdf链接)可以从Obsidian中直接打开zotero查看文献，而zotero通过MarkDBConnect插件搜索Obsidian中的<code>@{<!-- -->{citeKey}}</code>格式文件名将zotero中的文献条目与Obsidian中的文献笔记关联实现联动。</p>
<h1><a id="_10"></a>二、插件配置</h1>
<p>所需插件：</p>
<ul><li><a href="https://retorque.re/zotero-better-bibtex/">zotero-better-bibtex</a> （zotero插件）</li><li><a href="https://github.com/stefanopagliari/bibnotes#commands">Bibnotes Formatter</a>（obsidian插件）</li><li><a href="https://github.com/daeh/zotero-markdb-connect">MarkDBConnect</a>（zotero插件）</li></ul>
<p>安装配置步骤如下：</p>
<h2><a id="1zoterobetterbibtex_18"></a>1、zotero-better-bibtex</h2>
<p>（1）下载<code>.xpi</code>插件<br/> 方式一：<a href="https://retorque.re/zotero-better-bibtex/">官网下载</a><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4d3fd0c54dd34c149264ac8fb8e287ba.png"/><br/> 方式二：<br/> github下载慢的话可以从我提供的蓝奏云下载：</p>
<blockquote>
<p>下载:https://wwd.lanzouj.com/iKBkb05zflli<br/> 密码:25io</p>
</blockquote>
<p>(2) 安装该插件<br/> 安装步骤与其他zotero插件的安装方式一致,不会安装的可以参考我<a href="https://blog.csdn.net/qq_43309940/article/details/117126357">另一篇博客</a>。</p>
<p>(3) 配置zotero-better-bibtex<br/> ①设置 Citation keys<br/> Citation keys用于后面obsidian笔记的命名和zotero和obsidian的联动，可以自己设置格式，这里设置为<code>[auth:lower]([year])-[shorttitle1_0:lower]</code>（作者姓氏小写（年份）- 标题的第一个单词小写）<br/> <code>[shorttitleN_M:lower]</code>:取标题前N个单词，前M个大写<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/684a941138044c659b5bb52c19ccd092.png"/><br/> ②设置哪些字段不导出<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/023455401b404859953b77e73dfa7ec1.png"/><br/> ③其余保持默认设置即可，到此该插件配置完成</p>
<h2><a id="2Bibnotes_Formatter_42"></a>2、Bibnotes Formatter</h2>
<p>（1）下载插件<br/> 方式一：<a href="https://github.com/stefanopagliari/bibnotes/releases">官网下载</a><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c554e59339c44316ac368ee24529ba06.png"/><br/> 方式二：<br/> github下载慢的话可以从我提供的蓝奏云下载：</p>
<blockquote>
<p>下载:https://wwd.lanzouj.com/iZPG005zfl8f<br/> 密码:awp5</p>
</blockquote>
<p>（2）安装此插件（和obsidian安装插件的方式相同）<br/> ①解压缩<code>.zip</code>文件<br/> ②将解压缩后的文件复制到obsidian文件根目录下隐藏文件夹”.obsidian“中的”plugins“文件夹下<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/464d283425d74eeeb167da42bb350c51.png"/></p>
<p>③重启obsidian并打开插件（注意关闭”安全模式“）<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/0cd729bffd3340589c2b261418274167.png"/><br/> （3）配置此插件<br/> ①在zotero中导出<code>.json</code>文件<br/> 在 Zotero 的主菜单中，点击”文件“ -&gt; ”导出文献库“（导出整个库）。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/ee44158b9e53472eba75c56faf6cbcae.png"/><br/> ②选择导出格式为”BetterBibTeX JSON“，选择”导出笔记“和”Keep updated“（导出文件会使JSON文件很大，因此不勾选，为在添加/删除/修改条目后自动更新导出的库，需要勾选”Keep updated“）<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a2898f633a6a46fdbdc5f9b993753b9a.png"/><br/> ③将JSON文件保存至obsidian的目录中（我将其保存在存放obsidian保存文献笔记的目录）<br/> 导出的文献信息可以在Better BibTeX的设置中查看和更改。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/bb96986f48ab480da165f44aa197a116.png"/></p>
<p>④将步骤③中的保存路径填写到下图序号1所在的路径中，其余的配置可参照下图，需要注意的是序号3处一定要增加@，因为在MarkDBConnect插件中设置是使用@{<!-- -->{citeKey}}来索引笔记的<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/981b62c5eea74b17b96f17a48ba16ec3.png"/><br/> ⑤第四步中选择自定义模板后有默认的一套模板，但其中无效字段较多，可以参考我改进的模板</p>
<pre><code># {<!-- -->{title}}

## Metadata
- **CiteKey**: {<!-- -->{citekey}}
 - **Type**: {<!-- -->{itemType}}
 - **Title**: {<!-- -->{title}}, 
 - **Author**: {<!-- -->{author}}, 
 - **Year**: {<!-- -->{year}} ;
- **Journal**: {<!-- -->{publicationTitle}}, 
- **Pages**: {<!-- -->{pages}}
- **Publisher**: {<!-- -->{publisher}},
- **Location**: {<!-- -->{place}},
- **DOI**: {<!-- -->{DOI}}
------


## Files and Links
- **Url**: [Open online]({<!-- -->{url}})
- **zotero entry**: {<!-- -->{localLibrary}}
- **open pdf**: {<!-- -->{file}}

- **Keywords**: {<!-- -->{keywordsAll}}

## Abstract
{<!-- -->{abstractNote}}

----

## Comments
{<!-- -->{UserNotes}}


----

## Extracted Annotations
{<!-- -->{PDFNotes}}
****



## Summary

  
## Research Objective(s)


## Background / Problem Statement


## Method(s)


## Evaluation


## Conclusion


## Notes
</code></pre>
<p>⑥Bibnotes Formatter插件默认使用电脑自带的PDF阅读器打开PDF文件，因此需要对插件做一定的修改。打开插件文件中的main.js文件，找到其中的<code>createLocalFileLink()</code>函数，用下面的代码替换</p>
<pre><code class="prism language-javascript"><span class="token keyword">function</span> <span class="token function">createLocalFileLink</span><span class="token punctuation">(</span><span class="token parameter">reference2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">"{<!-- -->{localFile}}"</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> filesList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> attachmentindex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> attachmentindex <span class="token operator">&lt;</span> reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">.</span>length<span class="token punctuation">;</span> attachmentindex<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>itemType <span class="token operator">!==</span> <span class="token string">"attachment"</span><span class="token punctuation">)</span>
      <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token comment">// if (reference2.attachments[attachmentindex].path == void 0) {<!-- --></span>
    <span class="token comment">//   reference2.attachments[attachmentindex].path = "";</span>
    <span class="token comment">// }</span>
    <span class="token comment">// const attachmentPathCorrected = reference2.attachments[attachmentindex].path.replaceAll(" ", "%20");</span>
    <span class="token comment">// const selectedfile = "[" + reference2.attachments[attachmentindex].title + "](file://" + attachmentPathCorrected + ")";</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>uri <span class="token operator">==</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>uri <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> selectedfileUri <span class="token operator">=</span> reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>uri
    <span class="token keyword">const</span> attachmentKey <span class="token operator">=</span> selectedfileUri<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span>selectedfileUri<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    selectedfile <span class="token operator">=</span> <span class="token string">"["</span> <span class="token operator">+</span> reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>title <span class="token operator">+</span> <span class="token string">"](zotero://select/library/items/"</span> <span class="token operator">+</span> attachmentKey <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reference2<span class="token punctuation">.</span>attachments<span class="token punctuation">[</span>attachmentindex<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'pdf'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      selectedfile <span class="token operator">=</span> selectedfile<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"zotero://select/"</span><span class="token punctuation">,</span><span class="token string">"zotero://open-pdf/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    filesList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>selectedfile<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> filesListString <span class="token operator">=</span> filesList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"; "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> filesListString<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/79592ef2575e4fc9a07a9e8d4aee4e3c.png"/><br/> 若觉得修改比较麻烦可以直接下载我修改后的main.js文件替换插件文件夹下的main.js文件。</p>
<blockquote>
<p>下载:https://wwd.lanzouj.com/iZ9IH05zp2gj<br/> 密码:8ib6</p>
</blockquote>
<p>⑦其他的配置默认即可，若想要自己修改可参考官网的使用说明。</p>
<h2><a id="3MarkDBConnect_171"></a>3、MarkDBConnect</h2>
<p>（1）下载<code>.xpi</code>插件<br/> 方式一：<a href="https://github.com/daeh/zotero-markdb-connect">官网下载</a><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d89949ebec9f40398b4248c4ef700199.png"/></p>
<p>方式二：<br/> github下载慢的话可以从我提供的蓝奏云下载：</p>
<blockquote>
<p>下载:https://wwd.lanzouj.com/ibygo05zflob<br/> 密码:gx9u</p>
</blockquote>
<p>（2）安装插件过程就不再赘述<br/> （3）配置插件<br/> ①依次点击zotero菜单栏的“工具”-&gt;“MarkDBConnect Preferences”进入配置页面<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7adf08ac0efa4575816130e8f721fc86.png"/><br/> ②设置文献保存路径（要填写Bibnotes Formatter配置中设置的文献笔记保存路径，填写的路径如下黑色背景图中所示）<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/2a5e438daf2549eea7e02a1866a79ea1.png"/></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8124ae9635444f37bcf439752bfd0abe.png"/></p>
<p>③其他保持默认设置即可，至此该插件安装完成，所有插件也都配置完成。</p>
<h1><a id="zoteroObsidian_192"></a>三、zotero与Obsidian联动</h1>
<p>1、打开obsidian软件，按下<code>ctrl+P</code>调出命令面板，输入<code>bib</code>，选择下图红框所示命令，之后选择自己想要阅读的文献。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/8af92060aaed41519476f81b6f76dae1.png"/><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b402ef2d29354133ae7b5a2260c6a519.png"/></p>
<p>该插件在 Obsidian 中有两个命令：</p>
<p><code>Update Library</code>：当您选择此命令时，插件将生成/更新自上次选择同一命令以来从 Zotero 修改的所有笔记。如果第一次选择此命令，则插件将为导入的参考书目中的所有条目创建/更新文献信息。</p>
<p><code>Create/Update Literature Note</code>：当选择此命令时，系统将提示您从已导入的库中选择参考文献之一。如果在指定文件夹中尚未导入该文献笔记，则会根据之前设置的模板生成新的笔记。如果笔记已经存在，其内容将被更新而不会覆盖现有笔记（例如，从 Obsidian 中手动添加的笔记和块引用不会被覆盖）。可以选择第一个选项（“整个库”）来创建/更新导入库中的所有笔记。</p>
<p>2、按照上述方法操作会在设置的文献笔记保存路径下生成一个名为@{<!-- -->{citeKey}}的md文件，如下图所示，在此文件中会自动提取你在zotero自带阅读器中所做的笔记<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4e63c3d383344a2fa006b984bd837ab0.png"/><br/> 3、使用MarkDBConnect插件将zotero文献链接到obsidian中的笔记文件<br/> （1）依次点击zotero菜单栏中的”工具“-&gt;“MarkDBConnect Sync Tags”，若设置正确插件会自动找到步骤2中的md笔记文件并与之关联<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/725d206ec3754769b41e8ddfc5472556.png"/><br/> （2）关联以后即可从zotero中打开obsidian中生成的文献笔记（右击关联了文献笔记的文献条目）<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/0fcf6c8c52da4a7fa0d12cfb2a8b1131.png"/></p>
<p>（3）在阅读完一篇论文后可能会在论文中做许多标记，此时右击”从注释中添加笔记“会将pdf中做的笔记和高亮部分提取出来<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4a5afe6e70a9442ab310e73b47cc626b.png"/><br/> （3）导出笔记后在obsidian中运行再次运行<code>Create/Update Literature Note</code>命令即可将更改的信息全部更新至obsidian文献笔记中，不会覆盖前一次的笔记，同时也会记录每一次的阅读笔记，当然也可以在阅读完文献以后再生成阅读笔记，此过程可反复操作，至此zotero和Obsidian的联动就完成了，可以很方便地在两个软件中快速实现切换。</p>
<p>zotero的常用插件配置可以参考我这篇博客：<a href="https://blog.csdn.net/qq_43309940/article/details/117126357">文献管理软件Zotero配置及常用插件安装使用</a></p>
<p>参考：</p>
<blockquote>
<p>1、<a href="https://snailwish.com/291/">Zotero 插件 Bibtex for Zotero 介绍和安装</a><br/> 2、<a href="https://zhuanlan.zhihu.com/p/480911605">科研文献阅读——Zotero和Obsidian联动最优解决方案</a></p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>