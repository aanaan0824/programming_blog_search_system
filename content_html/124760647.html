<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/7816e0694a0744e9b5aea9f61af3b441.gif#pic_center"/></p>
<blockquote>
<p>😇 😇<strong>hello！我是bug。前面几期我们讲解了树的相关结构，今天我们就要进入<font color="red">哈希表</font>的学习了：</strong><br/> <strong>（代码可能会有一点问题，请各位老铁指正 😘 😘 ）</strong></p>
</blockquote>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#_5">一、哈希</a></li><li><ul><li><a href="#_1_8">🍉 1、什么是哈希？</a></li><li><a href="#_2_28">🍉 2、直接定址法</a></li><li><a href="#3_49">🍉3、除留余数法（重点）</a></li><li><a href="#4_76">🍉4、解决哈希冲突</a></li><li><ul><li><a href="#____78">🌱 闭散列</a></li><li><ul><li><a href="#__1font_colorred___font_80">🍄 （1）<font color="red"> 线性探测 </font></a></li><li><a href="#___2font_colorred___font_103">🍄 （2）<font color="red"> 二次探测 </font></a></li></ul>
</li><li><a href="#_____118">🌱 开散列</a></li></ul>
</li></ul>
</li><li><a href="#_128">二、闭散列（哈希）的模拟实现</a></li><li><a href="#_764">三、开散列（哈希）的模拟实现</a></li></ul>
</div>
<p></p>
<h1><a id="_5"></a>一、哈希</h1>
<blockquote>
<p>🌵🌵在前面，我们学习了<strong>红黑树、AVL树</strong>的相关性质，他们增删查改的时间复杂度都是O（logN），这个效率已经是比较高的了。但是有没有一种数据结构，（不需要进行比较就可以直接增删查改）它进行<strong>增删查改的时间复杂度为O（1）</strong> 呢？下面我们就要介绍这种数据结构——哈希表。</p>
</blockquote>
<h2><a id="_1_8"></a>🍉 1、什么是哈希？</h2>
<blockquote>
<p><a href="https://baike.baidu.com/item/Hash/390310?fromtitle=%E5%93%88%E5%B8%8C&amp;fromid=24086145&amp;fr=aladdin"><font color="red" size="4">🌵🌵<strong>哈希（Hash）</strong></font></a>：<strong>散列函数，其本质是<font color="red">映射</font></strong>。</p>
</blockquote>
<p><font color="bloue" size="4">🌻 🌻<strong>那么映射又是什么呢？如下图：（例如医院的挂号系统）</strong></font><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/58519e36738b43e0a1ca2e2dfc40e7eb.png"/><br/> <strong>其中我们存入一对键值，通过序号我们就可以找到人员。而序号和姓名之间就是一种映射关系。（也就是KV模型）</strong></p>
<hr/>
<blockquote>
<p><a href="https://baike.baidu.com/item/%E5%93%88%E5%B8%8C%E8%A1%A8/5981869?fr=aladdin"><font color="red" size="4">🌵🌵 <strong>哈希表（HashTable）</strong></font></a>：<strong>是根据关键码值(Key value)而直接进行访问的数据结构。通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。这个映射函数叫做散列函数，存放记录的数组叫做散列表。<br/> 通过这种映射关系，那么我们就可以直接通过key值直接找的相应的数据，插入和删除数据时也可以直接根据key值进行插入删除，其时间复杂度就是O（1） 。</strong></p>
</blockquote>
<blockquote>
<p><font color="red" size="4"> <strong>🌵🌵作用</strong></font>：<strong>哈希表在增删查改上的效率都是十分优秀的，一般我们都是通过哈希表来快速查找数据是否出现在表中。</strong></p>
</blockquote>
<blockquote>
<p><font color="red" size="4"> 🌵🌵<strong>哈希冲突</strong></font>：<strong>在绝大多数情况下，我们都会面临一个问题，那就是如何使一个位置映射一个数据。当我们开辟一个数组时，我们是采用下标来进行映射的，即每一个下标都会映射数据。但是当多个数据都映射到同一个位置时，那么就产生了哈希冲突。对于哈希冲突我们是要尽量避免的，因为哈希冲突会降低我们增删查改的效率。（具体原因下面再介绍）</strong></p>
</blockquote>
<blockquote>
<p><font color="red" size="4"> 🌵🌵<strong>哈希表的K模型和KV模型</strong></font>：<strong>和前面的红黑树（AVL树）一样，所以哈希表也可以封装map和set。C++中的unordered_map和unordered_set的底层就是哈希表。</strong></p>
</blockquote>
<blockquote>
<p><font color="red" size="4"> 🌵🌵<strong>缺点</strong></font>：<strong>当我们要对大量数据进行操作时，要开辟大量的空间来存储数据。而且，散列函数的采用也是至关重要的（尽量避免哈希冲突），那么我们要采取哪种散列函数来进行映射呢？（下面进行介绍）</strong></p>
</blockquote>
<hr/>
<h2><a id="_2_28"></a>🍉 2、直接定址法</h2>
<p><strong>假设有这样一个数组，我们要将它存入哈希表中：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c87b7d667c0c4e97aee641235039fc04.png"/></p>
<p><strong>我们直接根据元素的实际大小进行插入。</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/31a53566038942e28ff3237e6af78521.png"/><br/> <strong>如上图，即每一个下标都对应一个相应的数据，没有对应的数据就为空</strong>。</p>
<p><font color="red" size="4"> 🍏 <strong>注意</strong> ❗️ ❗️</font></p>
<blockquote>
<p><font color="red">🌳🌳 <strong>（1）开辟数组的时候，一定要知道数据的范围，并根据数据的范围开辟数组，如果数据的大小超过了数组的大小就会越界。<br/> 🌳🌳（2）采用直接定址法一定要数据比较集中，因为最大最小数据如果相差太大，那么浪费的空间也会很多。<br/> 🌳🌳（3）如果我们存储的是整型，那么不需要担心哈希冲突，因为每个数值都对应唯一的位置。</strong></font></p>
</blockquote>
<p><strong><font color="bloue" size="4">🌻 🌻但是，当我们存入的数据不是整型的时候我们就要考虑如何来进行映射？<br/> 🌻 🌻其实在大多数情况下，我们采用unordered_map和unordered_set存储的都是字符串，那我们如何将字符串和下标联系起来呢？</font></strong></p>
<blockquote>
<p><strong>可能你会觉得字符都有对应的ASCII码，我们可以用字符的ASCII来进行对应。但是这种情况下就不可避免的会出现哈希冲突，因为只要我们不规定字符串的长度，那么字符串就是无穷无尽的，通过其ASCII来对应是一定会产生冲突的。（对于哈希冲突的解决我们下面再来进行详细的介绍）</strong></p>
</blockquote>
<h2><a id="3_49"></a>🍉3、除留余数法（重点）</h2>
<blockquote>
<p><font color="red"> <strong>当一组数据中的最大和最小相差比较大时，就会浪费大量的空间。所以直接定址法就不再适用了，这时候我们就要采用除留余数法。</strong></font></p>
</blockquote>
<p><font color="bloue" size="4">🌻 🌻<strong>什么是除留余数法呢？</strong></font><br/> <strong>假设有这样一个数组，如下图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/77d1f4fac56d4e379599dd8bc453455a.png"/><br/> <font color="bloue" size="4">🌻 🌻<strong>如何通过除留余数法将数据存入哈希表中呢？</strong></font></p>
<blockquote>
<p><strong>即我们将每一个数据对表的大小进行取模，取模过后数据就可以通过下标来映射相应的位置。</strong></p>
</blockquote>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/eabbad07e5bf4a878b8757a0bb9a94a0.png"/><br/> <strong>所以插入后数据如图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e12dbfb9874a40e79dc6a27e99b83f78.png"/></p>
<p><strong>除留余数法可以很好的避免空间大量的浪费，所以一般我们都采用除留余数法。当然，除留余数法也会产生哈希冲突。</strong></p>
<p><strong>除了直接定址法和除留余数法，我们还有其他的方法比如：平方取中法、折叠法、随机数法、数学分析法。（但是这些方法不常用，这里不做介绍）</strong></p>
<p><font color="red" size="4"> 🍏 <strong>注意</strong>❗️ ❗️</font></p>
<blockquote>
<p><font color="red"> 🌳🌳 <strong>哈希函数设计的越精妙，产生哈希冲突的可能性就越低，但是无法避免哈希冲突。</strong></font></p>
</blockquote>
<hr/>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/607d35b50ffb4372bf07161a7da266bc.jpeg#pic_center"/><br/> 🍓 🍓 <strong>下面就是实现重点了，嘿嘿。</strong></p>
<hr/>
<h2><a id="4_76"></a>🍉4、解决哈希冲突</h2>
<p><strong>上面直接定址法和除留余数法都会产生哈希冲突的问题，下面我们就来解决：</strong></p>
<h3><a id="____78"></a>🌱 闭散列</h3>
<blockquote>
<p><font color="red" size="4">🌵🌵<strong>闭散列</strong></font>：<strong>也叫做开放定址法，当发生哈希冲突时，如果哈希表未被装满，说明在哈希表中必然还有空位置，那么可以把key存放到冲突位置中的“下一个” 空位置中去。那如何寻找下一个空位置呢？</strong></p>
</blockquote>
<h4><a id="__1font_colorred___font_80"></a>🍄 （1）<font color="red"> 线性探测 </font></h4>
<blockquote>
<p><a href="https://baike.baidu.com/item/%E7%BA%BF%E6%80%A7%E6%8E%A2%E6%B5%8B/22688326?fr=aladdin"><font color="red" size="4"> 🌵🌵<strong>线性探测</strong> </font></a>：<strong>线性探测是计算机程序解决哈希表冲突时所采取的一种策略。</strong></p>
</blockquote>
<p><strong>还是这个数组：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/4d79ce6600b14d21b2368cbf558fbe25.png"/><br/> <strong>我们通过除留余数法，可以算得8和15取模后，其对应同一个位置，那么我们从这个位置开始，一个一个往后面去探测，直到找到一个空位置，就将数据插入。</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/94f08a9c3ed54c9bbaaff2e79a1d7a57.png"/></p>
<blockquote>
<p><strong>但是会有这种情况，即：取模后发生冲突，然后向后面探测，直到探测到最后一个位置都没有发现空位置，那么我们就再从头开始进行探测。</strong></p>
</blockquote>
<p><strong>（线性探测中探测的终点就是取模后对应的位置，因为当我们从开始取模位置探测，探测到最后一个位置都没有，那么我们再从头开始探测，如果还是没有，那么会又回到取模位置。<font color="red">所以我们表的大小一定要超过数据的个数</font>。）</strong></p>
<blockquote>
<p><font color="red" size="4"> 🍐 <strong>优点</strong></font>：<font color="red"> <strong>十分简单，好操作。</strong></font></p>
</blockquote>
<blockquote>
<p><font color="red" size="4"> 🍐 <strong>缺点</strong></font>：<font color="red"> <strong>会造成成片冲突。一旦发生哈希冲突，所有的冲突连在一起，容易产生数据“堆积”。（如下图）</strong></font></p>
</blockquote>
<p><strong>如下数组：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f3b9e5b03ef14ea1856d06197549fe6b.png"/><br/> <strong>其中每个数据取模后都对应下标为1的位置，通过线性探测插入后，如下图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/805026c6922a4d6a8d8d63836898cc93.png"/><br/> <strong>当我们进行删除查找的时候，都是通过取模找到位置1，如果位置1不是我们要查找的数据，就会向后面遍历，直到找到数据为止。这也是为什么哈希冲突的发生会造成效率下降，而当大量的哈希冲突扎堆时，其效率更会大幅度下降。所以，也就引出了下面的二次探测来缓解成堆的哈希冲突。</strong></p>
<h4><a id="___2font_colorred___font_103"></a>🍄 （2）<font color="red"> 二次探测 </font></h4>
<blockquote>
<p><font color="red" size="4">🌵🌵<strong>二次探测</strong></font>：<strong>线性探测的缺陷是产生冲突的数据堆积在一块，这与其找下一空位置有关系，因为找空位置的方式就是挨着往后逐个去找，因此二次探测为了避免该问题，找下一个空位置的方法为： H<sub>i</sub>= (H<sub>0</sub> + i<sup>2</sup>)% m,或者：H<sub>i</sub> = (H<sub>0</sub> - i<sup>2</sup>)% m。其中：i = 1,2,3…， 是通过散列函数Hash(x)对元素的关键码 key 进行计算得到的位置，m是表的大小。</strong></p>
</blockquote>
<p><strong>还是看图，有这样一组数据：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/f94ad1e251844d09a9862078434356fb.png"/></p>
<p><strong>通过二次探测后，即15、22和8都对应位置1，先插入15，接着我们插入22时，二次探测，从i^2开始向后找空位置。i = 1时，就是取模位置的下一个，插入22 。插入8，向后面探测，i = 1时，已经插入了22。那么再探测i = 2时，也就是第一次位置的后面第四个位置，插入8 。</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e5d998177a144d1282cc5b1034027d31.png"/></p>
<p><font color="red" size="4"> 🍏 <strong>注意</strong>❗️ ❗️</font></p>
<blockquote>
<p><font color="red">🌳🌳 <strong>二次探测可以防止成堆的哈希冲突都连续存储，缓解了效率的下降。</strong></font></p>
</blockquote>
<hr/>
<h3><a id="_____118"></a>🌱 开散列</h3>
<blockquote>
<p><font color="red" size="4"> 🌵🌵<strong>开散列</strong></font>：<strong>也叫做<font color="red"> 拉链法、哈希桶</font>。首先对关键码集合用散列函数计算散列地址，具有相同地址的关键码归于同一子集合，每一个子集合称为一个桶，各个桶中的元素通过一个单链表链接起来，各链表的头结点存储在哈希表中。其本质就是一个指针数组，数组中存储的是单链表的首元素地址。</strong></p>
</blockquote>
<p><strong>还是这个数组：</strong></p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/d4d6d85e3aa749debdd2c5cde13a868e.png"/><br/> <strong>我们要将它插入哈希表（开散列）中，如下图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/386b0b5548ac4daeb5c5114959c58fc6.png"/><br/> <strong>当我们插入15、22和8时，取模计算位置，然后采用头插的方式，直接插入。发生哈希冲突的元素就通过链表进行存储。</strong></p>
<h1><a id="_128"></a>二、闭散列（哈希）的模拟实现</h1>
<p><font color="bloue" size="4"> 🌻 🌻<strong>问题一：哈希表内部有什么结构？</strong></font><br/> <strong>（迭代器+哈希结点+哈希表。）</strong></p>
<p><font color="red" size="4"> <strong>迭代器</strong></font>：<strong>正向迭代器内部成员有结点指针+哈希表的指针，因为结点和结点之间没有联系，我们要从一个结点跳转到下一个结点就要通过哈希表来进行调整。所以需要哈希表的指针，同时传参过程可以很巧妙地利用this指针完成。反向迭代器通过封装正向迭代器来实现，闭散列的哈希表可以完成自减的重载，所以反向迭代器可以实现。</strong><br/> <font color="red" size="4"> <strong>哈希结点</strong></font>：<strong>成员变量有data数据，state状态。</strong><br/> <font color="red" size="4"> <strong>哈希表</strong></font>：<strong>封装哈希结点和迭代器于一体。</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题二：当我们插入删除数据时，怎么判断当前位置是否可以操作？</strong></font><br/> <strong>使用一个枚举类型，里面包含EMPTY、EXITS、DELETE三种状态。默认状态为EMPTY，插入数据后状态变为EXITS，删除数据时，只要把状态改成DELETE即可。</strong></p>
<p><font color="bloue" size="4"> 🌻 🌻 <strong>是不是会觉得很困惑，为什么存在三种状态？DELETE有什么作用呢？</strong></font></p>
<p><strong>假设有一个哈希表，如下图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a1cb21dc61f24230a1a64577301ce485.png"/><br/> <strong>当我们删除数据22时，将其置为EMPTY，但是会影响查找过程。查找时先计算数据的下标，如果当前位置数据不是查找的数据，那么向后依次查找，直到查到当前位置被标记为EMPTY时停止。在我们查找的过程中，如果删除数据就将其置EMPTY，当发生扎堆的哈希冲突，删除冲突中间的一个数据，就会影响对后面冲突数据的查询，所以要用DELETE进行标识，这样不会影响查找过程。如下图：</strong><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b6b03afdac6d4b33981ba6fbd5f2a898.png"/></p>
<p><strong>当我们查找8的时候，计算下标为1 。但是如果22被标记成EMPTY，那么查找到22这个位置时就停止，但是如果是DELETE，那么会继续向后面查找。</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题三：怎么控制哈希表的大小？</strong></font><br/> <font color="red"> <strong>当我们的表过小时，会产生大量的哈希冲突，效率会大幅度下滑。但是当我们的表过大时，哈希冲突得到了缓解，但是大量的空间又会被浪费。所以这里我们引入负载因子，负载因子即：有效的数据的数量/哈希表的长度，当负载因子超过0.7的时候，我们就要给哈希表扩容。为什么选中0.7作为标准值呢？在0.7的时候，哈希冲突和空间浪费之间得到了平衡，算的上是比较好的选择了。</strong></font><br/> <strong>当我们对哈希表进行扩容后，映射关系要进行调整。因为扩容的本质是重新开辟更大的空间，再将数据拷贝过去。但是，当哈希表扩容，其映射关系也会发生改变。所以我们不能直接将数据原封不动的拷贝过去，而是要重新建立映射关系。<br/> 在VS的编译器里，其采用了<font color="red"> 素数表</font>。因为按照素数进行扩容，取模计算下标时不容易发生哈希冲突。（虽然我也不太清楚怎么计算的）</strong></p>
<p><font color="bloue" size="4"> 🌻 🌻<strong>问题四：哈希表有K模型和KV模型，我们如何实现呢？</strong></font><br/> <strong>采用仿函数来取pair键对中的key，即如果是K模型，那么直接返回；如果是键对模型，那么选出里面的key再返回。</strong></p>
<p><font color="bloue" size="4"> 🌻 🌻<strong>问题五：字符串（比较常用）通过什么方式进行转化可以更好的避免哈希冲突呢？</strong></font><br/> <strong>（这里我们也要采用仿函数来实现。）</strong></p>
<hr/>
<p><font color="red" size="4"> <strong>（不可取）</strong></font><br/> <strong>（1）首字符的ACSII码<br/> 字符总共只有256个，如果只用首字符来映射的话，很容易产生哈希冲突。<br/> （2）字符串内所有字符ASCII码值之和<br/> 所有字符ACSII码值之和也容易冲突，即字符串中的字符相同，但是顺序不同时，全部都会冲突。</strong></p>
<hr/>
<blockquote>
<p><strong>对于字符串，一群大佬经过研究后得出了下面几种不容易冲突的算法：</strong></p>
</blockquote>
<p><font color="red" size="4"> 🍋 <strong>BKDR哈希算法⬇️ ⬇️ :</strong></font></p>
<pre><code class="prism language-c">hash <span class="token operator">=</span> hash <span class="token operator">*</span> <span class="token number">131</span> <span class="token operator">+</span> ch<span class="token punctuation">;</span>   <span class="token comment">// 也可以乘以31、131、1313、13131、131313..</span>
</code></pre>
<p><font color="red" size="4"> 🍋 <strong>SDBM哈希算法⬇️ ⬇️ :</strong></font></p>
<pre><code class="prism language-c">`hash <span class="token operator">=</span> <span class="token number">65599</span> <span class="token operator">*</span> hash <span class="token operator">+</span> ch<span class="token punctuation">;</span> `
</code></pre>
<p><font color="red" size="4"> 🍋 <strong>RS哈希算法⬇️ ⬇️ ：</strong></font></p>
<pre><code class="prism language-c">template<span class="token operator">&lt;</span>class T<span class="token operator">&gt;</span>  
<span class="token class-name">size_t</span> <span class="token function">RSHash</span><span class="token punctuation">(</span><span class="token keyword">const</span> T <span class="token operator">*</span>str<span class="token punctuation">)</span>  
<span class="token punctuation">{<!-- --></span>  
    <span class="token keyword">register</span> <span class="token class-name">size_t</span> hash <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  
    <span class="token class-name">size_t</span> magic <span class="token operator">=</span> <span class="token number">63689</span><span class="token punctuation">;</span>     
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> ch <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span><span class="token punctuation">)</span><span class="token operator">*</span>str<span class="token operator">++</span><span class="token punctuation">)</span>  
    <span class="token punctuation">{<!-- --></span>  
        hash <span class="token operator">=</span> hash <span class="token operator">*</span> magic <span class="token operator">+</span> ch<span class="token punctuation">;</span>  
        magic <span class="token operator">*=</span> <span class="token number">378551</span><span class="token punctuation">;</span>  
    <span class="token punctuation">}</span>  
    <span class="token keyword">return</span> hash<span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre>
<p><strong>（剩下的就不介绍了，有兴趣的可以去看看。网址：</strong><a href="https://www.cnblogs.com/-clq/archive/2012/05/31/2528153.html"><font color="blue" size="4"> <strong>哈希算法</strong></font></a><strong>）</strong></p>
<p><font color="bloue" size="4"> 🌻 🌻<strong>问题六：查找中怎么判断当前数据是否是我们需要的查找内容？</strong></font><br/> <strong>如果是内置类型，直接用等号比较即可。但是如果是自定义类型，它的比较就需要我们自己来完成。例如：字符串的比较，我们可以用string自己的等号重载来判断。所以采用仿函数来完成这项内容，需要比较自定义类型，那么就自己来写仿函数进行判断。</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题七：方括号（“[]”）的重载？</strong></font><br/> <strong>在KV模型中，方括号的重载是很重要的。即可以直接使用方括号进行插入数据，或者对数据进行修改。<br/> 进行重载中，调用insert函数进行插入，insert函数的返回是键对值。键对值中第一个参数迭代器类型，是插入位置的迭代器；第二个参数是布尔类型，判断插入是否成功。我们根据返回值中的迭代器参数可以获得插入位置的指针，然后再通过指针获得插入键对值中的V（这里插入过程中，V值为默认值），将V返回后，我们可以通过等号进行修改</strong>⬇️ ⬇️</p>
<pre><code class="prism language-c">	V<span class="token operator">&amp;</span> operator<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span> 
	<span class="token punctuation">{<!-- --></span> 
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">.</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>

	<span class="token comment">//使用方式</span>
	HTs<span class="token punctuation">[</span><span class="token string">"look"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"看"</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span>operator<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">"吃"</span><span class="token punctuation">;</span>
</code></pre>
<p><font color="bloue" size="4"> 🌻 🌻<strong>其他问题：</strong></font><br/> <strong>因为迭代器中要使用哈希表的指针，而哈希表又要使用迭代器，所以我们需要添加一个前置声明。<br/> 迭代器中需要访问哈希表的私有成员_table，所以我们要把迭代器定义为哈希表的友元类。（不到万不得已，不使用友元，因为友元会破坏封装）</strong></p>
<p>🍒 🍒 <strong>HashTable（闭散列）的完整代码⬇️ ⬇️ ：</strong></p>
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>

using std<span class="token operator">::</span>cin<span class="token punctuation">;</span>
using std<span class="token operator">::</span>cout<span class="token punctuation">;</span>
using std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
using std<span class="token operator">::</span>vector<span class="token punctuation">;</span>
using std<span class="token operator">::</span>string<span class="token punctuation">;</span>
using std<span class="token operator">::</span>pair<span class="token punctuation">;</span>
using std<span class="token operator">::</span>make_pair<span class="token punctuation">;</span>

<span class="token comment">//选出key</span>
template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">PairSelect1st</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">KSelect1st</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> k<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//转成整型</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">size_t</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> val<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//模板的特化</span>
template<span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span><span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">size_t</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s1<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token class-name">size_t</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			sum <span class="token operator">=</span> sum <span class="token operator">*</span> <span class="token number">131</span> <span class="token operator">+</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> sum<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//比较判断</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">equal_to</span>
<span class="token punctuation">{<!-- --></span>
	bool <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> lval<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token operator">&amp;</span> rval<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> lval <span class="token operator">==</span> rval<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
template<span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token comment">//模板特化</span>
<span class="token keyword">struct</span> <span class="token class-name">equal_to</span><span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span>
	bool <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s1<span class="token punctuation">,</span> <span class="token keyword">const</span>  std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> s1 <span class="token operator">==</span> s2<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//素数表</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> PRIMECOUNT <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token class-name">size_t</span> primeList<span class="token punctuation">[</span>PRIMECOUNT<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
 <span class="token number">53ul</span><span class="token punctuation">,</span> <span class="token number">97ul</span><span class="token punctuation">,</span> <span class="token number">193ul</span><span class="token punctuation">,</span> <span class="token number">389ul</span><span class="token punctuation">,</span> <span class="token number">769ul</span><span class="token punctuation">,</span>
 <span class="token number">1543ul</span><span class="token punctuation">,</span> <span class="token number">3079ul</span><span class="token punctuation">,</span> <span class="token number">6151ul</span><span class="token punctuation">,</span> <span class="token number">12289ul</span><span class="token punctuation">,</span> <span class="token number">24593ul</span><span class="token punctuation">,</span>
 <span class="token number">49157ul</span><span class="token punctuation">,</span> <span class="token number">98317ul</span><span class="token punctuation">,</span> <span class="token number">196613ul</span><span class="token punctuation">,</span> <span class="token number">393241ul</span><span class="token punctuation">,</span> <span class="token number">786433ul</span><span class="token punctuation">,</span>
 <span class="token number">1572869ul</span><span class="token punctuation">,</span> <span class="token number">3145739ul</span><span class="token punctuation">,</span> <span class="token number">6291469ul</span><span class="token punctuation">,</span> <span class="token number">12582917ul</span><span class="token punctuation">,</span> <span class="token number">25165843ul</span><span class="token punctuation">,</span>
 <span class="token number">50331653ul</span><span class="token punctuation">,</span> <span class="token number">100663319ul</span><span class="token punctuation">,</span> <span class="token number">201326611ul</span><span class="token punctuation">,</span> <span class="token number">402653189ul</span><span class="token punctuation">,</span> <span class="token number">805306457ul</span><span class="token punctuation">,</span>
 <span class="token number">1610612741ul</span><span class="token punctuation">,</span> <span class="token number">3221225473ul</span><span class="token punctuation">,</span> <span class="token number">4294967291ul</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

namespace CloseHash
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">enum</span> <span class="token class-name">State</span> <span class="token punctuation">{<!-- --></span> EMPTY<span class="token punctuation">,</span> EXITS<span class="token punctuation">,</span> DELETE <span class="token punctuation">}</span><span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class T<span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">HashData</span>
	<span class="token punctuation">{<!-- --></span>
		T _data<span class="token punctuation">;</span><span class="token comment">//存储可能是k，可能是kv</span>
		State _state <span class="token operator">=</span> EMPTY<span class="token punctuation">;</span><span class="token comment">//标识状态</span>

		<span class="token function">HashData</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> State state <span class="token operator">=</span> EMPTY<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_state</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Pred<span class="token punctuation">,</span> class Select1st<span class="token punctuation">,</span> class HashFunc<span class="token operator">&gt;</span>
		class HashTable<span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Ref<span class="token punctuation">,</span> class Ptr<span class="token punctuation">,</span> class Pred <span class="token operator">=</span> equal_to<span class="token operator">&lt;</span>K<span class="token operator">&gt;</span>
	<span class="token punctuation">,</span> class Select1st <span class="token operator">=</span> PairSelect1st<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> class HashFunc <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> HashData<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> HD<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> HT<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Ref reference<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Ptr pointer<span class="token punctuation">;</span>
		HD<span class="token operator">*</span> _pnode<span class="token punctuation">;</span>
		HT<span class="token operator">*</span> _pht<span class="token punctuation">;</span>
		
		<span class="token function">Iterator</span><span class="token punctuation">(</span>HD<span class="token operator">*</span> pnode <span class="token operator">=</span> nullptr<span class="token punctuation">,</span> HT<span class="token operator">*</span> pht <span class="token operator">=</span> nullptr<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_pnode</span><span class="token punctuation">(</span>pnode<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_pht</span><span class="token punctuation">(</span>pht<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token punctuation">}</span>

		bool operator<span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode <span class="token operator">!=</span> it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		bool operator<span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode <span class="token operator">==</span> it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>

		Ref operator<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		Ptr operator<span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">&amp;</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		self<span class="token operator">&amp;</span> operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">HashFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">Select1st</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//找到_pnode的位置</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>_pnode <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token comment">//如果到尾没找到，就从头开始找</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_pnode <span class="token operator">==</span> cur<span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			index<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_pnode <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//去找_pnode后面的一个数据</span>
			cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token comment">//如果下标不小于_table的大小时，遍历结束</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					_pnode <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			_pnode <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		self operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> self tmp <span class="token operator">=</span> <span class="token operator">*</span>this<span class="token punctuation">;</span> <span class="token operator">++</span><span class="token operator">*</span>this<span class="token punctuation">;</span> <span class="token keyword">return</span> tmp<span class="token punctuation">;</span> <span class="token punctuation">}</span>

		self<span class="token operator">&amp;</span> operator<span class="token operator">--</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">HashFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">Select1st</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token comment">//找到_pnode的位置</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>_pnode <span class="token operator">!=</span> cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_pnode <span class="token operator">==</span> cur<span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			index<span class="token operator">--</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_pnode <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//去找_pnode前面的一个数据</span>
			cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">--</span><span class="token punctuation">;</span>
				<span class="token comment">//如果index小于0，那么就置空返回。</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					_pnode <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_pht<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_pnode <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		self operator<span class="token operator">--</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> self tmp <span class="token operator">=</span> <span class="token operator">*</span>this<span class="token punctuation">;</span> <span class="token operator">--</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> tmp<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class iterator<span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Reverse_Iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> <span class="token keyword">const</span> iterator const_reverse_iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> typename iterator<span class="token operator">::</span>reference Ref<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> typename iterator<span class="token operator">::</span>pointer Ptr<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Reverse_Iterator self<span class="token punctuation">;</span>
		iterator _it<span class="token punctuation">;</span>

		<span class="token function">Reverse_Iterator</span><span class="token punctuation">(</span>iterator it<span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_it</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>

		Ref operator<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">*</span>_it<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		Ptr operator<span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">&amp;</span><span class="token punctuation">(</span><span class="token operator">*</span>_it<span class="token punctuation">)</span> <span class="token punctuation">;</span> <span class="token punctuation">}</span>
		self<span class="token operator">&amp;</span> operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> _it<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		self operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> self tmp <span class="token operator">=</span> <span class="token operator">*</span>this<span class="token punctuation">;</span> _it<span class="token operator">--</span><span class="token punctuation">;</span> <span class="token keyword">return</span> tmp<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		bool operator <span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _it<span class="token punctuation">.</span>_pnode <span class="token operator">==</span> it<span class="token punctuation">.</span>_it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		bool operator <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _it<span class="token punctuation">.</span>_pnode <span class="token operator">!=</span> it<span class="token punctuation">.</span>_it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	template
		<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span>class V<span class="token punctuation">,</span>class T<span class="token punctuation">,</span>class Pred <span class="token operator">=</span> equal_to<span class="token operator">&lt;</span>K<span class="token operator">&gt;</span>
		<span class="token punctuation">,</span>class Select1st <span class="token operator">=</span> PairSelect1st<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> class HashFunc <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
	class HashTable
		<span class="token comment">//参数有KVT（键对值），仿函数选择键对值的key，仿函数将非整型转换成整型,仿函数进行比较</span>
	<span class="token punctuation">{<!-- --></span>
		template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Ref<span class="token punctuation">,</span> class Ptr<span class="token punctuation">,</span> class Pred<span class="token punctuation">,</span> class Select1st<span class="token punctuation">,</span> class <span class="token operator">&gt;</span>
		friend <span class="token keyword">struct</span> <span class="token class-name">Iterator</span><span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashData<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> HD<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> HT<span class="token punctuation">;</span>
	public<span class="token operator">:</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span><span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> const_iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T <span class="token operator">*</span><span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Reverse_Iterator<span class="token operator">&lt;</span>const_iterator<span class="token operator">&gt;</span> const_reverse_iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Reverse_Iterator<span class="token operator">&lt;</span>iterator<span class="token operator">&gt;</span> reverse_iterator<span class="token punctuation">;</span>

	private<span class="token operator">:</span>
		vector<span class="token operator">&lt;</span>HD<span class="token operator">&gt;</span> _table<span class="token punctuation">;</span>
		<span class="token class-name">size_t</span> _n<span class="token punctuation">;</span><span class="token comment">//记录有效数据的个数</span>
	public<span class="token operator">:</span>
		<span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_n</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>

		<span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token keyword">const</span> HT<span class="token operator">&amp;</span> h<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> e <span class="token operator">:</span> h<span class="token punctuation">.</span>_table<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>_state <span class="token operator">==</span> EXITS<span class="token punctuation">)</span>
				<span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			_n <span class="token operator">=</span> h<span class="token punctuation">.</span>_n<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		HT<span class="token operator">&amp;</span> operator<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> HT<span class="token operator">&amp;</span> h<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> HT <span class="token function">tmp</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span> <span class="token punctuation">}</span>

		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//如果迭代器为空直接返回</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		const_iterator <span class="token function">cbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//如果迭代器为空直接返回</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
				<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">cend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		reverse_iterator <span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//如果迭代器为空直接返回</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">--</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		reverse_iterator <span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">reverse_iterator</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		const_reverse_iterator <span class="token function">crbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//如果迭代器为空直接返回</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>_n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span><span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token class-name">size_t</span> index <span class="token operator">=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
			HD<span class="token operator">*</span> cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_state <span class="token operator">!=</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				index<span class="token operator">--</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span><span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				cur <span class="token operator">=</span> <span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span><span class="token function">const_iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_reverse_iterator <span class="token function">crend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">const_reverse_iterator</span><span class="token punctuation">(</span><span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		<span class="token keyword">void</span> <span class="token function">swap</span><span class="token punctuation">(</span>HT<span class="token operator">&amp;</span> h<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			_table<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>h<span class="token punctuation">.</span>_table<span class="token punctuation">)</span><span class="token punctuation">;</span>
			std<span class="token operator">::</span><span class="token function">swap</span><span class="token punctuation">(</span>_n<span class="token punctuation">,</span> h<span class="token punctuation">.</span>_n<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		V<span class="token operator">&amp;</span> operator<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> key<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">insert</span><span class="token punctuation">(</span>std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">.</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span>bool<span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>	
			<span class="token comment">//仿函数挑选</span>
			Select1st st1<span class="token punctuation">;</span>
			<span class="token comment">//仿函数转化</span>
			HashFunc hf<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				_table<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">53ul</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//先判断是否key重复</span>
			iterator ret <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">.</span>_pnode <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
				<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span>ret<span class="token punctuation">,</span>false<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//负载因子调节表的大小</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>_n  <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0.7</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>	
				HT tmp<span class="token punctuation">;</span>
				tmp<span class="token punctuation">.</span>_table<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token function">GetNextPrime</span><span class="token punctuation">(</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">auto</span> it <span class="token operator">=</span> _table<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> _table<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token operator">-&gt;</span>_state <span class="token operator">==</span> EXITS<span class="token punctuation">)</span>
						tmp<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>it<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
					it<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				_table<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>tmp<span class="token punctuation">.</span>_table<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
	
			<span class="token comment">//插入过程</span>
			<span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//探测的数据</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">hf</span><span class="token punctuation">(</span><span class="token function">st1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//下标计算</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_state <span class="token operator">==</span> EXITS<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>		
				<span class="token comment">//线性探测</span>
				index <span class="token operator">+=</span> i<span class="token punctuation">;</span>
				<span class="token comment">//二次探测</span>
				<span class="token comment">//index += i * i;</span>
				<span class="token comment">//i++;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					index <span class="token operator">%=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_data <span class="token operator">=</span> data<span class="token punctuation">;</span>
			_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_state <span class="token operator">=</span> EXITS<span class="token punctuation">;</span>
			_n<span class="token operator">++</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token operator">&amp;</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">,</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			Select1st slt<span class="token punctuation">;</span>
			HashFunc hf<span class="token punctuation">;</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">hf</span><span class="token punctuation">(</span><span class="token function">slt</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//相等为真,这里需要先判断一次，再进循环</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Pred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">slt</span><span class="token punctuation">(</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">slt</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token comment">//相等为真</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Pred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">slt</span><span class="token punctuation">(</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">slt</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token keyword">if</span> <span class="token punctuation">(</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>_state <span class="token operator">==</span> EMPTY<span class="token punctuation">)</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				index<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token comment">//超过了,就取模</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					index <span class="token operator">%=</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		bool <span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				iterator ret <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">.</span>_pnode <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					ret<span class="token punctuation">.</span>_pnode<span class="token operator">-&gt;</span>_state <span class="token operator">=</span> DELETE<span class="token punctuation">;</span>
					_n<span class="token operator">--</span><span class="token punctuation">;</span>		
					<span class="token keyword">return</span> true<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token comment">//获得素数</span>
		<span class="token class-name">size_t</span> <span class="token function">GetNextPrime</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> prime<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> PRIMECOUNT<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> prime<span class="token punctuation">)</span>
					<span class="token keyword">return</span> primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		bool <span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token class-name">size_t</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _n<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
<p>🍒 🍒 <strong>测试代码</strong>⬇️ ⬇️</p>
<pre><code class="prism language-c"><span class="token comment">//CloseHash(闭散列)</span>
<span class="token keyword">void</span> <span class="token function">Test_KV1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//KV模型：字典</span>
<span class="token punctuation">{<!-- --></span>
	CloseHash<span class="token operator">::</span>HashTable
		<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span><span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span>PairSelect1st<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span> HTs<span class="token punctuation">;</span>

	pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"右边"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"up"</span><span class="token punctuation">,</span> <span class="token string">"向上"</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"down"</span><span class="token punctuation">,</span> <span class="token string">"向下"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span><span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">,</span><span class="token string">"吃"</span><span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"sleep"</span><span class="token punctuation">,</span><span class="token string">"睡觉"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">,</span><span class="token string">"跑"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"jump"</span><span class="token punctuation">,</span><span class="token string">"跳"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> arr<span class="token punctuation">)</span>
		HTs<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//方括号测试</span>
	HTs<span class="token punctuation">[</span><span class="token string">"look"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"看"</span><span class="token punctuation">;</span>

	<span class="token comment">//非const迭代器</span>
	CloseHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span>
		<span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> PairSelect1st<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>iterator it1 <span class="token operator">=</span> HTs<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it1 <span class="token operator">!=</span> HTs<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> it1<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it1<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		it1<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//反向迭代器</span>
	<span class="token keyword">auto</span> rit1 <span class="token operator">=</span> HTs<span class="token punctuation">.</span><span class="token function">rbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>rit1 <span class="token operator">!=</span> HTs<span class="token punctuation">.</span><span class="token function">rend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> rit1<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> rit1<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		rit1<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//删除测试</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"down"</span><span class="token punctuation">,</span> <span class="token string">"向下"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//const迭代器</span>
	CloseHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span>
		<span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> PairSelect1st<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>const_reverse_iterator crit1 <span class="token operator">=</span> HTs<span class="token punctuation">.</span><span class="token function">crbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>crit1 <span class="token operator">!=</span> HTs<span class="token punctuation">.</span><span class="token function">crend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> crit1<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> crit1<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		crit1<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Test_K1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//K模型</span>
<span class="token punctuation">{<!-- --></span>
	CloseHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> KSelect1st<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span>HTs<span class="token punctuation">;</span>
	string arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span> <span class="token punctuation">,</span><span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"右边"</span><span class="token punctuation">,</span><span class="token string">"up"</span><span class="token punctuation">,</span> <span class="token string">"向上"</span>
	<span class="token punctuation">,</span><span class="token string">"down"</span><span class="token punctuation">,</span> <span class="token string">"向下"</span><span class="token punctuation">,</span><span class="token string">"left"</span><span class="token punctuation">,</span><span class="token string">"左边"</span><span class="token punctuation">,</span><span class="token string">"eat"</span><span class="token punctuation">,</span><span class="token string">"吃"</span>
	<span class="token punctuation">,</span><span class="token string">"sleep"</span><span class="token punctuation">,</span><span class="token string">"睡觉"</span><span class="token punctuation">,</span><span class="token string">"run"</span><span class="token punctuation">,</span><span class="token string">"跑"</span><span class="token punctuation">,</span><span class="token string">"jump"</span><span class="token punctuation">,</span><span class="token string">"跳"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> arr<span class="token punctuation">)</span>
		HTs<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//非const迭代器</span>
	CloseHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> 
		equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> KSelect1st<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>iterator it <span class="token operator">=</span> HTs<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> HTs<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		it<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	<span class="token comment">//删除功能</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token string">"up"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token string">"up"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HTs<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token string">"dowm"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token comment">//const迭代器</span>
	<span class="token keyword">auto</span> cit <span class="token operator">=</span> HTs<span class="token punctuation">.</span><span class="token function">cbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cit <span class="token operator">!=</span> HTs<span class="token punctuation">.</span><span class="token function">cend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>cit <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cit<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h1><a id="_764"></a>三、开散列（哈希）的模拟实现</h1>
<p><strong>开散列中许多内容和闭散列一致，这里我们主要谈谈它的区别：</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题一：开散列需不需要状态来进行标识？</strong></font><br/> <strong>开散列不需要标识，插入发生哈希冲突时，直接头插即可。删除结点，如果只有一个结点，直接释放后，将_table中的指针置空。如果有多个结点，释放结点后，直接将前一个结点和后一个结点相连。查找也只需要计算下标后，找到对应的桶，然后进行查找。</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题二：开散列的迭代器如何实现？</strong></font><br/> <strong>和闭散列的迭代器类似，即需要结点指针和哈希表的指针。遍历过程就是一个一个桶进行遍历，桶内遍历直接根据next指针即可。桶间的转换需要借助哈希表的指针。因为我们的哈希表采用的是vector+forward_list，所以不能够重载自减，即无法实现反向迭代器。（单链表不支持，双向链表可以支持）</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题三：迭代器中的自增如何重载？</strong></font><br/> <strong>先计算当前结点指针处于哪一个桶中，然后去桶中遍历，直到找到当前结点指针，然后再判断，如果为尾，那么我们就去找下一个桶，直到找到存储数据的桶，然后将我们的结点指针修改成桶中的第一个指针。</strong></p>
<p><font color="bloue" size="4">🌻 🌻 <strong>问题四：极端情况应该怎么解决？</strong></font><br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/6822fa365fb8467bb5728a24c98967e9.png"/><br/> <strong>极端情况发生的概率极低，而且发生之后即使效率大幅度降低也只是暂时的，只要继续插入数据，效率又会恢复。但是在java中对这种情况还是进行了处理，即每次插入数据之后都会统计链表的长度，如果链表中的结点个数达到了8个，那么就会将单链表转化成红黑树来进行存储。如果发生扩容，即重新映射后，结点的个数小于8，那么又会转化成单链表进行存储。</strong></p>
<p><font color="bloue" size="4"> 🌻 🌻<strong>问题五：开散列的平衡因子该怎么来控制？</strong></font><br/> <strong>在开散列中其平衡因子设置为达到1时，进行扩容。即数据个数等于桶的个数。在开散列中，我们不用去担心数据的插入问题，因为不论多少个数据一定都可以插入，因为数据存储在链表中。但是当链表的长度过长时，其操作效率会大幅度下降，所以我们要控制好扩容时机，不能浪费过多的空间，同时也不能使效率下降的过多。</strong></p>
<p>🍒 🍒 <strong>HashTable（开散列）的完整代码</strong>⬇️ ⬇️</p>
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>

using std<span class="token operator">::</span>cin<span class="token punctuation">;</span>
using std<span class="token operator">::</span>cout<span class="token punctuation">;</span>
using std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
using std<span class="token operator">::</span>vector<span class="token punctuation">;</span>
using std<span class="token operator">::</span>string<span class="token punctuation">;</span>
using std<span class="token operator">::</span>pair<span class="token punctuation">;</span>
using std<span class="token operator">::</span>make_pair<span class="token punctuation">;</span>

<span class="token comment">//选出key</span>
template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">PairSelect1st</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> pair<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token operator">&amp;</span> kv<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> kv<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">KSelect1st</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">const</span> K<span class="token operator">&amp;</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> k<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//转成整型</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">size_t</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> val<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> val<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//模板的特化</span>
template<span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">HashFunc</span><span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">size_t</span> <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s1<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token class-name">size_t</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s1<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			sum <span class="token operator">=</span> sum <span class="token operator">*</span> <span class="token number">131</span> <span class="token operator">+</span> s1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">return</span> sum<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//比较判断</span>
template<span class="token operator">&lt;</span>class K<span class="token operator">&gt;</span>
<span class="token keyword">struct</span> <span class="token class-name">equal_to</span>
<span class="token punctuation">{<!-- --></span>
	bool <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> K<span class="token operator">&amp;</span> lval<span class="token punctuation">,</span> <span class="token keyword">const</span> K<span class="token operator">&amp;</span> rval<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> lval <span class="token operator">==</span> rval<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
template<span class="token operator">&lt;</span><span class="token operator">&gt;</span>
<span class="token comment">//模板特化</span>
<span class="token keyword">struct</span> <span class="token class-name">equal_to</span><span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span>
<span class="token punctuation">{<!-- --></span>
	bool <span class="token function">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s1<span class="token punctuation">,</span> <span class="token keyword">const</span>  std<span class="token operator">::</span>string<span class="token operator">&amp;</span> s2<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> s1 <span class="token operator">==</span> s2<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//素数表</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> PRIMECOUNT <span class="token operator">=</span> <span class="token number">28</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token class-name">size_t</span> primeList<span class="token punctuation">[</span>PRIMECOUNT<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
 <span class="token number">53ul</span><span class="token punctuation">,</span> <span class="token number">97ul</span><span class="token punctuation">,</span> <span class="token number">193ul</span><span class="token punctuation">,</span> <span class="token number">389ul</span><span class="token punctuation">,</span> <span class="token number">769ul</span><span class="token punctuation">,</span>
 <span class="token number">1543ul</span><span class="token punctuation">,</span> <span class="token number">3079ul</span><span class="token punctuation">,</span> <span class="token number">6151ul</span><span class="token punctuation">,</span> <span class="token number">12289ul</span><span class="token punctuation">,</span> <span class="token number">24593ul</span><span class="token punctuation">,</span>
 <span class="token number">49157ul</span><span class="token punctuation">,</span> <span class="token number">98317ul</span><span class="token punctuation">,</span> <span class="token number">196613ul</span><span class="token punctuation">,</span> <span class="token number">393241ul</span><span class="token punctuation">,</span> <span class="token number">786433ul</span><span class="token punctuation">,</span>
 <span class="token number">1572869ul</span><span class="token punctuation">,</span> <span class="token number">3145739ul</span><span class="token punctuation">,</span> <span class="token number">6291469ul</span><span class="token punctuation">,</span> <span class="token number">12582917ul</span><span class="token punctuation">,</span> <span class="token number">25165843ul</span><span class="token punctuation">,</span>
 <span class="token number">50331653ul</span><span class="token punctuation">,</span> <span class="token number">100663319ul</span><span class="token punctuation">,</span> <span class="token number">201326611ul</span><span class="token punctuation">,</span> <span class="token number">402653189ul</span><span class="token punctuation">,</span> <span class="token number">805306457ul</span><span class="token punctuation">,</span>
 <span class="token number">1610612741ul</span><span class="token punctuation">,</span> <span class="token number">3221225473ul</span><span class="token punctuation">,</span> <span class="token number">4294967291ul</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
namespace OpenHash
<span class="token punctuation">{<!-- --></span>
	template<span class="token operator">&lt;</span>class T<span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">HashNode</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> pNode<span class="token punctuation">;</span>

		HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> _next<span class="token punctuation">;</span>
		T _data<span class="token punctuation">;</span>

	public<span class="token operator">:</span>
		<span class="token function">HashNode</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data <span class="token operator">=</span> <span class="token function">T</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token operator">:</span><span class="token function">_next</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">)</span>
			<span class="token punctuation">,</span><span class="token function">_data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Pred<span class="token punctuation">,</span> class Select1st <span class="token punctuation">,</span>class HashFunc<span class="token operator">&gt;</span>
	class HashTable<span class="token punctuation">;</span>

	template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Ref<span class="token punctuation">,</span> class Ptr<span class="token punctuation">,</span> class Pred<span class="token punctuation">,</span> class Select1st<span class="token punctuation">,</span> class HashFunc<span class="token operator">&gt;</span>
	<span class="token keyword">struct</span> <span class="token class-name">Iterator</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashTable<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> HashTable<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> Ref<span class="token punctuation">,</span> Ptr<span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> self<span class="token punctuation">;</span>

		Node<span class="token operator">*</span> _pnode<span class="token punctuation">;</span>
		HashTable<span class="token operator">*</span> _pHT<span class="token punctuation">;</span>

		<span class="token function">Iterator</span><span class="token punctuation">(</span>Node<span class="token operator">*</span> pnode <span class="token operator">=</span> nullptr<span class="token punctuation">,</span> HashTable<span class="token operator">*</span> pHT <span class="token operator">=</span> nullptr<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">_pnode</span><span class="token punctuation">(</span>pnode<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">_pHT</span><span class="token punctuation">(</span>pHT<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token punctuation">}</span>

		Ref operator<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token keyword">const</span> Ref operator<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		Ptr operator<span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">&amp;</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token keyword">const</span> Ptr operator<span class="token operator">-&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token operator">&amp;</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">;</span> <span class="token punctuation">}</span>

		self<span class="token operator">&amp;</span> operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_pnode <span class="token operator">==</span> nullptr<span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>_pnode<span class="token operator">-&gt;</span>_next <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				_pnode <span class="token operator">=</span> _pnode<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
				<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token comment">//_pnode-&gt;next == nullptr我们要去找现在的结点属于哪一个桶</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">HashFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">Select1st</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>_pnode<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _pHT<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> _pHT<span class="token operator">-&gt;</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				Node<span class="token operator">*</span> cur <span class="token operator">=</span> _pHT<span class="token operator">-&gt;</span>_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					_pnode <span class="token operator">=</span> cur<span class="token punctuation">;</span>
					<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			_pnode <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
			<span class="token keyword">return</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		self operator<span class="token operator">++</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			self tmp <span class="token operator">=</span> <span class="token operator">*</span>this<span class="token punctuation">;</span>
			<span class="token operator">++</span><span class="token punctuation">(</span><span class="token operator">*</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> tmp<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		bool operator<span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode <span class="token operator">!=</span> it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		bool operator<span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> self<span class="token operator">&amp;</span> it<span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _pnode <span class="token operator">==</span> it<span class="token punctuation">.</span>_pnode<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	template
		<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Pred <span class="token operator">=</span> equal_to<span class="token operator">&lt;</span>std<span class="token operator">::</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span>
		class Select1st <span class="token operator">=</span> PairSelect1st<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token operator">&gt;</span><span class="token punctuation">,</span> class HashFunc <span class="token operator">=</span> HashFunc<span class="token operator">&lt;</span>K<span class="token operator">&gt;&gt;</span>
	class HashTable
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token operator">*</span> pNode<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> HashNode<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> Node<span class="token punctuation">;</span>

		template<span class="token operator">&lt;</span>class K<span class="token punctuation">,</span> class V<span class="token punctuation">,</span> class T<span class="token punctuation">,</span> class Ref<span class="token punctuation">,</span> class Ptr<span class="token punctuation">,</span> class Pred<span class="token punctuation">,</span> class Select1st<span class="token punctuation">,</span> class HashFunc<span class="token operator">&gt;</span>
		friend  <span class="token keyword">struct</span> <span class="token class-name">Iterator</span><span class="token punctuation">;</span>
	private<span class="token operator">:</span>
		<span class="token comment">//存结点指针</span>
		vector<span class="token operator">&lt;</span>pNode<span class="token operator">&gt;</span> _table<span class="token punctuation">;</span>
		<span class="token class-name">size_t</span> _n<span class="token punctuation">;</span>	
	public<span class="token operator">:</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> <span class="token keyword">const</span> T<span class="token operator">*</span> <span class="token punctuation">,</span>Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> const_iterator<span class="token punctuation">;</span>
		<span class="token keyword">typedef</span> Iterator<span class="token operator">&lt;</span>K<span class="token punctuation">,</span> V<span class="token punctuation">,</span> T<span class="token punctuation">,</span> T<span class="token operator">&amp;</span><span class="token punctuation">,</span> T<span class="token operator">*</span><span class="token punctuation">,</span> Pred<span class="token punctuation">,</span> Select1st<span class="token punctuation">,</span> HashFunc<span class="token operator">&gt;</span> iterator<span class="token punctuation">;</span>

		<span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span><span class="token function">_n</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  <span class="token punctuation">}</span>

		<span class="token keyword">void</span> <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>		
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				pNode prev <span class="token operator">=</span> cur<span class="token punctuation">;</span>
				<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					prev <span class="token operator">=</span> cur<span class="token punctuation">;</span>
					cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
					delete prev<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token operator">~</span><span class="token function">HashTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		iterator <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		const_iterator <span class="token function">cbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		const_iterator <span class="token function">cend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> <span class="token function">const_iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span> this<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

		pair<span class="token operator">&lt;</span>iterator<span class="token punctuation">,</span>bool<span class="token operator">&gt;</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token comment">//如果为空，则开空间</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				_table<span class="token punctuation">.</span><span class="token function">resize</span><span class="token punctuation">(</span><span class="token number">53ul</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//挑选key</span>
			Select1st st1<span class="token punctuation">;</span>
			<span class="token comment">//转换整型</span>
			HashFunc hf<span class="token punctuation">;</span>
			<span class="token comment">//判断是否冗余</span>
			iterator ret <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>ret<span class="token punctuation">.</span>_pnode <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
				<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">,</span> false<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token comment">//判断是否需要扩容</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>_n <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				vector<span class="token operator">&lt;</span>pNode<span class="token operator">&gt;</span> <span class="token function">new_table</span><span class="token punctuation">(</span><span class="token function">GetNextPrime</span><span class="token punctuation">(</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">!=</span> nullptr<span class="token punctuation">)</span>
					<span class="token punctuation">{<!-- --></span>		
						pNode next <span class="token operator">=</span> _table<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
						<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
						<span class="token punctuation">{<!-- --></span>
							next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
							<span class="token class-name">size_t</span> new_index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">hf</span><span class="token punctuation">(</span><span class="token function">st1</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> new_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">//头插</span>
							cur<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> new_table<span class="token punctuation">[</span>new_index<span class="token punctuation">]</span><span class="token punctuation">;</span>
							new_table<span class="token punctuation">[</span>new_index<span class="token punctuation">]</span> <span class="token operator">=</span> cur<span class="token punctuation">;</span>
							cur <span class="token operator">=</span> next<span class="token punctuation">;</span>
						<span class="token punctuation">}</span>
						_table<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token comment">//不推荐，插入的时候重新创建结点，浪费</span>
					<span class="token comment">/*while(e != nullptr)
					{
						tmp.insert(e-&gt;_kv);
						e = e-&gt;_next;
					}*/</span>
				<span class="token punctuation">}</span>
				new_table<span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>_table<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>		

			<span class="token comment">//计算hashbucket的下标</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">hf</span><span class="token punctuation">(</span><span class="token function">st1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			pNode newNode <span class="token operator">=</span> new  <span class="token function">Node</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//头插</span>
			newNode<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
			_n<span class="token operator">++</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> std<span class="token operator">::</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token function">iterator</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">,</span> true<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		iterator <span class="token function">find</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			HashFunc hf<span class="token punctuation">;</span>
			Select1st slt<span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
				<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">hf</span><span class="token punctuation">(</span><span class="token function">slt</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Pred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">slt</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">slt</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>					
				<span class="token keyword">else</span>
					cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> <span class="token function">iterator</span><span class="token punctuation">(</span>nullptr<span class="token punctuation">,</span>this<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		bool <span class="token function">erase</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> data<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>		
			Select1st st1<span class="token punctuation">;</span>
			<span class="token class-name">size_t</span> index <span class="token operator">=</span> <span class="token function">HashFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">st1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> _table<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			pNode cur <span class="token operator">=</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
			pNode prev <span class="token operator">=</span> cur<span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>cur<span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">Pred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">st1</span><span class="token punctuation">(</span>cur<span class="token operator">-&gt;</span>_data<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token function">st1</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					<span class="token comment">//找到了</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>cur <span class="token operator">==</span> _table<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//头结点</span>
					<span class="token punctuation">{<!-- --></span>
						_table<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> nullptr<span class="token punctuation">;</span>
						_n<span class="token operator">--</span><span class="token punctuation">;</span>
						delete cur<span class="token punctuation">;</span>
						<span class="token keyword">return</span> true<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
					<span class="token keyword">else</span>
					<span class="token punctuation">{<!-- --></span>
						prev<span class="token operator">-&gt;</span>_next <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
						_n<span class="token operator">--</span><span class="token punctuation">;</span>
						delete cur<span class="token punctuation">;</span>
						<span class="token keyword">return</span> true<span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span><span class="token comment">//没找到</span>
				<span class="token punctuation">{<!-- --></span>
					prev <span class="token operator">=</span> cur<span class="token punctuation">;</span>
					cur <span class="token operator">=</span> cur<span class="token operator">-&gt;</span>_next<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> false<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">size_t</span> <span class="token function">GetNextPrime</span><span class="token punctuation">(</span><span class="token class-name">size_t</span> prime<span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token class-name">size_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> PRIMECOUNT<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> primeList<span class="token punctuation">[</span>prime<span class="token punctuation">]</span><span class="token punctuation">)</span>
					<span class="token keyword">return</span> primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>

			<span class="token keyword">return</span> primeList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">size_t</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">{<!-- --></span> <span class="token keyword">return</span> _n<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>🍒 🍒 <strong>测试代码</strong>⬇️ ⬇️</p>
<pre><code class="prism language-c"><span class="token comment">//OpenHash(开散列)</span>
<span class="token keyword">void</span> <span class="token function">Test_KV2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//KV模型</span>
<span class="token punctuation">{<!-- --></span>
	OpenHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span> hts<span class="token punctuation">;</span>

	pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;</span> arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> 
		<span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span> <span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"右边"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"up"</span><span class="token punctuation">,</span> <span class="token string">"向上"</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"down"</span><span class="token punctuation">,</span> <span class="token string">"向下"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span><span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"eat"</span><span class="token punctuation">,</span><span class="token string">"吃"</span><span class="token punctuation">)</span>
		<span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"sleep"</span><span class="token punctuation">,</span><span class="token string">"睡觉"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"run"</span><span class="token punctuation">,</span><span class="token string">"跑"</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"jump"</span><span class="token punctuation">,</span><span class="token string">"跳"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> arr<span class="token punctuation">)</span>
		hts<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//非const迭代器</span>
	OpenHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>iterator it <span class="token operator">=</span> hts<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> hts<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> it<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		it<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

	hts<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"sleep"</span><span class="token punctuation">,</span> <span class="token string">"睡觉"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	hts<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	hts<span class="token punctuation">.</span><span class="token function">erase</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token string">"up"</span><span class="token punctuation">,</span> <span class="token string">"向上"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//const类型</span>
	OpenHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>const_iterator cit <span class="token operator">=</span> hts<span class="token punctuation">.</span><span class="token function">cbegin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>cit <span class="token operator">!=</span> hts<span class="token punctuation">.</span><span class="token function">cend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> cit<span class="token operator">-&gt;</span>first <span class="token operator">&lt;&lt;</span> <span class="token string">":"</span> <span class="token operator">&lt;&lt;</span> cit<span class="token operator">-&gt;</span>second <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		cit<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Test_K2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//K模型</span>
<span class="token punctuation">{<!-- --></span>
	OpenHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> KSelect1st<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> HashFunc<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span> hts<span class="token punctuation">;</span>
	string arr<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
	<span class="token string">"left"</span><span class="token punctuation">,</span> <span class="token string">"左边"</span> <span class="token punctuation">,</span><span class="token string">"right"</span><span class="token punctuation">,</span> <span class="token string">"右边"</span><span class="token punctuation">,</span><span class="token string">"up"</span><span class="token punctuation">,</span> <span class="token string">"向上"</span>
	<span class="token punctuation">,</span><span class="token string">"down"</span><span class="token punctuation">,</span> <span class="token string">"向下"</span><span class="token punctuation">,</span><span class="token string">"left"</span><span class="token punctuation">,</span><span class="token string">"左边"</span><span class="token punctuation">,</span><span class="token string">"eat"</span><span class="token punctuation">,</span><span class="token string">"吃"</span>
	<span class="token punctuation">,</span><span class="token string">"sleep"</span><span class="token punctuation">,</span><span class="token string">"睡觉"</span><span class="token punctuation">,</span><span class="token string">"run"</span><span class="token punctuation">,</span><span class="token string">"跑"</span><span class="token punctuation">,</span><span class="token string">"jump"</span><span class="token punctuation">,</span><span class="token string">"跳"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> e <span class="token operator">:</span> arr<span class="token punctuation">)</span>
		hts<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

	OpenHash<span class="token operator">::</span>HashTable<span class="token operator">&lt;</span>string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> string<span class="token punctuation">,</span> equal_to<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> KSelect1st<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">,</span> HashFunc<span class="token operator">&lt;</span>string<span class="token operator">&gt;&gt;</span><span class="token operator">::</span>iterator it <span class="token operator">=</span> hts<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span>it <span class="token operator">!=</span> hts<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token operator">*</span>it <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
		it<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><font color="red" size="4"> 🔍 🔍 <strong>总结：</strong></font><br/> <font color="red" size="4"><strong>空间消耗</strong></font>：<strong>在开散列中虽然增加了链表的链接指针，但是其空间消耗还是要比闭散列小，因为闭散列的平衡因子一定会比开散列的小，闭散列的平衡因子一定小于1，而且越接近1，越容易发生哈希冲突。所以相同数量的数据进行存储时，开散列开辟的空间更小。</strong></p>
<hr/>
<p>😎 😎 <strong>今天的内容到这里就结束了，希望小伙伴们能够有所收获。</strong></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>