<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="_1"></a>前言</h1>
<p><code>提示：这里可以添加本文要记录的大概内容：</code></p>
<p>记录一下今日学习应用uniapp中的vuex</p>
<hr/>
<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p>
<h1><a id="vuex_11"></a>一、vuex是什么？</h1>
<p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。<br/> 按照自己理解来说就是公共数据管理模块。如果应用中数据量比较大的可以应用，不是很大的建议用缓存即可。</p>
<h1><a id="_15"></a>二、使用步骤</h1>
<p>使用准备在项目中新建store目录，在该目录下新建index.js文件</p>
<h2><a id="1_17"></a>1.引入</h2>
<blockquote>
<p>由于uniapp中内置了vuex，只需要规范引入即可：</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js </span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//vue的插件机制</span>

<span class="token comment">//Vuex.Store 构造器选项</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token comment">//存放状态</span>
		<span class="token string">"username"</span><span class="token operator">:</span><span class="token string">"foo"</span><span class="token punctuation">,</span>
		<span class="token string">"age"</span><span class="token operator">:</span><span class="token number">18</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：main.js</span>
import Vue from <span class="token char">'vue'</span>
import App from <span class="token char">'./App'</span>
import store from <span class="token char">'./store'</span>

Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$store <span class="token operator">=</span> store
App<span class="token punctuation">.</span>mpType <span class="token operator">=</span> <span class="token char">'app'</span>
<span class="token comment">// 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> new <span class="token function">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	store<span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>App
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span>$<span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h2><a id="2state_50"></a>2.state属性，主要功能为存储数据</h2>
<blockquote>
<p>第一种方法：通过属性访问，需要在根节点注入 store 。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>用户名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import store from <span class="token char">'@/store/index.js'</span><span class="token punctuation">;</span><span class="token comment">//需要引入store</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>username 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>第二种方法：在组件中使用，通过 this.$store 访问到 state 里的数据。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>用户名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>username 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>进阶方法：通过 mapState 辅助函数获取。当一个组件需要获取多个状态的时候，将这些状态都声明为计算属性会有些重复和冗余。 为了解决这个问题，我们可以使用 mapState 辅助函数 帮助我们生成计算属性，让你少按几次键，（说白了就是简写，不用一个一个去声明了，避免臃肿）</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>用户名：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>年龄：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>age<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span> mapState <span class="token punctuation">}</span> from <span class="token char">'vuex'</span><span class="token comment">//引入mapState</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		computed<span class="token operator">:</span> <span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		    <span class="token comment">// 从state中拿到数据 箭头函数可使代码更简练（就是简写）</span>
		    username<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
			age<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>age<span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span> 
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h2><a id="3_Getter_117"></a>3. Getter属性，主要功能为计算筛选数据</h2>
<p>可以认为是 store 的计算属性，对 state 的加工，是派生出来的数据。 <em><strong>就像 computed 计算属性一样，getter 返回的值会根据它的依赖被缓存起来，且只有当它的依赖值发生改变才会被重新计算。（重点，响应式数据的应用）</strong></em><br/> 可以在多组件中共享 getter 函数，这样做还可以提高运行效率。</p>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js</span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		todos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
				id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
				text<span class="token operator">:</span> <span class="token char">'我是内容一'</span><span class="token punctuation">,</span>
				done<span class="token operator">:</span> true
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{<!-- --></span>
				id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
				text<span class="token operator">:</span> <span class="token char">'我是内容二'</span><span class="token punctuation">,</span>
				done<span class="token operator">:</span> false
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	getters<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		doneTodos<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>todo <span class="token operator">=</span><span class="token operator">&gt;</span> todo<span class="token punctuation">.</span>done<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<blockquote>
<p>Getter属性接收传递参数，主要为:state, 如果在模块中定义则为模块的局部状态。getters, 等同于 store.getters。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js</span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		todos<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
				id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
				text<span class="token operator">:</span> <span class="token char">'我是内容一'</span><span class="token punctuation">,</span>
				done<span class="token operator">:</span> true
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token punctuation">{<!-- --></span>
				id<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
				text<span class="token operator">:</span> <span class="token char">'我是内容二'</span><span class="token punctuation">,</span>
				done<span class="token operator">:</span> false
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	getters<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		doneTodos<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>todo <span class="token operator">=</span><span class="token operator">&gt;</span> todo<span class="token punctuation">.</span>done<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		doneTodosCount<span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> getters<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">//state ：可以访问数据</span>
			<span class="token comment">//getters：访问其他函数，等同于 store.getters</span>
			<span class="token keyword">return</span> getters<span class="token punctuation">.</span>doneTodos<span class="token punctuation">.</span>length
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		getTodoById<span class="token operator">:</span> <span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> state<span class="token punctuation">.</span>todos<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>todo <span class="token operator">=</span><span class="token operator">&gt;</span> todo<span class="token punctuation">.</span>id <span class="token operator">==</span><span class="token operator">=</span> id<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

export <span class="token keyword">default</span> store
</code></pre>
<blockquote>
<p>应用Getter属性方法一：通过属性访问，Getter 会暴露为 store.getters 对象，你可以以属性的形式访问这些值。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>	
		<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in todos"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>done<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import store from <span class="token char">'@/store/index.js'</span><span class="token comment">//需要引入store</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>doneTodos
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>应用Getter属性方法二：通过 this.$store 访问。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>	
		<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in todos"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>done<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>doneTodos
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>应用Getter属性方法三：你也可以通过让 getter 返回一个函数，来实现给 getter 传参。在你对 store 里的数组进行查询时非常有用。<em><strong>注意，getter 在通过方法访问时，每次都会去进行调用，而不会缓存结果。（一次调用，一次请求，没有依赖关系）</strong></em></p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in todos"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span><span class="token function">getTodoById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> 
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>应用Getter属性方法进阶（简写）：通过 mapGetters 辅助函数访问。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>doneTodosCount<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span>mapGetters<span class="token punctuation">}</span> from <span class="token char">'vuex'</span> <span class="token comment">//引入mapGetters</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 使用对象展开运算符将 getter 混入 computed 对象中</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
				<span class="token char">'doneTodos'</span><span class="token punctuation">,</span>
				<span class="token char">'doneTodosCount'</span><span class="token punctuation">,</span>
				<span class="token comment">// ...</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h2><a id="4_MutationVuexstore_275"></a>4. Mutation属性，Vuex中store数据改变的唯一地方（<em><strong>数据必须同步</strong></em>）</h2>
<p>通俗的理解，mutations 里面装着改变数据的方法集合，处理数据逻辑的方法全部放在 mutations 里，使数据和视图分离。Vuex 中的 mutation 非常类似于事件：每个 mutation 都有一个字符串的事件类型 (type) 和 一个 回调函数 (handler)。这个回调函数就是我们实际进行状态更改的地方，并且它会接受 state 作为第一个参数：</p>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js </span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		count<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">add</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 变更状态</span>
			state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">2</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<blockquote>
<p>你不能直接调用一个 mutation handler。这个选项更像是事件注册：“当触发一个类型为 add 的 mutation 时，调用此函数”，要唤醒一个 mutation handler，你需要以相应的 type 调用 store.commit 方法。<br/> 注意：store.commit 调用 mutation（需要在根节点注入 store）。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"addCount"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
import store from <span class="token char">'@/store/index.js'</span>	
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
	computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>mutation中的函数接收参数：你可以向 store.commit 传入额外的参数，即 mutation 的 载荷（payload）：</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js</span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		count<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
	   <span class="token comment">//传递数值</span>
		<span class="token function">add</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			state<span class="token punctuation">.</span>count <span class="token operator">+=</span> n
		<span class="token punctuation">}</span>
		<span class="token comment">//传递对象类型</span>
		<span class="token function">add</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			state<span class="token punctuation">.</span>count <span class="token operator">+=</span> payload<span class="token punctuation">.</span>amount
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"addCount"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import store from <span class="token char">'@/store/index.js'</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		   <span class="token comment">//传递数值</span>
			<span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token comment">//每次累加 5</span>
			<span class="token punctuation">}</span>
			<span class="token comment">//传递对象</span>
			<span class="token function">addCount</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//把载荷和type分开提交</span>
				store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> amount<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>应用Getter属性方法二：通过 this.$store 访问。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>	
		<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item,index) in todos"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>item<span class="token punctuation">.</span>done<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">todos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>doneTodos
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>应用mutation属性方法进阶（简写）：通过 mapMutations辅助函数访问。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span> mapMutations <span class="token punctuation">}</span> from <span class="token char">'vuex'</span><span class="token comment">//引入mapMutations</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char">'add'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//对象展开运算符直接拿到add</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h2><a id="5_Actionaction__mutation_mutation__stateaction__422"></a>5. Action属性：action 提交的是 mutation，通过 mutation 来改变 state,而不是直接变更状态,action 可以包含任意异步操作。</h2>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js </span>
<span class="token comment">// 页面路径：store/index.js</span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		count<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">add</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 变更状态</span>
			state<span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">2</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	actions<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">addCountAction</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<blockquote>
<p>action 函数接受一个与 store 实例具有相同方法和属性的 context 对象，因此你可以调用 context.commit 提交一个 mutation，或者通过 context.state 和 context.getters 来获取 state 和 getters。</p>
</blockquote>
<blockquote>
<p>actions 通过 store.dispatch 方法触发：</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import store from <span class="token char">'@/store/index.js'</span><span class="token punctuation">;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">add</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token char">'addCountAction'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>actions 支持以载荷形式分发:</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js</span>
import Vue from <span class="token char">'vue'</span>
import Vuex from <span class="token char">'vuex'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		count<span class="token operator">:</span> <span class="token number">1</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">add</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			state<span class="token punctuation">.</span>count <span class="token operator">+=</span> payload<span class="token punctuation">.</span>amount
		<span class="token punctuation">}</span> 
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	actions<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">addCountAction</span> <span class="token punctuation">(</span>context <span class="token punctuation">,</span> payload<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">,</span>payload<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
export <span class="token keyword">default</span> store
</code></pre>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import store from <span class="token char">'@/store/index.js'</span><span class="token punctuation">;</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">add</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token comment">// 以载荷形式分发</span>
				store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token char">'addCountAction'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>amount<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
			<span class="token function">add</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token comment">// 以对象形式分发</span>
			store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				type<span class="token operator">:</span> <span class="token char">'addCountAction'</span><span class="token punctuation">,</span>
				amount<span class="token operator">:</span> <span class="token number">5</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>actions的异步：</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：store/index.js</span>
<span class="token comment">//调用mutations的方法来改变数据（同步、异步）</span>
	actions<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//异步调用</span>
			<span class="token function">actionA</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
						<span class="token keyword">return</span> new <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
							<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
								<span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'add'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
								<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
							<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
			<span class="token function">actionB</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> dispatch<span class="token punctuation">,</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			      <span class="token keyword">return</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token char">'actionA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'someOtherMutation'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span>
			async <span class="token function">actionA</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'gotData'</span><span class="token punctuation">,</span> await <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		async <span class="token function">actionB</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> dispatch<span class="token punctuation">,</span> commit <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
	        await <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token char">'actionA'</span><span class="token punctuation">)</span> <span class="token comment">// 等待 actionA 完成</span>
			<span class="token function">commit</span><span class="token punctuation">(</span><span class="token char">'gotOtherData'</span><span class="token punctuation">,</span> await <span class="token function">getOtherData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>应用Actions属性方法进阶（简写）：通过 mapActions辅助函数访问。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>数量：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"addCountAction"</span><span class="token operator">&gt;</span>增加<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span> mapActions <span class="token punctuation">}</span> from <span class="token char">'vuex'</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
				<span class="token keyword">return</span> this<span class="token punctuation">.</span>$store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>count
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
			    <span class="token char">'addCountAction'</span><span class="token punctuation">,</span> 
				<span class="token comment">// 将 `this.addCountAction()` 映射为 `this.$store.dispatch('addCountAction')`</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h2><a id="6_Modulestore_Vuex__store_module_statemutationactiongetter_587"></a>6. Module结构。由于使用单一状态树，应用的所有状态会集中到一个比较大的对象。当应用变得非常复杂时，store 对象就有可能变得相当臃肿。为了解决以上问题，Vuex 允许我们将 store 分割成模块（module）。每个模块拥有自己的 state、mutation、action、getter、甚至是嵌套子模块——从上至下进行同样方式的分割：</h2>
<blockquote>
<p>1.在 store 文件夹下新建 modules 文件夹，并在下面新建 moduleA.js 和 moduleB.js 文件用来存放 vuex 的 modules 模块。</p>
</blockquote>
<pre><code class="prism language-c">├── components             # 组件文件夹
    └── myButton 
        └── myButton<span class="token punctuation">.</span>vue   # myButton组件
├── pages
    └── index 
	    └── index<span class="token punctuation">.</span>vue      # index页面
├── <span class="token keyword">static</span>
├── store
    ├── index<span class="token punctuation">.</span>js          # 我们组装模块并导出 store 的地方
    └── modules           # 模块文件夹
        ├── moduleA<span class="token punctuation">.</span>js    # 模块moduleA
        └── moduleB<span class="token punctuation">.</span>js    # 模块moduleB
├── App<span class="token punctuation">.</span>vue
├── main<span class="token punctuation">.</span>js
├── manifest<span class="token punctuation">.</span>json
├── pages<span class="token punctuation">.</span>json
└── uni<span class="token punctuation">.</span>scss
</code></pre>
<blockquote>
<p>2.在 main.js 文件中引入 store。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 页面路径：main.js </span>
	import Vue from <span class="token char">'vue'</span>
	import App from <span class="token char">'./App'</span>
	import store from <span class="token char">'./store'</span>

	Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$store <span class="token operator">=</span> store

	<span class="token comment">// 把 store 对象提供给 “store” 选项，这可以把 store 的实例注入所有的子组件</span>
	<span class="token keyword">const</span> app <span class="token operator">=</span> new <span class="token function">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		store<span class="token punctuation">,</span>
		<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>App
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	app<span class="token punctuation">.</span>$<span class="token function">mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<p>3.在项目根目录下，新建 store 文件夹，并在下面新建 index.js 文件，作为模块入口，引入各子模块。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">//  页面路径：store/index.js</span>
	import Vue from <span class="token char">'vue'</span>
	import Vuex from <span class="token char">'vuex'</span>

	import moduleA from <span class="token char">'@/store/modules/moduleA'</span>
	import moduleB from <span class="token char">'@/store/modules/moduleB'</span>

	Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>
	export <span class="token keyword">default</span> new Vuex<span class="token punctuation">.</span><span class="token function">Store</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
		modules<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
			moduleA<span class="token punctuation">,</span>moduleB
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<p>4.子模块 moduleA 页面内容。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 子模块moduleA路径：store/modules/moduleA.js </span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		text<span class="token operator">:</span><span class="token string">"我是moduleA模块下state.text的值"</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	getters<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	actions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> 
		
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>5.子模块 moduleB 页面内容。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token comment">// 子模块moduleB路径：store/modules/moduleB.js</span>
export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
	state<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		timestamp<span class="token operator">:</span> <span class="token number">1608820295</span><span class="token comment">//初始时间戳</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	getters<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">timeString</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token comment">//时间戳转换后的时间</span>
			var date <span class="token operator">=</span> new <span class="token function">Date</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
			var year <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			var mon  <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
			var day  <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			var hours <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			var minu <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			var sec <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			var trMon <span class="token operator">=</span> mon<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token char">'0'</span><span class="token operator">+</span>mon <span class="token operator">:</span> mon
			var trDay <span class="token operator">=</span> day<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token operator">?</span> <span class="token char">'0'</span><span class="token operator">+</span>day <span class="token operator">:</span> day
			<span class="token keyword">return</span> year<span class="token operator">+</span><span class="token char">'-'</span><span class="token operator">+</span>trMon<span class="token operator">+</span><span class="token char">'-'</span><span class="token operator">+</span>trDay<span class="token operator">+</span><span class="token string">" "</span><span class="token operator">+</span>hours<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>minu<span class="token operator">+</span><span class="token string">":"</span><span class="token operator">+</span>sec<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	mutations<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">updateTime</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span><span class="token comment">//更新当前时间戳</span>
			state<span class="token punctuation">.</span>timestamp <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	actions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>6.在页面中引用组件 myButton ，并通过 mapState 读取 state 中的初始数据。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 页面路径：pages<span class="token operator">/</span>index<span class="token operator">/</span>index<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view class<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>时间戳：<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>timestamp<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>当前时间<span class="token operator">:</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>timeString<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>myButton<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>myButton<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span>mapState<span class="token punctuation">,</span>mapGetters<span class="token punctuation">}</span> from <span class="token char">'vuex'</span> 
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		computed<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
				text<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>moduleA<span class="token punctuation">.</span>text<span class="token punctuation">,</span>
				timestamp<span class="token operator">:</span> state <span class="token operator">=</span><span class="token operator">&gt;</span> state<span class="token punctuation">.</span>moduleB<span class="token punctuation">.</span>timestamp
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
				<span class="token char">'timeString'</span>
			<span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<blockquote>
<p>7.在组件 myButton中，通过 mutations 操作刷新当前时间。</p>
</blockquote>
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 组件路径：components<span class="token operator">/</span>myButton<span class="token operator">/</span>myButton<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">"default"</span> @click<span class="token operator">=</span><span class="token string">"updateTime"</span><span class="token operator">&gt;</span>刷新当前时间<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
	import <span class="token punctuation">{<!-- --></span>mapMutations<span class="token punctuation">}</span> from <span class="token char">'vuex'</span>
	export <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
		<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		methods<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token char">'updateTime'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre>
<h1><a id="_735"></a>总结</h1>
<p>vue是单向数据流，子组件不能直接修改父组件的数据，而通过vuex状态管理实现：把组件的共享状态抽取出来，以一个全局单例模式管理。在这种模式下，我们的组件树构成了一个巨大的“视图”，不管在树的哪个位置，任何组件都能获取状态或者触发行为！<br/> vuex的整体结构并不复杂，知识规范比较繁琐，自己多试几遍就好了。</p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>