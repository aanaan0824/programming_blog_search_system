<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p>首先Modbus slave配置如下：</p>
<p><img alt="" height="507" src="image\c064a8920ed841d997a6cab4d7c5e5f4.png" width="483"/></p>
<p> </p>
<p><img alt="" height="580" src="image\35598cea53b94ea291ff0790c8d4c6f6.png" width="460"/><img alt="" height="505" src="image\1b7bc3b080bc4f6d90109b4dc1aaa777.png" width="603"/></p>
<p> </p>
<p> </p>
<p>代码如下：</p>
<p>using System;<br/> using System.Collections.Generic;<br/> using System.Linq;<br/> using System.Net;<br/> using System.Net.Sockets;<br/> using System.Text;<br/> using System.Threading.Tasks;<br/> using Modbus.Device;</p>
<p>namespace ConsoleApp1<br/> {<!-- --><br/>     class Program<br/>     {<!-- --><br/>         static void Main(string[] args)<br/>         {<!-- --><br/>             IPAddress address = new IPAddress(new byte[] { 127, 0, 0, 1 });<br/>             using (TcpClient clinet = new TcpClient(address.ToString(), 502))<br/>             {<!-- --><br/>                 clinet.SendTimeout = 1;<br/>                 ModbusIpMaster master = ModbusIpMaster.CreateIp(clinet);</p>
<p>                ushort startAddress = 0;<br/>                 ushort numInputs = 10;<br/>                 ushort[] inputs = master.ReadInputRegisters(1, startAddress, numInputs);</p>
<p>                for (int i = 0; i &lt; numInputs; i++)<br/>                     Console.WriteLine($"Registers {(startAddress + i)}={(inputs[i])}");</p>
<p><br/>             }<br/>         }<br/>     }<br/> }<br/>  </p>
<p></p>
<p>运行结果如下：</p>
<p><img alt="" height="280" src="image\345f35154a8e4fe18c4a9a7b0b42bafd.png" width="324"/></p>
<p> </p>
<p></p>
<p></p>
</div>
</div>