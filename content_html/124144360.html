<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<h1><a id="Composer__1"></a>Composer 安装、换源及测试</h1>
<hr/>
<blockquote>
<p>写作时间：2022-04-13 作者:田辛</p>
</blockquote>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><a href="#Composer__1">Composer 安装、换源及测试</a></li><li><ul><li><a href="#1_Composer_7">1 下载Composer</a></li><li><a href="#2__19">2 安装步骤</a></li><li><ul><li><a href="#21__21">2.1 为所有用户安装还是仅为自己安装</a></li><li><a href="#22__24">2.2 不安装开发模式</a></li><li><a href="#23_PHP_27">2.3 指定PHP版本</a></li><li><a href="#24__32">2.4 设置代理服务器</a></li><li><a href="#25__37">2.5 确认要做的事情</a></li><li><a href="#26__45">2.6 安装中</a></li><li><a href="#27__48">2.7 提示页面</a></li><li><a href="#28__53">2.8 完成页面</a></li></ul>
</li><li><a href="#3__56">3 测试成果</a></li><li><a href="#4__60">4 检查并加速</a></li><li><ul><li><a href="#41_Composer_62">4.1 查看现有的Composer设定</a></li><li><a href="#42__130">4.2 升级到最新版本</a></li><li><a href="#43__139">4.3 清除缓存</a></li><li><a href="#44__152">4.4 安装源管理器</a></li></ul>
</li><li><a href="#5_ThinkPHP50_178">5 安装ThinkPHP5.0框架测试</a></li><li><ul><li><a href="#51__180">5.1 命令</a></li><li><a href="#52__185">5.2 执行</a></li></ul>
</li><li><a href="#6__237">6 未解决事项</a></li></ul>
</li></ul>
</div>
<p></p>
<h2><a id="1_Composer_7"></a>1 下载Composer</h2>
<blockquote>
<p>官方地址: <a href="https://getcomposer.org/">Composer (getcomposer.org)</a>)</p>
</blockquote>
<img alt="image-20220413094440451" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413094440451.png"/>
<p>点击“Download”</p>
<img alt="image-20220413094709679" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413094709679.png"/>
<h2><a id="2__19"></a>2 安装步骤</h2>
<h3><a id="21__21"></a>2.1 为所有用户安装还是仅为自己安装</h3>
<img alt="image-20220413095047077" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413095047077.png"/>
<h3><a id="22__24"></a>2.2 不安装开发模式</h3>
<img alt="image-20220413095102031" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413095102031.png"/>
<h3><a id="23_PHP_27"></a>2.3 指定PHP版本</h3>
<blockquote>
<p>我这里用的7.4.3，之前用的7.3.4在下一步总是报错</p>
</blockquote>
<img alt="image-20220413102848772" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102848772.png"/>
<h3><a id="24__32"></a>2.4 设置代理服务器</h3>
<blockquote>
<p>不设置</p>
</blockquote>
<img alt="image-20220413102859324" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102859324.png"/>
<h3><a id="25__37"></a>2.5 确认要做的事情</h3>
<blockquote>
<p>PHP命令版本<br/> 不安装任何代理设置<br/> 增加php7.4.3的全局变量<br/> 删除php7.3.4的全局变量（本地情况，如果是干净系统应该没有这个内容）</p>
</blockquote>
<img alt="image-20220413102915286" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102915286.png"/>
<h3><a id="26__45"></a>2.6 安装中</h3>
<img alt="image-20220413102927507" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102927507.png"/>
<h3><a id="27__48"></a>2.7 提示页面</h3>
<blockquote>
<p>命令行窗口(cmd)等只有重新打开才会加载新的path系统设置</p>
</blockquote>
<img alt="image-20220413102939035" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102939035.png"/>
<h3><a id="28__53"></a>2.8 完成页面</h3>
<img alt="image-20220413102954371" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413102954371.png"/>
<h2><a id="3__56"></a>3 测试成果</h2>
<img alt="image-20220413103952176" src="https://tdouya-workimg-tianxin.oss-cn-beijing.aliyuncs.com/workimages/image-20220413103952176.png"/>
<h2><a id="4__60"></a>4 检查并加速</h2>
<h3><a id="41_Composer_62"></a>4.1 查看现有的Composer设定</h3>
<pre><code class="prism language-powershell">C:\Users\mike_&gt;composer config <span class="token operator">-</span><span class="token function">gl</span>
<span class="token namespace">[repositories.packagist.org.type]</span> composer
<span class="token namespace">[repositories.packagist.org.url]</span> https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/composer/
<span class="token namespace">[process-timeout]</span> 300
<span class="token namespace">[use-include-path]</span> false
<span class="token namespace">[allow-plugins]</span>
<span class="token namespace">[use-parent-dir]</span> prompt
<span class="token namespace">[preferred-install]</span> dist
<span class="token namespace">[notify-on-install]</span> true
<span class="token namespace">[github-protocols]</span> <span class="token namespace">[https, ssh]</span>
<span class="token namespace">[gitlab-protocol]</span>
<span class="token namespace">[vendor-dir]</span> vendor <span class="token punctuation">(</span>C:\Users\mike_/vendor<span class="token punctuation">)</span>
<span class="token namespace">[bin-dir]</span> <span class="token punctuation">{<!-- --></span><span class="token variable">$vendor</span><span class="token operator">-</span><span class="token function">dir</span><span class="token punctuation">}</span><span class="token operator">/</span>bin <span class="token punctuation">(</span>C:\Users\mike_/vendor/bin<span class="token punctuation">)</span>
<span class="token namespace">[cache-dir]</span> C:<span class="token operator">/</span>Users/mike_/AppData/Local/Composer
<span class="token namespace">[data-dir]</span> C:<span class="token operator">/</span>Users/mike_/AppData/Roaming/Composer
<span class="token namespace">[cache-files-dir]</span> <span class="token punctuation">{<!-- --></span><span class="token variable">$cache</span><span class="token operator">-</span><span class="token function">dir</span><span class="token punctuation">}</span><span class="token operator">/</span>files <span class="token punctuation">(</span>C:<span class="token operator">/</span>Users/mike_/AppData/Local/Composer/files<span class="token punctuation">)</span>
<span class="token namespace">[cache-repo-dir]</span> <span class="token punctuation">{<!-- --></span><span class="token variable">$cache</span><span class="token operator">-</span><span class="token function">dir</span><span class="token punctuation">}</span><span class="token operator">/</span>repo <span class="token punctuation">(</span>C:<span class="token operator">/</span>Users/mike_/AppData/Local/Composer/repo<span class="token punctuation">)</span>
<span class="token namespace">[cache-vcs-dir]</span> <span class="token punctuation">{<!-- --></span><span class="token variable">$cache</span><span class="token operator">-</span><span class="token function">dir</span><span class="token punctuation">}</span><span class="token operator">/</span>vcs <span class="token punctuation">(</span>C:<span class="token operator">/</span>Users/mike_/AppData/Local/Composer/vcs<span class="token punctuation">)</span>
<span class="token namespace">[cache-ttl]</span> 15552000
<span class="token namespace">[cache-files-ttl]</span> 15552000
<span class="token namespace">[cache-files-maxsize]</span> 300MiB <span class="token punctuation">(</span>314572800<span class="token punctuation">)</span>
<span class="token namespace">[cache-read-only]</span> false
<span class="token namespace">[bin-compat]</span> auto
<span class="token namespace">[discard-changes]</span> false
<span class="token namespace">[autoloader-suffix]</span>
<span class="token namespace">[sort-packages]</span> false
<span class="token namespace">[optimize-autoloader]</span> false
<span class="token namespace">[classmap-authoritative]</span> false
<span class="token namespace">[apcu-autoloader]</span> false
<span class="token namespace">[prepend-autoloader]</span> true
<span class="token namespace">[github-domains]</span> <span class="token namespace">[github.com]</span>
<span class="token namespace">[bitbucket-expose-hostname]</span> true
<span class="token namespace">[disable-tls]</span> false
<span class="token namespace">[secure-http]</span> true
<span class="token namespace">[cafile]</span>
<span class="token namespace">[capath]</span>
<span class="token namespace">[github-expose-hostname]</span> true
<span class="token namespace">[gitlab-domains]</span> <span class="token namespace">[gitlab.com]</span>
<span class="token namespace">[store-auths]</span> prompt
<span class="token namespace">[archive-format]</span> tar
<span class="token namespace">[archive-dir]</span> <span class="token punctuation">.</span>
<span class="token namespace">[htaccess-protect]</span> true
<span class="token namespace">[use-github-api]</span> true
<span class="token namespace">[lock]</span> true
<span class="token namespace">[platform-check]</span> php-only
<span class="token namespace">[home]</span> C:<span class="token operator">/</span>Users/mike_/AppData/Roaming/Composer

C:\Users\mike_&gt;
C:\Users\mike_&gt;
</code></pre>
<blockquote>
<p>根据上边执行块第3行，目前的Composer源已经是国内的阿里云了。 可以不修改。 如果安装的时候，不是阿里云/腾讯云的仓库地址，可以通过如下命令执行：</p>
<p><strong>阿里云</strong></p>
<pre><code>composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/
</code></pre>
<p><strong>腾讯云</strong></p>
<pre><code>composer config -g repo.packagist composer https://mirrors.cloud.tencent.com/composer/
</code></pre>
</blockquote>
<h3><a id="42__130"></a>4.2 升级到最新版本</h3>
<pre><code class="prism language-powershell">C:\Users\mike_&gt;composer self-update
You are already <span class="token keyword">using</span> the latest available Composer version 2<span class="token punctuation">.</span>3<span class="token punctuation">.</span>4 <span class="token punctuation">(</span>stable channel<span class="token punctuation">)</span><span class="token punctuation">.</span>

C:\Users\mike_&gt;
</code></pre>
<h3><a id="43__139"></a>4.3 清除缓存</h3>
<pre><code class="prism language-powershell">C:\Users\mike_&gt;composer clear
Clearing cache <span class="token punctuation">(</span>cache-vcs-<span class="token function">dir</span><span class="token punctuation">)</span>: C:\Users\mike_\AppData\Local\Composer\vcs
Clearing cache <span class="token punctuation">(</span>cache-repo-<span class="token function">dir</span><span class="token punctuation">)</span>: C:\Users\mike_\AppData\Local\Composer\repo
Clearing cache <span class="token punctuation">(</span>cache-files-<span class="token function">dir</span><span class="token punctuation">)</span>: C:\Users\mike_\AppData\Local\Composer\files
Clearing cache <span class="token punctuation">(</span>cache-<span class="token function">dir</span><span class="token punctuation">)</span>: C:\Users\mike_\AppData\Local\Composer
All caches cleared<span class="token punctuation">.</span>

C:\Users\mike_&gt;
</code></pre>
<h3><a id="44__152"></a>4.4 安装源管理器</h3>
<pre><code class="prism language-powershell">C:\Users\mike_&gt;composer global require slince/composer-registry-manager
Changed current directory to C:<span class="token operator">/</span>Users/mike_/AppData/Roaming/Composer
<span class="token keyword">Using</span> version ^2<span class="token punctuation">.</span>3 <span class="token keyword">for</span> slince/composer-registry-manager
<span class="token punctuation">.</span><span class="token operator">/</span>composer<span class="token punctuation">.</span>json has been created
Running composer update slince/composer-registry-manager
Loading composer repositories with package information
Updating dependencies
Lock file operations: 1 install<span class="token punctuation">,</span> 0 updates<span class="token punctuation">,</span> 0 removals
  <span class="token operator">-</span> Locking slince/composer-registry-manager <span class="token punctuation">(</span>2<span class="token punctuation">.</span>3<span class="token punctuation">.</span>1<span class="token punctuation">)</span>
Writing lock file
Installing dependencies <span class="token keyword">from</span> lock file <span class="token punctuation">(</span>including require-dev<span class="token punctuation">)</span>
Package operations: 1 install<span class="token punctuation">,</span> 0 updates<span class="token punctuation">,</span> 0 removals
  <span class="token operator">-</span> Downloading slince/composer-registry-manager <span class="token punctuation">(</span>2<span class="token punctuation">.</span>3<span class="token punctuation">.</span>1<span class="token punctuation">)</span>
  <span class="token operator">-</span> Installing slince/composer-registry-manager <span class="token punctuation">(</span>2<span class="token punctuation">.</span>3<span class="token punctuation">.</span>1<span class="token punctuation">)</span>: Extracting archive
slince/composer-registry-manager contains a Composer plugin which is currently not in your allow-plugins config<span class="token punctuation">.</span> See https:<span class="token operator">/</span><span class="token operator">/</span>getcomposer<span class="token punctuation">.</span>org/allow-plugins
<span class="token keyword">Do</span> you trust <span class="token string">"slince/composer-registry-manager"</span> to execute code and wish to enable it now? <span class="token punctuation">(</span>writes <span class="token string">"allow-plugins"</span> to composer<span class="token punctuation">.</span>json<span class="token punctuation">)</span> <span class="token namespace">[y,n,d,?]</span> y
Generating autoload files
1 package you are <span class="token keyword">using</span> is looking <span class="token keyword">for</span> funding<span class="token punctuation">.</span>
Use the `composer fund` command to find out more!

C:\Users\mike_&gt;
</code></pre>
<h2><a id="5_ThinkPHP50_178"></a>5 安装ThinkPHP5.0框架测试</h2>
<h3><a id="51__180"></a>5.1 命令</h3>
<pre><code>composer create-project topthink/think=5.0.* 04-tp50.thinkphp.co.jp  --prefer-dist
</code></pre>
<h3><a id="52__185"></a>5.2 执行</h3>
<pre><code class="prism language-powershell">D:\S10-PHPStudy&gt;composer create-project topthink/think=5<span class="token punctuation">.</span>0<span class="token punctuation">.</span><span class="token operator">*</span> 04-tp50<span class="token punctuation">.</span>thinkphp<span class="token punctuation">.</span>co<span class="token punctuation">.</span>jp  <span class="token operator">--</span>prefer-dist
Creating a <span class="token string">"topthink/think=5.0.*"</span> project at <span class="token string">"./04-tp50.thinkphp.co.jp"</span>
Installing topthink/think <span class="token punctuation">(</span>v5<span class="token punctuation">.</span>0<span class="token punctuation">.</span>24<span class="token punctuation">)</span>
  <span class="token operator">-</span> Installing topthink/think <span class="token punctuation">(</span>v5<span class="token punctuation">.</span>0<span class="token punctuation">.</span>24<span class="token punctuation">)</span>: Extracting archive
Created project in D:\S10-PHPStudy\04-tp50<span class="token punctuation">.</span>thinkphp<span class="token punctuation">.</span>co<span class="token punctuation">.</span>jp
Loading composer repositories with package information
Updating dependencies
Lock file operations: 2 installs<span class="token punctuation">,</span> 0 updates<span class="token punctuation">,</span> 0 removals
  <span class="token operator">-</span> Locking topthink/framework <span class="token punctuation">(</span>v5<span class="token punctuation">.</span>0<span class="token punctuation">.</span>24<span class="token punctuation">)</span>
  <span class="token operator">-</span> Locking topthink/think-installer <span class="token punctuation">(</span>v1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>14<span class="token punctuation">)</span>
Writing lock file
Installing dependencies <span class="token keyword">from</span> lock file <span class="token punctuation">(</span>including require-dev<span class="token punctuation">)</span>
Package operations: 2 installs<span class="token punctuation">,</span> 0 updates<span class="token punctuation">,</span> 0 removals
  <span class="token operator">-</span> Installing topthink/think-installer <span class="token punctuation">(</span>v1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>14<span class="token punctuation">)</span>: Extracting archive
topthink/think-installer contains a Composer plugin which is currently not in your allow-plugins config<span class="token punctuation">.</span> See https:<span class="token operator">/</span><span class="token operator">/</span>getcomposer<span class="token punctuation">.</span>org/allow-plugins
<span class="token keyword">Do</span> you trust <span class="token string">"topthink/think-installer"</span> to execute code and wish to enable it now? <span class="token punctuation">(</span>writes <span class="token string">"allow-plugins"</span> to composer<span class="token punctuation">.</span>json<span class="token punctuation">)</span> <span class="token namespace">[y,n,d,?]</span> y
  <span class="token operator">-</span> Installing topthink/framework <span class="token punctuation">(</span>v5<span class="token punctuation">.</span>0<span class="token punctuation">.</span>24<span class="token punctuation">)</span>: Extracting archive
Generating autoload files

D:\S10-PHPStudy&gt;cd 04*

D:\S10-PHPStudy\04-tp50<span class="token punctuation">.</span>thinkphp<span class="token punctuation">.</span>co<span class="token punctuation">.</span>jp&gt;<span class="token function">dir</span>
 驱动器 D 中的卷是 <span class="token keyword">Data</span>
 卷的序列号是 5A84-487D

 D:\S10-PHPStudy\04-tp50<span class="token punctuation">.</span>thinkphp<span class="token punctuation">.</span>co<span class="token punctuation">.</span>jp 的目录

2022/04/13  11:31    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span>
2022/04/13  11:31    &lt;<span class="token function">DIR</span>&gt;          <span class="token punctuation">.</span><span class="token punctuation">.</span>
2019/01/11  16:11                35 <span class="token punctuation">.</span>gitignore
2019/01/11  16:11             2<span class="token punctuation">,</span>038 <span class="token punctuation">.</span>travis<span class="token punctuation">.</span>yml
2019/01/11  16:11    &lt;<span class="token function">DIR</span>&gt;          application
2019/01/11  16:11             1<span class="token punctuation">,</span>099 build<span class="token punctuation">.</span>php
2019/01/11  16:11            48<span class="token punctuation">,</span>648 CHANGELOG<span class="token punctuation">.</span>md
2022/04/13  11:31               743 composer<span class="token punctuation">.</span>json
2022/04/13  11:31             4<span class="token punctuation">,</span>703 composer<span class="token punctuation">.</span>lock
2019/01/11  16:11    &lt;<span class="token function">DIR</span>&gt;          extend
2019/01/11  16:11             1<span class="token punctuation">,</span>822 LICENSE<span class="token punctuation">.</span>txt
2019/01/11  16:11    &lt;<span class="token function">DIR</span>&gt;          public
2019/01/11  16:11             5<span class="token punctuation">,</span>779 README<span class="token punctuation">.</span>md
2019/01/11  16:11    &lt;<span class="token function">DIR</span>&gt;          runtime
2019/01/11  16:11               753 think
2022/04/13  11:31    &lt;<span class="token function">DIR</span>&gt;          thinkphp
2022/04/13  11:31    &lt;<span class="token function">DIR</span>&gt;          vendor
               9 个文件         65<span class="token punctuation">,</span>620 字节
               8 个目录 269<span class="token punctuation">,</span>341<span class="token punctuation">,</span>859<span class="token punctuation">,</span>840 可用字节

D:\S10-PHPStudy\04-tp50<span class="token punctuation">.</span>thinkphp<span class="token punctuation">.</span>co<span class="token punctuation">.</span>jp&gt;
</code></pre>
<h2><a id="6__237"></a>6 未解决事项</h2>
<ul><li>[[Composer多线程扩展]]未安装成功。</li></ul>
<blockquote>
<p>composer glob</p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>