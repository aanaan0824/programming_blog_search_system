<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-dracula" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><ul><li><ul><li><a href="#_1">一、简单绘图</a></li><li><a href="#_75">二、绘制折线图</a></li><li><ul><li><a href="#_80">实例</a></li><li><ul><li><a href="#DialogPen_85">自定义DialogPen类</a></li><li><a href="#mainwindow_199">mainwindow类</a></li><li><a href="#_809">效果演示</a></li></ul>
</li></ul>
</li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<h3><a id="_1"></a>一、简单绘图</h3>
<p>Qt Charts基于Qt的Graphics View架构，其核心组件是<strong>QChartView</strong> 和 <strong>QChart</strong></p>
<ul><li>QChartView是显示图标的视图，基类为QGraphicsView</li><li>QChart的基类是QGraphicsltem</li></ul>
<p>类的继承关系：<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/413777e1298148cf9fb3f736924ace81.png"/><br/> 创建项目：<code>.pro</code>文件中添加：<code>QT += charts</code><br/> 代码如下：其他文件未修改，修改代码只在mainwindow.cpp文件中进行。<br/> mainwindow.cpp</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QChartView&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLineSeries&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QValueAxis&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtMath&gt;</span></span>
QT_CHARTS_USE_NAMESPACE

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>MainWindow<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setWindowTitle</span><span class="token punctuation">(</span><span class="token string">"QChart简单绘图"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//创建图表框架</span>
    QChartView<span class="token operator">*</span> cview <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChartView</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QChart<span class="token operator">*</span> chart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"简单函数曲线"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    cview<span class="token operator">-&gt;</span><span class="token function">setChart</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setCentralWidget</span><span class="token punctuation">(</span>cview<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//创建折现序列</span>
    QLineSeries<span class="token operator">*</span> seriesS <span class="token operator">=</span> <span class="token keyword">new</span> QLineSeries<span class="token punctuation">;</span>
    QLineSeries<span class="token operator">*</span> seriesC <span class="token operator">=</span> <span class="token keyword">new</span> QLineSeries<span class="token punctuation">;</span>
    seriesS<span class="token operator">-&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Sinθ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    seriesC<span class="token operator">-&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Cosθ"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>seriesS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>seriesC<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//添加数据绘制</span>
    qreal y0<span class="token punctuation">,</span>y1<span class="token punctuation">,</span>t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>intv<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
    size_t count<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>size_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>count<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        y0 <span class="token operator">=</span> <span class="token function">qSin</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        y1 <span class="token operator">=</span> <span class="token function">qCos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        seriesS<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>y0<span class="token punctuation">)</span><span class="token punctuation">;</span>
        seriesC<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t <span class="token operator">+=</span> intv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//创建坐标轴</span>
    QValueAxis<span class="token operator">*</span> axisX <span class="token operator">=</span> <span class="token keyword">new</span> QValueAxis<span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisX</span><span class="token punctuation">(</span>axisX<span class="token punctuation">,</span>seriesS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisX</span><span class="token punctuation">(</span>axisX<span class="token punctuation">,</span>seriesC<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QValueAxis<span class="token operator">*</span> axisY <span class="token operator">=</span> <span class="token keyword">new</span> QValueAxis<span class="token punctuation">;</span>
    axisY<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisY</span><span class="token punctuation">(</span>axisY<span class="token punctuation">,</span>seriesS<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisY</span><span class="token punctuation">(</span>axisY<span class="token punctuation">,</span>seriesC<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/bba7fb67be7548418f38a3c417c4e5f0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_18,color_FFFFFF,t_70,g_se,x_16"/></p>
<h3><a id="_75"></a>二、绘制折线图</h3>
<p>数据序列类继承关系<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/09961556f3e4466aaa6b62af1f43f06c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> 坐标类继承关系<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/e86c6bc877094a9ba23a9dd72f37998d.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h4><a id="_80"></a>实例</h4>
<p>初步UI设计<br/> <img alt="1" src="https://img-blog.csdnimg.cn/6ff4a930b4a341259861a71a11046d22.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="2" src="https://img-blog.csdnimg.cn/365ab9c9ada04d488edff6b325efaba3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/><br/> <img alt="3" src="https://img-blog.csdnimg.cn/c1d7317067db4ec59c091276039fe1a9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
<h5><a id="DialogPen_85"></a>自定义DialogPen类</h5>
<p>新建<code>DialogPen</code>类继承<code>QDialog</code>：</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">DIALOGPEN_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DIALOGPEN_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QDialog&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QColorDialog&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPen&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QPalette&gt;</span></span>

<span class="token keyword">namespace</span> Ui <span class="token punctuation">{<!-- --></span>
<span class="token keyword">class</span> <span class="token class-name">DialogPen</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DialogPen</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QDialog</span></span>
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token keyword">explicit</span> <span class="token function">DialogPen</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">DialogPen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    QPen <span class="token function">getpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> QPen <span class="token function">getPen</span><span class="token punctuation">(</span>QPen initPen<span class="token punctuation">,</span> <span class="token keyword">bool</span> <span class="token operator">&amp;</span>ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">setPen</span><span class="token punctuation">(</span><span class="token keyword">const</span> QPen <span class="token operator">&amp;</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">on_pushButton_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    QPen m_pen<span class="token punctuation">;</span>
    Ui<span class="token double-colon punctuation">::</span>DialogPen <span class="token operator">*</span>ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// DIALOGPEN_H</span></span>
</code></pre>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"dialogpen.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_dialogpen.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QString&gt;</span></span>


<span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">DialogPen</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span>
    <span class="token function">QDialog</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>DialogPen<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"NoPen"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"SolidLine"</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"DashLine"</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"DotLine"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"DashDotLine"</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"DashDotDotLine"</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span><span class="token string">"CustomDashLine"</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">setCurrentIndex</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">DialogPen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButton_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> m_pen<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        QString str <span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"background-color: rgb(%d,%d,%d)"</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ui<span class="token operator">-&gt;</span>btnColor<span class="token operator">-&gt;</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

QPen <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    m_pen<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span><span class="token class-name">Qt</span><span class="token double-colon punctuation">::</span><span class="token function">PenStyle</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">currentIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pen<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>spinBox<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QColor color <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>btnColor<span class="token operator">-&gt;</span><span class="token function">palette</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span>QPalette<span class="token double-colon punctuation">::</span>Button<span class="token punctuation">)</span><span class="token punctuation">;</span>
    m_pen<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> m_pen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

QPen <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getPen</span><span class="token punctuation">(</span>QPen initPen<span class="token punctuation">,</span> <span class="token keyword">bool</span> <span class="token operator">&amp;</span>ok<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    DialogPen<span class="token operator">*</span> dlg <span class="token operator">=</span> <span class="token keyword">new</span> DialogPen<span class="token punctuation">;</span>
    QPen pen<span class="token punctuation">;</span>
    dlg<span class="token operator">-&gt;</span><span class="token function">setPen</span><span class="token punctuation">(</span>initPen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ret <span class="token operator">=</span> dlg<span class="token operator">-&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>ret <span class="token operator">==</span> QDialog<span class="token double-colon punctuation">::</span>Accepted<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        pen <span class="token operator">=</span> dlg<span class="token operator">-&gt;</span><span class="token function">getpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ok <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        pen <span class="token operator">=</span> initPen<span class="token punctuation">;</span>
        ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">delete</span> dlg<span class="token punctuation">;</span>
    <span class="token keyword">return</span> pen<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">setPen</span><span class="token punctuation">(</span><span class="token keyword">const</span> QPen <span class="token operator">&amp;</span>pen<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    m_pen <span class="token operator">=</span> pen<span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>spinBox<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>pen<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token generic-function"><span class="token function">static_cast</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>pen<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>comboBox<span class="token operator">-&gt;</span><span class="token function">setCurrentIndex</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>btnColor<span class="token operator">-&gt;</span><span class="token function">setAutoFillBackground</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QColor color <span class="token operator">=</span> pen<span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QString str <span class="token operator">=</span> <span class="token class-name">QString</span><span class="token double-colon punctuation">::</span><span class="token function">asprintf</span><span class="token punctuation">(</span><span class="token string">"background-color: rgb(%d,%d,%d)"</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>color<span class="token punctuation">.</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>btnColor<span class="token operator">-&gt;</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h5><a id="mainwindow_199"></a>mainwindow类</h5>
<p>mainwindow.h</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">MAINWINDOW_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAINWINDOW_H</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QMainWindow&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QChartView&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtCharts&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QColor&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QLineSeries&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QValueAxis&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QtMath&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QTime&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QChart&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;QFontDialog&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"dialogpen.h"</span></span>

QT_CHARTS_USE_NAMESPACE

QT_BEGIN_NAMESPACE
<span class="token keyword">namespace</span> Ui <span class="token punctuation">{<!-- --></span> <span class="token keyword">class</span> <span class="token class-name">MainWindow</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
QT_END_NAMESPACE

<span class="token keyword">class</span> <span class="token class-name">MainWindow</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">QMainWindow</span></span>
<span class="token punctuation">{<!-- --></span>
    Q_OBJECT

<span class="token keyword">public</span><span class="token operator">:</span>
    <span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent <span class="token operator">=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span> slots<span class="token operator">:</span>
    <span class="token keyword">void</span> <span class="token function">on_actZoomOut_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_actZoomIn_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_actReset_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_actFlush_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_btn_set_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_btn_titleFont_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_Up_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_Down_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_Left_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_Right_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_checkBox_legend_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_checkBox_legendBG_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Font_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_legendcolor_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_setMargin_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_comboBox_motion_currentIndexChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_comboBox_theme_currentIndexChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_sin_curve_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_cos_curve_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_name_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_checkBox_curve_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_checkBox_data_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_color_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_pen_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_horizontalSlider_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_checkBox_pointLableVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pushButton_13_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pushButton_12_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_Y_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_XY_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_XAxies_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_rBtn_YAxies_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_Axis_isVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_Axis_range_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_Axis_setTitle_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_Axis_titleIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_style_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_setFont_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_chk_scaleIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_chk_gridLineVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_2_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_3_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_spinBox_Tickcount_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_spinBox_minorTickcount_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_chk_TickLineIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_5_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_4_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_7_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_pBtn_Fontcolor_6_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">on_chk_MinorTickLineIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
    Ui<span class="token double-colon punctuation">::</span>MainWindow <span class="token operator">*</span>ui<span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">createChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLineSeries<span class="token operator">*</span> curSeries<span class="token punctuation">;</span>
    QValueAxis<span class="token operator">*</span> curAxis<span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">prepareData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">updateFromChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> <span class="token comment">// MAINWINDOW_H</span></span>
</code></pre>
<p>mainwindow.cpp</p>
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_mainwindow.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_dialogPen.h"</span></span>

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">MainWindow</span><span class="token punctuation">(</span>QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token function">QMainWindow</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span>
    <span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>MainWindow<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">createChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">prepareData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateFromChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_actZoomOut_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">zoom</span><span class="token punctuation">(</span><span class="token number">0.8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_actZoomIn_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">zoom</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_actReset_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">zoomReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">createChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QChart<span class="token operator">*</span> chart <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span><span class="token string">"simple curve"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">setChart</span><span class="token punctuation">(</span>chart<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">setRenderHint</span><span class="token punctuation">(</span>QPainter<span class="token double-colon punctuation">::</span>Antialiasing<span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLineSeries<span class="token operator">*</span> series0 <span class="token operator">=</span> <span class="token keyword">new</span> QLineSeries<span class="token punctuation">;</span>
    QLineSeries<span class="token operator">*</span> series1 <span class="token operator">=</span> <span class="token keyword">new</span> QLineSeries<span class="token punctuation">;</span>
    series0<span class="token operator">-&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"sin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    series1<span class="token operator">-&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"cos"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    curSeries <span class="token operator">=</span> series0<span class="token punctuation">;</span>

    QPen pen<span class="token punctuation">;</span>
    pen<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>DotLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    series0<span class="token operator">-&gt;</span><span class="token function">setPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen<span class="token punctuation">.</span><span class="token function">setStyle</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>SolidLine<span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    series1<span class="token operator">-&gt;</span><span class="token function">setPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>

    chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>series0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">addSeries</span><span class="token punctuation">(</span>series1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    QValueAxis<span class="token operator">*</span> axisX <span class="token operator">=</span> <span class="token keyword">new</span> QValueAxis<span class="token punctuation">;</span>
    QValueAxis<span class="token operator">*</span> axisY <span class="token operator">=</span> <span class="token keyword">new</span> QValueAxis<span class="token punctuation">;</span>
    curAxis <span class="token operator">=</span> axisX<span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setLabelFormat</span><span class="token punctuation">(</span><span class="token string">"%.1f"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setTickCount</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setMinorTickCount</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisX<span class="token operator">-&gt;</span><span class="token function">setTitleText</span><span class="token punctuation">(</span><span class="token string">"time(secs)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    axisY<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1.5</span><span class="token punctuation">,</span><span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisY<span class="token operator">-&gt;</span><span class="token function">setTickCount</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisY<span class="token operator">-&gt;</span><span class="token function">setMinorTickCount</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    axisY<span class="token operator">-&gt;</span><span class="token function">setTitleText</span><span class="token punctuation">(</span><span class="token string">"value"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    chart<span class="token operator">-&gt;</span><span class="token function">setAxisX</span><span class="token punctuation">(</span>axisX<span class="token punctuation">,</span>series0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisX</span><span class="token punctuation">(</span>axisX<span class="token punctuation">,</span>series1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisY</span><span class="token punctuation">(</span>axisY<span class="token punctuation">,</span>series0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setAxisY</span><span class="token punctuation">(</span>axisY<span class="token punctuation">,</span>series1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">prepareData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QLineSeries<span class="token operator">*</span> series0 <span class="token operator">=</span> <span class="token punctuation">(</span>QLineSeries<span class="token operator">*</span><span class="token punctuation">)</span>ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QLineSeries<span class="token operator">*</span> series1 <span class="token operator">=</span> <span class="token punctuation">(</span>QLineSeries<span class="token operator">*</span><span class="token punctuation">)</span>ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    series0<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    series1<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">qsrand</span><span class="token punctuation">(</span><span class="token class-name">QTime</span><span class="token double-colon punctuation">::</span><span class="token function">currentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    qreal t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> y1<span class="token punctuation">,</span> y2<span class="token punctuation">,</span> inv<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">;</span>
    qreal rd<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>cnt<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        rd <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">qrand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">;</span>
        y1 <span class="token operator">=</span> <span class="token function">qSin</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> rd<span class="token operator">/</span><span class="token number">50</span><span class="token punctuation">;</span>
        series0<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>y1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        y2 <span class="token operator">=</span> <span class="token function">qCos</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">+</span> rd<span class="token operator">/</span><span class="token number">50</span><span class="token punctuation">;</span>
        series1<span class="token operator">-&gt;</span><span class="token function">append</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span>y2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        t <span class="token operator">+=</span> inv<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">updateFromChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QChart<span class="token operator">*</span> chart <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>lineEdit_title<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>chart<span class="token operator">-&gt;</span><span class="token function">title</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    QMargins mg <span class="token operator">=</span> chart<span class="token operator">-&gt;</span><span class="token function">margins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>spinBox_Down<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>mg<span class="token punctuation">.</span><span class="token function">bottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>spinBox_Left<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>mg<span class="token punctuation">.</span><span class="token function">left</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>spinBox_Right<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>mg<span class="token punctuation">.</span><span class="token function">right</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>spinBox_Up<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>mg<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>




<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_actFlush_triggered</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">prepareData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_btn_set_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QChart <span class="token operator">*</span>chart <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    chart<span class="token operator">-&gt;</span><span class="token function">setTitle</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>lineEdit_title<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_btn_titleFont_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFont font <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">titleFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    font <span class="token operator">=</span> <span class="token class-name">QFontDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ok<span class="token punctuation">,</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setTitleFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_Up_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_Down_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignBottom<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_Left_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_Right_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setAlignment</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>AlignRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_checkBox_legend_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_checkBox_legendBG_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setBackgroundVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Font_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFont font <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    font <span class="token operator">=</span> <span class="token class-name">QFontDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ok<span class="token punctuation">,</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_legendcolor_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">labelColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">legend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setLabelColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_setMargin_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QMargins mgs<span class="token punctuation">;</span>
    mgs<span class="token punctuation">.</span><span class="token function">setTop</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>spinBox_Up<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mgs<span class="token punctuation">.</span><span class="token function">setLeft</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>spinBox_Down<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mgs<span class="token punctuation">.</span><span class="token function">setLeft</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>spinBox_Left<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mgs<span class="token punctuation">.</span><span class="token function">setRight</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>spinBox_Right<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setMargins</span><span class="token punctuation">(</span>mgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_comboBox_motion_currentIndexChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setAnimationOptions</span><span class="token punctuation">(</span><span class="token punctuation">(</span>QChart<span class="token double-colon punctuation">::</span>AnimationOption<span class="token punctuation">)</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_comboBox_theme_currentIndexChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">setTheme</span><span class="token punctuation">(</span><span class="token punctuation">(</span>QChart<span class="token double-colon punctuation">::</span>ChartTheme<span class="token punctuation">)</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_sin_curve_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>sin_curve<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curSeries <span class="token operator">=</span> <span class="token punctuation">(</span>QLineSeries<span class="token operator">*</span><span class="token punctuation">)</span>ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        curSeries <span class="token operator">=</span> <span class="token punctuation">(</span>QLineSeries<span class="token operator">*</span><span class="token punctuation">)</span>ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">series</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//获取curSeries的值, 设置（标题名称，序列可见的，点数据可见，透明度滑动条）</span>
    ui<span class="token operator">-&gt;</span>lineEdit_title<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>curSeries<span class="token operator">-&gt;</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>checkBox_curve<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curSeries<span class="token operator">-&gt;</span><span class="token function">isVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>checkBox_data<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curSeries<span class="token operator">-&gt;</span><span class="token function">pointsVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>horizontalSlider<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>curSeries<span class="token operator">-&gt;</span><span class="token function">opacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>checkBox_pointLableVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curSeries<span class="token operator">-&gt;</span><span class="token function">pointLabelsVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_cos_curve_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">on_sin_curve_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_name_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curSeries<span class="token operator">-&gt;</span><span class="token function">setName</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>line_name<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>



<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_checkBox_curve_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span>
    curSeries<span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>checkBox_curve<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_checkBox_data_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">Q_UNUSED</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span>
    curSeries<span class="token operator">-&gt;</span><span class="token function">setPointsVisible</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>checkBox_data<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_color_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curSeries<span class="token operator">-&gt;</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_pen_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    QPen pen <span class="token operator">=</span> curSeries<span class="token operator">-&gt;</span><span class="token function">pen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen <span class="token operator">=</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_horizontalSlider_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curSeries<span class="token operator">-&gt;</span><span class="token function">setOpacity</span><span class="token punctuation">(</span>value<span class="token operator">/</span><span class="token number">10.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_checkBox_pointLableVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curSeries<span class="token operator">-&gt;</span><span class="token function">setPointLabelsVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButton_13_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curSeries<span class="token operator">-&gt;</span><span class="token function">pointLabelsColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setPointLabelsColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pushButton_12_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFont font <span class="token operator">=</span> curSeries<span class="token operator">-&gt;</span><span class="token function">pointLabelsFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    font <span class="token operator">=</span> <span class="token class-name">QFontDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ok<span class="token punctuation">,</span> font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setPointLabelsFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_Y_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>rBtn_Y<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setPointLabelsFormat</span><span class="token punctuation">(</span><span class="token string">"@yPoint"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        curSeries<span class="token operator">-&gt;</span><span class="token function">setPointLabelsFormat</span><span class="token punctuation">(</span><span class="token string">"(@xPoint,@yPoint)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_XY_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">on_rBtn_Y_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_XAxies_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 设置坐标轴</span>
    QList<span class="token operator">&lt;</span>QAbstractAxis<span class="token operator">*</span><span class="token operator">&gt;</span> axes<span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>rBtn_XAxies<span class="token operator">-&gt;</span><span class="token function">isChecked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        axes <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">axes</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Horizontal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        axes <span class="token operator">=</span> ui<span class="token operator">-&gt;</span>cView<span class="token operator">-&gt;</span><span class="token function">chart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">axes</span><span class="token punctuation">(</span>Qt<span class="token double-colon punctuation">::</span>Vertical<span class="token punctuation">)</span><span class="token punctuation">;</span>
    curAxis <span class="token operator">=</span> <span class="token punctuation">(</span>QValueAxis<span class="token operator">*</span><span class="token punctuation">)</span>axes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">//获取坐标轴属性，显示到界面上</span>
    ui<span class="token operator">-&gt;</span>dSBox_minV<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>dSBox_maxV<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ui<span class="token operator">-&gt;</span>Axis_title<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">titleText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>Axis_titleIsVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">isTitleVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ui<span class="token operator">-&gt;</span>lineEdit_style<span class="token operator">-&gt;</span><span class="token function">setText</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">labelFormat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>chk_scaleIsVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">labelsVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    ui<span class="token operator">-&gt;</span>chk_gridLineVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">isGridLineVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ui<span class="token operator">-&gt;</span>spinBox_Tickcount<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">tickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>chk_TickLineIsVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">isLineVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    ui<span class="token operator">-&gt;</span>spinBox_minorTickcount<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">minorTickCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ui<span class="token operator">-&gt;</span>chk_MinorTickLineIsVisible<span class="token operator">-&gt;</span><span class="token function">setChecked</span><span class="token punctuation">(</span>curAxis<span class="token operator">-&gt;</span><span class="token function">isMinorGridLineVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>



<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_rBtn_YAxies_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token function">on_rBtn_XAxies_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_Axis_isVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_Axis_range_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setRange</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>dSBox_minV<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ui<span class="token operator">-&gt;</span>dSBox_maxV<span class="token operator">-&gt;</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_Axis_setTitle_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setTitleText</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>Axis_title<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_Axis_titleIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setTitleVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_style_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setLabelFormat</span><span class="token punctuation">(</span>ui<span class="token operator">-&gt;</span>lineEdit_style<span class="token operator">-&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">labelsColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setLabelsColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_setFont_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QFont font <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">labelsFont</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    font <span class="token operator">=</span> <span class="token class-name">QFontDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ok<span class="token punctuation">,</span> font<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setLabelsFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_chk_scaleIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setLineVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_chk_gridLineVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setGridLineVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_2_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">gridLineColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setGridLineColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_3_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    QPen pen <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">gridLinePen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen <span class="token operator">=</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setGridLinePen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_spinBox_Tickcount_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg1<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setTickCount</span><span class="token punctuation">(</span>arg1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_spinBox_minorTickcount_valueChanged</span><span class="token punctuation">(</span><span class="token keyword">int</span> arg1<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setMinorTickCount</span><span class="token punctuation">(</span>arg1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_chk_TickLineIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setLineVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_5_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    QPen pen <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">linePen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen <span class="token operator">=</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setLinePen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_4_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">linePenColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setLinePenColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_7_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    QColor color <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">minorGridLineColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token class-name">QColorDialog</span><span class="token double-colon punctuation">::</span><span class="token function">getColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>color<span class="token punctuation">.</span><span class="token function">isValid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setMinorGridLineColor</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_pBtn_Fontcolor_6_clicked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">bool</span> ok <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    QPen pen <span class="token operator">=</span> curAxis<span class="token operator">-&gt;</span><span class="token function">gridLinePen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pen <span class="token operator">=</span> <span class="token class-name">DialogPen</span><span class="token double-colon punctuation">::</span><span class="token function">getPen</span><span class="token punctuation">(</span>pen<span class="token punctuation">,</span> ok<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>ok<span class="token punctuation">)</span>
        curAxis<span class="token operator">-&gt;</span><span class="token function">setGridLinePen</span><span class="token punctuation">(</span>pen<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">MainWindow</span><span class="token double-colon punctuation">::</span><span class="token function">on_chk_MinorTickLineIsVisible_clicked</span><span class="token punctuation">(</span><span class="token keyword">bool</span> checked<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    curAxis<span class="token operator">-&gt;</span><span class="token function">setMinorGridLineVisible</span><span class="token punctuation">(</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h5><a id="_809"></a>效果演示</h5>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/fc565112f00a49078562c08eb3e80c90.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAU29uZ3BpbmdXYW5n,size_20,color_FFFFFF,t_70,g_se,x_16"/></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>