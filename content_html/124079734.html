<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p>大部分<a href="https://github.com/WriterRod/WPF-3d-source">源码</a>参考Github，是一本名为WPF-3D的书的代码，有条件的可以买下实体书。<br/> 本文源码：<a href="https://download.csdn.net/download/m0_37816922/85105041">Cube.zip</a></p>
<p></p>
<div class="toc">
<h3>文章目录</h3>
<ul><li><ul><li><ul><li><a href="#xml_4">xml写法</a></li><li><a href="#_84">调整相机视场角</a></li><li><a href="#cs_110">cs写法</a></li></ul>
</li></ul>
</li></ul>
</div>
<p></p>
<h3><a id="xml_4"></a>xml写法</h3>
<p>若只是希望新建一个下面这样简单的3D图形，那么只需修改xml就能实现。</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/a982664768504f85a216d11cc68c290b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5b6u5bCP5Ya3,size_15,color_FFFFFF,t_70,g_se,x_16#pic_center"/></p>
<p>其主要分为两个部分，如下面的代码所示，其中<code>ModelVisual3D</code>即位集合模型，而<code>&lt;Viewport3D.Camera</code>则代表相机视角。我们在屏幕上所看到的三维图，实际上是相机拍摄到并转化为二维的图。</p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Viewport3D</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Viewport3D.Camera</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Viewport3D.Camera</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ModelVisual3D</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ModelVisual3D.Content</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Model3DGroup</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Model3DGroup</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ModelVisual3D.Content</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ModelVisual3D</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Viewport3D</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>其中，相机部分主要有四个参数，分别是位置<code>Position</code>，视角<code>LookDirection</code>，视场角<code>FieldOfView</code>。</p>
<p>第四个参数<code>upDirection</code>用于规定正向，相当于照片拍出来之后要以哪边为正。</p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Viewport3D.Camera</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PerspectiveCamera</span> 
      <span class="token attr-name">Position</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>1.5, 2, 3<span class="token punctuation">"</span></span>
      <span class="token attr-name">LookDirection</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>-1.5, -2, -3<span class="token punctuation">"</span></span>
      <span class="token attr-name">FieldOfView</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>60<span class="token punctuation">"</span></span>
      <span class="token attr-name">UpDirection</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>0, 1, 0<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Viewport3D.Camera</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>接下来，<code>Model3DGroup</code>则表示即将绘制的几何体，其中最重要的当然是<code>GeometryModel3D</code>，用于规定生成几何体的点。</p>
<p>在WPF中，三维图形必须通过面的形式展现出来，而每生成一个面，则需要三个点。也就是说，通过一个又一个的三角形来拼接成几何体的表面。</p>
<p>所以，尽管希望生成一个正方体，但并不可以让正方体边上的四边形作为最小的面元。</p>
<p>在设置好三维图形的几何要素之后，则可设置其表面颜色和光线颜色。其中<code>DiffuseMaterial</code>中的<code>Brush</code>属性记为几何体表面颜色。</p>
<p><code>AmbientLight</code>和<code>DirectionLight</code>分别代表背景光和前景光。</p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Model3DGroup</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Lights --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>AmbientLight</span> <span class="token attr-name">Color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Gray<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DirectionalLight</span> <span class="token attr-name">Color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Gray<span class="token punctuation">"</span></span> <span class="token attr-name">Direction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1,-2,-3<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GeometryModel3D</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GeometryModel3D.Geometry</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- Cube --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>MeshGeometry3D</span>
                <span class="token attr-name">Positions</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>
                  -1,-1,-1   1,-1,-1   1,-1, 1  -1,-1, 1
                  -1,-1, 1   1,-1, 1   1, 1, 1  -1, 1, 1
                   1,-1, 1   1,-1,-1   1, 1,-1   1, 1, 1
                   1, 1, 1   1, 1,-1  -1, 1,-1  -1, 1, 1
                  -1,-1, 1  -1, 1, 1  -1, 1,-1  -1,-1,-1 
                  -1,-1,-1  -1, 1,-1   1, 1,-1   1,-1,-1
                  <span class="token punctuation">"</span></span>
                <span class="token attr-name">TriangleIndices</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>
                   0  1  2     2  3  0
                   4  5  6     6  7  4
                   8  9 10    10 11  8
                  12 13 14    14 15 12
                  16 17 18    18 19 16
                  20 21 22    22 23 20
                  <span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>GeometryModel3D.Geometry</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>GeometryModel3D.Material</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DiffuseMaterial</span> <span class="token attr-name">Brush</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LightBlue<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>GeometryModel3D.Material</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>GeometryModel3D</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Model3DGroup</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3><a id="_84"></a>调整相机视场角</h3>
<p>和位置、方向这两个参数相比，视场角并不是那么容易理解，毕竟人眼的视场角几乎是恒定的，所以体会不到视场角发生变化所带来的视野的不同。</p>
<p>所以接下来新建一个<code>slider</code>来绑定视场角，从而直观地感受一下视场角所带来的差别</p>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/cabe916866ea479a9e13d1112998ecab.gif#pic_center"/></p>
<p>其代码为</p>
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DockPanel</span> <span class="token attr-name">LastChildFill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>True<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>WrapPanel</span> <span class="token attr-name">DockPanel.Dock</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Top<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Slider</span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>200<span class="token punctuation">"</span></span> <span class="token attr-name">Value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>60<span class="token punctuation">"</span></span> <span class="token attr-name">Maximum</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>170<span class="token punctuation">"</span></span> <span class="token attr-name">Minimum</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sAngle<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBox</span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{Binding ElementName=sAngle,Path=Value, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}<span class="token punctuation">"</span></span> 
                 <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0 5<span class="token punctuation">"</span></span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>WrapPanel</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Viewport3D</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Viewport3D</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DockPanel</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>此外，需要将<code>PerspectiveCamera</code>中的<code>FieldOfView</code>改为<code>FieldOfView = "{Binding Value, ElementName=sAngle}"</code>。</p>
<h3><a id="cs_110"></a>cs写法</h3>
<p>将代码全部写在<code>xml</code>端虽然很便携很直观，但在涉及到某些交互操作时，未必十分灵活。好在任何<code>xml</code>端的代码都可以写在<code>cs</code>端</p>
<pre><code class="prism language-cs"><span class="token comment">// 窗口加载时执行</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Window_Loaded</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 定义WPF组件</span>
    <span class="token class-name">ModelVisual3D</span> visual3d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ModelVisual3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Model3DGroup</span> group3d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Model3DGroup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//对应xaml中ModelVisual3D.Content</span>
    visual3d<span class="token punctuation">.</span>Content <span class="token operator">=</span> group3d<span class="token punctuation">;</span> 
    <span class="token comment">//visual3d是mainViewport的子控件</span>
    mainViewport<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>visual3d<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//定义相机、光线和模型.</span>
    <span class="token function">DefineCamera</span><span class="token punctuation">(</span>mainViewport<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DefineLights</span><span class="token punctuation">(</span>group3d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">DefineModel</span><span class="token punctuation">(</span>group3d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义相机</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DefineCamera</span><span class="token punctuation">(</span><span class="token class-name">Viewport3D</span> viewport<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Point3D</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector3D</span> lookDirection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3D</span><span class="token punctuation">(</span><span class="token operator">-</span>p<span class="token punctuation">.</span>X<span class="token punctuation">,</span> <span class="token operator">-</span>p<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> <span class="token operator">-</span>p<span class="token punctuation">.</span>Z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector3D</span> upDirection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3D</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">double</span></span> fieldOfView <span class="token operator">=</span> <span class="token number">60</span><span class="token punctuation">;</span>
    <span class="token comment">//对应PerspectiveCamera的四个参数</span>
    <span class="token class-name">PerspectiveCamera</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PerspectiveCamera</span><span class="token punctuation">(</span>
        p<span class="token punctuation">,</span> lookDirection<span class="token punctuation">,</span> upDirection<span class="token punctuation">,</span> fieldOfView<span class="token punctuation">)</span><span class="token punctuation">;</span>

    viewport<span class="token punctuation">.</span>Camera <span class="token operator">=</span> camera<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义光线.</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DefineLights</span><span class="token punctuation">(</span><span class="token class-name">Model3DGroup</span> <span class="token keyword">group</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">group</span><span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">AmbientLight</span><span class="token punctuation">(</span>Colors<span class="token punctuation">.</span>Gray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Vector3D</span> direction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">group</span><span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">DirectionalLight</span><span class="token punctuation">(</span>Colors<span class="token punctuation">.</span>Gray<span class="token punctuation">,</span> direction<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>接下来是比较复杂的定义模型，其实并不复杂，只是点有点多，如果像写xaml那样写，强迫症可能受不了。</p>
<p>考虑到正方体共有8个顶点，6个面，每个面需要两个三角形，则一共需要12个三角形，总计36组顶点号。</p>
<p>对于每个正方形而言，若生成两个三角形，由于有一条重合的边，故而四个点累计使用6次。若想让点号递增时显得自然一些，则可以让每个面生成四个点，即总计24个点。如此一来，拼接点号为<code>0,1,2,3</code>的正方形，只需用到<code>0,1,2</code>和<code>2,3,0</code>两组点即可。</p>
<p>而正方体的六个面的点的坐标也很有特点，即必有一个坐标轴的分量是不变的，而另外两个坐标轴分量则遍历所有可能的取值。这个逻辑相对来说有些复杂，所以就不改了。</p>
<p>最终得到<code>cs</code>代码如下。</p>
<pre><code class="prism language-cs"><span class="token comment">// 定义模型</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DefineModel</span><span class="token punctuation">(</span><span class="token class-name">Model3DGroup</span> <span class="token keyword">group</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// Create the geometry.</span>
    <span class="token class-name">MeshGeometry3D</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MeshGeometry3D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Define the positions.</span>
    <span class="token class-name">Point3D<span class="token punctuation">[</span><span class="token punctuation">]</span></span> points <span class="token operator">=</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Point3D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name">Point3D</span> point <span class="token keyword">in</span> points<span class="token punctuation">)</span> mesh<span class="token punctuation">.</span>Positions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Define the triangles.</span>
    <span class="token class-name">Tuple<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> triangles <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Tuple<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> triangles<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">int</span></span> tmp <span class="token operator">=</span> i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">?</span> <span class="token number">2</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>
        triangles<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Tuple<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>
            <span class="token number">2</span> <span class="token operator">*</span> i<span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> i <span class="token operator">+</span> tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> tup <span class="token keyword">in</span> triangles<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        mesh<span class="token punctuation">.</span>TriangleIndices<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tup<span class="token punctuation">.</span>Item1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mesh<span class="token punctuation">.</span>TriangleIndices<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tup<span class="token punctuation">.</span>Item2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mesh<span class="token punctuation">.</span>TriangleIndices<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tup<span class="token punctuation">.</span>Item3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">DiffuseMaterial</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DiffuseMaterial</span><span class="token punctuation">(</span>Brushes<span class="token punctuation">.</span>LightBlue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">GeometryModel3D</span> model <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">GeometryModel3D</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> material<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">group</span><span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>