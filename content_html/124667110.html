<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="htmledit_views" id="content_views">
<p> <img alt="" height="109" src="image\451dfef5a53e4c94a3ecbfb02d167973.png" width="286"/>  â€‹â€‹â€‹â€‹â€‹â€‹ ğŸ¤£ çˆ†ç¬‘æ•™ç¨‹ ğŸ‘‰ <strong> <a href="https://blog.csdn.net/weixin_50502862/category_11602059.html" title="ã€ŠC++è¦ç¬‘ç€å­¦ã€‹">ã€ŠC++è¦ç¬‘ç€å­¦ã€‹</a></strong><strong> </strong>ğŸ‘ˆ ç«é€Ÿè®¢é˜…<strong>  </strong>ğŸ”¥</p>
<p></p>
<p><img alt="" height="123" src="image\32974baa747043f9907e5bbd13639957.png" width="679"/></p>
<p><strong>ğŸ’­ å†™åœ¨å‰é¢</strong></p>
<p>STL çš„æºä»£ç æ•´ä½“è€ƒè™‘çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œè¿˜è¦è€ƒè™‘å’Œå…¶ä»–åœ°æ–¹çš„ç»“åˆï¼Œå› æ­¤æ•´ä½“çš„è®¾è®¡æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚åŸºäºè¿™ä¸€ç³»åˆ—åŸå› ï¼Œæˆ‘ä»¬ä¼šä»¥ç®€å•çš„å½¢å¼å»å®ç°å…¶æ ¸å¿ƒæ¡†æ¶æ¥å£ï¼Œæ–¹ä¾¿å»å­¦ä¹  vectorã€‚</p>
<p>è¿˜æ˜¯é‚£å¥è¯ï¼Œæˆ‘ä»¬å»æ¨¡æ‹Ÿå®ç°å®ƒä»¬ï¼Œä¸æ˜¯ä¸ºäº†é€ æ›´å¥½çš„è½®å­ï¼Œè€Œæ˜¯ä¸ºäº†å»å­¦ä¹ å®ƒï¼Œç†è§£å®ƒçš„æœ¬è´¨ï¼è‡ªå·±é€ ä¸€æ¬¡ï¼Œå¿ƒé‡Œä¼šæ›´æ¸…æ¥šï¼Œæ›´åˆ©äºåŠ æ·±å¯¹å®ƒä»¬çš„ç†è§£ã€‚</p>
<p><img alt="" height="50" src="image\c52b4035e4864f4ba6cbbd9070bc53cd.png" width="324"/>  <strong> æœ¬ç¯‡åšå®¢å…¨ç«™çƒ­æ¦œæ’åï¼š<span style="color:#fbd4d0;">32</span></strong></p>
<p></p>
<hr/>
<h2 id="%E2%85%A0.%20vector%20%E5%B8%B8%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0">â… . å®ç°åŸºæœ¬æ¡†æ¶</h2>
<h3 id="0x00%20%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%E7%9A%84%E5%AE%9A%E4%B9%89">0x00 ç»“æ„çš„å®šä¹‰</h3>
<p><img alt="" height="123" src="image\60b11889d405440d97fc73328e33afbe.png" width="106"/> æˆ‘ä»¬å‚è€ƒã€ŠSTLæºç å‰–æã€‹ï¼Œç”¨ <em>STL3.0</em> ç‰ˆæœ¬å»å®ç°ä¸€ä¸ªé˜‰å‰²ç‰ˆçš„ <span style="color:#4da8ee;">vector</span>ã€‚</p>
<p></p>
<p>ğŸ’¬ æˆå‘˜å˜é‡çš„å®šä¹‰ï¼š</p>
<div>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;assert.h&gt;
using namespace std;

namespace chaos
{
	template&lt;class T&gt;
	class vector {
    public:
	typedef T* iterator;

	private:
		iterator _start;        // å¼€å§‹ä½ç½®
		iterator _finish;		// ç»“æŸä½ç½®
		iterator _eos;			// end of storage
	};
}</code></pre>
</div>
<p>â“ æˆ‘ä»¬å‘ç° â€”â€” æ€ä¹ˆæˆå‘˜å‡½æ•°å’Œæˆ‘ä»¬ä¹‹å‰æ¨¡æ‹Ÿå®ç°<span style="color:#4da8ee;"> string</span> çš„å†™æ³•ä¸ä¸€æ ·äº†ï¼Ÿ<img alt="" height="79" src="image\6959256f94334a3bbb76c044763c3018.png" width="94"/></p>
<p>ä¸è¦æ…Œï¼Œæˆ‘ä»¬å‚è€ƒçš„æ˜¯ STL3.0 çš„å†™æ³•ï¼Œå®ƒç»™çš„å°±æ˜¯ <span style="color:#0d0016;">start</span> ã€<span style="color:#0d0016;">finish </span>å’Œ<span style="color:#0d0016;"> end_of_storage</span>ã€‚</p>
<p><span style="color:#a5a5a5;">ï¼ˆè¿™é‡Œæˆ‘ä»¬æŠŠ end_of_storge ç®€å†™æˆ eos ï¼‰</span></p>
<p>è™½ç„¶è¡¨é¢ä¸Šçœ‹èµ·æ¥ä¸ä¸€æ ·ï¼Œä½†æ˜¯å®é™…ä¸Šè¡¨è¾¾çš„æ•ˆæœæ˜¯å¤§åŒå°å¼‚çš„ï¼Œçœ‹å›¾ï¼š</p>
<p><img alt="" height="369" src="image\15f3b8c6e67b47daa11b1e23169dc25b.png" width="601"/></p>
<p>æˆ‘ä»¬ç”¨æŒ‡é’ˆè®°å½• <span style="color:#0d0016;"><em>_start</em></span> ã€<em><span style="color:#0d0016;">_finish</span></em> å’Œ <span style="color:#0d0016;"><em>_eos</em></span> çš„ä½ç½®ï¼Œåªéœ€è¦ "æŒ‡é’ˆå‡æŒ‡é’ˆ" å°±å¯ä»¥å¾—åˆ°å¤§å°æˆ–å®¹é‡ã€‚</p>
<p><img alt="" height="183" src="image\25027ee0100f4c05ab886182efde3348.png" width="179"/> è¿™éå¸¸çš„è‡ªç”±ï¼æˆ‘ä»¬æƒ³æ±‚ <span style="color:#0d0016;">size</span>ï¼Œåªéœ€è¦<em> <span style="color:#be191c;">_finish - _start</span></em><span style="color:#be191c;"> </span>å³å¯ï¼Œ</p>
<p>åŒæ ·çš„ï¼Œæ±‚<span style="color:#0d0016;"> capacity </span>æˆ‘ä»¬å¯ä»¥<em><span style="color:#be191c;"> _eos - _start </span></em>ã€‚ç”šè‡³å¯ä»¥æ±‚å¯ç”¨ç©ºé—´ï¼Œ<span style="color:#be191c;"><em>_eos - _finish</em> </span>å°±è¡Œã€‚</p>
<p>çœŸçš„æ˜¯å¤ªè‡ªç”±äº†ï¼æˆ‘ä»¬ä¹‹å‰å®ç° <span style="color:#4da8ee;">string </span>æ—¶è®°å½• <span style="color:#0d0016;"><em>_capacity</em> </span>å’Œ <em><span style="color:#0d0016;">_size</span></em> çš„å½¢å¼ï¼Œæ˜¯ä¸æ˜¯ç¬é—´ä¸é¦™äº†ï¼Ÿ</p>
<p><img alt="" height="150" src="image\f2e054a51e344c7d8b4caabb69f023f0.png" width="116"/>  è¿™ç§å†™æ³•çœŸçš„æ˜¯éå¸¸çš„é«˜é›…ï¼Œæ²¡é”™å°±æ˜¯è¿™ä¹ˆçš„ğŸ‚ğŸºï¼</p>
<p></p>
<p>å†è¯´å›ä»£ç çš„å®ç°ï¼Œä¸ºäº†å’Œåº“ä¸­çš„<span style="color:#4da8ee;"> vector </span>è¿›è¡ŒåŒºåˆ†ï¼Œæˆ‘ä»¬è¿™é‡Œä¾ç„¶ç”¨å‘½åç©ºé—´åŒ…å«èµ·æ¥ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œé€ ä¸€ä¸ª<span style="color:#4da8ee;"> vector </span>çš„ç±»æ¨¡æ¿å»é€‚åº”å„ç§ç±»å‹ï¼Œæˆ‘ä»¬ç”¨ <span style="color:#956fe7;">typedef </span>å°† <span style="color:#ad720d;">T*</span> é‡å‘½åä¸º<span style="color:#ad720d;"> iterator</span>ã€‚</p>
<p></p>
<p></p>
<h3 id="0x01%20%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">0x01 æ„é€ å‡½æ•°çš„å®ç°</h3>
<p> <img alt="" height="53" src="image\bea89a62a5794d96a623cd102a0a8392.png" width="129"/> è¿™é‡Œè¦å®Œæˆçš„æ˜¯åˆå§‹åŒ–å·¥ä½œï¼Œæˆ‘ä»¬åˆ©ç”¨åˆå§‹åŒ–åˆ—è¡¨å°†å®ƒä»¬å€¼æˆç©ºæŒ‡é’ˆå³å¯ã€‚</p>
<p>ğŸ’¬ vectorï¼š</p>
<div>
<pre><code class="language-cpp">vector()
	: _start(nullptr)
	, _finish(nullptr)
	, _eos(nullptr) {}
</code></pre>
</div>
<p></p>
<h3 id="0x02%20%E6%9E%90%E6%9E%84%E5%87%BD%E6%95%B0">0x02 ææ„å‡½æ•°çš„å®ç°</h3>
<p><img alt="" height="55" src="image\62ae7b0f785f4fada2d04b5af94df83d.png" width="55"/> ææ„å‡½æ•°ä¹Ÿæ²¡ä»€ä¹ˆè¯´çš„ï¼Œè¦åšçš„å°±æ˜¯é‡Šæ”¾ç©ºé—´ï¼Œå¹¶å°†å®šä¹‰çš„æŒ‡é’ˆç½®ç©ºã€‚</p>
<p>ğŸ’¬ ~vectorï¼š</p>
<div>
<pre><code class="language-cpp">/* ææ„å‡½æ•° */
~vector() {
	if (_start) {
		delete[] _start;
		_start = _finish = _eos = nullptr;
	}
}</code></pre>
</div>
<p></p>
<h3 id="0x03%C2%A0%E5%AE%9E%E7%8E%B0%20size()%20%E5%92%8C%20capacity()%C2%A0">0x03 å®ç° size() å’Œ capacity() </h3>
<p><img alt="" height="60" src="image\fe1eda8d04724766927260be2d8a69cd.png" width="60"/> é€šè¿‡åˆšæ‰çš„è®²è§£ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ <span style="color:#0d0016;"><em> _start </em></span>ã€<span style="color:#0d0016;"><em>_finish</em></span> ä¸<span style="color:#0d0016;"><em> _eos </em></span>çš„ç”¨æ³•äº†ï¼Œ</p>
<p> é€šè¿‡æŒ‡é’ˆå‡æŒ‡é’ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ¾å®ç° <span style="color:#e6b223;">size</span>() å’Œ <span style="color:#e6b223;">capacity</span>() äº†ï¼Œå®ç°æ–¹å¼å¦‚ä¸‹ï¼š</p>
<p></p>
<p>ğŸ’¬ sizeï¼š</p>
<div>
<pre><code class="language-cpp">size_t size() const {
	return _finish - _start;   // è¿”å›æ•°æ®ä¸ªæ•°
}</code></pre>
</div>
<p><img alt="" height="219" src="image\dd24f95c7fa34d07a11a62a3a02cb232.png" width="493"/></p>
<p></p>
<p>ğŸ’¬ capacityï¼š</p>
<div>
<pre><code class="language-cpp">size_t capacity() const {
	return _eos - _start;      // è¿”å›å®¹é‡
}</code></pre>
</div>
<p><img alt="" height="233" src="image\1a2abfe593c04537ac539ace5c3c4875.png" width="565"/></p>
<p></p>
<h3 id="0x04%C2%A0%E5%AE%9E%E7%8E%B0%20push_back%20%E5%B0%BE%E6%8F%92">0x04 å®ç° push_back å°¾æ’</h3>
<p><img alt="" height="103" src="https://img-blog.csdnimg.cn/82a395480aa54198b9b6dbb566cd6d82.gif" width="103"/> æˆ‘ä»¬è¿™é‡Œå…ˆå®ç°ä¸€ä¸ªç®€å•çš„ <span style="color:#e6b223;">push_back</span>ï¼Œä»¥ä¾¿äºæˆ‘ä»¬èƒ½å…ˆæŠŠ<span style="color:#4da8ee;"> vector </span>è·‘èµ·æ¥ã€‚</p>
<p>å› ä¸ºæ˜¯é˜‰å‰²ç‰ˆï¼Œæˆ‘ä»¬çš„ <span style="color:#e6b223;">push_back </span>ä¹Ÿè‡ªç„¶æ²¡æœ‰ç©ºé—´é…ç½®å™¨ï¼Œæˆ‘ä»¬å°±ç”¨ <span style="color:#4da8ee;">new </span>å»æ›¿ä»£å®ƒã€‚</p>
<div>
<p class="img-center"><img alt="" height="21" src="image\a494197b64ef41b5a061f62a75ca846a.png" width="278"/></p>
<p>â€‹</p>
</div>
<p><img alt="" height="80" src="image\fa8112e6f8d248f6b8f509ea9b1d26e9.png" width="70"/> é¦–å…ˆæ€è€ƒï¼Œå°¾æ’éœ€è¦åšå“ªäº›äº‹ï¼Ÿ</p>
<p><strong>Step1ï¼šæ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹</strong></p>
<p>éœ€è¦å¢å®¹ï¼Œå°±å…ˆå¢å®¹åå†æ’å…¥æ•°æ®ï¼›ä¸éœ€è¦å¢å®¹ï¼Œå°±ç›´æ¥æ’å…¥æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬å…ˆå»æ€è€ƒï¼Œå¦‚ä½•åˆ¤æ–­æ˜¯å¦éœ€è¦å¢å®¹ â€”â€”</p>
<p>æˆ‘ä»¬ä¹‹å‰çš„åˆ¤æ–­æ–¹å¼æ˜¯ <span style="color:#e6b223;">size</span><span style="color:#0d0016;"> ==</span><span style="color:#e6b223;"> capacity</span> çš„æ—¶å€™éœ€è¦å¢å®¹<span style="color:#a5a5a5;">ï¼ˆæ•°æ®ç»“æ„ä¸“æ ã€string çš„æ¨¡æ‹Ÿå®ç°ï¼‰</span></p>
<p>é—®é¢˜æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä»¬æ²¡æœ‰å®šä¹‰<span style="color:#0d0016;"><em> _size</em></span> å’Œ <span style="color:#0d0016;"><em>_capacity</em></span>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯<span style="color:#0d0016;"><em> _start</em></span> ã€<span style="color:#0d0016;"><em> _finish </em></span>å’Œ<span style="color:#0d0016;"><em> _eos</em></span> çš„å½¢å¼ã€‚</p>
<p><span style="color:#0d0016;"><img alt="" height="310" src="image\a1698ac250f449da94d0ada39258315d.png" width="572"/></span></p>
<p> å½“ <em><span style="color:#0d0016;">_finish</span> </em>è§¦åŠåˆ°<span style="color:#0d0016;"><em> _eos</em></span> <span style="color:#a5a5a5;">ï¼ˆend of storageï¼‰</span> æ—¶ï¼Œä¸å°±è¯´æ˜å®¹é‡ä¸å¤Ÿäº†å—ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<div>
<p class="img-center"><img alt="" height="22" src="image\d7e8211c2d464166801abb153877e23b.png" width="190"/></p>
</div>
<p><strong>Step2ï¼šå¦‚æœéœ€è¦å¢å®¹</strong></p>
<p><img alt="" height="65" src="image\9fe2f1dc3b7749a8a206ee68198a4a15.png" width="77"/> æˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸‹å¢å®¹éƒ¨åˆ†çš„å®ç°ï¼Œæˆ‘ä»¬åœ¨ <span style="color:#4da8ee;">vector </span>å¸¸ç”¨æ¥å£ä»‹ç»ç« èŠ‚é‡Œè¯´è¿‡ï¼š</p>
<p><span style="color:#a5a5a5;"><em>" vector ä½¿ç”¨åŠ¨æ€åˆ†é…æ•°ç»„æ¥å­˜å‚¨å®ƒçš„å…ƒç´ ã€‚å½“æ–°å…ƒç´ æ’å…¥æ—¶ï¼Œä¸ºäº†å¢åŠ å­˜å‚¨ç©ºé—´ï¼Œè¿™ä¸ªæ•°ç»„å°±éœ€è¦è¢«é‡æ–°åˆ†é…å¤§å°ã€‚å…·ä½“åšæ³•æ˜¯åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œç„¶åå°†å…¨éƒ¨å…ƒç´ è½¬ç§»åˆ°è¿™ä¸ªæ–°çš„æ•°ç»„ã€‚"</em></span></p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬çš„å¢å®¹æ“ä½œå¯ä»¥å¤§è‡´å¯åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š</p>
<blockquote>
<p>â‘  å¼€ä¸€å—å¸¦æœ‰æ–°å®¹é‡çš„ç©ºé—´å­˜åˆ° <span style="color:#0d0016;">tmp</span> ä¸­ã€‚</p>
<p>â‘¡ å†æŠŠåŸç©ºé—´çš„æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ã€‚</p>
<p>â‘¢ å¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´ï¼ˆæˆ‘ä»¬å…ˆ "æ•…æ„" ä½¿ç”¨<span style="color:#e6b223;"> memset</span>ï¼Œè‡³äº <span style="color:#e6b223;">memset </span>çš„é—®é¢˜æˆ‘ä»¬æœ€åæ¢è®¨ï¼‰</p>
<p>â‘£ æœ€åå°† <span style="color:#0d0016;"><em>_start</em></span>ã€<em><span style="color:#0d0016;">_finish</span></em> å’Œ <span style="color:#0d0016;"><em>_eos</em></span> æŒ‡å‘æ–°çš„ç©ºé—´ã€‚</p>
</blockquote>
<p>ğŸ“Œ æ³¨æ„äº‹é¡¹ï¼š</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ€åä¸€æ­¥å¦‚æœå…ˆå°†<span style="color:#0d0016;"><em> _start</em></span> æŒ‡å‘ <span style="color:#0d0016;">tmp</span> åï¼Œå†è®¡ç®—<span style="color:#0d0016;"> _finish</span> æ—¶ï¼Œ</p>
<p>æ­¤æ—¶ä¸èƒ½ç°åœºç®—<span style="color:#e6b223;"> size</span>() ï¼Œç°åœºç®—ä¼šå‡ºé—®é¢˜ï¼Œå› ä¸º<span style="color:#0d0016;"> <em>_start</em> </span>å·²ç»è¢«æ›´æ–°æˆ<span style="color:#0d0016;"> tmp </span>äº†ï¼Œ</p>
<p>å¦‚æœä¸æƒ³æ”¹å˜é¡ºåºï¼Œè¿˜æ˜¯æƒ³æŒ‰ <span style="color:#0d0016;"><em>_start</em></span>ã€<span style="color:#0d0016;"><em>_finish</em></span> å’Œ <span style="color:#0d0016;"><em>_eos </em></span>çš„é¡ºåºèµ‹å€¼ï¼Œ</p>
<p>æˆ‘ä»¬å¯ä»¥æå‰æŠŠ <span style="color:#e6b223;">size</span>() ç®—å¥½ï¼Œå­˜åˆ°ä¸€ä¸ªå˜é‡ä¸­ã€‚</p>
<p></p>
<p><img alt="" height="52" src="image\4748fc1e596b44f79c3e9483fa5f260f.png" width="52"/> æ­¤å¤–ï¼ŒçœŸ <span style="color:#4da8ee;">vector </span>è¿™é‡Œæ‰©å®¹æ˜¯è¦è°ƒç©ºé—´é…ç½®å™¨çš„ï¼Œå¼€ç©ºé—´å’Œåˆå§‹åŒ–æ˜¯åˆ†å¼€çš„ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œçš„å®ç°ä¹Ÿæ²¡æœ‰ç©ºé—´é…ç½®å™¨ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç›´æ¥ä¸€æŠŠæ¢­äº†ã€‚</p>
<p>å¯¹äºç©ºé—´é…ç½®å™¨çš„çŸ¥è¯†æˆ‘ä»¬æ”¾åˆ°åé¢å†è¯´ï¼Œæˆ‘ä»¬ç›®å‰çš„é‡ç‚¹ä¸æ˜¯ç©ºé—´é…ç½®å™¨ï¼Œé‡ç‚¹æ˜¯ <span style="color:#4da8ee;">vector</span>ã€‚</p>
<p></p>
<p>è‡³äºæ–°å®¹é‡ç»™å¤šå°‘ï¼Œæˆ‘ä»¬è¿˜æ˜¯æŒ‰ç…§è‡ªå·±çš„ä¹ æƒ¯ï¼Œé¦–æ¬¡ç»™4é»˜è®¤æ‰©2å€çš„æ–¹å¼å»å¢å®¹ã€‚</p>
<div>
<p class="img-center"><img alt="" height="23" src="image\5a589e4e5b364613a67be4c5291804a8.png" width="564"/></p>
<p>â€‹</p>
</div>
<p><strong>Step3ï¼šæ’å…¥æ•°æ®</strong></p>
<p><img alt="" height="52" src="image\1e7268a822834094ba533d74b0ec5c0c.png" width="62"/> æ£€æŸ¥å¢å®¹å’Œå¢å®¹éƒ½å·²ç»åˆ†æå®Œäº†ï¼Œæœ€åå°±åªå‰©ä¸€ä¸ªæ’å…¥äº†ï¼Œæ’å…¥æ˜¯æœ€ç®€å•çš„ï¼š</p>
<div>
<p class="img-center"><img alt="" height="23" src="image\d160095e6c8c4b8fb7cad99da56976b0.png" width="270"/></p>
<p>â€‹</p>
</div>
<p>ğŸ’¬ åˆ†æç»“æŸï¼Œå¼€å§‹å†™ä»£ç ï¼š</p>
<div>
<pre><code class="language-cpp">/* å°¾æ’ï¼špush_back */
void push_back(const T&amp; x) {
	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_finish == _eos) {
		size_t new_capacity = capacity() == 0 ? 4 : capacity() * 2;
		size_t sz = size();   // æå‰æŠŠsizeç®—å¥½

		T* tmp = new T[new_capacity];   // å¼€ä¸€å—å¸¦æœ‰æ–°å®¹é‡new_capacityçš„ç©ºé—´å­˜åˆ°tmpä¸­
		if (_start) {
			memcpy(tmp, _start, sizeof(T) * size());  // å†æŠŠåŸç©ºé—´çš„æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼Œå¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´ã€‚
			delete[] _start;                          // å¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´
		}

		_start = tmp;                    // æŒ‡å‘æ–°ç©ºé—´
		_finish = tmp + sz;			   // ç°åœºç®—size() ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºstartå·²ç»è¢«æ›´æ–°æˆtmpäº†
		_eos = _start + new_capacity;
	}

	// æ’å…¥æ•°æ®
	*_finish = x; _finish++;
}</code></pre>
</div>
<p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•å°¾æ’çš„æ•ˆæœï¼Œæˆ‘ä»¬å…ˆæ¥å®ç°ä¸€ä¸‹ <span style="color:#956fe7;">operator</span>[] ï¼Œåˆ©ç”¨ "ä¸‹æ ‡+æ–¹æ‹¬å·" çš„æ–¹å¼éå†ã€‚</p>
<p></p>
<h3 id="0x05%C2%A0%E5%AE%9E%E7%8E%B0%20operator%5B%5D">0x05 å®ç° operator[]</h3>
<p><img alt="" height="92" src="image\37bb5f5c60334d4ba899c67cdf5bb1ee.png" width="384"/></p>
<p><strong>Tï¼š</strong>ç”±äºæˆ‘ä»¬ä¸çŸ¥é“è¿”å›å€¼ç±»å‹ï¼Œæ‰€ä»¥ç»™ Tã€‚</p>
<p><strong>T&amp;ï¼š</strong>å¼•ç”¨è¿”å›å‡å°‘æ‹·è´ã€‚</p>
<p><strong>constï¼š</strong>è¿™é‡Œ<span style="color:#ad720d;"> cosnt</span> ä¿®é¥° T å’Œ<span style="color:#956fe7;"> this</span>ï¼Œæ˜¯ä¸ºäº†é™åˆ¶å†™ã€‚</p>
<div>
<pre><code class="language-cpp">const T&amp; operator[](size_t idx) const {
	assert(idx &lt; size());
	return _start[idx];
}</code></pre>
</div>
<p>æ¥æ”¶ä¸‹æ ‡ï¼Œæ–­è¨€åˆ¤æ–­ä¸€ä¸‹ä¸‹æ ‡æ˜¯å¦åˆæ³•ï¼Œåˆç›´æ¥è¿”å›ã€‚</p>
<p></p>
<p>ğŸ’¬ æµ‹è¯• push_backï¼š</p>
<div>
<pre><code class="language-cpp">    void test_vector1() {
		vector&lt;int&gt; v;
		v.push_back(1);
		v.push_back(2);
		v.push_back(3);
		v.push_back(4);
		v.push_back(5);
		v.push_back(6);

		for (size_t i = 0; i &lt; v.size(); i++) {
			cout &lt;&lt; v[i] &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="122" src="image\a4fdf9c897f34a709c25edd29d959d0a.png" width="476"/></p>
<p></p>
<p></p>
<h2 id="%E2%85%A1.%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%AE%9E%E7%8E%B0">â…¡. è¿­ä»£å™¨çš„å®ç°</h2>
<h3 id="0x00%20%E5%AE%9E%E7%8E%B0%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%20begin%20%E5%92%8C%20end">0x00 å®ç°è¿­ä»£å™¨çš„ begin å’Œ end</h3>
<p><img alt="" height="55" src="image\4be11bf06c974dc0952f277b111c10dc.png" width="66"/> <span style="color:#4da8ee;">vector</span> çš„è¿­ä»£å™¨æ˜¯ä¸€ä¸ªåŸç”ŸæŒ‡é’ˆï¼š</p>
<div>
<pre><code class="language-cpp">template&lt;class T&gt;
class vector {
public:
	typedef T* iterator;
	typedef const T* const_iterator;
</code></pre>
</div>
<p>æˆ‘å…ˆå®ç°ä¸€ä¸‹ <span style="color:#e6b223;">begin</span>() å’Œ <span style="color:#e6b223;">end</span>() ï¼Œç›´æ¥åˆ†åˆ«è¿”å› <span style="color:#0d0016;"><em>_start </em></span>å’Œ <em><span style="color:#0d0016;">_finish </span></em>å³å¯ï¼š</p>
<p><img alt="" height="204" src="image\6083f913f67d467db193be8167395e11.png" width="571"/></p>
<p> ğŸ’¬ <span style="color:#e6b223;">begin</span></p>
<div>
<pre><code class="language-cpp">iterator begin() {
	return _start;
}</code></pre>
</div>
<p>ğŸ’¬ <span style="color:#e6b223;">end</span></p>
<div>
<pre><code class="language-cpp">iterator end() {
	return _finish;
}</code></pre>
</div>
<p></p>
<h3 id="0x01%20%E5%AE%9E%E7%8E%B0%20const%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%20begin%20%E5%92%8C%20end">0x01 å®ç° const è¿­ä»£å™¨çš„ begin å’Œ end</h3>
<p><img alt="" height="111" src="https://img-blog.csdnimg.cn/271a9335ba2047cdbf35f4cba5e1df92.gif" width="109"/><span style="color:#ad720d;">const </span>ç±»å‹çš„è¿­ä»£å™¨ï¼Œå³å¯è¯»ä¸å¯å†™ã€‚åœ¨å®ç°çš„æ—¶å€™ç”¨<span style="color:#ad720d;"> const </span>ä¿®é¥°å³å¯ï¼š</p>
<p>ğŸ’¬ begin</p>
<div>
<pre><code class="language-cpp">const_iterator begin() const {
	return _start;
}</code></pre>
</div>
<p>ğŸ’¬ end</p>
<div>
<pre><code class="language-cpp">const_iterator end() const {
	return _finish;
}</code></pre>
</div>
<p></p>
<h3 id="0x02%20%E6%B5%8B%E8%AF%95%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C">0x02 æµ‹è¯•å®ç°æ•ˆæœ</h3>
<p>ğŸ’¬ æµ‹è¯•è¿­ä»£å™¨çš„æ•ˆæœï¼š</p>
<div>
<pre><code class="language-cpp">	void test_vector1() {
		vector&lt;int&gt; v;
		v.push_back(1);
		v.push_back(2);
		v.push_back(3);
		v.push_back(4);
		v.push_back(5);
		v.push_back(6);

		for (size_t i = 0; i &lt; v.size(); i++) {
			cout &lt;&lt; v[i] &lt;&lt; " ";
		}
		cout &lt;&lt; endl;

		// è¿­ä»£å™¨
		vector&lt;int&gt;::iterator it = v.begin();
		while (it != v.end()) {
			cout &lt;&lt; *it &lt;&lt; " ";
			it++;
		}
		cout &lt;&lt; endl;
    }</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="121" src="image\0559614402074052ab57a51f4a19c26a.png" width="485"/></p>
<p></p>
<p>ğŸ’¬ æˆ‘ä»¬çŸ¥é“ï¼Œè€è€å®å®åœ°å®ç°è¿­ä»£å™¨ï¼ŒèŒƒå›´forä¹Ÿå°±èƒ½ç”¨äº†ï¼Œæˆ‘ä»¬æ¥è¯•è¯•ï¼š</p>
<div>
<pre><code class="language-cpp">	void test_vector1() {
		vector&lt;int&gt; v;
		v.push_back(1);
		v.push_back(2);
		v.push_back(3);
		v.push_back(4);
		v.push_back(5);
		v.push_back(6);

		// ä¸‹æ ‡ + []
		for (size_t i = 0; i &lt; v.size(); i++) {
			cout &lt;&lt; v[i] &lt;&lt; " ";
		}
		cout &lt;&lt; endl;

		// è¿­ä»£å™¨
		vector&lt;int&gt;::iterator it = v.begin();
		while (it != v.end()) {
			cout &lt;&lt; *it &lt;&lt; " ";
			it++;
		}
		cout &lt;&lt; endl;
		
		// èŒƒå›´for
		for (auto e : v) {
			cout &lt;&lt; e &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="163" src="image\2781e167480a4ba2b5309ce6deb0fd58.png" width="525"/></p>
<p><img alt="" height="162" src="image\dc81bd27dfe04544b2dab46ffe1f130b.png" width="146"/> è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»è¿˜åŸå¥½äº†ä¸Šä¸€ç« ä»‹ç»çš„<span style="color:#4da8ee;"> vector </span>çš„ä¸‰ç§éå†æ–¹å¼ã€‚</p>
<p></p>
<p>ğŸ’¬ æµ‹è¯•è¿­ä»£å™¨çš„ "å†™" ï¼š</p>
<div>
<pre><code class="language-cpp">	void test_vector2() {
		vector&lt;int&gt; v;
		v.push_back(1);
		v.push_back(2);
		v.push_back(3);
		v.push_back(4);
		for (auto e : v) cout &lt;&lt; e &lt;&lt; " ";
		cout &lt;&lt; endl;

		// è¿­ä»£å™¨
		vector&lt;int&gt;::iterator it = v.begin();
		while (it != v.end()) {
			*it *= 2;
			it++;
		}
		for (auto e : v) cout &lt;&lt; e &lt;&lt; " ";
	}</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="136" src="image\4f09c63bab3d4acaa130df8be3d08e39.png" width="454"/></p>
<p></p>
<p>ğŸ’¬ æµ‹è¯•ä¸€ä¸‹ <span style="color:#ad720d;">const </span>è¿­ä»£å™¨ï¼š</p>
<div>
<pre><code class="language-cpp">	void test_vector3() {
		vector&lt;int&gt; v;
		v.push_back(1);
		v.push_back(2);
		v.push_back(3);
		v.push_back(4);

		// const è¿­ä»£å™¨
		vector&lt;int&gt;::const_iterator it = v.begin();
		while (it != v.end()) {
			cout &lt;&lt; *it &lt;&lt; " ";
			it++;
		}
		cout &lt;&lt; endl;
	}</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="132" src="image\d1e646af73eb4cff8490d75b1ae4fa22.png" width="457"/></p>
<p></p>
<p>âŒ å¦‚æœå¯¹ <span style="color:#e6b223;">const</span> è¿­ä»£å™¨è¿›è¡Œ "å†™" æ“ä½œï¼š</p>
<p><img alt="" height="84" src="image\76b8112a7226431d8180304589988501.png" width="220"/>  <span style="color:#be191c;"><span style="background-color:#fbd4d0;">error C3892: â€œitâ€: ä¸èƒ½ç»™å¸¸é‡èµ‹å€¼</span></span></p>
<p><img alt="" height="135" src="image\5fb62b28aa364cf0b984a95f2c86761a.png" width="137"/> â€¦â€¦ æµ‹è¯•æˆåŠŸï¼Œæœç„¶ä¸è¡Œï¼Œä¸è¡Œå°±å¯¹äº†ã€‚</p>
<p></p>
<h3 id="0x00%C2%A0%E5%AE%9E%E7%8E%B0%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%8C%BA%E9%97%B4">0x03 å®ç°è¿­ä»£å™¨åŒºé—´</h3>
<p><img alt="" height="144" src="image\615e91a9d1f0424ebf23f164a01b31d7.png" width="388"/>â€‹</p>
<p><img alt="" height="91" src="image\ae5da8075ca749898b115e859ef7f773.png" width="92"/>æˆ‘ä»¬åœ¨æ„é€ æ—¶éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨è¿­ä»£å™¨åŒºé—´å¿…é¡»æ˜¯å·¦é—­å³å¼€ â€”â€” <img alt="(\, first, \, last\, ]" src="https://latex.codecogs.com/gif.latex?%28%5C%2C%20first%2C%20%5C%2C%20last%5C%2C%20%5D"/>â€‹  .</p>
<div>
<p class="img-center"><img alt="" height="43" src="image\9c16b72b9018452cbbe73f1f9951f233.png" width="437"/></p>
</div>
<p><span style="color:#a5a5a5;">ï¼ˆä¸€ä¸ªç±»æ¨¡æ¿çš„æˆå‘˜å‡½æ•°ï¼Œåˆå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ï¼‰</span></p>
<p>ğŸ’¬ è¿­ä»£å™¨åŒºé—´ï¼š</p>
<div>
<pre><code class="language-cpp">/* è¿­ä»£å™¨åŒºé—´ */
template &lt;class InputIterator&gt;  // ç±»æ¨¡æ¿çš„æˆå‘˜å‡½æ•°åˆå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æ¨¡æ¿
vector(InputIterator first, InputIterator last)
	: _start(nullptr)
	, _finish(nullptr)
	, _eos(nullptr) 
{
	while (first != last) {   // éµå¾ªå·¦é—­å³å¼€
		// é€ä¸ªæ’å…¥
		push_back(*first);
		first++;
	}
}</code></pre>
</div>
<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ç”¨è¿­ä»£å™¨åŒºé—´å»åˆå§‹åŒ– <span style="color:#4da8ee;">vector</span> äº†ã€‚</p>
<p></p>
<p>â“ ä¸ºä»€ä¹ˆè¿™é‡Œè¦å«<span style="color:#4da8ee;"> </span><span style="color:#be191c;">InputIterator</span>ï¼Ÿä¸ç”¨å®ƒè¡Œä¸è¡Œï¼Ÿ</p>
<p>æƒ³è¦çŸ¥é“è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆè®²è§£ä¸€ä¸‹è¿­ä»£å™¨çš„åˆ†ç±»ã€‚</p>
<p></p>
<h3 id="%C2%A00x01%C2%A0%E6%B5%85%E8%B0%88%E8%BF%AD%E4%BB%A3%E5%99%A8%E7%9A%84%E5%88%86%E7%B1%BB"> 0x04 æµ…è°ˆè¿­ä»£å™¨çš„åˆ†ç±»</h3>
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td><strong>è¿­ä»£å™¨</strong></td><td><strong>å¯¹åº”ç±»å‹</strong></td></tr><tr><td> <p><strong>A ğŸ‘´ è¾“å…¥ / è¾“å‡ºè¿­ä»£å™¨ï¼š</strong>input_iterator  /  output_iterator</p> <p>* ç‰¹ç‚¹ï¼šå•æ­¥å‘å‰è¿­ä»£ï¼Œä¸å¯å†™ / å•æ­¥å‘å‰è¿­ä»£ï¼Œå¯å†™</p> </td><td> <p>æ— å¯¹åº”ç±»å‹</p> </td></tr><tr><td> <p><strong>B ğŸ§“ å•å‘è¿­ä»£å™¨ï¼š</strong>forward_iterator</p> <p>* ç‰¹ç‚¹ï¼šæ»¡è¶³ä»¥ä¸Šæ‰€æœ‰åŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½ ++ </p> <p>ï¼ˆä¸èƒ½ - -æ²¡æœ‰ rbegin / rendï¼‰</p> </td><td> <p><a class="link-info" href="https://www.cplusplus.com/reference/forward_list/" title="&lt;forward_list&gt;">&lt;forward_list&gt;</a>         ï¼ˆC++11ï¼‰</p> <p><a href="https://www.cplusplus.com/reference/unordered_map/" title="&lt;unordered_map&gt;">&lt;unordered_map&gt;</a>  ï¼ˆC++11ï¼‰</p> <p><a href="https://www.cplusplus.com/reference/unordered_set/" title="&lt;unordered_set&gt;">&lt;unordered_set&gt;</a>    ï¼ˆC++11ï¼‰</p> </td></tr><tr><td> <p><strong>C ğŸ‘¨ åŒå‘è¿­ä»£å™¨ï¼š</strong>bidirectional_iterator</p> <p>* ç‰¹ç‚¹ï¼šæ»¡è¶³ä»¥ä¸ŠåŠŸèƒ½ï¼Œå¹¶ä¸”èƒ½ ++ï¼Œè¿˜èƒ½ - -</p> </td><td> <p><a href="https://www.cplusplus.com/reference/list/?kw=%3Clist%3E" title="&lt;list&gt;">&lt;list&gt;</a></p> <p><a href="https://www.cplusplus.com/reference/map/" title="&lt;map&gt;">&lt;map&gt;</a></p> <p><a href="https://www.cplusplus.com/reference/set/" title="&lt;set&gt;">&lt;set&gt;</a></p> </td></tr><tr><td> <p><strong>D ğŸ‘¶ éšæœºè¿­ä»£å™¨ï¼š</strong>randomaccess_iterator</p> <p>* ç‰¹ç‚¹ï¼šæ»¡è¶³ä»¥ä¸Šæ‰€æœ‰åŠŸèƒ½ï¼Œèƒ½ ++ èƒ½ - -ï¼Œè¿˜èƒ½ + å’Œ -  </p> </td><td> <p><a href="https://www.cplusplus.com/reference/vector/" title="&lt;vector&gt;">&lt;vector&gt;</a></p> <p><a href="https://www.cplusplus.com/reference/deque/" title="&lt;deque&gt;">&lt;deque&gt;</a></p> </td></tr></tbody></table>
<p></p>
<blockquote>
<p style="text-align:center;">å°±åŠŸèƒ½ä¸Šæ¥è¯´ï¼š<img alt="D&gt;C&gt;B&gt;A" class="mathcode" src="https://latex.codecogs.com/gif.latex?D%3EC%3EB%3EA"/>  ï¼ˆä¸€ä»£æ›´æ¯”ä¸€ä»£å¼ºï¼‰</p>
</blockquote>
<p><img alt="" height="129" src="https://img-blog.csdnimg.cn/072906e8385d4a3cae467cab1a8c62bf.gif" width="153"/> å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»§æ‰¿å…³ç³»ï¼šä¸‹é¢æ˜¯å­ç±»ï¼Œä¸Šé¢æ˜¯çˆ¶ç±»ã€‚</p>
<p>å­ç±»éƒ½æ˜¯ä¸€ä¸ªçˆ¶ç±»ï¼Œå› ä¸ºå®ƒæ»¡è¶³çˆ¶ç±»çš„æ‰€æœ‰ç‰¹å¾ã€‚</p>
<p></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶åœ¨è¯­æ³•ä¸Šå®ƒæ˜¯ä¸ªæ¨¡æ¿ï¼Œå…è®¸ä½ ä¼ ä»»æ„ç±»å‹çš„è¿­ä»£å™¨ï¼Œ</p>
<p>ä½†æ˜¯åœ¨æ›´æ·±å±‚æ¬¡ä¸Šå­˜åœ¨ç€æ›´è¿›ä¸€æ­¥çš„é™åˆ¶ â€”â€”</p>
<p><img alt="" height="85" src="image\6d1502c19d4148c3bf1689835a7b8d59.png" width="663"/></p>
<p>â‘  å®ƒè¦æ±‚ä½ ä¼ éšæœºè¿­ä»£å™¨ï¼Œä½ å°±ä¸èƒ½ç”¨åŒå‘è¿­ä»£å™¨ã€‚å› ä¸ºåªæœ‰éšæœºè¿­ä»£å™¨æ‰èƒ½æ»¡è¶³éšæœºè¿­ä»£å™¨çš„æ‰€æœ‰æ“ä½œã€‚æ¢è¨€ä¹‹ï¼Œ<span style="background-color:#f9eda6;">ä½ ä¸èƒ½ç”¨åŠŸèƒ½æ¯”å®ƒæŒ‡å®šçš„è¿­ä»£å™¨å°‘çš„è¿­ä»£å™¨ã€‚</span><span style="color:#a5a5a5;">ï¼ˆå¯ä»¥ç†è§£ä¸ºæƒé™çš„æ”¾å¤§ï¼‰</span></p>
<p></p>
<p><img alt="" height="132" src="image\eaf4d3970c76452194b82a17d766e766.png" width="897"/></p>
<p>â‘¡ å®ƒè¦æ±‚ä½ ç”¨åŒå‘è¿­ä»£å™¨ï¼Œä½ å°±ä¸èƒ½ç”¨å•å‘è¿­ä»£å™¨ï¼Œå› ä¸ºå•é¡¹è¿­ä»£å™¨ä¸èƒ½æ»¡è¶³æ‰€æœ‰åŒå‘è¿­ä»£å™¨çš„æ“ä½œã€‚<span style="background-color:#f9eda6;">ä½†æ˜¯ä½ å¯ä»¥ç”¨æ¯”å®ƒåŠŸèƒ½å¤šçš„è¿­ä»£å™¨</span>ï¼Œæ¯”å¦‚éšæœºè¿­ä»£å™¨ï¼Œå› ä¸ºéšæœºè¿­ä»£å™¨ä¹Ÿèƒ½æ»¡è¶³åŒå‘è¿­ä»£å™¨çš„æ“ä½œã€‚å› ä¸ºéšæœºè¿­ä»£å™¨æ˜¯åŒå‘è¿­ä»£å™¨çš„å­ç±»ï¼Œå®ƒæ»¡è¶³çˆ¶ç±»ï¼ˆåŒå‘è¿­ä»£å™¨ï¼‰çš„æ‰€æœ‰åŠŸèƒ½ã€‚<span style="color:#a5a5a5;">ï¼ˆå¯ä»¥ç†è§£ä¸ºæƒé™çš„ç¼©å°ï¼‰</span></p>
<blockquote>
<p>é™åˆ¶ä½ ç”¨ "å„¿å­" ï¼Œä½ å°±ä¸èƒ½ç”¨ "çˆ¸çˆ¸" </p>
<p>ä½†æ˜¯ï¼Œé™åˆ¶ä½ ç”¨ "çˆ¸çˆ¸"ï¼Œä½ å¯ä»¥ç”¨ "å„¿å­" </p>
</blockquote>
<p><img alt="" height="101" src="image\1a422a178db642f9989bd4e83d3a6a86.png" width="110"/> æˆ‘ä»¬å¼„æ˜ç™½äº†è¿™äº›ï¼Œæˆ‘ä»¬å†å›åˆ°åˆšæ‰æçš„é—®é¢˜ â€”â€”</p>
<p>â“ ä¸ºä»€ä¹ˆè¿™é‡Œè¦å«<span style="color:#4da8ee;"> InputIterator</span>ï¼Ÿä¸ç”¨å®ƒè¡Œä¸è¡Œï¼Ÿ</p>
<p>é¦–å…ˆï¼ŒInputIterator æ˜¯è¾“å…¥è¿­ä»£å™¨ï¼Œè¿™ä¹ˆå†™æ˜¯ä¸ºäº†æ»¡è¶³å‘½åè§„èŒƒã€‚</p>
<p>å¯ä»¥ä¸ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å•å‘è¿­ä»£å™¨ã€åŒå‘è¿­ä»£å™¨ï¼Œä¹Ÿå¯ä»¥ä¼ éšæœºè¿­ä»£å™¨ã€‚</p>
<p>å› ä¸ºè¿™äº›è¿­ä»£å™¨éƒ½æ»¡è¶³è¾“å…¥è¿­ä»£å™¨çš„æ‰€æœ‰åŠŸèƒ½ã€‚</p>
<p></p>
<p></p>
<h2 id="%E2%85%A2.%20%E5%AE%9E%E7%8E%B0%20vector%20%E7%9A%84%E5%A2%9E%E5%88%A0%E6%9F%A5%E6%94%B9">â…¢. vector çš„æ‰©å®¹</h2>
<h3 id="0x00%20%E5%BC%95%E5%85%A5%EF%BC%9A%E5%85%88%E6%8A%8A%20reserve%20%E5%86%99%E5%92%AF">0x00 å¼•å…¥ï¼šå…ˆæŠŠ reserve å†™å’¯</h3>
<p>æˆ‘ä»¬è¦å®ç°<span style="color:#4da8ee;"> vector</span> çš„<span style="color:#e6b223;"> insert</span>ï¼Œè‚¯å®šéœ€è¦ç”¨åˆ°å¢å®¹ï¼Œæˆ‘ä»¬è¿™é‡Œå½“ç„¶ä¸ä¼šå‚»å‚»åœ°é‡å†™ä¸€éã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠåˆšæ‰å†™<span style="color:#e6b223;"> push_back</span> å®ç°çš„å¢å®¹éƒ¨åˆ†æ‹å‡ºæ¥ï¼Œå®ç°ä¸€ä¸ª <span style="color:#956fe7;">CheckCapacity </span>å‡½æ•°ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬è¿™é‡Œå¯ä»¥ç›´æ¥å®ç°å‡º <span style="color:#e6b223;">reserve</span>ï¼Œåˆ°æ—¶å€™å®ç° <span style="color:#e6b223;">resize</span> ä¹Ÿå¯ä»¥å¤ç”¨å¾—ä¸Šï¼Œå²‚ä¸ç¾å“‰ï¼Ÿ</p>
<p class="img-center"><img alt="" src="image\31c836a67003174535a37a7ab18016e8.png"/></p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬å…ˆå®ç° <span style="color:#e6b223;">reserve</span>ï¼Œé¡ºä¾¿æŠŠ <span style="color:#e6b223;">resize</span> å†å®ç°ä¸€ä¸‹ï¼Œå†å»å®ç° <span style="color:#e6b223;">insert </span>ã€‚</p>
<p></p>
<h3 id="0x01%20%E5%AE%9E%E7%8E%B0%20reserve">0x01 å®ç° reserve</h3>
<p class="img-center"><img alt="" height="95" src="https://img-blog.csdnimg.cn/img_convert/a3b0cb4eae73522e4d027ae5c90282d4.gif" width="96"/></p>
<p>ç›´æ¥å¤åˆ¶ç²˜è´´åˆšæ‰å®ç°çš„ <span style="color:#e6b223;">push_back</span> ä¸­ "æ£€æŸ¥å¦éœ€è¦å¢å®¹" çš„éƒ¨åˆ†ï¼Œç„¶åç¨ä½œä¿®æ”¹å³å¯ã€‚</p>
<p><img alt="" height="288" src="image\dfaf23c9fff9491e81cfdeb1041bf915.png" width="574"/></p>
<p>é¦–å…ˆè¿˜æ˜¯æ£€æŸ¥æ˜¯å¦çœŸçš„éœ€è¦æ‰©å®¹ï¼Œå¦‚æœä¼ å…¥çš„<span style="color:#0d0016;"> new_capacity</span> ç¡®å®æ¯”ç°æœ‰ <span style="color:#e6b223;">capacity </span>è¦å¤§ï¼Œ</p>
<p>å¹¶ä¸” <span style="color:#be191c;"><em>_finish == _eos</em></span> æ—¶ï¼Œæˆ‘ä»¬å°±è¿›è¡Œæ‰©å®¹ï¼Œè¿™ç›¸å½“äºæ˜¯ä¸€ä¸ªæ£€æµ‹ï¼Œ</p>
<p>é˜²æ­¢æ ¹æœ¬å°±ä¸éœ€è¦æ‰©å®¹ï¼Œè¿˜ç»™å®ƒæ‰©å®¹çš„æƒ…å†µã€‚è¿˜æ˜¯åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p>
<p><strong>â‘  å¼€æ–°ç©ºé—´ï¼š</strong><span style="color:#956fe7;">new </span>ç©ºé—´çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ç›´æ¥ç»™ä¸Šä¼ å…¥çš„ <span style="color:#0d0016;">new_capacity</span> å³å¯ï¼Œè¦æ±‚å¼€å¤šå°‘å°±å¼€å¤šå°‘ã€‚</p>
<p><strong>â‘¡ æ‹·è´æ•°æ®ï¼š</strong>æš‚æ—¶å…ˆç”¨ <span style="color:#e6b223;">memset</span><span style="color:#a5a5a5;">ï¼ˆå¦‚æœä½ çŸ¥é“ memcpy çš„é—®é¢˜ï¼Œå…ˆåˆ«æ€¥ï¼Œæˆ‘ä»¬æœ€åå†ä¸“é—¨æ¢è®¨ï¼‰</span></p>
<p><strong>â‘¢ é‡Šæ”¾æ—§ç©ºé—´ï¼š</strong>é‡Šæ”¾ <span style="color:#0d0016;"><em>_start</em></span>ï¼Œ<span style="color:#956fe7;">new</span>[] å¯¹åº” <span style="color:#956fe7;">delete</span>[] å»é‡Šæ”¾ã€‚</p>
<p><strong>â‘£ æŒ‡å‘æ–°ç©ºé—´ï¼š</strong>æŠŠ <span style="color:#e6b223;">size</span>() æå‰ç®—å¥½ï¼Œç„¶åè®©<strong> </strong><span style="color:#0d0016;"><em>_start</em></span>ã€<span style="color:#0d0016;"><em>_finish</em></span> å’Œ <span style="color:#0d0016;"><em>_eos </em>æŒ‡å‘æ–°ç©ºé—´ã€‚</span></p>
<p>ğŸ’¬ <span style="color:#e6b223;">reserve</span></p>
<div>
<pre><code class="language-cpp">/* reserve */
void reserve(size_t new_capacity) {
	if (new_capacity &gt; capacity()) {  			// æ£€æŸ¥æ˜¯å¦çœŸçš„éœ€è¦æ‰©å®¹
		if (_finish == _eos) {
			size_t sz = size();   // æå‰æŠŠsizeç®—å¥½

			T* tmp = new T[new_capacity];
			if (_start) {
				memcpy(tmp, _start, sizeof(T) * size());  // å†æŠŠåŸç©ºé—´çš„æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´ï¼Œå¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´ã€‚
				delete[] _start;                          // å¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´
			}

			_start = tmp;                    // æŒ‡å‘æ–°ç©ºé—´
			_finish = tmp + sz;			     // ç°åœºç®—size() ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºstartå·²ç»è¢«æ›´æ–°æˆtmpäº†
			_eos = _start + new_capacity;
		}
	}
}</code></pre>
</div>
<p></p>
<h3 id="0x02%20%E8%AE%A9%20push_back%20%E5%A4%8D%E7%94%A8%20reserve">0x02 è®© push_back å¤ç”¨ reserve</h3>
<p><img alt="" height="48" src="https://img-blog.csdnimg.cn/b39fc3544c9549bb804d8186f61f69af.gif" width="48"/> å®ç°å®Œ<span style="color:#e6b223;"> reserve </span>ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåˆšæ‰çš„ <span style="color:#e6b223;">push_back </span>ç®€åŒ–ä¸€ä¸‹ï¼š</p>
<p>æœ‰äº† <span style="color:#e6b223;">reserve</span>ï¼Œæˆ‘ä»¬çš„<span style="color:#e6b223;"> push_back </span>ç›´æ¥å»è°ƒå®ƒå°±å¯ä»¥äº†ï¼Œè¿˜æ˜¯æŒ‰é¦–æ¬¡ç»™4ï¼Œé»˜è®¤æ‰©2å€çš„å½¢å¼èµ°ã€‚</p>
<p>ä¸‰ç›®è¿ç®—ç¬¦å¾—åˆ°çš„ç»“æœä¼ å…¥ <span style="color:#e6b223;">reserve</span>ï¼Œç»“æœå˜æˆ <span style="color:#e6b223;">reserve </span>ä¸­çš„<span style="color:#0d0016;"> new_capacity </span>å‚æ•°ï¼Œ</p>
<p>ç„¶å <span style="color:#e6b223;">reserve </span>æ‰§è¡Œ<span style="color:#956fe7;"> new </span>çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§ä¼ å…¥çš„<span style="color:#0d0016;"> new_capactiy</span> çš„å¤§å°å»å¼€ç©ºé—´ã€‚</p>
<p><img alt="" height="97" src="image\5ebd68ecf5c143a29c2ee02493d1de94.png" width="106"/>â€‹ æœ€åå†æ’å…¥æ•°æ®å³å¯ã€‚æ‰€ä»¥ï¼Œæœ¬è´¨ä¸Šå…¶å®æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>âš¡ push_backï¼š</p>
<div>
<pre><code class="language-cpp">/* å°¾æ’ï¼špush_back */
void push_back(const T&amp; x) {
	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_finish == _eos) {
		// æ‰©å®¹
		reserve(capacity() == 0 ? 4 : capacity() * 2);
	}

	// æ’å…¥æ•°æ®
	*_finish = x; 
	_finish++;
}</code></pre>
</div>
<p></p>
<h3 id="0x03%C2%A0%E4%BD%BF%E7%94%A8%20memcpy%20%E6%8B%B7%E8%B4%9D%E9%97%AE%E9%A2%98">0x03 ä½¿ç”¨ memcpy æ‹·è´é—®é¢˜</h3>
<p><img alt="" height="70" src="image\1d3dfd7a92de4b0ab77a9d1dd493a8da.png" width="85"/> æˆ‘ä»¬ä¸€å¼€å§‹å®ç°çš„<span style="color:#e6b223;"> push_back</span> å°±ç”¨äº†<span style="color:#e6b223;"> memcpy</span> è¿›è¡Œæ‹·è´çš„ï¼Œ</p>
<p>ç„¶åæˆ‘ä»¬åˆšæ‰å®ç°äº† <span style="color:#e6b223;">reserve</span>ï¼Œå› è€Œåˆè®© <span style="color:#e6b223;">push_back </span>å¤ç”¨äº†<span style="color:#e6b223;"> reserve</span>ï¼Œ </p>
<p><span style="color:#e6b223;">reserve</span><span style="color:#ad720d;"> </span>æ¬å…ƒç´ çš„æ—¶å€™ä¹Ÿæ˜¯ <span style="color:#e6b223;">memcpy </span>å»è¿›è¡Œæ‹·è´çš„ï¼Œå…¶å®è¿™é‡Œå­˜åœ¨ä¸€ä¸ªéå¸¸ä¸¥é‡çš„é—®é¢˜ï¼</p>
<p></p>
<p>ğŸ’¬ æˆ‘ä»¬ç°åœ¨ç»™å‡ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼š</p>
<pre><code class="language-cpp">	void test_vector10() {
		vector&lt;string&gt; v;      // åœ¨vectoré‡Œæ”¾string
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");
		v.push_back("233333333333333333");

		for (auto&amp; e : v) {
			cout &lt;&lt; e &lt;&lt; " ";
		}
		cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="362" src="image\10133e141b5c4fb7a9ec91446eb703d5.png" width="528"/></p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼ŸåŸå› åœ¨äºæˆ‘ä»¬åœ¨æ‰©å®¹å’Œæ·±æ‹·è´æ—¶ï¼Œç”¨äº†ä¸€ä¸ª <span style="color:#e6b223;">memcpy</span>ï¼</p>
<p><span style="color:#e6b223;">push_back</span> è°ƒç”¨<span style="color:#e6b223;"> reserve</span> æ‰©å®¹æ—¶å°±ä¼šå‡ºé—®é¢˜ï¼Œæ ¹æœ¬åŸå› æ˜¯<span style="color:#e6b223;"> memcpy </span>æ˜¯æµ…æ‹·è´ã€‚</p>
<p><img alt="" height="540" src="image\87f4578900304e6ea7e2afa6716f86f6.png" width="462"/></p>
<p><img alt="" height="817" src="image\77aa6f374cd747dfa98996e3230f6d00.png" width="601"/></p>
<p><strong>é—®é¢˜åˆ†æï¼š</strong></p>
<p><span style="color:#e6b223;">memcpy </span>æ˜¯å†…å­˜çš„äºŒè¿›åˆ¶æ ¼å¼æ‹·è´ï¼Œ</p>
<p>å°†ä¸€æ®µå†…å­˜ç©ºé—´ä¸­å†…å®¹åŸå°ä¸åŠ¨çš„æ‹·è´åˆ°å¦å¤–ä¸€æ®µå†…å­˜ç©ºé—´ä¸­ã€‚</p>
<p>å¦‚æœæ‹·è´çš„æ˜¯è‡ªå®šä¹‰ç±»å‹çš„å…ƒç´ ï¼Œ<span style="color:#e6b223;">memcpy </span>æ—¢é«˜æ•ˆåˆä¸ä¼šå‡ºé”™ï¼Œ</p>
<p>ä½†å¦‚æœæ‹·è´çš„æ˜¯è‡ªå®šä¹‰ç±»å‹å…ƒç´ ï¼Œå¹¶ä¸”è‡ªå®šä¹‰ç±»å‹å…ƒç´ ä¸­æ¶‰åŠåˆ°èµ„æºç®¡ç†æ—¶ï¼Œ</p>
<p>å°±ä¼šå‡ºé”™ï¼Œå› ä¸ºmemcpyçš„æ‹·è´å®é™…æ˜¯æµ…æ‹·è´ã€‚</p>
<p></p>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>å¦‚æœå¯¹è±¡ä¸­æ¶‰åŠåˆ°èµ„æºç®¡ç†æ—¶ï¼Œåƒä¸‡ä¸èƒ½ä½¿ç”¨<span style="color:#e6b223;"> memcpy </span>è¿›è¡Œå¯¹è±¡ä¹‹é—´çš„æ‹·è´ï¼Œ</p>
<p> <img alt="" height="111" src="image\a8fabb951f5f4c7a8641628e928de4de.png" width="103"/> å› ä¸º <span style="color:#e6b223;">memcpy</span> æ˜¯æµ…æ‹·è´ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·å†…å­˜æ³„æ¼ç”šè‡³ç¨‹åºå´©æºƒï¼</p>
<p></p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>ä¸è¦ä½¿ç”¨ <span style="color:#e6b223;">memcpy</span>ï¼Œæˆ‘ä»¬æ‰‹åŠ¨å»æ‹·ï¼</p>
<p>âš¡ æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ reserveï¼š</p>
<pre><code class="language-cpp">/* reserve */
void reserve(size_t new_capacity) {
	if (new_capacity &gt; capacity()) {  			// æ£€æŸ¥æ˜¯å¦çœŸçš„éœ€è¦æ‰©å®¹
		if (_finish == _eos) {
			size_t sz = size();   // æå‰æŠŠsizeç®—å¥½

			T* tmp = new T[new_capacity];
			if (_start) {
				// memcpy(tmp, _start, sizeof(T) * size());   æœ‰é—®é¢˜ï¼

					//è‡ªå·±æŠŠåŸç©ºé—´çš„æ•°æ®æ‹·è´åˆ°æ–°ç©ºé—´
				for (size_t i = 0; i &lt; sz; i++) { 
					// å¦‚æœTæ˜¯intï¼Œä¸€ä¸ªä¸€ä¸ªæ‹·è´æ²¡é—®é¢˜
					// å¦‚æœTæ˜¯stringç­‰è‡ªå®šä¹‰é—®é¢˜ï¼Œä¸€ä¸ªä¸€ä¸ªæ‹·è´è°ƒç”¨çš„æ˜¯Tçš„æ·±æ‹·è´ï¼Œä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚
					tmp[i] = _start[i];  
				}
					
				delete[] _start;                          // å¹¶é‡Šæ”¾åŸæœ‰çš„æ—§ç©ºé—´
			}

			_start = tmp;                    // æŒ‡å‘æ–°ç©ºé—´
			_finish = tmp + sz;			     // ç°åœºç®—size() ä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºstartå·²ç»è¢«æ›´æ–°æˆtmpäº†
			_eos = _start + new_capacity;
		}
	}
}</code></pre>
<p>å¦‚æœ <span style="color:#0d0016;">T</span> æ˜¯<span style="color:#ad720d;"> int</span>ï¼Œä¸€ä¸ªä¸€ä¸ªæ‹·è´æ²¡é—®é¢˜ï¼Œ<br/> å¦‚æœ <span style="color:#0d0016;">T</span> æ˜¯<span style="color:#ad720d;"> string</span> ç­‰è‡ªå®šä¹‰é—®é¢˜ï¼Œä¸€ä¸ªä¸€ä¸ªæ‹·è´è°ƒç”¨çš„æ˜¯ <span style="color:#0d0016;">T </span>çš„æ·±æ‹·è´ï¼Œä¹Ÿä¸ä¼šå‡ºé—®é¢˜ã€‚</p>
<p></p>
<p>æˆ‘ä»¬æ‹¿åˆšæ‰çš„æµ‹è¯•ç”¨ä¾‹æµ‹è¯•ä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼š</p>
<p><img alt="" height="190" src="image\3fe99535f22a4dfeb3a359f3c3f6f73c.png" width="639"/></p>
<p></p>
<h3 id="0x03%C2%A0%E5%AE%9E%E7%8E%B0%20resize">0x03 å®ç° resize</h3>
<p>ğŸ’¬ resizeï¼š</p>
<div>
<pre><code class="language-cpp">/* resize */
void resize(size_t new_capacity, const T&amp; val = T()) {
	// å¦‚æœå®¹é‡è¶³å¤Ÿ
	if (new_capacity &lt; size()) {       
		_finish = _start + new_capacity;   // ç›´æ¥ä¿®æ”¹ _finish
	}
	else {  // å®¹é‡ä¸å¤Ÿ
		if (new_capacity &gt; capacity()) {   // æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹
			reserve(new_capacity); 
		}
		while (_finish != _start + new_capacity) {   // åˆå§‹åŒ–
			*_finish = val;  // æŒ‰valåˆå§‹åŒ–ï¼Œé»˜è®¤ç¼ºçœä¸º T()
			_finish++;
		}
	}
}</code></pre>
</div>
<p><span style="color:#4da8ee;">vector</span> çš„ <span style="color:#e6b223;">resize</span> å¦‚æœä¸ç»™ç¬¬äºŒä¸ªå‚æ•°ï¼Œé»˜è®¤ç»™çš„æ˜¯å…¶å¯¹åº”ç±»å‹çš„ç¼ºçœå€¼ä½œä¸º "å¡«å……å€¼"ã€‚</p>
<p>ç”±äºè¿™é‡Œæˆ‘ä»¬ä¸çŸ¥é“å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œè¿™é‡Œç¼ºçœå€¼æˆ‘ä»¬ä½¿ç”¨åŒ¿åå¯¹è±¡<span style="color:#0d0016;"> T</span>() ï¼Œ</p>
<p>æ­¤å¤–å› ä¸ºåŒ¿åå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä»…åœ¨å½“å‰ä¸€è¡Œï¼Œè¿™é‡Œå¿…é¡»è¦ç”¨ <span style="color:#ad720d;">const</span> å¼•ç”¨åŒ¿åå¯¹è±¡ï¼Œ</p>
<p><img alt="" height="151" src="image\1dbe2adeffd245c8afc9526466f8886a.png" width="206"/> å¯ä»¥ç†è§£ä¸ºå»¶é•¿å…¶ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p></p>
<h3 id="0x04%C2%A0%E5%AE%9E%E7%8E%B0%20pop_back">0x04 å®ç° pop_back</h3>
<p><img alt="" height="96" src="image\bf270ee81bf84ff58d38bdecce0a9f75.png" width="97"/><span style="color:#e6b223;"> pop_back</span> å¾ˆç®€å•ï¼Œåªéœ€è¦ <em><span style="color:#be191c;">_finish--</span></em> å°±å¯ä»¥äº†ã€‚</p>
<p> ä½†æ˜¯éœ€è¦è€ƒè™‘åˆ å®Œçš„æƒ…å†µï¼Œæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨æš´åŠ›çš„å¤„ç†æ–¹å¼ â€”â€” æ–­è¨€ã€‚</p>
<p></p>
<p>ğŸ’¬ push_back</p>
<pre><code class="language-cpp">/* å°¾åˆ ï¼špop_back */
void pop_back() {
	assert(_finish &gt; _start);
	_finish--;
}</code></pre>
<p>æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">	void test_vector6() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;

		v1.pop_back();
		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
 ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š
</blockquote>
<p><img alt="" height="134" src="image\83f64818e6284ab0b8a2136e04a11054.png" width="462"/></p>
<p></p>
<p><img alt="" height="50" src="image\4c185267f2a848f99ff58c7fb9088ef0.png" width="51"/> æµ‹è¯•ä¸€ä¸‹æ–­è¨€æ•ˆæœï¼š</p>
<pre><code class="language-cpp">	void test_vector6() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;

		v1.pop_back();
		v1.pop_back();
		v1.pop_back();
		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p> <img alt="" height="254" src="image\2516763858ab479386b5b205c08a8c3c.png" width="448"/></p>
<p></p>
<p></p>
<h2 id="%E2%85%A3.%20%E6%B5%85%E8%B0%88%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98">â…£. æµ…è°ˆè¿­ä»£å™¨å¤±æ•ˆé—®é¢˜</h2>
<h3 id="0x00%20%E5%BC%95%E5%85%A5%EF%BC%9A%E9%80%9A%E8%BF%87%20insert%20%2F%20erase%20%E4%BA%86%E8%A7%A3%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98">0x00 å¼•å…¥ï¼šé€šè¿‡ insert / erase äº†è§£è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜</h3>
<p><img alt="" height="126" src="image\7553b02bfa9f49f49e3e29b3179af184.png" width="116"/>æˆ‘ä»¬é€šè¿‡å®ç°<span style="color:#4da8ee;"> vector</span> çš„<span style="color:#e6b223;"> insert</span> å’Œ <span style="color:#e6b223;">erase</span>ï¼Œå»é¡ºå¸¦è®²è§£è¿­ä»£å™¨å¤±æ•ˆçš„é—®é¢˜ã€‚</p>
<p>â“ ä»€ä¹ˆæ˜¯è¿­ä»£å™¨å¤±æ•ˆï¼Ÿ</p>
<blockquote>
<p>" è¿­ä»£å™¨å¤±æ•ˆæ˜¯ä¸€ç§ç°è±¡ï¼Œç”±ç‰¹å®šæ“ä½œå¼•å‘ï¼Œè¿™äº›ç‰¹å®šæ“ä½œå¯¹å®¹å™¨è¿›è¡Œæ“ä½œï¼Œä½¿å¾—è¿­ä»£å™¨ä¸æŒ‡å‘å®¹å™¨å†…çš„ä»»ä½•å…ƒç´ ï¼Œæˆ–è€…ä½¿å¾—è¿­ä»£å™¨æŒ‡å‘çš„å®¹å™¨å…ƒç´ å‘ç”Ÿäº†æ”¹å˜ã€‚"</p>
</blockquote>
<p>è¿­ä»£å™¨çš„ä¸»è¦ä½œç”¨å°±æ˜¯è®©ç®—æ³•èƒ½å¤Ÿä¸ç”¨å…³å¿ƒåº•å±‚æ•°æ®ç»“æ„ï¼Œå…¶åº•å±‚å®é™…å°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œ</p>
<p>æˆ–è€…æ˜¯å¯¹æŒ‡é’ˆè¿›è¡Œäº†å°è£…ï¼Œæ¯”å¦‚ï¼š<span style="color:#4da8ee;">vector </span>çš„è¿­ä»£å™¨å°±æ˜¯åŸç”Ÿæ€æŒ‡é’ˆ <span style="color:#ad720d;">T* </span>ã€‚</p>
<p>å› æ­¤è¿­ä»£å™¨å¤±æ•ˆï¼Œå®é™…å°±æ˜¯è¿­ä»£å™¨åº•å±‚å¯¹åº”æŒ‡é’ˆæ‰€æŒ‡å‘çš„ç©ºé—´è¢«é”€æ¯äº†ï¼Œ</p>
<p>è€Œä½¿ç”¨ä¸€å—å·²ç»è¢«é‡Šæ”¾çš„ç©ºé—´ï¼Œé€ æˆçš„åæœæ˜¯ç¨‹åºå´©æºƒï¼Œ</p>
<p>å³ï¼Œå¦‚æœç»§ç»­ä½¿ç”¨å·²ç»å¤±æ•ˆçš„è¿­ä»£å™¨ï¼Œç¨‹åºå¯èƒ½ä¼šå‡ºç°å´©æºƒã€‚</p>
<p></p>
<h3 id="0x01%C2%A0%E5%AE%9E%E7%8E%B0%20insert">0x01 å®ç° insert</h3>
<p>æ’å…¥å¯åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼šâ‘  æ£€æŸ¥ pos æ˜¯å¦è¶Šç•Œ   â‘¡ æ£€æŸ¥æ˜¯å¦éœ€è¦æ‰©å®¹  â‘¢ ç§»åŠ¨æ•°æ®   â‘£ æ’å…¥æ•°æ®</p>
<p></p>
<p>ğŸ’¬ insert</p>
<pre><code class="language-cpp">/* æ’å…¥ */
void insert(iterator pos, const T&amp; x) {
	assert(pos &gt;= _start);
	assert(pos &lt;= _finish);

	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_finish == _eos) {
		// æ‰©å®¹
		reserve(capacity() == 0 ? 4 : capacity() * 2);
	}

	// ç§»åŠ¨æ•°æ®
	iterator end = _finish - 1;
	while (end &gt;= pos) {
		*(end + 1) = *end;
		end--;
	}
			
	// æ’å…¥æ•°æ®
	*pos = x;
	_finish++;
}</code></pre>
<p></p>
<p>ğŸ’¬ æµ‹è¯•ï¼šåœ¨2çš„ä½ç½®å‰æ’å…¥ä¸€ä¸ª20</p>
<pre><code class="language-cpp">	void test_vector7() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		vector&lt;int&gt;::iterator pos = find(v1.begin(), v1.end(), 2);
		if (pos != v1.end()) { 
			v1.insert(pos, 20);
		}

		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="134" src="image\09ca880ad96a4b5fa2972447b478b9b8.png" width="408"/></p>
<p></p>
<p>æˆ‘ä»¬çš„ <span style="color:#e6b223;">insert</span> ä¼¼ä¹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Ÿæˆ‘ä»¬å† <span style="color:#e6b223;">push_back </span>ä¸€ä¸ªæ•°æ®çœ‹çœ‹ï¼Œè®©å®ƒå‡ºç°æ‰©å®¹çš„æƒ…å†µï¼š</p>
<pre><code class="language-cpp">	void test_vector7() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		v1.push_back(4);
		vector&lt;int&gt;::iterator pos = find(v1.begin(), v1.end(), 2);
		if (pos != v1.end()) {
			v1.insert(pos, 20);
		}

		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="159" src="image\68c65cc5975b4ad1a4c8fbc81241fd59.png" width="613"/></p>
<p>è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ã€‚æ‰©å®¹å¯¼è‡´çš„<span style="color:#0d0016;"> pos</span> å¤±æ•ˆï¼Œæˆ‘ä»¬çš„<span style="color:#e6b223;"> insert </span>æ²¡æœ‰å»å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å¦‚æœå‘ç”Ÿæ‰©å®¹ï¼Œæˆ‘ä»¬çš„ <span style="color:#0d0016;">pos</span> æ˜¯ä¸æ˜¯åº”è¯¥å»æ›´æ–°ä¸€ä¸‹ï¼Ÿ</p>
<p>ğŸ’¬ insertï¼š</p>
<pre><code class="language-cpp">/* æ’å…¥ */
void insert(iterator pos, const T&amp; x) {
	assert(pos &gt;= _start);
	assert(pos &lt;= _finish);

	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_finish == _eos) {
		// æ‰©å®¹ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œæ‰©å®¹éœ€è¦æ›´æ–°ä¸€ä¸‹ pos
		size_t len = pos - _start;
		reserve(capacity() == 0 ? 4 : capacity() * 2);

		pos = _start + len;
	}

	// ç§»åŠ¨æ•°æ®
	iterator end = _finish - 1;
	while (end &gt;= pos) {
		*(end + 1) = *end;
		end--;
	}
			
	// æ’å…¥æ•°æ®
	*pos = x;
	_finish++;
}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="154" src="image\04821f11a5ea4c2f8f751de46c0895fb.png" width="611"/></p>
<p></p>
<p>ä½†æ˜¯å¤–é¢çš„<span style="color:#0d0016;"> pos</span>ï¼ˆå®å‚ï¼‰ è¿˜æ˜¯å¤±æ•ˆçš„ï¼Œè¿™é‡Œæ˜¯ä¼ å€¼ï¼Œ<span style="color:#a5a5a5;">pos</span>ï¼ˆå½¢å‚ï¼‰ æ˜¯<span style="color:#0d0016;"> pos</span>ï¼ˆå®å‚ï¼‰ çš„ä¸´æ—¶æ‹·è´ã€‚ </p>
<p class="img-center"><img alt="" height="23" src="image\db8c2b6d9bf04f229c33e600b31ded07.png" width="215"/></p>
<p>å¦‚æœ <span style="color:#e6b223;">insert </span>ä¸­å‘ç”Ÿäº†æ‰©å®¹ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´<span style="color:#0d0016;"> pos</span>ï¼ˆå®å‚ï¼‰æŒ‡å‘ç©ºé—´è¢«é‡Šæ”¾ã€‚</p>
<p><span style="color:#0d0016;">pos</span>ï¼ˆå®å‚ï¼‰ æœ¬èº«å°±æ˜¯ä¸€ä¸ªé‡æŒ‡é’ˆï¼Œè¿™ç§é—®é¢˜æˆ‘ä»¬ç§°ä¹‹ä¸º â€”â€” è¿­ä»£å™¨å¤±æ•ˆ<strong> </strong></p>
<p></p>
<p>â“ å¦‚ä½•è§£å†³è¿™é‡Œçš„è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ï¼Ÿä¼ å¼•ç”¨ï¼Ÿ</p>
<p>ä¼ å¼•ç”¨å½“ç„¶æ—¶ä¸å¥½çš„ï¼Œæœ‰çš„ vector è¿˜ä¼šç¼©å®¹å‘¢ï¼Œä¼ å¼•ç”¨ä¸èƒ½å½»åº•è§£å†³æ‰€æœ‰é—®é¢˜ã€‚</p>
<p></p>
<p>ğŸ” æˆ‘ä»¬æ¥çœ‹çœ‹å¤§ä½¬æ˜¯å¦‚ä½•è§£å†³è¿™ä¸€é—®é¢˜çš„ï¼š</p>
<p><img alt="" height="119" src="image\3cd9c762ba284a05bd578d55f205b01e.png" width="544"/></p>
<p>ç„¶è€Œå®ƒä»¬æ˜¯é€šè¿‡è¿”å›å€¼å»æ‹¿çš„ï¼Œè¿”å›æ–°æ’å…¥çš„è¿­ä»£å™¨ã€‚</p>
<p>å¦‚æœè¿­ä»£å™¨å¤±æ•ˆäº†ï¼Œä½ æƒ³æ‹¿å¦ä¸€ä¸ªè¿­ä»£å™¨å»ä»£æ›¿ï¼Œå°±å¯ä»¥é€šè¿‡è¿”å›å€¼å»æ‹¿ä¸€ä¸‹ã€‚</p>
<p>âš¡ insertï¼š</p>
<pre><code class="language-cpp">/* æ’å…¥ */
iterator insert(iterator pos, const T&amp; x) {
	assert(pos &gt;= _start);
	assert(pos &lt;= _finish);

	// æ£€æŸ¥æ˜¯å¦éœ€è¦å¢å®¹
	if (_finish == _eos) {
		// æ‰©å®¹ä¼šå¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆï¼Œæ‰©å®¹éœ€è¦æ›´æ–°ä¸€ä¸‹ pos
		size_t len = pos - _start;
		reserve(capacity() == 0 ? 4 : capacity() * 2);

		pos = _start + len;
	}

	// ç§»åŠ¨æ•°æ®
	iterator end = _finish - 1;
	while (end &gt;= pos) {
		*(end + 1) = *end;
		end--;
	}
			
	// æ’å…¥æ•°æ®
	*pos = x;
	_finish++;

	return pos;
}</code></pre>
<p></p>
<h3 id="0x02%C2%A0%E5%AE%9E%E7%8E%B0%C2%A0erase">0x02 å®ç° erase</h3>
<p>ğŸ’¬ erase</p>
<pre><code class="language-cpp">void erase(iterator pos) {
	assert(pos &gt;= _start);
	assert(pos &lt;= _finish);

	iterator begin = pos + 1;
	while (begin &lt; _finish) {
		*(begin - 1)* begin;
		begin++;
	}

	_finish--;
}</code></pre>
<p></p>
<p>ğŸ’¬ æµ‹è¯•ï¼šåˆ é™¤2</p>
<pre><code class="language-cpp">	void test_vector8() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		v1.push_back(4);
		vector&lt;int&gt;::iterator pos = find(v1.begin(), v1.end(), 2);
		if (pos != v1.end()) {    
			v1.erase(pos);
		}

		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="128" src="image\1054a25231c54129bbd351836a30839c.png" width="471"/></p>
<p><img alt="" height="80" src="image\9eb0367eb5584e37a8c72e5a169f21e6.png" width="70"/>æ€è€ƒï¼š<span style="color:#e6b223;">erase </span>æœ‰æ²¡æœ‰è¿­ä»£å™¨å¤±æ•ˆçš„é—®é¢˜ï¼Ÿ</p>
<p>å½“ç„¶äº†ï¼Œ<span style="color:#e6b223;">erase </span>ä¹Ÿä¼šæœ‰å¤±æ•ˆçš„æƒ…å†µï¼</p>
<p></p>
<p>ğŸ’¬ æ¯”å¦‚æˆ‘ä»¬è¦æ±‚åˆ é™¤ <span style="color:#0d0016;">v1 </span>æ‰€æœ‰çš„å¶æ•°ï¼š</p>
<pre><code class="language-cpp">	void test_vector8() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		v1.push_back(4);
        v1.push_back(5);

		// è¦æ±‚åˆ é™¤v1æ‰€æœ‰çš„å¶æ•°
		vector&lt;int&gt;::iterator pos = find(v1.begin(), v1.end(), 2);
		while (pos != v1.end()) {
			if (*pos % 2 == 0) {
				v1.erase(pos);
			}
			pos++;
		}

		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<p>â“ åˆ é™¤ä¼šå¯¼è‡´ <span style="color:#0d0016;">pos </span>å¤±æ•ˆå—ï¼Ÿ</p>
<p>æˆ‘ä»¬ç”¨ä¸‰ç§åœºæ™¯å»æµ‹è¯•ï¼š</p>
<pre><code class="language-cpp">1 2 3 4 5
1 2 4 5
1 2 3 4</code></pre>
<p>æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œå¦‚æœæ•°æ®æ˜¯ï¼š</p>
<p>â‘   1 2 3 4 5  ğŸ‘‰ æ­£å¸¸ï¼ˆå…¶å®æ˜¯ä¸ªå·§åˆï¼‰</p>
<p><img alt="" height="108" src="image\8dd08d41cfbe45e5b9ef543e800fb20b.png" width="398"/></p>
<p>â‘¡  1 2 3 4    ğŸ‘‰ å´©æºƒ</p>
<p><img alt="" height="259" src="image\d821032829eb4884bbde2051843045c3.png" width="458"/></p>
<p>â‘¢  1 2 4 5    ğŸ‘‰ ç»“æœä¸å¯¹ï¼ˆæ²¡åˆ é™¤å®Œï¼‰</p>
<p><img alt="" height="130" src="image\46d4dc8e82a94870b3825ffc36610a8f.png" width="447"/></p>
<p><span style="color:#e6b223;">erase</span>(<span style="color:#0d0016;">pos</span>) ä»¥åï¼Œ<span style="color:#0d0016;">pos</span> æŒ‡å‘çš„æ„ä¹‰å·²ç»å˜äº†ï¼Œç›´æ¥ <span style="color:#0d0016;">pos</span><span style="color:#be191c;">++</span> å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p>
<p><strong>å¯¹äºæƒ…å†µ â‘¢ï¼š</strong>æ¯”å¦‚è¿ç»­çš„å¶æ•°ï¼Œå¯¼è‡´åä¸€ä¸ªå¶æ•°æ²¡æœ‰åˆ¤æ–­ï¼Œå¯¼è‡´æ²¡æœ‰åˆ æ‰ã€‚</p>
<p>å†å…¶æ¬¡ï¼Œ<span style="color:#e6b223;">erase</span> çš„åˆ é™¤æœ‰äº›<span style="color:#4da8ee;"> vector</span> ç‰ˆæœ¬çš„å®ç°ï¼Œä¸æ’é™¤å®ƒä¼šç¼©å®¹ã€‚</p>
<p>å¦‚æœæ˜¯è¿™æ ·ï¼Œ<span style="color:#e6b223;">erase</span>(<span style="color:#0d0016;">pos</span>) ä»¥åï¼Œ<span style="color:#0d0016;">pos </span>ä¹Ÿå¯èƒ½ä¼šæ˜¯é‡æŒ‡é’ˆï¼Œè·Ÿ <span style="color:#e6b223;">insert </span>ç±»ä¼¼ã€‚</p>
<p><span style="color:#a5a5a5;">ï¼ˆSGI å’Œ PJ ç‰ˆæœ¬ vector éƒ½ä¸ä¼šç¼©å®¹ï¼‰</span></p>
<p><strong>å¯¹äºæƒ…å†µ â‘¡ï¼š</strong>å¦‚æœæœ€åä¸€ä¸ªæ•°æ®æ˜¯å¶æ•°ï¼Œä¼šå¯¼è‡´<span style="color:#e6b223;"> erase</span> ä»¥åï¼Œ<span style="color:#0d0016;">pos </span>æ„ä¹‰å˜äº†ã€‚</p>
<p>å† <span style="color:#be191c;">++</span> ä¸€ä¸‹ï¼Œå¯¼è‡´<span style="color:#be191c;"> </span><span style="color:#0d0016;">pos</span><span style="color:#be191c;"> </span>å’Œ<span style="color:#0d0016;"> end </span>é”™è¿‡ç»“æŸåˆ¤æ–­ï¼Œå‡ºç°è¶Šç•Œé—®é¢˜ã€‚</p>
<p><strong>è€Œæƒ…å†µ â‘ ï¼š</strong> ä¹‹æ‰€ä»¥æ²¡æœ‰ç¿»è½¦ï¼Œæ˜¯å› ä¸ºè¢«åˆ é™¤çš„å¶æ•°åé¢æ°å·§è·Ÿçš„æ˜¯å¥‡æ•°ï¼Œè¿æ°”å¥½é€ƒè¿‡äº†ä¸€åŠ«ã€‚</p>
<p></p>
<p>å¯¼è‡´ä¸Šè¿°ä¸‰ç§é—®é¢˜çš„æœ¬è´¨ï¼š<span style="color:#e6b223;">erase</span>(<span style="color:#0d0016;">pos</span>) ä»¥åï¼Œ<span style="color:#0d0016;">pos </span>çš„æ„ä¹‰å˜äº†ï¼Œå†å» <span style="color:#0d0016;">pos</span><span style="color:#be191c;">++</span> æ˜¯ä¸å¯¹çš„ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ<span style="color:#e6b223;">erase</span> æ˜¯è¿™ä¹ˆè¯´æ˜çš„ï¼š</p>
<p><img alt="" height="243" src="image\de3de9263d154806ae5eb7df9549a01a.png" width="1200"/></p>
<p>æœ€è¿‘<span style="color:#e6b223;"> erase </span>çš„å…ƒç´ çš„åæ–¹ä½ç½®ã€‚</p>
<p>âš¡ æ”¹è¿›<span style="color:#e6b223;"> erase</span>ï¼š</p>
<pre><code class="language-cpp">/* åˆ é™¤ */
iterator erase(iterator pos) {
	assert(pos &gt;= _start);
	assert(pos &lt;= _finish);

	iterator begin = pos + 1;
	while (begin &lt; _finish) {
		*(begin - 1) = *begin;
		begin++;
	}

	_finish--;

	return pos;
}

	void test_vector9() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		v1.push_back(4);

		// è¦æ±‚åˆ é™¤v1æ‰€æœ‰çš„å¶æ•°
		vector&lt;int&gt;::iterator pos = find(v1.begin(), v1.end(), 2);
		while (pos != v1.end()) {
			if (*pos % 2 == 0) {
				pos = v1.erase(pos);  // eraseä»¥åposå¤±æ•ˆï¼Œä¼šè¿”å›ä¸‹ä¸€ä¸ªä½ç½®çš„è¿­ä»£å™¨
			}
			else {
				pos++;
			}
			
		}

		for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="117" src="image\cfdf1b1a705940509b33a3fca3a83f25.png" width="492"/></p>
<p></p>
<h3 id="0x03%20%E5%8F%AF%E8%83%BD%E5%AF%BC%E8%87%B4%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%A4%B1%E6%95%88%E7%9A%84%E6%93%8D%E4%BD%9C">0x03 å¯èƒ½å¯¼è‡´è¿­ä»£å™¨å¤±æ•ˆçš„æ“ä½œ</h3>
<p><img alt="" height="89" src="image\d6dc3dfb6dd344dea20b3cf03cdfbf3c.png" width="97"/> å¯¹äº <span style="color:#4da8ee;">vector</span> å¯èƒ½ä¼šå¯¼è‡´å…¶è¿­ä»£å™¨å¤±æ•ˆçš„æ“ä½œæœ‰ï¼š</p>
<p>â‘  ä¼šå¼•èµ·å…¶åº•å±‚ç©ºé—´æ”¹å˜çš„æ“ä½œï¼Œéƒ½æœ‰å¯èƒ½å­˜åœ¨è¿­ä»£å™¨å¤±æ•ˆã€‚</p>
<p>æ¯”å¦‚ï¼š<span style="color:#e6b223;">resize</span>ã€<span style="color:#e6b223;">reverse</span>ã€<span style="color:#e6b223;">insert</span>ã€<span style="color:#e6b223;">assign</span>ã€<span style="color:#e6b223;">push_back</span> ç­‰ã€‚</p>
<p></p>
<p>â‘¡ æŒ‡å®šä½ç½®å…ƒç´ çš„åˆ é™¤æ“ä½œï¼š<span style="color:#e6b223;">erase</span></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;
#include &lt;vector&gt;
int main()
{
	int a[] = { 1, 2, 3, 4 };
	vector&lt;int&gt; v(a, a + sizeof(a) / sizeof(int));
	// ä½¿ç”¨findæŸ¥æ‰¾3æ‰€åœ¨ä½ç½®çš„iterator
	vector&lt;int&gt;::iterator pos = find(v.begin(), v.end(), 3);
	// åˆ é™¤posä½ç½®çš„æ•°æ®ï¼Œå¯¼è‡´posè¿­ä»£å™¨å¤±æ•ˆã€‚
	v.erase(pos);
	cout &lt;&lt; *pos &lt;&lt; endl; // æ­¤å¤„ä¼šå¯¼è‡´éæ³•è®¿é—®
	return 0;
}


</code></pre>
<p><span style="color:#e6b223;">erase </span>åˆ é™¤ <span style="color:#0d0016;">pos </span>ä½ç½®å…ƒç´ åï¼Œ<span style="color:#0d0016;">pos</span> ä½ç½®ä¹‹åçš„å…ƒç´ å°±ä¼šå¾€å‰æ¬ç§»ï¼Œ</p>
<p>æ²¡æœ‰å¯¼è‡´åº•å±‚ç©ºé—´çš„æ”¹å˜ï¼Œç†è®ºä¸Šè®²è¿­ä»£å™¨ä¸åº”è¯¥ä¼šå¤±æ•ˆã€‚</p>
<p>ä½†æ˜¯ <span style="color:#0d0016;">pos </span>åˆšå¥½æ˜¯æœ€åä¸€ä¸ªå…ƒç´ ï¼Œåˆ å®Œä¹‹å <span style="color:#0d0016;">pos</span> åˆšå¥½åœ¨<span style="color:#0d0016;"> end</span> çš„ä½ç½®ï¼Œ</p>
<p>è€Œ <span style="color:#0d0016;">end</span> ä½ç½®æ˜¯æ²¡æœ‰å…ƒç´ çš„ï¼Œé‚£ä¹ˆ <span style="color:#0d0016;">pos</span> å°±å¤±æ•ˆäº†ã€‚</p>
<p>å› æ­¤åˆ é™¤ <span style="color:#4da8ee;">vector</span> ä¸­ä»»æ„ä½ç½®å…ƒç´ æ—¶ï¼Œ<strong>VS</strong> å°±è®¤ä¸ºè¯¥ä½ç½®è¿­ä»£å™¨å¤±æ•ˆäº†ã€‚</p>
<p></p>
<p>è¿˜æœ‰å°±æ˜¯æˆ‘ä»¬åˆšæ‰è®²è§£çš„å¥‡å¶æ•°ï¼Œåˆ é™¤ <span style="color:#0d0016;">pos</span> ä½ç½®çš„æ•°æ®ï¼Œå¯¼è‡´<span style="color:#0d0016;"> pos </span>è¿­ä»£å™¨å¤±æ•ˆã€‚</p>
<p>å½“ç„¶ï¼Œ<span style="color:#4da8ee;">vector</span> è¿­ä»£å™¨çš„å¤±æ•ˆä¸»è¦å‘ç”Ÿåœ¨<span style="color:#4da8ee;"> insert </span>å’Œ <span style="color:#4da8ee;">erase</span>ã€‚<span style="color:#4da8ee;">vector </span>çš„å…¶ä»–æ¥å£åŸºæœ¬ä¸ç¢°è¿­ä»£å™¨ï¼Œè‡ªç„¶ä¹Ÿå°±ä¸æ¶‰åŠè¿™äº›é—®é¢˜ã€‚</p>
<p><span style="background-color:#f9eda6;">è¿­ä»£å™¨å¤±æ•ˆè§£å†³æ–¹æ³•ï¼šåœ¨ä½¿ç”¨å‰ï¼Œå¯¹è¿­ä»£å™¨é‡æ–°èµ‹å€¼å³å¯ã€‚</span></p>
<p></p>
<p>â“<span style="color:#4da8ee;"> string</span> çš„<span style="color:#e6b223;"> insert </span>å’Œ<span style="color:#e6b223;"> erase </span>è¿­ä»£å™¨æ˜¯å¦ä¼šå¤±æ•ˆï¼Ÿ<span style="color:#4da8ee;">string</span><span style="color:#e6b223;"> </span>æœ‰æ²¡æœ‰è¿­ä»£å™¨å¤±æ•ˆï¼Ÿ</p>
<p>ğŸ’¡ å½“ç„¶ä¼šï¼Œ<span style="background-color:#f9eda6;">åªè¦ä½¿ç”¨è¿­ä»£å™¨çš„å®¹å™¨ï¼Œéƒ½å¯èƒ½ä¼šæ¶‰åŠè¿­ä»£å™¨å¤±æ•ˆã€‚</span></p>
<p>åªæ˜¯<span style="color:#4da8ee;"> string</span><span style="color:#e6b223;"> </span>ä¸€èˆ¬å¾ˆå°‘æ¶‰åŠè¿­ä»£å™¨å¤±æ•ˆï¼Œå› ä¸ºå®ƒ<span style="color:#e6b223;"> insert </span>å’Œ <span style="color:#e6b223;">erase</span> æ—¶ä¸»è¦ç”¨ä¸‹æ ‡ã€‚</p>
<p></p>
<p></p>
<h2 id="%E2%85%A5.%20vector%20%E6%B7%B1%E6%8B%B7%E8%B4%9D">â…¤. vector æ·±æ‹·è´</h2>
<h3 id="0x00%20%E6%8B%B7%E8%B4%9D%E6%9E%84%E9%80%A0">0x00 æ‹·è´æ„é€ </h3>
<div>
<p class="img-center"><img alt="" height="30" src="image\8bf1d4a1ee4c4e63a434d5f3496b12d4.png" width="270"/></p>
<p><img alt="" height="56" src="image\2e3a25dfec624216b815f0ccb825ffb1.png" width="136"/>â€‹ å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿå†™æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç°ä»£å†™æ³•ã€‚</p>
</div>
<p>ğŸ’¬ ä¼ ç»Ÿå†™æ³•ï¼šå…¨éƒ½è‡ªå·±å¹²ï¼Œ</p>
<div>
<pre><code class="language-cpp">/* v2(v1) */
vector(const vector&lt;T&gt;&amp; v) {
	//_start = new T[v.capacity()];
	//_finish = _start + v.size();
	//_eos = _start + v.capacity();
 
	reserve(v.capacity());    // æˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å†™å¥½çš„reserveå»å¼€ç©ºé—´
	// memcpy(_start, v._start, v.size() * sizeof(T));  // ä¼šç¿»è½¦
	for (const auto&amp; e : v) {
		push_back(e);
	}
}</code></pre>
</div>
<p><img alt="" height="121" src="image\0f624a59b15d464cbf6ea649e4856dd8.png" width="129"/>è€è€å®å®å¼€ç©ºé—´ï¼Œè€è€å®å®æ‹·æ•°æ®ã€‚</p>
<p>å› ä¸ºæˆ‘ä»¬å·²ç»å®ç°å¥½äº† <span style="color:#e6b223;">reserve</span>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå¯ä»¥ç›´æ¥è°ƒç”¨ <span style="color:#e6b223;">reserve</span> å»å¼€ç©ºé—´ã€‚</p>
<p>æ³¨æ„è¿™é‡Œä¸èƒ½ä½¿ç”¨<span style="color:#e6b223;"> memcpy</span>ï¼Œè¿™ä¸ªæˆ‘ä»¬å‰é¢å·²ç»å¼ºè°ƒè¿‡äº†ã€‚</p>
<p></p>
<p>ğŸ’¬ ç°ä»£å†™æ³•ï¼šæ‰¾å·¥å…·äººå¸®å¿™å¹²æ´»ï¼š</p>
<p><img alt="" height="81" src="image\1e59620ef0af4956918ee1db87fcc871.png" width="86"/>â€‹ åˆšæ¥ï¼Œè°æ˜¯å·¥å…·äººï¼Ÿ   â€”â€” è®©è¿­ä»£å™¨åŒºé—´å½“å·¥å…·äººï¼š</p>
<div>
<pre><code class="language-cpp">/* ç°ä»£å†™æ³•ï¼šv2(v1) */
vector(const vector&lt;T&gt;&amp; v)
	: _start(nullptr)
	, _finish(nullptr)
	, _eos(nullptr)
{
	vector&lt;T&gt; tmp(v.begin(), v.end());
	swap(_start, tmp._start);
	swap(_finish, tmp._finish);
	swap(_eos, tmp._eos);
}</code></pre>
</div>
<p></p>
<p>ğŸ’¬ æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="language-cpp">	void test_vector4() {
		vector&lt;int&gt; v1;
		v1.push_back(1);
		v1.push_back(2);
		v1.push_back(3);
		v1.push_back(4);

		vector&lt;int&gt; v2(v1);
		for (auto e : v2) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
	}</code></pre>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="122" src="image\20e72d2d92424cd68ee6986cd6c709f6.png" width="487"/>â€‹</p>
<p><span style="color:#0d0016;">tmp</span> å®Œæˆäº¤æ¢å·¥ä½œåï¼Œå‡ºäº†ä½œç”¨åŸŸè¦è°ƒç”¨ææ„å‡½æ•°ï¼Œ</p>
<p>å¦‚æœæˆ‘ä»¬ä¸å¯¹<em><span style="color:#0d0016;"> _start</span></em>ã€<span style="color:#0d0016;"><em>_finish </em></span>å’Œ <em><span style="color:#0d0016;">_eos</span></em> è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆ<span style="color:#0d0016;"> tmp</span> å°†ä¼šæ˜¯éšæœºå€¼ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬ç”¨åˆå§‹åŒ–åˆ—è¡¨ç»™å®ƒä»¬å…ˆåˆå§‹åŒ–æˆ <span style="color:#a5a5a5;">nullptr</span>ï¼Œè¿™æ ·äº¤æ¢å<span style="color:#0d0016;"> tmp </span>å°±éƒ½æ˜¯<span style="color:#a5a5a5;"> nullptr </span>äº†ã€‚</p>
<p></p>
<p><img alt="" height="144" src="image\06a9c97f6e864f24b05ce1270ba10af9.png" width="88"/> æ ¹æ®ç»éªŒï¼Œæˆ‘ä»¬ä¸‹é¢è‚¯å®šè¿˜ä¼šç”¨åˆ° <span style="color:#e6b223;">swap</span> çš„ï¼Œæˆ‘ä»¬ä¸å¦‚æŠŠå®ƒå°è£…æˆä¸€ä¸ª <span style="color:#4da8ee;">Swap</span> å‡½æ•°ã€‚</p>
<p>ğŸ’¬ Swapï¼š</p>
<div>
<pre><code class="language-cpp">void Swap(vector&lt;T&gt;&amp; tmp) {
	swap(_start, tmp._start);
	swap(_finish, tmp._finish);
	swap(_eos, tmp._eos);
}</code></pre>
</div>
<p>âš¡ æ›´æ–°æ‹·è´æ„é€ ï¼š</p>
<div>
<pre><code class="language-cpp">/* v2(v1) */
vector(const vector&lt;T&gt;&amp; v)
	: _start(nullptr)
	, _finish(nullptr)
	, _eos(nullptr)
{
	vector&lt;T&gt; tmp(v.begin(), v.end());
	Swap(tmp);
}</code></pre>
</div>
<p><img alt="" height="141" src="image\200f6d59ed294d238ec245e80dc02210.png" width="138"/> å½“ç„¶ï¼Œä¸åŠ æ¨¡æ¿å‚æ•°çš„å†™æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p>
<pre><code class="language-cpp">vector(const vector&amp; v)
	: _start(nullptr)
	, _finish(nullptr)
	, _eos(nullptr)
{
	vector&lt;T&gt; tmp(v.begin(), v.end());
	Swap(tmp);
}</code></pre>
<p><span style="color:#a5a5a5;">ï¼ˆè¿™æ ·è¯­æ³•ä¸Šæ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯è¿˜æ˜¯æ¨èç”¨åŠ æ¨¡æ¿å‚æ•°çš„å†™æ³•ï¼Œå› ä¸ºå†™ç±»å‹ä¼šæ¯”è¾ƒæ¸…æ¥šï¼‰</span></p>
<p></p>
<h3 id="0x01%20%E8%B5%8B%E5%80%BC%E6%9E%84%E9%80%A0%20operator%3D">0x01 èµ‹å€¼æ„é€  operator=</h3>
<div>
<p class="img-center"><img alt="" height="22" src="image\15a98d30177146d08729a2fe9e63c4f1.png" width="435"/></p>
<p>â€‹ä¼ ç»Ÿå†™æ³•å°±æ˜¯æŠŠ <span style="color:#0d0016;">v2</span> èµ‹å€¼ç»™ <span style="color:#0d0016;">v1</span>ï¼Œè‡ªå·±æŠŠ <span style="color:#0d0016;">v1</span> é‡Šæ”¾äº†ï¼Œå†å»æ·±æ‹·è´å‡º<span style="color:#0d0016;"> </span><span style="color:#0d0016;">v2 </span>ä¸€æ ·å¤§çš„ç©ºé—´â€¦â€¦</p>
</div>
<p><img alt="" height="96" src="image\1d87152e817d40a9ba2ad4b8466a1d80.png" width="96"/> å¤ªéº»çƒ¦äº†ï¼Œç›´æ¥ç”¨ç°ä»£å†™æ³•ï¼Œåªè¦æœ‰äº†æ‹·è´æ„é€ ï¼Œèµ‹å€¼éƒ½å¯ä»¥ç”¨ç°ä»£å†™æ³•ã€‚</p>
<p>å¹¶ä¸”ï¼Œè¿™é‡Œè¿˜å¯ä»¥åˆ©ç”¨ "ä¼ å‚è°ƒç”¨æ‹·è´æ„é€ " è¿™ä¸€ç‰¹æ€§ï¼Œåšåˆ°çœŸæ­£çš„ "å‹æ¦¨" å·¥å…·äººã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å»æ‰<span style="color:#e6b223;"> const </span>å’Œå¼•ç”¨ä¼ å‚ï¼Œä¸ºçš„æ˜¯è®©å½¢å‚å»å……å½“ä¸´æ—¶å˜é‡<span style="color:#0d0016;"> tmp</span> â€”â€”</p>
<div>
<p class="img-center"><img alt="" height="27" src="image\16d000e215f1488d85837afc241155ac.png" width="358"/></p>
<p>â€‹</p>
</div>
<p>ğŸ’¬ ç°ä»£å†™æ³•ï¼š<span style="color:#0d0016;">v1</span> = <span style="color:#0d0016;">v3</span></p>
<div>
<pre><code class="language-cpp">/* v1 = v3 */
vector&lt;T&gt;&amp; operator=(vector&lt;T&gt; v) {
	Swap(v);   // è®©å½¢å‚vå……å½“tmpå·¥å…·äºº
	return *this;
}</code></pre>
</div>
<p>è¿™é‡Œä¹Ÿä¸€æ ·ï¼Œä¸å†™æ¨¡æ¿å‚æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š</p>
<pre><code class="language-cpp">/* v1 = v3 */
vector&amp; operator=(vector v) {
	Swap(v);   // è®©å½¢å‚vå……å½“tmpå·¥å…·äºº
	return *this;
}</code></pre>
<p></p>
<p>æƒ³è¦ <span style="color:#0d0016;">v1</span> è·Ÿ <span style="color:#0d0016;">v3</span> æœ‰ä¸€æ ·å¤§çš„ç©ºé—´ä¸€æ ·å¤§çš„å€¼ï¼Œæˆ‘ä»¬è®©ä¼ å‚çš„æ—¶å€™å°±é¡ºä¾¿æŠŠè¿™ä»¶äº‹ç»™åŠäº†ã€‚</p>
<p>ç°åœ¨<span style="color:#0d0016;"> v </span>æ‰‹ä¸Šå°±æœ‰ <span style="color:#0d0016;">v3</span> äº†ï¼Œç„¶åå†ç”¨<span style="color:#e6b223;"> Swap</span> å‡½æ•°å¤ºå–<span style="color:#0d0016;"> v </span>çš„åŠ³åŠ¨æˆæœï¼Œæœ€åè¿”å› <span style="color:#956fe7;">*this </span>å°±å¤§åŠŸå‘Šæˆäº†ã€‚</p>
<p>è¿™é‡Œ<span style="color:#0d0016;"> v1 </span>ä¸ä»…æŠŠ <span style="color:#0d0016;">v</span> ä»<span style="color:#0d0016;"> v3 </span>å¾—åˆ°çš„ä¸œè¥¿ï¼Œè¿˜è®©<span style="color:#0d0016;"> v</span> å¸®å¿™æŠŠåƒåœ¾ä¸¢äº†ï¼ˆé‡Šæ”¾ç©ºé—´ï¼‰ â€”â€”</p>
<p> <img alt="" height="1123" src="image\57a723edfe9f40ab8f94d1aa7586ca68.png" width="547"/>â€‹ ï¼ˆç”»æŠ€çƒ‚è½»å–·ï¼‰</p>
<p> "ä¼ å‚è°ƒç”¨æ‹·è´æ„é€ " å‹æ¦¨å·¥å…·äººçš„æ–¹å¼ï¼Œæ˜¯æˆ‘ä»¬ç¬¬äºŒæ¬¡è®²äº†ã€‚</p>
<p>ç¬¬ä¸€æ¬¡æ˜¯åœ¨<span style="color:#0d0016;"> string</span> æ¨¡æ‹Ÿå®ç°çš„æ—¶å€™è®²çš„ï¼Œå½“æ—¶æˆ‘ä»¬ç§°ä¹‹ä¸º â€”â€” æ›´ç®€æ´çš„å†™æ³•ï¼š</p>
<p><img alt="" height="276" src="image\4a5b473a44f54875863b48591586b831.png" width="607"/>â€‹</p>
<p>æ­£æ‰€è°“ä¸€å›ç”ŸäºŒå›ç†Ÿï¼Œç›¸ä¿¡åˆ°è¿™é‡Œä½ åº”è¯¥ç†è§£ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆåšäº†ã€‚</p>
<p>â“ <strong>ç°åœ¨è¯·æ€è€ƒï¼š</strong>æ—¢ç„¶æœ‰è¿™ç§å¥½äº‹ï¼Œä¸ºä»€ä¹ˆä¸åœ¨æ‹·è´æ„é€ çš„æ—¶å€™ç”¨ï¼Ÿ</p>
<p><img alt="" height="418" src="image\86ab7c1bd83b4fc9b741c7f841a1d6ff.png" width="1152"/>â€‹</p>
<p>ğŸ” å¦‚æœä½ ç­”é”™äº†ï¼Œå»ºè®®å¤ä¹ ä¸€ä¸‹ï¼š</p>
<p><a href="https://blog.csdn.net/weixin_50502862/article/details/123359614" title="ã€C++è¦ç¬‘ç€å­¦ã€‘ç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°è¯¦è§£ | æ„é€ å‡½æ•° | ææ„å‡½æ•° | æ„é€ æ‹·è´å‡½æ•°">ã€C++è¦ç¬‘ç€å­¦ã€‘ç±»çš„é»˜è®¤æˆå‘˜å‡½æ•°è¯¦è§£ | æ„é€ å‡½æ•° | ææ„å‡½æ•° | æ„é€ æ‹·è´å‡½æ•°</a></p>
<p><img alt="" height="511" src="image\e3af211fb08a4a3ca58e831ac0bbcd3c.png" width="635"/>â€‹</p>
<p></p>
<p>ğŸ’¬ æµ‹è¯•ä¸€ä¸‹ï¼š</p>
<div>
<pre><code class="language-cpp">void test_vector5() {
	vector&lt;int&gt; v1;
	v1.push_back(1);
	v1.push_back(2);
	v1.push_back(3);
	v1.push_back(4);
	cout &lt;&lt; "èµ‹å€¼å‰ï¼š";
	for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;

	vector&lt;int&gt; v3;
	v3.push_back(10);
	v3.push_back(20);
	v3.push_back(30);

	cout &lt;&lt; "èµ‹å€¼åï¼š";
	v1 = v3;
	for (auto e : v1) cout &lt;&lt; e &lt;&lt; " "; cout &lt;&lt; endl;
}</code></pre>
</div>
<blockquote>
<p>ğŸš© è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
</blockquote>
<p><img alt="" height="137" src="image\ada169aff2af40edaf0d9383ac17a8cd.png" width="472"/>â€‹  <span style="color:#a5a5a5;">ï¼ˆä¸å´©æºƒäº†ï¼‰</span></p>
<p></p>
<p></p>
<hr/>
<p style="text-align:right;"><strong>ğŸ“œ å‚è€ƒèµ„æ–™</strong></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">Microsoft. MSDN(Microsoft Developer Network)[EB/OL]. []. .</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">. C++reference[EB/OL]. []. http://www.cplusplus.com/reference/.</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">ç™¾åº¦ç™¾ç§‘[EB/OL]. []. https://baike.baidu.com/.</span></p>
<p style="text-align:right;"><span style="color:#a5a5a5;">æ¯”ç‰¹ç§‘æŠ€. C++[EB/OL]. 2021[2021.8.31]. .</span></p>
<pre><code class="language-cpp">ğŸ“Œ [ ç¬”è€… ]   ç‹äº¦ä¼˜
ğŸ“ƒ [ æ›´æ–° ]   2022.5.11
âŒ [ å‹˜è¯¯ ]   /* æš‚æ—  */
ğŸ“œ [ å£°æ˜ ]   ç”±äºä½œè€…æ°´å¹³æœ‰é™ï¼Œæœ¬æ–‡æœ‰é”™è¯¯å’Œä¸å‡†ç¡®ä¹‹å¤„åœ¨æ‰€éš¾å…ï¼Œ
              æœ¬äººä¹Ÿå¾ˆæƒ³çŸ¥é“è¿™äº›é”™è¯¯ï¼Œæ³æœ›è¯»è€…æ‰¹è¯„æŒ‡æ­£ï¼</code></pre>
</div>
</div>