<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-dracula" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p></p>
<div class="toc">
<h3>æ–‡ç« ç›®å½•</h3>
<ul><li><a href="#reactredux_7">â­react-reduxåŸºæœ¬ä½¿ç”¨</a></li><li><ul><li><a href="#_reactredux_207">â›³æ±‚å’Œæ¡ˆä¾‹_react-reduxåŸºæœ¬ä½¿ç”¨æ€»ç»“</a></li></ul>
</li><li><a href="#1mapDispatch_225">â­ä¼˜åŒ–1ï¼šç®€å†™mapDispatch</a></li><li><a href="#2Provider_350">â­ä¼˜åŒ–2ï¼šProviderç»„ä»¶çš„ä½¿ç”¨</a></li><li><a href="#3UI_397">â­ä¼˜åŒ–3ï¼šæ•´åˆUIç»„ä»¶ä¸å®¹å™¨ç»„ä»¶</a></li><li><ul><li><a href="#_reactredux_479">â›³æ±‚å’Œæ¡ˆä¾‹_react-reduxä¼˜åŒ–æ€»ç»“</a></li></ul>
</li></ul>
</div>
<p></p>
<blockquote>
<p>ä¸Šç¯‡æ–‡ç« <a href="https://blog.csdn.net/xuxuii/article/details/125968311?spm=1001.2014.3001.5502">åˆæ­¥äº†è§£å’Œå­¦ä¹ äº†react-reduxçš„åŸç†å’Œç»„ä»¶æ‹†åˆ†</a><br/> ä»Šå¤©æ¢ç´¢ä¸€ä¸‹react-reduxåŸºæœ¬ä½¿ç”¨ä»¥åŠå¯¹æ±‚å’Œæ¡ˆä¾‹çš„ä»£ç ä¼˜åŒ–<br/> æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¸€èµ·æ¥çœ‹çœ‹å§ï¼ğŸ¤</p>
</blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="70%" src="https://img-blog.csdnimg.cn/b5a34355dbdd47c8b596191cf3d5d13c.jpeg#pic_center" width="70%"/></p>
<h1><a id="reactredux_7"></a>â­react-reduxåŸºæœ¬ä½¿ç”¨</h1>
<p>ä¾æ—§å¯¹æ±‚å’Œæ¡ˆä¾‹è¿›è¡Œåˆ†æï¼š<br/> <img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" src="https://img-blog.csdnimg.cn/59420a2fb0304f6ba829054dac93b119.jpeg#pic_center"/></p>
<p>æ ¹æ®react-reduxæ¨¡å‹å›¾ï¼Œå®ç°äº†Countçš„å®¹å™¨ç»„ä»¶ä¸Countçš„UIç»„ä»¶çš„è”ç³»ï¼Œæ¥ä¸‹æ¥è¦å®ç°å®¹å™¨ç»„ä»¶ç»™UIç»„ä»¶ä¼ é€’ reduxä¸­æ‰€ä¿å­˜çš„çŠ¶æ€ä»¥åŠæ“ä½œçŠ¶æ€çš„æ–¹æ³•ï¼Œè¦<code>å€ŸåŠ©props</code>ã€‚</p>
<p>ä½†æ˜¯ä¸èƒ½åƒåŸå…ˆçˆ¶å­ç»„ä»¶ä¼ å‚åˆ©ç”¨æ ‡ç­¾çš„æ–¹å¼ä¼ é€’ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="prism language-js"><span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token constant">B</span> a<span class="token operator">=</span><span class="token string">'1'</span> b<span class="token operator">=</span><span class="token string">'2'</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token constant">A</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre>
<p><strong>é‚£ä¹ˆå¦‚ä½•åœ¨å®¹å™¨ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶ï¼‰å‘UIç»„ä»¶ä¼ é€’å‚æ•°å‘¢ï¼Ÿ</strong></p>
<blockquote>
<p>ç”±äºçˆ¶å­ç»„ä»¶å…³ç³»æ˜¯é connectå½¢æˆçš„ï¼Œæ‰€ä»¥connectå‡½æ•°åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™<strong>è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°</strong>ï¼Œå‚æ•°å¿…é¡»æ˜¯<strong>å‡½æ•°ç±»å‹</strong>çš„ï¼Œè¿™æ ·react-reduxåº“å°±å¸®ä½ è°ƒç”¨è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªå‡½æ•°è¿”å›å€¼ä½œä¸ºçŠ¶æ€ï¼Œå¦ä¸€ä¸ªå‡½æ•°è¿”å›å€¼ä½œä¸ºæ“ä½œçŠ¶æ€çš„æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="prism language-js"><span class="token comment">// react-redux APIé»˜è®¤è¦ç»™connectä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¸¤ä¸ªå‡½æ•°ä¼šæ”¶åˆ°æ¥è‡³reduxä¼ æ¥çš„å€¼å’Œæ–¹æ³•ã€‚</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre>
<p>mapStateToProps()å‡½æ•°çš„<strong>è¿”å›å€¼</strong>ä½œä¸º <code>çŠ¶æ€</code> ä¼ é€’ç»™äº†UIç»„ä»¶ï¼Œå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒmapStateToPropså‡½æ•°<strong>è¿”å›çš„å¯¹è±¡ä¸­çš„key</strong>å°±ä½œä¸ºä¼ é€’ç»™UIç»„ä»¶propsçš„keyï¼Œvalueå°±ä½œä¸ºä¼ é€’ç»™UIç»„ä»¶propsçš„valueã€‚</p>
<blockquote>
<p>ç”±äºè¦è·å–reduxé‡Œçš„çŠ¶æ€ï¼Œå°±è¦store.getState()ï¼Œå°±è¦åœ¨å®¹å™¨ç»„ä»¶é‡Œå¼•å…¥storeï¼Œä½†æ˜¯ä¹‹å‰å·²ç»åœ¨ä¸Šå±‚App.jsxé‡Œå‘å®¹å™¨ç»„ä»¶ä¼ äº†storeï¼Œå°±ä¸éœ€è¦è‡ªå·±å¼•å…¥äº†ï¼Œè¿™é‡Œä¹Ÿä¸éœ€è¦æˆ‘ä»¬è‡ªå·±å»è·å–çŠ¶æ€ï¼Œ<strong>react-reduxå¸®æˆ‘ä»¬è°ƒmapStateToProps()å‡½æ•°æ—¶ï¼Œå·²ç»å¸®æˆ‘ä»¬æŠŠçŠ¶æ€ä¼ è¿‡å»äº†</strong>ï¼Œåªéœ€è¦<strong>mapStateToProps(state)æ¥æ”¶ä¸€ä¸‹</strong>å³å¯ã€‚</p>
</blockquote>
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è¿™æ ·UIç»„ä»¶å°±å¯ä»¥é€šè¿‡ this.props æ¥æ”¶åˆ° <strong>çŠ¶æ€</strong>ï¼š</p>
<pre><code class="prism language-js"><span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
</code></pre>
<hr/>
<p>mapDispatchToProps()å‡½æ•°çš„<strong>è¿”å›å€¼</strong>ä½œä¸º <code>æ“ä½œçŠ¶æ€çš„æ–¹æ³•</code> ä¼ é€’ç»™äº†UIç»„ä»¶ï¼Œå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒmapDispatchToPropså‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„keyå°±ä½œä¸ºä¼ é€’ç»™UIç»„ä»¶propsçš„keyï¼Œvalueå°±ä½œä¸ºä¼ é€’ç»™UIç»„ä»¶propsçš„valueã€‚</p>
<blockquote>
<p>ç”±äºè¦å®ç°åŠ è¿™ä¸ªè¿ç®—ï¼Œå°±è¦åœ¨jiaè¿™ä¸ªå›è°ƒå‡½æ•°é‡Œé€šçŸ¥reduxæ‰§è¡ŒåŠ æ³•ï¼Œå°±è¦è°ƒç”¨store.dispatch(action)è¿™ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œåˆè¦å¼•å…¥storeæ“ä½œçŠ¶æ€ï¼Œä½†æ˜¯è¿™é‡Œä¹Ÿä¸éœ€è¦storeè°ƒç”¨dispatchæ–¹æ³•ï¼Œ<strong>react-reduxå¸®æˆ‘ä»¬æŠŠdispatch()æ–¹æ³•ä¼ è¿‡å»äº†</strong>ï¼Œç›´æ¥ç”¨å³å¯ã€‚</p>
</blockquote>
<pre><code class="prism language-js"><span class="token comment">// å¼•å…¥action</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  createIncrementAction<span class="token punctuation">,</span>
  createDecrementAction<span class="token punctuation">,</span>
  createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>
<span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// é€šçŸ¥reduxæ‰§è¡ŒåŠ æ³•</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// é€šçŸ¥reduxæ‰§è¡Œå‡æ³•</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// é€šçŸ¥reduxæ‰§è¡Œå¼‚æ­¥åŠ æ³•</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è¿™æ ·UIç»„ä»¶å°±å¯ä»¥é€šè¿‡ this.props æ¥æ”¶åˆ° <strong>æ“ä½œçŠ¶æ€çš„æ–¹æ³•</strong>ï¼š</p>
<pre><code class="prism language-js"><span class="token comment">// åŠ æ³•</span>
<span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å‡æ³•</span>
<span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jian</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¥‡æ•°å†åŠ </span>
<span class="token function-variable function">incrementIfOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å¼‚æ­¥åŠ </span>
<span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
  <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
  <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jiaAsync</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<hr/>
<p><code>src=&gt; components=&gt; Count =&gt; index.jsxï¼š</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>

  <span class="token comment">// åŠ æ³•</span>
  <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å‡æ³•</span>
  <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jian</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¥‡æ•°å†åŠ </span>
  <span class="token function-variable function">incrementIfOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¼‚æ­¥åŠ </span>
  <span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// è·å–ç”¨æˆ·è¾“å…¥</span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jiaAsync</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// console.log('UIç»„ä»¶æ¥æ”¶åˆ°çš„propsæ˜¯ï¼š', this.props)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>select ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber <span class="token operator">=</span> c<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementIfOdd<span class="token punctuation">}</span><span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementAsync<span class="token punctuation">}</span><span class="token operator">&gt;</span>å¼‚æ­¥åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>src=&gt; containers=&gt; Count =&gt; index.jsxï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// å¼•å…¥Countçš„UIç»„ä»¶</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">'../../components/Count'</span>
<span class="token comment">// å¼•å…¥action</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  createIncrementAction<span class="token punctuation">,</span>
  createDecrementAction<span class="token punctuation">,</span>
  createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>

<span class="token comment">// å¼•å…¥connectç”¨äºè¿æ¥UIç»„ä»¶ä¸redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// é€šçŸ¥reduxæ‰§è¡ŒåŠ æ³•</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>mapStateToProps<span class="token punctuation">,</span> mapDispatchToProps<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre>
<h2><a id="_reactredux_207"></a>â›³æ±‚å’Œæ¡ˆä¾‹_react-reduxåŸºæœ¬ä½¿ç”¨æ€»ç»“</h2>
<blockquote>
<p>1ï¸âƒ£æ˜ç¡®ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul><li>UIç»„ä»¶ï¼š<strong>ä¸èƒ½ä½¿ç”¨ä»»ä½•reduxçš„api</strong>ï¼Œåªè´Ÿè´£é¡µé¢çš„å‘ˆç°ã€äº¤äº’ç­‰ã€‚</li><li>å®¹å™¨ç»„ä»¶ï¼š<strong>è´Ÿè´£å’Œreduxé€šä¿¡ï¼Œå°†ç»“æœäº¤ç»™UIç»„ä»¶</strong>ã€‚</li></ul>
<p>2ï¸âƒ£å¦‚ä½•åˆ›å»ºä¸€ä¸ªå®¹å™¨ç»„ä»¶â€”â€”â€”ä¾é react-reduxçš„connectå‡½æ•°</p>
<p><code>connect(mapStateToProps,mapDispatchToProps)(UIç»„ä»¶)</code></p>
<ul><li>mapStateToPropsï¼šæ˜ å°„çŠ¶æ€ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡</li><li>mapDispatchToPropsï¼šæ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡</li></ul>
<p>3ï¸âƒ£ å¤‡æ³¨ï¼š<strong>å®¹å™¨ç»„ä»¶ä¸­çš„storeæ˜¯é propsä¼ è¿›å»çš„ï¼Œè€Œä¸æ˜¯åœ¨å®¹å™¨ç»„ä»¶ä¸­ç›´æ¥å¼•å…¥</strong>ã€‚</p>
</blockquote>
<h1><a id="1mapDispatch_225"></a>â­ä¼˜åŒ–1ï¼šç®€å†™mapDispatch</h1>
<p><code>ä¼˜åŒ–å‰ï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// æ˜ å°„çŠ¶æ€</span>
<span class="token keyword">function</span> <span class="token function">mapStateToProps</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>ä¼˜åŒ–åï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// æ˜ å°„çŠ¶æ€</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p><code>ä¼˜åŒ–å‰ï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•</span>
<span class="token keyword">function</span> <span class="token function">mapDispatchToProps</span><span class="token punctuation">(</span><span class="token parameter">dispatch</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// é€šçŸ¥reduxæ‰§è¡ŒåŠ æ³•</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>ä¼˜åŒ–åï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapDispatchToProps</span> <span class="token operator">=</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre>
<hr/>
<p><code>å†ä¼˜åŒ–åï¼š</code></p>
<pre><code class="prism language-js"><span class="token comment">// å¼•å…¥Countçš„UIç»„ä»¶</span>
<span class="token keyword">import</span> CountUI <span class="token keyword">from</span> <span class="token string">'../../components/Count'</span>
<span class="token comment">// å¼•å…¥action</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  createIncrementAction<span class="token punctuation">,</span>
  createDecrementAction<span class="token punctuation">,</span>
  createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>

<span class="token comment">// å¼•å…¥connectç”¨äºè¿æ¥UIç»„ä»¶ä¸redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token comment">//ä½¿ç”¨connect()()åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªCountçš„å®¹å™¨ç»„ä»¶</span>
<span class="token comment">// react-redux APIé»˜è®¤è¦ç»™connectä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä¸¤ä¸ªå‡½æ•°ä¼šæ”¶åˆ°æ¥è‡³reduxä¼ æ¥çš„å€¼å’Œæ–¹æ³•ã€‚</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token function-variable function">jia</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    	<span class="token function-variable function">jian</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createDecrementAction</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    	<span class="token function-variable function">jiaAsync</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
    	<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">createIncrementAsyncAction</span><span class="token punctuation">(</span>number<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre>
<p><strong>mapDispatchToPropsçš„ç®€å†™ï¼š</strong></p>
<pre><code class="prism language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  <span class="token comment">// mapDispatchToPropsçš„ä¸€èˆ¬å†™æ³•</span>
  <span class="token comment">// dispatch =&gt; (</span>
  <span class="token comment">//   {<!-- --></span>
  <span class="token comment">//     jia: number =&gt; dispatch(createIncrementAction(number)),</span>
  <span class="token comment">//     jian: number =&gt; dispatch(createDecrementAction(number)),</span>
  <span class="token comment">//     jiaAsync: (number, time) =&gt;</span>
  <span class="token comment">//       dispatch(createIncrementAsyncAction(number, time))</span>
  <span class="token comment">//   }</span>
  <span class="token comment">// )</span>

  <span class="token comment">// mapDispatchToPropsçš„ç®€å†™</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">jia</span><span class="token operator">:</span> createIncrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jian</span><span class="token operator">:</span> createDecrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jiaAsync</span><span class="token operator">:</span> createIncrementAsyncAction
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>CountUI<span class="token punctuation">)</span>
</code></pre>
<p><strong>åˆ†æmapDispatchToPropsçš„ç®€å†™</strong></p>
<pre><code class="prism language-js"><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">jia</span><span class="token operator">:</span> createIncrementAction<span class="token punctuation">,</span>
  <span class="token literal-property property">jian</span><span class="token operator">:</span> createDecrementAction<span class="token punctuation">,</span>
  <span class="token literal-property property">jiaAsync</span><span class="token operator">:</span> createIncrementAsyncAction
<span class="token punctuation">}</span>
</code></pre>
<p>Countçš„UIç»„ä»¶é‡Œè°ƒç”¨äº†jiaå‡½æ•°ï¼Œä¼ é€’äº†ç”¨æˆ·é€‰æ‹©çš„å‚æ•°ï¼Œç„¶ååœ¨å®¹å™¨ç»„ä»¶é‡Œè°ƒç”¨äº†createIncrementActionæ–¹æ³•ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªactionå¯¹è±¡ï¼Œ<code>react-reduxå¸®æˆ‘ä»¬è‡ªåŠ¨dispatch</code>äº†ã€‚</p>
<blockquote>
<p>mapDispatchToPropså¯ä»¥å†™æˆ<code>ä¸€ä¸ªæ™®é€šçš„å‡½æ•°</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>ä¸€ä¸ªå¯¹è±¡</code>ã€‚</p>
</blockquote>
<blockquote>
<p>react-reduxè¿˜æœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼š<strong>ä¸ç”¨è‡ªå·±ç›‘æµ‹reduxçš„çŠ¶æ€æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–</strong>ï¼Œå†…éƒ¨çš„æ‰€æœ‰é€»è¾‘å…¨éƒ¨äº¤ç»™å®¹å™¨ç»„ä»¶æ¥å®Œæˆï¼Œé¿å…æ±¡æŸ“æ•´ä¸ªappç»„ä»¶ã€‚</p>
</blockquote>
<h1><a id="2Provider_350"></a>â­ä¼˜åŒ–2ï¼šProviderç»„ä»¶çš„ä½¿ç”¨</h1>
<p><code>App.jsx:</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Count <span class="token keyword">from</span> <span class="token string">'./containers/Count'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{<!-- --></span><span class="token comment">/* æ¸²æŸ“å®¹å™¨ç»„ä»¶ï¼Œç»™å®¹å™¨ç»„ä»¶ä¼ é€’store */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Count store<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>store<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>å½“é¡¹ç›®ä¸­æœ‰å¤šä¸ªå®¹å™¨ç»„ä»¶æ—¶ï¼Œæ¯æ¬¡éƒ½è¦ç»™å®¹å™¨ç»„ä»¶ä¼ é€’storeï¼Œè¿™æ ·ä¸å¤ªæ–¹ä¾¿ï¼Œæ‰€ä»¥ï¼šæˆ‘ä»¬å¯ä»¥åœ¨<strong>index.jså…¥å£æ–‡ä»¶</strong>é‡Œå¼•å…¥react-reduxé‡Œçš„ä¸€ä¸ªAPIâ€”â€”<code>Provider</code>ã€‚</p>
<blockquote>
<p>æŠŠæ‰€æœ‰å®¹å™¨ç»„ä»¶éƒ½éœ€è¦çš„storeäº¤ç»™Providerï¼ŒProviderä¼šè‡ªåŠ¨åˆ†ææ•´ä¸ªé¡¹ç›®é‡Œæ‰€æœ‰çš„å®¹å™¨ç»„ä»¶ï¼ŒæŠŠstoreä¼ ç»™æ¯ä¸€ä¸ªéœ€è¦storeçš„å®¹å™¨ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>index.js:</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom/client'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token comment">// åˆ›å»ºè™šæ‹ŸDOM</span>
<span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// æ¸²æŸ“è™šæ‹ŸDOMåˆ°é¡µé¢</span>
root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span><span class="token comment">/* æ£€æŸ¥Appç»„ä»¶ä»¥åŠå­ç»„ä»¶é‡Œçš„ä¸€äº›ä»£ç æ˜¯å¦æœ‰ä¸åˆç†çš„åœ°æ–¹ */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span>
</code></pre>
<h1><a id="3UI_397"></a>â­ä¼˜åŒ–3ï¼šæ•´åˆUIç»„ä»¶ä¸å®¹å™¨ç»„ä»¶</h1>
<p>å‰é¢ä¸¤ä¸ªä¼˜åŒ–ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»ä»£ç å±‚é¢å’ŒAPIå±‚é¢è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†åœ¨æ–‡ä»¶å±‚é¢å¯¹UIç»„ä»¶å’Œå®¹å™¨ç»„ä»¶è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>ç”±äºæˆ‘ä»¬å­¦ä¹ äº†react-reduxåº“ï¼Œè¦æ±‚ä¸ºç»„ä»¶åˆ†åˆ«å†™æˆUIç»„ä»¶å’Œå®¹å™¨ç»„ä»¶ã€‚é‚£ä¹ˆå¦‚æœåœ¨æ•´ä¸ªåº”ç”¨ä¸­ï¼Œæœ‰20ä¸ªç»„ä»¶éœ€è¦å’Œreduxæ‰“äº¤é“ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å†™40ä¸ªç»„ä»¶â€¦å¯æƒ³è€ŒçŸ¥ï¼Œè¿™æ ·å†™æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½œå‡ºä¸€äº›ä¼˜åŒ–ï¼š</p>
<blockquote>
<p>å¯ä»¥å°†<strong>UIç»„ä»¶å’Œå®¹å™¨ç»„ä»¶æ•´åˆåœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹</strong>é‡Œã€‚</p>
</blockquote>
<p><img alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" height="80%" src="https://img-blog.csdnimg.cn/f9a52a123a2d494f812d85a1af0ec413.png#pic_center" width="80%"/></p>
<p><code>/src/containers/Count/index.jsx:</code></p>
<pre><code class="prism language-js"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token comment">// å¼•å…¥action</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  createIncrementAction<span class="token punctuation">,</span>
  createDecrementAction<span class="token punctuation">,</span>
  createIncrementAsyncAction
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../redux/count_action'</span>
<span class="token comment">// å¼•å…¥connectç”¨äºè¿æ¥UIç»„ä»¶ä¸redux</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>

<span class="token comment">// å®šä¹‰UIç»„ä»¶</span>
<span class="token keyword">class</span> <span class="token class-name">Count</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// åŠ æ³•</span>
  <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å‡æ³•</span>
  <span class="token function-variable function">decrement</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jian</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¥‡æ•°å†åŠ </span>
  <span class="token function-variable function">incrementIfOdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jia</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¼‚æ­¥åŠ </span>
  <span class="token function-variable function">incrementAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber
    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">jiaAsync</span><span class="token punctuation">(</span>value <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š<span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>select ref<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token parameter">c</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selectNumber <span class="token operator">=</span> c<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"1"</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"3"</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">+</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>decrement<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">-</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementIfOdd<span class="token punctuation">}</span><span class="token operator">&gt;</span>å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&amp;</span>nbsp<span class="token punctuation">;</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token keyword">this</span><span class="token punctuation">.</span>incrementAsync<span class="token punctuation">}</span><span class="token operator">&gt;</span>å¼‚æ­¥åŠ <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä½¿ç”¨connect()()åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªCountçš„å®¹å™¨ç»„ä»¶</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> state <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// mapDispatchToPropsçš„ç®€å†™</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">jia</span><span class="token operator">:</span> createIncrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jian</span><span class="token operator">:</span> createDecrementAction<span class="token punctuation">,</span>
    <span class="token literal-property property">jiaAsync</span><span class="token operator">:</span> createIncrementAsyncAction
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Count<span class="token punctuation">)</span>
</code></pre>
<h2><a id="_reactredux_479"></a>â›³æ±‚å’Œæ¡ˆä¾‹_react-reduxä¼˜åŒ–æ€»ç»“</h2>
<blockquote>
<p>1ï¸âƒ£ å®¹å™¨ç»„ä»¶å’ŒUIç»„ä»¶<strong>æ•´åˆæˆä¸€ä¸ªæ–‡ä»¶</strong></p>
<p>2ï¸âƒ£ æ— éœ€è‡ªå·±ç»™å®¹å™¨ç»„ä»¶ä¼ é€’storeï¼Œç»™<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         &lt;
        
       
       
        &lt;
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&lt;</span></span></span></span></span>App/&gt;åŒ…è£¹ä¸€ä¸ª<span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         &lt;
        
       
       
        &lt;
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mrel">&lt;</span></span></span></span></span>Provider store={store}&gt;å³å¯ã€‚</p>
<p>3ï¸âƒ£ ä½¿ç”¨äº†react-reduxåä¹Ÿä¸ç”¨å†è‡ªå·±ç›‘æµ‹reduxä¸­çŠ¶æ€çš„æ”¹å˜äº†ï¼Œå®¹å™¨ç»„ä»¶å¯ä»¥è‡ªåŠ¨å®Œæˆè¿™ä¸ªå·¥ä½œã€‚</p>
<p>4ï¸âƒ£ mapDispatchToPropsä¹Ÿå¯ä»¥ç®€å•çš„å†™æˆä¸€ä¸ªå¯¹è±¡ã€‚</p>
<p>5ï¸âƒ£ ä¸€ä¸ªç»„ä»¶è¦å’Œreduxâ€œæ‰“äº¤é“â€è¦ç»è¿‡å“ªå‡ æ­¥ï¼Ÿ</p>
<ul><li> <p>å®šä¹‰å¥½UIç»„ä»¶â€”ä¸æš´éœ²</p> </li><li> <p>å¼•å…¥connectç”Ÿæˆä¸€ä¸ªå®¹å™¨ç»„ä»¶ï¼Œå¹¶æš´éœ²ï¼Œå†™æ³•å¦‚ä¸‹ï¼š</p> <pre><code class="prism language-js"><span class="token function">connect</span><span class="token punctuation">(</span>
  <span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">key</span><span class="token operator">:</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//æ˜ å°„çŠ¶æ€</span>
  <span class="token punctuation">{<!-- --></span><span class="token literal-property property">key</span><span class="token operator">:</span>xxxxAction<span class="token punctuation">}</span>  <span class="token comment">//æ˜ å°„æ“ä½œçŠ¶æ€çš„æ–¹æ³•</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token constant">UI</span>ç»„ä»¶<span class="token punctuation">)</span>
</code></pre> </li><li> <p>åœ¨UIç»„ä»¶ä¸­é€šè¿‡this.props.xxxxxxè¯»å–å’Œæ“ä½œçŠ¶æ€</p> </li></ul>
</blockquote>
<blockquote>
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦âœ¨
         
        
       
       
        \textcolor{red}{ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦âœ¨}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: red;">ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦</span><span class="mord" style="color: red;">âœ¨</span></span></span></span></span> <br/><br/> <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹
         
        
       
       
        \textcolor{blue}{åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: blue;">åŸåˆ›ä¸æ˜“ï¼Œè¿˜å¸Œæœ›å„ä½å¤§ä½¬æ”¯æŒä¸€ä¸‹</span></span></span></span></span> <br/><br/> ğŸ¤ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼
         
        
       
       
        \textcolor{green}{ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">ç‚¹èµï¼Œä½ çš„è®¤å¯æ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ï¼</span></span></span></span></span> <br/><br/> â­ï¸ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼
         
        
       
       
        \textcolor{green}{æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">æ”¶è—ï¼Œä½ çš„é’çæ˜¯æˆ‘åŠªåŠ›çš„æ–¹å‘ï¼</span></span></span></span></span> <br/><br/> âœï¸ <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         
          è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼
         
        
       
       
        \textcolor{green}{è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼}
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord cjk_fallback" style="color: green;">è¯„è®ºï¼Œä½ çš„æ„è§æ˜¯æˆ‘è¿›æ­¥çš„è´¢å¯Œï¼</span></span></span></span></span> <br/></p>
</blockquote>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>