<div class="article_content clearfix" id="article_content">
<link href="style.css" rel="stylesheet"/>
<div class="markdown_views prism-atom-one-dark" id="content_views">
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<path d="M5,0 0,2.5 5,5z" id="raphael-marker-block" stroke-linecap="round" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
</svg>
<p><strong>hbuilderX最新版本现在已经支持在代码中获取当前所处环境</strong></p>
<p>仅3.4.10+版本以上才支持，如果您的hbuilderX版本不是这个版本的需要先升级一下版本 <a href="https://www.dcloud.io/hbuilderx.html">hbuilderx下载</a><br/> 选择3.4.11及以上版本</p>
<pre><code class="prism language-javascript"><span class="token keyword">const</span> type <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>uniPlatform
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token comment">// app</span>
</code></pre>
<p><b> uniPlatform</b> <strong>可取值如下：</strong></p>
<table><thead><tr><th align="left">值</th><th align="left">生效条件</th></tr></thead><tbody><tr><td align="left">app</td><td align="left">App</td></tr><tr><td align="left">web</td><td align="left">H5</td></tr><tr><td align="left">mp-weixin</td><td align="left">微信小程序</td></tr><tr><td align="left">mp-alipay</td><td align="left">支付宝小程序</td></tr><tr><td align="left">mp-baidu</td><td align="left">百度小程序</td></tr><tr><td align="left">mp-toutiao</td><td align="left">字节跳动小程序</td></tr><tr><td align="left">mp-lark</td><td align="left">飞书小程序</td></tr><tr><td align="left">mp-qq</td><td align="left">QQ小程序</td></tr><tr><td align="left">mp-kuaishou</td><td align="left">快手小程序</td></tr><tr><td align="left">mp-jd</td><td align="left">京东小程序</td></tr><tr><td align="left">MP-360</td><td align="left">360小程序</td></tr><tr><td align="left">quickapp-webview</td><td align="left">快应用通用(包含联盟、华为)</td></tr><tr><td align="left">quickapp-webview-union</td><td align="left">快应用联盟</td></tr><tr><td align="left">quickapp-webview-huawei</td><td align="left">快应用华为</td></tr></tbody></table>
<p>我们也可以通过这个方法获取到设备的品牌以及型号</p>
<pre><code class="prism language-javascript">获取设备品牌
<span class="token keyword">const</span> brand<span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>deviceBrand
获取设备型号
<span class="token keyword">const</span> model<span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>deviceModel
获取设备类型
<span class="token keyword">const</span> deviceType<span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>deviceType
</code></pre>
<p>还有很多新增的系统信息 具体可以查看<a href="https://uniapp.dcloud.net.cn/api/system/info.html#getsysteminfo">uniapp获取系统信息</a></p>
<p><strong>还有一种方法就是通过js 来获取当前环境</strong><br/> javascript的navigator对象是Window对象的一个属性，指向了一个包含浏览器相关信息的对象。navigatot中包含了一些常用到的属性，如</p>
<p>navigator.appVersion 浏览器的版本号</p>
<p>navigator.appName 浏览器的名称</p>
<p>navigator.language 浏览器使用的语言</p>
<p>navigator.platform 浏览器使用的平台</p>
<p>navigator.userAgent 浏览器的user-agent信息</p>
<p>其中userAgent 属性是一个只读的字符串，声明了浏览器用于 HTTP 请求的用户代理头的值。</p>
<p>一般来讲，它是在 navigator.appCodeName 的值之后加上斜线和 navigator.appVersion 的值构成的。</p>
<p>例如：Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322)。</p>
<p>我们可以通过这个方法来判断当前运行环境</p>
<pre><code class="prism language-javascript"><span class="token number">1.</span>微信内置浏览器环境
<span class="token keyword">var</span> ua <span class="token operator">=</span> window<span class="token punctuation">.</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">MicroMessenger</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'micromessenger'</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//当前为微信内置浏览器环境</span>
<span class="token punctuation">}</span>

<span class="token number">2.</span>安卓，苹果手机 pc

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(iPhone|iPad|iPod|iOS)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
<span class="token comment">//判断iPhone|iPad|iPod|iOS</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(Android)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 
<span class="token comment">//判断Android</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span> 
<span class="token comment">//pc</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token number">3.</span>还可以判断浏览器的类型
 
<span class="token keyword">function</span> <span class="token function">userBrowser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token keyword">var</span> browserName<span class="token operator">=</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
 
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">msie</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opera</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token comment">//IE</span>
 
<span class="token keyword">return</span> <span class="token punctuation">;</span>   
 
<span class="token punctuation">}</span><span class="token function">elseif</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">firefox</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token comment">//Firefox</span>
 
<span class="token keyword">return</span> <span class="token punctuation">;</span>   
 
<span class="token punctuation">}</span><span class="token function">elseif</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">chrome</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">webkit</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mozilla</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token comment">//Chrome</span>
 
<span class="token keyword">return</span> <span class="token punctuation">;</span>   
 
<span class="token punctuation">}</span><span class="token function">elseif</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">opera</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token comment">//Opera</span>
 
<span class="token keyword">return</span> <span class="token punctuation">;</span>   
 
<span class="token punctuation">}</span><span class="token function">elseif</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">webkit</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">chrome</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">webkit</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">mozilla</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>browserName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>   
 
<span class="token comment">//Safari</span>
 
<span class="token keyword">return</span> <span class="token punctuation">;</span>   
 
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>   
 <span class="token comment">//unKnow  </span>
 <span class="token punctuation">}</span>   
<span class="token punctuation">}</span>
</code></pre>
<p><strong>如果你仅仅是想在代码编译的时候判断环境 ， 那么通过条件编译便可以进行判断</strong></p>
<table><thead><tr><th>条件编译写法</th><th>说明</th></tr></thead><tbody><tr><td>
<div class="code">
<span class="token comment"> #ifdef<b> APP-PLUS</b></span>
<br/>需条件编译的代码
     <br/>
<span class="token comment">  #endif</span>
</div></td><td>仅出现在 App 平台下的代码</td></tr><tr><td>
<div class="code">
<span class="token comment">  #ifndef<b> H5</b></span>
<br/>需条件编译的代码
     <br/>
<span class="token comment">  #endif</span>
</div></td><td>除了 H5 平台，其它平台均存在的代码</td></tr><tr><td>
<div class="code">
<span class="token comment">  #ifdef<b> H5</b></span>
      || 
     <b>MP-WEIXIN</b>
<br/>需条件编译的代码
     <br/>
<span class="token comment">  #endif</span>
</div></td><td>在 H5 平台或微信小程序平台存在的代码（这里只有||，不可能出现&amp;&amp;，因为没有交集）</td></tr></tbody></table>
<p><b> %PLATFORM%</b> <strong>可取值如下：</strong></p>
<table><thead><tr><th align="left">值</th><th align="left">生效条件</th></tr></thead><tbody><tr><td align="left">VUE3</td><td align="left">HBuilderX 3.2.0+ <a href="https://ask.dcloud.net.cn/article/37834">详情</a></td></tr><tr><td align="left">APP-PLUS</td><td align="left">App</td></tr><tr><td align="left">APP-PLUS-NVUE或APP-NVUE</td><td align="left">App nvue</td></tr><tr><td align="left">H5</td><td align="left">H5</td></tr><tr><td align="left">MP-WEIXIN</td><td align="left">微信小程序</td></tr><tr><td align="left">MP-ALIPAY</td><td align="left">支付宝小程序</td></tr><tr><td align="left">MP-BAIDU</td><td align="left">百度小程序</td></tr><tr><td align="left">MP-TOUTIAO</td><td align="left">字节跳动小程序</td></tr><tr><td align="left">MP-LARK</td><td align="left">飞书小程序</td></tr><tr><td align="left">MP-QQ</td><td align="left">QQ小程序</td></tr><tr><td align="left">MP-KUAISHOU</td><td align="left">快手小程序</td></tr><tr><td align="left">MP-JD</td><td align="left">京东小程序</td></tr><tr><td align="left">MP-360</td><td align="left">360小程序</td></tr><tr><td align="left">MP</td><td align="left">微信小程序/支付宝小程序/百度小程序/字节跳动小程序/飞书小程序/QQ小程序/360小程序</td></tr><tr><td align="left">QUICKAPP-WEBVIEW</td><td align="left">快应用通用(包含联盟、华为)</td></tr><tr><td align="left">QUICKAPP-WEBVIEW-UNION</td><td align="left">快应用联盟</td></tr><tr><td align="left">QUICKAPP-WEBVIEW-HUAWEI</td><td align="left">快应用华为</td></tr></tbody></table>
<p><strong>组件或者内容条件编译</strong></p>
<pre><code class="prism language-html"><span class="token comment">&lt;!--  #ifdef  %PLATFORM% --&gt;</span>
平台特有的组件或者html内容
<span class="token comment">&lt;!--  #endif --&gt;</span>
</code></pre>
<p>示例，如下公众号关注组件仅会在微信小程序中出现：</p>
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>微信公众号关注组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- uni-app未封装，但可直接使用微信原生的official-account组件--&gt;</span>
        <span class="token comment">&lt;!-- #ifdef MP-WEIXIN --&gt;</span>
		        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>official-account</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>official-account</span><span class="token punctuation">&gt;</span></span>
		    <span class="token comment">&lt;!-- #endif --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><strong>api条件编译</strong></p>
<pre><code class="prism language-javascript"><span class="token comment">// #ifdef  %PLATFORM%</span>
平台特有的<span class="token constant">API</span>实现
<span class="token comment">// #endif</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/1026c51417454062b372203197f90aa5.png"/></p>
<p><strong>样式条件编译</strong></p>
<pre><code class="prism language-css"><span class="token comment">/*  #ifdef  %PLATFORM%  */</span>
平台特有样式
<span class="token comment">/*  #endif  */</span>
</code></pre>
<p><img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/c05cbb3523e341929f2fa44838c28fc4.png"/><br/> <strong>pages.json 的条件编译</strong></p>
<p>下面的页面，只有运行至 App 时才会编译进去。<br/> <img alt="在这里插入图片描述" src="https://img-blog.csdnimg.cn/b520672f22e241148d48609eb5166a64.png"/></p>
<p>具体的条件编译使用方法，可以去官网了解<a href="https://uniapp.dcloud.net.cn/tutorial/platform.html#%E8%B7%A8%E7%AB%AF%E5%85%BC%E5%AE%B9">uniapp条件编译</a></p>
</div>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css" rel="stylesheet"/>
<link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css" rel="stylesheet"/>
</div>