{"blogid": "122992387", "writerAge": "码龄1年", "writerBlogNum": "28", "writerCollect": "192", "writerComment": "53", "writerFan": "243", "writerGrade": "3级", "writerIntegral": "488", "writerName": "轶软工作室", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_122992387.jpg", "writerRankTotal": "54104", "writerRankWeekly": "33430", "writerThumb": "52", "writerVisitNum": "742838", "blog_read_count": "1392", "blog_time": "于 2022-02-20 00:00:00 发布", "blog_title": "自动切换http为https重定向的几种有效方法，访问http网站页面时自动跳转https地址链接的代码，已测试", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>第一种 PHP 的自动切换方法：</p>\n<p>&lt;?php</p>\n<pre><code class=\"language-php\">if ($_SERVER[\"HTTPS\"] &lt;&gt; \"on\"){$URLS=\"https://\".$_SERVER[\"SERVER_NAME\"].$_SERVER[\"REQUEST_URI\"];header(\"Location: \".$URLS);};</code></pre>\n<p>?&gt;</p>\n<p>———————————————————————————————————————————</p>\n<p>第二种 JS 的脚本自动跳转方法：</p>\n<p>&lt;script type=\"text/javascript\"&gt;</p>\n<pre><code class=\"language-javascript\">var url = window.location.href;if (url.indexOf(\"https\") &lt; 0) { url = url.replace(\"http:\", \"https:\");window.location.replace(url);}</code></pre>\n<p>&lt;/script&gt;</p>\n<p>———————————————————————————————————————————</p>\n<p>第三种 Apache 的，写在.htaccess文件的&lt;Directory&gt;标签内即可：</p>\n<pre><code class=\"language-html\">RewriteEngine on\nRewriteBase /usenk\nRewriteCond %{SERVER_PORT} !^443$\nRewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [L,R]</code></pre>\n<p>———————————————————————————————————————————</p>\n<p>第四种 Nginx 的，在配置文件nginx.conf中的 server { ... } 项中插入：</p>\n<pre><code class=\"language-html\">rewrite ^(.*)$ https://$host$1 permanent;</code></pre>\n<p>例如：</p>\n<pre><code class=\"language-html\">server {\n \n    listen 80;\n \n    server_name usenk.com;\n \n    rewrite ^(.*)$ https://$host$1 permanent;\n\n }</code></pre>\n<p>或者写成新版的【 return 301 https://$server_name$request_uri;】也可以。</p>\n<p>———————————————————————————————————————————</p>\n<p>最后一种 HTML 的，在&lt;head&gt;标签中写个meta识别方法：</p>\n<pre><code class=\"language-html\">&lt;meta http-equiv=\"Content-Security-Policy\" content=\"upgrade-insecure-requests\"&gt;</code></pre>\n<p>———————————————————————————————————————————</p>\n<p>以上就是访问页面为http地址时自动切换https重定向的几种方法，感谢点赞关注轶软工作室。</p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 1, "java": 0, "sql": 0, "php": 1, "time": "2022-02-20 00:00:00", "summary": "第一种的自动切换方法：第二种的脚本自动跳转方法：第三种的，写在文件的标签内即可：第四种的，在配置文件中的项中插入：例如：或者写成新版的也可以。最后一种的，在标签中写个识别方法：以上就是访问页面为地址时"}