{"blogid": "126720469", "writerAge": "码龄4年", "writerBlogNum": "961", "writerCollect": "1249", "writerComment": "131", "writerFan": "9338", "writerGrade": "7级", "writerIntegral": "11513", "writerName": "黄昏和星空", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126720469.jpg", "writerRankTotal": "1465", "writerRankWeekly": "442", "writerThumb": "804", "writerVisitNum": "820366", "blog_read_count": "128", "blog_time": "于 2022-09-06 10:51:54 发布", "blog_title": "c#-WPF使用类和子类绑定到DataContext", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>c#-WPF使用类和子类绑定到DataContext<br/> 2019-11-02 14:05:16 阅读：231 来源： 互联网<br/> 标签：data-binding wpf xaml c</p>\n<p>我在wpf中玩数据绑定,遇到问题.这是我的代码：</p>\n<p>MainWindow.xaml</p>\n<p><br/> <br/> <br/> <br/> <br/> <br/> <br/> MainWindow.xaml.cs</p>\n<p>public partial class MainWindow : Window<br/> {<!-- --><br/> public MainWindow()<br/> {<!-- --><br/> InitializeComponent();<br/> MyClass myClass = new MyClass();<br/> myClass.A = new MySubClass();<br/> myClass.B = new MySubClass();<br/> stackpanel.DataContext = myClass;<br/> }<br/> }<br/> MyClass.cs</p>\n<p>class MyClass : INotifyPropertyChanged<br/> {<!-- --><br/> private MySubClass a;<br/> public MySubClass A<br/> {<!-- --><br/> get { return a; }<br/> set<br/> {<!-- --><br/> a = value;<br/> OnPropertyChanged(“A”);<br/> OnPropertyChanged(“C”);<br/> }<br/> }</p>\n<pre><code>private MySubClass b;\npublic MySubClass B \n{\n    get { return b; }\n    set\n    {\n        b = value;\n        OnPropertyChanged(\"B\");\n        OnPropertyChanged(\"C\");\n    }\n}\n\npublic int C\n{\n    get { return A.Number + B.Number; }\n}\n\npublic event PropertyChangedEventHandler PropertyChanged;\nprivate void OnPropertyChanged(string p)\n{\n    if (PropertyChanged != null)\n    {\n        PropertyChanged(this, new PropertyChangedEventArgs(p));\n    }\n}        \n</code></pre>\n<p>}<br/> MySubClass.cs</p>\n<p>class MySubClass : INotifyPropertyChanged<br/> {<!-- --><br/> private int number;<br/> public int Number<br/> {<!-- --><br/> get { return number; }<br/> set<br/> {<!-- --><br/> number = value;<br/> OnPropertyChanged(“Number”);<br/> }<br/> }</p>\n<pre><code>public MySubClass()\n{\n    Number = 1;\n}\n\npublic event PropertyChangedEventHandler PropertyChanged;\nprivate void OnPropertyChanged(string p)\n{\n    if (PropertyChanged != null)\n    {\n        PropertyChanged(this, new PropertyChangedEventArgs(p));\n    }\n}     \n</code></pre>\n<p>}<br/> 现在,问题是在我运行应用程序后,绑定工作正常.另外,当我在文本框中更改值A.Number和B.Number时,它们也可以更新.但是,只有在应用启动时才更新MyClass.C中的变量C,之后才更新.我需要更改什么,以便当我更改A.Number或B.Number时C更新.谢谢.</p>\n<p>解决方法:</p>\n<p>在更新数据模型时,是否直接在MySubClass实例上更改Number或将新的子类分配给MyClass实例？即：</p>\n<p>myClass.A.Number = 5; // will trigger OnPropertyChanged on MySubClass, but not on MyClass<br/> 不会触发A上的OnPropertyChanged(但当然会更新A.Number).<br/> 为此,您必须执行以下操作：</p>\n<p>MySubClass v = new MySubClass()<br/> v.Number = 5;<br/> myClass.A = v; // will trigger OnPropertyChanged on MyClass<br/> 更新的答案.您可以执行此操作以捕获a和b中的任何属性更改.</p>\n<p>public MyClass()<br/> {<!-- --><br/> a.PropertyChanged += new PropertyChangedEventHandler(UpdateC);<br/> b.PropertyChanged += new PropertyChangedEventHandler(UpdateC);<br/> }</p>\n<p>void UpdateC(object sender, PropertyChangedEventArgs e)<br/> {<!-- --><br/> OnPropertyChanged(“C”);<br/> }</p>\n<p>标签：data-binding,wpf,xaml,c<br/> 来源： https://codeday.me/bug/20191102/1991948.html</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3f0d00a73c834e4b81fdaf0e22cb248b.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d9457e2f415a4bb08b65e861b1009764.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f1248582997c4ceab0219f7eaa7e238b.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0842cc8d23454d4596cf4c44d998e982.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-06 10:51:54", "summary": "使用类和子类绑定到阅读：来源：互联网标签：我在中玩数据绑定遇到问题这是我的代码：现在问题是在我运行应用程序后绑定工作正常另外当我在文本框中更改值和时它们也可以更新但是只有在应用启动时才更新中的变量之后"}