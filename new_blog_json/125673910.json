{"blogid": "125673910", "writerAge": "码龄6年", "writerBlogNum": "100", "writerCollect": "837", "writerComment": "479", "writerFan": "5566", "writerGrade": "5级", "writerIntegral": "2517", "writerName": "德宏大魔王", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125673910.jpg", "writerRankTotal": "7715", "writerRankWeekly": "1148", "writerThumb": "407", "writerVisitNum": "132196", "blog_read_count": "2371", "blog_time": "于 2022-07-08 12:41:01 发布", "blog_title": "小程序如何使用订阅消息（PHP代码+小程序js代码）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>❤️❤️❤️❤️❤️❤️ 🥳🥳🥳 茫茫人海千千万万，感谢这一刻你看到了我的文章，感谢观赏，大家好呀，欢迎加入人工智能交流群（看我的动态），更多周边福利等你🥳🥳🥳</p>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/834cbfdac09a4b1aa3984cfb7bb30379.gif#pic_center\"/></p>\n</blockquote>\n<blockquote>\n<p>✨✨欢迎订阅本专栏或者关注我，大家一起努力每天一题算法题✨✨</p>\n<p>❤️❤️❤️ 最后，希望我的这篇文章能对你的有所帮助！</p>\n<p>愿自己还有你在未来的日子，保持学习，保持进步，保持热爱，奔赴山海！ ❤️❤️❤️</p>\n</blockquote>\n<h1><a id=\"_14\"></a>前景</h1>\n<p>本次开发时又再次用到，结合之前的摸爬滚打的经验，我给大家整理下，做到一文就能让你明白[<strong>什么是订阅消息？</strong>]、[<strong>如何使用订阅消息</strong>]、[<strong>开发订阅消息</strong>]，<mark>还在等什么？小程序学习订阅本专栏不香嘛？！</mark>，<s>顺便关注走一走[滑稽]</s></p>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><a href=\"#_14\">前景</a></li><li><a href=\"#_19\">什么是小程序订阅消息？</a></li><li><ul><li><a href=\"#1__24\">1. 一次性订阅消息</a></li><li><a href=\"#2__28\">2. 长期订阅消息</a></li><li><a href=\"#3__34\">3. 设备订阅消息</a></li><li><a href=\"#_39\">何为一次性模板？</a></li><li><a href=\"#_42\">订阅消息的格式</a></li></ul>\n</li><li><a href=\"#_57\">运行基本流程</a></li><li><a href=\"#_61\">开发步骤</a></li><li><ul><li><a href=\"#_62\">第一步开通订阅消息</a></li><li><a href=\"#_65\">选择消息模板</a></li><li><a href=\"#_70\">小程序申请授权</a></li><li><a href=\"#PHPredis_190\">后端PHP封装、redis配置</a></li><li><a href=\"#notifyphp_313\">修改notify.php文件</a></li><li><a href=\"#_368\">测试</a></li></ul>\n</li><li><a href=\"#_410\">总结</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_19\"></a>什么是小程序订阅消息？</h1>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c6f2c434497d42f29d0bb0ce9d9c67b7.png\"/></p>\n<p>可以实现给授权了的用户进行消息推送，推送一些指定的消息，带动用户的点击，例如提醒用户签到，或者发送一些奖励到账等通知，目的就是一个，带动用户的点击，留住老用户。在这里我们需要通过，小程序的后台去开通订阅消息，订阅消息<strong>企业</strong>、<strong>个人</strong>都可以开通，机关部门可以<strong>申请长期订阅模板</strong>、而其他的就只能选择一次性模板<br/> 消息类型</p>\n<h2><a id=\"1__24\"></a>1. 一次性订阅消息</h2>\n<p>一次性订阅消息用于解决用户使用小程序后，后续服务环节的通知问题。用户自主订阅后，开发者可不限时间地下发一条对应的服务消息；每条消息可单独订阅或退订。</p>\n<h2><a id=\"2__28\"></a>2. 长期订阅消息</h2>\n<p>一次性订阅消息可满足小程序的大部分服务场景需求，但线下公共服务领域存在一次性订阅无法满足的场景，如航班延误，需根据航班实时动态来多次发送消息提醒。为便于服务，我们提供了长期性订阅消息，用户订阅一次后，开发者可长期下发多条消息。</p>\n<p>目前长期性订阅消息仅向政务民生、医疗、交通、金融、教育等线下公共服务开放，后期将逐步支持到其他线下公共服务业务。</p>\n<h2><a id=\"3__34\"></a>3. 设备订阅消息</h2>\n<p>设备订阅消息是一种特殊类型的订阅消息，它属于长期订阅消息类型，且需要完成「设备接入」才能使用。</p>\n<p>设备订阅消息用于在设备触发某些需要人工介入的事件时（例如设备发生故障、设备耗材不足等），向用户发送消息通知。详见设备订阅消息文档</p>\n<h2><a id=\"_39\"></a>何为一次性模板？</h2>\n<p>简明扼要来说，就是用户授权一次可以获取一次消息，开发者不可以一直推送消息打扰用户</p>\n<h2><a id=\"_42\"></a>订阅消息的格式</h2>\n<p>订阅消息是不可以随便发送的，需要对应到格式，包括字数长度等等，可以看这个，这是一个签到模板<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b28a352ea8624c51bba0ba12365cb7df.png\"/></p>\n<p>看下他的详情</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\84e3332923c241b5b0443e9b8f64be02.png\"/></p>\n<table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>活动名称</td><td>{<!-- -->{thing1.DATA}}</td></tr><tr><td>温馨提示</td><td>{<!-- -->{thing2.DATA}}</td></tr><tr><td>签到方式</td><td>{<!-- -->{thing5.DATA}}</td></tr><tr><td>签到状态</td><td>{<!-- -->{phrase6.DATA}}</td></tr></tbody></table>\n<p>这里的thing1、thing5都由字数的规范，防止推送垃圾消息，引流之类的</p>\n<h1><a id=\"_57\"></a>运行基本流程</h1>\n<p>前端通过组件接口用户进行授权，后端通过定时触发，将模板消息触发<br/> 可以通过宝塔的定时计划来进行触发，用到的各种鉴权，我们通过redis来存储</p>\n<h1><a id=\"_61\"></a>开发步骤</h1>\n<h2><a id=\"_62\"></a>第一步开通订阅消息</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\032457d01f234afa9f607d03e0b0cead.png\"/></p>\n<h2><a id=\"_65\"></a>选择消息模板</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8b76901dec9c497196024d3fd0456e97.png\"/><br/> 注意：如果没有想要的模板，去把小程序的<strong>服务类目</strong>多加几个<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3c57d1f74a09446c8442f291b95108b6.png\"/></p>\n<h2><a id=\"_70\"></a>小程序申请授权</h2>\n<p>一次性订阅消息、长期订阅消息，接口</p>\n<blockquote>\n<p>wx.requestSubscribeMessage</p>\n</blockquote>\n<p>代码：</p>\n<pre><code class=\"prism language-bash\">wx.requestSubscribeMessage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      tmplIds: <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>,\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>上面的tmplIds里面填写的就是申请到的<strong>模板ID</strong>，例如我的</p>\n<blockquote>\n<p>6io5lFLo4OEdNjl2_F********RZEm6RMdHLQ</p>\n</blockquote>\n<p>这里之前做过测试多个模板id一次性授权，存在bug，只会取第一个有效，啥意思呢？就是像这样</p>\n<blockquote>\n<p>tmplIds: [‘1’,‘2’],<br/> 这个大家自己去测试</p>\n</blockquote>\n<hr/>\n<p>我们新建wxml文件：</p>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&lt;</span>view <span class=\"token assign-left variable\">style</span><span class=\"token operator\">=</span><span class=\"token string\">\"height: 100rpx;\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>/view<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span>抽奖<span class=\"token operator\">&lt;</span>/button<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>view <span class=\"token assign-left variable\">style</span><span class=\"token operator\">=</span><span class=\"token string\">\"height: 100rpx;\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>/view<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>button <span class=\"token assign-left variable\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span> <span class=\"token assign-left variable\">bindtap</span><span class=\"token operator\">=</span><span class=\"token string\">\"sign_up\"</span><span class=\"token operator\">&gt;</span>签到<span class=\"token operator\">&lt;</span>/button<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>view <span class=\"token assign-left variable\">style</span><span class=\"token operator\">=</span><span class=\"token string\">\"height: 100rpx;\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>/view<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span>购买<span class=\"token operator\">&lt;</span>/button<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>view <span class=\"token assign-left variable\">style</span><span class=\"token operator\">=</span><span class=\"token string\">\"height: 100rpx;\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>/view<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span>分享<span class=\"token operator\">&lt;</span>/button<span class=\"token operator\">&gt;</span>\n注释：1每个人能每天能分享一次，重复分享积分不算入\n<span class=\"token number\">2</span>邀请新用户登录后加积分\n</code></pre>\n<p>新建js文件：</p>\n<pre><code class=\"prism language-bash\">// pages/share/share.js\nPage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n\n  /**\n   * 页面的初始数据\n   */\n  data: <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n  sign_up:<span class=\"token function-name function\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    wx.requestSubscribeMessage<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      tmplIds: <span class=\"token punctuation\">[</span><span class=\"token string\">'6io5lFLo4OEdNjl2_F********RZEm6RMdHLQ'</span><span class=\"token punctuation\">]</span>,\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>,\n  /**\n   * 生命周期函数--监听页面加载\n   */\n  onLoad<span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 生命周期函数--监听页面初次渲染完成\n   */\n  <span class=\"token function-name function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 生命周期函数--监听页面显示\n   */\n  <span class=\"token function-name function\">onShow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 生命周期函数--监听页面隐藏\n   */\n  <span class=\"token function-name function\">onHide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 生命周期函数--监听页面卸载\n   */\n  <span class=\"token function-name function\">onUnload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 页面相关事件处理函数--监听用户下拉动作\n   */\n  <span class=\"token function-name function\">onPullDownRefresh</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 页面上拉触底事件的处理函数\n   */\n  <span class=\"token function-name function\">onReachBottom</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>,\n\n  /**\n   * 用户点击右上角分享\n   */\n  <span class=\"token function-name function\">onShareAppMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>测试下可以正常授权<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6e8a2365be6e43a5a6b69d41399b39c7.png\"/></p>\n<h2><a id=\"PHPredis_190\"></a>后端PHP封装、redis配置</h2>\n<p>在api目录下新建文件<strong>notify.php</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&lt;</span>?php\n// 微信小程序通知主要函数\n//http_request 利用curl请求  两个参数   url连接地址   数据信息\n<span class=\"token keyword\">function</span> http_request<span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span>,<span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token variable\">$ch</span> <span class=\"token operator\">=</span> curl_init<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//初始化\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_URL, <span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//设置\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_RETURNTRANSFER, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_SSL_VERIFYPEER, FALSE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_SSL_VERIFYHOST, FALSE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_POST, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_POSTFIELDS, <span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$output</span> <span class=\"token operator\">=</span> curl_exec<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//执行 \n    curl_close<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//关闭\n    <span class=\"token builtin class-name\">return</span> <span class=\"token variable\">$output</span><span class=\"token punctuation\">;</span>//返回结果\n<span class=\"token punctuation\">}</span>\n\n//封装方法\n\n//签到通知\n <span class=\"token keyword\">function</span> notify_sign<span class=\"token punctuation\">(</span><span class=\"token variable\">$touser</span>,<span class=\"token variable\">$ACCESS_TOKEN</span>,<span class=\"token variable\">$order_num</span>,<span class=\"token variable\">$shop_name</span>,<span class=\"token variable\">$user_name9</span>,<span class=\"token variable\">$phone</span>,<span class=\"token variable\">$address</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token variable\">$template</span><span class=\"token operator\">=</span>array<span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'touser'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$touser</span>\"</span>,//接收方openid\n        <span class=\"token string\">'template_id'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"8nHJ-TGMbPXBEROLpIEsba4ZMKt4lkJlJoEO5RcTYmk\"</span>,    //模板的id\n        <span class=\"token string\">'page'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"pages/admin_order/admin_order\"</span>,//点击小程序订阅消息跳转的页\n        <span class=\"token string\">'data'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span>\n            // <span class=\"token string\">'character_string1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$out_trade_no</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"#00008B\"</span><span class=\"token punctuation\">)</span>,   \n            <span class=\"token string\">'character_string12'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$order_num</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,  \n            // <span class=\"token string\">'amount4'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"15\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,  \n            <span class=\"token string\">'thing1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$shop_name</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,\n            <span class=\"token string\">'thing8'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$user_name9</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,\n            <span class=\"token string\">'phone_number9'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$phone</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,\n            <span class=\"token string\">'thing11'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$address</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n        // <span class=\"token string\">'phrase1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>urlencode<span class=\"token punctuation\">(</span><span class=\"token variable\">$plan</span><span class=\"token punctuation\">)</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,   //时间\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$json_template</span><span class=\"token operator\">=</span>json_encode<span class=\"token punctuation\">(</span><span class=\"token variable\">$template</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$url</span><span class=\"token operator\">=</span><span class=\"token string\">\"https://api.weixin.qq.com/cgi-bin/message/subscribe/send?access_token=\"</span><span class=\"token builtin class-name\">.</span><span class=\"token variable\">$ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$res</span><span class=\"token operator\">=</span>http_request<span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span>,urldecode<span class=\"token punctuation\">(</span><span class=\"token variable\">$json_template</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n    print_r<span class=\"token punctuation\">(</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n?<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>下载redis服务，记得开放6379端口<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e9ef50cb954a4a8cada3fe60eb715fe4.png\"/></p>\n<hr/>\n<p>新建access_token.php文件<br/> 通过定时任务对access_token的存储，在快过期时调用更新，这里说一次为啥不调用一次刷新一次access_token就好了，弄这么麻烦？因为当access_token刷新后已经通知过的模板消息就会失效，为了防止以前发的模板消息失效，能最大程度降低失效，可以用定时器的方法更新access_token即可</p>\n<p>再看下官方怎么说的：</p>\n<blockquote>\n<p>access_token 的存储至少要保留 512 个字符空间；<br/> access_token 的有效期目前为 2 个小时，需定时刷新，重复获取将导致上次获取的 access_token 失效；<br/> 建议开发者使用中控服务器统一获取和刷新 access_token，其他业务逻辑服务器所使用的 access_token 均来自于该中控服务器，不应该各自去刷新，否则容易造成冲突，导致 access_token 覆盖而影响业务；</p>\n</blockquote>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&lt;</span>?php\n//access_token\n<span class=\"token variable\">$appid</span><span class=\"token operator\">=</span><span class=\"token string\">\"wxe20298c8e087576e\"</span><span class=\"token punctuation\">;</span>//小程序id\n<span class=\"token variable\">$secret</span><span class=\"token operator\">=</span><span class=\"token string\">\"*****\"</span><span class=\"token punctuation\">;</span>//密钥\n<span class=\"token variable\">$grant_type</span><span class=\"token operator\">=</span><span class=\"token string\">\"client_credential\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$access_token</span><span class=\"token operator\">=</span>curl_get<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://api.weixin.qq.com/cgi-bin/token?appid=<span class=\"token variable\">$appid</span>&amp;secret=<span class=\"token variable\">$secret</span>&amp;grant_type=<span class=\"token variable\">$grant_type</span>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$access_token</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">function</span> curl_get<span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n \n   <span class=\"token variable\">$header</span> <span class=\"token operator\">=</span> array<span class=\"token punctuation\">(</span>\n       <span class=\"token string\">'Accept: application/json'</span>,\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$curl</span> <span class=\"token operator\">=</span> curl_init<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    //设置抓取的url\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_URL, <span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    //设置头文件的信息作为数据流输出\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_HEADER, <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    // 超时设置,以秒为单位\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_TIMEOUT, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n    // 超时设置，以毫秒为单位\n    // curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_TIMEOUT_MS, <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n    // 设置请求头\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_HTTPHEADER, <span class=\"token variable\">$header</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    //设置获取的信息以文件流的形式返回，而不是直接输出。\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_RETURNTRANSFER, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_SSL_VERIFYPEER, <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span>, CURLOPT_SSL_VERIFYHOST, <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    //执行命令\n    <span class=\"token variable\">$data</span> <span class=\"token operator\">=</span> curl_exec<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n    // 显示错误信息\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curl_error<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span><span class=\"token punctuation\">))</span> <span class=\"token punctuation\">{<!-- --></span>\n        print <span class=\"token string\">\"Error: \"</span> <span class=\"token builtin class-name\">.</span> curl_error<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token variable\">$result</span><span class=\"token operator\">=</span>json_decode<span class=\"token punctuation\">(</span><span class=\"token variable\">$data</span>,true<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    //  <span class=\"token variable\">$ACCESS_TOKEN</span><span class=\"token operator\">=</span><span class=\"token variable\">$result</span><span class=\"token punctuation\">[</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        curl_close<span class=\"token punctuation\">(</span><span class=\"token variable\">$curl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//关闭连接\n        //  <span class=\"token builtin class-name\">return</span> <span class=\"token variable\">$result</span><span class=\"token punctuation\">[</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n         // //存入到redis\n// // 如果未修改php.ini下面两行注释去掉\n ini_set<span class=\"token punctuation\">(</span><span class=\"token string\">'session.save_handler'</span>, <span class=\"token string\">'redis'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ini_set<span class=\"token punctuation\">(</span><span class=\"token string\">'session.save_path'</span>, <span class=\"token string\">'tcp://127.0.0.1:6379'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redis</span> <span class=\"token operator\">=</span> new redis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redis</span>-<span class=\"token operator\">&gt;</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span>, <span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redis</span>-<span class=\"token operator\">&gt;</span>set<span class=\"token punctuation\">(</span><span class=\"token string\">'kuaiquyin_wx_token'</span>,<span class=\"token variable\">$result</span><span class=\"token punctuation\">[</span><span class=\"token string\">'access_token'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token builtin class-name\">echo</span> <span class=\"token variable\">$redis</span>-<span class=\"token operator\">&gt;</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'kuaiquyin_wx_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n ?<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>我们访问测试下：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\da44810a0fab4d0ca4f530438f56bdab.png\"/></p>\n<p>设计定时器触发更新access_token<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e7426c40b78f4571aa1af1c3a46e7b11.png\"/></p>\n<h2><a id=\"notifyphp_313\"></a>修改notify.php文件</h2>\n<p>打开小程序模板的详情我们进行替换，例如我的：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\41e755e586174fd2a4ba686abbd083d8.png\"/></p>\n<p>那就需要把内容的数据替换</p>\n<p>替换后notify.php文件如下：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c051fd5be9ac4f17a875181ba045cf24.png\"/></p>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&lt;</span>?php\n// 微信小程序通知主要函数\n//http_request 利用curl请求  两个参数   url连接地址   数据信息\n<span class=\"token keyword\">function</span> http_request<span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span>,<span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token variable\">$ch</span> <span class=\"token operator\">=</span> curl_init<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//初始化\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_URL, <span class=\"token variable\">$url</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//设置\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_RETURNTRANSFER, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_SSL_VERIFYPEER, FALSE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_SSL_VERIFYHOST, FALSE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_POST, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    curl_setopt<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span>, CURLOPT_POSTFIELDS, <span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$output</span> <span class=\"token operator\">=</span> curl_exec<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//执行 \n    curl_close<span class=\"token punctuation\">(</span><span class=\"token variable\">$ch</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//关闭\n    <span class=\"token builtin class-name\">return</span> <span class=\"token variable\">$output</span><span class=\"token punctuation\">;</span>//返回结果\n<span class=\"token punctuation\">}</span>\n\n//封装方法\n\n//签到\n <span class=\"token keyword\">function</span> notify_sign<span class=\"token punctuation\">(</span><span class=\"token variable\">$touser</span>,<span class=\"token variable\">$ACCESS_TOKEN</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token variable\">$template</span><span class=\"token operator\">=</span>array<span class=\"token punctuation\">(</span>\n        <span class=\"token string\">'touser'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$touser</span>\"</span>,//接收方openid\n        <span class=\"token string\">'template_id'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"6io5lFL**********HLQ\"</span>,    //模板的id\n        <span class=\"token string\">'page'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"pages/jifen/jifen\"</span>,//点击小程序订阅消息跳转的页\n        <span class=\"token string\">'data'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span>\n            // <span class=\"token string\">'character_string1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"<span class=\"token variable\">$out_trade_no</span>\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"#00008B\"</span><span class=\"token punctuation\">)</span>,   \n            <span class=\"token string\">'thing1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"积分签到提醒\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,  \n            // <span class=\"token string\">'amount4'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"15\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,  \n            <span class=\"token string\">'thing2'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"签到获得10积分\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,\n            <span class=\"token string\">'thing5'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"点击立即签到\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,\n            <span class=\"token string\">'phrase6'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">\"今天还没签到哦\"</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n        // <span class=\"token string\">'phrase1'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>array<span class=\"token punctuation\">(</span><span class=\"token string\">'value'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span>urlencode<span class=\"token punctuation\">(</span><span class=\"token variable\">$plan</span><span class=\"token punctuation\">)</span>,<span class=\"token string\">'color'</span><span class=\"token operator\">=</span><span class=\"token operator\">&gt;</span><span class=\"token string\">'#00008B'</span><span class=\"token punctuation\">)</span>,   //时间\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$json_template</span><span class=\"token operator\">=</span>json_encode<span class=\"token punctuation\">(</span><span class=\"token variable\">$template</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$url</span><span class=\"token operator\">=</span><span class=\"token string\">\"https://api.weixin.qq.com/cgi-bin/message/subscribe/send?access_token=\"</span><span class=\"token builtin class-name\">.</span><span class=\"token variable\">$ACCESS_TOKEN</span><span class=\"token punctuation\">;</span>\n    <span class=\"token variable\">$res</span><span class=\"token operator\">=</span>http_request<span class=\"token punctuation\">(</span><span class=\"token variable\">$url</span>,urldecode<span class=\"token punctuation\">(</span><span class=\"token variable\">$json_template</span><span class=\"token punctuation\">))</span><span class=\"token punctuation\">;</span>\n    print_r<span class=\"token punctuation\">(</span><span class=\"token variable\">$res</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n?<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"_368\"></a>测试</h2>\n<p>通过定时计划我们先触发一次access_token的获取<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\82454c20f955484485a8755588572423.png\"/><br/> 然后新建sign.php文件</p>\n<p>写入代码</p>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&lt;</span>?php\n//签到通知\nheader<span class=\"token punctuation\">(</span><span class=\"token string\">\"Content-type:text/html;charset=utf-8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//字符编码设置  \n\n//通知\n include <span class=\"token string\">'notify.php'</span><span class=\"token punctuation\">;</span>//引用通知模板文件\n ini_set<span class=\"token punctuation\">(</span><span class=\"token string\">'session.save_handler'</span>, <span class=\"token string\">'redis'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ini_set<span class=\"token punctuation\">(</span><span class=\"token string\">'session.save_path'</span>, <span class=\"token string\">'tcp://127.0.0.1:6379'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redis</span> <span class=\"token operator\">=</span> new redis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redis</span>-<span class=\"token operator\">&gt;</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span>, <span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token variable\">$redius_token</span><span class=\"token operator\">=</span><span class=\"token variable\">$redis</span>-<span class=\"token operator\">&gt;</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'kuaiquyin_wx_token'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>//鉴权\n\n// <span class=\"token variable\">$name</span><span class=\"token operator\">=</span>mb_substr<span class=\"token punctuation\">(</span><span class=\"token variable\">$name</span>,0,10,<span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nnotify_sign<span class=\"token punctuation\">(</span><span class=\"token string\">\"你的openid\"</span>,<span class=\"token variable\">$redius_token</span>,<span class=\"token variable\">$name</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>openid是小程序登陆后给的，可以去参考其他文章，这里不做说明<br/> 例如我的openid<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ce47a5510fc54f15a9266959bcb28900.png\"/><br/> 写入后，去小程序点击签到授权<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e098aee1ecb947a9b09cf000490cb399.png\"/><br/> 访问后报错：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\12f1f58bf4e54cf8aec5ac90d4700568.png\"/><br/> 我们看一下是啥错误<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\abee34e0abff48cf83fa2dcc4bcf18ec.png\"/><br/> 不好意思😄忘记改了，忘记改openid了</p>\n<p>改了之后：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\77eb64c1f1a640fd93d09795d02fa895.png\"/><br/> 微信成功收到消息<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0a41b1adfbaf451096f8b1262a400756.png\"/></p>\n<h1><a id=\"_410\"></a>总结</h1>\n<p>以上就是今天的教程，做一个简单的记录，方便自己以后能用到，也希望能帮助到屏幕中困扰的你，谢谢支持</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-07-08 12:41:01", "summary": "茫茫人海千千万万，感谢这一刻你看到了我的文章，感谢观赏，大家好呀，欢迎加入人工智能交流群看我的动态，更多周边福利等你在这里插入图片描述欢迎订阅本专栏或者关注我，大家一起努力每天一题算法题最后，希望我的"}