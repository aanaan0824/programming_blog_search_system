{"blogid": "126698705", "writerAge": "码龄7年", "writerBlogNum": "228", "writerCollect": "14771", "writerComment": "508", "writerFan": "3749", "writerGrade": "7级", "writerIntegral": "11524", "writerName": "DanCheng-studio", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126698705.jpg", "writerRankTotal": "938", "writerRankWeekly": "684", "writerThumb": "1839", "writerVisitNum": "1211395", "blog_read_count": "109", "blog_time": "于 2022-09-05 09:40:38 发布", "blog_title": "【毕业设计】医学大数据分析 - 心血管疾病分析", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"1__0\"></a>1 前言</h1>\n<p>🚩 <strong>基于大数据的心血管疾病分析</strong></p>\n<p>🥇学长这里给一个题目综合评分(每项满分5分)</p>\n<ul><li>难度系数：3分</li><li>工作量：3分</li><li>创新点：4分</li></ul>\n<p>🧿 <strong>选题指导, 项目分享：</strong></p>\n<p><a href=\"https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md\">https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md</a></p>\n<h1><a id=\"1__14\"></a>1 课题背景</h1>\n<p>本项目的任务是利用患者的检查结果预测心血管疾病(CVD)的存在与否。</p>\n<h1><a id=\"2__18\"></a>2 数据处理</h1>\n<p>数据集包括年龄、性别、收缩压、舒张压等12个特征的患者数据记录7万份。</p>\n<p>当患者有心血管疾病时，目标类“cardio”等于1，如果患者健康，则为0。</p>\n<p><strong>数据描述</strong></p>\n<p>有三种类型的输入特征:</p>\n<ul><li>Objective: 客观事实;</li><li>Examination: 体检检查结果;</li><li>Subjective: 病人提供的信息</li></ul>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\89e884ca32ba4e93b079e1446bd0bbd4.png\"/><br/> <strong>数据信息概览</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> seaborn <span class=\"token keyword\">as</span> sns\n<span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> pyplot <span class=\"token keyword\">as</span> plt\n<span class=\"token keyword\">import</span> os\n\n\ndf<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\66032e24ced24716a990d0d586e82656.png\"/><br/> <strong>变量分析</strong></p>\n<pre><code class=\"prism language-python\">df<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f64a69a26c344e1199fab0072f74e767.png\"/><br/> 所有特征都是数字，12个整数和1个小数(权值)。第二列告诉我们数据集有多大，每个字段有多少非空值。<br/> 我们可以使用’ describe() ‘来显示每个属性的样本统计信息，比如’ min ‘、’ max ‘、’ mean ‘、’ std ':</p>\n<p>评论</p>\n<pre><code class=\"prism language-python\">df<span class=\"token punctuation\">.</span>describe<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b23eb6da5ede455da7457917c2de880e.png\"/><br/> 年龄以天为单位，身高以厘米为单位。<br/> 让我们看看数值变量以及它们是如何在目标类中分布的。<br/> 例如，什么年龄患有心血管疾病的人数超过没有心血管疾病的人数?</p>\n<h1><a id=\"3__72\"></a>3 数据可视化</h1>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> rcParams\nrcParams<span class=\"token punctuation\">[</span><span class=\"token string\">'figure.figsize'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'years'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">365</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'int'</span><span class=\"token punctuation\">)</span>\nsns<span class=\"token punctuation\">.</span>countplot<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token string\">'years'</span><span class=\"token punctuation\">,</span> hue<span class=\"token operator\">=</span><span class=\"token string\">'cardio'</span><span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> df<span class=\"token punctuation\">,</span> palette<span class=\"token operator\">=</span><span class=\"token string\">\"Set2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\12fbba741f7d4dc0adc3fc8dc02f42ad.png\"/><br/> 可以观察到55岁以上的人更容易得心血管疾病的。<br/> 从上面的表格中，我们可以看到ap_hi, ap_lo, weight 和height中有异常值。我们以后再处理。</p>\n<p>让我们看看数据集中的分类变量及其分布：</p>\n<pre><code class=\"prism language-python\">df_categorical <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token string\">'cholesterol'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'gluc'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'smoke'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'alco'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'active'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nsns<span class=\"token punctuation\">.</span>countplot<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token string\">\"variable\"</span><span class=\"token punctuation\">,</span> hue<span class=\"token operator\">=</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span>data<span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>melt<span class=\"token punctuation\">(</span>df_categorical<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\eb4e7ebc5a6b4514b3064d29fa1e78eb.png\"/></p>\n<pre><code class=\"prism language-python\">df_long <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>melt<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">,</span> id_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'cardio'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> value_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'cholesterol'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'gluc'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'smoke'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'alco'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'active'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nsns<span class=\"token punctuation\">.</span>catplot<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token string\">\"variable\"</span><span class=\"token punctuation\">,</span> hue<span class=\"token operator\">=</span><span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token string\">\"cardio\"</span><span class=\"token punctuation\">,</span>\n                data<span class=\"token operator\">=</span>df_long<span class=\"token punctuation\">,</span> kind<span class=\"token operator\">=</span><span class=\"token string\">\"count\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\603833ca43e84a19a23f3c09b00a25e9.png\"/><br/> 可以清楚地看到，CVD患者的胆固醇和血糖水平较高。而且一般来说不太活跃，运动少。</p>\n<p>为了计算“1”在性别栏中代表女性还是男性，让我们计算每个性别的身高平均值。我们假设男人平均比女人高。</p>\n<pre><code class=\"prism language-python\">corr <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>corr<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ncmap <span class=\"token operator\">=</span> sns<span class=\"token punctuation\">.</span>diverging_palette<span class=\"token punctuation\">(</span><span class=\"token number\">220</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> as_cmap<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\nmask <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros_like<span class=\"token punctuation\">(</span>corr<span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">bool</span><span class=\"token punctuation\">)</span>\nmask<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>triu_indices_from<span class=\"token punctuation\">(</span>mask<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\n<span class=\"token comment\"># 设置matplotlib图</span>\nf<span class=\"token punctuation\">,</span> ax <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 画出热图，并校正长宽比</span>\nsns<span class=\"token punctuation\">.</span>heatmap<span class=\"token punctuation\">(</span>corr<span class=\"token punctuation\">,</span> mask<span class=\"token operator\">=</span>mask<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span>cmap<span class=\"token punctuation\">,</span> vmax<span class=\"token operator\">=</span><span class=\"token number\">.3</span><span class=\"token punctuation\">,</span> center<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>annot <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\n            square<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> linewidths<span class=\"token operator\">=</span><span class=\"token number\">.5</span><span class=\"token punctuation\">,</span> cbar_kws<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"shrink\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\68c74e0e4aa54487a82fcda8acccd032.png\"/><br/> 我们可以看到年龄和胆固醇有显著的影响，但与目标阶层的相关性不是很高。</p>\n<p>.<br/> 让我们创建violinplot来显示不同性别的身高分布。</p>\n<p>查看每个性别特征值的身高和体重的平均值可能不足以决定1是男性还是女性。</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> warnings\nwarnings<span class=\"token punctuation\">.</span>filterwarnings<span class=\"token punctuation\">(</span><span class=\"token string\">\"ignore\"</span><span class=\"token punctuation\">)</span>\ndf_melt <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>melt<span class=\"token punctuation\">(</span>frame<span class=\"token operator\">=</span>df<span class=\"token punctuation\">,</span> value_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> id_vars<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'gender'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nplt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nax <span class=\"token operator\">=</span> sns<span class=\"token punctuation\">.</span>violinplot<span class=\"token punctuation\">(</span>\n    x<span class=\"token operator\">=</span><span class=\"token string\">'variable'</span><span class=\"token punctuation\">,</span> \n    y<span class=\"token operator\">=</span><span class=\"token string\">'value'</span><span class=\"token punctuation\">,</span> \n    hue<span class=\"token operator\">=</span><span class=\"token string\">'gender'</span><span class=\"token punctuation\">,</span> \n    split<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> \n    data<span class=\"token operator\">=</span>df_melt<span class=\"token punctuation\">,</span> \n    scale<span class=\"token operator\">=</span><span class=\"token string\">'count'</span><span class=\"token punctuation\">,</span>\n    scale_hue<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n    palette<span class=\"token operator\">=</span><span class=\"token string\">\"Set2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\bfa2ee157d7b45178afca7039984dd8b.png\"/><br/> 让我们创造一个新的特征-身体质量指数(BMI):</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\799892f62a6446448c3dc8ce1ea7848b.png\"/><br/> 比较健康人的平均BMI和病人的平均BMI。正常的BMI值在18.5到25之间。</p>\n<pre><code class=\"prism language-python\">df<span class=\"token punctuation\">[</span><span class=\"token string\">'BMI'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">/</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\nsns<span class=\"token punctuation\">.</span>catplot<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token string\">\"gender\"</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span><span class=\"token string\">\"BMI\"</span><span class=\"token punctuation\">,</span> hue<span class=\"token operator\">=</span><span class=\"token string\">\"alco\"</span><span class=\"token punctuation\">,</span> col<span class=\"token operator\">=</span><span class=\"token string\">\"cardio\"</span><span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>df<span class=\"token punctuation\">,</span> color <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span>kind<span class=\"token operator\">=</span><span class=\"token string\">\"box\"</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> aspect<span class=\"token operator\">=</span><span class=\"token number\">.7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ad2e544aabff4f0d82a50f6f98441506.png\"/><br/> 根据女性的BMI，喝酒的女性比喝酒的男性有更高的心血管疾病风险。</p>\n<h1><a id=\"4__159\"></a>4 最后</h1>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-05 09:40:38", "summary": "前言基于大数据的心血管疾病分析学长这里给一个题目综合评分每项满分分难度系数：分工作量：分创新点：分选题指导项目分享：课题背景本项目的任务是利用患者的检查结果预测心血管疾病的存在与否。数据处理数据集包括"}