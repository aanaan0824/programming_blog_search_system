{"blogid": "121515102", "writerAge": "码龄6年", "writerBlogNum": "1063", "writerCollect": "4647", "writerComment": "894", "writerFan": "5639", "writerGrade": "8级", "writerIntegral": "26958", "writerName": "小志的博客", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_121515102.jpg", "writerRankTotal": "274", "writerRankWeekly": "1495", "writerThumb": "1683", "writerVisitNum": "2822211", "blog_read_count": "27800", "blog_time": "已于 2022-04-18 18:36:50 修改", "blog_title": "centos7安装mysql5.7步骤（图解版）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><ul><li><a href=\"#mysql57_1\">一、下载mysql5.7安装包</a></li><li><a href=\"#mysql57linux_12\">二、mysql5.7安装包上传到linux服务器</a></li><li><a href=\"#mysql_21\">三、检查系统是否安装过mysql</a></li><li><a href=\"#CentOS7mariadb_42\">四、卸载CentOS7系统自带mariadb</a></li><li><a href=\"#mysql__70\">五、检查有无安装过mysql 用户组，没有的话创建</a></li><li><a href=\"#mysql57_88\">六、安装mysql5.7步骤</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h2><a id=\"mysql57_1\"></a>一、下载mysql5.7安装包</h2>\n<ul><li> <p><strong>下载地址：<a href=\"https://dev.mysql.com/downloads/mysql/5.7.html\">https://dev.mysql.com/downloads/mysql/5.7.html</a></strong></p> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4a883fa129324f12bc149be6f89330b6.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\202ab0969ab24649949a55226c510eee.png\"/></p> </li></ul>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\03c738cba92145d3b8d13925f74d46b0.png\"/></p>\n<h2><a id=\"mysql57linux_12\"></a>二、mysql5.7安装包上传到linux服务器</h2>\n<ul><li> <p><strong>linux服务器根目录下新建文件夹：</strong><br/> 1）、 tool文件夹，存放软件安装包<br/> 2）、 xz文件夹，存放安装后的软件</p> </li><li> <p><strong>将下载好的mysql-5.7.36-linux-glibc2.12-x86_64.tar.gz上传至tool文件夹下：</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\404f2ac945d44212913b0bda982ac0c6.png\"/></p> </li></ul>\n<h2><a id=\"mysql_21\"></a>三、检查系统是否安装过mysql</h2>\n<ul><li> <p><strong>检查系统是否安装过mysql,如果没有略过此步骤：如下图：</strong></p> <pre><code class=\"prism language-java\"><span class=\"token comment\">//检查系统中有无安装过mysql</span>\n<span class=\"token punctuation\">[</span>root<span class=\"token annotation punctuation\">@localhost</span> tool<span class=\"token punctuation\">]</span># rpm <span class=\"token operator\">-</span>qa<span class=\"token operator\">|</span>grep mysql\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2ad4ad83f2a24e5dbf9d0bd197cb7e8f.png\"/></p> </li><li> <p><strong>如果系统自带mysql，查询所有mysql 对应的文件夹，全部删除</strong></p> <pre><code class=\"prism language-java\"> whereis mysql\n find <span class=\"token operator\">/</span> <span class=\"token operator\">-</span>name mysql\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6135a88942bf40669de1d2ec0acc5800.png\"/></p> </li></ul>\n<h2><a id=\"CentOS7mariadb_42\"></a>四、卸载CentOS7系统自带mariadb</h2>\n<ul><li> <p><strong>查看系统自带的Mariadb</strong></p> <pre><code class=\"prism language-java\">rpm <span class=\"token operator\">-</span>qa<span class=\"token operator\">|</span>grep mariadb\n</code></pre> </li><li> <p><strong>卸载系统自带的Mariadb</strong></p> <pre><code class=\"prism language-java\">rpm <span class=\"token operator\">-</span>e <span class=\"token operator\">--</span>nodeps mariadb<span class=\"token operator\">-</span>libs<span class=\"token operator\">-</span><span class=\"token number\">5.5</span><span class=\"token number\">.60</span><span class=\"token operator\">-</span><span class=\"token number\">1.</span>el7<span class=\"token operator\">-</span><span class=\"token number\">5.</span>x86_64\n</code></pre> </li><li> <p><strong>删除etc目录下的my.cnf ，一定要删掉，等下再重新建，之前我将就用这个文件，后面改配置各种不生效，因为lz此目录下没有my.cnf文件，没有执行可命令</strong></p> <pre><code class=\"prism language-java\">rm <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf\n</code></pre> </li><li> <p><strong>以上命令截图如下：</strong></p> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\36c71dd3137c411b8f09780eda0341b9.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1b7ce49a775244099c6b387e8df6e699.png\"/></p> </li></ul>\n<h2><a id=\"mysql__70\"></a>五、检查有无安装过mysql 用户组，没有的话创建</h2>\n<ul><li> <p><strong>检查mysql 用户组是否存在</strong></p> <pre><code class=\"prism language-java\">cat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>group <span class=\"token operator\">|</span> grep mysql\ncat <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>passwd <span class=\"token operator\">|</span>grep mysql\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c2ca797a4af443359493e9466dd53f72.png\"/></p> </li><li> <p><strong>创建mysql 用户组和用户</strong></p> <pre><code class=\"prism language-java\">groupadd mysql\nuseradd <span class=\"token operator\">-</span>r <span class=\"token operator\">-</span>g mysql mysql\n</code></pre> </li></ul>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c4258f1938024a9397a55f8658dad79b.png\"/></p>\n<h2><a id=\"mysql57_88\"></a>六、安装mysql5.7步骤</h2>\n<ul><li> <p><strong>解压安装mysql安装包到/xz/目录下</strong></p> <pre><code class=\"prism language-java\">tar <span class=\"token operator\">-</span>zxvf mysql<span class=\"token operator\">-</span><span class=\"token number\">5.7</span><span class=\"token number\">.36</span><span class=\"token operator\">-</span>linux<span class=\"token operator\">-</span>glibc2<span class=\"token punctuation\">.</span><span class=\"token number\">12</span><span class=\"token operator\">-</span>x86_64<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>gz <span class=\"token operator\">-</span><span class=\"token class-name\">C</span>  <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7d37746720a14a14bdb31863ebecf411.png\"/></p> </li><li> <p><strong>修改mysql-5.7.36-linux-glibc2.12-x86_64名称为mysql5.7</strong></p> <pre><code class=\"prism language-java\">mv mysql<span class=\"token operator\">-</span><span class=\"token number\">5.7</span><span class=\"token number\">.36</span><span class=\"token operator\">-</span>linux<span class=\"token operator\">-</span>glibc2<span class=\"token punctuation\">.</span><span class=\"token number\">12</span><span class=\"token operator\">-</span>x86_64<span class=\"token operator\">/</span> mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3a4f69e7a57445e3ad719b280c226a29.png\"/></p> </li><li> <p><strong>更改mysql5.7 目录下所有文件夹所属的用户组、用户以及权限</strong></p> <pre><code class=\"prism language-java\">chown <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> mysql<span class=\"token operator\">:</span>mysql <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span>\nchmod <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> <span class=\"token number\">755</span> <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\529572a42faa4b8faaa84b61835c90d4.png\"/></p> </li><li> <p><strong>进入/xz/mysql5.7/bin/目录，编译安装并初始化mysql,<font color=\"red\">务必记住数据库管理员临时密码,如下图画红色框的部分。</font></strong></p> <pre><code class=\"prism language-java\"><span class=\"token punctuation\">.</span>/mysqld <span class=\"token operator\">--</span>initialize <span class=\"token operator\">--</span>user<span class=\"token operator\">=</span>mysql <span class=\"token operator\">--</span>datadir<span class=\"token operator\">=</span><span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>data <span class=\"token operator\">--</span>basedir<span class=\"token operator\">=</span><span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2f6ba862430e401bbabb209b901ed832.png\"/></p> </li><li> <p><strong>编写etc目录下的my.cnf 配置文件，并添加配置</strong></p> <pre><code class=\"prism language-java\"><span class=\"token comment\">//进入配置文件</span>\nvi <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf\n</code></pre> <pre><code class=\"prism language-java\"><span class=\"token comment\">//在插入模式下编写，完成后保存，当然这个可以自己添加</span>\n<span class=\"token punctuation\">[</span>mysqld<span class=\"token punctuation\">]</span>\ndatadir<span class=\"token operator\">=</span><span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>data\nport <span class=\"token operator\">=</span> <span class=\"token number\">3306</span>\nsql_mode<span class=\"token operator\">=</span>NO_ENGINE_SUBSTITUTION<span class=\"token punctuation\">,</span>STRICT_TRANS_TABLES\nsymbolic<span class=\"token operator\">-</span>links<span class=\"token operator\">=</span><span class=\"token number\">0</span>\nmax_connections<span class=\"token operator\">=</span><span class=\"token number\">400</span>\ninnodb_file_per_table<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n#表名大小写不明感，敏感为\nlower_case_table_names<span class=\"token operator\">=</span><span class=\"token number\">1</span>\n</code></pre> </li><li> <p><strong>授予my.cnf 配置文件775权限，如下：</strong></p> <pre><code class=\"prism language-java\">chmod <span class=\"token operator\">-</span><span class=\"token class-name\">R</span> <span class=\"token number\">775</span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b7d13fda562a4e8e8773b044b7a9158e.png\"/></p> </li><li> <p><strong>修改/xz/mysql5.7/support-files/目录下的mysql.server文件，如下图中5个位置的/usr/local/mysql全部修改成/xz/mysql5.7。<font color=\"red\">因为lz没有安装下/usr/local/mysq目录下，所以需要修改成lz安装的/xz/mysql5.7目录。</font></strong></p> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\707c9150af394e23be771d0c6bc0752e.png\"/></p> </li><li> <p><strong>启动mysql 服务器</strong><br/> <strong>1）、查询服务</strong></p> <pre><code class=\"prism language-java\">ps <span class=\"token operator\">-</span>ef<span class=\"token operator\">|</span>grep mysql\nps <span class=\"token operator\">-</span>ef<span class=\"token operator\">|</span>grep mysqld\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\19a18c17c0424aceb6caf2367fbe5cd0.png\"/></p> <p><strong>2）、启动服务</strong></p> <pre><code class=\"prism language-java\"> <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>support<span class=\"token operator\">-</span>files<span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">.</span>server start\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5e96fd9f64d144d7909988081ec5c5dd.png\"/></p> </li><li> <p><strong>添加软连接，并重启mysql 服务</strong></p> <pre><code class=\"prism language-java\"><span class=\"token comment\">//添加软连接</span>\nln <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>support<span class=\"token operator\">-</span>files<span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">.</span>server <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>init<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysql\nln <span class=\"token operator\">-</span>s <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>mysql <span class=\"token operator\">/</span>usr<span class=\"token operator\">/</span>bin<span class=\"token operator\">/</span>mysql\n<span class=\"token comment\">//重启mysql服务</span>\nservice mysql restart\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\25492bdfe2864bafb0b13e8c33295996.png\"/></p> </li><li> <p><strong>登录mysql ，密码就是初始化时生成的临时密码</strong></p> <pre><code class=\"prism language-java\"> mysql <span class=\"token operator\">-</span>u root <span class=\"token operator\">-</span>p\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3d5b1edf8ffe48dfabe6f160a274fed6.png\"/></p> </li><li> <p><strong>修改密码为root</strong></p> <pre><code class=\"prism language-java\">set password <span class=\"token keyword\">for</span> root<span class=\"token annotation punctuation\">@localhost</span> <span class=\"token operator\">=</span> <span class=\"token function\">password</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f6cabfe9b3c347509192dafd1e644237.png\"/></p> </li><li> <p><strong>开放远程连接</strong></p> <pre><code class=\"prism language-java\">use mysql<span class=\"token punctuation\">;</span>\nupdate user set <span class=\"token class-name\"><span class=\"token namespace\">user<span class=\"token punctuation\">.</span></span>Host</span><span class=\"token operator\">=</span><span class=\"token string\">'%'</span> where <span class=\"token class-name\"><span class=\"token namespace\">user<span class=\"token punctuation\">.</span></span>User</span><span class=\"token operator\">=</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nflush privileges<span class=\"token punctuation\">;</span>\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\863ee31ee93044be8e3dc9515da39672.png\"/></p> </li><li> <p><strong>设置开机自启</strong></p> <pre><code class=\"prism language-java\"><span class=\"token comment\">//将服务文件拷贝到init.d下，并重命名为mysql</span>\ncp <span class=\"token operator\">/</span>xz<span class=\"token operator\">/</span>mysql5<span class=\"token punctuation\">.</span><span class=\"token number\">7</span><span class=\"token operator\">/</span>support<span class=\"token operator\">-</span>files<span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">.</span>server <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>init<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysqld\n<span class=\"token comment\">//赋予可执行权限</span>\nchmod <span class=\"token operator\">+</span>x <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>init<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysqld\n<span class=\"token comment\">//添加服务</span>\nchkconfig <span class=\"token operator\">--</span>add mysqld\n<span class=\"token comment\">//显示服务列表</span>\nchkconfig <span class=\"token operator\">--</span>list\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\87665004b78d4467bbd552325c726db8.png\"/></p> </li><li> <p><strong>开放3306端口，测试本地客户端是否连接成功</strong></p> <pre><code class=\"prism language-java\"><span class=\"token comment\">//开放3306端口命令</span>\nfirewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>zone<span class=\"token operator\">=</span><span class=\"token keyword\">public</span> <span class=\"token operator\">--</span>add<span class=\"token operator\">-</span>port<span class=\"token operator\">=</span><span class=\"token number\">3306</span><span class=\"token operator\">/</span>tcp <span class=\"token operator\">--</span>permanent\n<span class=\"token comment\">//配置立即生效</span>\nfirewall<span class=\"token operator\">-</span>cmd <span class=\"token operator\">--</span>reload\n</code></pre> <p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\749b6e63457747589e67df3f1ada19fc.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cb2e8888596740c0be77d8b2065eedfb.png\"/></p> </li><li> <p><strong>至此，centos7安装mysql5.7完成，本客户端连接centos7中的mysql5.7服务端成功。</strong></p> </li></ul>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 1, "php": 0, "time": "2022-04-18 18:36:50", "summary": "目录一、下载安装包二、安装包上传到服务器三、检查系统是否安装过四、卸载系统自带五、检查有无安装过用户组，没有的话创建六、安装步骤一、下载安装包下载地址：在这里插入图片描述在这里插入图片描述在这里插入图"}