{"blogid": "125724631", "writerAge": "码龄9年", "writerBlogNum": "129", "writerCollect": "3331", "writerComment": "3783", "writerFan": "13664", "writerGrade": "7级", "writerIntegral": "10422", "writerName": "半身风雪", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125724631.jpg", "writerRankTotal": "1251", "writerRankWeekly": "38", "writerThumb": "3377", "writerVisitNum": "149355", "blog_read_count": "1426", "blog_time": "于 2022-07-13 09:29:37 发布", "blog_title": "【Kubernetes 系列】详解 ConfigMap 九种创建方式", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>作者：<a href=\"https://blog.csdn.net/u010755471\">半身风雪</a><br/> 上一节：<a href=\"http://t.csdn.cn/rIPbR\">配置 Java 微服务</a><br/> 内容简介：上一节主要学习使用 Kubernetes ConfigMaps 和 Secrets 设置环境变量，本节我们将学习，创建ConfigMap 的10种方式。</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\310727cd6945483bb63090f4017c2b34.png\"/></p>\n<hr/>\n<p></p>\n<div class=\"toc\">\n<h3>ConfigMap 九种创建方式</h3>\n<ul><li><a href=\"#ConfigMap_17\">什么是ConfigMap</a></li><li><a href=\"#_ConfigMap_26\">创建 ConfigMap</a></li><li><ul><li><a href=\"#11_kubectl_create_configmap__ConfigMap_30\">1.1、使用 kubectl create configmap 创建 ConfigMap</a></li><li><a href=\"#12_ConfigMap_42\">1.2、基于目录创建 ConfigMap</a></li><li><a href=\"#13_ConfigMap_82\">1.3、基于文件创建 ConfigMap</a></li><li><a href=\"#14_ConfigMap__195\">1.4、定义从文件创建 ConfigMap 时要使用的键</a></li><li><a href=\"#15_ConfigMap_232\">1.5、根据字面值创建 ConfigMap</a></li><li><a href=\"#16_ConfigMap_260\">1.6、基于生成器创建 ConfigMap</a></li><li><a href=\"#17_ConfigMap_264\">1.7、基于文件生成 ConfigMap</a></li><li><a href=\"#18_ConfigMap__296\">1.8、定义从文件生成 ConfigMap 时要使用的键</a></li><li><a href=\"#19_ConfigMap_318\">1.9、基于字面值生成 ConfigMap</a></li></ul>\n</li><li><a href=\"#_341\">总结</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"ConfigMap_17\"></a>什么是ConfigMap</h1>\n<p>很多应用在其初始化或运行期间要依赖一些配置信息。大多数时候， 存在要调整配置参数所设置的数值的需求。 ConfigMap 是 Kubernetes 用来向应用 Pod 中注入配置数据的方法。</p>\n<p>ConfigMap 允许你将配置文件与镜像文件分离，以使容器化的应用程序具有可移植性。 本节内容将学习，如何创建 ConfigMap 以及配置 Pod 使用存储在 ConfigMap 中的数据。</p>\n<hr/>\n<h1><a id=\"_ConfigMap_26\"></a>创建 ConfigMap</h1>\n<p>我们可以使用 <code>kubectl create configmap</code> 或者在 <code>kustomization.yaml</code> 中的 ConfigMap 生成器来创建 ConfigMap。kubectl 从 1.14 版本开始支持 kustomization.yaml。</p>\n<h2><a id=\"11_kubectl_create_configmap__ConfigMap_30\"></a>1.1、使用 kubectl create configmap 创建 ConfigMap</h2>\n<p>使用 <code>kubectl create configmap</code> 命令基于<strong>目录、 文件</strong>或者<strong>字面值</strong>来创建 ConfigMap：</p>\n<blockquote>\n<p>$ kubectl create configmap &lt;映射名称&gt; &lt;数据源&gt;</p>\n</blockquote>\n<p>&lt;<code>映射名称</code>&gt; 是为 ConfigMap 指定的名称，&lt;<code>数据源</code>&gt; 是要从中提取数据的目录、 文件或者字面值。ConfigMap 对象的名称必须是合法的 <strong>DNS</strong> 子域名.</p>\n<p>在基于文件来创建 ConfigMap 时，&lt;<code>数据源</code>&gt; 中的键名默认取自文件的基本名， 而对应的值则默认为文件的内容。</p>\n<p>也可以使用<code>kubectl describe</code> 或者 <code>kubectl get</code> 获取有关 ConfigMap 的信息。</p>\n<h2><a id=\"12_ConfigMap_42\"></a>1.2、基于目录创建 ConfigMap</h2>\n<p>使用 <code>kubectl create configmap</code> 基于同一目录中的多个文件创建 ConfigMap。 基于目录来创建 ConfigMap 时，kubectl 识别目录下基本名可以作为合法键名的文件， 并将这些文件打包到新的 ConfigMap 中。普通文件之外的所有目录项都会被忽略 （例如：子目录、符号链接、设备、管道等等）。</p>\n<ol><li>创建本地目录</li></ol>\n<blockquote>\n<p>$ mkdir -p configure-pod-container/configmap/</p>\n</blockquote>\n<ol start=\"2\"><li>将示例文件下载到 <code>configure-pod-container/configmap/</code> 目录</li></ol>\n<blockquote>\n<p>$ wget https://kubernetes.io/examples/configmap/game.properties -O configure-pod-container/configmap/game.properties<br/> $ wget https://kubernetes.io/examples/configmap/ui.properties -O configure-pod-container/configmap/ui.properties<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\84ec14a3d47e4377be4036174f7afea8.png\"/></p>\n</blockquote>\n<ol start=\"3\"><li>创建 configmap</li></ol>\n<blockquote>\n<p>$ kubectl create configmap game-config --from-file=configure-pod-container/configmap/</p>\n</blockquote>\n<p>以上命令将 <code>configure-pod-container/configmap</code> 目录下的所有文件，也就是 <code>game.properties</code> 和 <code>ui.properties</code> 打包到 <strong>game-config ConfigMap</strong> 中。</p>\n<p>你可以使用下面的命令显示 ConfigMap 的详细信息：</p>\n<blockquote>\n<p>$ kubectl describe configmaps game-config</p>\n</blockquote>\n<p>命令执行结果如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8c020a66451b4167aa27e3cf42c399c9.png\"/></p>\n<p><strong>configure-pod-container/configmap/</strong> 目录中的 <code>game.properties</code> 和 <code>ui.properties</code> 文件出现在 ConfigMap 的 data 部分。</p>\n<blockquote>\n<p>$ kubectl get configmaps game-config -o yaml</p>\n</blockquote>\n<p>执行结果如下:</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d3ffda7a7a50492c9b33c361a6d89656.png\"/></p>\n<h2><a id=\"13_ConfigMap_82\"></a>1.3、基于文件创建 ConfigMap</h2>\n<p>使用 <code>kubectl create configmap</code> 基于单个文件或多个文件创建 ConfigMap。</p>\n<p>执行如下命令：</p>\n<blockquote>\n<p>$ kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties</p>\n</blockquote>\n<p>再次执行如下命令：</p>\n<blockquote>\n<p>$ kubectl describe configmaps game-config-2</p>\n</blockquote>\n<p>执行结果如下:</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d0fab299ace54d1d9bad7c264d7e4de4.png\"/></p>\n<p>也可以多次使用 <code>--from-file</code> 参数，从多个数据源创建 ConfigMap，如下：</p>\n<blockquote>\n<p>$ kubectl create configmap game-config-2 --from-file=configure-pod-container/configmap/game.properties --from-file=configure-pod-container/configmap/ui.properties</p>\n</blockquote>\n<p>现在可以使用以下命令显示 <strong>game-config-2 ConfigMap</strong> 的详细信息：</p>\n<blockquote>\n<p>$ kubectl describe configmaps game-config-2</p>\n</blockquote>\n<p>执行结果如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\18c636c28509495dbb89fca86e2b1286.png\"/></p>\n<p>当 kubectl 基于非 ASCII 或 UTF-8 的输入创建 ConfigMap 时， 该工具将这些输入放入 ConfigMap 的 binaryData 字段，而不是 data 中。 同一个 ConfigMap 中可同时包含文本数据和二进制数据源。 如果你想查看 ConfigMap 中的 binaryData 键（及其值）， 可以运行命令 <code>kubectl get configmap -o jsonpath='{.binaryData}' &lt;name&gt;</code>。</p>\n<p>使用 <code>--from-env-file</code> 选项从环境文件创建 ConfigMap</p>\n<p>Env 文件包含环境变量列表。其中适用以下语法规则:</p>\n<ul><li>Env 文件中的每一行必须为 VAR=VAL 格式。</li><li>以＃开头的行（即注释）将被忽略。</li><li>空行将被忽略。</li><li>引号不会被特殊处理（即它们将成为 ConfigMap 值的一部分）。</li></ul>\n<p>将示例文件下载到 configure-pod-container/configmap/ 目录：</p>\n<blockquote>\n<p>$ wget https://kubernetes.io/examples/configmap/game-env-file.properties -O configure-pod-container/configmap/game-env-file.properties<br/> $ wget https://kubernetes.io/examples/configmap/ui-env-file.properties -O configure-pod-container/configmap/ui-env-file.properties</p>\n</blockquote>\n<p>Env 文件 <code>game-env-file.properties</code> 如下：</p>\n<pre><code class=\"prism language-yaml\">cat configure<span class=\"token punctuation\">-</span>pod<span class=\"token punctuation\">-</span>container/configmap/game<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file.properties\n\nenemies=aliens\nlives=3\nallowed=\"true\"\n\n$ kubectl create configmap game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file \\\n       <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>from<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file=configure<span class=\"token punctuation\">-</span>pod<span class=\"token punctuation\">-</span>container/configmap/game<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file.properties\n\n</code></pre>\n<p>现在我们获得了一个名为 <strong>game-config-env-file</strong> 的ConfigMap，执行下面命令：</p>\n<blockquote>\n<p>$ kubectl get configmap game-config-env-file -o yaml</p>\n</blockquote>\n<p>获得当前ConfigMap 的详情：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">creationTimestamp</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-07-11T18:36:28Z</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n  <span class=\"token key atrule\">resourceVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"809965\"</span>\n  <span class=\"token key atrule\">selfLink</span><span class=\"token punctuation\">:</span> /api/v1/namespaces/default/configmaps/game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>file\n  <span class=\"token key atrule\">uid</span><span class=\"token punctuation\">:</span> d9d1ca5b<span class=\"token punctuation\">-</span>eb34<span class=\"token punctuation\">-</span>11e7<span class=\"token punctuation\">-</span>887b<span class=\"token punctuation\">-</span>42010a8002b8\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">allowed</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'\"true\"'</span>\n  <span class=\"token key atrule\">enemies</span><span class=\"token punctuation\">:</span> aliens\n  <span class=\"token key atrule\">lives</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n</code></pre>\n<p>从 Kubernetes 1.23 版本开始，kubectl 支持多次指定 <code>--from-env-file</code> 参数来从多个数据源创建 ConfigMap。</p>\n<blockquote>\n<p>$ kubectl create configmap config-multi-env-files <br/> –from-env-file=configure-pod-container/configmap/game-env-file.properties <br/> –from-env-file=configure-pod-container/configmap/ui-env-file.properties</p>\n</blockquote>\n<p>现在我们获得了一个名为 <strong>config-multi-env-files</strong> 的ConfigMap，执行下面命令：</p>\n<blockquote>\n<p>$ kubectl get configmap config-multi-env-files -o yaml</p>\n</blockquote>\n<p>获得当前ConfigMap 的详情：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">creationTimestamp</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-07-11T18:38:34Z</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> config<span class=\"token punctuation\">-</span>multi<span class=\"token punctuation\">-</span>env<span class=\"token punctuation\">-</span>files\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n  <span class=\"token key atrule\">resourceVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"810136\"</span>\n  <span class=\"token key atrule\">uid</span><span class=\"token punctuation\">:</span> 252c4572<span class=\"token punctuation\">-</span>eb35<span class=\"token punctuation\">-</span>11e7<span class=\"token punctuation\">-</span>887b<span class=\"token punctuation\">-</span>42010a8002b8\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">allowed</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'\"true\"'</span>\n  <span class=\"token key atrule\">color</span><span class=\"token punctuation\">:</span> purple\n  <span class=\"token key atrule\">enemies</span><span class=\"token punctuation\">:</span> aliens\n  <span class=\"token key atrule\">how</span><span class=\"token punctuation\">:</span> fairlyNice\n  <span class=\"token key atrule\">lives</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"3\"</span>\n  <span class=\"token key atrule\">textmode</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"true\"</span>\n</code></pre>\n<h2><a id=\"14_ConfigMap__195\"></a>1.4、定义从文件创建 ConfigMap 时要使用的键</h2>\n<p>在使用 <code>--from-file</code> 参数时，你可以定义在 ConfigMap 的 data 部分出现键名， 而不是按默认行为使用文件名：</p>\n<blockquote>\n<p>$ kubectl create configmap game-config-3 --from-file=&lt;我的键名&gt;=&lt;文件路径&gt;</p>\n</blockquote>\n<p>&lt;<code>我的键名</code>&gt; 是你要在 ConfigMap 中使用的键名，&lt;<code>文件路径</code>&gt; 是你想要键所表示的数据源文件的位置。</p>\n<blockquote>\n<p>$ kubectl create configmap game-config-3 --from-file=game-special-key=configure-pod-container/configmap/game.properties</p>\n</blockquote>\n<p>现在我们获得了一个名为 <strong>configmaps game-config-3</strong> 的ConfigMap，执行下面命令：</p>\n<blockquote>\n<p>$ kubectl get configmaps game-config-3 -o yaml</p>\n</blockquote>\n<p>获得当前ConfigMap 的详情：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">creationTimestamp</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-07-11T18:54:22Z</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span><span class=\"token number\">3</span>\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n  <span class=\"token key atrule\">resourceVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"530\"</span>\n  <span class=\"token key atrule\">uid</span><span class=\"token punctuation\">:</span> 05f8da22<span class=\"token punctuation\">-</span>d671<span class=\"token punctuation\">-</span>11e5<span class=\"token punctuation\">-</span>8cd0<span class=\"token punctuation\">-</span>68f728db1985\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">game-special-key</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">|</span><span class=\"token scalar string\">\n    enemies=aliens\n    lives=3\n    enemies.cheat=true\n    enemies.cheat.level=noGoodRotten\n    secret.code.passphrase=UUDDLRLRBABAS\n    secret.code.allowed=true\n    secret.code.lives=30    </span>\n</code></pre>\n<h2><a id=\"15_ConfigMap_232\"></a>1.5、根据字面值创建 ConfigMap</h2>\n<p>可以将 <code>kubectl create configmap</code> 与 <code>--from-literal</code> 参数一起使用， 通过命令行定义文字值：</p>\n<blockquote>\n<p>$ kubectl create configmap special-config --from-literal=special.how=very --from-literal=special.type=charm</p>\n</blockquote>\n<p>可以传入多个键值对。命令行中提供的每对键值在 ConfigMap 的 data 部分中均表示为单独的条目。</p>\n<blockquote>\n<p>$ kubectl get configmaps special-config -o yaml</p>\n</blockquote>\n<p>输出结果如下：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> ConfigMap\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">creationTimestamp</span><span class=\"token punctuation\">:</span> <span class=\"token datetime number\">2022-07-11T19:14:38Z</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> special<span class=\"token punctuation\">-</span>config\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> default\n  <span class=\"token key atrule\">resourceVersion</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"651\"</span>\n  <span class=\"token key atrule\">uid</span><span class=\"token punctuation\">:</span> dadce046<span class=\"token punctuation\">-</span>d673<span class=\"token punctuation\">-</span>11e5<span class=\"token punctuation\">-</span>8cd0<span class=\"token punctuation\">-</span>68f728db1985\n<span class=\"token key atrule\">data</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">special.how</span><span class=\"token punctuation\">:</span> very\n  <span class=\"token key atrule\">special.type</span><span class=\"token punctuation\">:</span> charm\n  \n</code></pre>\n<h2><a id=\"16_ConfigMap_260\"></a>1.6、基于生成器创建 ConfigMap</h2>\n<p>自 1.14 开始，<strong>kubectl</strong> 开始支持 <strong>kustomization.yaml</strong>。 你还可以基于生成器（Generators）创建 ConfigMap，然后将其应用于 API 服务器上创建对象。 生成器应在目录内的 <strong>kustomization.yaml</strong> 中指定。</p>\n<h2><a id=\"17_ConfigMap_264\"></a>1.7、基于文件生成 ConfigMap</h2>\n<p>要基于 <code>configure-pod-container/configmap/game.properties</code> 文件生成一个 ConfigMap：</p>\n<p>创建包含 ConfigMapGenerator 的 kustomization.yaml 文件</p>\n<pre><code class=\"prism language-yaml\">cat &lt;&lt;EOF <span class=\"token punctuation\">&gt;</span>./kustomization.yaml\n<span class=\"token key atrule\">configMapGenerator</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span><span class=\"token number\">4</span>\n  <span class=\"token key atrule\">files</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> configure<span class=\"token punctuation\">-</span>pod<span class=\"token punctuation\">-</span>container/configmap/game.properties\nEOF\n</code></pre>\n<p>应用（Apply）kustomization 目录创建 ConfigMap 对象：</p>\n<pre><code class=\"prism language-yaml\">$ kubectl apply <span class=\"token punctuation\">-</span>k .\nconfigmap/game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>4<span class=\"token punctuation\">-</span>m9dm2f92bt created\n</code></pre>\n<p>检查 ConfigMap 被创建命令：</p>\n<blockquote>\n<p>$ kubectl get configmap</p>\n</blockquote>\n<p>检查结果如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\319de99b043c4d5c8ed4354203b5e395.png\"/></p>\n<p>生成的 ConfigMap 名称具有通过对内容进行散列而附加的后缀， 这样可以确保每次修改内容时都会生成新的 ConfigMap。</p>\n<h2><a id=\"18_ConfigMap__296\"></a>1.8、定义从文件生成 ConfigMap 时要使用的键</h2>\n<p>在 ConfigMap 生成器中，你可以定义一个非文件名的键名。 例如，从 <code>configure-pod-container/configmap/game.properties</code> 文件生成 ConfigMap， 但使用 game-special-key 作为键名：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token comment\"># 创建包含 ConfigMapGenerator 的 kustomization.yaml 文件</span>\ncat &lt;&lt;EOF <span class=\"token punctuation\">&gt;</span>./kustomization.yaml\n<span class=\"token key atrule\">configMapGenerator</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span><span class=\"token number\">5</span>\n  <span class=\"token key atrule\">files</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> game<span class=\"token punctuation\">-</span>special<span class=\"token punctuation\">-</span>key=configure<span class=\"token punctuation\">-</span>pod<span class=\"token punctuation\">-</span>container/configmap/game.properties\nEOF\n</code></pre>\n<p>应用 Kustomization 目录创建 ConfigMap 对象。</p>\n<pre><code class=\"prism language-yaml\">$ kubectl apply <span class=\"token punctuation\">-</span>k .\nconfigmap/game<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>5<span class=\"token punctuation\">-</span>m67dt67794 created\n</code></pre>\n<h2><a id=\"19_ConfigMap_318\"></a>1.9、基于字面值生成 ConfigMap</h2>\n<p>要基于字符串 <code>special.type=charm</code> 和 <code>special.how=very</code> 生成 ConfigMap， 可以在 kustomization.yaml 中配置 ConfigMap 生成器：</p>\n<pre><code class=\"prism language-yaml\"><span class=\"token comment\"># 创建带有 ConfigMapGenerator 的 kustomization.yaml 文件</span>\ncat &lt;&lt;EOF <span class=\"token punctuation\">&gt;</span>./kustomization.yaml\n<span class=\"token key atrule\">configMapGenerator</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> special<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span><span class=\"token number\">2</span>\n  <span class=\"token key atrule\">literals</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> special.how=very\n  <span class=\"token punctuation\">-</span> special.type=charm\nEOF\n</code></pre>\n<p>应用 Kustomization 目录创建 ConfigMap 对象。</p>\n<pre><code class=\"prism language-yaml\"> $ kubectl apply <span class=\"token punctuation\">-</span>k .\nconfigmap/special<span class=\"token punctuation\">-</span>config<span class=\"token punctuation\">-</span>2<span class=\"token punctuation\">-</span>c92b5mmcf2 created\n</code></pre>\n<h1><a id=\"_341\"></a>总结</h1>\n<p>本文主要介绍了创建ConfigMap 的九种方式，学完本节内容，我想你对ConfigMap 也有了一定的了解，下一节我们将一起学习 <strong>如何使用 ConfigMap 数据定义容器环境变量</strong></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-07-13 09:29:37", "summary": "作者：半身风雪上一节：配置微服务内容简介：上一节主要学习使用和设置环境变量，本节我们将学习，创建的种方式。在这里插入图片描述九种创建方式什么是创建、使用创建、基于目录创建、基于文件创建、定义从文件创建"}