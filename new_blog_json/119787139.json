{"blogid": "119787139", "writerAge": "码龄3年", "writerBlogNum": "23", "writerCollect": "6133", "writerComment": "1508", "writerFan": "5710", "writerGrade": "5级", "writerIntegral": "3806", "writerName": "炮哥带你学", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_119787139.jpg", "writerRankTotal": "4146", "writerRankWeekly": "1221", "writerThumb": "1299", "writerVisitNum": "590161", "blog_read_count": "159558", "blog_time": "已于 2022-09-05 00:16:08 修改", "blog_title": "利用Anaconda安装pytorch和paddle深度学习环境+pycharm安装---免额外安装CUDA和cudnn（适合小白的保姆级教学）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h3 id=\"%E5%89%8D%E8%A8%80\" style=\"margin-left:0px;text-align:justify;\"><a href=\"#%E5%89%8D%E8%A8%80\">前言</a></h3>\n<p id=\"%E4%B8%80%E3%80%81%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E4%B8%8E%E6%9B%B4%E6%96%B0-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%80%E3%80%81%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E4%B8%8E%E6%9B%B4%E6%96%B0\">一、英伟达驱动安装与更新</a></p>\n<p id=\"%E4%BA%8C%E3%80%81Anaconda%20%E7%9A%84%E5%AE%89%E8%A3%85-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%BA%8C%E3%80%81Anaconda%20%E7%9A%84%E5%AE%89%E8%A3%85\">二、Anaconda 的安装</a></p>\n<p id=\"%E4%B8%89%E3%80%81Pytorch%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%89%E3%80%81Pytorch%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85\">三、Pytorch环境安装</a></p>\n<p id=\"%E5%9B%9B%E3%80%81paddlepaddle%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85-toc\" style=\"margin-left:0px;\"><a href=\"#%E5%9B%9B%E3%80%81paddlepaddle%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85\">四、paddlepaddle环境安装</a></p>\n<p id=\"%C2%A0%E4%BA%94%E3%80%81pycharm%E5%AE%89%E8%A3%85--%E9%AA%8C%E8%AF%81anaconda%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85-toc\" style=\"margin-left:0px;\"><a href=\"#%C2%A0%E4%BA%94%E3%80%81pycharm%E5%AE%89%E8%A3%85--%E9%AA%8C%E8%AF%81anaconda%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85\">五、pycharm安装--验证CUDA和cudnn版本</a></p>\n<h1>前言</h1>\n<p>        之前我们在利用GPU进行深度学习的时候，都要去NVIDIA的官网下载CUDA的安装程序和cudnn的压缩包，然后再进行很繁琐的系统环境配置。不仅环境配置麻烦，而且还特别容易配置错误，特别还有CUDA和cudnn版本的对应也特别容易搞错，但是利用anaconda安装配置pytorch和paddlepaddle环境的时候会自动帮我们配置好cuda和cudnn。这篇博客就是针对小白的保姆级深度学习的环境配置教程</p>\n<h1 id=\"%E4%B8%80%E3%80%81%E8%8B%B1%E4%BC%9F%E8%BE%BE%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85%E4%B8%8E%E6%9B%B4%E6%96%B0\" style=\"margin-left:0px;text-align:justify;\">一、NVIDIA驱动安装与更新</h1>\n<p style=\"margin-left:0;text-align:justify;\">       显卡驱动程序就是用来驱动显卡的程序，它是硬件所对应的软件。驱动程序即添加到操作系统中的一小块代码，其中包含有关硬件设备的信息。正常有显卡的电脑都是有驱动程序的，但是有的时候驱动可能版本比较低，支持的cuda版本也是比较低的（但是有的人的显卡是比较老的，就不建议更新驱动，这样会导致各种各样的问题，但是搞深度学习还是要用一块好的显卡用来学习，这点我是有血泪教训的，咬咬牙买块好的显卡，把知识学到手，以后的工资可以多赚会很多显卡的钱），NVIDIA出的30系列的显卡好像只支持cuda11以上的版本。</p>\n<p style=\"margin-left:0;text-align:justify;\">       首先查看电脑的显卡版本，步骤为：此电脑右击--&gt;管理--&gt;设备管理器--&gt;显示适配器。就可以看到电脑显卡的版本了。如图，可以看到我的是一块RTX3060显卡。</p>\n<p style=\"margin-left:0;text-align:justify;\"><img alt=\"\" height=\"210\" src=\"..\\..\\static\\image\\2021081819133023.png\" width=\"226\"/><img alt=\"\" height=\"210\" src=\"..\\..\\static\\image\\20210818191330129.png\" width=\"166\"/> <img alt=\"\" height=\"137\" src=\"..\\..\\static\\image\\20210818191329932.png\" width=\"281\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">       有显卡驱动的，可以直接在桌面右键，找到英伟达驱动控制面板打开就好了。</p>\n<p style=\"margin-left:0;text-align:justify;\"><img alt=\"\" height=\"280\" src=\"..\\..\\static\\image\\20210818191330144.png\" width=\"286\"/> <img alt=\"\" height=\"279\" src=\"..\\..\\static\\image\\20210818191330232.png\" width=\"376\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">       再得知以上的信息以后我们就可以对应我们的显卡去英伟达官网上去找相对应的显卡驱动更新或者下载了。</p>\n<p style=\"margin-left:0;text-align:justify;\">       显卡驱动的下载<a href=\"https://www.nvidia.cn/Download/index.aspx?lang=cn\" title=\"地址\">地址</a>（可能打开比较慢，多打开几遍）。</p>\n<p style=\"margin-left:0;text-align:justify;\">       然后根据自己的电脑的配置去选择驱动。这里Notebooks是笔记本的意思，所以如果你是笔记本电脑，那么产品系列那个选项就要选择（Notebooks）的。还有那个下载类型有两种一个是Studio版本，一个是Game Ready版本。其实两个版本都差不多，一个是偏办公用，一个是偏游戏娱乐。按如下操作将驱动下载下来。然后点击下载来的程序，不断的下一步就好了。</p>\n<p style=\"margin-left:0;text-align:justify;\"><img alt=\"\" height=\"185\" src=\"..\\..\\static\\image\\20210818191329299.png\" width=\"327\"/> <img alt=\"\" height=\"184\" src=\"..\\..\\static\\image\\20210818191329935.png\" width=\"347\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        安装（更新）好了显卡驱动以后。我们按下win+R组合键，打开cmd命令窗口。输入如下的命令。</p>\n<pre><code>nvidia-smi</code></pre>\n<p style=\"margin-left:0;text-align:justify;\">       得到如下图的信息图，可以看到驱动的版本是471.68；最高支持的CUDA版本是11.4版本。得到显卡的最高支持的CUDA版本，我们就可以根据这个信息来安装环境了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"346\" src=\"..\\..\\static\\image\\2021081819133071.png\" width=\"606\"/></p>\n<h1 id=\"%E4%BA%8C%E3%80%81Anaconda%20%E7%9A%84%E5%AE%89%E8%A3%85\" style=\"margin-left:0px;text-align:justify;\">二、Anaconda 的安装</h1>\n<p style=\"margin-left:0;text-align:justify;\">     打开<a href=\"https://www.anaconda.com/products/individual#Downloads\" title=\"网址\">网址</a>，现在是2021年8月，对应的anaconda版本是支持python3.8。如果想下载之前的版本，或者更低python版本的anaconda，可以打开<a href=\"https://www.cnblogs.com/xiaochouk/p/12081633.html\" title=\"网址\">网址</a>。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"286\" src=\"..\\..\\static\\image\\2021081819133099.png\" width=\"617\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">       双击下载好的anaconda安装包，just me是说只供当前用户使用。all user 是供使用这台电脑的所有用户使用，是权限问题。对空间影响不大。如果你的电脑上只有建了一个用户，all users和just me 的作用是一样的。所以点击just me就好了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"314\" src=\"..\\..\\static\\image\\20210818191330146.png\" width=\"404\"/></p>\n<p>         然后点击next，当让你选择安装安装路径的时候，一定不要选择默认安装位置，因为默认位置是c盘，以后要在anaconda里面创建环境的时候会很占内存，最好在D盘中创建一个文件夹来放anaconda。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"305\" src=\"..\\..\\static\\image\\20210818192201201.png\" width=\"392\"/></p>\n<p>        和图中一样将图中的√勾上，虽然出现红色的警告，但是要勾上，将anaconda添加到环境变量中去。然后点击完成就好了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"294\" src=\"..\\..\\static\\image\\20210818192201256.png\" width=\"378\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        安装完成以后，按下开始键（win键）在左边就会出现anaconda3这个文件夹，可以发现anaconda已经安装好了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"270\" src=\"..\\..\\static\\image\\20210818192201259.png\" width=\"289\"/></p>\n<h1 id=\"%E4%B8%89%E3%80%81Pytorch%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85\" style=\"margin-left:0px;text-align:justify;\">三、Pytorch环境安装</h1>\n<p>        按下开始键（win键），点击如图中的图标。打开anaconda的终端。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"261\" src=\"..\\..\\static\\image\\20210818192201260.png\" width=\"269\"/></p>\n<p>         执行如下的指令查看有哪些环境</p>\n<pre><code>conda env list</code></pre>\n<p style=\"margin-left:0;text-align:justify;\">        可以看出来，新安装的anaconda只有一个base环境。</p>\n<p style=\"margin-left:0;text-align:justify;\"><img alt=\"\" height=\"151\" src=\"..\\..\\static\\image\\20210818192201168.png\" width=\"720\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        这里先讲一下anaconda环境，首先base环境是一个大的环境，类似一个很大的一个房子（但是没有房间），当我们每创建一个环境就都会相当于在这个大房子里面用隔板创建一个房间，然后这个房间里面可以安装我们所需要的包，这样管理起来就比较方便。如图可以比较直观的诠释anaconda的环境</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"228\" src=\"..\\..\\static\\image\\20210818194646299.png\" width=\"393\"/></p>\n<p>         创建虚拟环境conda create -n 环境名字（英文） python=x.x（python版本），如下，我就是创建了一个名字叫pytorch，python是3.8版本的环境。</p>\n<pre><code>conda create -n pytorch python=3.8</code></pre>\n<p>        在base环境中执行如上的命令，就会创建一个新的虚拟环境，这个虚拟环境会安装一些基础的包，如下图所示。询问是否安装的时候，输入y。就可以创建环境了。</p>\n<p style=\"margin-left:0;text-align:justify;\"><img alt=\"\" height=\"383\" src=\"..\\..\\static\\image\\20210818192201248.png\" width=\"1098\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        当安装好了以后，执行conda env list这个命令，就可以看到比一开始多了一个pytorch这个环境。现在我们可以在这个环境里面安装深度学习框架和一些Python包了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"159\" src=\"..\\..\\static\\image\\20210818192201234.png\" width=\"941\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        执行如下命令，激活这个环境。conda activate 虚拟环境名称</p>\n<pre><code>conda activate pytorch\n</code></pre>\n<p style=\"margin-left:0px;\">        安装pytorch-gup版的环境，由于pytorch的官网在国外，下载相关的环境包是比较慢的，所以我们给环境换源。在pytorch环境下执行如下的命名给环境换清华源。</p>\n<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/\nconda config --set show_channel_urls yes</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"155\" src=\"..\\..\\static\\image\\20210818200253403.png\" width=\"660\"/></p>\n<p>         然后打开pytorch的<a href=\"https://pytorch.org/\" title=\"官网\">官网</a>，由于开头我们通过驱动检测到我的显卡为 RTX3060，最高支持cuda11.4版本，所以我们选择cuda11.1版本的cuda，然后将下面红色框框中的内容复制下来，一定不要把后面的-c pytorch -c conda-forge也复制下来，因为这样运行就是还是在国外源下载，这样就会很慢。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"259\" src=\"..\\..\\static\\image\\20210818200423878.png\" width=\"621\"/></p>\n<p>         将复制的内容粘贴到pytorch环境下的终端，运行就可以了<img alt=\"\" height=\"51\" src=\"..\\..\\static\\image\\20210818200847168.png\" width=\"1048\"/></p>\n<p>        这时候就开始下载环境所需要的依赖包了。</p>\n<h1 id=\"%E5%9B%9B%E3%80%81paddlepaddle%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85\">四、paddlepaddle环境安装</h1>\n<p>        如pytorch环境安装一样，首先在base环境下创建一个新的环境来安装paddlepaddle框架。首先创建一个新的环境名叫paddle。执行如下命令。</p>\n<pre><code>conda create -n paddle python=3.8\n</code></pre>\n<p>        创建好了名叫paddle这个环境以后，进入到这个环境中（可以在pytorch环境下进入），执行如下命令。</p>\n<pre><code>conda activate paddle\n</code></pre>\n<p>        我们在打开paddlepaddle的<a href=\"https://www.paddlepaddle.org.cn/\" title=\"官网\">官网</a>。我们选择cuda11.2版本。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"375\" src=\"..\\..\\static\\image\\20210818202224162.png\" width=\"530\"/></p>\n<p>        复制如下的红色框框中的命令，由于这个命令就是在清华源中下载，所以直接复制这个命令到anaconda prompt中去然后运行就可以了，如以下截图。</p>\n<p><img alt=\"\" height=\"89\" src=\"..\\..\\static\\image\\20210818202507643.png\" width=\"1200\"/></p>\n<p>         运行如上的命名以后（中间会询问您是否确定安装，输入y就可以了），就可以安装paddlepaddle框架所需要的基本环境依赖包（<span style=\"color:#fe2c24;\">如果中间网不好，导致有些包下载失败，从新运行如上的吗，命令就可以断点下载了</span>）。<img alt=\"\" height=\"562\" src=\"..\\..\\static\\image\\20210818203108574.png\" width=\"1200\"/></p>\n<p>         至此。pytorch和paddlepaddle的深度学习环境就安装好了。</p>\n<h1 id=\"%C2%A0%E4%BA%94%E3%80%81pycharm%E5%AE%89%E8%A3%85--%E9%AA%8C%E8%AF%81anaconda%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85\" style=\"margin-left:0px;text-align:justify;\">五、pycharm安装--验证CUDA和cudnn版本</h1>\n<p style=\"margin-left:0;text-align:justify;\">        打开这个pycharm<a href=\"https://www.jetbrains.com/pycharm/download/#section=windows\" title=\"网址\">网址</a>，可以发现一共有两个版本一个是专业版（Professional），一个是社区版（Community），专业版是需要花钱的，好几百美元一年。而社区版是免费的，但是也够用了，所以就下载安装社区版就好了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"232\" src=\"..\\..\\static\\image\\2021081820380517.png\" width=\"401\"/></p>\n<p>         将下载好的pycharm安装包，双击。安装的地址最好不要放在C盘，我是安装在D盘（反正我 的软件是不喜欢安装在C盘的。总害怕C盘会满）。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"263\" src=\"..\\..\\static\\image\\20210818192201197.png\" width=\"348\"/></p>\n<p>         将所有的√都勾上，</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"250\" src=\"..\\..\\static\\image\\20210818192201198.png\" width=\"353\"/></p>\n<p style=\"margin-left:0;text-align:justify;\">        安装好了点击第二个框框，然后点完成就好了</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"253\" src=\"..\\..\\static\\image\\20210818192201205.png\" width=\"358\"/></p>\n<p>        打开pycharm，创建一个新的工程，来测试anaconda是否在安装pytorch和paddlepaddle框架的时候也安装了cuda和cudnn。按如下两图创建一个工程（新工程好像必须要安装一个新的python插件），新的工程最好在D盘一个新的文件夹下，有的工程很大，C盘容易装满。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"265\" src=\"..\\..\\static\\image\\20210818221032823.png\" width=\"351\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"261\" src=\"..\\..\\static\\image\\2021081822122379.png\" width=\"345\"/></p>\n<p>         按以上的方式创建了一个工程，这时候我们就要选择我们在anaconda里面安装的环境，在界面的右下角</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"99\" src=\"..\\..\\static\\image\\20210818222410569.png\" width=\"223\"/></p>\n<p>        按照如图中的选项选择我们在anaconda中创建的深度学习环境，可以看到有paddle和pytorch两个环境，我们先选择pytorch环境。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"242\" src=\"..\\..\\static\\image\\20210818222607742.png\" width=\"356\"/></p>\n<p>         此时刚刚的右下角已经有了我们刚刚选择的pytorch环境中的python了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"130\" src=\"..\\..\\static\\image\\20210818222953359.png\" width=\"231\"/></p>\n<p>         我们在创建的工程里面创建一个python脚本，在脚本中运行如下代码，查看是否anconda在安装pytorch环境的时候也安装了cuda和cudnn。</p>\n<pre><code class=\"language-python\">import torch\nprint(torch.cuda.is_available())\nprint(torch.backends.cudnn.is_available())\nprint(torch.cuda_version)\nprint(torch.backends.cudnn.version())\n</code></pre>\n<p>        可以发现控制台打印出两个True,可以说明cuda和cudnn已经安装。并且可以得到cuda的版本为11.1和cudnn的版本为8.05版本。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"120\" src=\"..\\..\\static\\image\\20210818230136703.png\" width=\"114\"/></p>\n<p>         安装如上的方法将python的版本切换为paddle环境中的python插件。运行如下的代码</p>\n<pre><code class=\"language-python\">import paddle\nprint(paddle.utils.run_check())</code></pre>\n<p>         可以得到cudade 版本为11.2，cudnn的版本为8.1。<img alt=\"\" height=\"168\" src=\"..\\..\\static\\image\\20210818231115387.png\" width=\"1200\"/></p>\n<p>         至此我们的深度学习环境安装就已经完全完成。接下来可以在相对的环境下进行深度学习的实验了。</p>\n<p>        <strong><span style=\"color:#fe2c24;\">最后还要申明一下，你可以创建不同的环境，在里面安装不同版本的cuda和cudnn版本。已经亲自尝试过了，是可以的。</span></strong></p>\n</div>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-05 00:16:08", "summary": "前言一、英伟达驱动安装与更新二、的安装三、环境安装四、环境安装五、安装验证和版本前言之前我们在利用进行深度学习的时候，都要去的官网下载的安装程序和的压缩包，然后再进行很繁琐的系统环境配置。不仅环境配置"}