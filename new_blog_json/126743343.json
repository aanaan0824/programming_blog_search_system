{"blogid": "126743343", "writerAge": "码龄24天", "writerBlogNum": "51", "writerCollect": "1", "writerComment": "1", "writerFan": "30", "writerGrade": "3级", "writerIntegral": "510", "writerName": "web17535224648", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126743343.jpg", "writerRankTotal": "39369", "writerRankWeekly": "11255", "writerThumb": "0", "writerVisitNum": "2416", "blog_read_count": "4", "blog_time": "于 2022-09-07 12:47:47 发布", "blog_title": "JVM 堆内存查看", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"JVM__2\"></a>JVM 堆内存查看</h1>\n<p>JVM 堆内存查看的方式有多中，可以用命令也可以用工具(jconsole等)，这里我来说下如何使用命令查看。</p>\n<h2><a id=\"PrintFlagsFinal_7\"></a>PrintFlagsFinal</h2>\n<pre><code>$ java -XX:+PrintFlagsFinal -version |grep -E 'HeapSize|PerSize|ThreadStackSize'\n     intx CompilerThreadStackSize                   = 0                                   {pd product}\n    uintx ErgoHeapSizeLimit                         = 0                                   {product}\n    uintx HeapSizePerGCThread                       = 87241520                            {product}\n    uintx InitialHeapSize                          := 268435456                           {product}\n    uintx LargePageHeapSizeThreshold                = 134217728                           {product}\n    uintx MaxHeapSize                              := 4294967296                          {product}\n     intx ThreadStackSize                           = 1024                                {pd product}\n     intx VMThreadStackSize                         = 1024                                {pd product}\njava version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n<p>我们可用看到最大堆内存为4294967296字节，转换为4Gb，我们的电脑初始化堆内存为268435456字节，转换为250Mb</p>\n<h2><a id=\"PrintCommandLineFlags_26\"></a>PrintCommandLineFlags</h2>\n<pre><code>$ java -XX:+PrintCommandLineFlags -version\n-XX:InitialHeapSize=268435456 -XX:MaxHeapSize=4294967296 -XX:+PrintCommandLineFlags -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC\njava version \"1.8.0_144\"\nJava(TM) SE Runtime Environment (build 1.8.0_144-b01)\nJava HotSpot(TM) 64-Bit Server VM (build 25.144-b01, mixed mode)\n</code></pre>\n<p>查询出来的结果和上面我们看到的是一样的</p>\n<h2><a id=\"JVM_38\"></a>JVM默认堆内存大小</h2>\n<p>如果不进行设置，Jvm会给我们设置一个默认的堆内存大小，我们先来看下oracle官方给出的文档</p>\n<pre><code>Initial Heap Size and Maximum Heap Size Changed for Parallel Garbage Collector\nOn server-class machines running either VM (client or server) with the parallel garbage collector (-XX:+UseParallelGC) the initial heap size and maximum heap size have changed as follows.\n\ninitial heap size\nLarger of 1/64th of the machine's physical memory on the machine or some reasonable minimum. Before Java SE 5.0, the default initial heap size was a reasonable minimum, which varies by platform. You can override this default using the -Xms command-line option.\n\nmaximum heap size\nSmaller of 1/4th of the physical memory or 1GB. Before Java SE 5.0, the default maximum heap size was 64MB. You can override this default using the -Xmx command-line option.\n\nNote: The boundaries and fractions given for the heap size are correct for Java SE 5.0. They are likely to be different in subsequent releases as computers get more powerful.\n</code></pre>\n<p>翻译过来大概就是，<strong>初始的堆内存</strong>大小为<strong>物理内存的1/64的较大值或者某个合理的最小值</strong>；<strong>最大堆内存</strong>小于物理内存的<strong>1/4或者1GB</strong>。需要注意的是，这些这是jdk 1.5之后的默认值。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-09-07 12:47:47", "summary": "堆内存查看堆内存查看的方式有多中，可以用命令也可以用工具等，这里我来说下如何使用命令查看。我们可用看到最大堆内存为字节，转换为，我们的电脑初始化堆内存为字节，转换为查询出来的结果和上面我们看到的是一样"}