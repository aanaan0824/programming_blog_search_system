{"blogid": "125380327", "writerAge": "码龄1年", "writerBlogNum": "39", "writerCollect": "1045", "writerComment": "429", "writerFan": "1611", "writerGrade": "4级", "writerIntegral": "1338", "writerName": "菜菜不恰菜", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125380327.jpg", "writerRankTotal": "13759", "writerRankWeekly": "9940", "writerThumb": "372", "writerVisitNum": "75514", "blog_read_count": "21792", "blog_time": "已于 2022-06-23 17:34:13 修改", "blog_title": "mysql表的增删改查（进阶）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/494ebe08dee64d47bd86dd744c2487fa.gif\"/></p>\n<hr/>\n<p> <strong>目录</strong></p>\n<p id=\"%F0%9F%A5%AC%E6%96%B0%E5%A2%9E-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E6%96%B0%E5%A2%9E\">🥬新增</a></p>\n<p id=\"%F0%9F%A5%AC%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2\">🥬聚合查询</a></p>\n<p id=\"%F0%9F%A5%AC%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2\">🥬分组查询</a></p>\n<p id=\"%F0%9F%A5%AC%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2\">🥬条件查询</a></p>\n<p id=\"%F0%9F%A5%AC%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2\">🥬联合查询</a></p>\n<p id=\"%C2%A0%F0%9F%A5%AC%E8%87%AA%E8%BF%9E%E6%8E%A5-toc\" style=\"margin-left:40px;\"><a href=\"#%C2%A0%F0%9F%A5%AC%E8%87%AA%E8%BF%9E%E6%8E%A5\"> 🥬自连接</a></p>\n<p id=\"%F0%9F%A5%AC%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2\">🥬合并查询</a></p>\n<p id=\"%F0%9F%A5%AC%E5%B0%8F%E7%BB%93-toc\" style=\"margin-left:40px;\"><a href=\"#%F0%9F%A5%AC%E5%B0%8F%E7%BB%93\">🥬小结</a></p>\n<hr id=\"hr-toc\"/>\n<h2 id=\"%F0%9F%A5%AC%E6%96%B0%E5%A2%9E\">🥬新增</h2>\n<pre><code>insert into B select * from A；//将A表的信息通过查询新增到B表中去</code></pre>\n<p><img alt=\"\" height=\"3\" src=\"..\\..\\static\\image\\961e937094824e4db545cad7beaf7bc3.png\" width=\"800\"/></p>\n<h2 id=\"%F0%9F%A5%AC%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2\">🥬聚合查询</h2>\n<pre><code>count；//返回到查询的数据总和\n</code></pre>\n<p><img alt=\"\" height=\"389\" src=\"..\\..\\static\\image\\0fa023830601479db6424c0dc60e109d.png\" width=\"800\"/></p>\n<pre><code>sum；//返回到查询的数据总和（只对数字有意义）</code></pre>\n<p><img alt=\"\" height=\"378\" src=\"..\\..\\static\\image\\4dc3665ba6384690b19a4ac5ad6ab675.png\" width=\"800\"/></p>\n<p>只对数字有意义</p>\n<p><img alt=\"\" height=\"514\" src=\"..\\..\\static\\image\\516d4a64183e43a88cf68cf7bf30b0fc.png\" width=\"1161\"/></p>\n<pre><code>avg/max/min;//返回查询数据的平均值/最大值/最小值(只对数字有意义）</code></pre>\n<p><img alt=\"\" height=\"181\" src=\"..\\..\\static\\image\\f1e2b7e763d8472b98bce4167b66d4c5.png\" width=\"1092\"/></p>\n<h2 id=\"%F0%9F%A5%AC%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2\">🥬分组查询</h2>\n<pre><code>select * from 表名 group by 分组条件；</code></pre>\n<p><img alt=\"\" height=\"393\" src=\"..\\..\\static\\image\\37abe79980374f5bacb076b78d9c66f0.png\" width=\"800\"/></p>\n<p> 这里是先执行分组，再根据分组执行每个组的聚合函数。</p>\n<h2 id=\"%F0%9F%A5%AC%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2\">🥬条件查询</h2>\n<pre><code>having；</code></pre>\n<p><span style=\"color:#333333;\">group by 子句进行分组以后，需要对分组结果再进行条件过滤时，就可以使用having。</span>where是在分组之前执行，如果要对分组之后的结果进行条件筛选，就需要使用having<span style=\"color:#333333;\">(having搭配group by使用）</span>。</p>\n<p>例如：求每种角色的平均薪资，除了吴九。（这里就是用where，分组之前指定条件，先去除吴九，在分组求平均薪资。</p>\n<p><img alt=\"\" height=\"142\" src=\"..\\..\\static\\image\\e38a693501bb40ea837125f14a9c9508.png\" width=\"800\"/></p>\n<p> 求每种角色平均薪资，只保留平均薪资10000以下的，这里就用having。要先求出平均薪资才能进行筛选。</p>\n<p><img alt=\"\" height=\"137\" src=\"..\\..\\static\\image\\e1a5caa7e00f4d268ec02cf32e6c554e.png\" width=\"800\"/></p>\n<h2 id=\"%F0%9F%A5%AC%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2\">🥬联合查询</h2>\n<pre><code>第一种写法：select * from 表名1，表名2；\n第二种写法：select * from 表名1 join 表名2 on 条件；</code></pre>\n<p>联合查询（较重要）是多表查询，前面的查询都是单表查询。多表查询中的核心操作---笛卡尔积。</p>\n<p>笛卡尔积的运算就是将两个表的每条记录分别进行组合，得到一组新的记录。</p>\n<p><img alt=\"\" height=\"906\" src=\"..\\..\\static\\image\\67e09ff37c0e44988b1a72458849c46b.png\" width=\"932\"/></p>\n<p> 以上记录并不都是我们想要的结果，我们可以通过筛选得到我们想要的结果。</p>\n<p><img alt=\"\" height=\"241\" src=\"..\\..\\static\\image\\4b66590c52d04a5dbb12f6266007beb1.png\" width=\"1200\"/></p>\n<p><img alt=\"\" height=\"249\" src=\"..\\..\\static\\image\\c1e39674c09e4a8a83fd4ec1deda3d1d.png\" width=\"1200\"/></p>\n<p>那么join on后面跟条件和 用where 跟条件有什么区别呢？</p>\n<p>from多个表where写法叫做“内连接\"。<br/> 使用 join on的写法,既可以表示内连接,还可以表示外连接。<br/> select 列名 from 表1 inner join 表2 on条件;inner join表示是\"内连接\"其中inner可以省略。<br/> select 列名 from 表1 left join 表2 on条件;左外连接。<br/> select列from表1 right join表2 on条件;右外连接。</p>\n<p><img alt=\"\" height=\"1003\" src=\"..\\..\\static\\image\\615b6c2bfd6849d4b996737f65ab9fe4.png\" width=\"1200\"/></p>\n<h2 id=\"%C2%A0%F0%9F%A5%AC%E8%87%AA%E8%BF%9E%E6%8E%A5\"> 🥬自连接</h2>\n<div>\n<span style=\"color:#333333;\">自连接是指在同一张表连接自身进行查询。 </span>\n</div>\n<div>\n<div>\n<span style=\"color:#333333;\">例如：显示所有</span>\n<span style=\"color:#333333;\">“</span>\n<span style=\"color:#333333;\">语文</span>\n<span style=\"color:#333333;\">”</span>\n<span style=\"color:#333333;\">成绩比</span>\n<span style=\"color:#333333;\">“数学”</span>\n<span style=\"color:#333333;\">成绩高的成绩信息。 </span>\n</div>\n<div></div>\n<div>\n  首先要知道语文和数学这两门课程的course_id，先找到这俩门课程。然后在比较他俩高低。\n </div>\n<div></div>\n<div>\n<pre><code>select s1.student_id,s1.score,s2.score from score as s1,score as s2 where s1.student_id=s2.student_id and s1.course_id=3 and s2.course_id=1 and s1.score&gt;s2.score;</code></pre>\n</div>\n<h2 id=\"%E2%80%8B%E7%BC%96%E8%BE%91%C2%A0\"><img alt=\"\" height=\"185\" src=\"..\\..\\static\\image\\2c05780c9a5a42728b38adb3d09e6b23.png\" width=\"838\"/></h2>\n<h2 id=\"%F0%9F%A5%AC%E5%90%88%E5%B9%B6%E6%9F%A5%E8%AF%A2\"><strong><span style=\"color:#333333;\">🥬</span></strong><span style=\"color:#333333;\">合并查询</span></h2>\n<pre><code>union；//这个可自动去重\nunion all；//这个不可自动去重</code></pre>\n<p><span style=\"color:#333333;\"> 该操作符用于取得两个结果集的并集。</span></p>\n<p>例如：<span style=\"color:#333333;\">查询</span><span style=\"color:#333333;\">id</span><span style=\"color:#333333;\">小于</span><span style=\"color:#333333;\">3</span><span style=\"color:#333333;\">，或者名字为</span><span style=\"color:#333333;\">“</span><span style=\"color:#333333;\">英文</span><span style=\"color:#333333;\">”</span><span style=\"color:#333333;\">的课程。</span></p>\n<div>\n<pre><code>select * from course where id&lt;3 union select * from course where name='英文'; </code></pre>\n<p><span style=\"color:#0d0016;\">或者使用or来实现 </span></p>\n</div>\n<div>\n<pre><code>select * from course where id&lt;3 or name='英文'；</code></pre>\n<h2 id=\"%F0%9F%A5%AC%E5%B0%8F%E7%BB%93\">🥬小结</h2>\n<p>以上就是今天的内容了,有什么问题大家都可以在评论区留言✌✌✌</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/5d0b88033d8b47d8a0e05bc2e824284e.gif\"/></p>\n<p></p>\n</div>\n</div>\n<p></p>\n</div>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-06-23 17:34:13", "summary": "目录新增聚合查询分组查询条件查询联合查询自连接合并查询小结新增；将表的信息通过查询新增到表中去聚合查询；返回到查询的数据总和；返回到查询的数据总和只对数字有意义只对数字有意义返回查询数据的平均值最大值"}