{"blogid": "125156177", "writerAge": "码龄5年", "writerBlogNum": "6", "writerCollect": "21", "writerComment": "4", "writerFan": "0", "writerGrade": "1级", "writerIntegral": "87", "writerName": "sr十万火急", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125156177.jpg", "writerRankTotal": "126824", "writerRankWeekly": "1051190", "writerThumb": "5", "writerVisitNum": "13592", "blog_read_count": "1536", "blog_time": "已于 2022-06-06 23:45:57 修改", "blog_title": "thinkphp6控制器不存在:app\\controller\\Admin问题解析及解决", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>正常运行的thinkphp6，在使用composer安装Workerman后，再次访问web页面提示控制器不存在:app\\controller\\Admin，如下图：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"472\" src=\"..\\..\\static\\image\\4972b6d4985c4ed9923d3d33642a6dec.png\" width=\"1200\"/></p>\n<p>经多方查找问题解决方法，终于找到一篇链接有相关介绍（非常感谢）：</p>\n<p><a class=\"has-card\" href=\"https://blog.csdn.net/weixin_32916385/article/details/115411226\" title=\"php 路由 控制器不存在,解决ThinkPHP6提示控制器不存在问题_Rio超耿直的博客-CSDN博客\"><span class=\"link-card-box\"><span class=\"link-title\">php 路由 控制器不存在,解决ThinkPHP6提示控制器不存在问题_Rio超耿直的博客-CSDN博客</span><span class=\"link-desc\">下面由thinkphp教程栏目给大家介绍ThinkPHP6提示控制器不存在的解决方法，希望对需要的朋友有所帮助！ThinkPHP 6 提示控制控制器不存在thinkphp 6 默认是单应用模式，需要多应用时，就要安装多应用模式扩展think-multi-app。composer require topthink/think-multi-app然后删除框架自带的app\\controller目录，创建...</span><span class=\"link-link\"><img alt=\"\" class=\"link-link-icon\" src=\"https://g.csdnimg.cn/static/logo/favicon32.ico\"/>https://blog.csdn.net/weixin_32916385/article/details/115411226</span></span></a></p>\n<p>引用原文： </p>\n<p><img alt=\"\" height=\"636\" src=\"..\\..\\static\\image\\fd5add3ff42d4d05b1533d930148e679.png\" width=\"755\"/></p>\n<p></p>\n<p>经分析，原因为在安装扩展时自动下载更新的vendor/composer/installed.json文件内容和格式与之前的有变化：</p>\n<p>原来的文件截图：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"425\" src=\"..\\..\\static\\image\\ad504a0678c04d50903bb756b71b9032.png\" width=\"1078\"/> <img alt=\"\" height=\"482\" src=\"..\\..\\static\\image\\7a056b4579494da78d3a9648cef476e6.png\" width=\"1085\"/></p>\n<p>现在更新后的文件：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"420\" src=\"..\\..\\static\\image\\c6779fba15654ddf8c9850905110418c.png\" width=\"1097\"/></p>\n<p><img alt=\"\" height=\"403\" src=\"..\\..\\static\\image\\2683506b2e2049978f9937e22d09b38b.png\" width=\"1099\"/></p>\n<p>经对比不难发现，现在安装扩展时所下载更新的installed.json文件增加了节点及内容，所以在安装扩展时执行的指令没有生效，可以直接通过以下命令测试：</p>\n<pre><code class=\"language-php\">php think service:discover</code></pre>\n<p>安装扩展或执行以上的命令后，导致vendor\\services.php文件里的注册服务内容为空，即使原来是有内容的。</p>\n<p>更新之前的内容：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"137\" src=\"..\\..\\static\\image\\de35f9eb560c42b7a9ae2b30fbea5efe.png\" width=\"547\"/></p>\n<p>更新之后的内容：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"102\" src=\"..\\..\\static\\image\\4ede92d2214947838df99a471203214b.png\" width=\"577\"/></p>\n<p>正因为此文件里的部分内容被清空，所以导致出现控制器不存在:app\\controller\\Admin的问题。</p>\n<p>解决方法：</p>\n<p>1、打开vendor/composer/installed.json，把所以extra\\think\\services节点下的值复制粘贴到vendor\\services.php文件数组中，如图：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"230\" src=\"..\\..\\static\\image\\692616e275b34c33b5e6a8a73f6d1f4d.png\" width=\"639\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"173\" src=\"..\\..\\static\\image\\4aaa233f93c847518058f4c70fcdddf1.png\" width=\"586\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"268\" src=\"..\\..\\static\\image\\fe7915bbef514ef69f641244c25ce415.png\" width=\"704\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"158\" src=\"..\\..\\static\\image\\acc728bd9b474006a47cea9a8d8ae159.png\" width=\"548\"/></p>\n<p>2、或修改以下文件第33至37行的代码：vendor\\topthink\\framework\\src\\think\\console\\command\\ServiceDiscover.php。</p>\n<p>将原代码：</p>\n<pre><code class=\"language-php\">foreach ($packages as $package) {\n    if (!empty($package['extra']['think']['services'])) {\n        $services = array_merge($services, (array) $package['extra']['think']['services']);\n    }\n}</code></pre>\n<p>修改为：</p>\n<pre><code class=\"language-php\">foreach ($packages as $package) {\n    foreach((array) $package as $subpackage){\n        if (!empty($subpackage['extra']['think']['services'])) {\n            $services = array_merge($services, (array) $subpackage['extra']['think']['services']);\n        }\n    }\n}</code></pre>\n<p>保存文件后，重新通过composer安装扩展或执行php think service:discover命令，将自动更新vendor\\services.php文件里的相关内容。</p>\n<p>至此，本问题解决。</p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-06-06 23:45:57", "summary": "正常运行的，在使用安装后，再次访问页面提示控制器不存在，如下图：经多方查找问题解决方法，终于找到一篇链接有相关介绍非常感谢：路由控制器不存在解决提示控制器不存在问题超耿直的博客博客路由控制器不存在解决"}