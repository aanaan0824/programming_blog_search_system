{"blogid": "126597099", "writerAge": "ç é¾„99å¤©", "writerBlogNum": "176", "writerCollect": "2299", "writerComment": "180", "writerFan": "774", "writerGrade": "5çº§", "writerIntegral": "3008", "writerName": "Mdc_stdio", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126597099.jpg", "writerRankTotal": "5961", "writerRankWeekly": "245", "writerThumb": "1072", "writerVisitNum": "144592", "blog_read_count": "1426", "blog_time": "äºÂ 2022-08-30 09:37:20Â å‘å¸ƒ", "blog_title": "ã€æ¯•ä¸šè®¾è®¡ã€‘åŸºäºå•ç‰‡æœºçš„æ‰‹åŠ¿æ£€æµ‹è¯†åˆ«ç³»ç»Ÿ - arduino ç‰©è”ç½‘åµŒå…¥å¼", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><a href=\"#0__5\">0 å‰è¨€</a></li><li><a href=\"#1__27\">1 ç®€ä»‹</a></li><li><a href=\"#2__29\">2 ä¸»è¦å™¨ä»¶</a></li><li><a href=\"#3__36\">3 å®ç°æ•ˆæœ</a></li><li><a href=\"#4__44\">4 è®¾è®¡åŸç†</a></li><li><a href=\"#5__86\">5 éƒ¨åˆ†æ ¸å¿ƒä»£ç </a></li><li><a href=\"#5__350\">5 æœ€å</a></li></ul>\n</div>\n<p></p>\n<hr color=\"#000000\" size='1\"'/>\n<h1><a id=\"0__5\"></a>0 å‰è¨€</h1>\n<p>ğŸ”¥ è¿™ä¸¤å¹´å¼€å§‹æ¯•ä¸šè®¾è®¡å’Œæ¯•ä¸šç­”è¾©çš„è¦æ±‚å’Œéš¾åº¦ä¸æ–­æå‡ï¼Œä¼ ç»Ÿçš„æ¯•è®¾é¢˜ç›®ç¼ºå°‘åˆ›æ–°å’Œäº®ç‚¹ï¼Œå¾€å¾€è¾¾ä¸åˆ°æ¯•ä¸šç­”è¾©çš„è¦æ±‚ï¼Œè¿™ä¸¤å¹´ä¸æ–­æœ‰å­¦å¼Ÿå­¦å¦¹å‘Šè¯‰å­¦é•¿è‡ªå·±åšçš„é¡¹ç›®ç³»ç»Ÿè¾¾ä¸åˆ°è€å¸ˆçš„è¦æ±‚ã€‚</p>\n<p>ä¸ºäº†å¤§å®¶èƒ½å¤Ÿé¡ºåˆ©ä»¥åŠæœ€å°‘çš„ç²¾åŠ›é€šè¿‡æ¯•è®¾ï¼Œå­¦é•¿åˆ†äº«ä¼˜è´¨æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ˜¯</p>\n<p>ğŸš© <strong>åŸºäºå•ç‰‡æœºçš„æ‰‹åŠ¿æ£€æµ‹è¯†åˆ«ç³»ç»Ÿ</strong></p>\n<p>ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)</p>\n<ul><li>éš¾åº¦ç³»æ•°ï¼š4åˆ†</li><li>å·¥ä½œé‡ï¼š4åˆ†</li><li>åˆ›æ–°ç‚¹ï¼š3åˆ†</li></ul>\n<p>ğŸ§¿ <strong>é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š</strong></p>\n<p><a href=\"https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md\">https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md</a></p>\n<br/>\n<h1><a id=\"1__27\"></a>1 ç®€ä»‹</h1>\n<h1><a id=\"2__29\"></a>2 ä¸»è¦å™¨ä»¶</h1>\n<ul><li>Arduino Nano R3</li><li>PIRä¼ æ„Ÿå™¨</li><li>OLEDæ˜¾ç¤ºæ¨¡å—ï¼ˆ128X64ï¼‰</li><li>çƒ­é˜µåˆ—ä¼ æ„Ÿå™¨</li></ul>\n<h1><a id=\"3__36\"></a>3 å®ç°æ•ˆæœ</h1>\n<p><strong>æˆå“å±•ç¤º</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\30a1a974c995450fb3b43145314b597d.png\" width=\"500\"/></p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/a1eeef34bf5d400caa5a57325c7e6aeb.gif#pic_center\" width=\"600\"/></p>\n<h1><a id=\"4__44\"></a>4 è®¾è®¡åŸç†</h1>\n<p><strong>PIRä¼ æ„Ÿå™¨ï¼š</strong></p>\n<p>PIRä¼ æ„Ÿå™¨ï¼šä¸€ç§ç”µå­ä¼ æ„Ÿå™¨ï¼Œæµ‹é‡ä»å…¶è§†é‡å†…çš„ç‰©ä½“è¾å°„çš„çº¢å¤–(IR)å…‰ã€‚æœ€å¸¸ç”¨äºåŸºäºPIRçš„è¿åŠ¨æ£€æµ‹å™¨ã€‚æ‰€æœ‰æ¸©åº¦é«˜äºç»å¯¹é›¶åº¦çš„ç‰©ä½“éƒ½ä¼šä»¥è¾å°„çš„å½¢å¼æ”¾å‡ºçƒ­èƒ½ï¼Œé€šå¸¸è¿™ç§è¾å°„å¯¹äººçœ¼æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œå› ä¸ºå®ƒæ˜¯ä»¥çº¢å¤–æ³¢é•¿è¾å°„ï¼Œä½†å®ƒå¯ä»¥è¢«ä¸ºæ­¤ç›®çš„è®¾è®¡çš„ç”µå­è®¾å¤‡æ£€æµ‹åˆ°ã€‚</p>\n<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ¯è¯­â€œæ— æºâ€æŒ‡çš„æ˜¯è¿™æ ·ä¸€ä¸ªäº‹å®ï¼Œå³PIRè®¾å¤‡ä¸äº§ç”Ÿæˆ–è¾å°„ç”¨äºæ£€æµ‹ç›®çš„çš„èƒ½é‡ã€‚å®ƒä»¬å®Œå…¨é€šè¿‡æ¢æµ‹ç‰©ä½“å‘å°„æˆ–åå°„çš„çº¢å¤–è¾å°„æ¥å·¥ä½œï¼Œå®ƒä»¬ä¸èƒ½æ¢æµ‹æˆ–æµ‹é‡çƒ­é‡ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\25e1a9c1a90e43d6b7b4c51fe90884fa.png\"/><br/> <strong>TPA81ï¼š</strong></p>\n<p>çƒ­ç”µå †é˜µåˆ—ï¼Œæ£€æµ‹2å¾®ç±³~22å¾®ç±³å†…çš„çº¢å¤–çº¿ï¼ˆè¾å°„çƒ­çš„æ³¢é•¿ï¼‰<br/> åŒæ—¶æµ‹é‡8ä¸ªç›¸é‚»ç‚¹çš„æ¸©åº¦<br/> æ§åˆ¶ä¼ºæœç³»ç»Ÿæ¥å¹³ç§»æ¨¡å—å¹¶å»ºç«‹çƒ­æˆåƒ<br/> æ£€æµ‹2ç±³(6è‹±å°º)èŒƒå›´å†…çš„èœ¡çƒ›ç«ç„°ï¼Œä¸å—ç¯å¢ƒå…‰å½±å“<br/> Arduino IDE</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\61fe8879d46646edb3101718f853becb.png\"/><br/> <strong>ç”µè·¯å›¾ï¼š</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\de6f04a822fe44c1a21f094e7e4be18f.png\"/><br/> å¦‚æœæƒ³ä½¿ç”¨8ä¸ªPIRä¼ æ„Ÿå™¨ï¼Œåº”å°†8ä¸ªå•ä¸ªPIRä¼ æ„Ÿå™¨è¿æ¥åˆ°Arduinoæ¿ä¸Šï¼Œå¹¶é€ä¸ªè¯»å–å®ƒä»¬<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\58a970b6eb6143c18bbd25395bf1f6b9.png\"/><br/> <strong>è½¯ä»¶éƒ¨åˆ†</strong></p>\n<p>è¿è¡ŒArduinoæ¿æ­¥éª¤ï¼š</p>\n<ul><li>åœ¨www.arduino.cc/en/Main/Softwareä¸‹è½½æ“ä½œç³»ç»Ÿè½¯ä»¶ï¼Œå¹¶æŒ‰ç…§è¯´æ˜å®‰è£…é›†æˆå¼€å‘ç¯å¢ƒè½¯ä»¶</li><li>è¿è¡ŒArduino IDEï¼Œæ¸…é™¤æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨æ–‡æœ¬ç¼–è¾‘å™¨ä¸­å¤åˆ¶ä¸‹é¢çš„ä»£ç </li><li>å¯¼èˆªè‡³è‰å›¾å¹¶åŒ…å«åº“(ä»ä»¥ä¸‹é“¾æ¥ä¸‹è½½åº“)ï¼Œç‚¹å‡»æ·»åŠ å‹ç¼©åº“å¹¶æ·»åŠ åº“</li><li>åœ¨å·¥å…·å’Œç”µè·¯æ¿ä¸­é€‰æ‹©ç”µè·¯æ¿ï¼Œé€‰æ‹©Arduino Nano</li><li>å°†Arduinoè¿æ¥åˆ°ç”µè„‘ï¼Œå¹¶åœ¨å·¥å…·å’Œç«¯å£ä¸­è®¾ç½®é€šè®¯ç«¯å£</li><li>æŒ‰ä¸Šä¼ (ç®­å¤´ç¬¦å·)æŒ‰é’®</li></ul>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\2b5b4417ef5347ef9075ac46a6e928b6.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\cf8b93d1faa8425fbe8991ba02d802d5.png\"/><br/> è¿è¡Œæ­¤ä»£ç åï¼Œåœ¨ Arduino IDE ä¸­æ‰“å¼€ä¸²è¡Œç»ˆç«¯å¹¶æŸ¥çœ‹ TPA81 æ„Ÿåº”åˆ°çš„ 8 é˜µåˆ—æ¸©åº¦ã€‚æ¯è¡Œçš„ç¬¬ä¸€ä¸ªæ•°å­—å±äºæ€»æ¸©åº¦ã€‚</p>\n<p>è¦æ‰‹åŠ¨å®šä¹‰æ‰‹åŠ¿ï¼Œéœ€çŸ¥é“æ‰‹éƒ¨æ¸©åº¦ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºåç§»é‡ã€‚</p>\n<p>å°†åç§»é‡è®¾ç½®ä¸º 29 åº¦ï¼Œä¸Šä¼ ä»¥ä¸‹ä¸€ä»£ç æŸ¥çœ‹åœ¨ TPA81 å‰çš„æ‰‹éƒ¨åŠ¨ä½œã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\a804a6edaed241a9ab3b77de7c4ea168.png\"/></p>\n<h1><a id=\"5__86\"></a>5 éƒ¨åˆ†æ ¸å¿ƒä»£ç </h1>\n<pre><code class=\"prism language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Wire.h&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;TPA81.h&gt;</span></span>\n\n<span class=\"token comment\">// Create new TPA81 instance</span>\nTPA81 tpa<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">9600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// You need to begin the Wire library to use TPA81 library</span>\n  Wire<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// Print temperature light</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>tpa<span class=\"token punctuation\">.</span><span class=\"token function\">getAmbient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Print all temperature point</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>tpa<span class=\"token punctuation\">.</span><span class=\"token function\">getPoint</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<pre><code class=\"prism language-c\"><span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> Signal816<span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span> <span class=\"token comment\">//mobie signal</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0xFE</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x92</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x0A</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x54</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x2A</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x38</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x12</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x12</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x12</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xAA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x12</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xAA</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> Msg816<span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span>  <span class=\"token comment\">//message</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0x1F</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xF8</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x10</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x08</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x18</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x18</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x14</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x28</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x13</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xC8</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x10</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x08</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x10</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x08</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x1F</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xF8</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> Bat816<span class=\"token punctuation\">[</span><span class=\"token number\">16</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span> <span class=\"token comment\">//batery</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0x0F</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xFE</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x26</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xDA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x26</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xDA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x26</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xDA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x26</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xDA</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x30</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x02</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x0F</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xFE</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> Bluetooth88<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span> <span class=\"token comment\">// bluetooth</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0x18</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x54</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x32</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x1C</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x1C</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x32</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x54</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x18</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> GPRS88<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span> <span class=\"token comment\">//GPRS</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0xC3</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x99</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x24</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x20</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x2C</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x24</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x99</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xC3</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> Alarm88<span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span> PROGMEM <span class=\"token operator\">=</span> <span class=\"token comment\">//alram</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">0xC3</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xBD</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x42</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x52</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x4E</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x42</span><span class=\"token punctuation\">,</span><span class=\"token number\">0x3C</span><span class=\"token punctuation\">,</span><span class=\"token number\">0xC3</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> cmd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_DC<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">SPIWrite</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>cmd<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SPIWrite</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> <span class=\"token operator\">*</span>buffer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> bufferLength<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> bufferLength<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        SPI<span class=\"token punctuation\">.</span><span class=\"token function\">transfer</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>OLED_RST<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>OLED_DC<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>OLED_CS<span class=\"token punctuation\">,</span> OUTPUT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    SPI<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    SPI<span class=\"token punctuation\">.</span><span class=\"token function\">setClockDivider</span><span class=\"token punctuation\">(</span>SPI_CLOCK_DIV128<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_CS<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_RST<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_RST<span class=\"token punctuation\">,</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_RST<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_DISPLAYOFF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETDISPLAYCLOCKDIV<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                              <span class=\"token comment\">// the suggested ratio 0x80</span>\n    \n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETMULTIPLEX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x3F</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETDISPLAYOFFSET<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                               <span class=\"token comment\">// no offset</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETSTARTLINE <span class=\"token operator\">|</span> <span class=\"token number\">0x0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// line #0</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_CHARGEPUMP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>VCCSTATE <span class=\"token operator\">==</span> SSD1306_EXTERNALVCC<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">0x10</span> <span class=\"token operator\">:</span> <span class=\"token number\">0x14</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_MEMORYMODE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x00</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                              <span class=\"token comment\">// 0x0 act like ks0108</span>\n    \n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SEGREMAP <span class=\"token operator\">|</span> <span class=\"token number\">0x1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_COMSCANDEC<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETCOMPINS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// TODO - calculate based on _rawHieght ?</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETCONTRAST<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>VCCSTATE <span class=\"token operator\">==</span> SSD1306_EXTERNALVCC<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">0x9F</span> <span class=\"token operator\">:</span> <span class=\"token number\">0xCF</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETPRECHARGE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>VCCSTATE <span class=\"token operator\">==</span> SSD1306_EXTERNALVCC<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">0x22</span> <span class=\"token operator\">:</span> <span class=\"token number\">0xF1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_SETVCOMDETECT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0x40</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_DISPLAYALLON_RESUME<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_NORMALDISPLAY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_DISPLAYON<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_clear</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;</span> WIDTH <span class=\"token operator\">*</span> HEIGHT <span class=\"token operator\">/</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\tbuffer<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> y<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> color<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">&gt;</span> WIDTH <span class=\"token operator\">||</span> y <span class=\"token operator\">&gt;</span> HEIGHT<span class=\"token punctuation\">)</span><span class=\"token keyword\">return</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span>\n        buffer<span class=\"token punctuation\">[</span>x<span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>y<span class=\"token operator\">/</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>WIDTH<span class=\"token punctuation\">]</span> <span class=\"token operator\">|=</span> <span class=\"token number\">1</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token punctuation\">(</span>y<span class=\"token operator\">%</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">else</span>\n        buffer<span class=\"token punctuation\">[</span>x<span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>y<span class=\"token operator\">/</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>WIDTH<span class=\"token punctuation\">]</span> <span class=\"token operator\">&amp;=</span> <span class=\"token operator\">~</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">&lt;&lt;</span><span class=\"token punctuation\">(</span>y<span class=\"token operator\">%</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_char1616</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> x<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> y<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> chChar<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token class-name\">uint8_t</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">;</span>\n\t<span class=\"token class-name\">uint8_t</span> chTemp <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y0 <span class=\"token operator\">=</span> y<span class=\"token punctuation\">,</span> chMode <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">32</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\tchTemp <span class=\"token operator\">=</span> <span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font1612<span class=\"token punctuation\">[</span>chChar <span class=\"token operator\">-</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\tchMode <span class=\"token operator\">=</span> chTemp <span class=\"token operator\">&amp;</span> <span class=\"token number\">0x80</span><span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n\t\t\t<span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> chMode<span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tchTemp <span class=\"token operator\">&lt;&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t\ty<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>y <span class=\"token operator\">-</span> y0<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">16</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\ty <span class=\"token operator\">=</span> y0<span class=\"token punctuation\">;</span>\n\t\t\t\tx<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_char</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> y<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> acsii<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> size<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> mode<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">,</span> y0<span class=\"token operator\">=</span>y<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">char</span> temp<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">char</span> ch <span class=\"token operator\">=</span> acsii <span class=\"token operator\">-</span> <span class=\"token char\">' '</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span>size<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>size <span class=\"token operator\">==</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>mode<span class=\"token punctuation\">)</span>temp <span class=\"token operator\">=</span> <span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font1206<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> temp <span class=\"token operator\">=</span> <span class=\"token operator\">~</span><span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font1206<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> \n        <span class=\"token punctuation\">{<!-- --></span>            \n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>mode<span class=\"token punctuation\">)</span>temp <span class=\"token operator\">=</span> <span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font1608<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> temp <span class=\"token operator\">=</span> <span class=\"token operator\">~</span><span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font1608<span class=\"token punctuation\">[</span>ch<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;</span><span class=\"token number\">8</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>temp <span class=\"token operator\">&amp;</span> <span class=\"token number\">0x80</span><span class=\"token punctuation\">)</span> <span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> <span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            temp <span class=\"token operator\">&lt;&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>y<span class=\"token operator\">-</span>y0<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> size<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">{<!-- --></span>\n                y <span class=\"token operator\">=</span> y0<span class=\"token punctuation\">;</span>\n                x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_string</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> x<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> y<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>pString<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> Size<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> Mode<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>pString <span class=\"token operator\">!=</span> <span class=\"token char\">'\\0'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>       \n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>x <span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>WIDTH <span class=\"token operator\">-</span> Size <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            y <span class=\"token operator\">+=</span> Size<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>y <span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>HEIGHT <span class=\"token operator\">-</span> Size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n                y <span class=\"token operator\">=</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        \n        <span class=\"token function\">SSD1306_char</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>pString<span class=\"token punctuation\">,</span> Size<span class=\"token punctuation\">,</span> Mode<span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        x <span class=\"token operator\">+=</span> Size <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        pString<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_char3216</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> x<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> y<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> chChar<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">uint8_t</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">uint8_t</span> chTemp <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> y0 <span class=\"token operator\">=</span> y<span class=\"token punctuation\">,</span> chMode <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">64</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        chTemp <span class=\"token operator\">=</span> <span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>Font3216<span class=\"token punctuation\">[</span>chChar <span class=\"token operator\">-</span> <span class=\"token number\">0x30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            chMode <span class=\"token operator\">=</span> chTemp <span class=\"token operator\">&amp;</span> <span class=\"token number\">0x80</span><span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> \n            <span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> chMode<span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            chTemp <span class=\"token operator\">&lt;&lt;=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n            y<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>y <span class=\"token operator\">-</span> y0<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n                y <span class=\"token operator\">=</span> y0<span class=\"token punctuation\">;</span>\n                x<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_bitmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> x<span class=\"token punctuation\">,</span><span class=\"token class-name\">uint8_t</span> y<span class=\"token punctuation\">,</span><span class=\"token keyword\">const</span> <span class=\"token class-name\">uint8_t</span> <span class=\"token operator\">*</span>pBmp<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> chWidth<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span> chHeight<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token class-name\">uint8_t</span> i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">,</span> byteWidth <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>chWidth <span class=\"token operator\">+</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">8</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j <span class=\"token operator\">&lt;</span> chHeight<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i <span class=\"token operator\">&lt;</span>chWidth<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">pgm_read_byte</span><span class=\"token punctuation\">(</span>pBmp <span class=\"token operator\">+</span> j <span class=\"token operator\">*</span> byteWidth <span class=\"token operator\">+</span> i <span class=\"token operator\">/</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token number\">128</span> <span class=\"token operator\">&gt;&gt;</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">&amp;</span> <span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t<span class=\"token function\">SSD1306_pixel</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span>y <span class=\"token operator\">+</span> j<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> buffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\t\t\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">SSD1306_display</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> buffer<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_COLUMNADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">//cloumn start address</span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span>WIDTH <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//cloumn end address</span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span>SSD1306_PAGEADDR<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">//page atart address</span>\n\t<span class=\"token function\">command</span><span class=\"token punctuation\">(</span>PAGES <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//page end address</span>\n    <span class=\"token function\">digitalWrite</span><span class=\"token punctuation\">(</span>OLED_DC<span class=\"token punctuation\">,</span> HIGH<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">SPIWrite</span><span class=\"token punctuation\">(</span>buffer<span class=\"token punctuation\">,</span> WIDTH <span class=\"token operator\">*</span> HEIGHT <span class=\"token operator\">/</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<br/>\n<h1><a id=\"5__350\"></a>5 æœ€å</h1>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-08-30 09:37:20", "summary": "æ–‡ç« ç›®å½•å‰è¨€ç®€ä»‹ä¸»è¦å™¨ä»¶å®ç°æ•ˆæœè®¾è®¡åŸç†éƒ¨åˆ†æ ¸å¿ƒä»£ç æœ€åå‰è¨€è¿™ä¸¤å¹´å¼€å§‹æ¯•ä¸šè®¾è®¡å’Œæ¯•ä¸šç­”è¾©çš„è¦æ±‚å’Œéš¾åº¦ä¸æ–­æå‡ï¼Œä¼ ç»Ÿçš„æ¯•è®¾é¢˜ç›®ç¼ºå°‘åˆ›æ–°å’Œäº®ç‚¹ï¼Œå¾€å¾€è¾¾ä¸åˆ°æ¯•ä¸šç­”è¾©çš„è¦æ±‚ï¼Œè¿™ä¸¤å¹´ä¸æ–­æœ‰å­¦å¼Ÿå­¦å¦¹å‘Šè¯‰å­¦é•¿è‡ªå·±åš"}