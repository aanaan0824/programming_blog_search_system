{"blogid": "126089154", "writerAge": "码龄2年", "writerBlogNum": "58", "writerCollect": "1403", "writerComment": "1849", "writerFan": "2917", "writerGrade": "6级", "writerIntegral": "4705", "writerName": "风铃听雨~", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126089154.jpg", "writerRankTotal": "3568", "writerRankWeekly": "54", "writerThumb": "1637", "writerVisitNum": "137662", "blog_read_count": "2279", "blog_time": "已于 2022-08-04 08:56:53 修改", "blog_title": "一篇永久摆脱Mysql时区错误问题，idea数据库可视化插件配置", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_0\"></a>项目场景：</h1>\n<blockquote>\n<p>今天在做项目的时候遇到一个关于<code>mysql时区</code>的问题，在这里汇总记录一下解决过程，希望可以帮助到有需要的人。</p>\n</blockquote>\n<hr/>\n<h1><a id=\"_7\"></a>问题描述</h1>\n<blockquote>\n<p>在做项目的时候突然遇到以下的报错，可以看到是说 <code>数据库的时区错误</code>，这里使用的是Mysql 8.0.15数据库。<br/> 这里试用了idea提供的数据库可视化插件。<br/> 以下报错使得无法访问数据库。</p>\n</blockquote>\n<pre><code class=\"prism language-java\"><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>exceptions<span class=\"token punctuation\">.</span></span>PersistenceException</span><span class=\"token operator\">:</span> \n### <span class=\"token class-name\">Error</span> querying <span class=\"token class-name\"><span class=\"token namespace\">database<span class=\"token punctuation\">.</span></span>  Cause</span><span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>SQLException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">The</span> server time zone value 'ÖÐ¹ú±ê×¼Ê±¼ä' is unrecognized or represents more than one time <span class=\"token class-name\"><span class=\"token namespace\">zone<span class=\"token punctuation\">.</span></span> You</span> must configure either the server or <span class=\"token class-name\">JDBC</span> driver <span class=\"token punctuation\">(</span>via the serverTimezone configuration property<span class=\"token punctuation\">)</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">use</span> a more specifc time zone value <span class=\"token keyword\">if</span> you want <span class=\"token keyword\">to</span> <span class=\"token namespace\">utilize</span> time zone support<span class=\"token punctuation\">.</span>\n### <span class=\"token class-name\">The</span> error may exist in <span class=\"token class-name\">StudentMapper</span><span class=\"token punctuation\">.</span>xml\n### <span class=\"token class-name\">The</span> error may involve ll<span class=\"token punctuation\">.</span>getAll\n### <span class=\"token class-name\">The</span> error occurred <span class=\"token keyword\">while</span> executing a query\n### <span class=\"token class-name\">Cause</span><span class=\"token operator\">:</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>SQLException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">The</span> server time zone value 'ÖÐ¹ú±ê×¼Ê±¼ä' is unrecognized or represents more than one time <span class=\"token class-name\"><span class=\"token namespace\">zone<span class=\"token punctuation\">.</span></span> You</span> must configure either the server or <span class=\"token class-name\">JDBC</span> driver <span class=\"token punctuation\">(</span>via the serverTimezone configuration property<span class=\"token punctuation\">)</span> <span class=\"token keyword\">to</span> <span class=\"token namespace\">use</span> a more specifc time zone value <span class=\"token keyword\">if</span> you want <span class=\"token keyword\">to</span> <span class=\"token namespace\">utilize</span> time zone support<span class=\"token punctuation\">.</span>\n</code></pre>\n<hr/>\n<h1><a id=\"_23\"></a>原因分析</h1>\n<blockquote>\n<p>这里首先考虑是数据库本身的默认时区设置的问题，<br/> 其次考虑在设置idea数据库可视化插件连接的时候的时区的设置问题</p>\n</blockquote>\n<hr/>\n<h1><a id=\"_31\"></a>解决方案：</h1>\n<p>通过以下步骤解决了此问题：<br/> 打开命令窗口，进入mysql服务：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\726bfc733b22433abf33f97058aef44a.png\"/><br/> 接着查询时区：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">\"%time_zone%\"</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7658e5d000d74ee4b3b7aa06149ea947.png\"/><br/> <code>这里显示SYSTEM表示跟随系统，一般情况下是没有问题的，但是偶尔也会出现问题，这里我们就直接更改成'+8:00'</code></p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> time_zone<span class=\"token operator\">=</span><span class=\"token string\">'+08:00'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>注意：这只是临时修改，重启mysql服务后就会失效</strong></p>\n<blockquote>\n<p>下面介绍永久修改：<br/> 永久的修改：修改mysql的配置文件my.ini，添加：default-time-zone=’+08:00’，重启mysql生效,注意一定要在 [mysqld] 之下加 ，否则会出现 unknown variable ‘default-time-zone=+8:00’</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\720e660958db4b319b94bbc9160ae33b.png\"/><br/> <strong>接下来再去idea里面测试一下。<br/> 发现结果还是报错，那么据考虑是idea数据库可视化插件的链接配置问题。</strong></p>\n<blockquote>\n<p>接下来修改idea数据库可视化插件配置：</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\aca821fa440e48f19856acc173e40ab9.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5b784a774e0b4543a768e974ef10f937.png\"/><br/> <strong>在这里加上时区’+8:00’,进行测试。完美解决。</strong></p>\n<h1><a id=\"_60\"></a>总结</h1>\n<blockquote>\n<p>问题不大，但也着实头疼，一次性解决不很完美。<br/> 有帮助的小伙伴来个三连吧！！！</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 1, "php": 0, "time": "2022-08-04 08:56:53", "summary": "项目场景：今天在做项目的时候遇到一个关于时区的问题，在这里汇总记录一下解决过程，希望可以帮助到有需要的人。问题描述在做项目的时候突然遇到以下的报错，可以看到是说数据库的时区错误，这里使用的是数据库。这"}