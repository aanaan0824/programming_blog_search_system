{"blogid": "126742510", "writerAge": "ç é¾„14å¹´", "writerBlogNum": "131", "writerCollect": "391", "writerComment": "26", "writerFan": "3767", "writerGrade": "5çº§", "writerIntegral": "3082", "writerName": "ç¨‹åºä¹‹å·…", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126742510.jpg", "writerRankTotal": "17136", "writerRankWeekly": "4364", "writerThumb": "105", "writerVisitNum": "393154", "blog_read_count": "20", "blog_time": "å·²äºÂ 2022-09-07 12:01:15Â ä¿®æ”¹", "blog_title": "Pyinstallerç”Ÿæˆçš„exeç¨‹åºï¼Œè¿è¡Œæ—¶æ‰¾ä¸åˆ°è‡ªå®šä¹‰æ¨¡å—", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>é—®é¢˜æè¿°</strong><br/> ä»Šæ—¥ç”¨pyinstallerç”Ÿæˆäº†ä¸€ä¸ªexeæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ä¸€ç›´å‡ºç°ModuleNotFoundError: No module named 'modelsâ€™é”™è¯¯ã€‚</p>\n<pre><code class=\"prism language-python\"><span class=\"token punctuation\">(</span>maskrcnn_yolov5<span class=\"token punctuation\">)</span> D<span class=\"token punctuation\">:</span>\\project\\cell_experts\\dist\\experts<span class=\"token operator\">&gt;</span>experts<span class=\"token punctuation\">.</span>exe\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  File <span class=\"token string\">\"experts.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">9</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">&gt;</span>\n  File <span class=\"token string\">\"PyInstaller\\loader\\pyimod03_importers.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">495</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> exec_module\n  File <span class=\"token string\">\"cell_detection\\cell_detector_batches.py\"</span><span class=\"token punctuation\">,</span> line <span class=\"token number\">19</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&lt;</span>module<span class=\"token operator\">&gt;</span>\nModuleNotFoundError<span class=\"token punctuation\">:</span> No module named <span class=\"token string\">'models'</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">138248</span><span class=\"token punctuation\">]</span> Failed to execute script <span class=\"token string\">'experts'</span> due to unhandled exception!\n</code></pre>\n<p>æˆ‘çš„é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<pre><code class=\"prism language-python\"><span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>cell_experts\n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">|</span>cell_detection\n                    <span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>models\n                    <span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>utils\n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">|</span>cell_analyser\n</code></pre>\n<p>cell_detector_batches.pyçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\">#  -*- coding:  utf-8  -*-</span>\n<span class=\"token comment\"># YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license</span>\n<span class=\"token keyword\">import</span> argparse\n<span class=\"token keyword\">import</span> sys\n<span class=\"token keyword\">from</span> pathlib <span class=\"token keyword\">import</span> Path\n<span class=\"token keyword\">import</span> time<span class=\"token punctuation\">,</span> os\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> math\n<span class=\"token keyword\">import</span> cv2\n<span class=\"token keyword\">import</span> torch\n<span class=\"token keyword\">import</span> json\n\nFILE <span class=\"token operator\">=</span> Path<span class=\"token punctuation\">(</span>__file__<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nROOT <span class=\"token operator\">=</span> FILE<span class=\"token punctuation\">.</span>parents<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># YOLOv5 root directory</span>\n<span class=\"token keyword\">if</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>ROOT<span class=\"token punctuation\">)</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">:</span>\n    sys<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>ROOT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># add ROOT to PATH</span>\nROOT <span class=\"token operator\">=</span> Path<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>relpath<span class=\"token punctuation\">(</span>ROOT<span class=\"token punctuation\">,</span> Path<span class=\"token punctuation\">.</span>cwd<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># relative</span>\n\n<span class=\"token keyword\">from</span> models<span class=\"token punctuation\">.</span>common <span class=\"token keyword\">import</span> DetectMultiBackend\n<span class=\"token keyword\">from</span> utils<span class=\"token punctuation\">.</span>general <span class=\"token keyword\">import</span> <span class=\"token punctuation\">(</span>LOGGER<span class=\"token punctuation\">,</span> check_img_size<span class=\"token punctuation\">,</span> check_requirements<span class=\"token punctuation\">,</span>\n                           increment_path<span class=\"token punctuation\">,</span> non_max_suppression<span class=\"token punctuation\">,</span>nms_double<span class=\"token punctuation\">,</span> print_args<span class=\"token punctuation\">,</span> scale_coords<span class=\"token punctuation\">,</span> strip_optimizer<span class=\"token punctuation\">,</span> xyxy2xywh<span class=\"token punctuation\">,</span>cell_classifier<span class=\"token punctuation\">,</span>correct_axis<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">from</span> utils<span class=\"token punctuation\">.</span>torch_utils <span class=\"token keyword\">import</span> select_device\n</code></pre>\n<p>ä½¿ç”¨çš„exeç”Ÿæˆçš„å‘½ä»¤ï¼š</p>\n<pre><code class=\"prism language-python\">pyinstaller <span class=\"token operator\">-</span>D experts<span class=\"token punctuation\">.</span>py\n</code></pre>\n<p><strong>é—®é¢˜äº§ç”ŸåŸå› </strong><br/> PyInstaller è¯»å–æ‚¨ç¼–å†™çš„ Python è„šæœ¬ã€‚å®ƒåˆ†ææ‚¨çš„ä»£ç ä»¥å‘ç°è„šæœ¬æ‰§è¡Œæ‰€éœ€çš„æ‰€æœ‰å…¶ä»–æ¨¡å—å’Œåº“ã€‚ç„¶åå®ƒæ”¶é›†æ‰€æœ‰è¿™äº›æ–‡ä»¶çš„å‰¯æœ¬â€”â€”åŒ…æ‹¬æ´»åŠ¨çš„ Python è§£é‡Šå™¨ï¼ â€“ å¹¶å°†å®ƒä»¬ä¸æ‚¨çš„è„šæœ¬æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ–è€…å¯é€‰åœ°æ”¾åœ¨ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>\n<p>PyInstaller ä¼šåœ¨æ‚¨çš„è„šæœ¬ä¸­æŸ¥æ‰¾æ‰€æœ‰importè¯­å¥ã€‚å®ƒæ‰¾åˆ°å¯¼å…¥çš„æ¨¡å—å¹¶åœ¨å…¶ä¸­æŸ¥æ‰¾å¯¼å…¥è¯­å¥ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å®ƒæ‹¥æœ‰æ‚¨çš„è„šæœ¬å¯èƒ½ä½¿ç”¨çš„æ¨¡å—çš„å®Œæ•´åˆ—è¡¨ã€‚</p>\n<p>ä¸€äº› Python è„šæœ¬ä»¥ PyInstaller æ— æ³•æ£€æµ‹åˆ°çš„æ–¹å¼å¯¼å…¥æ¨¡å—ï¼šä¾‹å¦‚ï¼Œé€šè¿‡ä½¿ç”¨å¸¦æœ‰å¯å˜æ•°æ®çš„ <strong>import</strong>() å‡½æ•°ã€ä½¿ç”¨ importlib.import_module() æˆ–åœ¨è¿è¡Œæ—¶æ“ä½œ sys.path å€¼ã€‚å¦‚æœä½ çš„è„šæœ¬éœ€è¦ PyInstaller ä¸çŸ¥é“çš„æ–‡ä»¶ï¼Œä½ å¿…é¡»å¸®åŠ©å®ƒï¼š</p>\n<ul><li>æ‚¨å¯ä»¥åœ¨ pyinstaller å‘½ä»¤è¡Œä¸Šæä¾›å…¶ä»–æ–‡ä»¶ã€‚</li><li>æ‚¨å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šæä¾›å…¶ä»–å¯¼å…¥è·¯å¾„ã€‚</li><li>æ‚¨å¯ä»¥ç¼–è¾‘ PyInstaller ç¬¬ä¸€æ¬¡ä¸ºæ‚¨çš„è„šæœ¬è¿è¡Œå®ƒæ—¶ç¼–å†™çš„ myscript.spec æ–‡ä»¶ã€‚åœ¨è§„èŒƒæ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥å‘Šè¯‰<br/> PyInstaller æ‚¨çš„è„šæœ¬ç‹¬æœ‰çš„ä»£ç æ¨¡å—ã€‚</li><li>æ‚¨å¯ä»¥ç¼–å†™é€šçŸ¥ PyInstaller éšè—å¯¼å…¥çš„â€œæŒ‚é’©â€æ–‡ä»¶ã€‚å¦‚æœæ‚¨ä¸ºå…¶ä»–ç”¨æˆ·ä¹Ÿå¯èƒ½ä½¿ç”¨çš„åŒ…åˆ›å»ºâ€œæŒ‚é’©â€ï¼Œæ‚¨å¯ä»¥å°†æŒ‚é’©æ–‡ä»¶è´¡çŒ®ç»™<br/> PyInstallerã€‚</li></ul>\n<p><strong>è§£å†³æ–¹æ³•</strong></p>\n<pre><code class=\"prism language-python\">pyinstaller <span class=\"token operator\">-</span><span class=\"token operator\">-</span>paths<span class=\"token operator\">=</span>D<span class=\"token punctuation\">:</span>\\project\\cell_experts\\cell_detection <span class=\"token operator\">-</span><span class=\"token operator\">-</span>paths<span class=\"token operator\">=</span>D<span class=\"token punctuation\">:</span>\\project\\cell_experts\\cell_analyser <span class=\"token operator\">-</span>D experts<span class=\"token punctuation\">.</span>py\n</code></pre>\n<p>åŒç±»è§£å†³æ–¹æ³•ï¼š<br/> <a href=\"https://stackoverflow.com/questions/32093559/exe-file-created-by-pyinstaller-not-find-self-defined-modules-while-running\">https://stackoverflow.com/questions/32093559/exe-file-created-by-pyinstaller-not-find-self-defined-modules-while-running</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-07 12:01:15", "summary": "é—®é¢˜æè¿°ä»Šæ—¥ç”¨ç”Ÿæˆäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿è¡Œæ—¶ä¸€ç›´å‡ºç°é”™è¯¯ã€‚æˆ‘çš„é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼šçš„ä»£ç å¦‚ä¸‹æ‰€ç¤ºä¾‹ï¼š"}