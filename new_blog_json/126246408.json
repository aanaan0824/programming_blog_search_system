{"blogid": "126246408", "writerAge": "码龄1年", "writerBlogNum": "78", "writerCollect": "2005", "writerComment": "2718", "writerFan": "2036", "writerGrade": "6级", "writerIntegral": "5870", "writerName": "SYFStrive", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126246408.jpg", "writerRankTotal": "2738", "writerRankWeekly": "40", "writerThumb": "2142", "writerVisitNum": "42154", "blog_read_count": "773", "blog_time": "已于 2022-08-30 13:18:37 修改", "blog_title": "Python爬虫之Scrapy框架（案例练习）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/154d035aa4db42df99f3b01fbf287e46.gif#pic_center\"/></p>\n<blockquote>\n<p><strong>@作者</strong> : <font color=\"#409EFF\"><strong>SYFStrive</strong></font><br/> <strong>@创建时间</strong> : <font color=\"#409EFF\"><strong>2022/8/9 22:01</strong></font><br/> 📜： <font color=\"#009688\"><strong>Scrapy案例</strong></font><br/> 🥧： <a href=\"https://blog.csdn.net/m0_61490399/article/details/126242058\"><font color=\"#0096ed\"><strong>点击跳转到上一篇Scrapy续文</strong></font></a>🦄<br/> 🥧： <strong>感谢支持,学习累了可以先看小段由小胖给大家带来的街舞😀</strong><br/> <img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/2c353ec3abfe4f1d9980da9ac6becd57.gif#pic_center\"/><br/> <img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/1a8e166d911442018cd6dac77a52cfb6.gif#pic_center\"/></p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><a href=\"#_12\">简介</a></li><li><ul><li><a href=\"#Scrapy_17\">📦Scrapy使用前准备</a></li><li><a href=\"#yield_25\">yield的使用</a></li><li><a href=\"#PythonScrapy_30\">Python爬虫之Scrapy框架之🔔🔔爬取数据</a></li><li><ul><li><a href=\"#get_31\">get</a></li><li><a href=\"#_32\">案例使用的内容</a></li><li><a href=\"#_35\">单管道</a></li><li><a href=\"#_41\">多管道（单独使用一个管道下载图片……）</a></li><li><a href=\"#_100_50\">实现多页面下载 （爬取100页内容）</a></li><li><a href=\"#_60\">案例总结</a></li><li><a href=\"#post_77\">post</a></li></ul>\n</li><li><a href=\"#PythonScrapy_86\">Python爬虫之Scrapy框架之🎦爬取数据</a></li></ul>\n</li><li><a href=\"#_113\">最后</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_12\"></a>简介</h1>\n<ol><li>Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。 其最初是为了页面抓取 (更确切来说, 网络抓取 )所设计的， 也可以应用在获取API所返回的数据 (例如 Amazon Associates Web Services ) 或者通用的网络爬虫。</li><li>Scrapy 是一个基于 Twisted 实现的异步处理爬虫框架，该框架使用纯 Python 语言编写。Scrapy 框架应用广泛，常用于数据采集、网络监测，以及自动化测试等。</li><li>提示：Twisted 是一个基于事件驱动的网络引擎框架，同样采用 Python 实现。</li></ol>\n<h2><a id=\"Scrapy_17\"></a>📦Scrapy使用前准备</h2>\n<ul><li>文档如👇</li></ul>\n<ol><li>官网文档：<a href=\"https://requests.readthedocs.io/projects/cn/zh_CN/latest/\">链接</a></li><li>C语言中文文档：<a href=\"http://c.biancheng.net/python_spider/scrapy.html\">链接</a></li></ol>\n<ul><li>安装</li></ul>\n<ol start=\"3\"><li>安装语法：python -m pip install Scrapy</li><li>报错：使用pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn 加包名</li></ol>\n<h2><a id=\"yield_25\"></a>yield的使用</h2>\n<ol><li>带有 yield 的函数不再是一个普通函数，而是一个生成器generator，可用于迭代</li><li>yield 是一个类似 return 的关键字，迭代一次遇到yield时就返回yield后面(右边)的值。重点是：下一次迭代时，从上一次迭代遇到的yield后面的代码(下一行)开始执行</li><li>简要理解：yield就是 return 返回一个值，并且记住这个返回的位置，下次迭代就从这个位置后(下一行)开始</li></ol>\n<h2><a id=\"PythonScrapy_30\"></a>Python爬虫之Scrapy框架之🔔🔔爬取数据</h2>\n<h3><a id=\"get_31\"></a>get</h3>\n<h3><a id=\"_32\"></a>案例使用的内容</h3>\n<p>涉及 单管道、多管道</p>\n<h3><a id=\"_35\"></a>单管道</h3>\n<p>📰代码演示：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6704e85f58aa4a328260f1b6273d91b7.png\"/></p>\n<h3><a id=\"_41\"></a>多管道（单独使用一个管道下载图片……）</h3>\n<p>📰代码演示：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3de10e52368b4228a5ef227d811d07d5.png\"/></p>\n<p>如下图（下载成功🆗）：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/00da822af6cd4044bc86787fb3c02362.gif\"/></p>\n<h3><a id=\"_100_50\"></a>实现多页面下载 （爬取100页内容）</h3>\n<p>📰代码演示：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c1370b712fa0476184ca268baef43cfe.png\"/></p>\n<p>如下图（下载成功🆗）：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/64e6ab3a7bd34ad6a401360fbcddb1a4.gif\"/></p>\n<h3><a id=\"_60\"></a>案例总结</h3>\n<ol><li>两个生命函数</li></ol>\n<pre><code class=\"prism language-代码\">    # 在爬虫文件开始的之前就执行的一个方法\n    # def open_spider():\n    # 在爬虫文件执行完之后  执行的方法\n    # def close_spider():\n</code></pre>\n<ol start=\"2\"><li> <p>简单步骤：获取数据后 👉 使用items 定义数据结构的 👉 导入items（传递数据） 👉 使用Yield返回 👉 通过pipelines管道下载数据（使用前要开启管道（item就是yield后面的book对象））</p> </li><li> <p>添加管道：定义管道类 👉 在settings中开启管道</p> </li><li> <p>注意：<br/> 1、如果是多页下载的话 那么必须要调整的是allowed_domains的范围 一般情况下只写域名<br/> 2、write方法必须要写一个字符串 而不能是其他的对象<br/> 3、通过该案例检测的一点就是下载的图片目录文件是spiders下的理解如：‘./bookImg/’ + item.get(‘name’) + ‘.jpg’</p> </li></ol>\n<h3><a id=\"post_77\"></a>post</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2385e8804f334f639f730612998d63e7.png\"/></p>\n<p>效果如下:</p>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/dd30d266dd0d4dc396386fa81908c443.gif\"/></p>\n<h2><a id=\"PythonScrapy_86\"></a>Python爬虫之Scrapy框架之🎦爬取数据</h2>\n<p>📰代码演示：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8e939b909157403f81e97f6137b7c208.png\"/></p>\n<p>📰代码演示：</p>\n<pre><code class=\"prism language-代码\">class DianyingtiantangPipeline:\n\n    def open_spider(self, spider):\n        self.fs = open('movie.json', 'w', encoding='utf-8')\n\n    def process_item(self, item, spider):\n        # 简单理解：这里的item相当于yield movie返回值\n        self.fs.write(str(item))\n\n        return item\n\n    def close_spider(self, spider):\n        self.fs.close()\n</code></pre>\n<p>如下图（下载成功🆗）：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/e1d1bd99390f462bb2488e42fcfe05d3.gif\"/></p>\n<h1><a id=\"_113\"></a>最后</h1>\n<p><strong>Scrapy框架还未结束（待更），觉得不错的请给我专栏点点订阅，你的支持是我们更新的动力，感谢大家的支持，希望这篇文章能帮到大家</strong></p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/m0_61490399/category_11945820.html?spm=1001.2014.3001.5482\">点击跳转到我的Python专栏</a></p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\21ab07bbc52e422090c2b819b9318958.png\"/></p>\n<p><strong>下篇文章再见ヾ(￣▽￣)Bye<sub>Bye</sub></strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dd8d5f8e512f4c778736eee95712d6b3.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-08-30 13:18:37", "summary": "请添加图片描述作者创建时间：案例：点击跳转到上一篇续文：感谢支持学习累了可以先看小段由小胖给大家带来的街舞请添加图片描述在这里插入图片描述目录简介使用前准备的使用爬虫之框架之爬取数据案例使用的内容单管"}