{"blogid": "126630018", "writerAge": "ç é¾„2å¹´", "writerBlogNum": "94", "writerCollect": "1425", "writerComment": "1059", "writerFan": "4200", "writerGrade": "5çº§", "writerIntegral": "4050", "writerName": "ç¬‘éœ¸final", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126630018.jpg", "writerRankTotal": "4247", "writerRankWeekly": "1081", "writerThumb": "1232", "writerVisitNum": "95063", "blog_read_count": "262", "blog_time": "äºÂ 2022-09-02 14:24:53Â å‘å¸ƒ", "blog_title": "çŒ¿åˆ›å¾æ–‡ | Redisä¹‹ Jediså®ä¾‹", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p><strong>å‰è¨€</strong>ï¼š<br/> ğŸ‘ä½œè€…ç®€ä»‹ï¼šæˆ‘æ˜¯ç¬‘éœ¸finalï¼Œä¸€åçƒ­çˆ±æŠ€æœ¯çš„åœ¨æ ¡å­¦ç”Ÿã€‚<br/> ğŸ“ä¸ªäººä¸»é¡µï¼š<a href=\"http://www.xbfinal.top/\">ä¸ªäººä¸»é¡µ1</a> || <a href=\"https://blog.csdn.net/weixin_52062043?type=blog\">ç¬‘éœ¸finalçš„ä¸»é¡µ2</a><br/> ğŸ“•ç³»åˆ—ä¸“æ ï¼š<a href=\"https://blog.csdn.net/weixin_52062043/category_11426712.html?spm=1001.2014.3001.5482\">æœ¬æ–‡å†™åœ¨javaä¸“æ  |</a> <a href=\"https://blog.csdn.net/weixin_52062043/category_11729781.html?spm=1001.2014.3001.5482\">| åç«¯ä¸“æ </a><br/> ğŸ“§å¦‚æœæ–‡ç« çŸ¥è¯†ç‚¹æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·æŒ‡æ­£ï¼å’Œå¤§å®¶ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥ğŸ‘€<br/> ğŸ”¥å¦‚æœæ„Ÿè§‰åšä¸»çš„æ–‡ç« è¿˜ä¸é”™çš„è¯ï¼ŒğŸ‘ç‚¹èµğŸ‘ + ğŸ‘€å…³æ³¨ğŸ‘€ + ğŸ¤æ”¶è—ğŸ¤</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>Redisä¹‹ Jedis</h3>\n<ul><li><a href=\"#Jedisjar_8\">Jedisæ‰€éœ€è¦çš„jaråŒ…</a></li><li><a href=\"#72Redis_19\">7.2.è¿æ¥Redisæ³¨æ„äº‹é¡¹</a></li><li><a href=\"#_25\">é“¾æ¥è¶…æ—¶è§£å†³æ–¹æ¡ˆ</a></li><li><a href=\"#8Jedis__52\">8.Jedis_å®ä¾‹</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"Jedisjar_8\"></a>Jedisæ‰€éœ€è¦çš„jaråŒ…</h1>\n<pre><code class=\"prism language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>redis.clients<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>jedis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">&gt;</span></span>3.2.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<h1><a id=\"72Redis_19\"></a>7.2.è¿æ¥Redisæ³¨æ„äº‹é¡¹</h1>\n<blockquote>\n<p>ç¦ç”¨Linuxçš„é˜²ç«å¢™ï¼šLinux(CentOS7)é‡Œæ‰§è¡Œå‘½ä»¤<br/> systemctl stop/disable firewalld.service<br/> redis.confä¸­æ³¨é‡Šæ‰bind 127.0.0.1 ,ç„¶å protected-mode no</p>\n</blockquote>\n<h1><a id=\"_25\"></a>é“¾æ¥è¶…æ—¶è§£å†³æ–¹æ¡ˆ</h1>\n<blockquote>\n<p><mark>1.æ³¨é‡Šæ‰ bind 127.0.0.1</mark><br/> å¯ä»¥åœ¨ vim redis.conf åè¿›å…¥æŒ‡ä»¤æ¨¡å¼ï¼ˆshift +ï¼šï¼‰<br/> ç„¶åè¾“å…¥ï¼š/å•è¯<br/> å¿«é€Ÿæ‰¾åˆ°å•è¯çš„ä½ç½®<br/> == 2.ä¿®æ”¹protected-mode==<br/> åœ¨ redis.conf ä¸­æ‰¾åˆ° protected-mode å°†åé¢çš„ yes æ”¹ä¸º no<br/> == 3.ä¿®æ”¹daemonize==<br/> åœ¨ redis.conf ä¸­æ‰¾åˆ° daemonize å°†åé¢çš„ no æ”¹ä¸º yes<br/> <mark>4.ä¿®æ”¹å¯†ç ï¼ˆrequirepass foobaredï¼‰</mark><br/> åœ¨ redis.conf ä¸­æ‰¾åˆ° requirepass foobared ï¼Œå¯åœ¨ä¸‹é¢æ·»åŠ  requirepass ä½ çš„å¯†ç <br/> æ‰§è¡Œå®Œä»¥ä¸Šæ“ä½œåè¿›å…¥æŒ‡ä»¤æ¨¡å¼ wq ä¿å­˜é€€å‡º<br/> <mark>5äº‘æœåŠ¡å™¨</mark>è®°å¾—åœ¨å®‰å…¨ç»„å¼€æ”¾ç«¯å£ æœ‰å®å¡”å¾—å®å¡”ä¹Ÿè¦å¼€æ”¾ç«¯å£</p>\n</blockquote>\n<blockquote>\n<p><mark>äºŒã€é‡å¯redis</mark><br/> 1.å…³é—­redis<br/> åœ¨ redis-cli æ‰€åœ¨çš„ç›®å½•ä¸‹è¾“å…¥ï¼š redis-cli -a å¯†ç <br/> è¿›å…¥åˆ° redis æŒ‡ä»¤æ¨¡å¼ï¼Œè¾“å…¥ï¼š shutdown<br/> ç„¶åå†è¾“å…¥ï¼š exit<br/> 2.å¯åŠ¨redis<br/> åœ¨ redis-server æ‰€åœ¨çš„ç›®å½•ä¸‹è¾“å…¥ï¼š redis-server redis.confæ‰€åœ¨ç›®å½•/redis.conf<br/> å¯ä»¥é€šè¿‡æŒ‡ä»¤ ps aux | grep redis æŸ¥çœ‹redisçŠ¶æ€<br/> å¼€æ”¾ç«¯å£ï¼š<br/> firewall-cmd --add-port=6379/tcp --permanent<br/> é‡å¯é˜²ç«å¢™ç”Ÿæ•ˆ</p>\n</blockquote>\n<h1><a id=\"8Jedis__52\"></a>8.Jedis_å®ä¾‹</h1>\n<blockquote>\n<p>è¦æ±‚ï¼š<br/> 1ã€è¾“å…¥æ‰‹æœºå·ï¼Œç‚¹å‡»å‘é€åéšæœºç”Ÿæˆ6ä½æ•°å­—ç ï¼Œ2åˆ†é’Ÿæœ‰æ•ˆ<br/> 2ã€è¾“å…¥éªŒè¯ç ï¼Œç‚¹å‡»éªŒè¯ï¼Œè¿”å›æˆåŠŸæˆ–å¤±è´¥<br/> 3ã€æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥3æ¬¡</p>\n</blockquote>\n<blockquote>\n<p>æ€è€ƒ:</p>\n<ul><li>=<mark><mark><mark><mark><mark><mark>æ€è·¯</mark></mark></mark></mark></mark></mark>==<br/> * 1.éšæœºå¯†ç å¯ä»¥ç”¨random<br/> * éªŒè¯ç 2åˆ†é’Ÿæœ‰æ•ˆå¯ä»¥æŠŠéªŒè¯ç æ”¾å…¥redis è®¾ç½®è¿‡æœŸæ—¶é—´120<br/> * 2.éªŒè¯é—®é¢˜å¯ä»¥æ¯”è¾ƒrediså’Œè¾“å…¥æ¯”è¾ƒ<br/> * 3.æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥ä¸‰æ¬¡<br/> * ç”¨incr æ¯æ¬¡å‘é€å+1 å¤§äº2æ—¶å°±ä¸èƒ½å‘é€äº†<br/> */</li></ul>\n</blockquote>\n<p><mark>ä»£ç ï¼š</mark></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>xbfinal<span class=\"token punctuation\">.</span>jedis</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">redis<span class=\"token punctuation\">.</span>clients<span class=\"token punctuation\">.</span>jedis<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Jedis</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Random</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @autor ç¬‘éœ¸fianl~\n * æ¬¢è¿è®¿é—®GitHubï¼šhttps://github.com/XBfinal\n * æ¬¢è¿è®¿é—®Giteeï¼šhttps://gitee.com/XBfianl\n * æ¬¢è¿è®¿é—®CSDNï¼šhttps://blog.csdn.net/weixin_52062043\n */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PhoneCode</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">/**\n     *  ============æ¨¡æ‹Ÿæ‰‹æœºéªŒè¯ç å‘é€========\n     *  1.è¾“å…¥æ‰‹æœºå· ç”Ÿæˆ6ä½éªŒè¯ç ï¼Œ2åˆ†é’Ÿæœ‰æ•ˆ\n     *  2.è¾“å…¥éªŒè¯ç ï¼ŒéªŒè¯\n     *  3.æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥ä¸‰æ¬¡\n     */</span>\n\n    <span class=\"token comment\">/**\n     * =============æ€è·¯==============\n     *  1.éšæœºå¯†ç å¯ä»¥ç”¨random\n     * éªŒè¯ç 2åˆ†é’Ÿæœ‰æ•ˆå¯ä»¥æŠŠéªŒè¯ç æ”¾å…¥redis è®¾ç½®è¿‡æœŸæ—¶é—´120\n     *  2.éªŒè¯é—®é¢˜å¯ä»¥æ¯”è¾ƒrediså’Œè¾“å…¥æ¯”è¾ƒ\n     *  3.æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥ä¸‰æ¬¡\n     *      ç”¨incr æ¯æ¬¡å‘é€å+1 å¤§äº2æ—¶å°±ä¸èƒ½å‘é€äº†\n     */</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç¬¬\"</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"æ¬¡æ‰§è¡Œå¾—ç»“æœï¼š\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//è¾“å…¥æ‰‹æœºå·</span>\n            <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> <span class=\"token class-name\">Code</span> <span class=\"token operator\">=</span> <span class=\"token function\">verifyCode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"13555555557\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//éªŒè¯</span>\n            <span class=\"token function\">getRedisCode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"13555555557\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"111111\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">getRedisCode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"13555555557\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Code</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"===========================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç \n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Random</span> random <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//ç›´æ¥ç”Ÿæˆ6ä½æ•°</span>\n        <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">100000</span><span class=\"token operator\">+</span>random<span class=\"token punctuation\">.</span><span class=\"token function\">nextInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000001</span><span class=\"token operator\">-</span><span class=\"token number\">100000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token comment\">// String code=i+\"\";</span>\n        <span class=\"token keyword\">return</span>  <span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">/**\n     * éªŒè¯ç 2åˆ†é’Ÿæœ‰æ•ˆå¯ä»¥æŠŠéªŒè¯ç æ”¾å…¥redis\n     * è®¾ç½®è¿‡æœŸæ—¶é—´120æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥ä¸‰æ¬¡\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> <span class=\"token function\">verifyCode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//1.é“¾æ¥redis</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Jedis</span> jedis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jedis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"xxx.xxx.xxx.xxx\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//éœ€è¦rediså¾—hostå’Œç«¯å£å·</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> auth <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"xxxx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¾“å…¥å¯†ç æ²¡è®¾ç½®å¯†ç å°±ä¸ç”¨è¿™ä¸€æ­¥</span>\n        <span class=\"token comment\">/**\n         * æ‹¼æ¥ key\n         * æ‰‹æœºå‘é€æ¬¡æ•°key\n         * éªŒè¯ç key\n         */</span>\n        <span class=\"token comment\">//æ‰‹æœºå‘é€æ¬¡æ•°key</span>\n        <span class=\"token class-name\">String</span> countKey<span class=\"token operator\">=</span><span class=\"token string\">\"verifyCode\"</span><span class=\"token operator\">+</span>phone<span class=\"token operator\">+</span><span class=\"token string\">\":count\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//éªŒè¯ç key</span>\n        <span class=\"token class-name\">String</span> codeKey<span class=\"token operator\">=</span><span class=\"token string\">\"verifyCode\"</span><span class=\"token operator\">+</span>phone<span class=\"token operator\">+</span><span class=\"token string\">\":code\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥ä¸‰æ¬¡</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> count <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>countKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>count<span class=\"token operator\">==</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">//è¯´æ˜æ²¡æœ‰å‘é€è¿‡,å°±è®¾ç½®</span>\n            jedis<span class=\"token punctuation\">.</span><span class=\"token function\">setex</span><span class=\"token punctuation\">(</span>countKey<span class=\"token punctuation\">,</span><span class=\"token number\">24</span><span class=\"token operator\">*</span><span class=\"token number\">62</span><span class=\"token operator\">*</span><span class=\"token number\">62</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Integer</span><span class=\"token punctuation\">.</span><span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>count<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">//è¯´æ˜æ²¡æœ‰è¶…è¿‡3æ¬¡ å‘é€æ¬¡æ•°åŠ 1</span>\n            jedis<span class=\"token punctuation\">.</span><span class=\"token function\">incr</span><span class=\"token punctuation\">(</span>countKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">//å·²ç»å‘é€ä¸‰æ¬¡ ä¸èƒ½å‘é€äº†</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä»Šå¤©å‘é€æ¬¡æ•° è¶…è¿‡3æ¬¡  æ˜å¤©å†æ¥å§\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            jedis<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">//å‘é€å¾—éªŒè¯ç  æ”¾å…¥ redis</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> vcode <span class=\"token operator\">=</span> <span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        jedis<span class=\"token punctuation\">.</span><span class=\"token function\">setex</span><span class=\"token punctuation\">(</span>codeKey<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span>vcode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¾“å…¥æ‰‹æœºå·æ—¶å¾—éªŒè¯ç ï¼š\"</span><span class=\"token operator\">+</span>vcode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        jedis<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å…³é—­é“¾æ¥</span>\n        <span class=\"token keyword\">return</span> vcode<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**éªŒè¯ éªŒè¯ç \n     *\n     * @param phone\n     * @param code\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getRedisCode</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> phone<span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span> code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//æ‰‹æœºå‘é€æ¬¡æ•°key</span>\n        <span class=\"token class-name\">String</span> countKey<span class=\"token operator\">=</span><span class=\"token string\">\"verifyCode\"</span><span class=\"token operator\">+</span>phone<span class=\"token operator\">+</span><span class=\"token string\">\":count\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//éªŒè¯ç key</span>\n        <span class=\"token class-name\">String</span> codeKey<span class=\"token operator\">=</span><span class=\"token string\">\"verifyCode\"</span><span class=\"token operator\">+</span>phone<span class=\"token operator\">+</span><span class=\"token string\">\":code\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//ä»redisè·å–éªŒè¯ç </span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">Jedis</span> jedis <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jedis</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"101.200.230.213\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">6379</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//éœ€è¦rediså¾—hostå’Œç«¯å£å·</span>\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> auth <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">auth</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0615\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¾“å…¥å¯†ç </span>\n\n        <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> <span class=\"token class-name\">RedisCode</span> <span class=\"token operator\">=</span> jedis<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>codeKey<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisCode</span><span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span>code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éªŒè¯æˆåŠŸ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éªŒè¯å¤±è´¥\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        jedis<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>è¿è¡Œæˆªå›¾<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\d4359fb77f6d4e62a24eb17e73adda74.png\"/></p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\89fd88f811c24a1fa84b58833d6d6bd5.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-09-02 14:24:53", "summary": "å‰è¨€ï¼šä½œè€…ç®€ä»‹ï¼šæˆ‘æ˜¯ç¬‘éœ¸ï¼Œä¸€åçƒ­çˆ±æŠ€æœ¯çš„åœ¨æ ¡å­¦ç”Ÿã€‚ä¸ªäººä¸»é¡µï¼šä¸ªäººä¸»é¡µç¬‘éœ¸çš„ä¸»é¡µç³»åˆ—ä¸“æ ï¼šæœ¬æ–‡å†™åœ¨ä¸“æ åç«¯ä¸“æ å¦‚æœæ–‡ç« çŸ¥è¯†ç‚¹æœ‰é”™è¯¯çš„åœ°æ–¹ï¼Œè¯·æŒ‡æ­£ï¼å’Œå¤§å®¶ä¸€èµ·å­¦ä¹ ï¼Œä¸€èµ·è¿›æ­¥å¦‚æœæ„Ÿè§‰åšä¸»çš„æ–‡ç« è¿˜ä¸é”™çš„è¯ï¼Œç‚¹"}