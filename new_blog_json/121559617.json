{"blogid": "121559617", "writerAge": "码龄5年", "writerBlogNum": "30", "writerCollect": "245", "writerComment": "28", "writerFan": "92", "writerGrade": "3级", "writerIntegral": "619", "writerName": "~虫虫~", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_121559617.jpg", "writerRankTotal": "26938", "writerRankWeekly": "46572", "writerThumb": "87", "writerVisitNum": "38499", "blog_read_count": "2983", "blog_time": "于 2022-04-21 15:40:45 发布", "blog_title": "CentOS7安装Oracle数据库的全流程", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"_0\"></a>一、准备工作</h2>\n<p><strong>1、下载Oracle的安装介质</strong><br/> Oracle 11g R2 Linux版本有两个压缩文件包，都需下载安装才会完整。<br/> linux.x64_11gR2_database_1of2.zip<br/> linux.x64_11gR2_database_2of2.zip<br/> 下载地址：网盘分享<br/> 链接：https://pan.baidu.com/s/1Y9hwNvlm5JIDMNLa0P_csQ<br/> 提取码：mhms<br/> 链接：https://pan.baidu.com/s/1QXQHy_FYRh2KmbpfQpXMng<br/> 提取码：gae2<br/> <strong>2、检查设置服务器内核安装环境</strong><br/> （1）检查操作系统补丁包<br/> (1)以root用户登录系统。<br/> (2)使用uname -r命令查看kernel版本<br/> (3)在root账号下执行如下脚本命令</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token keyword\">for</span> dep_rpm in elfutils-devel unixODBC* unixODBC<span class=\"token punctuation\">.</span>i686 unixODBC-devel<span class=\"token punctuation\">.</span>i686 binutils<span class=\"token punctuation\">.</span>x86_64 compat-libcap1<span class=\"token punctuation\">.</span>x86_64 compat-libstdc+<span class=\"token operator\">+</span><span class=\"token operator\">-</span>33<span class=\"token punctuation\">.</span>i686 compat-libstdc+<span class=\"token operator\">+</span><span class=\"token operator\">-</span>33<span class=\"token punctuation\">.</span>x86_64 gcc<span class=\"token punctuation\">.</span>x86_64 gcc-c+<span class=\"token operator\">+</span><span class=\"token punctuation\">.</span>x86_64 glibc<span class=\"token punctuation\">.</span>i686 glibc<span class=\"token punctuation\">.</span>x86_64 glibc-devel<span class=\"token punctuation\">.</span>i686 glibc-devel<span class=\"token punctuation\">.</span>x86_64 ksh libaio<span class=\"token punctuation\">.</span>i686 libaio<span class=\"token punctuation\">.</span>x86_64 libaio-devel<span class=\"token punctuation\">.</span>i686 libaio-devel<span class=\"token punctuation\">.</span>x86_64 libgcc<span class=\"token punctuation\">.</span>i686 libgcc<span class=\"token punctuation\">.</span>x86_64 libstdc+<span class=\"token operator\">+</span><span class=\"token punctuation\">.</span>i686 libstdc+<span class=\"token operator\">+</span><span class=\"token punctuation\">.</span>x86_64 libstdc+<span class=\"token operator\">+</span><span class=\"token operator\">-</span>devel<span class=\"token punctuation\">.</span>i686 libstdc+<span class=\"token operator\">+</span><span class=\"token operator\">-</span>devel<span class=\"token punctuation\">.</span>x86_64 libXi<span class=\"token punctuation\">.</span>i686 libXi<span class=\"token punctuation\">.</span>x86_64 libXtst<span class=\"token punctuation\">.</span>i686 libXtst<span class=\"token punctuation\">.</span>x86_64 make<span class=\"token punctuation\">.</span>x86_64 sysstat<span class=\"token punctuation\">.</span>x86_64 vim epel-release lrzsz unzip xorg*<span class=\"token punctuation\">;</span><span class=\"token keyword\">do</span> yum install <span class=\"token variable\">$dep_rpm</span> <span class=\"token operator\">-</span>y<span class=\"token punctuation\">;</span>done\n</code></pre>\n<p>（2）修改内核参数<br/> (1)通过修改文件/etc/sysctl.conf，增加要修改的内核参数值</p>\n<pre><code class=\"prism language-powershell\">fs<span class=\"token punctuation\">.</span>file-max = 6815744\nfs<span class=\"token punctuation\">.</span>aio-max-nr = 1048576\nkernel<span class=\"token punctuation\">.</span>shmall = 524288\nkernel<span class=\"token punctuation\">.</span>shmmax = 2147483647\nkernel<span class=\"token punctuation\">.</span>shmmni = 4096\nkernel<span class=\"token punctuation\">.</span>sem = 250 32000 100 128\nnet<span class=\"token punctuation\">.</span>ipv4<span class=\"token punctuation\">.</span>ip_local_port_range = 9000 65500\nnet<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>rmem_default = 262144\nnet<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>rmem_max = 4194304\nnet<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>wmem_default = 262144\nnet<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>wmem_max = 1048576\nnet<span class=\"token punctuation\">.</span>ipv4<span class=\"token punctuation\">.</span>tcp_wmem = 262144 262144 262144\nnet<span class=\"token punctuation\">.</span>ipv4<span class=\"token punctuation\">.</span>tcp_rmem = 4194304 4194304 4194304\n</code></pre>\n<p>查看linux服务器的位数：getconf LONG_BIT<br/> <strong>内核参数的详解：</strong><br/> <strong>（1）kernel.shmmax</strong><br/> <em>32位linux系统</em>：可取最大值为4GB（4294967296bytes）-1byte，即4294967295。建议值为多于内存的一半，所以如果是32为系统，一般可取值为4294967295。32位系统对SGA大小有限制，所以SGA肯定可以包含在单个共享内存段中。若物理内存大于4GB，也取4GB-1byte。<br/> <em>64位linux系统</em>：可取的最大值为物理内存值-1byte，建议值为多于物理内存的一半，一般取值大于SGA_MAX_SIZE即可，可以取物理内存-1byte。例如，如果为12GB物理内存，可取12<em>1024</em>1024*1024-1=12884901887，SGA肯定会包含在单个共享内存段中。<br/> <strong>（2）kernel.shmall</strong><br/> 查看系统默认的值-----------getconf PAGESIZE<br/> 默认是4096（字节 4K<br/> 一个共享内存段的最大大小是16G，那么需要共享内存页数是16GB/4KB=16777216KB /4KB=4194304（页），也就是64Bit系统下16GB物理内存，设置kernel.shmall = 4194304才符合要求。<br/> (2)运行命令进行参数修改。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token operator\">/</span>sbin/sysctl <span class=\"token operator\">-</span>p\n</code></pre>\n<p>（3）检查参数是否生效</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># /sbin/sysctl -a | grep sem</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep shm</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep file-max</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep aio-max-nr</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep net.ipv4.ip_local</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep rmem</span>\n<span class=\"token comment\"># /sbin/sysctl -a | grep wmem</span>\n</code></pre>\n<p><strong>3、设置oracle用户的shell限制</strong><br/> (1)以root用户登录。<br/> 步骤 2 修改文件/etc/security/limits.conf，追加以下内容（如果不存在）。</p>\n<pre><code class=\"prism language-powershell\">oracle  soft    nproc   2047\noracle  hard    nproc   16384\noracle   soft    nofile  1024\noracle   hard    nofile  65536\n</code></pre>\n<p>(2)修改文件/etc/pam.d/login，追加以下内容。</p>\n<pre><code class=\"prism language-powershell\">session  required   pam_limits<span class=\"token punctuation\">.</span>so\n</code></pre>\n<p>(3)修改文件/etc/pam.d/su，追加以下内容。</p>\n<pre><code class=\"prism language-powershell\">session required pam_limits<span class=\"token punctuation\">.</span>so\n</code></pre>\n<p>(4)修改文件/etc/profile，追加以下内容。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$USER</span> = <span class=\"token string\">\"oracle\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> then \n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">[</span> <span class=\"token variable\">$SHELL</span> = <span class=\"token string\">\"/bin/ksh\"</span> <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> then \n       ulimit <span class=\"token operator\">-</span>u 16384 \n       ulimit <span class=\"token operator\">-</span>n 65536 \n   <span class=\"token keyword\">else</span> \n       ulimit <span class=\"token operator\">-</span>u 16384 <span class=\"token operator\">-</span>n 65536 \n   fi \nfi\n</code></pre>\n<p><strong>4、检查SWAP空间大小</strong><br/> (1)以root用户登录。<br/> (2)检查物理内存大小。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># grep MemTotal /proc/meminfo</span>\n</code></pre>\n<p>1881276 KB【物理内存过于小？】<br/> (3)检查SWAP空间大小。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># grep SwapTotal /proc/meminfo</span>\n</code></pre>\n<p>4063228 KB<br/> SWAP空间大小建议值如图所示。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2128540f26f848b686af500cedc78370.png\"/><br/> <strong>5、创建用户和组</strong><br/> (1)以root用户登录。<br/> (2)创建dba组，先检查dba组是否存在和/或组id是否一致。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#grep dba /ect/group</span>\n</code></pre>\n<p>无输出则表示dba组不存在。如果dba组已存在，但组id不一样，则使用以下命令删除dba组。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># /usr/sbin/groupdel dba</span>\n</code></pre>\n<p>创建dba组。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#/usr/sbin/groupadd -g 200 dba</span>\n</code></pre>\n<p>(3)创建oinstall组。<br/> 先检查oinstall组是否存在和/或组id是否一致。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#grep oinstall /etc/group</span>\n</code></pre>\n<p>无输出则表示oinstall组不存在。如果oinstall组已存在，但组id不一致，则使用以下命令删除oinstall组。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#/usr/sbin/groupdel oinstall</span>\n</code></pre>\n<p>创建oinstall组。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#/usr/sbin/groupadd -g 201 oinstall</span>\n</code></pre>\n<p>(4)创建oracle用户。<br/> 检查oracle用户是否存在和/或用户id是否一致。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#grep oracle /etc/passwd</span>\n</code></pre>\n<p>无输出则表示Oracle用户不存在。如果Oracle用户已存在，但用户id不一致，则使用以下命令删除Oracle用户。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># /usr/sbin/userdel -rf oracle</span>\n</code></pre>\n<p>创建oracle用户。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#/usr/sbin/useradd -u 300 -g oinstall -G dba -d /home/oracle -s /bin/bash -m oracle </span>\n</code></pre>\n<p>修改oracle用户密码。</p>\n<pre><code class=\"prism language-powershell\">passwd oracle\n</code></pre>\n<p><strong>6、创建安装目录并授权</strong><br/> (1)以root用户登录。<br/> (2)赋予目录正确的权限。<br/> 对文件系统/opt/oracle赋权。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># mkdir /opt/oracle;chown -R oracle:oinstall /opt/oracle</span>\n<span class=\"token comment\"># chmod -R 775 /opt/oracle</span>\n</code></pre>\n<p>对文件系统/opt/oraadm赋权。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># mkdir /opt/oraadm ;chown -R oracle:dba /opt/oraadm</span>\n<span class=\"token comment\"># chmod -R 770 /opt/oraadm</span>\n</code></pre>\n<p>创建目录/usr/local/bin并赋权。<br/> 检查/usr/local/bin目录是否存在，如不存在则需创建该目录，并赋予755权限。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#mkdir /usr/local/bin</span>\n<span class=\"token comment\">#chmod 755 /usr/local/bin</span>\n<span class=\"token comment\">#ll /usr/local |grep bin</span>\n</code></pre>\n<p>赋权/tmp目录权限。<br/> 检查/tmp是否具有1777权限，如不具备则赋予/tmp目录1777权限。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\">#chmod 1777 /tmp</span>\n<span class=\"token comment\">#ll / |grep tmp</span>\n</code></pre>\n<p><strong>7、设置oracle用户环境变量</strong><br/> (1)<strong>以oracle用户</strong>登录操作系统。<br/> (2)编辑环境变量文件。<br/> 注意：<br/> ORACLE_BASE，ORACLE_HOME，ORACLE_SID，NLS_LANG请根据实际情况进行设置。<br/> ORACLE_SID唯一的标识一个实例，一般以数据库名加上实例号为命名规范，例如：有两个实例，数据库名称为suseora，实例1命名为suseora1，实例2命名为suseora2，依次类推，这里<em>数据库实例设置为orcl</em>。<br/> NLS_LANG格式为区域_语言.字符集，字符集必须和数据库保持一致。</p>\n<pre><code class=\"prism language-powershell\">cd <span class=\"token operator\">/</span>home/oracle/<span class=\"token punctuation\">.</span>bash_profile\n$ vi <span class=\"token punctuation\">.</span>bash_profile\n</code></pre>\n<pre><code class=\"prism language-powershell\">export ORACLE_BASE=<span class=\"token operator\">/</span>opt/oracle\nexport ORACLE_HOME=<span class=\"token operator\">/</span>opt/oracle/product/11gR2/db\nexport ORACLE_SID=orcl\nexport ORACLE_TERM=xterm\nLD_LIBRARY_PATH=<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>lib:<span class=\"token operator\">/</span>lib:<span class=\"token operator\">/</span>usr/lib:<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>rdbms/lib\nexport LD_LIBRARY_PATH\nSHLIB_PATH=<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>lib:<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>rdbms/lib\nexport SHLIB_PATH\n<span class=\"token comment\"># Set shell search paths:</span>\nexport PATH=<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>bin:<span class=\"token operator\">/</span>usr/sbin:<span class=\"token variable\">$PATH</span>:<span class=\"token operator\">/</span>usr/local/bin\n<span class=\"token comment\"># CLASSPATH must include the following JRE locations:</span>\nCLASSPATH=<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>JRE:<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>jlib:<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>rdbms/jlib\nexport CLASSPATH=<span class=\"token variable\">$CLASSPATH</span>:<span class=\"token variable\">$ORACLE_HOME</span><span class=\"token operator\">/</span>network/jlib\nexport NLS_LANG=AMERICAN_AMERICA<span class=\"token punctuation\">.</span>AL32UTF8\n</code></pre>\n<p>(3)执行source .bash_profile命令，使环境变量生效。<br/> (4)执行env命令，确认环境变量。<br/> <strong>8、拷贝安装文件并创建安装目录</strong><br/> (1)以root用户登录。<br/> (2)将oracle安装文件以二进制的方式拷贝至节点1的“/opt/oraadm”中，如下所示。如果没有oraadm则创建并授权777权限。<br/> 注：从服务器下载文件到本地某路径：<code>scp root@192.168.10.113 /home/mysql/MySQL-server-5.6.27-1.rhel5.x86_64.rpm C:\\下载软件</code><br/> 将本地某文件上传至服务器：<code>scp C:\\下载软件\\jdk-8u144-linux-x64.tar.gz root@192.168.10.113 /home/mysql</code><br/> (3)解压缩安装文件，并赋予权限。<br/> 安装unzip命令</p>\n<pre><code class=\"prism language-powershell\">yum install <span class=\"token operator\">-</span>y unzip zip\n</code></pre>\n<p>更改oracle介质zip为777权限</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># cd /opt/oraadm</span>\n<span class=\"token comment\"># unzip /opt/oraadm/linux.x64_11gR2_database_1of2.zip</span>\n<span class=\"token comment\"># unzip /opt/oraadm/linux.x64_11gR2_database_2of2.zip</span>\n<span class=\"token comment\"># chmod 770 -R /opt/oraadm/database</span>\n<span class=\"token comment\"># chown oracle:dba -R /opt/oraadm/database</span>\n<span class=\"token comment\"># mkdir grid</span>\n<span class=\"token comment\"># chmod 770 -R /opt/oraadm/grid</span>\n<span class=\"token comment\"># chown oracle:dba -R /opt/oraadm/grid</span>\n</code></pre>\n<p>(4)创建Inventory目录<br/> 创建目录/opt/oraInventory，并使oracle:oinstall为其所有者。<br/> 以root用户登录，创建目录/opt/oraInventory。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># mkdir /opt/oraInventory</span>\n</code></pre>\n<p>使oracle:oinstall为该目录所有者。</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># chown oracle:oinstall /opt/oraInventory</span>\n<span class=\"token comment\"># chmod 770 /opt/oraInventory</span>\n</code></pre>\n<p><strong>9、搭建Xstart环境</strong><br/> (1)首先保证linux服务器已安装“xorg-x11-xauth”软件包，否则会报错：“已拒绝X11转移申请”。<br/> 如果没有安装图形界面，则需要先安装图形化安装包。<br/> 切换为root账号，配置Display</p>\n<pre><code class=\"prism language-powershell\"> <span class=\"token namespace\">[root@vlxcndcz01bpmth ~]</span><span class=\"token comment\">#yum install xorg-x11-xauth.x86_64</span>\n <span class=\"token namespace\">[root@vlxcndcz01bpmth ~]</span><span class=\"token comment\">#yum install xterm</span>\n <span class=\"token namespace\">[root@vlxcndcz01bpmth ~]</span><span class=\"token comment\">#yum install xclock</span>\n</code></pre>\n<pre><code class=\"prism language-powershell\"> 方式一：\n <span class=\"token namespace\">[root@vlxcndcz01bpmth ~]</span><span class=\"token comment\">#export DISPLAY=172.20.10.3:0.0(本地IP而不是服务器IP):0.0</span>\n 方式二：\n <span class=\"token comment\">#编辑/etc/profile文件，添加内容：export DISPLAY=:0.0</span>\n<span class=\"token namespace\">[root@vlxcndcz01bpmth ~]</span><span class=\"token comment\"># vi /etc/profile</span>\n<span class=\"token namespace\">[root@vlxcndcz01bpmth~]</span><span class=\"token comment\"># cat /etc/profile</span>\n<span class=\"token comment\">#省略……</span>\nexport DISPLAY=172<span class=\"token punctuation\">.</span>20<span class=\"token punctuation\">.</span>10<span class=\"token punctuation\">.</span>3:0<span class=\"token punctuation\">.</span>0\n</code></pre>\n<p>(2)配置xmanager<br/> 确保主机名配置一致否则，会报INS-06101错误<br/> [INS-06101] IP address of localhost could not be determined<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f11349ba9cb44f96a6576f413b1c5d14.png\"/><br/> (3)打开xstart配置连接主机IP以及配置命令，点击运行<code>/usr/bin/xterm -ls -display $DISPLAY</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d0b625e29b524746b29ba24f2bcb386e.png\"/><br/> 报错：DISPLAY not set. Please set the DISPLAY and try again.<br/> 解决：切换到root下，执行export DISPLAY=172.20.10.3:0.0，再执行xhost +，再切换到oracle<br/> su oracle<br/> /opt/oraadm/database/runInstaller<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b623c143ceb54b1484a87139d70c22a7.png\"/><br/> 取消配置安全更新<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e04e55ecc0c84e859cd3ad549b94fffa.png\"/><br/> 不勾选“I wish to receive security updates via My Oracle Support”，选择“Next”。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a1c3cda29220477ab40da215e0ce83a2.png\"/><br/> 取消安全更新，单击“Yes”。<br/> 选择安装方式，选择“Install database software only”，单击“NEXT”。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\17dabab2ab784fb484ccc91a349ae4c0.png\"/><br/> 指定安装类型，选择“Single instance database installation”<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\030fbbcbfe6d406b882be9acf3819509.png\"/><br/> 选择安装语言<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2e270567ca9f4b0b9250e53a0633f400.png\"/><br/> 选择软件版本，选择“Enterprise Edition”，单击“Next”。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\fe5a4b89b399425ba4a3095d68744141.png\"/><br/> 指定安装目录，在Oracle Base中填写“/opt/oracle”，即oracle用户的环境变量O R A C L E B A S E 。 在 S o f t w a r e L o c a t i o n 中 填 写 “ / o p t / o r a c l e / p r o d u c t / 11 g R 2 / d b ” ， 即 o r a c l e 用 户 的 环 境 变 量 ORACLE_BASE。 在Software Location中填写“/opt/oracle/product/11gR2/db”，即oracle用户的环境变量ORACLE<br/> BASE。在SoftwareLocation中填写“/opt/oracle/product/11gR2/db”，即oracle用户的环境变量ORACLE_HOME。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\eddca4195b0d4f7a98315051047d34ba.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1d1145f8d3034788bce1ccfc042aa5ae.png\"/><br/> 设置操作系统用户组，Database Administrator Group 选择“dba”，Database Operator Group 选择“dba”，单击“Next”。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4fe6d169ab3648b09e28c5b1ee7f9ffb.png\"/><br/> 安装概要检查，检查没有问题，单击“Install”按钮进行安装。由于系统中已经存在更新的软件包，以下错误可以忽略。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\24971c75a52641bab1c3ab8fc3cabfe5.png\"/><br/> 安装概要检查结果：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0d5b09e6ff824987b0f06d708848fc37.png\"/><br/> 1、对于shmall问题：点击fix and check again，打开新的终端按照步骤进行，然后点击OK，继续检查。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3330f2b0207a486e8cf22da42ad34f3a.png\"/><br/> 2、对于semmni，在内核设置处已经设置，忽略；packages安装包也可忽略。<br/> 3、architecture—<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0f545ce1ee2540588ae00cf57edb884c.png\"/><br/> oracle的安装版本不正确，本系统需要安装linux64位的<br/> 5、安装过程中会出现如下报错，解决方案如下。<br/> 错误1---------<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\85a7a5ac6b1645638793aeef6e0bcde8.png\"/></p>\n<p>解决方案===<br/> 切换回oracle用户，修改<br/> /opt/oracle/product/11gR2/db/ctx/lib/ins_ctx.mk文件中的配置<br/> ctxhx: $(CTXHXOBJ)<br/> $(LINK_CTXHX) $(CTXHXOBJ) $(INSO_LINK) 修改为<br/> ctxhx: $(CTXHXOBJ)<br/> -static $(LINK_CTXHX) $(CTXHXOBJ) $(INSO_LINK) /usr/lib64/stdc.a<br/> 错误2---------<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4636a42425ba451db0827417463109b4.png\"/><br/> 解决方案===<br/> 需要修改，/opt/oracle/product/11gR2/db/sysman/lib/ins_emagent.mk文件中的配置，将文件中的<br/> $(SYSMANBIN)emdctl:<br/> $(MK_EMAGENT_NMECTL) 修改为<br/> $(SYSMANBIN)emdctl:<br/> $(MK_EMAGENT_NMECTL) -lnnz11</p>\n<p>继续：打开终端以root用户执行以下命令，执行的时候出现一些简单问题，直接点击enter即可<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\210c7d7584124455851f88597026d4d4.png\"/><br/> 安装成功，如下提示<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4793b440e5f84303a0f34eb1f07d08e4.png\"/><br/> 最后检查安装错误，cat /opt/oracle/product/11gR2/db/install/make.log</p>\n<h2><a id=\"ORACLE_318\"></a>二、配置ORACLE监听器</h2>\n<p>配置数据库连接字符串：协议，地址，端口等<br/> (1)启动NETCA。<br/> 用oracle用户登录节点1启动NETCA。选择“Cluster configuration”。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\743fee008aff44c4b1dd8f330e90363b.png\"/><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ac1e27f8ef524010aa1dfaabc186cdd2.png\"/><br/> 默认的端口名称<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d01ad4d3a5a6496d8411903dcb9b0240.png\"/><br/> 选择TCP<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a027b66a90c44ae09a9fcf4def509628.png\"/><br/> 选择端口范围1500-1600<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ba4b1764495e4d13a485ab4e93d33208.png\"/><br/> <em><strong>提示端口被占用？</strong></em><br/> 勾选Automatic Maintenance Tasks界面中的“Enable automatic maintenance tasks”。<br/> 解决方案修改.bash_profile中的ORACLE_HOSTNAME为hostname<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1c72f4cae13d4e09b8889929e7534e31.png\"/></p>\n<h2><a id=\"oracle_334\"></a>三、创建oracle数据库</h2>\n<p>使用操作系统oracle用户调用DBCA进行安装<br/> (1)以oracle用户登录节点1。<br/> (2)启动DBCA安装界面。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ca0e275c9c964a7395cec6a2e2737f9b.png\"/><br/> 注意：只有 su - oracle才能启用oracle环境，而非su oracle<br/> su oracle只切换用户，而非环境变量，环境变量仍然是root的，不会执行oracle主目录中的profile脚本。<br/> 上述报错解决-------export DISPLAY=172.20.10.3:0.0<br/> 输入dbca后无反应=======在Xstart中调用终端而非Xshell中。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5aebd244dab24b288eb7c2572d0d54f8.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\84e9643969124d55aa3302d934eeb57b.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0a44f7aefe224497b574cfdf099a029b.png\"/><br/> 填写数据库名<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\54b850e8fe84467c9b5f7fa733c301f9.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\32b1febc21d1466d9cede74c0e00197f.png\"/><br/> 接下来都是默认设置，图片略过<br/> DBCA运行完毕，数据库建立，完成数据库创建操作。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\76fe43fe038548299688c3454d8a6900.png\"/><br/> 登录数据库进行验证。<br/> 数据库实例启动后，登录数据库确认数据库状态。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dc3c9d40a619473bbadba5b19fb433c1.png\"/></p>\n<h2><a id=\"oracle_356\"></a>四、oracle创建其他用户</h2>\n<p>oracle的权限分为系统权限和对象权限。系统权限可以让用户执行特定的指令，比如创建用户create table创建表，grant any privilege为用户赋予任何系统权限。对象权限指的是用户可以对各个对象进行操作，delete允许用户删除表或视图的行，select允许用户从表或视图、序列（sequences）与快照（snapshots）查询信息。<br/> 每个oracle用户都有一个名字和口令,并拥有一些由其创建的表、视图和其他资源。oracle角色(role)就是一组权限(privilege)(或者是每个用户根据其状态和条件所需的访问类型)。用户可以给角色授予或赋予指定的权限，然后将角色赋给相应的用户。一个用户也可以直接给其他用户授权。<br/> 一、创建用户<br/> oracle内部有两个建好的用户：system和sys。用户可直接登录到system用户以创建其他用户，因为system具有创建别 的用户的 权限。 在安装oracle时，用户或系统管理员首先可以为自己建立一个用户。<br/> 语法[创建用户]： create user 用户名 identified by 口令[即密码]；<br/> 例子： create user test identified by test;<br/> 语法[更改用户]: alter user 用户名 identified by 口令[改变的口令];<br/> 例子： alter user test identified by 123456;<br/> 二、删除用户<br/> 语法：drop user 用户名;<br/> 例子：drop user test;<br/> 若用户拥有对象，则不能直接删除，否则将返回一个错误值。指定关键字cascade,可删除用户所有的对象，然后再删除用户。<br/> 语法： drop user 用户名 cascade;<br/> 例子： drop user test cascade;<br/> 三、授权角色<br/> oracle为兼容以前版本，提供三种标准角色（role）:connect/resource和dba.<br/> （1）讲解三种标准角色：<br/> 1》. connect role(连接角色)<br/> –临时用户，特指不需要建表的用户，通常只赋予他们connect role.<br/> –connect是使用oracle简单权限，这种权限只对其他用户的表有访问权限，包括select/insert/update和delete等。<br/> –拥有connect role 的用户还能够创建表、视图、序列（sequence）、簇（cluster）、同义词(synonym)、回话（session）和其他 数据的链（link）<br/> 2》. resource role(资源角色)<br/> –更可靠和正式的数据库用户可以授予resource role。<br/> –resource提供给用户另外的权限以创建他们自己的表、序列、过程(procedure)、触发器(trigger)、索引(index)和簇(cluster)。<br/> 3》. dba role(数据库管理员角色)<br/> –dba role拥有所有的系统权限<br/> –包括无限制的空间限额和给其他用户授予各种权限的能力。system由dba用户拥有<br/> （2）授权命令<br/> 语法： grant connect, resource to 用户名;<br/> 例子： grant connect, resource to test;<br/> 用户：创建用户必须为其指定表空间，如果没有显性指定默认表空间，则指定为users表空间；创建用户后，可以在用户上，创建表、存储过程等等其他数据库对象；<br/> 表：是数据记录的集合；<br/> 创建过程： 表空间—&gt;用户—&gt;表;<br/> 所属关系： 表空间 包含 用户 包含 表；</p>\n<h2><a id=\"sql_developer_392\"></a>五、管理工具sql developer进行连接</h2>\n<p><strong>附：</strong><br/> 如果本机安装有Oracle数据库，用PLSQL Dev 连接数据库自然没有什么问题，但是如果本机没有安装oracle 客户端，要连接非本地机的oracle DB，那么一种方法就是在本地也安装Oracle，或者安装类似oracle develop 10g开发套件，这些安装方法比较麻烦，安装下来占用磁盘空间和系统资源，特别是oracle数据库启动的时候大量占用系统服务和资源，不是理想的方法。<br/> 安装使用过PLSQL Dev都知道，要连接数据库，必须配置TNS（Transparence Network Substrate），而直接安装PLSQL Dev 之后，本机是没有Oracle HOME的注册表项，连网络连接配置项都没有，PLSQL Dev 就是一个文本编辑器而已。<br/> PLSQL Dev 连接远程oracle的一个有效解决方法使使用OCI。ORACLE调用接口(Oracle Call Interface简称OCI)提供了一组可对ORACLE数据库进行存取的接口函数，通过在第三代程序设计语言中进行调用可达到存取ORACLE数据库的目的。本文介绍PLSQL Dev如何使用OCI的实例连接远程数据库的方法。<br/> 1、<strong>windows安装</strong>sql developer并连接centos的oracle<br/> （1）安装<br/> 下载地址：<br/> 链接：https://pan.baidu.com/s/1ojXGysHDCpf80EXussa5EA<br/> 提取码：5ddp<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f98e66b66bb6444faeb4db31dceb080c.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\54d0705e671b41a1b5de6c9e35887287.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cfd330807fa648289eec78ac1e2bf623.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f57c3363082a426c869496df83bdd380.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6be22f9cf6e847a3948a48b025545b3d.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5b37f5e1dd1d4c6999e5542bd1c06d85.png\"/><br/> （2）连接设置<br/> 1、下载轻量级免安装的客户端：<br/> 链接：https://pan.baidu.com/s/10Id7JzTGJ3L4YTVPXct2Pg<br/> 提取码：1zrm<br/> 解压到C:\\下载软件\\instantclient_12_2<br/> 拷贝服务端目录“/opt/oracle/product/11gR2/db/network/admin/tnsnames.ora”到客户端的“nstantclient-basic-nt-11.2.0.3.0\\NETWORK\\ADMIN“目录，该目录没有的话需要创建。<br/> 修改tnsnames.ora的内容</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token comment\"># tnsnames.ora Network Configuration File: /opt/oracle/product/11gR2/db/network/admin/tnsnames.ora</span>\n<span class=\"token comment\"># Generated by Oracle configuration tools.</span>\nORCL =\n  <span class=\"token punctuation\">(</span>DESCRIPTION =\n    <span class=\"token punctuation\">(</span>ADDRESS = <span class=\"token punctuation\">(</span>PROTOCOL = TCP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>HOST = 192<span class=\"token punctuation\">.</span>168<span class=\"token punctuation\">.</span>10<span class=\"token punctuation\">.</span>114<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>PORT = 1521<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">(</span>CONNECT_DATA =\n      <span class=\"token punctuation\">(</span>SERVER = DEDICATED<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">(</span>SERVICE_NAME = orcl<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n</code></pre>\n<p>2、开启oracle监听器<br/> su - oracle<br/> lsnrctl ------查看监听器<br/> status ------状态<br/> start ------打开监听<br/> <strong>报错1：</strong><br/> listener does not currently konw of service requested in connect descriptor(监听程序当前无法识别连接描述符中请求的服务)<br/> *检查tnsnames.ora的内容；<br/> *检查oracle是否启动:<br/> sqlplus /nolog;<br/> conn as sysdba;<br/> select status from v$instance;—查看视图，查看当前实例的状态。<br/> 若没有启动，则startup;进行启动。不要使用startup nomount启动，连接时会报错。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\63e54b751cbd4cb28d022d7d558b188a.png\"/></p>\n<p>2、<strong>centos上安装</strong>sql developer并连接该服务器的oracle<br/> （1）下载<br/> （2）连接设置</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-04-21 15:40:45", "summary": "一、准备工作、下载的安装介质版本有两个压缩文件包，都需下载安装才会完整。下载地址：网盘分享链接：提取码：链接：提取码：、检查设置服务器内核安装环境检查操作系统补丁包以用户登录系统。使用命令查看版本在账"}