{"blogid": "123105035", "writerAge": "码龄5年", "writerBlogNum": "26", "writerCollect": "76", "writerComment": "21", "writerFan": "5", "writerGrade": "3级", "writerIntegral": "543", "writerName": "不会掉头发的小白", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123105035.jpg", "writerRankTotal": "46733", "writerRankWeekly": "529674", "writerThumb": "38", "writerVisitNum": "40884", "blog_read_count": "3588", "blog_time": "于 2022-02-24 10:00:54 发布", "blog_title": "pandas中的to_sql的使用", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h3><a id=\"1to_sql_0\"></a>1.to_sql的作用：</h3>\n<p>to_sql是pandas中的DataFrame数据类型提供的一个API，可以将整个DF导入数据库中，其中有几个参数的作用为：</p>\n<ul><li>name: 数据库中的表名</li><li>con: 与read_sql中相同，数据库连接的驱动</li><li>if_exits： 当数据库中的这个表存在的时候，采取的措施是什么，包括三个值，默认为fail \n  <ul><li>fail，若表存在，则不进行数据表写入的相关操作</li><li>replace：若表存在，将数据库表中的数据覆盖；</li><li>append：若表存在，将数据写到原表的后面。</li></ul> </li><li>index：是否将df的index单独写到一列中</li><li>index_label:指定列作为df的index输出，此时index为True</li><li>dtype: 指定列的输出到数据库中的数据类型。字典形式储存：{column_name: sql_dtype}</li></ul>\n<h3><a id=\"2to_sql_12\"></a>2.to_sql的使用实例</h3>\n<blockquote>\n<p>完成数据库的连接驱动<br/> conn=create_engine(‘mysql+pymysql://{}:{}@{}:{}/{}’.format(user1,password1,host1,port1,database1))<br/> 以上涉及到的变量自己定义即可，分别是：数据库的用户名、密码、主机、端口以及数据库名称</p>\n</blockquote>\n<pre><code class=\"prism language-mysql\">df1.to_sql('tech_res', con=conn,index = False , if_exists = 'append', chunksize = None,dtype=dtypedict)\n</code></pre>\n<h3><a id=\"3_21\"></a>3.出现的问题记录</h3>\n<ul><li>出现1241的错误：<br/> 出现这个错误可能是DF数据中包含列表类型的数据，此时要对数据进行强制转换。使用下面的语法进行<br/> <code>df1.loc[:,'keyAndAbs_'] = df1['keyAndAbs_'].astype(str)</code></li></ul>\n<p>以上就是我在使用to_sql过程中，遇到的一些问题，特此记录，方便日后查阅。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-02-24 10:00:54", "summary": "的作用：是中的数据类型提供的一个，可以将整个导入数据库中，其中有几个参数的作用为：数据库中的表名与中相同，数据库连接的驱动：当数据库中的这个表存在的时候，采取的措施是什么，包括三个值，默认为，若表存在"}