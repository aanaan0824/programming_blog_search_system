{"blogid": "126724068", "writerAge": "码龄1年", "writerBlogNum": "132", "writerCollect": "1971", "writerComment": "811", "writerFan": "2301", "writerGrade": "5级", "writerIntegral": "3400", "writerName": "魔王不会哭", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126724068.jpg", "writerRankTotal": "5183", "writerRankWeekly": "2180", "writerThumb": "553", "writerVisitNum": "184968", "blog_read_count": "789", "blog_time": "已于 2022-09-06 14:48:08 修改", "blog_title": "python对月饼数据进行可视化，看看哪家最划算", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-dracula\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h3><a id=\"_1\"></a>前言</h3>\n<p>嗨喽~大家好呀，这里是魔王呐 !</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\0ba80ef87b5d4295748f1c46cdb1cbdc.png\"/></p>\n<p>中秋节，又称拜月节、月光诞、月夕等，节期在每年的农历八月十五日（九月十）。</p>\n<p>中秋节自古以来就有祭月、赏月、吃月饼、玩花灯、赏桂花、饮桂花酒等民俗，流传经久不息。</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\b81057b88afd7fc1a32f33b5df6faaf2.png\"/></p>\n<p>马上有临近中秋，这不得好好准备~于是准备对月饼数据进行可视乎</p>\n<p><img alt=\"\" src=\"https://img-blog.csdnimg.cn/56497a989d984fbe80005e3d9065f4e6.gif\"/></p>\n<h3><a id=\"_17\"></a>数据</h3>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\2c5ceb8398aa47078dd4ec0981682f2b.png\"/></p>\n<blockquote>\n<p>数据集、源码、解答加Q君羊：926207505 <a href=\"https://jq.qq.com/?_wv=1027&amp;k=bNbpymd2\">点击蓝字</a>加入【python学习裙】</p>\n</blockquote>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/28be931355e94f6ca8470d72b235aa5a.gif\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\5cab94119c7a4abda1e555b28e610f58.png\"/></p>\n<h3><a id=\"_28\"></a>代码</h3>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 导包</span>\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> re\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># author：Dragon少年</span>\n<span class=\"token comment\"># 导入爬取得到的数据</span>\ndf <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"月饼.csv\"</span><span class=\"token punctuation\">,</span> encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8-sig'</span><span class=\"token punctuation\">,</span> header<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"商品名\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"价格\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"购买人数\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"店铺\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"地址\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\"># 去除重复的数据</span>\ndf<span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span>inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 删除购买人数0的记录</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'购买人数'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'购买人数'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>nan<span class=\"token punctuation\">,</span><span class=\"token string\">'0人付款'</span><span class=\"token punctuation\">)</span>\n\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'num'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r'(\\d+\\.{0,1}\\d*)'</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'购买人数'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 提取数值</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'num'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'num'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 转化数值型</span>\n<span class=\"token comment\"># 提取单位（万）</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'unit'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">''</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">r'(万)'</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'购买人数'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 提取单位（万）</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'unit'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'unit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span><span class=\"token number\">10000</span> <span class=\"token keyword\">if</span> x<span class=\"token operator\">==</span><span class=\"token string\">'万'</span> <span class=\"token keyword\">else</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 计算销量</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'num'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'unit'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 删除没有发货地址的店铺数据 获取省份</span>\ndf <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'地址'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>notna<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'省份'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'地址'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span>x<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 删除多余的列</span>\ndf<span class=\"token punctuation\">.</span>drop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'购买人数'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'地址'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'num'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'unit'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 重置索引</span>\ndf <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span>drop<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>to_csv<span class=\"token punctuation\">(</span><span class=\"token string\">'月饼清洗数据.csv'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 导入包</span>\n<span class=\"token keyword\">from</span> pyecharts<span class=\"token punctuation\">.</span>charts <span class=\"token keyword\">import</span> Bar\n<span class=\"token keyword\">from</span> pyecharts <span class=\"token keyword\">import</span> options <span class=\"token keyword\">as</span> opts \n\n<span class=\"token comment\"># 计算月饼总销量Top10的店铺</span>\nshop_top10 <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'店铺'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 绘制柱形图</span>\nbar1 <span class=\"token operator\">=</span> Bar<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'600px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'450px'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar1<span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>shop_top10<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nbar1<span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">,</span> shop_top10<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar1<span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'销量Top10店铺-Dragon少年'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                     xaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>rotate<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar1<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token string\">\"销量Top10店铺-Dragon少年.html\"</span><span class=\"token punctuation\">)</span>\nbar1<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 导入包</span>\n<span class=\"token keyword\">from</span> pyecharts<span class=\"token punctuation\">.</span>charts <span class=\"token keyword\">import</span> Bar\n<span class=\"token keyword\">from</span> pyecharts <span class=\"token keyword\">import</span> options <span class=\"token keyword\">as</span> opts \n\n<span class=\"token comment\"># 计算销量top10月饼</span>\nshop_top10 <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'商品名'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 绘制柱形图</span>\nbar0 <span class=\"token operator\">=</span> Bar<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'750px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'450px'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar0<span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>shop_top10<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nbar0<span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">,</span> shop_top10<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar0<span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'销量Top10月饼-Dragon少年'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                     xaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>rotate<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nbar0<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token string\">\"销量Top10月饼-Dragon少年.html\"</span><span class=\"token punctuation\">)</span>\nbar0<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> pyecharts<span class=\"token punctuation\">.</span>charts <span class=\"token keyword\">import</span> Pie\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">price_range</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#按照淘宝推荐划分价格区间</span>\n    <span class=\"token keyword\">if</span> x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'50元以下'</span>\n    <span class=\"token keyword\">elif</span> x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">150</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'50-150元'</span>\n    <span class=\"token keyword\">elif</span> x <span class=\"token operator\">&lt;=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'150-500元'</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'500元以上'</span>\n\ndf<span class=\"token punctuation\">[</span><span class=\"token string\">'price_range'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token string\">'价格'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">apply</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">lambda</span> x<span class=\"token punctuation\">:</span> price_range<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \nprice_cut_num <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'price_range'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \ndata_pair <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> z <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>price_cut_num<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> price_cut_num<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data_pair<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token comment\"># 饼图</span>\npie1 <span class=\"token operator\">=</span> Pie<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'750px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'350px'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 内置富文本</span>\npie1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span> \n        series_name<span class=\"token operator\">=</span><span class=\"token string\">\"销量\"</span><span class=\"token punctuation\">,</span>\n        radius<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"35%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"55%\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        data_pair<span class=\"token operator\">=</span>data_pair<span class=\"token punctuation\">,</span>\n        label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>formatter<span class=\"token operator\">=</span><span class=\"token string\">'{b}—占比{d}%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\npie1<span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>legend_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LegendOpts<span class=\"token punctuation\">(</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">\"left\"</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">'30%'</span><span class=\"token punctuation\">,</span> orient<span class=\"token operator\">=</span><span class=\"token string\">\"vertical\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n                     title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'不同价格月饼销量占比-Dragon少年'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\npie1<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token string\">\"不同价格月饼销量占比-Dragon少年.html\"</span><span class=\"token punctuation\">)</span>\npie1<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> pyecharts<span class=\"token punctuation\">.</span>charts <span class=\"token keyword\">import</span> Map \n\n<span class=\"token comment\"># 计算销量</span>\nprovince_num <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">'省份'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'销量'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> \n\n<span class=\"token comment\"># 绘制地图</span>\nmap1 <span class=\"token operator\">=</span> Map<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'950px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'600px'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nmap1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> z <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>province_num<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> province_num<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n         maptype<span class=\"token operator\">=</span><span class=\"token string\">'china'</span>\n        <span class=\"token punctuation\">)</span> \nmap1<span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'各省月饼销量分布-Dragon少年'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                     visualmap_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>VisualMapOpts<span class=\"token punctuation\">(</span>max_<span class=\"token operator\">=</span><span class=\"token number\">1500000</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token punctuation\">)</span>\nmap1<span class=\"token punctuation\">.</span>render<span class=\"token punctuation\">(</span><span class=\"token string\">\"各省月饼销量分布-Dragon少年.html\"</span><span class=\"token punctuation\">)</span>\nmap1<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"_156\"></a>效果</h3>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\43e0020d3725484482227ee0ec172ea5.png\"/><br/> <img alt=\"\" src=\"..\\..\\static\\image\\4edc9714f7104a509a47754b22d51b05.png\"/><br/> <img alt=\"\" src=\"..\\..\\static\\image\\293f7da7179d41c3bb3af8f9d5df88b5.png\"/><br/> <img alt=\"\" src=\"..\\..\\static\\image\\fe329cc1075c4789900e6ceb21bc850f.png\"/></p>\n<h3><a id=\"_162\"></a>尾语</h3>\n<p>要成功，先发疯，下定决心往前冲！</p>\n<p>学习是需要长期坚持的，一步一个脚印地走向未来！</p>\n<p>未来的你一定会感谢今天学习的你。</p>\n<p>—— 心灵鸡汤</p>\n<p>本文章到这里就结束啦~感兴趣的小伙伴可以复制代码去试试哦 😝</p>\n<p>对啦！！记得三连哦~ 💕 另外，提前祝大家中秋佳节过的快乐，一家团圆呀</p>\n<p><img alt=\"\" src=\"https://img-blog.csdnimg.cn/f7d1a050eda14c59942349c4ff20d792.gif\"/></p>\n<center>\n 👇问题解答 · 源码获取 · 技术交流 · 抱团学习请联系👇\n</center>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-06 14:48:08", "summary": "前言嗨喽大家好呀，这里是魔王呐中秋节，又称拜月节、月光诞、月夕等，节期在每年的农历八月十五日九月十。中秋节自古以来就有祭月、赏月、吃月饼、玩花灯、赏桂花、饮桂花酒等民俗，流传经久不息。马上有临近中秋，"}