{"blogid": "125544357", "writerAge": "码龄3年", "writerBlogNum": "132", "writerCollect": "453", "writerComment": "33", "writerFan": "410", "writerGrade": "4级", "writerIntegral": "1557", "writerName": "水w", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125544357.jpg", "writerRankTotal": "11805", "writerRankWeekly": "8973", "writerThumb": "95", "writerVisitNum": "127353", "blog_read_count": "1388", "blog_time": "于 2022-06-30 17:44:22 发布", "blog_title": "numpy之 警告VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%E8%AD%A6%E5%91%8A-toc\" style=\"margin-left:40px;\"><a href=\"#%E8%AD%A6%E5%91%8A\">警告</a></p>\n<p id=\"%C2%A0%E8%A7%A3%E5%86%B3-toc\" style=\"margin-left:40px;\"><a href=\"#%C2%A0%E8%A7%A3%E5%86%B3\">解决</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h2 id=\"%E8%AD%A6%E5%91%8A\">警告</h2>\n<p>这是我写的读取npz文件的代码，</p>\n<pre><code>datas = np.load(\"bsm.npz\", allow_pickle=True)\nprint(datas.files)\nfor key, arr in datas.items():\n    print(key, \": \", arr)</code></pre>\n<p>执行代码之后，可以输出预期的结果，但也得到了警告，如下： </p>\n<pre><code>VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (which is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to do this, you must specify 'dtype=object' when creating the ndarray.\n  val = np.asanyarray(val)</code></pre>\n<p><img alt=\"\" height=\"748\" src=\"..\\..\\static\\image\\2a8496b43b4845fd94fb647222cd9c6a.png\" width=\"1200\"/></p>\n<h2 id=\"%C2%A0%E8%A7%A3%E5%86%B3\"> 解决</h2>\n<blockquote>\n<p>      其实这不是错误，只是新版numpy的一个警告，可以忽略。当然总是显示影响美观，可以直接关闭该警告。</p>\n<p>      这是因为新的<strong>numpy版本</strong>，将 创建不同长度或形状的列表或元组或ndarray的列表或ndarray元组的功能 会被弃用，虽然能够运行，但是总提示Warning还是很不舒服，况且之后也不能这样用了。</p>\n<p></p>\n<p><span style=\"color:#ff9900;\"><strong>尝试网传的解决方法：</strong></span></p>\n<ul><li>使用更早的numpy版本</li><li>添加dtype=object</li><li>添加一行忽视报错代码</li></ul>\n</blockquote>\n<p>（1）尝试一下网上有种说法是添加“dtype=object”，</p>\n<pre><code># 3.加载数据\ndatas = np.load(\"bsm.npz\", allow_pickle=True, dtype=object)\nprint(datas.files)\nfor key, arr in datas.items():\n    print(key, \": \", arr)\n</code></pre>\n<p>但是还是报错，甚至都不会输出结果了， </p>\n<p><img alt=\"\" height=\"1200\" src=\"..\\..\\static\\image\\8097670d6573447f91616c2c49807068.png\" width=\"1200\"/></p>\n<p>（2）我们再尝试网上还有一种说法是：<strong>numpy的版本过高，需要降低numpy的版本</strong>。</p>\n<p>查看了自己的numpy的版本，我现在的numpy版本是1.23.0，</p>\n<p><img alt=\"\" height=\"1114\" src=\"..\\..\\static\\image\\dc2d992d82f14724b8552ae02533ed75.png\" width=\"1200\"/></p>\n<p> 好吧，那我们来重新安装一下低版本的numpy试试，</p>\n<p><img alt=\"\" height=\"1200\" src=\"..\\..\\static\\image\\cc909a8853954bd8bc2e00147ce4aa08.png\" width=\"1200\"/></p>\n<p> 等待安装完成的过程中，报错了， </p>\n<p><img alt=\"\" height=\"1200\" src=\"..\\..\\static\\image\\7b5bd8e6631041a1902c0b20e55c3749.png\" width=\"1200\"/></p>\n<p>好吧。</p>\n<p>（3）在网上还看见一种说法：</p>\n<pre><code>np.warnings.filterwarnings('ignore', category=np.VisibleDeprecationWarning)\n或\nnp.warnings.filterwarnings('error', category=np.VisibleDeprecationWarning)</code></pre>\n<p>我们来试试，</p>\n<p><img alt=\"\" height=\"1200\" src=\"..\\..\\static\\image\\d069ebb0399b476f98c8bb18396047f6.png\" width=\"1200\"/><img alt=\"\" height=\"1150\" src=\"..\\..\\static\\image\\de40aeecb60e410a8e8f2827254598ea.png\" width=\"1200\"/> 好像没什么用。。。。。。</p>\n<p>（4）最后还是决定忽视它...... </p>\n</div>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-06-30 17:44:22", "summary": "目录警告解决警告这是我写的读取文件的代码，执行代码之后，可以输出预期的结果，但也得到了警告，如下：解决其实这不是错误，只是新版的一个警告，可以忽略。当然总是显示影响美观，可以直接关闭该警告。这是因为新"}