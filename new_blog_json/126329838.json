{"blogid": "126329838", "writerAge": "码龄5年", "writerBlogNum": "33", "writerCollect": "1204", "writerComment": "663", "writerFan": "6984", "writerGrade": "5级", "writerIntegral": "2360", "writerName": "毅慎", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126329838.jpg", "writerRankTotal": "7829", "writerRankWeekly": "152", "writerThumb": "889", "writerVisitNum": "751324", "blog_read_count": "13937", "blog_time": "于 2022-08-22 07:15:00 发布", "blog_title": "JAVA 实现《坦克大战联机版》游戏", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_0\"></a>前言</h1>\n<p>如今的游戏已经成为世界上最大的娱乐休闲项目之一，游戏市场规模持续增长，潜力巨大，我国政府一向以来都特别鼓励游戏产业的发展，特别是我国当地的游戏产业，扶持力度连年加大，由此可见，我国对游戏产业的重视程度。该坦克大战游戏是对红白机经典90坦克大战的延续，对于80后，90后来说，都是童年里最宝贵的回忆，而80后，90后恰好占据着当今游戏人群的主体，对于他们来说，该坦克大战游戏不仅可以减轻人们的社会压力，放松身心，也可以回味小时候玩红白机游戏的疯狂时光，又不会沉迷于游戏，老少咸宜，能够更好地体验游戏的乐趣。</p>\n<p>《坦克大战联机版》游戏以坦克战斗为主题，用java语言实现，采用了swing技术进行了界面化处理，设计思路用了面向对象思想。</p>\n<h2><a id=\"_6\"></a>主要需求</h2>\n<p>该坦克大战选择使用以往的游戏规矩。服务器端创建并设置一个主机，客户端申请连接加入，若其IP输入判断无误，载入地图关卡并开始游戏，在游戏界面中，会实时显示敌方坦克数量和玩家坦克的生命数量及分数。敌方坦克自行移动和打出子弹，玩家通过敲击键盘来操控自己坦克的动作并打出子弹，子弹无法打中相同阵营的坦克，当两方阵营的子弹相交时会相互抵消，打中对方坦克时会产生爆炸效果，中途可以暂停、发送信息，玩家坦克吃掉超级武器后会赋予其特殊的功能，在游戏地图界面中还同时游戏中还包含了通信功能。如果取得了胜利，会显示“你过关了！”，如果失败了，则系统给出“GAME OEVR!还想再玩一次吗？（y/n）”的提示，如果玩家双方都选择继续游戏，则游戏重新加载并开始，不然结束并退出游戏界面。</p>\n<h1><a id=\"_10\"></a>主要设计</h1>\n<p>1、基地的设计：<br/> base类定义了几个变量，通过构造器初始化了基地的变量参数，使用g.drawImage()方法设置一幅图片来代表基地，通过public void move(){}来处理基地受到铁墙防护时的变化，使用if()判断语句判断铁墙的保护时间。游戏的核心重点自然就是基地了，一旦基地被毁，则玩家失败，游戏结束。游戏面板是游戏程序的关键，这里使用了方法paintComponent(Graphics g)来进行建立并设置其属性。</p>\n<p>2、敌方坦克的设计：<br/> enemy类设置了敌方坦克的共同属性，并根据不同外形的坦克设置了不同的属性，如椭圆形的坦克的移动速度会比较快，拥有多层颜色坦克的生命力与其拥有的颜色数量一样，利用随机函数Math.random()*4随机生成一个随机值，并转换成整形数值，将此值赋给变量direction来作为敌方坦克生成时的方向，再将Math.random()*200生成的随机值转换成整形数值，赋予变量interval来作为生成时的时间间隔，并且设置了地方坦克的移动周期，在一个周期内将会朝着相同的方向继续移动，并设置了其发射子弹的遂进行。而在特殊属性中，分别设置了敌方坦克的的火力、速度、图标等属性，再用方法draw(Graphics g){}向地图中加入敌方坦克。</p>\n<p>3、河道、草坪的设计：<br/> grass类继承了Actor接口，通过grass类构造器定义了草坪的x，y坐标和矩形边界以及图标，通过public void draw(Graphics g) {}方法绘制了草坪。游戏双方坦克及其子弹可以自由通过草坪。</p>\n<p>4、墙与铁墙的设计：<br/> 该模块通过new Rectangle(int x,int y,int width,int height)完成了一个矩形的创建，然后将其具体值赋给变量数组border[数组索引]生成了墙。坐标x和y为绘制矩形时的起始点，width,height分别为矩形绘制的宽和高。通过构造器定义普通墙和铁墙的矩形边界和图标。</p>\n<p>5、界面窗口的创建：<br/> 再该模块中，在ServerView类的构造器中用super()方法调用父类构造器设置窗口题目为“坦克大战”，使用JButton(String)定义了六个（退出、帮助、发送、暂停/继续、建立主机和隐藏）鼠标点击事件（即所谓的按钮），JTextField定义文本框，并将其设置为不可编辑。使用new drawingPanel()和setBackground(Color c)创建一个面板并设置背景颜色，再通过setBounds()和setLayout()方法定义了页面的大小并将页面布局定义为空。通过add（）方法向页面添加按钮和文本框。使用setColor（Color c）方法设置面板颜色为指定颜色，再通过继承自java.awt.Graphics类中的drawString（String，int，int）方法向面板添加并输出当前关数及剩余敌人数，通过if判断语句进行判断，如果消灭坦克数量大于敌方坦克数量则输出胜利场景。</p>\n<p>6、子弹功能设计：<br/> 该模块用setColor()方法设置子弹颜色为浅灰色，使用g.fillRect(int,int,int,int)方法设置子弹水平或垂直发射时的形状，子弹和什么东西相交通过if()判断语句和equals()方法来鉴定，然后再处理相交时子弹和其他对象的属性变化。</p>\n<p>7、坦克功能设计：<br/> 坦克吃掉了什么特殊武器图标通过if()判断语句和equals()方法来鉴定，如果吃到TNT图标，则已经出现了的敌方坦克全部被炸毁；如果吃到坦克图标，玩家坦克加一条生命；如果吃到五角星图标，则提升玩家坦克子弹火力并且速度加快，可以打破铁墙；若是头盔图标，则玩家坦克获得防护盾且免疫敌方子弹；如果吃到铁墙图标，则基地由普通墙变为铁墙，如果吃到钟表图标，则时间停止，所有敌方坦克静止。</p>\n<p>8、服务器设计：<br/> 在ServerModel类，实现了ActionListener接口，具备了监听功能。创建了一些连接变量和游戏变量，设置了布尔类型的服务器状态变量，使用构造器完成了消息队列信息的设置，使用createServer(){}方法建立主机，当布尔变量serverCreated的值为true时，主机创建成功，还设置了一个端口号，用try{}catch{}语句处理代码执行时发生的异常，并给出错误提示，服务器通过accept()方法与客户端建立连接，当端口号没有被其他应用程序占用并IP地址正确，则成功完成连接，载入游戏，如若不然，就会显示相应的错误提示。使用addMessage()在屏幕上显示消息，使用removeMessage()方法删除屏幕上的消息，通过addActor()和remove()方法完成了向地图中增添新的物体对象和清除已经不存在了的物体对象的操作。</p>\n<h1><a id=\"_40\"></a>功能截图</h1>\n<p>启动服务端和客户端<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ab1e8019c06f4e0f9693c69f93c459ff.png\"/>连接主机成功：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5a7d88474df94de29af0cc1b21c6f745.png\"/><br/> 帮助提示：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d1e5eb99e3234f0aaf8e9231efff287a.png\"/>游戏界面：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6a07a1cf0c414622b6a80ed34c062fd5.png\"/></p>\n<h1><a id=\"_53\"></a>代码实现</h1>\n<p>ServerModel</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>net<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>awt<span class=\"token punctuation\">.</span>event<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>awt<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServerModel</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">ActionListener</span><span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token comment\">//视图参考</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerView</span> view<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//连接变量</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerSocket</span> serverSocket<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Socket</span> clientSocket<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">PrintWriter</span> out<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">BufferedReader</span> in<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> inputLine<span class=\"token punctuation\">,</span> outputLine<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//服务器状态</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> serverCreated<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> clientConnected<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> gameStarted<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> gamePaused<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> gameOver<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> serverVoteYes<span class=\"token punctuation\">,</span> serverVoteNo<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> clientVoteYes<span class=\"token punctuation\">,</span> clientVoteNo<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> pausePressed<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//游戏消息</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> messageQueue<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> messageIndex<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> playerTypedMessage <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//实际的游戏在这个线程上运行，而主线程监听用户的输入</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Ticker</span> t<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> textures<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">//游戏变量</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> gameFlow<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">Actor</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> actors<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> player P1<span class=\"token punctuation\">;</span>   <span class=\"token comment\">//由服务器玩家控制的坦克</span>\n\t<span class=\"token keyword\">public</span> player P2<span class=\"token punctuation\">;</span>   <span class=\"token comment\">//有客户端玩家控制的坦克</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerModel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServerView</span> thisview<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n\t\tview <span class=\"token operator\">=</span> thisview<span class=\"token punctuation\">;</span>\n\t\tmessageQueue <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span>messageQueue <span class=\"token operator\">=</span> messageQueue<span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"欢迎来到坦克大战主机端!  请点击\\\"建立主机\\\"按钮开始游戏\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Ticker</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tt<span class=\"token punctuation\">.</span><span class=\"token function\">addActionListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n \t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正在建立主机(端口9999)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n \t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\tserverSocket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerSocket</span><span class=\"token punctuation\">(</span><span class=\"token number\">9999</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \tserverCreated <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"无法建立主机，请确认端口9999没有被别的程序使用\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tt<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"建立完成，等待玩家连接\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t   clientSocket <span class=\"token operator\">=</span> serverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">accept</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t       clientConnected <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t    \tout <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PrintWriter</span><span class=\"token punctuation\">(</span>clientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">getOutputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t    in <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedReader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">InputStreamReader</span><span class=\"token punctuation\">(</span>\n\t\t\t\tclientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">getInputStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"连接中出现错误，请重新建立主机\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tserverCreated <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tclientConnected <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tt<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">//当发生错误，摧毁一切已创建的</span>\n\t\t\t<span class=\"token keyword\">try</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\tserverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tclientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tout<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tin<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n\t\tview<span class=\"token punctuation\">.</span>messageField<span class=\"token punctuation\">.</span><span class=\"token function\">setEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"玩家已连接上，开始载入游戏\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//一旦客户端连接，然后告诉客户端开始加载游戏</span>\n\t\t out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"L1;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//加载游戏</span>\n\t\ttextures <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">[</span><span class=\"token number\">88</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> textures<span class=\"token punctuation\">.</span>length<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\ttextures<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Toolkit</span><span class=\"token punctuation\">.</span><span class=\"token function\">getDefaultToolkit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getImage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"..\\..\\static\\image\\\\\"</span> <span class=\"token operator\">+</span> i <span class=\"token operator\">+</span> <span class=\"token string\">\".jpg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\t\t<span class=\"token comment\">//设置第一关</span>\n\t\tactors <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Actor</span><span class=\"token punctuation\">[</span><span class=\"token number\">400</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">loadLevel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tP1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">player</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1P\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">addActor</span><span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tP2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">player</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2P\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">addActor</span><span class=\"token punctuation\">(</span>P2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\n\t\tgameStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span>actors <span class=\"token operator\">=</span> actors<span class=\"token punctuation\">;</span>\n\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span>gameStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"载入完毕，游戏开始了！\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">actionPerformed</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ActionEvent</span> e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//如果程序未能创建服务器，则什么也不做</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>serverCreated<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//游戏逻辑回路，</span>\n\t\t<span class=\"token keyword\">try</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>inputLine <span class=\"token operator\">=</span> in<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t<span class=\"token comment\">//处理客户反馈消息</span>\n\t\t\t\tfeedbackHandler<span class=\"token punctuation\">.</span><span class=\"token function\">handleInstruction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> inputLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\toutputLine <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gamePaused<span class=\"token punctuation\">)</span>\n\t\t\t\t\tgameFlow<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pausePressed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gamePaused<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span> <span class=\"token string\">\"x0;\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span> <span class=\"token string\">\"x1;\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\tpausePressed <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gameOver <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">.</span>life <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> P2<span class=\"token punctuation\">.</span>life <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">!=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"a;\"</span><span class=\"token punctuation\">;</span>\n\n\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">!=</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> messageIndex <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> serverVoteYes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"等待用户端玩家的回应...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">!=</span> <span class=\"token number\">1</span> <span class=\"token operator\">||</span> messageIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GAME OVER ! 　想再玩一次吗 ( y / n ) ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\tgameOver <span class=\"token operator\">=</span>  <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP2<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>serverVoteNo <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>serverVoteYes<span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t<span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>serverVoteYes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"j;\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>clientVoteYes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"用户端玩家决定再玩一次，游戏重新开始了...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t\t\t\t<span class=\"token comment\">//重新启动游戏</span>\n\t\t\t\t\t\t\tP1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">player</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1P\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tP2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">player</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2P\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">loadLevel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tgameOver <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tserverVoteYes <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tclientVoteYes <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tserverVoteNo <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tenemy<span class=\"token punctuation\">.</span>freezedMoment <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tenemy<span class=\"token punctuation\">.</span>freezedTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\tgameFlow <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t\t\t\t<span class=\"token comment\">//告诉客户端程序重新启动游戏</span>\n\t\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"L1;\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">.</span>deathCount <span class=\"token operator\">==</span> <span class=\"token number\">20</span> <span class=\"token operator\">&amp;&amp;</span>  <span class=\"token operator\">!</span>gameOver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\tlevel<span class=\"token punctuation\">.</span>winningCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">.</span>winningCount <span class=\"token operator\">==</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\tP1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tP2<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">.</span>winningCount <span class=\"token operator\">==</span> <span class=\"token number\">470</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>P1<span class=\"token punctuation\">.</span>life <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t\tP1<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>P2<span class=\"token punctuation\">.</span>life <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\t\tP2<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">loadLevel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token comment\">//告诉客户端程序加载下一关</span>\n\t\t\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"L\"</span> <span class=\"token operator\">+</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span>  <span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">.</span>currentLevel<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\";\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>level<span class=\"token punctuation\">.</span>winningCount  <span class=\"token operator\">==</span> <span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\tP1<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tP2<span class=\"token punctuation\">.</span>freezed <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tlevel<span class=\"token punctuation\">.</span>deathCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tlevel<span class=\"token punctuation\">.</span>winningCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token comment\">//大量生产敌人坦克</span>\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gamePaused<span class=\"token punctuation\">)</span>\n\t\t\t\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">spawnEnemy</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> actors<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>actors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t\tactors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token comment\">//从消息队列中删除一个消息每10秒，（如果有的话）</span>\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gameFlow<span class=\"token operator\">%</span><span class=\"token number\">300</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token function\">removeMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token comment\">//将玩家、关卡的信息写入输出行</span>\n\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"p\"</span> <span class=\"token operator\">+</span> level<span class=\"token punctuation\">.</span>enemyLeft <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">+</span> level<span class=\"token punctuation\">.</span>currentLevel <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">+</span> P1<span class=\"token punctuation\">.</span>life <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">+</span> P1<span class=\"token punctuation\">.</span>scores <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">+</span>  P2<span class=\"token punctuation\">.</span>life <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span> <span class=\"token operator\">+</span> P2<span class=\"token punctuation\">.</span>scores <span class=\"token operator\">+</span><span class=\"token string\">\";\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\toutputLine<span class=\"token operator\">+=</span><span class=\"token string\">\"g\"</span> <span class=\"token operator\">+</span> level<span class=\"token punctuation\">.</span>winningCount <span class=\"token operator\">+</span> <span class=\"token string\">\";\"</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token comment\">//将玩家类型信息写入输出行</span>\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>playerTypedMessage<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\toutputLine<span class=\"token operator\">+=</span>playerTypedMessage<span class=\"token punctuation\">;</span>\n\t\t\t\t\tplayerTypedMessage <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token comment\">//将最后的指令字符串发送到客户端程序</span>\n\t\t\t\tout<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>outputLine<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token comment\">//调用视图重绘本身</span>\n\t\t\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">repaint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t\t<span class=\"token comment\">//如果玩家切换到对话框模式，则停止所有坦克动作</span>\n\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>view<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">hasFocus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>moveLeft <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>moveUp <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>moveDown <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>moveRight <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\tP1<span class=\"token punctuation\">.</span>fire <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span>\n\n\t\t\t\t<span class=\"token class-name\">Thread</span><span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> ex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\tex<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tview<span class=\"token punctuation\">.</span>messageField<span class=\"token punctuation\">.</span><span class=\"token function\">setEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tserverVoteYes<span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tserverVoteNo <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tclientVoteYes <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tserverCreated <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tgameStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tgameOver <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tgameFlow <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\tenemy<span class=\"token punctuation\">.</span>freezedTime <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\tenemy<span class=\"token punctuation\">.</span>freezedMoment <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span>gameStarted <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\t\t\tt<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"玩家退出了，请重新建立主机\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token comment\">//当发生错误在游戏中，摧毁任何东西，包括游戏的变量</span>\n\t\t\t<span class=\"token keyword\">try</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\tout<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tin<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tclientSocket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \t\tserverSocket<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> exc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n\n\t\t\t<span class=\"token comment\">//破坏游戏数据</span>\n\t\t\tP1 <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\tP2 <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\tlevel<span class=\"token punctuation\">.</span><span class=\"token function\">reset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">//添加游戏对象（如坦克，子弹等..）到游戏系统</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addActor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Actor</span> actor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> actors<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>actors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\tactors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> actor<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">//从游戏系统中移除游戏对象</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeActor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Actor</span> actor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> actors<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span>\n\t\t\t\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>actors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> actor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t\t\tactors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token comment\">//在屏幕上显示一行消息</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addMessage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>messageIndex <span class=\"token operator\">&lt;</span> <span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\tmessageQueue<span class=\"token punctuation\">[</span>messageIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span>\n\t\t\tmessageIndex<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span>  i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\t\tmessageQueue<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> messageQueue<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\tmessageQueue<span class=\"token punctuation\">[</span><span class=\"token number\">7</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token comment\">//调用视图重绘屏幕如果游戏有没有开始</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gameStarted<span class=\"token punctuation\">)</span>\n\t\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">repaint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">//删除屏幕上最早的信息</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">removeMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>messageIndex <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t\tmessageIndex<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span>  i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> messageIndex<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t\tmessageQueue<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> messageQueue<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\tmessageQueue<span class=\"token punctuation\">[</span>messageIndex<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//调用视图重绘屏幕如果比赛还没开始</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>gameStarted<span class=\"token punctuation\">)</span>\n\t\t\tview<span class=\"token punctuation\">.</span>mainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">repaint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ServerView</p>\n<pre><code class=\"prism language-java\">\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>swing<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>awt<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>awt<span class=\"token punctuation\">.</span>event<span class=\"token punctuation\">.</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">//这个类表示服务器的图形界面</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServerView</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">JFrame</span><span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">public</span> drawingPanel mainPanel<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">JButton</span> createServer<span class=\"token punctuation\">,</span> exit<span class=\"token punctuation\">,</span> pauseAndResume<span class=\"token punctuation\">,</span> help<span class=\"token punctuation\">,</span> hiddenButton<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">JTextField</span> messageField<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">JButton</span> sendMessage<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerControler</span> controler<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerModel</span> model<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">public</span> <span class=\"token class-name\">ServerView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n\t\t<span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"坦克大战\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t<span class=\"token class-name\">UIManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">setLookAndFeel</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UIManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getSystemLookAndFeelClassName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setLayout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//制作动画绘制的主面板</span>\n\t\tmainPanel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">drawingPanel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">setLayout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">22</span><span class=\"token punctuation\">,</span> <span class=\"token number\">679</span><span class=\"token punctuation\">,</span> <span class=\"token number\">605</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">setBackground</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmessageField <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JTextField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmessageField<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">519</span><span class=\"token punctuation\">,</span> <span class=\"token number\">560</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmessageField<span class=\"token punctuation\">.</span><span class=\"token function\">setEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsendMessage <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"发送\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsendMessage<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">570</span><span class=\"token punctuation\">,</span><span class=\"token number\">518</span><span class=\"token punctuation\">,</span> <span class=\"token number\">62</span><span class=\"token punctuation\">,</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsendMessage<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>messageField<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>sendMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>mainPanel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tmainPanel<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//制作选项按钮</span>\n\t\tcreateServer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"建立主机\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcreateServer<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>createServer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tcreateServer<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\tpauseAndResume <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"暂停/继续\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpauseAndResume<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>pauseAndResume<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tpauseAndResume<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\thelp <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"帮助\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\thelp<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">240</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>help<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\thelp<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\texit <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JButton</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"退出\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\texit<span class=\"token punctuation\">.</span><span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">360</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">getContentPane</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>exit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\texit<span class=\"token punctuation\">.</span><span class=\"token function\">setFocusable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//设置主框架</span>\n\t\t<span class=\"token function\">setDefaultCloseOperation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">JFrame</span><span class=\"token punctuation\">.</span>EXIT_ON_CLOSE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">setBounds</span><span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span> <span class=\"token number\">130</span><span class=\"token punctuation\">,</span> <span class=\"token number\">640</span><span class=\"token punctuation\">,</span> <span class=\"token number\">590</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token function\">setResizable</span><span class=\"token punctuation\">(</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//设置服务器模式</span>\n\t\tmodel <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerModel</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token comment\">//设置服务器控制器</span>\n\t\tcontroler <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerControler</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\t<span class=\"token punctuation\">}</span>\n\n\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">new</span> <span class=\"token class-name\">ServerView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h1><a id=\"_508\"></a>总结</h1>\n<p>通过此次的《坦克大战联机版》游戏实现，让我对swing的相关知识有了进一步的了解，对java这门语言也有了比以前更深刻的认识。</p>\n<p>java的一些基本语法，比如数据类型、运算符、程序流程控制和数组等，理解更加透彻。java最核心的核心就是面向对象思想，对于这一个概念，终于悟到了一些。</p>\n<h1><a id=\"_514\"></a>源码获取</h1>\n<p>可关注博主后，私聊博主免费获取<br/> 需要技术指导，写项目程序，等更多服务请联系博主</p>\n<blockquote>\n<p>今天是持续写作的第 <font color=\"red\">29</font> / 100 天。<br/> 可以<font color=\"blue\">关注</font>我，<font color=\"blue\">点赞</font>我、<font color=\"blue\">评论</font>我、<font color=\"blue\">收藏</font>我啦。</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-08-22 07:15:00", "summary": "前言如今的游戏已经成为世界上最大的娱乐休闲项目之一，游戏市场规模持续增长，潜力巨大，我国政府一向以来都特别鼓励游戏产业的发展，特别是我国当地的游戏产业，扶持力度连年加大，由此可见，我国对游戏产业的重视"}