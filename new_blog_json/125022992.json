{"blogid": "125022992", "writerAge": "码龄3年", "writerBlogNum": "1", "writerCollect": "12", "writerComment": "11", "writerFan": "1", "writerGrade": "1级", "writerIntegral": "27", "writerName": "贤@", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125022992.jpg", "writerRankTotal": "187582", "writerRankWeekly": "1275286", "writerThumb": "1", "writerVisitNum": "1170", "blog_read_count": "1170", "blog_time": "于 2022-05-28 22:02:40 发布", "blog_title": "Unity如何动态改变文本框的值，并实现吃金币加分并播放音效的功能", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p></p>\n<p>在Unity编辑器当中，我们可以手动修改文本框的内容，但是在游戏游玩过程当中，我们想通过触发特定事件动态改变文本内容，例如角色吃到金币之后会加分并显示到右上角，那该如何实现呢？</p>\n<p class=\"img-center\"><img alt=\"\" height=\"74\" src=\"..\\..\\static\\image\\cf64abbd755b43a29437144771a59082.png\" width=\"222\"/></p>\n<p>首先创建文本框</p>\n<p><img alt=\"\" height=\"878\" src=\"..\\..\\static\\image\\f6ccdbc6590d444ca29909f8e73a9164.png\" width=\"856\"/></p>\n<p></p>\n<p>创建两个，分别在文本框输入分数：以及0（注：不一定是0，可以是其他内容）</p>\n<p><img alt=\"\" height=\"537\" src=\"..\\..\\static\\image\\627598994b414a1b8976a54c16303595.png\" width=\"587\"/></p>\n<p></p>\n<p>然后拖拽到你觉得满意的地方，例如右上角</p>\n<p><img alt=\"\" height=\"239\" src=\"..\\..\\static\\image\\65c1519651964d4a9593584e5022d35c.png\" width=\"489\"/></p>\n<p>接下来，创建一个C#脚本，命名随意（这里我命名为GamePlayer）</p>\n<p><img alt=\"\" height=\"448\" src=\"..\\..\\static\\image\\1966828c9c3a4d909e3e83b5e7097716.png\" width=\"630\"/></p>\n<p>然后，创建一个浮点型变量，命名为score。再重写一个方法，在Visual Studio中输入OnCollisionEnter自动跳出，这个方法是脚本挂载的物体被其他物体碰撞的时候执行的，然后判断碰撞的物体是不是金币，即</p>\n<p> if (collision.gameObject.name == \"GoldCoin\")<br/>         {<!-- --><br/>             Destroy(collision.gameObject);<br/>             GameObject.Find(\"DonnotDestory\").GetComponent&lt;DonnotDestory&gt;().score += 20;<br/>             source.Play();<br/>         }</p>\n<p>具体代码如下：</p>\n<pre><code class=\"language-cs\">using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.SceneManagement;\n\npublic class GamePlayer : MonoBehaviour\n{\n    public float score;//定义分数变量\n    private AudioSource source;//音效组件\n    void Start()\n    {\n        source = GetComponent&lt;AudioSource&gt;();//初始化音效组件\n    }\n    void Update()\n    {\n\n    }\n    private void OnCollisionEnter(Collision collision)//有物体碰撞时执行这个方法\n    {\n       \n        if (collision.gameObject.name == \"GoldCoin\")//如果碰撞的物体名为\"GoidCoin\"\n        {\n            Destroy(collision.gameObject);//让被吃的金币在场景中消失\n            score += 20;//加20分\n            source.Play();//播放音效\n        }\n    }\n}\n</code></pre>\n<p> 然后，把这个脚本拖拽到主角身上（在Hierarchy视图）</p>\n<p><img alt=\"\" height=\"104\" src=\"..\\..\\static\\image\\e9a25b3b481c45a8aa7fb5db998810c9.png\" width=\"463\"/></p>\n<p>再创建个脚本，我命名为ScoreText</p>\n<pre><code class=\"language-cs\">using System;\nusing System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\npublic class ScoreText : MonoBehaviour\n{\n    private Text m_Text;//定义文本组件\n    public GameObject player; \n    void Start()\n    {\n        m_Text = GetComponent&lt;Text&gt;();\n        player = GameObject.Find(\"ThirdPersonController_LITE\");\n        //Find括号里面填的是主角在场景中的名字，这一步很关键\n        //以上两个代码很耗系统资源，所以尽量不要写在Update里面\n    }\n\n    void Update()\n    {\n        m_Text.text = player.GetComponent&lt;GamePlayer&gt;().score.ToString();\n        //让文本框显示的内容等同于主角目录下GamePlayer脚本当中的score变量的值，并且转化为String\n    }\n}\n</code></pre>\n<p>然后挂载到显示数值的文本框中</p>\n<p><img alt=\"\" height=\"714\" src=\"..\\..\\static\\image\\4a0aca02f01d487a9d37a666c7968117.png\" width=\"478\"/></p>\n<p>这样，实现动态文本框的功能就完成了，不过依然跑不起来，因为刚刚我在第一个脚本中写了关于音效的代码，现在还没用上。</p>\n<p>我们回到主角的属性中，添加一个组件，叫Audio Source</p>\n<p><img alt=\"\" height=\"546\" src=\"..\\..\\static\\image\\c860f47dc11c4fbba245831a00fb990c.png\" width=\"454\"/></p>\n<p>然后，把音频资源拖拽到这里（音频资源可以去爱给网找）</p>\n<p><img alt=\"\" height=\"554\" src=\"..\\..\\static\\image\\b82b97dc013140abaa461138c2a4bb3d.png\" width=\"459\"/> </p>\n<p> 这样，就完成了，现在试试效果</p>\n<p><img alt=\"\" height=\"578\" src=\"..\\..\\static\\image\\0283fb7e1efc4c4580ef26e9212a2b16.png\" width=\"444\"/> </p>\n<p><img alt=\"\" height=\"171\" src=\"..\\..\\static\\image\\2f542a9868c44876a8a637831830f7ec.png\" width=\"326\"/> </p>\n<p>以上，效果已经实现了</p>\n<p>补充一点，如果像我这样，让文本框好看一些：在文本框层次之上再套个Image组件，然后再拖入你想要的图片即可，字体颜色可以在文本框组件里面改</p>\n<p><img alt=\"\" height=\"197\" src=\"..\\..\\static\\image\\a15b4c7ac46c427aab7a6331a6726049.png\" width=\"185\"/></p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-05-28 22:02:40", "summary": "在编辑器当中，我们可以手动修改文本框的内容，但是在游戏游玩过程当中，我们想通过触发特定事件动态改变文本内容，例如角色吃到金币之后会加分并显示到右上角，那该如何实现呢？首先创建文本框创建两个，分别在文本"}