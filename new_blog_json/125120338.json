{"blogid": "125120338", "writerAge": "码龄4年", "writerBlogNum": "55", "writerCollect": "325", "writerComment": "15", "writerFan": "23", "writerGrade": "3级", "writerIntegral": "796", "writerName": "heiqi_whf", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125120338.jpg", "writerRankTotal": "22253", "writerRankWeekly": "13096", "writerThumb": "84", "writerVisitNum": "91894", "blog_read_count": "2567", "blog_time": "于 2022-06-04 15:12:25 发布", "blog_title": "mysql 数据去重的三种方式[实战]", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p class=\"img-center\"><img alt=\"\" src=\"..\\..\\static\\image\\7b8adeeffbd3b42f4e51e38b1edb5d1f.png\"/></p>\n<p>一、背景。</p>\n<p>最近在和系统模块做数据联调，其中有一个需求是将两个角色下的相关数据​对比后将最新的数据返回出去，于是就想到了去重，再次做一个总结。</p>\n<p>二、数据去重三种方法使用。</p>\n<p><img alt=\"\" height=\"351\" src=\"..\\..\\static\\image\\00171ae00b1d41aca20f4b6c69963f9f.png\" width=\"757\"/></p>\n<p>1.​通过MySQL DISTINCT：去重（过滤重复数据）</p>\n<p>​ 1.1.在使用 mysql SELECT 语句查询数据的时候返回的是所有匹配的行。</p>\n<pre><code>SELECT  t.age FROM t_user t</code></pre>\n<p><img alt=\"\" height=\"515\" src=\"..\\..\\static\\image\\8159907b8314409fab039f47dc22c1b4.png\" width=\"1200\"/></p>\n<p>可以看到查询结果返回了 10 条记录，其中有一些重复的 age 值，有时出于对数据分析的要求，需要消除重复的记录值。</p>\n<p>1.2.DISTINCT 关键字指示 MySQL 消除重复的记录值。</p>\n<p>语法格式为：</p>\n<pre><code>SELECT DISTINCT &lt;字段名&gt; FROM &lt;表名&gt;;</code></pre>\n<p><img alt=\"\" height=\"438\" src=\"..\\..\\static\\image\\42fa5432c6324aaabbb250db30a64194.png\" width=\"1175\"/></p>\n<pre><code>SELECT DISTINCT t.age FROM t_user t</code></pre>\n<p> 由运行结果可以看到，这次查询结果只返回了 5 条记录的 age 值，且没有重复的值。</p>\n<p>ps：</p>\n<p>其中，“字段名”为需要消除重复记录的字段名称，多个字段时用逗号隔开。</p>\n<p>使用 DISTINCT 关键字时需要注意以下几点：</p>\n<ul><li> <p>DISTINCT 关键字只能在 SELECT 语句中使用。</p> </li><li> <p>在对一个或多个字段去重时，DISTINCT 关键字必须在所有字段的最前面。</p> </li><li> <p>如果 DISTINCT 关键字后有多个字段，则会对多个字段进行组合去重，也就是说，只有多个字段组合起来完全是一样的情况下才会被去重。</p> </li></ul>\n<p>2.group by</p>\n<p><img alt=\"\" height=\"444\" src=\"..\\..\\static\\image\\004092e20ba44ca4ab14028fd7cd8905.png\" width=\"1200\"/></p>\n<p> </p>\n<pre><code>SELECT t.age FROM t_user t GROUP BY t.age;</code></pre>\n<p>3.row_number窗口函数。​</p>\n<p><strong> 语法格式为：</strong></p>\n<pre><code>row_number() over (partition by &lt;用于分组的字段名&gt; order by &lt;用于组内排序的字段名&gt;)</code></pre>\n<p>项目使用的去重：​</p>\n<pre><code>select * from (select t.*,row_number() over(partition by t.children_id  order by t.update_time DESC) rn       </code><code>from mdm_data_authority_view_info t where t.DATA_CLASS_ID = '分类id' AND t.DATA_ROLE_ID </code><code>IN ( '角色id', '角色id' ))              </code><code>where rn = 1;  </code></pre>\n<p>三、总结。</p>\n<p> 感谢大家的关注 分享 收藏 看的人越多，表哥推送的就越猛！关注的人越多，表哥的激情更旺盛。</p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-06-04 15:12:25", "summary": "一、背景。最近在和系统模块做数据联调，其中有一个需求是将两个角色下的相关数据对比后将最新的数据返回出去，于是就想到了去重，再次做一个总结。二、数据去重三种方法使用。通过：去重过滤重复数据在使用语句查询"}