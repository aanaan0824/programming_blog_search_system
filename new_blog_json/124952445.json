{"blogid": "124952445", "writerAge": "码龄4年", "writerBlogNum": "3", "writerCollect": "9", "writerComment": "2", "writerFan": "0", "writerGrade": "1级", "writerIntegral": "34", "writerName": "weixin_41983685", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124952445.jpg", "writerRankTotal": "178620", "writerRankWeekly": "1164309", "writerThumb": "2", "writerVisitNum": "2170", "blog_read_count": "2037", "blog_time": "于 2022-05-24 23:25:17 发布", "blog_title": "windows下安装RocketMQ", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#RocketMQ_6\">一、RocketMQ是什么？</a></li><li><a href=\"#_13\">二、准备工作</a></li><li><ul><li><a href=\"#1_14\">1.环境要求：</a></li><li><a href=\"#2_19\">2.下载与解压：</a></li></ul>\n</li><li><a href=\"#_32\">三、启动</a></li><li><a href=\"#_79\">四、测试</a></li><li><a href=\"#_99\">五、安装管理端</a></li><li><a href=\"#_115\">总结</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"RocketMQ_6\"></a>一、RocketMQ是什么？</h1>\n<p>RocketMQ是阿里开源的一款非常优秀中间件产品，脱胎于阿里的另一款队列技术MetaQ，后捐赠给Apache基金<br/> 会作为一款孵化技术，仅仅经历了一年多的时间就成为Apache基金会的顶级项目。并且它现在已经在阿里内部被<br/> 广泛的应用，并且经受住了多次双十一的这种极致场景的压力。（2017年的双十一，RocketMQ流转的消息量达<br/> 到了万亿级，峰值TPS达到5600万）。并且其内部通过Java语言开发，便于阅读与修改。</p>\n<hr/>\n<h1><a id=\"_13\"></a>二、准备工作</h1>\n<h2><a id=\"1_14\"></a>1.环境要求：</h2>\n<ul><li>64位JDK 1.8+;</li><li>Maven 3.2.x;</li><li>64位操作系统系统，本文档在Windows上安装</li></ul>\n<h2><a id=\"2_19\"></a>2.下载与解压：</h2>\n<p>下载地址：<a href=\"https://archive.apache.org/dist/rocketmq/4.5.1/\">点击跳转</a></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ad2ca1cd49c3400f8ea1f442fb86d45f.png\"/></p>\n<p>解压到一个无中文无空格的目录下，解压后目录如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\25193a1cc1e440da9ca2fd8191ee0b6b.png\"/></p>\n<p><strong>注意：解压到一个无中文无空格的目录下，否则会有各种奇怪的错误</strong>。</p>\n<hr/>\n<h1><a id=\"_32\"></a>三、启动</h1>\n<p>java的默认启动参数中，启动时堆内存的大小为2g，太大了，调整一下<br/> 打开runserver.cmd</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\00a7a26676484b85b082dcbfbcbd1758.png\"/></p>\n<p>把Xms、Xmx、-Xmn都设置成512m</p>\n<pre><code>set \"JAVA_OPT=%JAVA_OPT% -server -Xms512m -Xmx512m -Xmn512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m\"\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\baf3ac11a6f84915ac54ae8ee2b5f044.png\"/></p>\n<p><strong>同理设置 runbroker</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ed8b518f1b394e4da4d747faf30bce52.png\"/></p>\n<pre><code>set \"JAVA_OPT=%JAVA_OPT% ‐server ‐Drocketmq.broker.diskSpaceWarningLevelRatio=0.98 ‐Xms512m ‐Xmx512m ‐Xmn512m\"\n</code></pre>\n<p>此处 ‐Drocketmq.broker.diskSpaceWarningLevelRatio=0.98的意思是：把Broker磁盘空间利用率设置为98%，默认是85%。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f03f47d83e7e49daad0946e367f19e79.png\"/></p>\n<hr/>\n<p><strong>这里%CLASSPATH%要加个双引号，不然启动时会找不到jdk</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c7067c45cc7848e6ada197008dcafe1a.png\"/></p>\n<hr/>\n<ol start=\"3\"><li><strong>启动NameServer</strong><br/> 双击mqnamesrv.cmd启动，如下显示则启动成功<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cf1a0166431f4d2885540ed2ca934662.png\"/></li></ol>\n<p>4 <strong>启动broker</strong><br/> 进入cmd命令窗口，<br/> 执行</p>\n<pre><code>mqbroker.cmd -n localhost:9876 autoCreateTopicEnable=true\n</code></pre>\n<p>如下显示则启动成功<img alt=\"如下显示则启动成功在这里插入图片描述\" src=\"..\\..\\static\\image\\e96c8f55b6be44a0a3f2b777876d2cad.png\"/></p>\n<hr/>\n<h1><a id=\"_79\"></a>四、测试</h1>\n<p>1、发送消息<br/> 进入cmd命令窗口，执行：</p>\n<pre><code>set NAMESRV_ADDR=127.0.0.1:9876\ncd G:\\rocketmq\\bin\ntools.cmd org.apache.rocketmq.example.quickstart.Producer\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f6588512313b434f99238e64e6c69ffe.png\"/></p>\n<p>2、接送消息<br/> 进入cmd命令窗口，执行：</p>\n<pre><code>set NAMESRV_ADDR=127.0.0.1:9876\ntools.cmd org.apache.rocketmq.example.quickstart.Consumer\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e0a2ceb84b714efe9f1e2b3e27b9abda.png\"/></p>\n<h1><a id=\"_99\"></a>五、安装管理端</h1>\n<p>RocketMQ提供了UI管理工具，名为rocketmq-console</p>\n<ol><li><strong>下载源码</strong><br/> 项目地址：</li></ol>\n<blockquote>\n<p>https://github.com/apache/rocketmqexternals/tree/master/rocketmq-console</p>\n</blockquote>\n<ol start=\"2\"><li><strong>修改配置</strong><br/> 修改rocketmq-console\\src\\main\\resources\\application.properties<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7246c235c5a74213a0a222cf88a158c1.png\"/></li><li><strong>启动项目</strong></li></ol>\n<ul><li>直接启动：</li></ul>\n<blockquote>\n<p>mvn spring-boot:run</p>\n</blockquote>\n<ul><li>先打成jar包再启动：</li></ul>\n<blockquote>\n<p>mvn clean package -Dmaven.test.skip=true<br/> java -jar target/rocketmq-console-ng-1.0.1.jar</p>\n</blockquote>\n<h1><a id=\"_115\"></a>总结</h1>\n<p>以上就是RocketMQ的安装（windows），本文仅仅简单介绍了RocketMQ的安装使用。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-05-24 23:25:17", "summary": "文章目录一、是什么？二、准备工作环境要求：下载与解压：三、启动四、测试五、安装管理端总结一、是什么？是阿里开源的一款非常优秀中间件产品，脱胎于阿里的另一款队列技术，后捐赠给基金会作为一款孵化技术，仅仅"}