{"blogid": "125509344", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "16", "writerCollect": "278", "writerComment": "439", "writerFan": "502", "writerGrade": "4çº§", "writerIntegral": "933", "writerName": "ç¨‹åºå‘˜çˆ±æ‘¸é±¼", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125509344.jpg", "writerRankTotal": "30275", "writerRankWeekly": "278408", "writerThumb": "265", "writerVisitNum": "10036", "blog_read_count": "5062", "blog_time": "å·²äºÂ 2022-06-28 21:04:42Â ä¿®æ”¹", "blog_title": "ã€Spring Cloudã€‘æ•™ä½ ååˆ†é’Ÿå­¦ä¼šGateway~", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h1><a id=\"_0\"></a></h1>\n<blockquote>\n<ul><li><strong>ğŸ’‚ ä¸ªäººä¸»é¡µ:</strong> <a href=\"https://blog.csdn.net/lcshen1234?spm=1011.2432.3001.5343\" title=\"ç¨‹åºå‘˜çˆ±æ‘¸é±¼\">ç¨‹åºå‘˜çˆ±æ‘¸é±¼</a></li><li><strong>ğŸ¤Ÿ ç‰ˆæƒ:</strong> æœ¬æ–‡ç”±ã€<strong>ç¨‹åºå‘˜çˆ±æ‘¸é±¼</strong>ã€‘åŸåˆ›ã€åœ¨CSDNé¦–å‘ã€éœ€è¦è½¬è½½è¯·è”ç³»åšä¸»</li><li>ğŸ’¬ å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ã€<strong>æ¬¢è¿å…³æ³¨+ç‚¹èµ+æ”¶è—(ä¸€é”®ä¸‰è¿)å“¦</strong></li><li>ğŸ’… <strong>æƒ³å¯»æ‰¾å…±åŒæˆé•¿çš„å°ä¼™ä¼´ï¼Œå¯ä»¥äº’ç²‰å“¦</strong></li></ul>\n</blockquote>\n<div>\n<h3 id=\"%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95\">ğŸ’¬æ–‡ç« ç›®å½•</h3>\n<p id=\"-toc\" style=\"margin-left:0px;\">ğŸ’…<a href=\"#\">1.1 æ¦‚è¿°</a></p>\n<p id=\"%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD-toc\" style=\"margin-left:80px;\">ğŸ’…<a href=\"#%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD\">ç›¸å…³æœ¯è¯­</a></p>\n<p style=\"margin-left:80px;\"></p>\n<p id=\"1.2%20%E5%85%A5%E9%97%A8-toc\" style=\"margin-left:40px;\">ğŸ’…<a href=\"#1.2%20%E5%85%A5%E9%97%A8\">1.2 å…¥é—¨</a></p>\n<p id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.1%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.1%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83\">        </a>ğŸ’…<a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.1%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83\">1.2.1 æ­å»ºç¯å¢ƒ</a></p>\n<p style=\"margin-left:80px;\"></p>\n<p id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.2%20%E6%B5%8B%E8%AF%95-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.2%20%E6%B5%8B%E8%AF%95\">        </a>ğŸ’…<a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.2%20%E6%B5%8B%E8%AF%95\">1.2.2 æµ‹è¯•</a></p>\n<p style=\"margin-left:80px;\"></p>\n<p id=\"2.1%C2%A0routes%E8%B7%AF%E7%94%B1-toc\" style=\"margin-left:40px;\">ğŸ’…<a href=\"#2.1%C2%A0routes%E8%B7%AF%E7%94%B1\">2.1 routesè·¯ç”±</a></p>\n<p id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02.1.2%20%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02.1.2%20%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">        </a>ğŸ’…<a href=\"#%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02.1.2%20%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">2.1.2 è·¯ç”±åŒ¹é…è§„åˆ™</a></p>\n<p style=\"margin-left:80px;\"></p>\n<p id=\"2.2.1%20predicates%20%E6%96%AD%E8%A8%80-toc\" style=\"margin-left:80px;\">ğŸ’…<a href=\"#2.2.1%20predicates%20%E6%96%AD%E8%A8%80\">2.2.1 predicates æ–­è¨€</a></p>\n<p style=\"margin-left:80px;\"></p>\n<p id=\"7.3.3%20Filter%20%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8-toc\" style=\"margin-left:80px;\">ğŸ’…<a href=\"#7.3.3%20Filter%20%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8\">7.3.3 Filter ç½‘å…³è¿‡æ»¤å™¨</a></p>\n<hr id=\"hr-toc\"/>\n<h2>1.1 æ¦‚è¿°</h2>\n</div>\n<blockquote>\n<p>        Spring Cloud Gateway æ˜¯ Spring Cloud çš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäº Spring 5.0ï¼ŒSpring Boot 2.0 å’Œ Project Reactorï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰ ç­‰æŠ€æœ¯å¼€å‘çš„ç½‘å…³ï¼Œå®ƒæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆçš„ç»Ÿä¸€çš„ API è·¯ç”±ç®¡ç†æ–¹å¼ã€‚</p>\n<p></p>\n<p>        Spring Cloud Gateway ä½œä¸º Spring Cloud ç”Ÿæ€ç³»ç»Ÿä¸­çš„ç½‘å…³ï¼Œç›®æ ‡æ˜¯æ›¿ä»£ Zuulï¼Œåœ¨Spring Cloud 2.0ä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œæ²¡æœ‰å¯¹æ–°ç‰ˆæœ¬çš„Zuul 2.0ä»¥ä¸Šæœ€æ–°é«˜æ€§èƒ½ç‰ˆæœ¬è¿›è¡Œé›†æˆï¼Œä»ç„¶è¿˜æ˜¯ä½¿ç”¨çš„Zuul 2.0ä¹‹å‰çš„éReactoræ¨¡å¼çš„è€ç‰ˆæœ¬ã€‚è€Œä¸ºäº†æå‡ç½‘å…³çš„æ€§èƒ½ï¼ŒSpringCloud Gatewayæ˜¯åŸºäºWebFluxæ¡†æ¶å®ç°çš„ï¼Œè€ŒWebFluxæ¡†æ¶åº•å±‚åˆ™ä½¿ç”¨äº†é«˜æ€§èƒ½çš„Reactoræ¨¡å¼é€šä¿¡æ¡†æ¶Nettyã€‚</p>\n<p></p>\n</blockquote>\n<hr/>\n<h2 id=\"%E7%9B%B8%E5%85%B3%E6%9C%AF%E8%AF%AD\">1.1.1 ç›¸å…³æœ¯è¯­</h2>\n<p>Gateway ç›®æ ‡æ˜¯æ›¿ä»£ Zuulï¼Œæ‰€æœ‰åŸºæœ¬ç‰¹æ€§å·®åˆ«ä¸å¤§ï¼Œä¸»è¦çš„åŒºåˆ«ï¼Œåº•å±‚çš„é€šä¿¡æ¡†æ¶ã€‚</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td style=\"text-align:center;\"><strong>æœ¯è¯­</strong></td><td style=\"text-align:center;\"><strong>æè¿°</strong></td></tr><tr><td style=\"text-align:center;\">Route(è·¯ç”±)</td><td style=\"text-align:center;\">ç½‘å…³é…ç½®çš„åŸºæœ¬ç»„æˆæ¨¡å—ï¼Œå’ŒZuulçš„è·¯ç”±é…ç½®æ¨¡å—ç±»ä¼¼ã€‚ä¸€ä¸ª<strong>Routeæ¨¡å—</strong>ç”±ä¸€ä¸ª IDï¼Œä¸€ä¸ªç›®æ ‡ URIï¼Œä¸€ç»„æ–­è¨€å’Œä¸€ç»„è¿‡æ»¤å™¨å®šä¹‰ã€‚å¦‚æœæ–­è¨€ä¸ºçœŸï¼Œåˆ™è·¯ç”±åŒ¹é…ï¼Œç›®æ ‡URIä¼šè¢«è®¿é—®ã€‚</td></tr><tr><td style=\"text-align:center;\">Predicate(æ–­è¨€)</td><td style=\"text-align:center;\">è¿™æ˜¯ä¸€ä¸ª Java 8 çš„ Predicateï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ¥åŒ¹é…æ¥è‡ª HTTP è¯·æ±‚çš„ä»»ä½•å†…å®¹ï¼Œä¾‹å¦‚ headers æˆ–å‚æ•°ã€‚<strong>æ–­è¨€çš„</strong>è¾“å…¥ç±»å‹æ˜¯ä¸€ä¸ª ServerWebExchangeã€‚</td></tr><tr><td style=\"text-align:center;\">Filter(è¿‡æ»¤å™¨)</td><td style=\"text-align:center;\">å’ŒZuulçš„è¿‡æ»¤å™¨åœ¨æ¦‚å¿µä¸Šç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ‹¦æˆªå’Œä¿®æ”¹è¯·æ±‚ï¼Œå¹¶ä¸”å¯¹ä¸Šæ¸¸çš„å“åº”ï¼Œè¿›è¡ŒäºŒæ¬¡å¤„ç†ã€‚è¿‡æ»¤å™¨ä¸ºorg.springframework.cloud.gateway.filter.GatewayFilterç±»çš„å®ä¾‹ã€‚</td></tr></tbody></table>\n<h1 id=\"%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4\"><a id=\"_26\"></a></h1>\n<h2 id=\"1.2%20%E5%85%A5%E9%97%A8\">1.2 å…¥é—¨</h2>\n<h3 id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.1%20%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83\">        1.2.1 æ­å»ºç¯å¢ƒ</h3>\n<ul><li> <p>åˆ›å»ºé¡¹ç›®ï¼štest-gateway-2.1</p> </li><li>ä¿®æ”¹pomï¼Œæ·»åŠ åæ ‡</li></ul>\n<pre><code> &lt;dependencies&gt;\n        &lt;!-- ç½‘å…³ --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-gateway&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- nacos æœåŠ¡å‘ç° --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;</code></pre>\n<ul><li>é…ç½® ymlæ–‡ä»¶ï¼šapplication.yml</li></ul>\n<pre><code>#ç«¯å£å·\nserver:\n  port: 10010\nspring:\n  application:\n    name: test-gateway\n  cloud:\n    nacos:\n      discovery:\n        server-addr: 127.0.0.1:8848   #nacosæœåŠ¡åœ°å€\n    gateway:\n      discovery:\n        locator:\n          enabled: true   #å¼€å¯æœåŠ¡æ³¨å†Œå’Œå‘ç°çš„åŠŸèƒ½ï¼Œè‡ªåŠ¨åˆ›å»ºrouterä»¥æœåŠ¡åå¼€å¤´çš„è¯·æ±‚è·¯å¾„è½¬å‘åˆ°å¯¹åº”çš„æœåŠ¡</code></pre>\n<ul><li>ç¼–å†™å¯åŠ¨ç±»</li></ul>\n<pre><code class=\"language-java\">@SpringBootApplication\n@EnableDiscoveryClient\npublic class TestGatewayApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(TestGatewayApplication.class, args);\n    }\n\n}</code></pre>\n<h2 id=\"1.%E5%BC%95%E5%85%A5%E5%BA%93\"><a id=\"1_27\"></a></h2>\n<h3 id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A01.2.2%20%E6%B5%8B%E8%AF%95\">        1.2.2 æµ‹è¯•</h3>\n<pre><code>http://localhost:10010/service-consumer/feign/echo/abc</code></pre>\n<h2 id=\"2.%E8%AF%BB%E5%85%A5%E6%95%B0%E6%8D%AE\"><a id=\"2_41\"></a></h2>\n<pre><code>http://localhost:10010/service-provider/echo/abc</code></pre>\n<h2 id=\"2.1%C2%A0routes%E8%B7%AF%E7%94%B1\">2.1 routesè·¯ç”±</h2>\n<h3 id=\"%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A0%C2%A02.1.2%20%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99\">        2.1.2 è·¯ç”±åŒ¹é…è§„åˆ™</h3>\n<ul><li>gateWayçš„ä¸»è¦åŠŸèƒ½ä¹‹ä¸€æ˜¯è½¬å‘è¯·æ±‚ï¼Œè½¬å‘è§„åˆ™çš„å®šä¹‰ä¸»è¦åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</li></ul>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td style=\"text-align:center;\"><strong>ç»„æˆ</strong></td><td style=\"text-align:center;\"><strong>æè¿°</strong></td></tr><tr><td style=\"text-align:center;\">è·¯ç”± Route</td><td style=\"text-align:center;\">è·¯ç”±æ˜¯ç½‘å…³çš„åŸºæœ¬å•å…ƒï¼Œ ç”±IDã€URIã€ä¸€ç»„Predicateã€ä¸€ç»„Filterç»„æˆï¼Œæ ¹æ®Predicateè¿›è¡ŒåŒ¹é…è½¬å‘ã€‚</td></tr><tr><td style=\"text-align:center;\">æ–­è¨€ Predicate</td><td style=\"text-align:center;\">è·¯ç”±è½¬å‘çš„åˆ¤æ–­æ¡ä»¶ï¼Œç›®å‰SpringCloud Gatewayæ”¯æŒå¤šç§æ–¹å¼ï¼Œ å¸¸è§å¦‚ï¼šPathã€Queryã€Methodã€Headerç­‰ï¼Œå†™æ³•å¿…é¡»éµå¾ª key=vlueçš„å½¢å¼</td></tr><tr><td style=\"text-align:center;\">è¿‡æ»¤å™¨ Filter</td><td style=\"text-align:center;\">è¿‡æ»¤å™¨æ˜¯è·¯ç”±è½¬å‘è¯·æ±‚æ—¶æ‰€ç»è¿‡çš„è¿‡æ»¤é€»è¾‘ï¼Œå¯ç”¨äºä¿®æ”¹è¯·æ±‚ã€å“åº”å†…å®¹</td></tr></tbody></table>\n<p></p>\n<ul><li>ä¿®æ”¹ymlæ–‡ä»¶ï¼Œæ·»åŠ  <pre><code>routes:\n  - id: consumer\t\t\t\t  #è‡ªå®šä¹‰\n    uri: lb://service-consumer    #è®¿é—®è·¯å¾„\n    predicates:\t\t\t\t\t  #æ–­è¨€\n      - Path=/consumer/**\n    filters:\t\t\t\t\t  #è¿‡æ»¤å™¨\n      - StripPrefix=1 </code></pre> <h3 id=\"2.2.1%20predicates%20%E6%96%AD%E8%A8%80\">2.2.1 predicates æ–­è¨€</h3> </li></ul>\n<p>        åœ¨ Spring Cloud Gateway ä¸­ Spring åˆ©ç”¨ Predicate çš„ç‰¹æ€§å®ç°äº†å„ç§è·¯ç”±åŒ¹é…è§„åˆ™ï¼Œæœ‰é€šè¿‡ Headerã€è¯·æ±‚å‚æ•°ç­‰ä¸åŒçš„æ¡ä»¶ï¼Œæ¥è¿›è¡Œä½œä¸ºæ¡ä»¶åŒ¹é…åˆ°å¯¹åº”çš„è·¯ç”±ã€‚</p>\n<p>ç®€å•æ¥è¯´ï¼Œ Predicate å°±æ˜¯ä¸€ç»„åŒ¹é…è§„åˆ™ï¼Œæ–¹ä¾¿è¯·æ±‚è¿‡æ¥æ—¶ï¼ŒåŒ¹é…åˆ°å¯¹åº”çš„ Route è¿›è¡Œå¤„ç†ã€‚</p>\n<p></p>\n<ul><li> <p>Spring Cloud GateWay å†…ç½®å¤šç§ Predicate ï¼Œå¦‚ä¸‹ï¼š</p> </li></ul>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><th>è§„åˆ™</th><th>å®ä¾‹</th></tr><tr><td>Path</td><td>- Path=/gate/,/rule/</td></tr><tr><td>Before</td><td>- Before=2017-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>After</td><td>- After=2017-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Between</td><td>- Between=2017-01-20T17:42:47.789-07:00[America/Denver],2017-01-21T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Cookie</td><td>- Cookie=chocolate, ch.p</td></tr><tr><td>Header</td><td>- Header=X-Request-Id, \\d+</td></tr><tr><td>Host</td><td>- Host=<a href=\"www.hd123.com\">www.hd123.com</a></td></tr><tr><td>Method</td><td>- Method=GET</td></tr><tr><td>Query</td><td>- Query=baz</td></tr><tr><td>RemoteAddr</td><td>- RemoteAddr=192.168.1.1/24</td></tr></tbody></table>\n<p></p>\n<ul><li>å®ä¾‹1ï¼šé€šè¿‡è¯·æ±‚å‚æ•°åŒ¹é…</li></ul>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n        - id: query\n          uri: http://www.czxy.com\n          predicates:\n            - Query=my,123\n#è®¿é—®è·¯å¾„ï¼Œæœ‰å‚æ•°myå°†è½¬å‘åˆ°www.czxy.com\nhttp://localhost:10010/?my=123</code></pre>\n<ul><li>å®ä¾‹2ï¼šé€šè¿‡è¯·æ±‚è·¯å¾„åŒ¹é…</li></ul>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n        - id: path\n          uri: http://www.czxy.com\n          predicates:\n            - Path=/czxy/{flag}\n# \nhttp://localhost:10010/czxy/666</code></pre>\n<ul><li> <p>æ€»ç»“ï¼š</p>\n<ul><li> <p>å„ç§ Predicates åŒæ—¶å­˜åœ¨äºåŒä¸€ä¸ªè·¯ç”±æ—¶ï¼Œè¯·æ±‚å¿…é¡»åŒæ—¶æ»¡è¶³æ‰€æœ‰çš„æ¡ä»¶æ‰è¢«è¿™ä¸ªè·¯ç”±åŒ¹é…ã€‚</p> </li><li> <p>ä¸€ä¸ªè¯·æ±‚æ»¡è¶³å¤šä¸ªè·¯ç”±çš„æ–­è¨€æ¡ä»¶æ—¶ï¼Œè¯·æ±‚åªä¼šè¢«é¦–ä¸ªæˆåŠŸåŒ¹é…çš„è·¯ç”±è½¬å‘</p> </li></ul></li></ul>\n<h3 id=\"7.3.3%20Filter%20%E7%BD%91%E5%85%B3%E8%BF%87%E6%BB%A4%E5%99%A8\">7.3.3 Filter ç½‘å…³è¿‡æ»¤å™¨</h3>\n<ul><li> <p>è·¯ç”±è¿‡æ»¤å™¨å…è®¸ä»¥æŸç§æ–¹å¼ä¿®æ”¹ä¼ å…¥çš„HTTPè¯·æ±‚æˆ–ä¼ å‡ºHTTPå“åº”ã€‚</p> </li></ul>\n<table><thead><tr><th>è¿‡æ»¤è§„åˆ™</th><th>å®ä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>PrefixPath</td><td>- PrefixPath=/app</td><td>å¯¹æ‰€æœ‰çš„è¯·æ±‚è·¯å¾„æ·»åŠ å‰ç¼€app</td></tr><tr><td>RedirectTo</td><td>- RedirectTo=302, <a href=\"http://czxy.com\" title=\"é¦–é¡µ - ä¼ æ™ºä¸“ä¿®å­¦é™¢\">é¦–é¡µ - ä¼ æ™ºä¸“ä¿®å­¦é™¢</a></td><td>é‡å®šå‘ï¼Œé…ç½®åŒ…å«é‡å®šå‘çš„è¿”å›ç å’Œåœ°å€</td></tr><tr><td>RemoveRequestHeader</td><td>- RemoveRequestHeader=X-Request-Foo</td><td>å»æ‰æŸä¸ªè¯·æ±‚å¤´ä¿¡æ¯</td></tr><tr><td>RemoveResponseHeade</td><td>- RemoveResponseHeader=X-Request-Foo</td><td>å»æ‰æŸä¸ªå“åº”å¤´ä¿¡æ¯</td></tr><tr><td>RemoveRequestParameter</td><td>- RemoveRequestParameter=red</td><td>å»æ‰æŸä¸ªè¯·æ±‚å‚æ•°ä¿¡æ¯</td></tr><tr><td>RewritePath</td><td>- RewritePath=/where(?&lt;segment&gt;/?.<em>), /test(?&lt;segment&gt;/?.</em>)</td><td>æ”¹å†™è·¯å¾„ /where/... æ”¹æˆ /test/...</td></tr><tr><td>SetPath</td><td>- SetPath=/{segment}</td><td>è®¾ç½®è¯·æ±‚è·¯å¾„ï¼Œä¸RewritePathç±»ä¼¼</td></tr><tr><td>SetRequestHeader</td><td>- SetRequestHeader=X-Request-Red, Blue</td><td>è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯</td></tr><tr><td>SetStatus</td><td>- SetStatus=401</td><td>è®¾ç½®å“åº”çŠ¶æ€ç </td></tr><tr><td>StripPrefix</td><td>- StripPrefix=2</td><td>è·³è¿‡æŒ‡å®šè·¯å¾„</td></tr><tr><td>RequestSize</td><td>- name: RequestSize args: maxSize: 5000000</td><td>è¯·æ±‚å¤§å°</td></tr></tbody></table>\n<p></p>\n<ul><li>å®ä¾‹1ï¼šè·³è¿‡æŒ‡å®šè·¯å¾„</li></ul>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n        - id: consumer\n          uri: lb://service-consumer  \n          predicates:\n            - Path=/consumer/**       \n          filters:\n            - StripPrefix=1</code></pre>\n<p></p>\n<ul><li>å®ä¾‹2ï¼šæ·»åŠ å‰ç¼€</li></ul>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n        - id: PrefixPath\n          uri: lb://service-consumer\n          predicates:\n            - Path=/consumer/**\n          filters:\n            - StripPrefix=1\n            - PrefixPath=/feign</code></pre>\n<ul><li>å®ä¾‹3ï¼šæ”¹å†™è·¯å¾„</li></ul>\n<pre><code>spring:\n  cloud:\n    gateway:\n      routes:\n        - id: RewritePath\n          uri: lb://service-consumer\n          predicates:\n            - Path=/consumer/**\n          filters:\n            - RewritePath=/consumer(?&lt;segment&gt;/?.*), $\\{segment}</code></pre>\n<p><em><strong>åˆ°è¿™é‡Œè¯´æ˜ä½ å·²ç»å­¦ä¼šäº†å“¦ï¼ŒåŠªåŠ›å­¦ä¹ ï¼<span style=\"color:#fe2c24;\">å­¦æ— æ­¢å¢ƒï¼ï¼ï¼</span></strong></em></p>\n<p><img alt=\"\" height=\"102\" src=\"https://img-blog.csdnimg.cn/c5df065b7e5b452e925958c43c60a03e.gif\" width=\"102\"/>                                   <img alt=\"\" height=\"100\" src=\"https://img-blog.csdnimg.cn/c5df065b7e5b452e925958c43c60a03e.gif\" width=\"100\"/>                                     <img alt=\"\" height=\"99\" src=\"https://img-blog.csdnimg.cn/c5df065b7e5b452e925958c43c60a03e.gif\" width=\"99\"/></p>\n<hr/>\n<blockquote>\n<p id=\"%E6%80%BB%E7%BB%93\"><a id=\"_55\"></a><strong>æƒ³è¦äº†è§£æ›´å¤šå—ï¼Ÿæ²¡æ—¶é—´è§£é‡Šäº†ï¼Œå¿«æ¥ç‚¹ä¸€ç‚¹<span style=\"color:#fe2c24;\">ï¼ï¼ï¼</span><br/><a class=\"link-info\" href=\"https://blog.csdn.net/lcshen1234?spm=1019.2139.3001.5343\" title=\"ç¨‹åºå‘˜çˆ±æ‘¸é±¼ğŸŸ\">ç¨‹åºå‘˜çˆ±æ‘¸é±¼ğŸŸ</a><br/> â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”<br/> ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œç¨‹åºå‘˜çˆ±æ‘¸é±¼ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚<br/> åŸæ–‡é“¾æ¥ï¼š<a class=\"link-info\" href=\"https://blog.csdn.net/lcshen1234?spm=1019.2139.3001.5343\" title=\"ç¨‹ åº å‘˜ çˆ± æ‘¸ é±¼ğŸŸ\">ç¨‹ åº å‘˜ çˆ± æ‘¸ é±¼ğŸŸ</a></strong></p>\n</blockquote>\n</div>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-06-28 21:04:42", "summary": "ä¸ªäººä¸»é¡µç¨‹åºå‘˜çˆ±æ‘¸é±¼ç¨‹åºå‘˜çˆ±æ‘¸é±¼ç‰ˆæƒæœ¬æ–‡ç”±ç¨‹åºå‘˜çˆ±æ‘¸é±¼åŸåˆ›ã€åœ¨é¦–å‘ã€éœ€è¦è½¬è½½è¯·è”ç³»åšä¸»å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ã€æ¬¢è¿å…³æ³¨ç‚¹èµæ”¶è—ä¸€é”®ä¸‰è¿å“¦æƒ³å¯»æ‰¾å…±åŒæˆé•¿çš„å°ä¼™ä¼´ï¼Œå¯ä»¥äº’ç²‰å“¦æ–‡ç« ç›®å½•æ¦‚è¿°ç›¸å…³æœ¯è¯­å…¥é—¨æ­å»ºç¯å¢ƒæµ‹"}