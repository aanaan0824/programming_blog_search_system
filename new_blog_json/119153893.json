{"blogid": "119153893", "writerAge": "码龄3年", "writerBlogNum": "854", "writerCollect": "27761", "writerComment": "3338", "writerFan": "73769", "writerGrade": "7级", "writerIntegral": "20252", "writerName": "ZSYL", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_119153893.jpg", "writerRankTotal": "352", "writerRankWeekly": "489", "writerThumb": "7064", "writerVisitNum": "1508425", "blog_read_count": "156403", "blog_time": "已于 2022-05-20 21:49:50 修改", "blog_title": "PyTorch 最新安装教程（2021-07-27）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>PyTorch 最新安装教程（2021-07-27）</h3>\n<ul><li><a href=\"#_1\">前言</a></li><li><a href=\"#1__Anaconda_11\">1. 安装 Anaconda</a></li><li><a href=\"#2__21\">2. 检查显卡，更新驱动</a></li><li><a href=\"#3_PyTorch_57\">3. 创建PyTorch环境</a></li><li><a href=\"#4_TUNA_88\">4. 配置清华TUNA镜像源</a></li><li><a href=\"#5__PyTorch_129\">5. 安装 PyTorch</a></li><li><a href=\"#6__169\">6. 测试</a></li><li><a href=\"#7_PycharmAnacondapytorch_196\">7. Pycharm使用Anaconda创建的pytorch虚拟环境</a></li><li><a href=\"#_201\">后序</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_1\"></a>前言</h1>\n<p><strong>万事开头难！</strong></p>\n<p><strong>这句话又一次被我验证。</strong></p>\n<p>记得前不久刚陷入<strong>Tensorflow2.0</strong>的安装困境，这一次又被<strong>PyTorch</strong> 搞哭辽。</p>\n<p>孩子太难了o(╥﹏╥)o，不过还好最终成功安装，感谢全网资源，感谢大佬们的博客！被我一次一次试了出来。</p>\n<h1><a id=\"1__Anaconda_11\"></a>1. 安装 Anaconda</h1>\n<p><strong>Anaconda</strong> 是一个用于科学计算的 <strong>Python</strong> 发行版，支持 <code>Linux, Mac, Windows</code>, 包含了众多流行的科学计算、数据分析的 Python 包。</p>\n<p><strong>Anaconda</strong> 安装包可以到 <code>https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</code> 下载 <strong>or</strong> 也可以去官网下载。</p>\n<p><strong>具体内容请参考我之前的安装教程&amp;经验分享：</strong></p>\n<p><a href=\"https://blog.csdn.net/qq_46092061/article/details/116561557\">Tensorflow 2.0 最新版(2.4.1) 安装教程</a></p>\n<h1><a id=\"2__21\"></a>2. 检查显卡，更新驱动</h1>\n<ol><li><strong>建议是首先更新驱动，全都按最新的东西来安装</strong></li></ol>\n<p><a href=\"https://www.nvidia.cn/Download/index.aspx?lang=cn#\">https://www.nvidia.cn/Download/index.aspx?lang=cn#</a></p>\n<p>在这里选择自己的显卡型号，下载安装即可，下载很快也很简单，建议大多数人都更新一下显卡驱动，避免不必要的麻烦。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\457e9871731c434ca47f74cedb1e9e18.png\"/></p>\n<ol start=\"2\"><li>安装好后进入<strong>NVIDIA</strong>控制面板，鼠标右键可进入</li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6aa43b2005ba4f50b22fdd38db188a45.png\"/><br/> <strong>点击组件找到自己CUDA的版本号</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\17f57732e4ea46479a37d4b6b2cf7759.png\"/></p>\n<p>或者 <strong>win+R</strong>—&gt; <strong>cmd</strong> ，进入命令行，<strong>输入</strong>：</p>\n<pre><code class=\"prism language-python\">nvidia<span class=\"token operator\">-</span>smi\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f524353978284ad88bdd76ab05b9d1da.png\"/></p>\n<blockquote>\n<p>如果没有这条命令，则需要添加环境变量（百度配置）一般电脑都可以直接用，我的显卡是：GF：MX250</p>\n</blockquote>\n<p><strong>也可获得版本号：</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2067ded8d87e42fb961bb5a0d6ef6ba4.png\"/></p>\n<p><strong>备注</strong>：第二步不一定是必须的，如果你的电脑较新，那么不更新也可以直接进行下面操作，我的电脑是19年买的，中间好像也没更新驱动，这一步直接跳过，最后也安装成功了。</p>\n<h1><a id=\"3_PyTorch_57\"></a>3. 创建PyTorch环境</h1>\n<p>不同的项目需要不同的虚拟环境，可以处理不同版本的项目之间不兼容问题。</p>\n<ol><li>进入 <code>Anaconda prompt</code> 命令窗口</li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\67436072c3ab42988d5678899020be9f.png\"/><br/> 2. <strong>输入以下内容：</strong></p>\n<pre><code class=\"prism language-python\">conda create <span class=\"token operator\">-</span>n PyTorch python<span class=\"token operator\">=</span><span class=\"token number\">3.8</span>\n</code></pre>\n<p><strong>PyTorch</strong>是虚拟环境名字（可以随意设置），<strong>3.8</strong> 是python版本，都可以按自己需求改，一定要指定具体 <strong>python</strong> 版本。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\199ee7351d144442816abf17035bd071.jpg\"/></p>\n<p>然后按 <code>y</code>，继续安装所需的各种依赖包。</p>\n<ol start=\"3\"><li><strong>创建成功后，输入以下命令：</strong></li></ol>\n<pre><code class=\"prism language-python\">conda info <span class=\"token operator\">-</span><span class=\"token operator\">-</span>envs\n</code></pre>\n<p><strong>可以看见自己的所有环境</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1635330c498c4c0fba63ce7d8b508c0e.jpg\"/></p>\n<p>如果出现错误，可能是<strong>外网下载过慢</strong>，需要配置<strong>国内镜像源</strong>。</p>\n<h1><a id=\"4_TUNA_88\"></a>4. 配置清华TUNA镜像源</h1>\n<p><strong>TUNA</strong> 提供了 <strong>Anaconda</strong> 仓库与第三方源（conda-forge、msys2、pytorch等，查看完整列表）的镜像，各系统都可以通过修改用户目录下的 <code>.condarc</code> 文件。<strong>Windows</strong> 用户无法直接创建名为 <code>.condarc</code> 的文件，可先执行 <code>conda config --set show_channel_urls yes</code> 生成该文件之后再修改。</p>\n<blockquote>\n<p>注：由于更新过快难以同步，TUNA不同步<code>pytorch-nightly, pytorch-nightly-cpu, ignite-nightly</code>这三个包。</p>\n</blockquote>\n<ol><li><strong>生成 <code>.condarc</code> 文件</strong></li></ol>\n<p><strong>在 <code>Anaconda prompt</code> 命令窗口，中输入：</strong></p>\n<pre><code class=\"prism language-python\">conda config <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token builtin\">set</span> show_channel_urls yes\n</code></pre>\n<p><strong>之后可以在 <code>C:\\Users\\xxx</code> 中看到 <code>.condarc</code> 文件</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6931a81a806c4a208f8cd08f3e68229b.png\"/><br/> 2. <strong>记事本打开 <code>.condarc</code> 文件</strong>，<strong>重写其中的内容。</strong></p>\n<pre><code class=\"prism language-python\">channels<span class=\"token punctuation\">:</span>\n  <span class=\"token operator\">-</span> defaults\nshow_channel_urls<span class=\"token punctuation\">:</span> true\ndefault_channels<span class=\"token punctuation\">:</span>\n  <span class=\"token operator\">-</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>pkgs<span class=\"token operator\">/</span>main\n  <span class=\"token operator\">-</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>pkgs<span class=\"token operator\">/</span>r\n  <span class=\"token operator\">-</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>pkgs<span class=\"token operator\">/</span>msys2\ncustom_channels<span class=\"token punctuation\">:</span>\n  conda<span class=\"token operator\">-</span>forge<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n  msys2<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n  bioconda<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n  menpo<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n  pytorch<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n  simpleitk<span class=\"token punctuation\">:</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>mirrors<span class=\"token punctuation\">.</span>tuna<span class=\"token punctuation\">.</span>tsinghua<span class=\"token punctuation\">.</span>edu<span class=\"token punctuation\">.</span>cn<span class=\"token operator\">/</span>anaconda<span class=\"token operator\">/</span>cloud\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\88d6719ea35a4d1497065e982df60822.png\"/><br/> 即可添加 <strong>Anaconda Python</strong> 免费仓库。</p>\n<p>在<code>Anaconda prompt</code> 命令窗口运行 <code>conda clean -i</code> 清除索引缓存，保证用的是镜像站提供的索引。</p>\n<h1><a id=\"5__PyTorch_129\"></a>5. 安装 PyTorch</h1>\n<ol><li> <p><strong>进入pytorch官网：</strong><a href=\"https://pytorch.org/\">https://pytorch.org/</a></p> </li><li> <p><strong>网页下拉，即可看到下图，官网会自动根据你的电脑，显示的即是你可安装的CUDA版本，并给出安装命令。</strong></p> </li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2adf875b3b874dac8052b9d551fccbc0.png\"/></p>\n<ol start=\"3\"><li><strong>复制官网提供的命令</strong></li></ol>\n<pre><code class=\"prism language-python\">conda install pytorch torchvision torchaudio cudatoolkit<span class=\"token operator\">=</span><span class=\"token number\">10.2</span> <span class=\"token operator\">-</span>c pytorch\n</code></pre>\n<ol start=\"4\"><li><strong>打开 <code>Anaconda prompt</code> 命令窗口，进入你刚刚所创建的环境（我的命名是PyTorch）</strong></li></ol>\n<pre><code class=\"prism language-python\">conda activate PyTorch\n</code></pre>\n<p><strong>进入环境</strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\676a4fd6619f47749e7ee42a80277787.png\"/><br/> 5. <strong>最后输入官网提供的命令，即可下载</strong></p>\n<pre><code class=\"prism language-python\">conda install pytorch torchvision torchaudio cudatoolkit<span class=\"token operator\">=</span><span class=\"token number\">10.2</span> <span class=\"token operator\">-</span>c pytorch\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1b4cda3f5a2f4008917e07fae5a63b4c.jpg\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2fcb4ca68548459e984d4cd79212da86.jpg\"/></p>\n<blockquote>\n<p>每个人的命令，会由于电脑配置而各不同</p>\n</blockquote>\n<p><strong>注意</strong>：下载安装过程，可能因为某些原因，并不是很顺利，但遇到问题不要慌，另外网速一定要好，避免出现不必要的错误。</p>\n<h1><a id=\"6__169\"></a>6. 测试</h1>\n<pre><code class=\"prism language-py\"><span class=\"token keyword\">import</span> torch \n<span class=\"token keyword\">import</span> torch vision\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>torch<span class=\"token punctuation\">.</span>__version__<span class=\"token punctuation\">)</span> <span class=\"token comment\"># pytorch版本</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>torch<span class=\"token punctuation\">.</span>version<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">)</span> <span class=\"token comment\"># cuda版本</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>torch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>is_available<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 查看cuda是否可用</span>\n</code></pre>\n<p><strong>打开 <code>Anaconda prompt</code> 命令窗口，激活环境，输入<code>python</code>，进入<code>python</code>开发环境中</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> torch\ntorch<span class=\"token punctuation\">.</span>cuda<span class=\"token punctuation\">.</span>is_available<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token boolean\">True</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b3a35a04212c48f5a01e360d4423a998.png\"/></p>\n<blockquote>\n<p>看到<strong>True</strong>的那一刻，我真的开心，终于成功了。</p>\n</blockquote>\n<h1><a id=\"7_PycharmAnacondapytorch_196\"></a>7. Pycharm使用Anaconda创建的pytorch虚拟环境</h1>\n<p><strong>请参考</strong>：<a href=\"https://blog.csdn.net/qq_46092061/article/details/119155636\">Pycharm加载conda创建pytorch虚拟环境 &amp; import torch报错问题解决</a></p>\n<h1><a id=\"_201\"></a>后序</h1>\n<p><strong>安装过程如果您遇到相关问题</strong></p>\n<p><strong>请参考</strong>：</p>\n<p><a href=\"https://blog.csdn.net/qq_46092061/article/details/119153344?spm=1001.2014.3001.5501\">【安装PyTorch报错】InvalidArchiveError(‘Error with archive D:\\anaconda\\pkgs\\pytorch-1.2.0-py3.6····</a></p>\n<p><a href=\"https://blog.csdn.net/qq_46092061/article/details/119144630?spm=1001.2014.3001.5501\">Conda修改 Anaconda 默认镜像源（Collecting package metadata (current_repodata.json): failed）</a></p>\n<p><a href=\"https://blog.csdn.net/qq_46092061/article/details/119141556?spm=1001.2014.3001.5501\">CondaError: Downloaded bytes did not match Content-Length</a></p>\n<p><strong>参考：</strong></p>\n<p><a href=\"https://blog.csdn.net/qq_40733911/article/details/113061874?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522162735558616780265428085%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=162735558616780265428085&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-3-113061874.pc_search_all_es&amp;utm_term=pytorch%E5%AE%89%E8%A3%85&amp;spm=1018.2226.3001.4187\">link</a></p>\n<p><a href=\"https://mirror.tuna.tsinghua.edu.cn/help/anaconda/\">tuna</a></p>\n<p><mark><strong>加油!</strong></mark></p>\n<p><mark><strong>感谢!</strong></mark></p>\n<p><mark><strong>努力!</strong></mark></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-05-20 21:49:50", "summary": "最新安装教程前言安装检查显卡，更新驱动创建环境配置清华镜像源安装测试使用创建的虚拟环境后序前言万事开头难！这句话又一次被我验证。记得前不久刚陷入的安装困境，这一次又被搞哭辽。孩子太难了，不过还好最终成"}