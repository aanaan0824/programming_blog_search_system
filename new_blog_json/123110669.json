{"blogid": "123110669", "writerAge": "ç é¾„14å¹´", "writerBlogNum": "61", "writerCollect": "115", "writerComment": "37", "writerFan": "1167", "writerGrade": "3çº§", "writerIntegral": "693", "writerName": "çŒ«å¤´é¹°æ•°æ®åˆ†æ", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123110669.jpg", "writerRankTotal": "92936", "writerRankWeekly": "14197", "writerThumb": "47", "writerVisitNum": "51898", "blog_read_count": "869", "blog_time": "äºÂ 2022-03-07 20:07:07Â å‘å¸ƒ", "blog_title": "æœ€æ–°Centos7 + .Net6 + Docker é…ç½®é•œåƒå‘å¸ƒè¯¦è§£", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>    ä»Šå¤©å¸¦ç»™å¤§å®¶ä¸€ç¯‡æ–‡ç« ï¼Œæƒ³å¤§å®¶ä»‹ç»ä¸‹åœ¨Centos7ä¸‹ï¼Œå¦‚ä½•åœ¨dockerç¯å¢ƒéƒ¨ç½²ä¸€ä¸ªç®€å•çš„åŸºäº.Net6çš„.NetCoreåº”ç”¨ï¼Œä¹Ÿå°±æ˜¯æ‰“åŒ…é¡¹ç›®é•œåƒï¼Œå¹¶åœ¨Linuxä¸‹ä½¿ç”¨æ‰“åŒ…çš„é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚</p>\n<h1>ä¸€ ç¯å¢ƒå‡†å¤‡</h1>\n<h2>1.1è™šæ‹Ÿæœº</h2>\n<p>æˆ‘ä»¬å‡†å¤‡ä¸€å°Centosè™šæ‹Ÿæœºï¼Œæˆ‘è¿™é‡Œæ˜¯7.6.è™šæ‹Ÿæœºå®‰è£…æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„ä¸€ç¯‡æ–‡ç« </p>\n<p><a class=\"link-info\" href=\"https://blog.csdn.net/suwei825/article/details/114987673\" title=\"å¤§æ•°æ®åˆ†æå­¦ä¹ ç¬¬ä¸€è¯¾ å‡†å¤‡è™šæ‹Ÿæœºç¯å¢ƒ\">å¤§æ•°æ®åˆ†æå­¦ä¹ ç¬¬ä¸€è¯¾ å‡†å¤‡è™šæ‹Ÿæœºç¯å¢ƒ</a>æ¥äº†è§£ä¸‹è™šæ‹Ÿæœºçš„é…ç½®</p>\n<p>ä¸‹é¢çš„è™šæ‹Ÿæœºå¯ä»¥çœ‹åˆ°ï¼Œæ²¡æœ‰.Netç¯å¢ƒ</p>\n<p><img alt=\"\" height=\"618\" src=\"..\\..\\static\\image\\993b31f9c96f4bdc8a39537573c8a3a2.png\" width=\"848\"/></p>\n<h2>1.2 å®‰è£…SdK</h2>\n<p>å‚è€ƒæˆ‘çš„åšæ–‡</p>\n<h2>1.3 æ–°å»ºé¡¹ç›®</h2>\n<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©webapi</p>\n<p><img alt=\"\" height=\"850\" src=\"..\\..\\static\\image\\240805aa375b4fccac18cee0a225c31b.png\" width=\"1200\"/></p>\n<p>é¡¹ç›®å»ºå¥½åå¦‚ä¸‹ï¼Œä¼šé»˜è®¤ä¸€ä¸ªå¤©æ°”ä¿¡æ¯çš„æ§åˆ¶å™¨</p>\n<p><img alt=\"\" height=\"393\" src=\"..\\..\\static\\image\\d9151231cb9149f995698148a4a120a3.png\" width=\"681\"/></p>\n<p> æˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸‹ï¼ŒåŠ ä¸€ä¸ªrun by dockeræ ‡è¯†</p>\n<pre><code class=\"language-cs\">namespace DockerSample.Controllers\n{\n    [ApiController]\n    [Route(\"[controller]\")]\n    public class WeatherForecastController : ControllerBase\n    {\n        private static readonly string[] Summaries = new[]\n        {\n        \"Freezing\", \"Bracing\", \"Chilly\", \"Cool\", \"Mild\", \"Warm\", \"Balmy\", \"Hot\", \"Sweltering\", \"Scorching\"\n    };\n\n        private readonly ILogger&lt;WeatherForecastController&gt; _logger;\n\n        public WeatherForecastController(ILogger&lt;WeatherForecastController&gt; logger)\n        {\n            _logger = logger;\n        }\n\n        [HttpGet(Name = \"GetWeatherForecast\")]\n        public IEnumerable&lt;WeatherForecast&gt; Get()\n        {\n            return Enumerable.Range(1, 5).Select(index =&gt; new WeatherForecast\n            {\n                Date = DateTime.Now.AddDays(index),\n                TemperatureC = Random.Shared.Next(-20, 55),\n                Summary = Summaries[Random.Shared.Next(Summaries.Length)] + \"ã€run by dockerã€‘\"\n            })\n            .ToArray();\n        }\n    }\n}</code></pre>\n<p> é¡¹ç›®è¿è¡Œåï¼Œä¼šæ‰“å¼€swaggeræ–‡æ¡£ï¼Œæ˜¯webapiå†…ç½®å¥½çš„ï¼Œæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼Œä¼šçœ‹åˆ°ç»“æœ</p>\n<p><img alt=\"\" height=\"714\" src=\"..\\..\\static\\image\\98fcafe136a048f0ad9a805a2cc1d02e.png\" width=\"1200\"/></p>\n<p> å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åŠ çš„æ ‡è¯†äº†<img alt=\"\" height=\"820\" src=\"..\\..\\static\\image\\a7e963fc36524ab295b1167d2427de9f.png\" width=\"821\"/></p>\n<h2> 1.4 é…ç½®docker</h2>\n<p>æˆ‘ä»¬å³é”®é¡¹ç›®ï¼Œæ·»åŠ =ã€‹æ·»åŠ Dockeræ”¯æŒï¼Œè¿™é‡Œé€‰Linux</p>\n<p><img alt=\"\" height=\"220\" src=\"..\\..\\static\\image\\6ba50d7b739345dfad4d429eb1b9987a.png\" width=\"475\"/></p>\n<p> ç¡®å®šåä¼šç”Ÿæˆä¸€ä¸ªDockerfileæ–‡ä»¶ï¼Œæˆ‘ä»¬è°ƒæ•´ä¸‹å†…å®¹</p>\n<p><img alt=\"\" height=\"484\" src=\"..\\..\\static\\image\\4ccd76ed61d3432289fa44eb1ed418df.png\" width=\"820\"/></p>\n<p> è¿™é‡Œæˆ‘ç»™å‡ºäº†æ¯è¡Œé…ç½®çš„è¯´æ˜</p>\n<pre><code># ç¯å¢ƒè¿è¡Œæ—¶åŸºç¡€é•œåƒ\nFROM mcr.microsoft.com/dotnet/aspnet:6.0\n#å°†å½“å‰ç›®å½•å†…å®¹ copyåˆ°é•œåƒç›®å½•\nCOPY .  /DockerSample\n#è®¾ç½®å·¥ä½œç›®å½•\nWORKDIR /DockerSample\n#å¯¹å¤–æš´éœ²ç«¯å£ \n#ï¼ˆæ³¨ï¼šEXPOSEå¹¶ä¸ä¼šè®©å®¹å™¨çš„ç«¯å£è®¿é—®åˆ°ä¸»æœºã€‚\n#è¦ä½¿å…¶å¯è®¿é—®ï¼Œéœ€è¦åœ¨docker runè¿è¡Œå®¹å™¨æ—¶é€šè¿‡-pæ¥å‘å¸ƒè¿™äº›ç«¯å£ï¼Œ\n#æˆ–é€šè¿‡-På‚æ•°æ¥å‘å¸ƒEXPOSEå¯¼å‡ºçš„æ‰€æœ‰ç«¯å£ï¼‰\nEXPOSE 80\nEXPOSE 443\n#è¿è¡Œé•œåƒå…¥å£å‘½ä»¤å’Œå¯æ‰§è¡Œæ–‡ä»¶åç§°\nENTRYPOINT [\"dotnet\", \"DockerSample.dll\"]</code></pre>\n<h2> 1.5 å‘å¸ƒé¡¹ç›®</h2>\n<p>å› ä¸ºæˆ‘ä¸»æœºæ˜¯win10ï¼Œæ²¡æœ‰å¼€å¯Hyper-Vï¼Œæ‰€ä»¥æˆ‘æŠŠé¡¹ç›®å‘å¸ƒåï¼Œä¸Šä¼ åˆ°linuxæ‰“åŒ…é•œåƒï¼Œå‘å¸ƒæµç¨‹å°±æŒ‰æ™®é€šçš„webé¡¹ç›®ï¼Œå‘å¸ƒåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹å°±å¥½</p>\n<p>å‘å¸ƒå‰æ³¨æ„ï¼Œä¿®æ”¹ä¸‹ Dockerfileçš„å±æ€§ï¼Œè®¾ç½®ä¸ºå§‹ç»ˆå¤åˆ¶ï¼Œè¿™æ ·å°±ä¸ç”¨æ‰‹åŠ¨å¤åˆ¶äº†</p>\n<p><img alt=\"\" height=\"864\" src=\"..\\..\\static\\image\\fd9b0942388540cd8058b80ab48f97ef.png\" width=\"688\"/></p>\n<h2><img alt=\"\" height=\"455\" src=\"..\\..\\static\\image\\9cdbf618b46348dbae9dcb73087f5a85.png\" width=\"948\"/><br/>  1.6ç”Ÿæˆdockeré•œåƒ</h2>\n<p>æˆ‘ä»¬æŠŠåˆšæ‰å‘å¸ƒç›®å½•ä¸Šä¼ åˆ°å‰é¢å‡†å¤‡çš„LinuxæœåŠ¡å™¨</p>\n<p><img alt=\"\" height=\"260\" src=\"..\\..\\static\\image\\8160bdf888b44dfaa72b506f9ac90d0b.png\" width=\"478\"/></p>\n<p>cdè¿›å…¥è¯¥ç›®å½•</p>\n<p><img alt=\"\" height=\"329\" src=\"..\\..\\static\\image\\133befc755bc4502b0d25d285ef1724b.png\" width=\"765\"/></p>\n<p> ç°åœ¨å¼€å§‹ç”Ÿæˆé•œåƒï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹dockerå·²æœ‰é•œåƒåˆ—è¡¨ï¼Œç­‰ä¸‹å¯ä»¥å¯¹æ¯”æ–°ç”Ÿæˆé•œåƒ</p>\n<p><img alt=\"\" height=\"362\" src=\"..\\..\\static\\image\\f4d134cec6ea441ab1824d33663e06d9.png\" width=\"1101\"/></p>\n<p> æ¥ä¸‹æ¥ï¼Œæ‰§è¡Œ</p>\n<pre><code>docker build -t dockersample-image/1.0 -f Dockerfile .</code></pre>\n<p><span style=\"background-color:#fe2c24;\">ï¼ˆæ³¨æ„ . æ˜¯å¿…é¡»çš„ï¼Œä»£è¡¨å½“å‰ç›®å½•ï¼‰</span></p>\n<p><img alt=\"\" height=\"648\" src=\"..\\..\\static\\image\\14f3f33f1e7a48249732dd42d460f1eb.png\" width=\"746\"/></p>\n<p> å†æŸ¥çœ‹ä¸‹é•œåƒï¼Œå¯ä»¥çœ‹åˆ°é•œåƒå·²ç»ç”ŸæˆæˆåŠŸäº†</p>\n<p><img alt=\"\" height=\"400\" src=\"..\\..\\static\\image\\4ce59e31ad404ead90368a6e9ea04786.png\" width=\"1071\"/></p>\n<p> ç”Ÿæˆçš„é•œåƒï¼Œå¯ä»¥pushåˆ°å›½å†…çš„é•œåƒä»“åº“ï¼Œæˆ–è€…æœ¬åœ°å±€åŸŸç½‘çš„ç§æœä»“åº“ï¼Œç”¨äºæµ‹è¯•ã€ç”Ÿäº§ç­‰ç¯å¢ƒçš„å‘å¸ƒä½¿ç”¨</p>\n<h2>1.7 è¿è¡Œå®¹å™¨</h2>\n<p>æœ‰äº†é•œåƒï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨äº†</p>\n<p>æ‰§è¡Œ </p>\n<pre><code>docker run -d -p 8001:80 --name dockersample1 dockersample-image/1.0</code></pre>\n<p><img alt=\"\" height=\"266\" src=\"..\\..\\static\\image\\585667e76b4241919d2098d5a980acb4.png\" width=\"1200\"/></p>\n<p>æˆ‘ä»¬æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„8001ç«¯å£ <a href=\"http://node2:8001/\" title=\"http://node2:8001/\">http://node2:8001/</a>ï¼Œå‘ç°æŠ¥404äº†</p>\n<p><img alt=\"\" height=\"653\" src=\"..\\..\\static\\image\\72ca657123374edab869ec34a8758346.png\" width=\"1030\"/></p>\n<p> ä»”ç»†æ£€æŸ¥äº†å‘å¸ƒæµç¨‹ï¼Œå‘ç°æ²¡é—®é¢˜ï¼Œæœ€åæ£€æŸ¥é…ç½®å‘ç°äº†é—®é¢˜ï¼ŒåŸæ¥é»˜è®¤åªæœ‰åœ¨è°ƒè¯•ç¯å¢ƒï¼Œæ‰ä¼šå¼€å¯Swaggeræ–‡æ¡£</p>\n<p><img alt=\"\" height=\"510\" src=\"..\\..\\static\\image\\8c44a24dae0c43f9a0e8d026ca8dac94.png\" width=\"891\"/></p>\n<p> è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±ç›´æ¥è®¿é—®æ¥å£åœ°å€å§ï¼Œ<a href=\"http://node2:8001/WeatherForecast\" title=\"http://node2:8001/WeatherForecast\">http://node2:8001/WeatherForecast</a>ï¼Œæ•°æ®å‡ºæ¥äº†</p>\n<p><img alt=\"\" height=\"181\" src=\"..\\..\\static\\image\\4a6a0d8516a94f9d94b4ee616d9545ec.png\" width=\"1200\"/></p>\n<p> æˆ‘ä»¬å†æ–°å¼€ä¸€ä¸ªå®¹å™¨è¯•è¯•</p>\n<pre><code>docker run -d -p 8002:80 --name dockersample2 dockersample-image/1.0</code></pre>\n<p><img alt=\"\" height=\"80\" src=\"..\\..\\static\\image\\1fb087cf550340dea02012c2b5844a0a.png\" width=\"1200\"/></p>\n<p>  è®¿é—®ä¸‹æ¥å£åœ°å€8002ï¼Œ<a href=\"http://node2:8001/WeatherForecast\" title=\"http://node2:8002/WeatherForecast\">http://node2:8002/WeatherForecast</a>ï¼Œæ•°æ®ä¹Ÿå‡ºæ¥äº†</p>\n<p><img alt=\"\" height=\"171\" src=\"..\\..\\static\\image\\7368ca0ceed84d208a0387d4df395dc3.png\" width=\"1200\"/></p>\n<p><span style=\"color:#9c8ec1;\">æ€»ç»“<br/>         æ„Ÿè°¢èƒ½çœ‹åˆ°è¿™é‡Œçš„æœ‹å‹ğŸ˜‰</span></p>\n<p><span style=\"color:#9c8ec1;\">        æœ¬æ¬¡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼ŒçŒ«å¤´é¹°æ•°æ®è‡´åŠ›äºä¸ºå¤§å®¶åˆ†äº«æŠ€æœ¯å¹²è´§ğŸ˜</span></p>\n<p><span style=\"color:#9c8ec1;\">        å¦‚æœä»¥ä¸Šè¿‡ç¨‹ä¸­å‡ºç°äº†ä»»ä½•çš„çº°æ¼é”™è¯¯ï¼Œçƒ¦è¯·å¤§ä½¬ä»¬æŒ‡æ­£ğŸ˜…</span></p>\n<p><span style=\"color:#9c8ec1;\">        å—ç›Šçš„æœ‹å‹æˆ–å¯¹æŠ€æœ¯æ„Ÿå…´è¶£çš„ä¼™ä¼´è®°å¾—ç‚¹èµå…³æ³¨æ”¯æŒä¸€æ³¢ğŸ™</span></p>\n<p><span style=\"color:#9c8ec1;\">        ä¹Ÿå¯ä»¥æ‰«æäºŒç»´ç æˆ–æœç´¢å…³æ³¨æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ã€çŒ«å¤´é¹°æ•°æ®åˆ†æã€‘ï¼Œç•™è¨€äº¤æµğŸ™</span></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\d1ab78f440ea4b10bff546a77f6819fb.jpg\"/></p>\n</div>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-03-07 20:07:07", "summary": "ä»Šå¤©å¸¦ç»™å¤§å®¶ä¸€ç¯‡æ–‡ç« ï¼Œæƒ³å¤§å®¶ä»‹ç»ä¸‹åœ¨ä¸‹ï¼Œå¦‚ä½•åœ¨ç¯å¢ƒéƒ¨ç½²ä¸€ä¸ªç®€å•çš„åŸºäºçš„åº”ç”¨ï¼Œä¹Ÿå°±æ˜¯æ‰“åŒ…é¡¹ç›®é•œåƒï¼Œå¹¶åœ¨ä¸‹ä½¿ç”¨æ‰“åŒ…çš„é•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚ä¸€ç¯å¢ƒå‡†å¤‡è™šæ‹Ÿæœºæˆ‘ä»¬å‡†å¤‡ä¸€å°è™šæ‹Ÿæœºï¼Œæˆ‘è¿™é‡Œæ˜¯è™šæ‹Ÿæœºå®‰è£…æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œå¯"}