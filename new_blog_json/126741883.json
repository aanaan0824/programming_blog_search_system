{"blogid": "126741883", "writerAge": "码龄2年", "writerBlogNum": "45", "writerCollect": "176", "writerComment": "52", "writerFan": "62", "writerGrade": "3级", "writerIntegral": "740", "writerName": "Schwertlilien", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126741883.jpg", "writerRankTotal": "24267", "writerRankWeekly": "58568", "writerThumb": "126", "writerVisitNum": "39191", "blog_read_count": "11", "blog_time": "于 2022-09-07 11:21:26 发布", "blog_title": "MySQL-DML、DQL、DCL", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><ul><li><ul><li><a href=\"#DML_1\">DML</a></li><li><ul><li><ul><li><a href=\"#_3\">添加数据</a></li><li><a href=\"#_23\">修改数据</a></li><li><a href=\"#_36\">删除数据</a></li></ul>\n</li></ul>\n</li><li><a href=\"#DQL_54\">DQL</a></li><li><ul><li><a href=\"#_83\">基本查询</a></li><li><a href=\"#_98\">条件查询</a></li><li><a href=\"#_119\">分组查询</a></li><li><ul><li><a href=\"#_121\">聚合函数</a></li></ul>\n</li><li><a href=\"#_158\">排序查询</a></li><li><a href=\"#_172\">分页查询</a></li></ul>\n</li><li><a href=\"#DCL_184\">DCL</a></li><li><ul><li><ul><li><a href=\"#_186\">管理用户</a></li><li><a href=\"#_203\">权限控制</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_228\">相关代码</a></li><li><ul><li><ul><li><a href=\"#DCL_230\">DCL</a></li><li><a href=\"#DCL_288\">DCL</a></li></ul>\n</li></ul>\n</li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h3><a id=\"DML_1\"></a>DML</h3>\n<h5><a id=\"_3\"></a>添加数据</h5>\n<ol><li> <p>给<strong>指定字段</strong>添加数据：<code>insert into 表名(字段1,字段2,···) values(值1,值2,···);</code></p> </li><li> <p>给<strong>全部字段</strong>添加数据：<code>insert into 表名 values(值1,值2,···);</code></p> </li><li> <p>批量添加数据：</p> <p><code>insert into 表名(字段1,字段2,···) values(值1,值2,···),(值1,值2,···),(值1,值2,···);</code></p> <p><code>insert into 表名 values(值1,值2,···),(值1,值2,···),(值1,值2,···);</code></p> </li></ol>\n<blockquote>\n<ul><li>插入数据，要按照指定的顺序与值一一对应；</li><li>字符串与日期型数据要在引号<code>''</code>之中；</li><li>插入数据值的大小，要在字段规定的范围之类。</li></ul>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\850a8102aa9115802c2056f2e81e2de5.png\"/></p>\n<h5><a id=\"_23\"></a>修改数据</h5>\n<p><code>update 表名 set 字段名1=值1,字段名2=值2,...[where 条件];</code></p>\n<blockquote>\n<p>修改的是符合条件的那一行的数据；没有条件代表修改整张表的数据。</p>\n</blockquote>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">update</span> employee <span class=\"token keyword\">set</span> department<span class=\"token operator\">=</span><span class=\"token string\">'人事部'</span> <span class=\"token keyword\">where</span> age<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">update</span> employee <span class=\"token keyword\">set</span> enterdate<span class=\"token operator\">=</span><span class=\"token string\">'2002-08-08'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\bd24c621fac2b5eb7001685633c76331.png\"/></p>\n<h5><a id=\"_36\"></a>删除数据</h5>\n<p><code>delete from 表名 [where 条件]</code></p>\n<blockquote>\n<p><code>where</code>条件与修改数据同；</p>\n<p>不能删除字段的值(可以使用<code>update</code>，设置为<code>null</code>)</p>\n<p><strong>注意删除的是表中的部分数据，而不是表结构。</strong></p>\n</blockquote>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">delete</span> <span class=\"token keyword\">from</span> employee <span class=\"token keyword\">where</span> gender<span class=\"token operator\">=</span><span class=\"token string\">'女'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\4bddabd0e6b2328d122291a271d9a624.png\"/></p>\n<h3><a id=\"DQL_54\"></a>DQL</h3>\n<p>查询的频次更高。</p>\n<p><code>select</code>语法：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 编写顺序</span>\n<span class=\"token keyword\">select</span> \n\t字段列表<span class=\"token comment\"># 基本查询</span>\n<span class=\"token keyword\">from</span>\n\t表名列表<span class=\"token comment\"># 基本查询</span>\n<span class=\"token keyword\">where</span>\n\t条件列表<span class=\"token comment\"># 条件查询</span>\n<span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span>\n\t分组字段列表<span class=\"token comment\"># 分组查询，一般配合聚合函数使用</span>\n<span class=\"token keyword\">having</span>\n\t分组后条件列表<span class=\"token comment\"># 分组查询，一般配合聚合函数使用</span>\n<span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span>\n\t排序字段列表<span class=\"token comment\"># 排序查询</span>\n<span class=\"token keyword\">limit</span>\n\t分页参数<span class=\"token comment\"># 分页查询</span>\n\t\n<span class=\"token comment\"># 执行顺序</span>\n<span class=\"token keyword\">from</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token keyword\">where</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token keyword\">select</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span><span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span><span class=\"token keyword\">limit</span>\n</code></pre>\n<h4><a id=\"_83\"></a>基本查询</h4>\n<ol><li>查询多个字段：<code>select 字段1,字段2,... from 表名;</code></li><li>查询表中全部字段（的数据）：<code>select * from 表名;</code></li><li>设置字段的别名：<code>select 字段1[as 别名1],字段2[as 别名2],... from 表名;</code></li><li>去除重复记录：<code>select distinct 字段列表 from 表名</code></li></ol>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\c1b5f218a3e50ff96364706ec7a3800b.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\512e0717b6fd3bc8221121d775199472.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\b96162613c636293c4c4cfc78b0d16fc.png\"/></p>\n<h4><a id=\"_98\"></a>条件查询</h4>\n<p><code>select 字段列表 from 表名 where 条件列表</code></p>\n<blockquote>\n<p>条件包含比较运算符和逻辑运算符。</p>\n</blockquote>\n<p>在比较运算符中，比较新的是：</p>\n<table><thead><tr><th>比较运算符</th><th>功能</th></tr></thead><tbody><tr><td><code>between...and...</code></td><td>在某范围之内，闭区间<code>[,]</code></td></tr><tr><td><code>in(...)</code></td><td>在<code>in</code>之后的列表中的值，多选<code>1</code></td></tr><tr><td><code>like 占位符</code></td><td>模糊匹配(占位符：<code>_</code>匹配单个字符、<code>%</code>匹配任意个字符)</td></tr><tr><td><code>is null</code></td><td>是<code>null</code>值</td></tr></tbody></table>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\f76e17249ba83458e57f270530065f33.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\01de8dc68b61873c84560495dd8c2f92.png\"/></p>\n<h4><a id=\"_119\"></a>分组查询</h4>\n<h5><a id=\"_121\"></a>聚合函数</h5>\n<p>聚合函数指将一<strong>列</strong>数据作为一个整体，进行纵向计算。</p>\n<table><thead><tr><th>常见函数</th><th>功能</th></tr></thead><tbody><tr><td><code>count</code></td><td>统计数量</td></tr><tr><td><code>max</code></td><td>最大值</td></tr><tr><td><code>min</code></td><td>最小值</td></tr><tr><td><code>avg</code></td><td>平均值</td></tr><tr><td><code>sum</code></td><td>求和</td></tr></tbody></table>\n<p>语法：<code>select 聚合函数(字段列表) from 表名</code></p>\n<blockquote>\n<p><code>null</code>不参与聚合函数运算，不是0</p>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\4be02c8cc0a24f9035364e9db26f96a2.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\20863d2d316b081a5c43353b91f76e88.png\"/></p>\n<p><strong>分组查询</strong>：<code>select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组后过滤条件];</code></p>\n<blockquote>\n<p><code>where</code>与<code>having</code>的区别：</p>\n<ul><li>执行时机不同：<code>where</code>是分组之前进行过滤，不满足<code>where</code>条件，不参与分组；而<code>having</code>是分组之后队结果进行过滤；</li><li>判断条件不同：<code>where</code>不能对聚合函数进行判断，但<code>having</code>可以。</li></ul>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\187a644bae478bfd18fad1464987d022.png\"/></p>\n<p>同样，使用<code>having</code>也可以达到相同的结果。（当然，<code>where</code>与<code>having</code>还是有不同的）</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\e7db1e0e37e85e6a22be8e9be4276494.png\"/></p>\n<h4><a id=\"_158\"></a>排序查询</h4>\n<p><code>select 字段列表 from 表名 order by 字段1 排序方式1,字段2 排序方式2;</code></p>\n<blockquote>\n<p>支持多字段进行排序：第1个字段相同时，使用字段2进行排序。</p>\n<p>排序方式有：ASC(升序，默认)、DESC(降序)</p>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\77ea1d3b09dd240c65b0562ee6118f06.png\"/></p>\n<h4><a id=\"_172\"></a>分页查询</h4>\n<p><code>select 字段列表 from 表名 limit 起始索引，查询记录数;</code></p>\n<blockquote>\n<p><code>MySQL</code>中起始索引从0开始，其分页查询关键字为<code>limit</code>。</p>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\dcc14463049475e1d6f8506d7a3dcde7.png\"/></p>\n<h3><a id=\"DCL_184\"></a>DCL</h3>\n<h5><a id=\"_186\"></a>管理用户</h5>\n<ol><li>查询用户：<code>use mysql</code>、<code>select * from user</code></li><li>创建用户：<code>create user '用户名'@'主机名' identified by '密码'</code></li><li>修改用户密码：<code>alter user 用户名'@'主机名' identified with mysql_native_password by '新密码'</code></li><li>删除用户：<code>drop user '用户名'@'主机名'</code></li></ol>\n<blockquote>\n<p>DCL主要由DBA控制捏。</p>\n</blockquote>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\738dc72cbdcca802cdabbe4175018bf7.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\9115a6b47a70deabcefd338f7ba9195e.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\fde2405e5975383fa10d52c10ff78657.png\"/></p>\n<h5><a id=\"_203\"></a>权限控制</h5>\n<table><thead><tr><th>权限</th><th>说明</th></tr></thead><tbody><tr><td><code>all,all privileges</code></td><td>所有权限</td></tr><tr><td><code>select</code></td><td>查询数据</td></tr><tr><td><code>insert</code></td><td>插入数据</td></tr><tr><td><code>update</code></td><td>修改数据</td></tr><tr><td><code>delete</code></td><td>删除数据</td></tr><tr><td><code>alter</code></td><td>修改表</td></tr><tr><td><code>drop</code></td><td>删除数据库/表/视图</td></tr><tr><td><code>create</code></td><td>创建数据库/表</td></tr></tbody></table>\n<ol><li>查询权限：<code>show grants for '用户名'@'主机名'</code></li><li>授予权限：<code>grant 权限列表 on 数据库名.表名 to '用户名'@'主机名'</code></li><li>撤销权限：<code>revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名'</code></li></ol>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\14f70cb3c63de147a222f4a0423aa980.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\bb832e9f1b1371bab3f6917623d3beb6.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\240cb7ae17cc335e6d85b01fd753449b.png\"/></p>\n<h3><a id=\"_228\"></a>相关代码</h3>\n<h5><a id=\"DCL_230\"></a>DCL</h5>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> 信贷企业 <span class=\"token keyword\">values</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'3390939'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-7-18'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A00297'</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">943.4</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">56.6</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'3390940'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-7-18'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A00297'</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">4780.24</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">286.81</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token number\">5067.05</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'3390941'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-7-18'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A00297'</span><span class=\"token punctuation\">,</span><span class=\"token number\">943.4</span><span class=\"token punctuation\">,</span><span class=\"token number\">56.6</span><span class=\"token punctuation\">,</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'3390942'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-7-18'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A00297'</span><span class=\"token punctuation\">,</span><span class=\"token number\">4780.24</span><span class=\"token punctuation\">,</span><span class=\"token number\">286.81</span><span class=\"token punctuation\">,</span><span class=\"token number\">5067.05</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'9902669'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-7'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A05061'</span><span class=\"token punctuation\">,</span><span class=\"token number\">326.21</span><span class=\"token punctuation\">,</span><span class=\"token number\">9.79</span><span class=\"token punctuation\">,</span><span class=\"token number\">336</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'40826107'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-8'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A05991'</span><span class=\"token punctuation\">,</span><span class=\"token number\">170.94</span><span class=\"token punctuation\">,</span><span class=\"token number\">29.06</span><span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'4420531'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-9'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A03142'</span><span class=\"token punctuation\">,</span><span class=\"token number\">37735.85</span><span class=\"token punctuation\">,</span><span class=\"token number\">2264.15</span><span class=\"token punctuation\">,</span><span class=\"token number\">40000</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'4420532'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-9'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A03142'</span><span class=\"token punctuation\">,</span><span class=\"token number\">4716.98</span><span class=\"token punctuation\">,</span><span class=\"token number\">283.02</span><span class=\"token punctuation\">,</span><span class=\"token number\">5000</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'15040454'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-11'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A02994'</span><span class=\"token punctuation\">,</span><span class=\"token number\">46153.85</span><span class=\"token punctuation\">,</span><span class=\"token number\">7846.15</span><span class=\"token punctuation\">,</span><span class=\"token number\">54000</span><span class=\"token punctuation\">,</span><span class=\"token string\">'作废发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'40829320'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-14'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A05991'</span><span class=\"token punctuation\">,</span><span class=\"token number\">162.39</span><span class=\"token punctuation\">,</span><span class=\"token number\">27.61</span><span class=\"token punctuation\">,</span><span class=\"token number\">190</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'10769077'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-25'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A01798'</span><span class=\"token punctuation\">,</span><span class=\"token number\">969.9</span><span class=\"token punctuation\">,</span><span class=\"token number\">29.1</span><span class=\"token punctuation\">,</span><span class=\"token number\">999</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'15462965'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-27'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A03775'</span><span class=\"token punctuation\">,</span><span class=\"token number\">466.02</span><span class=\"token punctuation\">,</span><span class=\"token number\">13.98</span><span class=\"token punctuation\">,</span>\t<span class=\"token number\">480</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'18308605'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-27'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A08485'</span><span class=\"token punctuation\">,</span><span class=\"token number\">619.81</span><span class=\"token punctuation\">,</span><span class=\"token number\">37.19</span><span class=\"token punctuation\">,</span>\t<span class=\"token number\">657</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'9279217'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-28'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A01709'</span><span class=\"token punctuation\">,</span><span class=\"token number\">283.02</span>\t<span class=\"token punctuation\">,</span><span class=\"token number\">16.98</span><span class=\"token punctuation\">,</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'15459892'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-28'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A06754'</span><span class=\"token punctuation\">,</span><span class=\"token number\">728.16</span><span class=\"token punctuation\">,</span><span class=\"token number\">21.84</span><span class=\"token punctuation\">,</span><span class=\"token number\">750</span><span class=\"token punctuation\">,</span><span class=\"token string\">'作废发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'E1'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'15459893'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017-8-28'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'A06754'</span><span class=\"token punctuation\">,</span><span class=\"token number\">640.78</span><span class=\"token punctuation\">,</span><span class=\"token number\">19.22</span><span class=\"token punctuation\">,</span><span class=\"token number\">660</span><span class=\"token punctuation\">,</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 完成基本查询需求</span>\n<span class=\"token comment\"># 1.查询多个字段设置别名</span>\n<span class=\"token keyword\">select</span> 发票号码 <span class=\"token keyword\">as</span> <span class=\"token string\">'haoma'</span><span class=\"token punctuation\">,</span>发票状态 <span class=\"token keyword\">from</span> 信贷企业<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 2.查询所有字段</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 信贷企业<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 3.查询销方企业编号（去除重复）</span>\n<span class=\"token keyword\">select</span> <span class=\"token keyword\">distinct</span> 销方单位  <span class=\"token keyword\">from</span> 信贷企业<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 完成条件查询</span>\n<span class=\"token comment\"># 1.查询价税合计金额大于1k的销方单位</span>\n<span class=\"token keyword\">select</span> 销方单位 <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">where</span> 价税合计<span class=\"token operator\">&gt;</span><span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 2.查询发票号码为三位数的信息,数字等变量也可以</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">where</span> 价税合计 <span class=\"token operator\">like</span> <span class=\"token string\">'___'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 聚合函数</span>\n<span class=\"token comment\"># 1. 统计销方单位数量</span>\n<span class=\"token keyword\">select</span> <span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">where</span> 价税合计 <span class=\"token operator\">like</span> <span class=\"token string\">'___'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 2. 计算价税合计的sum、avg、min、max</span>\n<span class=\"token keyword\">select</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>价税合计<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">avg</span><span class=\"token punctuation\">(</span>价税合计<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span>价税合计<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>价税合计<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> 信贷企业<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 分组查询</span>\n<span class=\"token comment\"># 1.根据发票状态分组，分为有效发票和作废发票</span>\n<span class=\"token keyword\">select</span> 发票状态<span class=\"token punctuation\">,</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> 发票状态<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 2.选择有效发票且价税合计&gt;0的发票，根据价税金额分组并显示如下</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">where</span> 价税合计<span class=\"token operator\">&gt;</span><span class=\"token number\">0</span> <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> 价税合计 <span class=\"token keyword\">having</span> 发票状态<span class=\"token operator\">=</span><span class=\"token string\">'有效发票'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 排序查询</span>\n<span class=\"token comment\"># 1.按照金额排序</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">where</span> 发票状态<span class=\"token operator\">=</span><span class=\"token string\">'有效发票'</span> <span class=\"token keyword\">order</span> <span class=\"token keyword\">by</span> 价税合计 <span class=\"token keyword\">asc</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 分页查询</span>\n<span class=\"token comment\"># 1.查询第2页的数据，每页展示5条记录</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> 信贷企业 <span class=\"token keyword\">limit</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"DCL_288\"></a>DCL</h5>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 查询用户</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token keyword\">user</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 创建用户：只能在当前主机访问</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">user</span> <span class=\"token string\">'user001'</span><span class=\"token variable\">@'localhost'</span> identified <span class=\"token keyword\">by</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 创建用户：可以在任意主机访问</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">user</span> <span class=\"token string\">'user002'</span><span class=\"token variable\">@'%'</span> identified <span class=\"token keyword\">by</span> <span class=\"token string\">'123456'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 修改user001密码：</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">user</span> <span class=\"token string\">'user001'</span><span class=\"token variable\">@'localhost'</span> identified <span class=\"token keyword\">with</span> mysql_native_password <span class=\"token keyword\">by</span> <span class=\"token string\">'1111111111'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 删除用户</span>\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">user</span> <span class=\"token string\">'user002'</span><span class=\"token variable\">@'%'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># 查询权限</span>\n<span class=\"token comment\"># GRANT USAGE ON *.* TO `user001`@`localhost`表示仅仅可以连接数据库并登录。</span>\n<span class=\"token keyword\">show</span> grants <span class=\"token keyword\">for</span> <span class=\"token string\">'user001'</span><span class=\"token variable\">@'localhost'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 授予权限</span>\n<span class=\"token keyword\">grant</span> <span class=\"token keyword\">all</span> <span class=\"token keyword\">on</span> demo<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">to</span> <span class=\"token string\">'user001'</span><span class=\"token variable\">@'localhost'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># 撤销权限</span>\n<span class=\"token keyword\">revoke</span> <span class=\"token keyword\">all</span> <span class=\"token keyword\">on</span> demo<span class=\"token punctuation\">.</span><span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'user001'</span><span class=\"token variable\">@'localhost'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-09-07 11:21:26", "summary": "文章目录添加数据修改数据删除数据基本查询条件查询分组查询聚合函数排序查询分页查询管理用户权限控制相关代码添加数据给指定字段添加数据：表名字段字段值值给全部字段添加数据：表名值值批量添加数据：表名字段字"}