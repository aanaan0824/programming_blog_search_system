{"blogid": "124176435", "writerAge": "码龄20年", "writerBlogNum": "10", "writerCollect": "3", "writerComment": "0", "writerFan": "2", "writerGrade": "1级", "writerIntegral": "68", "writerName": "汤姆懒猫", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124176435.jpg", "writerRankTotal": "154464", "writerRankWeekly": "111300", "writerThumb": "1", "writerVisitNum": "7199", "blog_read_count": "1837", "blog_time": "已于 2022-07-01 12:31:31 修改", "blog_title": "centos 7安装nextcloud docker 23.0.X", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p></p>\n<p>环境：</p>\n<ul><li>CentOS 7</li></ul>\n<p>目的：</p>\n<p>安装nextcloud，并将数据库连接至mysql容器中。</p>\n<h2>准备</h2>\n<p>安装Docker，升级系统安装docker</p>\n<pre><code>$ sudo yum update\n$ sudo yum install docker</code></pre>\n<p>配置docker镜像：</p>\n<pre><code>$ sudo vim /etc/docker/daemon.json\n{\n        \"registry-mirrors\":[\n                \"https://xxxx.mirror.aliyuncs.com\",\n                \"https://registry.docker-cn.com\",\n                \"http://docker.mirrors.ustc.edu.cn\",\n                \"http://hub-mirror.c.163.com\"\n                ]\n}\n$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker</code></pre>\n<p></p>\n<p>拉取数据库和nextcloud</p>\n<pre><code>$ docker pull mysql:8.0\n$ docker pull nextcloud</code></pre>\n<p>默认安装的是apache的最新版本,但不知道是不是改了源的问题，实际不是nextcloud:laset是个老版本。</p>\n<h3>配置MYSQL</h3>\n<p>配置mysql：（其中的password是改成你要用的密码 ， 记住你创建的库名和库账号密码，建好后要在初始页面填写</p>\n<pre><code>$ docker run -d --name mysql \\\n    -v d_mysql:/var/lib/mysql \\\n    -e MYSQL_ROOT_PASSWORD=password \\\n    -e MYSQL_DATABASE=nextcloud \\\n    -e MYSQL_USER=nextcloud \\\n    -e MYSQL_PASSWORD=password \\\n    -p 3306:3306 \\\n    mysql:8.0</code></pre>\n<p></p>\n<p>进入容器内的数据如检查是否创建正确。</p>\n<pre><code>$ docker exec -it mysql bash\nroot@XXXXXXXXX:/# mysql -u nextcloud -p\nEnter password: \nmysql&gt; show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| nextcloud          |\n+--------------------+\n2 rows in set (0.00 sec)</code></pre>\n<p><strong>配置nextcloud</strong>：</p>\n<pre><code>$ docker run -d --name nextcloud \\\n    -v nextcloud:/var/www/html \\\n    --link mysql:mysql \\\n    -p 8080:80 nextcloud</code></pre>\n<p>--link将两个容器连接，这样nextcloud就会直接使用mysql容器作为数据库了。同样-p指定端口，8080是服务器对外开放的端口（可自行定义端口）建议不要选热门端口就行。除此之外，还要确保该端口是打开的，否则访问时会被拒绝；可以用命令行的方式或者</p>\n<p><strong>首次登陆配置</strong></p>\n<h3><strong>创建一个前台账户密码</strong></h3>\n<h3>数据库选择mysql/MariaDB即可，最后一栏host填写mysql。</h3>\n<p></p>\n<p>其他：</p>\n<p>  此方式默认安装会将数据存在系统盘，修改系统盘设置见以下链接</p>\n<p><a href=\"https://blog.csdn.net/richardjung/article/details/124357982\" title=\"安装好的nextcloud docker扩容问题（已更新）_汤姆懒猫的博客-CSDN博客_nextcloud 扩容\">安装好的nextcloud docker扩容问题（已更新）_汤姆懒猫的博客-CSDN博客_nextcloud 扩容</a>，或者参考该文章，安装的时候修改数据存储位置即可。</p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-07-01 12:31:31", "summary": "环境：目的：安装，并将数据库连接至容器中。准备安装，升级系统安装配置镜像：拉取数据库和默认安装的是的最新版本但不知道是不是改了源的问题，实际不是是个老版本。配置配置：其中的是改成你要用的密码，记住你创"}