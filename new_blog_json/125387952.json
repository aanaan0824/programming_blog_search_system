{"blogid": "125387952", "writerAge": "码龄4年", "writerBlogNum": "9", "writerCollect": "32", "writerComment": "8", "writerFan": "77", "writerGrade": "2级", "writerIntegral": "110", "writerName": "竹叶青轻清゛", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125387952.jpg", "writerRankTotal": "96990", "writerRankWeekly": "165770", "writerThumb": "10", "writerVisitNum": "3777", "blog_read_count": "991", "blog_time": "已于 2022-06-27 18:24:31 修改", "blog_title": "VisionMaster4.2.0 联合C#实现相机SDK取图", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>VisionMaster4.2.0 联合C#实现相机SDK取图</h3>\n<ul><li><ul><li><a href=\"#_4\">一、相机取流</a></li><li><ul><li><a href=\"#11__8\">1.1 设备连接接口流程</a></li><li><a href=\"#12__52\">1.2 主动取流</a></li><li><a href=\"#13__84\">1.3 回调取流</a></li></ul>\n</li><li><a href=\"#VisionMaster_SDK_155\">二、VisionMaster 图像源SDK取图</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<p>一般情况下，VisionMater支持绝大多数工业相机直连，但是在实际使用过程中，例如相机需要被其他软件占用等复杂情况，VisionMaster无法连接相机获取图像数据。为此，VisionMaster图像源支持二次开发情况下，利用SDK获取图像数据。今天，简单介绍一下工业相机取流以及VisionMaster的SDK取图。</p>\n<h2><a id=\"_4\"></a>一、相机取流</h2>\n<p>这里采用海康MVS相机SDK，完成相机的取流。</p>\n<h3><a id=\"11__8\"></a>1.1 设备连接接口流程</h3>\n<div class=\"mermaid sequence-diagram flow-chart\">\n<svg height=\"897.2615222930908\" preserveaspectratio=\"xMidYMid meet\" style=\"overflow: hidden; position: relative;\" version=\"1.1\" viewbox=\"0 0 241.45187377929688 897.2615222930908\" width=\"241.45187377929688\" xmlns=\"http://www.w3.org/2000/svg\">\n<desc style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n   Created with Raphaël 2.3.0\n  </desc>\n<defs style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<marker id=\"raphael-marker-endblock33-objt4m4i\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objcd367\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objq0rap\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-obj4jxbz\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objjd12v\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objpsiq9\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objyklxn\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objddgfs\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n</defs>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"st\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,96.3667,10.4)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"stt\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,96.3667,10.4)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    开始\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op1\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,22.407,100.6068)\" width=\"197.63787841796875\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op1t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,22.407,100.6068)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    枚举所有设备(可选)\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_EnumDevices_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op2\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,2,207.6137)\" width=\"238.45187377929688\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op2t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,2,207.6137)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    判断设备是否可访问（可选）\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_IsDevicesAccessible_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op3\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,21.4777,314.6205)\" width=\"199.49649047851562\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op3t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,21.4777,314.6205)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    创建句柄\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_CreateHandle_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op4\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,26.2199,421.6273)\" width=\"190.01202392578125\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op4t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,26.2199,421.6273)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    打开设备\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_OpenDevice_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op5\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,12.287,528.6342)\" width=\"217.87786865234375\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op5t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,12.287,528.6342)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    获取设备信息（可选）\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_GetAllMatchInfo_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op6\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,26.8866,635.641)\" width=\"188.67877197265625\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op6t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,26.8866,635.641)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    关闭设备\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_CloseDevice_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op7\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,16.8721,742.6479)\" width=\"208.70767211914062\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op7t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,16.8721,742.6479)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    释放句柄\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_DestoryHandle_NET\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"e\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,96.3667,858.0547)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"et\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,96.3667,858.0547)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    结束\n   </tspan>\n</text>\n<path d=\"M121.22593688964844,48.60683536529541C121.22593688964844,48.60683536529541,121.22593688964844,90.58071231842041,121.22593688964844,99.10665607452393\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objt4m4i)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,155.6136713027954C121.22593688964844,155.6136713027954,121.22593688964844,197.5875482559204,121.22593688964844,206.11349201202393\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objcd367)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,262.6205072402954C121.22593688964844,262.6205072402954,121.22593688964844,304.5943841934204,121.22593688964844,313.1203279495239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objq0rap)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,369.6273431777954C121.22593688964844,369.6273431777954,121.22593688964844,411.6012201309204,121.22593688964844,420.1271638870239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-obj4jxbz)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,476.6341791152954C121.22593688964844,476.6341791152954,121.22593688964844,518.6080560684204,121.22593688964844,527.1339998245239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objjd12v)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,583.6410150527954C121.22593688964844,583.6410150527954,121.22593688964844,625.6148920059204,121.22593688964844,634.1408357620239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objpsiq9)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,690.6478509902954C121.22593688964844,690.6478509902954,121.22593688964844,732.6217279434204,121.22593688964844,741.1476716995239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objyklxn)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M121.22593688964844,797.6546869277954C121.22593688964844,797.6546869277954,121.22593688964844,847.2605467727408,121.22593688964844,856.561645493668\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objddgfs)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n</svg>\n</div>\n<p>详细步骤：</p>\n<ul><li> <p>（可选）调用MV_CC_EnumDevices_NET() 枚举子网内指定传输协议对应的所有设备。可以通过nTLayerType在结构 MV_CC_DEVICE_INFO() 中找到设备的信息。</p> </li><li> <p>（可选）在打开指定设备之前，调用 MV_CC_IsDeviceAccessible_NET() 检查指定设备是否可访问。</p> </li><li> <p>调用 MV_CC_CreateDevice_NET() 以创建设备句柄。</p> </li><li> <p>调用 MV_CC_OpenDevice_NET() 打开设备。</p> </li><li> <p>（可选）执行以下一个或多个操作：</p> <p>获取设备信息 调用 MV_CC_GetAllMatchInfo_NET()</p> <p>获得最佳包大小（仅对网口相机有效） 调用 MV_CC_GetOptimalPacketSize_NET()</p> </li><li> <p>调用 MV_CC_CloseDevice_NET() 关闭设备。</p> </li><li> <p>调用 MV_CC_DestroyDevice_NET() 来销毁句柄并释放资源。</p> </li></ul>\n<h3><a id=\"12__52\"></a>1.2 主动取流</h3>\n<p>SDK提供主动获取图像的接口，用户可以在开启取流后直接调用此接口获取图像，也可以使用异步方式（线程、定时器等）获取图像。</p>\n<ul><li>主动取流有两种方式（不可以同时使用）</li></ul>\n<p>方式一：调用 MV_CC_StartGrabbing_NET() 开始采集，需要自己开启一个buffer，然后在应用层循环调用 MV_CC_GetOneFrameTimeout_NET() 获取指定像素格式的帧数据，获取帧数据时上层应用程序需要根据帧率控制好调用该接口的频率。</p>\n<p>方式二：调用 MV_CC_StartGrabbing_NET() 开始采集，然后在应用层调用 MV_CC_GetImageBuffer_NET() 获取指定像素格式的帧数据，然后调用 MV_CC_FreeImageBuffer_NET() 释放buffer，获取帧数据时上层应用程序需要根据帧率控制好调用该接口的频率。</p>\n<ul><li>区别：</li></ul>\n<p>1、 MV_CC_GetImageBuffer_NET() 需要与 MV_CC_FreeImageBuffer_NET() <strong>配套使用</strong>，当处理完取到的数据后，需要用 MV_CC_FreeImageBuffer_NET() 接口将pstFrame内的数据指针权限进行释放。<br/> 2、 MV_CC_GetImageBuffer_NET() 与 MV_CC_GetOneFrameTimeout_NET() 相比，有着更高的效率。且其取流缓存的分配是由sdk内部自动分配的，而 MV_CC_GetOneFrameTimeout_NET() 接口是需要客户自行分配。</p>\n<ul><li>采集流程（以MV_CC_GetImageBuffer_NET为例）</li></ul>\n<div class=\"mermaid sequence-diagram flow-chart\">\n<svg height=\"519.6341648101807\" preserveaspectratio=\"xMidYMid meet\" style=\"overflow: hidden; position: relative;\" version=\"1.1\" viewbox=\"0 0 231.27947998046875 519.6341648101807\" width=\"231.27947998046875\" xmlns=\"http://www.w3.org/2000/svg\">\n<desc style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n   Created with Raphaël 2.3.0\n  </desc>\n<defs style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<marker id=\"raphael-marker-endblock33-objyn8nl\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-obj94xt3\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objnui2i\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objlsawq\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n</defs>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"st\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,91.2805,18.8)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"stt\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,91.2805,18.8)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    开始\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op1\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,10.25,117.4068)\" width=\"211.779541015625\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op1t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,10.25,117.4068)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    开启取流\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_StartGrabbing_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"71.80683135986328\" id=\"op2\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,2,224.4137)\" width=\"228.27947998046875\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op2t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,2,224.4137)\" x=\"10\" y=\"35.90341567993164\">\n<tspan dy=\"-11.006917953491211\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    从相机中获取图像\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_GetImageBuffer_NET() \n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_FreeImageBuffer_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op3\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,10.7607,356.6205)\" width=\"210.75799560546875\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op3t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,10.7607,356.6205)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    停止采集\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_StopGrabbing_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"e\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,91.2805,480.4273)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"et\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,91.2805,480.4273)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    结束\n   </tspan>\n</text>\n<path d=\"M116.13973999023438,57.00683307647705C116.13973999023438,57.00683307647705,116.13973999023438,106.61269057169557,116.13973999023438,115.91378885204904\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objyn8nl)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M116.13973999023438,172.4136667251587C116.13973999023438,172.4136667251587,116.13973999023438,214.3875436782837,116.13973999023438,222.9134874343872\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-obj94xt3)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M116.13973999023438,296.220498085022C116.13973999023438,296.220498085022,116.13973999023438,345.8263555802405,116.13973999023438,355.12745386059396\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objnui2i)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M116.13973999023438,411.6273317337036C116.13973999023438,411.6273317337036,116.13973999023438,468.8650439286248,116.13973999023438,478.9263605253883\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objlsawq)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n</svg>\n</div>\n<h3><a id=\"13__84\"></a>1.3 回调取流</h3>\n<p>SDK提供注册回调函数的接口，用户可以将自己定义的回调函数注册在SDK内部，SDK获取到相机图像会主动回调到应用程序供用户处理，此方式可以简化用户程序逻辑。</p>\n<ul><li>采集流程</li></ul>\n<div class=\"mermaid sequence-diagram flow-chart\">\n<svg height=\"469.2341785430908\" preserveaspectratio=\"xMidYMid meet\" style=\"overflow: hidden; position: relative;\" version=\"1.1\" viewbox=\"0 0 287.1025695800781 469.2341785430908\" width=\"287.1025695800781\" xmlns=\"http://www.w3.org/2000/svg\">\n<desc style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n   Created with Raphaël 2.3.0\n  </desc>\n<defs style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<marker id=\"raphael-marker-endblock33-objbum42\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-obj0xzlu\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objleces\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n<marker id=\"raphael-marker-endblock33-objcksde\" markerheight=\"3\" markerwidth=\"3\" orient=\"auto\" refx=\"1.5\" refy=\"1.5\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n<use fill=\"black\" stroke=\"none\" stroke-width=\"1.6667\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"rotate(180 1.5 1.5) scale(0.6,0.6)\"></use>\n</marker>\n</defs>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"st\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,119.192,10.4)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"stt\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,119.192,10.4)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    开始\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op1\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,2,100.6068)\" width=\"284.1025695800781\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op1t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,2,100.6068)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    注册回调函数\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_RegisterImageCallBackEx_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op2\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,38.1615,207.6137)\" width=\"211.779541015625\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op2t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,38.1615,207.6137)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    开启取流\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_StartGrabbing_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"55.0068359375\" id=\"op3\" rx=\"0\" ry=\"0\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,38.6723,314.6205)\" width=\"210.75799560546875\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"op3t\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,38.6723,314.6205)\" x=\"10\" y=\"27.50341796875\">\n<tspan dy=\"-2.606917381286621\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    停止采集\n   </tspan>\n<tspan dy=\"16.8\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" x=\"10\">\n    MV_CC_StopGrabbing_NET()\n   </tspan>\n</text>\n<rect class=\"flowchart\" fill=\"#ffffff\" height=\"38.20683479309082\" id=\"e\" rx=\"20\" ry=\"20\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\" transform=\"matrix(1,0,0,1,119.192,430.0273)\" width=\"49.7185115814209\" x=\"0\" y=\"0\"></rect>\n<text class=\"flowchartt\" fill=\"#000000\" font-size=\"14px\" id=\"et\" stroke=\"none\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font-family: sans-serif; font-size: 14px; font-weight: normal;\" text-anchor=\"start\" transform=\"matrix(1,0,0,1,119.192,430.0273)\" x=\"10\" y=\"19.10341739654541\">\n<tspan dy=\"5.79308557510376\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\">\n    结束\n   </tspan>\n</text>\n<path d=\"M144.05128479003906,48.60683536529541C144.05128479003906,48.60683536529541,144.05128479003906,90.58071231842041,144.05128479003906,99.10665607452393\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objbum42)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M144.05128479003906,155.6136713027954C144.05128479003906,155.6136713027954,144.05128479003906,197.5875482559204,144.05128479003906,206.11349201202393\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-obj0xzlu)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M144.05128479003906,262.6205072402954C144.05128479003906,262.6205072402954,144.05128479003906,304.5943841934204,144.05128479003906,313.1203279495239\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objleces)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n<path d=\"M144.05128479003906,369.6273431777954C144.05128479003906,369.6273431777954,144.05128479003906,419.2332030227408,144.05128479003906,428.53430174366804\" fill=\"none\" marker-end=\"url(#raphael-marker-endblock33-objcksde)\" stroke=\"#000000\" stroke-width=\"1\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0); font-family: sans-serif; font-weight: normal;\"></path>\n</svg>\n</div>\n<ul><li>注意事项：</li></ul>\n<p>1、回调函数中不建议有耗时操作、线程锁等，容易造成回调阻塞。</p>\n<p>2、pData返回的是一个地址指针，建议将pData里面的数据copy出来另建线程使用。</p>\n<p>示例（伪代码）：</p>\n<pre><code class=\"prism language-c#\">//创建设备列表\nMyCamera.MV_CC_DEVICE_INFO_LIST m_stDeviceList = new MyCamera.MV_CC_DEVICE_INFO_LIST();\n//返回成功或错误信息\nint nRet;\n\n//回调函数\npublic static MyCamera.cbOutputExdelegate ImageCallback;\nvoid ImageCallbackFunc(IntPtr pData, ref MyCamera.MV_FRAME_OUT_INFO_EX pFrameInfo, IntPtr pUser)\n{\n//放入自己的操作\n}\n\n\n// ch:枚举设备 | en:Enum device\nnRet = MyCamera.MV_CC_EnumDevices_NET(MyCamera.MV_GIGE_DEVICE | MyCamera.MV_USB_DEVICE, ref m_stDeviceList);\n\n// ch:获取选择的设备信息 | en:Get selected device information\nMyCamera.MV_CC_DEVICE_INFO device =(MyCamera.MV_CC_DEVICE_INFO)Marshal.PtrToStructure(m_stDeviceList.pDeviceInfo[Index],typeof(MyCamera.MV_CC_DEVICE_INFO));//Index 设备索引\n\n// ch:创建设备 | en:Create device\npublic MyCamera m_MyCamera = new MyCamera();//创建设备对象\nnRet = m_MyCamera.MV_CC_CreateDevice_NET(ref device);\n\n// ch:打开设备 | en:Open device\nnRet = m_MyCamera.MV_CC_OpenDevice_NET(ref device);\n\n// ch:注册回调函数 | en:Register image callback\nImageCallback = new MyCamera.cbOutputExdelegate(ImageCallbackFunc);\nnRet = m_MyCamera.MV_CC_RegisterImageCallBackEx_NET(ImageCallback, IntPtr.Zero);\n\n// ch:开启抓图 || en: Start grab image\nnRet = m_MyCamera.MV_CC_StartGrabbing_NET();\n\n// ch:停止抓图 | en:Stop grab image\nnRet = m_MyCamera.MV_CC_StopGrabbing_NET();\n\n// ch:关闭设备 | en:Close device\nnRet = m_MyCamera.MV_CC_CloseDevice_NET();\n\n// ch:释放资源 | en:Drstory device\nnRet = m_MyCamera.MV_CC_DestroyDevice_NET();\n</code></pre>\n<h2><a id=\"VisionMaster_SDK_155\"></a>二、VisionMaster 图像源SDK取图</h2>\n<p>简单搭建测试方案，设置图像源为SDK。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0bfabc078999470da8c28aabc468bfff.png\"/></p>\n<p>我们通过相机SDK取流，将图像数据拷贝并传给图像源模块中。</p>\n<p>伪代码如下：</p>\n<pre><code class=\"prism language-c#\">//用于拷贝出相机图像数据\npublic ImageBaseData stInputImageInfo;\n\n//相机回调函数\nvoid ImageCallbackFunc(IntPtr pData, ref MyCamera.MV_FRAME_OUT_INFO_EX pFrameInfo, IntPtr pUser)\n{\n\tbyte[] m_BufForDriver1 = new byte[pFrameInfo.nFrameLen];\n    //海康相机取流 指针转byte[]\n    Marshal.Copy(pData, m_BufForDriver1, 0, ((int)pFrameInfo.nFrameLen));\n    stInputImageInfo = new ImageBaseData(m_BufForDriver1, pFrameInfo.nFrameLen, pFrameInfo.nWidth, pFrameInfo.nHeight, 1);\n}\n\n\n//实例化图像源，传入相机图像数据stInputImageInfo\nImageSourceModuleTool imageSourceModuleTool = VmSolution.Instance[\"流程1.图像源1\"] as ImageSourceModuleTool; \nimageSourceModuleTool.SetImageData(stInputImageInfo);\n//流程执行\nVmProcedure vmProcedure = VmSolution.Instance[\"流程1\"] as VmProcedure;\nvmProcedure.Run();\n</code></pre>\n<ul><li>通过接口函数ImageBaseData(byte[] imageData, uint dataLen, int width, int height, int pixelformat)将数据转换为VisionMaster的图像数据类型ImageBaseData。</li></ul>\n<p>效果展示：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0d19d5d2e8a746a99fd22a34e60e6467.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-06-27 18:24:31", "summary": "联合实现相机取图一、相机取流设备连接接口流程主动取流回调取流二、图像源取图一般情况下，支持绝大多数工业相机直连，但是在实际使用过程中，例如相机需要被其他软件占用等复杂情况，无法连接相机获取图像数据。为"}