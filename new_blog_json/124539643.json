{"blogid": "124539643", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "32", "writerCollect": "94", "writerComment": "6", "writerFan": "22", "writerGrade": "2çº§", "writerIntegral": "352", "writerName": "å°å¤©çš„ç¼–ç¨‹", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124539643.jpg", "writerRankTotal": "81034", "writerRankWeekly": "488858", "writerThumb": "22", "writerVisitNum": "12545", "blog_read_count": "3426", "blog_time": "äºÂ 2022-05-03 06:00:00Â å‘å¸ƒ", "blog_title": "8ä¸‡å­—å¸¦ä½ å…¥é—¨Rust", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"Rust_0\"></a>Rust</h1>\n<blockquote>\n<p>ğŸ“š å­¦ä¹ å»ºè®®ï¼š</p>\n<ul><li>å…ˆä» æ•´ä½“å‡ºå‘ï¼Œä¸è¦è®©è‡ªå·±é™·å…¥åˆ°ç»†èŠ‚ä¸­å»</li><li>å’Œè‡ªå·±å·²çŸ¥çš„çŸ¥è¯†å»ºç«‹è”ç³»</li><li>rust å’Œgoä¸€æ ·é‡‡ç”¨ ç»„åˆçš„æ‰‹æ®µå®ç°ä»£ç å¤ç”¨ï¼Œä¸è¦æ·±æ€ä¸ºä»€ä¹ˆä¸æ˜¯ç»§æ‰¿</li><li>å­¦ä¼šé˜…è¯»æºç ï¼Œä»æºç ä¸­å­¦ä¹ </li><li>Rustè®¾è®¡å“²å­¦</li></ul>\n</blockquote>\n<p>ä½¿ç”¨ cargo new é¡¹ç›®å</p>\n<p>åœ¨ç»ˆç«¯ä¸­æ„å»ºé¡¹ç›®</p>\n<p>ä½¿ç”¨ cargo build æ¥æ„å»ºå’Œè¿è¡Œé¡¹ç›®</p>\n<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ cargo run æ¥å®Œæˆç¼–è¯‘å’Œè¿è¡Œä»»åŠ¡</p>\n<p>ç¬¬ä¸€ä¸ªç¨‹åºï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>Rustä¸­å˜é‡é»˜è®¤éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œå¦‚æœè¦æ”¹å˜ä½¿ç”¨<strong>mut</strong>å…³é”®å­—æ¥ä¿®é¥°å˜é‡å°±å¯ä»¥æ”¹å˜äº†ã€‚</mark></p>\n<p>ç”¨<mark>let</mark>åˆ›å»ºå˜é‡ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> foo <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//fooæ˜¯ä¸å¯å˜çš„</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> bar <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//baræ˜¯å¯å˜çš„</span>\n</code></pre>\n<p><mark>&amp; å¼•ç”¨åœ¨é»˜è®¤æƒ…å†µä¹Ÿæ˜¯ä¸å¯å˜çš„</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> guess <span class=\"token comment\">//å£°æ˜ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ </span>\n<span class=\"token operator\">&amp;</span>guess <span class=\"token comment\">//å£°æ˜ä¸€ä¸ªä¸å¯å˜çš„å¼•ç”¨</span>\n</code></pre>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span> <span class=\"token comment\">// å¯¼å…¥åŒ…</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Guess the number!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//è¾“å‡º</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your guess:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> guess <span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å£°æ˜ä¸€ä¸ªå¯å˜çš„å˜é‡å¹¶ä¸”ç»‘å®šä¸€ä¸ªç©ºç™½å­—ç¬¦ä¸²</span>\n<span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token function\">stdin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">read_line</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to read line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä»é”®ç›˜è·å–è¾“å…¥</span>\n<span class=\"token comment\">//read_lineå®ƒè¯»å–çš„åŒæ—¶è¿˜ä¼šè¿”å›ä¸€ä¸ªå€¼ io::Resultå€¼ï¼ˆå®ƒä¸€ä¸ªæšä¸¾ç±»å‹ï¼‰ï¼Œå®ƒæœ‰OKå’ŒERRä¸¤ä¸ªå˜ä½“ï¼Œå¦‚æœè¯»å–å¤±è´¥å°±ä¼šè¿”å›expectå¹¶è¾“å‡ºé‡Œé¢çš„å†…å®¹,æ²¡æœ‰ç¼–å†™expectå‡½æ•°ä¼šå‡ºè­¦å‘Š</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"You guessed: {}\"</span><span class=\"token punctuation\">,</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™é‡Œé¢çš„èŠ±æ‹¬å·æ˜¯ä¸€ä¸ªå ä½ç¬¦,æ‰“å°å‡ ä¸ªå€¼å°±ç”¨å‡ ä¸ªèŠ±æ‹¬å·{}</span>\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> y <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x= {}, y = {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¤šä¸ªè¾“å‡º</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"game over!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"çŒœæ•°ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"çŒœæµ‹ä¸€ä¸ªæ•°å­—ï¼š\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> guess<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//åˆ›å»ºä¸€ä¸ªç©ºç™½å­—ç¬¦ä¸²å¹¶ç»‘å®šåˆ°å˜é‡guess</span>\n\n<span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token function\">stdin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">read_line</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ— æ³•è¯»å–è¡Œï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ä¸‹é¢è¿™è¡Œå’Œä¸Šé¢é‚£è¡Œæ˜¯ç­‰ä»·çš„æ²¡æœ‰ä½¿ç”¨ use å¯¼å…¥çš„è¯ï¼Œå°±éœ€è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼</span>\n<span class=\"token comment\">// std::io::stdin().read_line(&amp;mut guess).expect(\"æ— æ³•è¯»å–è¡Œï¼\");</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ çŒœæµ‹çš„æ•°å­—æ˜¯:{}\"</span><span class=\"token punctuation\">,</span>guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<pre><code class=\"prism language-rust\"># ä½¿ç”¨randåŒ…éœ€è¦åœ¨cargo<span class=\"token punctuation\">.</span>tomlæ–‡ä»¶ä¸­å°†randåŒ…å£°æ˜ä¸ºä¾èµ–\nrand<span class=\"token operator\">=</span><span class=\"token string\">\"0.3.14\"</span>  \n# æ·»åŠ å®Œæˆåä½¿ç”¨ cargo build é‡æ–°æ„å»ºè¿™ä¸ªé¡¹ç›®\n</code></pre>\n<p>å‡çº§ä¾èµ–åŒ…ä½¿ç”¨ cargo update å‘½ä»¤å‡çº§ä¾èµ–åŒ…</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// çŒœæ•°æ¸¸æˆç¤ºä¾‹</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">rand<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rng</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¯¼å…¥éšæœºæ•°æ¨¡å—  trait</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cmp<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Guess the number!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> numrand<span class=\"token operator\">=</span><span class=\"token namespace\">rand<span class=\"token punctuation\">::</span></span><span class=\"token function\">thread_rng</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">gen_range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">101</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å·¦é—­å³åˆåŒºé—´</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your guess:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> guess <span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token function\">stdin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">read_line</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to read line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//rust å…è®¸ä½¿ç”¨åŒåçš„æ–°å˜é‡æ¥éšè—æ—§å˜é‡çš„å€¼</span>\n<span class=\"token comment\">//ä»è¿™è¡Œä¹‹åï¼Œè¿™ä¸ªguesså°±ä¸æ˜¯ä¸Šé¢é‚£ä¸ªå˜é‡äº†ï¼Œè€Œç¬¬äºŒä¸ªguessæ˜¯åŸæ¥ä¸Šé¢çš„é‚£ä¸ªå˜é‡</span>\n<span class=\"token comment\">//ç”¨æˆ·è¦è¾“å…¥è¿‡ç¨‹ä¸­æŒ‰çš„å›è½¦é”®ï¼Œä¼šå¯¼å…¥æˆ‘ä»¬çš„è¾“å…¥å­—ç¬¦ä¸²é¢å¤–å¤šå‡ºä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ä½¿ç”¨ trimï¼ˆï¼‰å‡½æ•°æ¥å»é™¤</span>\n<span class=\"token comment\">//trim()å°±æ˜¯å»æ‰å­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼</span>\n<span class=\"token comment\">//parse()æ–¹æ³•ä¼šæŠŠå­—ç¬¦ä¸²è§£ææˆæ•°å€¼ç±»å‹</span>\n<span class=\"token keyword\">let</span> guess<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token operator\">=</span>guess<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"plasce type a number!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"You guessed: {}\"</span><span class=\"token punctuation\">,</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éšæœºæ•°å­—ä¸ºï¼š{}\"</span><span class=\"token punctuation\">,</span>numrand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>numrand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å’Œè°åŒ¹é…å°±æ‰§è¡Œè°</span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Less</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"too small!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Greater</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"to big!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Equal</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"you win!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"game over!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢çš„ä»£ç é‡Œé¢æœ‰ä¸€ä¸ªæ¦‚å¿µå«åš <mark><strong>éšè—ï¼ˆshadowï¼‰</strong></mark>:</p>\n<p>rust å…è®¸ä½¿ç”¨åŒåçš„æ–°å˜é‡æ¥éšè—æ—§å˜é‡çš„å€¼</p>\n<h4><a id=\"_137\"></a>ä½¿ç”¨å¾ªç¯æ¥å®ç°å¤šæ¬¡çŒœæµ‹</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">rand<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rng</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cmp<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Guess the number!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> numrand<span class=\"token operator\">=</span><span class=\"token namespace\">rand<span class=\"token punctuation\">::</span></span><span class=\"token function\">thread_rng</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">gen_range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">101</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å·¦é—­å³åˆåŒºé—´</span>\n\n<span class=\"token keyword\">loop</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å¾ªç¯èµ·å§‹ä½ç½®</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Please input your guess:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> guess <span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token function\">stdin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">read_line</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to read line\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> guess<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token operator\">=</span><span class=\"token keyword\">match</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>numrand<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> numrand<span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//ä¸éœ€è¦é”™è¯¯ä¿¡æ¯å¯ä»¥ä¸‹åˆ’çº¿å¿½ç•¥</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¿™é‡ŒæŠŠ expectæ–¹æ³•æ¢æˆäº†matchè¡¨è¾¾å¼</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"You guessed: {}\"</span><span class=\"token punctuation\">,</span> guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"éšæœºæ•°å­—ä¸ºï¼š{}\"</span><span class=\"token punctuation\">,</span>numrand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">cmp</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>numrand<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Less</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"too small!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Greater</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"to big!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Equal</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"you win!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//çŒœå¯¹äº†å°±é€€å‡º</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>è¿™é‡ŒæŠŠ expectæ–¹æ³•æ¢æˆäº†matchè¡¨è¾¾å¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> guess<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token operator\">=</span><span class=\"token keyword\">match</span> guess<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>numrand<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> numrand<span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//ä¸éœ€è¦é”™è¯¯ä¿¡æ¯å¯ä»¥ä¸‹åˆ’çº¿å¿½ç•¥</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>continueç”¨æ³•å’ŒC++ã€goã€javaç­‰è¯­è¨€ä¸€æ ·ï¼</p>\n<h3><a id=\"Rust_188\"></a>Rustä¿ç•™çš„å…³é”®å­—</h3>\n<table><thead><tr><th>å…³é”®å­—</th><th>æè¿°</th></tr></thead><tbody><tr><td>as</td><td>æ‰§è¡ŒåŸºç¡€ç±»å‹è½¬æ¢ï¼Œæ¶ˆé™¤åŒ…å«æ¡ç›®çš„æŒ‡å®š trait çš„æ­§ä¹‰ï¼Œåœ¨ use ä¸ extern crate è¯­å¥ä¸­å¯¹æ¡ç›®è¿›è¡Œé‡å‘½å</td></tr><tr><td>break</td><td>ç«‹å³é€€å‡ºä¸€ä¸ªå¾ªç¯</td></tr><tr><td>const</td><td>å®šä¹‰å¸¸é‡æˆ–è€…ä¸å¯å˜ç¥¼æŒ‡é’ˆ</td></tr><tr><td>continue</td><td>ç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯è¿­ä»£</td></tr><tr><td>crate</td><td>è¿æ¥ä¸€ä¸ªå¤–éƒ¨åŒ…æˆ–ä¸€ä¸ªä»£è¡¨äº†å½“å‰åŒ…çš„å®å˜é‡</td></tr><tr><td>dyn</td><td>è¡¨ç¤º trait å¯¹è±¡å¯ä»¥è¿›è¡ŒåŠ¨æ€åˆ†å‘</td></tr><tr><td>else</td><td>if å’Œ if let æ§åˆ¶ç»“æ„çš„å›é€€åˆ†æ”¯</td></tr><tr><td>enum</td><td>å®šä¹‰ä¸€ä¸ªæšä¸¾</td></tr><tr><td>extren</td><td>è¿æ¥å¤–éƒ¨åŒ…ã€å‡½æ•°ã€å˜é‡</td></tr><tr><td>false</td><td>å­—é¢é‡å¸ƒå°”å€¼å‡</td></tr><tr><td>fn</td><td>å®šä¹‰ä¸€ä¸ªå‡½æ•°æˆ–è€…å‡½æ•°æŒ‡é’ˆç±»å‹</td></tr><tr><td>for</td><td>åœ¨è¿­ä»£å…ƒç´ ä¸Šè¿›è¡Œè¿­ä»£ï¼Œå®ç°äº†ä¸€ä¸ª traitï¼ŒæŒ‡å®šä¸€ä¸ªé«˜é˜¶ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td>if</td><td>åŸºäºæ¡ä»¶è¡¨è¾¾å¼çš„åˆ†æ”¯</td></tr><tr><td>impl</td><td>å®ç°ç±»å‹è‡ªæœ‰çš„åŠŸèƒ½æˆ–è€… trait å®šä¹‰çš„åŠŸèƒ½</td></tr><tr><td>in</td><td>forå¾ªç¯è¯­æ³•çš„ä¸€éƒ¨åˆ†</td></tr><tr><td>let</td><td>ç»‘å®šä¸€ä¸ªå˜é‡</td></tr><tr><td>loop</td><td>æ— æ¡ä»¶å¾ªç¯</td></tr><tr><td>match</td><td>ç”¨æ¨¡å¼åŒ¹é…ä¸€ä¸ªå€¼</td></tr><tr><td>mod</td><td>å®šä¹‰ä¸€ä¸ªæ¨¡å—</td></tr><tr><td>move</td><td>è®©ä¸€ä¸ªé—­åŒ…è·å¾—å…¨éƒ¨æ•è·å˜é‡çš„æ‰€æœ‰æƒ</td></tr><tr><td>mut</td><td>å£°æ˜å¼•ç”¨ã€ç¥¼æŒ‡é’ˆæˆ–è€…æ¨¡å¼ç»‘å®šçš„å¯å˜æ€§</td></tr><tr><td>pub</td><td>å£°æ˜ç»“æ„ä½“å­—æ®µã€implå—æˆ–æ¨¡å—çš„å…¬å…±æ€§</td></tr><tr><td>ref</td><td>é€šè¿‡å¼•ç”¨ç»‘å®š</td></tr><tr><td>return</td><td>ä»å‡½æ•°ä¸­è¿”å›</td></tr><tr><td>Self</td><td>æŒ‡ä»£æ­£åœ¨å…¶ä¸Šå®ç° trait çš„ç±»å‹åˆ«å¤– <mark>Sæ˜¯å¤§å†™çš„</mark>=</td></tr><tr><td>self</td><td>æŒ‡ä»£æ–¹æ³•æœ¬èº«æˆ–è€…å½“å‰æ¨¡å— <mark>sæ˜¯å°å†™çš„</mark></td></tr><tr><td>staticc</td><td>å…¨å±€å˜é‡æˆ–è€…æŒç»­æ•´ä¸ªç¨‹åºæ‰§è¡Œè¿‡ç¨‹çš„ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td>struct</td><td>å®šä¹‰ä¸€ä¸ªç»“æ„ä½“</td></tr><tr><td>super</td><td>å½“å‰æ¨¡å—çš„çˆ¶æ¨¡å—</td></tr><tr><td>trait</td><td>å®šä¹‰ä¸€ä¸ª trait</td></tr><tr><td>true</td><td>å­—é¢é‡å¸ƒå°”çœŸ</td></tr><tr><td>type</td><td>å®šä¹‰ä¸€ä¸ªç±»å‹åˆ«å¤–æˆ–å…³è”ç±»å‹</td></tr><tr><td>unsafe</td><td>å£°æ˜ä¸å®‰å…¨çš„ä»£ç ã€å‡½æ•°ã€traitæˆ–å®ç°</td></tr><tr><td>use</td><td>æŠŠç¬¦å·å¼•å…¥ä½œç”¨åŸŸä¸­</td></tr><tr><td>where</td><td>å£°æ˜ä¸€ä¸ªç”¨äºçº¦æŸç±»å‹çš„ ä»å¥</td></tr><tr><td>while</td><td>åŸºäºä¸€ä¸ªè¡¨è¾¾å¼ç»“æœçš„æ¡ä»¶å¾ªç¯</td></tr></tbody></table>\n<p><mark>æœªæ¥å¯èƒ½ä¼šä½¿ç”¨çš„ä¿ç•™å…³é”®å­—ï¼š</mark></p>\n<table><thead><tr><th>abstract</th><th>async</th><th>become</th><th>box</th><th>do</th></tr></thead><tbody><tr><td>final</td><td>macro</td><td>override</td><td>priv</td><td>try</td></tr><tr><td>typeof</td><td>unsized</td><td>virtual</td><td>yield</td><td></td></tr></tbody></table>\n<h3><a id=\"_238\"></a>é€šç”¨ç¼–ç¨‹æ¦‚å¿µ</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//é»˜è®¤ä¸å¯å˜</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x= {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nx<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x= {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//å¸¸é‡:å®ƒä¸å¯ä»¥ä½¿ç”¨mutå…³é”®å­—ï¼Œå¸¸é‡æ°¸è¿œéƒ½æ˜¯ä¸å¯å˜çš„</span>\n<span class=\"token comment\">//å£°æ˜ä¸€ä¸ªå¸¸é‡ä½¿ç”¨constå…³é”®å­—</span>\n<span class=\"token comment\">//å¸¸é‡åªå¯ä»¥ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼</span>\n<span class=\"token comment\">//RUSTä¸­å¸¸é‡ ä¸€èˆ¬ä½¿ç”¨å¤§å†™å­—æ¯</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_POINTS</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">//Shadowing</span>\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//5</span>\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span>x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//6</span>\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span>x<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//8</span>\n\n<span class=\"token keyword\">let</span> spaces_str<span class=\"token operator\">=</span><span class=\"token string\">\"     \"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> spaces_num<span class=\"token operator\">=</span>spaces_str<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>spaces_num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//5</span>\n</code></pre>\n<p>ä½¿ç”¨ <mark>const</mark>æ¥å®šä¹‰ä¸€ä¸ªå¸¸é‡ï¼Œä¸èƒ½ä½¿ç”¨letå…³é”®å­—æ¥å®šä¹‰å¸¸é‡ï¼›</p>\n<p><mark>ä¸èƒ½ä½¿ç”¨ mut å…³é”®å­—ä¿®é¥°ä¸€ä¸ªå¸¸é‡</mark>ï¼Œ<strong>å¸¸é‡æ€»æ˜¯ä¸å˜çš„ï¼</strong></p>\n<p>åœ¨ rust ä¸­ï¼Œå˜é‡åä¸€èˆ¬éƒ½æœ‰å¤§å†™ï¼</p>\n<p>éšè—æœºåˆ¶ä¸åŒäºå°†å˜é‡å£°æ˜ä¸º mut çš„ ï¼<br/> é‡å¤ä½¿ç”¨ <strong>let</strong> å…³é”®å­—<strong>ä¼šåˆ›å»ºå‡ºæ–°çš„å˜é‡</strong>ï¼Œå› æ­¤å¯ä»¥å¤ç”¨çš„æ—¶å€™æ”¹å˜å®ƒçš„ç±»å‹ï¼</p>\n<h2><a id=\"rust_285\"></a>rustæ•°æ®ç±»å‹</h2>\n<h4><a id=\"_287\"></a>æ ‡é‡ç±»å‹å’Œå¤åˆç±»å‹</h4>\n<p>æ³¨æ„ï¼š<mark><strong>Rustæ˜¯ä¸€é—¨é™æ€ç±»å‹è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒåœ¨ç¼–è¯‘ç¨‹åºçš„è¿‡ç¨‹ä¸­éœ€è¦çŸ¥é“æ‰€æœ‰å˜é‡çš„å…·ä½“ç±»å‹ã€‚</strong></mark></p>\n<blockquote>\n<p>æ ‡é‡ç±»å‹ï¼šå•ä¸ªå€¼ç±»å‹çš„ç»Ÿç§°ï¼› 4ç§ï¼šæ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ã€å­—ç¬¦</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/*æ ‡é‡ç±»å‹ï¼šæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼ˆf32,f64é»˜è®¤çš„ï¼‰ï¼Œå¸ƒå°”å€¼ï¼Œå­—ç¬¦ï¼ˆcharï¼‰,å­—ç¬¦ä¸²ï¼Œå…ƒç»„ï¼Œæšä¸¾\nå¤åˆç±»å‹ï¼šæ•°ç»„ï¼Œç»“æ„ä½“ï¼ŒæŒ‡é’ˆï¼Œå…ƒç»„ï¼Œæšä¸¾\nu32:æ— ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå 32ä½ç©ºé—´\nu8,u16,u32,u64,u128 æ— ç¬¦å·\ni8,i16,i32,i64,i128 æœ‰ç¬¦å·\næ— ç¬¦å·ä»¥Uå¼€å¤´ï¼Œæœ‰ç¬¦å·ä»¥Iå¼€å¤´\næ•´æ•°é»˜è®¤ç±»å‹æ˜¯i32\n*/</span>\n<span class=\"token comment\">//isize å’Œ usize è¿™ä¸¤ç§æ˜¯ç”±è¿ç®—ç¨‹åºçš„è®¡ç®—æœºç¡¬ä»¶å†³å®šçš„</span>\n<span class=\"token keyword\">let</span> guess<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"42\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Not a number!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>guess<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//rustå£°æ˜çš„å˜é‡æ²¡æœ‰ä½¿ç”¨ä¼šæœ‰è­¦å‘Š</span>\n<span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token keyword\">f32</span> <span class=\"token operator\">=</span> <span class=\"token number\">3.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token keyword\">f64</span> <span class=\"token operator\">=</span> <span class=\"token number\">4.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b<span class=\"token punctuation\">:</span><span class=\"token keyword\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> b<span class=\"token punctuation\">:</span><span class=\"token keyword\">bool</span> <span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token char\">'z'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y<span class=\"token punctuation\">:</span><span class=\"token keyword\">char</span> <span class=\"token operator\">=</span><span class=\"token char\">'y'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> z<span class=\"token operator\">=</span>'ğŸ˜€'<span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¹Ÿå¯ä»¥å­˜æ”¾è¿™ç§</span>\n</code></pre>\n<p>æ•´æ•°ç±»å‹æœ‰: (å®ƒä»¬å çš„ç©ºé—´å¤§å°ä¹Ÿå°±æ˜¯åé¢å¯¹åº”çš„æ•°å­—å•ä½ä¸ºbit)</p>\n<ul><li>æ— ç¬¦å·ï¼šu8,u16,u32,u64,usize</li><li>æœ‰ç¬¦å·ï¼ši8,i16,i32,i64,isize</li></ul>\n<p><mark>usizeå’Œisize</mark>ï¼šå–å†³äºç¨‹åºè¿è¡Œçš„ç›®æ ‡å¹³å°ï¼›åœ¨64ä½æ¶æ„ä¸Šå°±æ˜¯64bitï¼Œè€Œ32ä½æ¶æ„ä¸Šå°±æ˜¯ 32bit</p>\n<p>rusté»˜è®¤çš„æ•´æ•°å­—é¢é‡æ˜¯ï¼š<strong>i32</strong></p>\n<p>æµ®ç‚¹æ•°ç±»å‹ï¼š</p>\n<ul><li>f32</li><li>f64 ï¼ˆé»˜è®¤ï¼‰</li></ul>\n<blockquote>\n<p>å¤åˆç±»å‹ï¼šå¯ä»¥å°†å¤šä¸ªä¸åŒç±»å‹çš„å€¼ç»„åˆä¸ºä¸€ä¸ªç±»å‹ï¼›2ç§ï¼šå…ƒç»„ï¼ˆtupleï¼‰ æ•°ç»„ ï¼ˆarrayï¼‰</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//å¤åˆç±»å‹</span>\n<span class=\"token comment\">//Tupleç±»å‹å¯ä»¥å°†å¤šä¸ªç±»å‹çš„å€¼æ”¾åœ¨ä¸€ä¸ªç±»å‹é‡Œé¢ï¼Œå’ŒC++ä¸­çš„å…ƒç»„ç±»ä¼¼</span>\n<span class=\"token comment\">//tupleçš„é•¿åº¦çš„å›ºå®šï¼Œä¸€æ—¦åˆ›å»ºå°±ä¸èƒ½æ”¹å˜</span>\n<span class=\"token comment\">//å¦‚æœä¸æ˜ç¡®æ˜¯ä»€ä¹ˆç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨_æ¥ä»£æ›¿</span>\n<span class=\"token keyword\">let</span> tup<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">char</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">bool</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> tup<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span>_<span class=\"token punctuation\">,</span><span class=\"token keyword\">bool</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">3.14</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"boy\"</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> tup<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span><span class=\"token number\">1.25</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…</span>\n<span class=\"token keyword\">let</span> ont<span class=\"token operator\">=</span>tup<span class=\"token number\">.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> two<span class=\"token operator\">=</span>tup<span class=\"token number\">.1</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¹Ÿå¯ä»¥é€šè¿‡ç‚¹æ¥è¿›è¡Œè®¿é—®</span>\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>tup<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},{},{}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è·å–tupçš„å€¼ è§£æ„ï¼šå°†å…ƒç»„æ‹†è§£ä¸ºnä¸ªä¸åŒçš„éƒ¨åˆ†</span>\n<span class=\"token comment\">//æ•°ç»„</span>\n<span class=\"token comment\">//æ•°ç»„å’ŒC++ä¸­çš„å·®ä¸å¤š</span>\n<span class=\"token comment\">//é•¿åº¦ä¹Ÿæ˜¯å›ºå®šçš„</span>\n<span class=\"token comment\">// Vertoræ›´åŠ çµæ´»ï¼Œé•¿åº¦å¯ä»¥æ”¹å˜</span>\n<span class=\"token comment\">//å’Œæ•°ç»„ç±»ä¼¼ï¼Œä¸ç¡®å®šä½¿ç”¨å“ªä¸ªï¼Œå°±ä½¿ç”¨ Vector</span>\n<span class=\"token keyword\">let</span> arr<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> avec<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>avec<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>arr<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//å¦å¤–ä¸€å£°æ˜æ•°ç»„çš„æ–¹æ³•</span>\n<span class=\"token keyword\">let</span> a<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//åˆ›å»ºæ•°ç»„å¹¶ä¸”åˆå§‹åŒ–ä¸º5ä¸ª3</span>\n</code></pre>\n<p>å…ƒç»„å’Œæ•°ç»„éƒ½æ‹¥æœ‰å›ºå®šçš„é•¿åº¦ï¼</p>\n<p>å…ƒç»„ç”¨å°æ‹¬å·ï¼ˆï¼‰ï¼›æ•°ç»„ç”¨ä¸­æ‹¬å· []</p>\n<p>æœ‰ä¸€ç§åŠ¨æ€æ•°ç»„ç±»å‹ï¼š<strong>vector</strong></p>\n<h2><a id=\"_364\"></a>å‡½æ•°</h2>\n<p>rustä½¿ç”¨<mark>è›‡å½¢å‘½åæ³•</mark>ï¼ˆåªä½¿ç”¨å°å†™å­—æ¯ï¼Œä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼‰æ¥è§„èŒƒå‡½æ•°å’Œå˜é‡åç§°çš„é£æ ¼ï¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å‡½æ•°è°ƒç”¨ </span>\n<span class=\"token function\">add_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">56</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token operator\">+</span><span class=\"token number\">6</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¡¨è¾¾å¼</span>\n    <span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    x<span class=\"token operator\">+</span><span class=\"token number\">1</span> <span class=\"token comment\">//è¿™ä¸ªåŠ ä¸Šäº†åˆ†å·å°±å˜æˆäº†è¯­å¥ï¼›è¿™ä¸ªç›¸å½“äºè¿”å›å€¼</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> n1<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> u<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token operator\">+</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    u\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//4</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token comment\">//å‡½æ•°å’Œæ³¨é‡Š</span>\n<span class=\"token comment\">// å£°æ˜å‡½æ•°ä½¿ç”¨  fn å…³é”®å­— : goè¯­è¨€ä½¿ç”¨ func å…³é”®å­—</span>\n<span class=\"token comment\">// è§„èŒƒæ˜¯å‡½æ•°åç§°ä½¿ç”¨å°å†™ï¼Œå•è¯ä¹‹é—´ä½¿ç”¨_åˆ†å‰²</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello function\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span> <span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//rustå¿…é¡»æŒ‡å®šå‡½æ•°å‚æ•°ç±»å‹</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x={}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"y={}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// å‡½æ•°çš„è¿”å›å€¼</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add1</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span> <span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">u32</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//åœ¨å‚æ•°æ‹¬å·åé¢åŠ ä¸Š-&gt;ç±»å‹ å°±æ˜¯è¿”å›</span>\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span>x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">;</span>\nx   <span class=\"token comment\">//è¿”å›è¯­å¥ä¸èƒ½æœ‰åˆ†å·ï¼Œæœ‰äº†åˆ†å·å°±å˜æˆäº†è¯­å¥</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>å‚æ•°å’Œå‚æ•°ç±»å‹ä¹‹é—´ä½¿ç”¨ ï¼š åˆ†éš”ï¼</p>\n<p>rustæŠŠè¯­å¥å’Œè¡¨è¾¾å¼åŒºåˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µï¼š</p>\n<ul><li>**è¯­å¥ï¼š**æ‰§è¡Œæ“ä½œä½†ä¸ä¼šè¿”å›å€¼çš„æŒ‡ä»¤</li><li>**è¡¨è¾¾å¼ï¼š**ä¼šè¿›è¡Œè®¡ç®—å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªå€¼ä½œä¸ºç»“æœçš„ æŒ‡ä»¤</li></ul>\n<p>è®°ä½ï¼š<strong>è¯­å¥ä¸ä¼šæœ‰è¿”å›å€¼</strong></p>\n<p><strong>è¡¨è¾¾å¼åŠ ä¸Šåˆ†å·å°±ä¼šå˜æˆäº†è¯­å¥ã€‚</strong></p>\n<p>rustå‡½æ•°çš„è¿”å›å€¼ä½¿ç”¨ <strong>-&gt;</strong> <strong>è¿”å›å€¼ç±»å‹</strong>ï¼›å¦‚æœæ˜¯å¤šä¸ªå°±æ˜¯å°æ‹¬å·æ‹¬èµ·æ¥ï¼š<strong>-&gt;</strong> <strong>ï¼ˆç±»å‹1ï¼Œ ç±»å‹2 â€¦.ï¼‰</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">five</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">5</span>  <span class=\"token comment\">//è¿™æ ·ä¹Ÿæ˜¯å¯¹çš„è¿”å›5</span>\n    <span class=\"token comment\">//å¦‚æœä¸ä½¿ç”¨è¿™ç§æ–¹å¼è¿”å›ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ returnï¼Œä½¿ç”¨è¿™ä¸ªéœ€è¦åŠ åˆ†å· : return 5;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">five</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">5</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//é”™çš„ï¼ï¼ï¼ä¸èƒ½åŠ åˆ†å·</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"rust_438\"></a>rustæ³¨é‡Š</h3>\n<blockquote>\n<p>// å•è¡Œæ³¨é‡Š</p>\n</blockquote>\n<blockquote>\n<p>/**/ å¤šè¡Œæ³¨é‡Š</p>\n</blockquote>\n<h3><a id=\"_446\"></a>æ§åˆ¶æµ</h3>\n<h4><a id=\"if__else_448\"></a>if å’Œ else</h4>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// æ§åˆ¶è¡¨è¾¾å¼  if else</span>\n<span class=\"token comment\">//è¿™ä¸ªå’Œgo,pythonè¯­è¨€å·®ä¸å¤š</span>\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> x<span class=\"token operator\">&lt;</span><span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ çš„æ•°å­—çœŸå°ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> x<span class=\"token operator\">&gt;</span><span class=\"token number\">10</span><span class=\"token operator\">&amp;&amp;</span>x<span class=\"token operator\">&lt;</span><span class=\"token number\">90</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ çš„æ•°å­—åœ¨10-90ä¹‹é—´ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ çš„æ•°å­—çœŸå¤§ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¿™é‡Œyçš„å€¼ä¸èƒ½ä¸º0æˆ–è€…1ä¸ç„¶ä¼šæŠ¥é”™ï¼ï¼ï¼</span>\n<span class=\"token keyword\">if</span> y <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>rustä¸ä¼šè‡ªåŠ¨å°è¯•å°†éå¸ƒå°”ç±»å‹çš„å€¼è½¬æ¢ä¸ºå¸ƒå°”ç±»å‹ï¼ï¼ï¼</mark>ï¼Œæ‰€ä»¥ä¸Šé¢ä»£ç ä¸­yçš„å€¼åªèƒ½ä¸ºå¸ƒå°”å€¼ã€‚</p>\n<p>è¿‡å¤šçš„else if è¡¨è¾¾å¼åº”è¯¥ç”¨ match æ›¿ä»£ï¼ï¼ï¼</p>\n<pre><code class=\"prism language-rust\">\n<span class=\"token keyword\">let</span> b<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ifæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥letè¯­å¥å³ä¾§ä½¿ç”¨å®ƒæ¥ç”Ÿæˆä¸€ä¸ªå€¼</span>\n<span class=\"token comment\">// ä¹Ÿå¯ä»¥è¿™æ ·åˆ¤æ–­å®ç°åƒ ? : ç›¸åŒçš„åŠŸèƒ½</span>\n<span class=\"token keyword\">let</span> number<span class=\"token operator\">=</span><span class=\"token keyword\">if</span> b<span class=\"token operator\">&gt;</span><span class=\"token number\">5</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">100</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token number\">900</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ifå’Œelseé‡Œé¢çš„ç±»å‹è¦ä¸€æ ·ï¼Œé™æ€ç¼–è¯‘å‹è¯­è¨€</span>\n\n<span class=\"token comment\">//else if å¤ªå¤šäº†ï¼Œå¯ä»¥ä½¿ç”¨matchæ¥é‡æ„</span>\n<span class=\"token keyword\">let</span> number<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> number<span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¿™è§„åˆ™å’Œcaseå·®ä¸å¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿_</span>\n    <span class=\"token number\">1</span><span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">2</span><span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"two\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">3</span><span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _<span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"other\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>æ‰€æœ‰ if åˆ†æ”¯é‡Œé¢å¯èƒ½è¿”å›çš„å€¼éƒ½å¿…é¡»æ˜¯ä¸€ç§ç±»å‹çš„</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> nu<span class=\"token operator\">=</span><span class=\"token keyword\">if</span> <span class=\"token number\">4</span><span class=\"token operator\">&gt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">54</span><span class=\"token operator\">-</span><span class=\"token number\">12</span>\n<span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token operator\">-</span><span class=\"token number\">900</span><span class=\"token operator\">+</span><span class=\"token number\">65</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//åƒè¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè®°ä½ä¸è¦é‡Œé¢åŠ åˆ†å·</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"nu={}\"</span><span class=\"token punctuation\">,</span>nu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4><a id=\"rust_502\"></a>rustå¾ªç¯ç»“æ„</h4>\n<p><mark><strong>rustæä¾›äº† 3 ç§å¾ªç¯ç»“æ„ï¼šloop ã€whileã€forã€‚</strong></mark></p>\n<blockquote>\n<p>loop ï¼šåå¤æ‰§è¡Œä¸€å—ä»£ç ï¼Œç›´åˆ°æ¡ä»¶æ»¡è¶³ï¼ˆbreakï¼‰æˆ–è€…æˆ‘ä»¬å¼ºåˆ¶é€€å‡ºï¼ï¼</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">loop</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">...</span>\n    <span class=\"token keyword\">if</span> æ¡ä»¶ <span class=\"token punctuation\">{<!-- --></span>\n        \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// loop  ä¸ä¼šåƒ do whileå¿…å®šä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå…¶ä»–å’Œå®ƒä¸€æ ·ï¼Œå¦‚æœæ¡ä»¶æ”¾åœ¨æœ€å‰é¢ï¼Œä¸€å¼€å§‹å°±ä¸æˆç«‹ï¼Œå°±ä¸ä¼šæ‰§è¡Œ</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> count<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> res <span class=\"token operator\">=</span> <span class=\"token keyword\">loop</span><span class=\"token punctuation\">{<!-- --></span>\n   count<span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"725\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> count<span class=\"token operator\">==</span><span class=\"token number\">10</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">break</span> count<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¿™é‡Œåˆ†å·åˆ«å¿˜è®°å†™äº†</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> con1<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> res<span class=\"token operator\">=</span><span class=\"token keyword\">loop</span><span class=\"token punctuation\">{<!-- --></span>\n    con1<span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> con1 <span class=\"token operator\">==</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">break</span> con1<span class=\"token operator\">*</span><span class=\"token number\">2</span> <span class=\"token comment\">//è¿™é‡Œä¸åŠ åˆ†å·</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"con1={}\"</span><span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//20</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> con2<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> res<span class=\"token operator\">=</span><span class=\"token keyword\">loop</span><span class=\"token punctuation\">{<!-- --></span>\n    con2<span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> con2 <span class=\"token operator\">==</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">break</span> con2<span class=\"token operator\">*</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è¿™é‡ŒåŠ ä¸Šåˆ†å·</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"con2={}\"</span><span class=\"token punctuation\">,</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//20</span>\n<span class=\"token comment\">//ä¸Šé¢ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„</span>\n</code></pre>\n<blockquote>\n<p>while ç”¨æ³•å’Œå…¶ä»–è¯­è¨€ä¸€æ ·</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// while</span>\n<span class=\"token keyword\">let</span> arr<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> le<span class=\"token operator\">=</span>arr<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æ•°ç»„é•¿åº¦æ¯”æ•°ç»„ä¸‹æ ‡å¤§1</span>\n<span class=\"token keyword\">while</span> le<span class=\"token operator\">&gt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">{<!-- --></span>\n    le<span class=\"token operator\">=</span>le<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n   <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>arr<span class=\"token punctuation\">[</span>le<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>for å¾ªç¯ï¼šæ¨èä½¿ç”¨ç®€æ´åˆé«˜æ•ˆï¼›rustæœ€ä¸ºå¸¸ç”¨</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// for</span>\n<span class=\"token comment\">// ä½¿ç”¨forå¾ªç¯åˆå®‰å…¨åˆé«˜æ•ˆ</span>\n<span class=\"token keyword\">let</span> arr<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> a <span class=\"token keyword\">in</span> arr<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nè¯­æ³•ï¼š \n<span class=\"token keyword\">for</span> å˜é‡å \n</code></pre>\n<p>Rangeï¼šç”¨æ¥ç”Ÿæˆæ•°å­—åºåˆ—ï¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// Range æ ‡å‡†åº“æä¾›</span>\n<span class=\"token comment\">// æŒ‡å®šä¸€ä¸ªå¼€å§‹æ•°å­—å’Œä¸€ä¸ªç»“æŸæ•°å­—ï¼Œå®ƒå¯ä»¥ç”Ÿæˆå®ƒä»¬ä¹‹é—´çš„æ•°å­—ï¼ˆå·¦é—­å³å¼€ï¼‰</span>\n<span class=\"token comment\">// revæ–¹æ³•å¯ä»¥åè½¬ Range</span>\n<span class=\"token keyword\">for</span> number <span class=\"token keyword\">in</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">rev</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å°æ‹¬å·æ•°å­—ä¸­é—´æ˜¯ä¸¤ä¸ªç‚¹</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>number<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h1><a id=\"_592\"></a>æ‰€æœ‰æƒ</h1>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// æ‰€æœ‰æƒæ˜¯Rustæœ€ç‹¬ç‰¹çš„ç‰¹æ€§æ ¸å¿ƒç‰¹æ€§</span>\n<span class=\"token comment\">// å†…å­˜æ˜¯é€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿæ¥ç®¡ç†çš„</span>\n<span class=\"token comment\">//å †å’Œæ ˆæ˜¯ä»£ç åœ¨è¿è¡Œæ—¶å¯ä»¥å‚… çš„å†…å­˜ç©ºé—´</span>\n<span class=\"token comment\">// stack æ ˆ  è¿™ä¸Šé¢çš„æ•°æ®å¿…é¡»æ‹¥æœ‰å›ºå®šçš„å¤§å° </span>\n<span class=\"token comment\">//  heap å †  ç¼–è¯‘æ—¶å¤§å°æœªçŸ¥æˆ–è€…å¤§å°å¯èƒ½å‘ç”Ÿå˜åŒ–çš„æ•°æ®å¿…é¡»å­˜æ”¾åœ¨ heapä¸­</span>\n<span class=\"token comment\">// è®¿é—®heapä¸­çš„æ•°æ®è¦æ¯”è®¿é—®stackä¸­çš„æ•°æ®æ…¢ï¼Œå¤šäº†æ¬¡æŒ‡é’ˆè·³è½¬</span>\n</code></pre>\n<p><strong>æ‰€æœ‰æƒæ˜¯Rustæœ€ç‹¬ç‰¹çš„ç‰¹æ€§æ ¸å¿ƒç‰¹æ€§</strong></p>\n<p><strong><mark>æ‰€æœ‰æƒè§„åˆ™ï¼š</mark></strong></p>\n<ol><li><strong>rustä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å˜é‡ä½œä¸ºå®ƒçš„æ‰€æœ‰è€…ï¼›</strong></li><li><strong>åœ¨åŒä¸€æ—¶é—´å†…ï¼Œå€¼æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ï¼›</strong></li><li><strong>å½“æ‰€æœ‰è€…ç¦»å¼€è‡ªå·±çš„ä½œç”¨åŸŸæ—¶ï¼Œ å®ƒæŒæœ‰çš„å€¼å°±ä¼šè¢«é‡Šæ”¾æ‰ï¼›</strong></li></ol>\n<p>ä½œç”¨åŸŸï¼šä¸€ä¸ªå¯¹è±¡åœ¨ç¨‹åºä¸­æœ‰æœ‰æ•ˆèŒƒå›´ï¼›</p>\n<p>rust ä¸­å¯ä»¥ç”¨å¤§æ‹¬å· {} è¡¨ç¤ºä¸€ä¸ªä½œç”¨åŸŸï¼Œæˆ–è€…éš”ç¦»ä¸€ä¸ªä½œç”¨åŸŸï¼ï¼ï¼</p>\n<h3><a id=\"String_615\"></a>Stringç±»å‹</h3>\n<p><mark>å­—ç¬¦ä¸²å­—é¢é‡æ˜¯ä¸å¯å˜çš„ï¼›</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ä¸å¯å˜çš„ åˆ†é…åœ¨æ ˆä¸Šçš„</span>\n</code></pre>\n<p>ä¸ºäº†æ–¹ä¾¿æ“ä½œrustæä¾›äº†ç¬¬äºŒç§Stringç±»å‹ï¼šè¿™ä¸ªç±»å‹ä¼šåœ¨==<strong>å †</strong>==ä¸Šåˆ†é…è‡ªå·±éœ€è¦çš„å­˜å‚¨ç©ºé—´ï¼šè°ƒç”¨ <strong>from</strong> å‡½æ•°æ¥åˆ›å»º String å®ä¾‹</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//åœ¨å †ä¸Šåˆ†é…çš„ï¼Œæ˜¯å¯å˜çš„</span>\n</code></pre>\n<p><strong>åŒºåˆ«ï¼šå­—ç¬¦ä¸²å­—é¢é‡æ˜¯åˆ†é…åœ¨æ ˆä¸Šçš„ä¸å¯å˜ï¼Œè€ŒStringæ˜¯åˆ†é…å †ä¸Šçš„æ˜¯å¯å˜çš„ï¼ï¼ï¼</strong></p>\n<p>å†…å­˜å¸ƒå±€ï¼š</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-XsJoFVJ1-1651467632358)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220326202623950.png)]</p>\n<p>æ³¨æ„å›¾ä¸­ String ç±»å‹çš„åˆ†é…æ–¹å¼ï¼›</p>\n<h4><a id=\"_640\"></a>å†…å­˜ä¸åˆ†é…</h4>\n<p><strong>ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š</strong></p>\n<ul><li>rust åœ¨å˜é‡ç¦»å¼€ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ä¸€ä¸ªå«ä½œ <mark>drop</mark>çš„ç‰¹æ®Šå‡½æ•°</li><li><strong>rustä¼šåœ¨ä½œç”¨åŸŸç»“æŸçš„åœ°æ–¹è‡ªåŠ¨è°ƒç”¨ drop å‡½æ•°</strong></li></ul>\n<blockquote>\n<p>åœ¨C++ä¸­è¿™ç§å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶é‡Šæ”¾èµ„æºçš„æ¨¡å¼ä¹Ÿç§°ä¸ºèµ„æºè·å–å³åˆå§‹åŒ–ï¼ˆRAIIï¼‰</p>\n</blockquote>\n<p>å˜é‡å’Œæ•°æ®äº¤äº’çš„æ–¹å¼ï¼šç§»åŠ¨ Move</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å˜é‡å’Œæ•°æ®äº¤çš„æ–¹å¼ï¼šç§»åŠ¨ï¼ˆMove)</span>\n<span class=\"token comment\">//å¤šä¸ªå˜é‡å¯ä»¥ä¸åŒä¸€ä¸ªæ•°æ®ä½¿ç”¨ç‹¬ç‰¹çš„æ–¹å¼æ¥äº¤äº’</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shenyang\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span>s1<span class=\"token punctuation\">;</span><span class=\"token comment\">//åœ¨è¿™é‡Œè¿™æ ·ï¼Œrustä¼šåºŸå¼ƒs1çš„æ‰€æœ‰æƒï¼Œs1çš„å€¼è¢«ç§»åŠ¨åˆ°s2ä¸­ï¼Œs1çš„å€¼è¢«æ¸…ç©º</span>\n<span class=\"token comment\">//println!(\"{}\",s1);//è¿™é‡Œä½¿ç”¨æŠ¥é”™ï¼Œå› ä¸ºs1å·²ç»è¢«åºŸå¼ƒäº†</span>\n<span class=\"token comment\">/*let s1=\"shenyang\";\nlet s2=s1;\nåƒè¿™æ ·å°±å¯ä»¥ï¼Œä¸ä¼šæŠ¥é”™ï¼ï¼ï¼\n*/</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ä¸€ä¸ªString ç”±3éƒ¨åˆ†ç»„æˆï¼š</span>\n<span class=\"token comment\">// ä¸€ä¸ªæŒ‡é’ˆï¼Œlenï¼ˆé•¿åº¦ï¼‰,capï¼ˆå®¹é‡ï¼‰åˆ†é…åœ¨æ ˆä¸Šï¼Œè€Œå­—ç¬¦ä¸²çš„å†…å®¹è¢«åˆ†é…åœ¨å †ä¸Š</span>\n</code></pre>\n<p>å†…å­˜å¸ƒå±€ï¼š</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-JO54qY2f-1651467632359)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220326203349038.png)]</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-lfZlmpuw-1651467632359)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220327094827868.png)]</p>\n<p>ä¸Šé¢æŠŠ s1 çš„å€¼èµ‹ç»™ s2 çš„æ—¶å€™åªå¤åˆ¶äº†å®ƒåœ¨<strong>å­˜å‚¨åœ¨æ ˆä¸Šçš„æŒ‡é’ˆã€é•¿åº¦åŠå®¹é‡å­—æ®µ</strong>ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯<strong>å®ƒæ²¡æœ‰å¤åˆ¶æŒ‡é’ˆæŒ‡å‘çš„å †ä¸Šæ•°æ®ï¼</strong></p>\n<blockquote>\n<p>å¼•å‡ºé—®é¢˜ï¼šs1 å’Œ s2 ç¦»å¼€ä½œç”¨çš„æ—¶å€™ä¼šå°è¯•å»é‡å¤é‡Šæ”¾ç›¸åŒçš„å†…å­˜ï¼Œå¯¼è‡´äºŒæ¬¡é‡Šæ”¾</p>\n<blockquote>\n<p>rustè§£å†³æ–¹æ¡ˆï¼š ruståœ¨è¿™ç§æƒ…å†µä¸‹ä¼šå°† s1 åºŸå¼ƒï¼Œä¸å†è§†ä¸ºä¸€ä¸ªæœ‰æ•ˆçš„å˜é‡ï¼Œs1 ç¦»å¼€ä½œç”¨åŸŸåä¹Ÿä¸éœ€è¦æ¸…ç†ä»»ä½•ä¸œè¥¿ï¼ï¼ï¼</p>\n</blockquote>\n</blockquote>\n<h3><a id=\"_684\"></a>æµ…æ‹·è´å’Œæ·±æ‹·è´</h3>\n<blockquote>\n<p>C++ä¸­çš„æ·±æµ…æ‹·è´ï¼š</p>\n<ul><li>æ·±æ‹·è´ï¼šåœ¨å †åŒºé‡æ–°ç”³è¯·ç©ºé—´è¿›è¡Œæ‹·è´æ“ä½œã€æ‹·è´å®Œæ•´çš„å†…å®¹</li><li>æµ…æ‹·è´ï¼šåªæ‹·è´åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘å™¨æœ¬èº«æä¾›çš„æ‹·è´æ„é€ å‡½æ•°åšçš„æµ…æ‹·è´æ“ä½œ</li></ul>\n<blockquote>\n<p>æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜ï¼šå †åŒºçš„å†…å­˜é‡å¤é‡Šæ”¾ä»¥åŠå†…å­˜æ³„æ¼</p>\n<p>æœ‰å †åŒºå¼€è¾Ÿçš„å±æ€§ï¼Œä¸€å®šè¦æä¾›æ‹·è´æ„é€ å‡½æ•°é˜²æ­¢æµ…æ‹·è´å¸¦æ¥çš„é—®é¢˜ã€‚</p>\n</blockquote>\n</blockquote>\n<p>rustæ‹·è´s1åˆ°s2çš„æ–¹å¼å°±å¯ä»¥è§†ä¸ºæµ…æ‹·è´ã€‚</p>\n<p>æœ¯è¯­ï¼š ç§»åŠ¨ï¼ˆMOVE)</p>\n<p>rustä¸­åº”è¯¥æ˜¯ s1 è¢«ç§»åŠ¨åˆ° s2 ä¸­ã€‚å› ä¸º s1 ä¼šè¢«åºŸå¼ƒäº†ï¼ï¼</p>\n<p><strong><mark>ä¸€ä¸ªè®¾è®¡åŸåˆ™</mark>ï¼šrust æ°¸è¿œä¸ä¼šè‡ªåŠ¨åœ°åˆ›å»ºæ•°æ®çš„æ·±æ‹·è´ã€‚æ‰€ä»¥åœ¨ rustä¸­ï¼Œä»»ä½•è‡ªåŠ¨çš„èµ‹å€¼æ“ä½œéƒ½å¯ä»¥è§†ä¸ºé«˜æ•ˆçš„ã€‚</strong></p>\n<p>éœ€è¦ç”¨åˆ°æ·±æ‹·è´å°±æ˜¯å…‹éš†ï¼ˆclone)</p>\n<h4><a id=\"__Clone_707\"></a>å˜é‡å’Œæ•°æ®äº¤äº’çš„æ–¹å¼ï¼š å…‹éš† Clone</h4>\n<p>å½“è¦åšæ·±æ‹·è´æ“ä½œçš„æ—¶å€™ï¼Œrustæä¾›ä¸€ä¸ªæ–¹æ³•ï¼š <mark>Clone()</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// clone å…‹éš† æ¯”è¾ƒæ¶ˆè€—èµ„æº</span>\n<span class=\"token keyword\">let</span> a1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> a2<span class=\"token operator\">=</span>a1<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å…‹éš†ä½œäº†æ·±åº¦æ‹·è´æ“ä½œ</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},{}\"</span><span class=\"token punctuation\">,</span>a1<span class=\"token punctuation\">,</span>a2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¿™é‡Œa1å˜é‡å°±æ²¡æœ‰è¢«åºŸå¼ƒï¼Œå› ä¸ºæ˜¯ç›´æ¥æŠŠa1å…‹éš†ç»™a2</span>\n<span class=\"token comment\">// å’Œä¸Šé¢çš„ä½œå¯¹æ¯”</span>\n</code></pre>\n<p>Clone()æ–¹æ³•å¤åˆ¶æ ˆä¸Šæ•°æ®çš„åŒæ—¶ï¼Œä¹Ÿå¤åˆ¶äº†å †ä¸Šçš„æ•°æ®ï¼ï¼ï¼</p>\n<blockquote>\n<p>å…‹éš†æœ‰ä¸ªç¼ºç‚¹ï¼šå°±æ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æº</p>\n</blockquote>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-HNe07bTL-1651467632360)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220326203136545.png)]</p>\n<p><mark>é‡ç‚¹ï¼š</mark><strong>å¦‚æœä¸€ä¸ªç±»å‹æ‹¥æœ‰äº† Copy è¿™ç§ trait ï¼Œé‚£ä¹ˆå®ƒçš„å˜é‡å¯ä»¥åœ¨èµ‹å€¼ç»™å…¶ä»–å˜é‡ä¹‹åä»ç„¶ä¿æŒå¯ç”¨æ€§ã€‚</strong></p>\n<p><strong>å¦‚æœä¸€ä¸ªç±»å‹æœ¬èº«æˆ–è€…è¿™ç§ç±»å‹çš„ä»»æ„æˆå‘˜å®ç°äº† Drop è¿™ç§ trait ï¼Œé‚£ä¹ˆrust å°±ä¸å…è®¸å®ƒå®ç° Copy è¿™ç§ traitäº†ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/*\nstaceä¸Šçš„æ•°æ®ï¼šå¤åˆ¶\nCopy traitï¼Œå¯ä»¥ç”¨äºå®Œå…¨å­˜æ”¾åœ¨æ ˆä¸Šçš„ç±»å‹\nå¦‚æœä¸€ä¸ªç±»å‹å®ç°Copy traitï¼Œé‚£ä¹ˆæ—§çš„å˜é‡åœ¨èµ‹å€¼åä»ç„¶å¯ä»¥ä½¿ç”¨\nä¸€äº›æ‹¥æœ‰Copy traitçš„ç±»å‹ï¼š\nä»»ä½•ç®€å•æ ‡é‡çš„ç»„åˆç±»å‹éƒ½å¯ä»¥æ˜¯Copyçš„ï¼›ä»»ä½•éœ€è¦åˆ†é…å†…å­˜æˆ–è€…æŸç§èµ„æºçš„éƒ½ä¸æ˜¯Copyçš„\næ‹¥æœ‰çš„ï¼šbool char æ‰€æœ‰çš„æµ®ç‚¹ç±»å‹ï¼Œæ‰€æœ‰çš„æ•´æ•°ç±»å‹\ntuple(å…ƒç»„)å‰ææ˜¯å…¶ä¸­æ‰€æœ‰çš„å­—æ®µéƒ½æ˜¯Copyçš„ eg:\nï¼ˆi32,i32)æ˜¯\nï¼ˆi32,String)ä¸æ˜¯\n*/</span>\n</code></pre>\n<p><strong>ä»»ä½•ç®€å•æ ‡é‡çš„ç»„åˆç±»å‹éƒ½å¯ä»¥æ˜¯Copyçš„ï¼›ä»»ä½•éœ€è¦åˆ†é…å†…å­˜æˆ–è€…æŸç§èµ„æºçš„éƒ½ä¸æ˜¯Copyçš„</strong></p>\n<h3><a id=\"_747\"></a>æ‰€æœ‰æƒä¸å‡½æ•°</h3>\n<p>ç†è§£è¿™é‡Œï¼šè¦ç†è§£äº†ä¸Šé¢çš„å†…å®¹æ¯”å¦‚ï¼šå¤åˆ¶æ“ä½œã€å…‹éš†æ“ä½œã€ Copy ã€Drop</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n <span class=\"token comment\">// æ‰€æœ‰æƒä¸å‡½æ•°</span>\n<span class=\"token comment\">// å‡½æ•°åœ¨è¿”å›å€¼çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„è½¬ç§»</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token function\">gives_ownership</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> s3<span class=\"token operator\">=</span><span class=\"token function\">takes_and_gives_back</span><span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//s2çš„æ‰€æœ‰æƒè¢«ç§»åŠ¨åˆ°å‡½æ•°é‡Œé¢ï¼Œä»è¿™é‡Œå¼€å§‹ s2 ä¸å†æœ‰æ•ˆ</span>\n\n <span class=\"token keyword\">let</span> s4<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ç”±äº i32 ç±»å‹æ˜¯ Copy çš„ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¹‹åè¿˜å¯ä»¥ç»§ç»­ä½¿ç”¨ s4</span>\n    \n<span class=\"token comment\">/*\nä¸€ä¸ªå˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ä¼šè¢«Dropå‡½æ•°è¿˜å›ï¼Œé™¤éå®ƒçš„æ‰€æœ‰æƒè¢«è½¬ç§»å¦å¤–ä¸€ä¸ªå˜é‡ä¸Š\n*/</span>\n    \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">gives_ownership</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> some_string<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsome_string <span class=\"token comment\">//è¿™ä¸ªçš„æ‰€æœ‰æƒç§»åŠ¨åˆ°è°ƒç”¨å®ƒçš„ä¸Šé¢ä¹Ÿå°±æ˜¯ä¸Šé¢çš„s1ä¸Š</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">takes_and_gives_back</span><span class=\"token punctuation\">(</span>a_string<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">-&gt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//s2çš„æ‰€æœ‰æƒè¢«ç§»åŠ¨åˆ°å‡½æ•°å‚æ•°ä¸Šé¢</span>\n    a_string <span class=\"token comment\">//è¿™ä¸ªä½œä¸ºè¿”å›å€¼çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°è°ƒç”¨å®ƒçš„ä¸Šé¢ä¹Ÿå°±æ˜¯ä¸Šé¢s3ä¸Šé¢</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">makes_copy</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x={}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//xåœ¨è¿™é‡Œç¦»å¼€ä½œç”¨åŸŸå¹¶ä¸ä¼šæœ‰ä»€ä¹ˆç‰¹åˆ«çš„äº‹å‘ç”Ÿå°±æ˜¯æ­£å¸¸çš„æ¶ˆäº¡</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢çš„å‡½æ•°ä¸­çš„è¿”å›å€¼æ˜¯<strong>ç§»åŠ¨æ“ä½œ</strong>ä¸æ˜¯è¿”å›æ‰€æœ‰æƒæ“ä½œ ï¼ï¼ï¼å‚æ•°ä¼ é€’è¿›å»å‡½æ•°çš„æ—¶å€™ï¼Œå‡½æ•°ä¼šè·å¾—æ‰€æœ‰æƒ</p>\n<h4><a id=\"_785\"></a>è¿”å›å€¼å’Œä½œç”¨åŸŸ</h4>\n<p>ğŸŒ</p>\n<blockquote>\n<p>éµå¾ªæ¨¡å¼ï¼šå°†ä¸€ä¸ªå€¼èµ‹å€¼ç»™å¦å¤–ä¸€ä¸ªå˜é‡æ—¶å°±ä¼šå‘ç”Ÿæ‰€æœ‰æƒè½¬ç§»ï¼Œå½“ä¸€ä¸ªæŒæœ‰å †æ•°æ®çš„å˜é‡ç¦»å¼€ä½œç”¨åŸŸæ—¶ï¼Œå®ƒçš„æ•°æ®å°±ä¼šè¢« Drop æ¸…ç†å›æ”¶ï¼Œé™¤éæ•°æ®çš„æ‰€æœ‰æƒè¢«ç§»åŠ¨åˆ°äº†å¦ä¸€ä¸ªå˜é‡ä¸Š é¢ã€‚</p>\n</blockquote>\n<p><strong>å‡½æ•°åœ¨è¿”å›å€¼çš„è¿‡ç¨‹ä¸­ä¹Ÿä¼šå‘ç”Ÿæ‰€æœ‰æƒçš„è½¬ç§»ï¼ï¼ï¼</strong></p>\n<p>é—®é¢˜ï¼šå½“å¸Œæœ›è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¿ç•™å‚æ•°çš„æ‰€æœ‰æƒï¼Œå°±è¦å°†ä¼ å…¥çš„å€¼ä½œä¸ºç»“æœè¿”å›ï¼Œä½†åŒæ—¶å‡½æ•°ä¹Ÿå¯èƒ½ä¼šéœ€è¦è¿”å›è‡ªå·±çš„ç»“æœã€‚</p>\n<p>ğŸ‘€ï¼šé‡‡ç”¨å…ƒç»„è§£å†³ï¼šå¤ªè¿‡äºç¹ç</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>s2<span class=\"token punctuation\">,</span>len<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token function\">calculate_length</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//æ¥æ”¶å¤šä¸ªå‚æ•°çš„æ—¶å€™ï¼Œéœ€è¦å¿½ç•¥æŸä¸ªå‚æ•°å¯ä»¥ä¸‹åˆ’çº¿ </span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},{}\"</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">,</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">calculate_length1</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">usize</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">let</span> length<span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å–å¾—æ‰€æœ‰æƒ</span>\n   <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span>length<span class=\"token punctuation\">)</span><span class=\"token comment\">//é‡‡ç”¨å…ƒç»„è§£å†³åŒæ—¶è¿”å›å¤šä¸ªå€¼</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>âš™ï¸:é‡‡ç”¨<strong>å…ƒç»„</strong>å¯ä»¥è®©å‡½æ•°åŒæ—¶è¿”å›å¤šä¸ªå€¼ï¼ï¼ï¼</p>\n<h2><a id=\"_817\"></a>å¼•ç”¨ä¸å€Ÿç”¨</h2>\n<p>ğŸ“„ è§£å†³ä¸Šé¢é‡‡ç”¨å…ƒç»„è¿”å›å¤ªè¿‡äºç¹ççš„é—®é¢˜</p>\n<blockquote>\n<p>â­•ï¸ é—®é¢˜ï¼šæˆ‘ä»¬æƒ³è¦è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œä¸è½¬ç§»å€¼çš„æ‰€æœ‰æƒ</p>\n</blockquote>\n<p>ğŸ–Œï¼š<strong>&amp;</strong> ä»£è¡¨<strong>å¼•ç”¨</strong>çš„å«ä¹‰ï¼Œ<strong>å¯ä»¥åœ¨ä¸è·å–æ‰€æœ‰æƒçš„æƒ…å†µä¸‹ä½¿ç”¨å€¼ã€‚</strong></p>\n<p>â€‹ <strong>*</strong> ä»£è¡¨<strong>è§£å¼•ç”¨</strong></p>\n<p>â€‹ <strong>&amp;</strong> <strong>å‚æ•°ç±»å‹</strong> ä¸å¯å˜å¼•ç”¨ï¼ˆé»˜è®¤çš„ï¼‰</p>\n<p>â€‹ <strong>&amp; mut</strong> <strong>å‚æ•°ç±»å‹</strong> å¯å˜å¼•ç”¨ï¼ˆè°ƒç”¨æ—¶çš„å‚æ•°ä¹Ÿè¦æ˜¯å¯å˜ï¼‰</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token comment\">//&amp; è¡¨ç¤ºå¼•ç”¨ï¼Œå…è®¸ä½¿ç”¨å€¼å¹¶ä¸”ä¸å–å¾—æ‰€æœ‰æƒ  å¯¹åº”è§£å¼•ç”¨ * </span>\n<span class=\"token comment\">//æŠŠå¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’å°±å«å¼•ç”¨</span>\n<span class=\"token comment\">// ä¸å¯ä»¥ä¿®æ”¹å€Ÿç”¨çš„ä¸œè¥¿ï¼Œå¼•ç”¨ä¹Ÿæ˜¯é»˜è®¤ä¸å¯å˜çš„ï¼Œå¯ä»¥ä½¿ç”¨ mutæ¥è®©å¼•ç”¨å¯å˜  &amp;mut æ•°æ®ç±»å‹/å‚æ•°</span>\n<span class=\"token keyword\">let</span> len<span class=\"token operator\">=</span><span class=\"token function\">calculate_length</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å‚æ•°çš„å˜é‡ä¹Ÿè¦æ˜¯å¯ä»¥å˜çš„ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>\n    \n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},{}\"</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">,</span>len<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å‡½æ•°ä½¿ç”¨å˜é‡ä¸è·å¾—æ‰€æœ‰æƒ</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">calculate_length</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">usize</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//æ³¨æ„å‚æ•°é‡Œé¢ä¸æ˜¯åœ¨å˜é‡å‰é¢åŠ &amp; ,è€Œæ˜¯åœ¨ç±»å‹å‰é¢åŠ &amp;</span>\n    s<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//ä¸ä¼šå–å¾—æ‰€æœ‰æƒ</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">first_world</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">String</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">usize</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> bytes<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">as_bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>item<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> bytes<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">if</span> item <span class=\"token operator\">==</span> <span class=\"token char\">b' '</span><span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\ns<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ–¼:[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-UyvUSQ5g-1651467632361)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220327105233388.png)]</p>\n<p>ğŸ”–ï¼š<strong>é€šè¿‡å¼•ç”¨ä¼ é€’å‚æ•°ç»™å‡½æ•°çš„æ–¹æ³•å°±å«åš<mark>å€Ÿç”¨</mark></strong>ï¼ï¼ï¼</p>\n<p>ğŸ‘â€ğŸ—¨ï¼šå¯å˜å¼•ç”¨</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n    \n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// å¯å˜å¼•ç”¨</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">change</span><span class=\"token punctuation\">(</span>some_string<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    some_string<span class=\"token punctuation\">.</span><span class=\"token function\">push_str</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//ç›¸å½“æ‹¼æ¥å­—ç¬¦ä¸²çš„åŠŸèƒ½ append</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>âš ï¸ï¼š**é™åˆ¶ç‚¹ï¼šåœ¨ç‰¹å®šä½œç”¨åŸŸä¸­ï¼Œå¯¹äºæŸä¸€å—æ•°æ®ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ï¼ˆä¸€æ¬¡åªèƒ½å£°æ˜ä¸€ä¸ªå¯å˜å¼•ç”¨ ï¼‰ã€‚**<strong>å¯ä»¥é€šè¿‡å¤§æ‹¬å·æ¥åˆ†éš”ä½œç”¨åŸŸå®ç°æœ‰å¤šä¸ªå¯å˜å¼•ç”¨</strong></p>\n<p>ğŸ‘€ï¼šè¿™é‡Œè¦å¤šæƒ³æƒ³è®°ä½ï¼ï¼ï¼ï¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å¯å˜å¼•ç”¨æœ‰ä¸€ä¸ªé™åˆ¶ï¼šè¦ç‰¹å®šä½œç”¨åŸŸå†…ï¼Œå¯¹äºæŸä¸€å—æ•°æ®ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå¯å˜çš„å¼•ç”¨ ã€‚</span>\n <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> p<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">let</span> z1<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> p<span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">let</span> z2<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> p<span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™ï¼ï¼ï¼è¿åäº†è§„åˆ™</span>\n <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},{}\"</span><span class=\"token punctuation\">,</span>z1<span class=\"token punctuation\">,</span>z2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ä¸Šé¢çš„é™åˆ¶æ€§è§„åˆ™å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨ç¼–è¯‘æ—¶é¿å…æ•°æ®ç«äº‰ã€‚</p>\n<p>ğŸ“–ï¼šæ•°æ®ç«äº‰</p>\n<blockquote>\n<p>ä»¥ä¸‹ä¸‰ç§è¡Œä¸ºä¼šå‘ç”Ÿæ•°æ®ç«äº‰ï¼š</p>\n<ol><li> <p><strong>ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€ä¸ªæ•°æ®</strong></p> </li><li> <p><strong>è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆç”¨äºå‘ç©ºé—´ä¸­å†™å…¥æ•°æ®</strong></p> </li><li> <p><strong>æ²¡æœ‰ä½¿ç”¨ä»»ä½•æœºåˆ¶æ¥åŒæ­¥å¯¹æ•°æ®çš„è®¿é—®ï¼ˆæ²¡æœ‰åŒæ­¥è®¿é—®ï¼‰</strong></p> </li></ol>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å¯ä»¥é€šè¿‡åˆ›å»ºæ–°çš„ä½œç”¨åŸŸï¼Œæ¥å…è®¸éåŒæ—¶çš„åˆ›å»ºå¤šä¸ªå¯å˜å¼•ç”¨</span>\n<span class=\"token comment\">//eg:</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> k<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å¯ä»¥å¤§æ‹¬å·åˆ†éš”ä½œç”¨åŸŸ</span>\n    <span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> k<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token comment\">//åˆ°è¿™é‡Œs1å°±ä¸å†æœ‰æ•ˆäº†,å› ä¸ºå·²ç»å‡ºäº†ä½œç”¨åŸŸäº†</span>\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> k<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ğŸ“šï¼šå¯ä»¥é€šè¿‡èŠ±æ‹¬å·{ } ï¼Œæ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸèŒƒå›´ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºå¤šä¸ªå¯å˜å¼•ç”¨ ï¼ï¼ï¼</p>\n<p>âš ï¸ï¼š<mark>é™åˆ¶ï¼š</mark><strong>ä¸å¯ä»¥åŒæ—¶æ‹¥æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ å’Œ ä¸€ä¸ªä¸å¯å˜çš„å¼•ç”¨ï¼›<mark>ä½†åŒæ—¶æœ‰å¤šä¸ªä¸å¯å˜çš„å¼•ç”¨æ˜¯å¯ä»¥çš„</mark></strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> r1<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> r2<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> s<span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™ï¼ï¼ï¼ï¼ï¼šå› ä¸ºä¸å¯ä»¥æŠŠså€Ÿç”¨ä¸ºå¯å˜çš„å¼•ç”¨ï¼Œå› ä¸ºå®ƒå·²ç»å€Ÿç»™äº†ä¸å¯å˜çš„å¼•ç”¨ </span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}ï¼Œ{}ï¼Œ{}\"</span><span class=\"token punctuation\">,</span>r1<span class=\"token punctuation\">,</span>r2<span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4><a id=\"_931\"></a>æ‚¬å‚å¼•ç”¨</h4>\n<p>ğŸ“„**æ¦‚å¿µï¼š**ä¸€ä¸ªæŒ‡é’ˆå¼•ç”¨äº†å†…å­˜ä¸­çš„æŸä¸ªåœ°å€ï¼Œä½†æ˜¯è¿™å—å†…å­˜å¯èƒ½å·²ç»é‡Šæ”¾å¹¶ä¸”åˆ†é…ç»™å…¶å®ƒå˜é‡ä½¿ç”¨äº†ã€‚</p>\n<p>rustä¿è¯ä¸ä¼šè®©å¼•ç”¨è¿›å…¥æ‚¬å‚çŠ¶æ€ï¼ï¼ï¼</p>\n<p>ğŸ”–ï¼šè¿™é‡Œæˆ‘ç›®å‰å¯ä»¥ç†è§£ä¸ºï¼š<strong>C++ä¸­çš„ä¸è¦è¿”å›å±€éƒ¨å¯¹è±¡çš„å¼•ç”¨ï¼Œå› ä¸ºç¦»å¼€å®ƒè‡ªå·±çš„ä½œç”¨åŸŸä¹Ÿå°±è¢«é”€æ¯äº†ï¼ï¼ï¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// æ‚¬ç©ºå¼•ç”¨ç¤ºä¾‹ </span>\n   <span class=\"token keyword\">let</span> r<span class=\"token operator\">=</span><span class=\"token function\">dangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">dangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">Stirng</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//æŠ¥é”™ï¼ï¼ï¼</span>\n<span class=\"token keyword\">let</span> s <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&amp;</span>s  <span class=\"token comment\">//sçš„å¼•ç”¨è¿”å›ç»™è°ƒç”¨è€…ï¼Œsåœ¨è¿™é‡Œç¦»å¼€ä½œç”¨åŸŸå¹¶ä¸”è¢«é”€æ¯ï¼Œå®ƒæŒ‡å‘çš„å†…å­˜ä¹Ÿå°±æ— æ•ˆäº†</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">//ç›´æ¥è¿”å› String å°±ä¸ä¼šæŠ¥é”™äº†</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">dangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Stirng</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> s <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ns   <span class=\"token comment\">//æ‰€æœ‰æƒè¢«è½¬ç§»å‡ºå‡½æ•°å¹¶æ²¡æœ‰è¢«é”€æ¯</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ“šï¼šå¼•ç”¨çš„è§„åˆ™</p>\n<blockquote>\n<ul><li>åœ¨ä»»ä½•ä¸€æ®µç»™å®šçš„æ—¶é—´å†…ï¼Œè¦ä¹ˆåªèƒ½æ‹¥æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆåªèƒ½æ‹¥æœ‰ä»»æ„æ•°é‡çš„ä¸å¯å˜å¼•ç”¨</li><li>å¼•ç”¨æ€»æ˜¯æœ‰æ•ˆçš„</li></ul>\n</blockquote>\n<h3><a id=\"slicce_965\"></a>åˆ‡ç‰‡ï¼ˆslicceï¼‰</h3>\n<p>åˆ‡ç‰‡ï¼ˆslicceï¼‰ï¼šæ˜¯ rust ä¸­ä¸æŒæœ‰æ‰€æœ‰æƒçš„æ•°æ®ç±»å‹ã€‚ï¼ˆå…è®¸æˆ‘ä»¬<strong>å¼•ç”¨</strong>é›†åˆä¸­æŸä¸€æ®µè¿ç»­çš„å…ƒç´ åºåˆ—ï¼‰</p>\n<p>ä½¿ç”¨æ–¹å¼å’Œgoè¯­è¨€çš„åˆ‡ç‰‡å·®ä¸å¤šã€‚</p>\n<p>ğŸ‘€ï¼šç¤ºä¾‹</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> wordindex<span class=\"token operator\">=</span><span class=\"token function\">first_world</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>wordindex<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// å­—ç¬¦ä¸²åˆ‡ç‰‡ å’Œ </span>\n<span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> hello<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å·¦é—­å³å¼€  ä¸­é—´æ•°å­—ä¹‹é—´ä¹Ÿä¸¤ä¸ªç‚¹</span>\n<span class=\"token keyword\">let</span> hello<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ç­‰ä»·äºä¸Šé¢é‚£ä¸ª</span>\n<span class=\"token keyword\">let</span> world<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">..</span><span class=\"token number\">11</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> world<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">6</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å’Œä¸Šé¢é‚£ä¸ªä¸€æ ·</span>\n<span class=\"token comment\">// æ•´ä¸ªå­—ç¬¦ä¸²</span>\n<span class=\"token keyword\">let</span> u<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>æ–¹æ‹¬å·æ•°å­—ä¹‹é—´æ˜¯ä¸¤ä¸ªç‚¹</mark>:</p>\n<blockquote>\n<p>å­—ç¬¦ä¸²åˆ‡ç‰‡çš„è¾¹ç•Œå¿…é¡»ä½äºæœ‰æ•ˆçš„ UTF-8 å­—ç¬¦è¾¹ç•Œå†…ã€‚</p>\n</blockquote>\n<p>[ start â€¦ end ] <mark>æ˜¯ä¸€ä¸ªå·¦é—­å³å¼€åŒºé—´</mark></p>\n<p>ğŸ“–ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡çš„ç±»å‹æ˜¯ï¼š <strong>&amp;str</strong></p>\n<blockquote>\n<p>å› ä¸º &amp;str æ˜¯ä¸€ä¸ªä¸å¯å˜çš„å¼•ç”¨ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²å­—é¢é‡è‡ªç„¶ä¹Ÿæ˜¯ä¸å¯å˜çš„</p>\n</blockquote>\n<p><strong>âš ï¸ï¼šå­—ç¬¦ä¸²å­—é¢å€¼å®è´¨ä¸Šæ˜¯ä¸€ä¸ªåˆ‡ç‰‡</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å­—ç¬¦ä¸²å­—é¢å€¼å®è´¨æ˜¯åˆ‡ç‰‡</span>\n <span class=\"token comment\">// å°†å­—ç¬¦ä¸²åˆ‡ç‰‡ä½œä¸ºå‚æ•°ä¼ é€’</span>\n<span class=\"token comment\">// ä½¿ç”¨ &amp;strä½œä¸ºå‡½æ•°å‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥ç°æ—¶æ¥String ç±»å‹å’Œ &amp; str ç±»å‹çš„å‚æ•°ï¼Œæ›´åŠ é€šç”¨</span>\n<span class=\"token comment\">// eg:</span>\n<span class=\"token keyword\">let</span> my_string<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> wordindex<span class=\"token operator\">=</span><span class=\"token function\">first_w</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>my_string<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> my_string_str<span class=\"token operator\">=</span><span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> wordindex<span class=\"token operator\">=</span><span class=\"token function\">first_w</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>my_string_str<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¯ä»¥ç®€åŒ–ä¸ºä¸‹é¢è¿™ç§å½¢å¼ï¼Œå› å­—ç¬¦ä¸²å­—é¢å€¼æœ¬è´¨æ˜¯åˆ‡ç‰‡</span>\n<span class=\"token keyword\">let</span> wordindex<span class=\"token operator\">=</span><span class=\"token function\">first_w</span><span class=\"token punctuation\">(</span>my_string_str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">first_w</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">String</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">usize</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> bytes<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">as_bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>item<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> bytes<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">if</span> item <span class=\"token operator\">==</span> <span class=\"token char\">b' '</span><span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">return</span> i<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\ns<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token comment\">// ç¤ºä¾‹å‡½æ•° å‚æ•°ä¸ºStringå¼•ç”¨å»ºè®®æ”¹ä¸ºè¿™ä¸ª</span>\n<span class=\"token comment\">//å› ä¸ºè¿™æ ·æ”¹è¿›åæ—¢å¯ä»¥å¤„ç† Stringç±»å‹åˆåŒæ—¶å¯ä»¥å¤„ç† &amp;str ç±»å‹ï¼Œæ›´åŠ é€šç”¨</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">first_w</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> bytes<span class=\"token operator\">=</span>s<span class=\"token punctuation\">.</span><span class=\"token function\">as_bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> i<span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span>item<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> bytes<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">if</span> item<span class=\"token operator\">==</span><span class=\"token char\">b' '</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">return</span> <span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>æ•°ç»„åˆ‡ç‰‡ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// è¿™ä¸ªåˆ‡ç‰‡goè¯­è¨€ä¸­çš„åˆ‡ç‰‡ç”¨æ³•å·®ä¸å¤š,goå’Œrustä¸­çš„åˆ‡ç‰‡æ•°å­—éƒ½ä¸èƒ½ä¸ºè´Ÿæ•°</span>\n<span class=\"token keyword\">let</span> a<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> slice<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">..</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æ•°ç»„åˆ‡ç‰‡ï¼›åˆ‡ç‰‡çš„ç¬¬äºŒä¸ªå‚æ•°ä¸å¯ä»¥åƒpythoné‚£æ ·å†™æˆè´Ÿæ•°</span>\n</code></pre>\n<h2><a id=\"struct___1052\"></a>struct ç»“æ„ä½“</h2>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//è¯­æ³•ï¼š</span>\n<span class=\"token keyword\">struct</span> ç»“æ„ä½“å  <span class=\"token punctuation\">{<!-- --></span>\n    å­—æ®µå ï¼š ç±»å‹ <span class=\"token punctuation\">,</span>\n    å­—æ®µå ï¼š ç±»å‹ <span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">...</span>          <span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//æœ€åä¸€ä¸ªå­—æ®µä¹Ÿè¦æœ‰é€—å·</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å®šä¹‰ä¸€ä¸ªç»“æ„ä½“åœ¨èŠ±æ‹¬å·é‡Œé¢ä¸ºæ‰€æœ‰å­—æ®µå®šä¹‰åç§°å’Œç±»å‹</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n    username<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    email<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    sign_in_count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u64</span><span class=\"token punctuation\">,</span>\n    active<span class=\"token punctuation\">:</span> <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//æœ€åä¸€ä¸ªå¯¹è±¡ä¹Ÿè¦æœ‰é€—å·</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>ğŸ”– åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼š<strong>ä¸èƒ½åªèµ‹å€¼å…¶ä¸­å‡ ä¸ªå­—æ®µï¼Œå¿…é¡»å¯¹æ‰€æœ‰å­—æ®µèµ‹å€¼ï¼Œé¡ºåºå¯ä»¥ä¸ä¸€æ ·</strong></p>\n<pre><code class=\"prism language-rust\">  <span class=\"token comment\">//    åˆ›å»ºä¸€ä¸ªå¯¹è±¡å®ä¾‹</span>\n    <span class=\"token comment\">// ä¸èƒ½åªèµ‹å€¼å…¶ä¸­å‡ ä¸ªå­—æ®µï¼Œå¿…é¡»å¯¹æ‰€æœ‰å­—æ®µèµ‹å€¼ï¼Œé¡ºåºå¯ä»¥ä¸ä¸€æ ·</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> user1 <span class=\"token operator\">=</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"725482520\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        username<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shenyang\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        active<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        sign_in_count<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><mark>ä½¿ç”¨ . æ¥è¯´å±æ€§</mark></p>\n<pre><code class=\"prism language-rust\">    <span class=\"token comment\">// ä½¿ç”¨ç‚¹ . æ¥è®¿é—®å±æ€§</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> user1<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> user1<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> user1<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> user1<span class=\"token punctuation\">.</span>sign_in_count<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token comment\">// æ›´æ”¹ç»“æ„ä½“çš„å­—æ®µçš„å€¼</span>\nuser1<span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"654321\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">//å‰æè¦æ˜¯åˆ›å»ºå¯¹è±¡æ˜¯è¦å¯å˜çš„ åŠ äº† mut å…³é”®å­—</span>\n<span class=\"token comment\">//struct çš„å®ä¾‹æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆå®ä¾‹ä¸­æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯å˜çš„</span>\n</code></pre>\n<blockquote>\n<p>ğŸ’¥**æ›´æ–°è¯­æ³•ï¼š**æƒ³ç”¨æŸä¸ªstructå®ä¾‹æ¥åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹çš„æ—¶å€™å¯ä»¥ä½¿ç”¨æ›´æ–°è¯­æ³•</p>\n<p>è¯­æ³•ï¼š â€¦ å¯¹è±¡å®ä¾‹å</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">   <span class=\"token comment\">// structæ›´æ–°è¯­æ³•ï¼šæƒ³ç”¨æŸä¸ªstructå®ä¾‹æ¥åˆ›å»ºä¸€ä¸ªæ–°å®ä¾‹çš„æ—¶å€™å¯ä»¥ä½¿ç”¨æ›´æ–°è¯­æ³•</span>\n    <span class=\"token keyword\">let</span> user2 <span class=\"token operator\">=</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n        email<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        username<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">..</span>user1 \n<span class=\"token comment\">//åœ¨è¿™ä½¿ç”¨äº†æ›´æ–°è¯­æ³•ï¼ˆä¹Ÿå°±æ˜¯é™¤äº†ä¸Šé¢ä¸¤ä¸ªå­—æ®µï¼Œå…¶ä»–çš„å­—æ®µè·Ÿuser1çš„ä¸€æ ·ï¼‰</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ğŸ¦…ï¼šä¸Šé¢æ›´æ–°è¯­æ³•ï¼šuser2é™¤äº†è‡ªå·±å®šä¹‰çš„ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä»–çš„å±æ€§å’Œ user1 ç›¸åŒã€‚</p>\n<p><strong>structå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">restr</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> u<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n        email<span class=\"token punctuation\">:</span> e<span class=\"token punctuation\">,</span>\n        username<span class=\"token punctuation\">:</span> u<span class=\"token punctuation\">,</span>\n        active<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        sign_in_count<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>å­—æ®µåˆå§‹åŒ–å¯ä»¥ç®€å†™</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//å­—æ®µåˆå§‹åŒ–å¯ä»¥ç®€å†™ï¼Œå½“å­—æ®µåä¸å­—æ®µå€¼å¯¹åº”å˜é‡åç›¸åŒæ—¶ï¼Œå°±å¯ä»¥çœç•¥å­—æ®µå</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">restr1</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> username<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">User</span> <span class=\"token punctuation\">{<!-- --></span>\n        email<span class=\"token punctuation\">,</span> <span class=\"token comment\">//å¯ä»¥ä½¿ç”¨ç®€å†™æ–¹å¼</span>\n        username<span class=\"token punctuation\">,</span>\n        active<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        sign_in_count<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>struct çš„å®ä¾‹æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆå®ä¾‹ä¸­æ‰€æœ‰å­—æ®µéƒ½æ˜¯å¯å˜çš„</strong></p>\n<p>ç»“æ„ä½“å®ä¾‹å¯¹è±¡ä¹Ÿåˆ†ä¸ºå¯å˜å’Œä¸å¯å˜çš„ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> åç§° <span class=\"token operator\">=</span> ç»“æ„ä½“å <span class=\"token punctuation\">{<!-- --></span>\n    å¯¹åº”å­—æ®µèµ‹å€¼\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token keyword\">let</span>  åç§° <span class=\"token operator\">=</span> ç»“æ„ä½“å <span class=\"token punctuation\">{<!-- --></span>\n    å¯¹åº”å­—æ®µèµ‹å€¼\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h4><a id=\"Tuple_struct_1164\"></a>Tuple struct</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//è¯­æ³•ï¼š</span>\n<span class=\"token keyword\">struct</span> åç§° <span class=\"token punctuation\">(</span> ç±»å‹<span class=\"token number\">1</span> ï¼Œ ç±»å‹<span class=\"token number\">2</span> ï¼Œç±»å‹<span class=\"token number\">3</span> <span class=\"token punctuation\">...</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//æœ€åä¸€ä¸ªç±»å‹ä¸éœ€è¦åŠ é€—å·</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ğŸ‘€ï¼šå®ä¾‹</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// tuple struct å®ä¾‹</span>\n<span class=\"token keyword\">let</span> red <span class=\"token operator\">=</span> \n<span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blacke\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">//tuple struct çš„å®ä¾‹</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> black <span class=\"token operator\">=</span> \n<span class=\"token class-name\">Color</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blacke\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//tuple struct çš„å®ä¾‹</span>\nblack<span class=\"token number\">.0</span> <span class=\"token operator\">=</span> <span class=\"token number\">246</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ä¹Ÿå¯ä»¥ä½¿ç”¨ç‚¹è¯­æ³•æ¥è®¿é—®å…ƒç´ </span>\nblack<span class=\"token number\">.1</span> <span class=\"token operator\">=</span> <span class=\"token number\">200</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//æƒ³è¦æ”¹å˜å¿…é¡»åˆ›å»ºæ—¶æ˜¯å¯å˜çš„</span>\nblack<span class=\"token number\">.2</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<p>ä½¿ç”¨ç‚¹æ¥è®¿é—®å±æ€§ï¼Œå­—æ®µåºå·ä» 0 å¼€å§‹ !!!</p>\n<h4><a id=\"struct__1191\"></a>struct æ–¹æ³•</h4>\n<p><strong>æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œç›¸å½“äºC++ä¸­çš„ thisï¼Œæ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†ç¬¬ä¸€ä¸ªå¿…é¡»æ˜¯self</strong>***ï¼Œåœ¨ impl å—é‡Œé¢å®šä¹‰æ–¹æ³•**</p>\n<p>æ¯ä¸ª struct å…è®¸æ‹¥æœ‰å¤šä¸ª impl å—</p>\n<p>ğŸ”–ï¼šè¯­æ³•</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">impl</span>  ç»“æ„ä½“å <span class=\"token punctuation\">{<!-- --></span>\n    æ–¹æ³•\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// struct æ–¹æ³•</span>\n<span class=\"token comment\">// æ–¹æ³•ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯selfï¼Œç›¸å½“äºC++ä¸­çš„ thisï¼Œæ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†ç¬¬ä¸€ä¸ªå¿…é¡»æ˜¯self</span>\n<span class=\"token comment\">//è®¿é—®ä½¿ç”¨å®ä¾‹å¯¹è±¡ åŠ  . è®¿é—®</span>\n<span class=\"token comment\">// åœ¨ impl å—é‡Œé¢å®šä¹‰æ–¹æ³•</span>\n<span class=\"token comment\">// æ¯ä¸ªstructå…è®¸æ‹¥æœ‰å¤šä¸ª impl å—</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//ç»‘å®šæ–¹æ³•åˆ° structä¸Š   impl  ç»“æ„ä½“å { å¯¹åº”çš„æ–¹æ³• } </span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">area</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">u32</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//ä¹Ÿæœ‰å¯å˜ä¸ä¸å¯å˜ self  &amp;self  &amp;mut self  å¯¹åº” è·å¾—æ‰€æœ‰æƒ  å€Ÿç”¨ å¯å˜å€Ÿç”¨</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>length\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å…³è”å‡½æ•°ï¼Œæ˜¯å‡½æ•°ä¸æ˜¯æ–¹æ³• é€šè¿‡ç”¨äºæ„é€ å™¨</span>\n<span class=\"token comment\">//è°ƒç”¨å…³è”å‡½æ•°ä½¿ç”¨  ç±»å‹åï¼šï¼šå‡½æ•°å</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">square</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢</span>\n        <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n            width<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n            length<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">can_hold</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> other<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">Rectangle</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">bool</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>width <span class=\"token operator\">&gt;</span> other<span class=\"token punctuation\">.</span>width <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> other<span class=\"token punctuation\">.</span>length\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>**å…³è”å‡½æ•°ï¼š**ä¸å¸¦ self çš„å‡½æ•°</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å…³è”å‡½æ•°ï¼Œæ˜¯å‡½æ•°ä¸æ˜¯æ–¹æ³• é€šå¸¸ç”¨äºæ„é€ å™¨</span>\n<span class=\"token comment\">//è°ƒç”¨å…³è”å‡½æ•°ä½¿ç”¨  ç±»å‹åï¼šï¼šå‡½æ•°å</span>\n\n <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">square</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢</span>\n        <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n            width<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n            length<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ç¤ºä¾‹</span>\n<span class=\"token comment\">// è®¡ç®—é•¿æ–¹å½¢çš„é¢ç§¯</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">area</span><span class=\"token punctuation\">(</span>dim<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">u32</span> <span class=\"token punctuation\">{<!-- --></span>\n    dim<span class=\"token number\">.0</span> <span class=\"token operator\">*</span> dim<span class=\"token number\">.1</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n        <span class=\"token keyword\">let</span> w <span class=\"token operator\">=</span> <span class=\"token number\">30</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> l <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> rect <span class=\"token operator\">=</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n            width<span class=\"token punctuation\">:</span> w<span class=\"token punctuation\">,</span>\n            length<span class=\"token punctuation\">:</span> l<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>rect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">.</span><span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä½¿ç”¨å¯¹è±¡å®ä¾‹è°ƒç”¨å®ƒè‡ªå·±çš„æ–¹æ³•</span>\n        <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">area</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">Rectangle</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">u32</span> <span class=\"token punctuation\">{<!-- --></span>\n            rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> rect<span class=\"token punctuation\">.</span>length\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:#?}\"</span><span class=\"token punctuation\">,</span> rect<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[derive(Debug)]</span> \n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n    width<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n    length<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//ç»‘å®šæ–¹æ³•åˆ° structä¸Š   impl  ç»“æ„ä½“å { å¯¹åº”çš„æ–¹æ³• } </span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">area</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">u32</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//ä¹Ÿæœ‰å¯å˜ä¸ä¸å¯å˜ self  &amp;self  &amp;mut self  å¯¹åº” è·å¾—æ‰€æœ‰æƒ  å€Ÿç”¨ å¯å˜å€Ÿç”¨</span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>length\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// å…³è”å‡½æ•°ï¼Œæ˜¯å‡½æ•°ä¸æ˜¯æ–¹æ³• é€šè¿‡ç”¨äºæ„é€ å™¨</span>\n<span class=\"token comment\">//è°ƒç”¨å…³è”å‡½æ•°ä½¿ç”¨  ç±»å‹åï¼šï¼šå‡½æ•°å</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">square</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//åˆ›å»ºä¸€ä¸ªæ­£æ–¹å½¢</span>\n        <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{<!-- --></span>\n            width<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n            length<span class=\"token punctuation\">:</span> size<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h3><a id=\"_1301\"></a>æšä¸¾</h3>\n<p><strong>ä½¿ç”¨ enum å…³é”®å­—</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//è¯­æ³•ï¼š</span>\n<span class=\"token keyword\">enum</span> åç§° <span class=\"token punctuation\">{<!-- --></span>\n    å­—æ®µ<span class=\"token number\">1</span> ï¼Œ\n    å­—æ®µ<span class=\"token number\">2</span> ï¼Œ\n    <span class=\"token punctuation\">...</span>\n    <span class=\"token comment\">//æœ€åä¸€ä¸ªå­—æ®µä¸éœ€è¦åŠ é€—å·</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">ipAddress</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token constant\">V4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">V6</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>åˆ›å»ºæšä¸¾å¯¹è±¡</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// åˆ›å»ºæšä¸¾</span>\n<span class=\"token keyword\">let</span> four<span class=\"token operator\">=</span> ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V4</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> four<span class=\"token operator\">=</span> ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V4</span><span class=\"token punctuation\">;</span>\nfour<span class=\"token operator\">=</span>ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V6</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">route</span><span class=\"token punctuation\">(</span>four<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">route</span><span class=\"token punctuation\">(</span>ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">route</span><span class=\"token punctuation\">(</span>ip <span class=\"token punctuation\">:</span> ipAddress<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">match</span> ip <span class=\"token punctuation\">{<!-- --></span>\n        ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V4</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ipv4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        ipAddress<span class=\"token punctuation\">::</span><span class=\"token constant\">V6</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ipv6\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>å’Œ struct ç»„åˆï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">ipAddress</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token constant\">V4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">V6</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// å’Œ struct ç»„åˆ</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">add</span><span class=\"token punctuation\">{<!-- --></span>\n    ipkind<span class=\"token punctuation\">:</span>ipAddress<span class=\"token punctuation\">,</span>\n    ip<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢çš„å¯ä»¥ç”±æšä¸¾å˜ä½“æ›¿ä»£ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//è¯­æ³•</span>\n<span class=\"token keyword\">enum</span> åç§° <span class=\"token punctuation\">{<!-- --></span>\n    å­—æ®µå ï¼ˆç±»å‹<span class=\"token number\">1</span>ï¼Œç±»å‹<span class=\"token number\">2</span>ï¼Œç±»å‹<span class=\"token number\">3</span>ï¼Œ<span class=\"token punctuation\">...</span>ï¼‰<span class=\"token punctuation\">,</span>\n    å­—æ®µå  <span class=\"token punctuation\">(</span>ç±»å‹<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">...</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//æœ€åä¸€ä¸ªå­—æ®µä¹Ÿè¦åŠ é€—å·</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å¯ä»¥å°†æ•°æ®é™„åŠ åˆ°æšä¸¾çš„å˜ä½“ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ç”¨åƒä¸Šé¢é‚£æ ·è¦ä½¿ç”¨structï¼Œæ¯ä¸ªå˜ä½“å¯ä»¥æ‹¥æœ‰</span>\n<span class=\"token comment\">// ä¸åŒçš„ç±»å‹ä»¥åŠå…³è”çš„æ•°æ®é‡</span>\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">ipAdd</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token constant\">V4</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u8</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">u8</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">u8</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">u8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token constant\">V6</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// æšä¸¾å˜ä½“</span>\n<span class=\"token keyword\">let</span> four<span class=\"token operator\">=</span>ipAdd<span class=\"token punctuation\">::</span><span class=\"token constant\">V4</span><span class=\"token punctuation\">(</span><span class=\"token number\">127</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> six<span class=\"token operator\">=</span>ipAdd<span class=\"token punctuation\">::</span><span class=\"token constant\">V6</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"1k:8p:1o:9D\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// æšä¸¾å’Œç»“æ„ä½“å¯ä»¥ç›¸äº’åµŒå¥—ä¹Ÿå¯ä»¥è‡ªå·±åµŒå¥—ï¼Œæšä¸¾ä¹Ÿå¯åµŒå¥—æšä¸¾</span>\n\n</code></pre>\n<p>ä¸ºæšä¸¾å®šä¹‰æ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨ <mark>impl</mark> å…³é”®å­—ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">impl</span> ipAdd <span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">match</span> <span class=\"token keyword\">self</span> <span class=\"token punctuation\">{<!-- --></span>\n        ipAdd<span class=\"token punctuation\">::</span><span class=\"token constant\">V4</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}.{}.{}.{}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  ipAdd<span class=\"token punctuation\">::</span><span class=\"token constant\">V6</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Message</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Quit</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Move</span> <span class=\"token punctuation\">{<!-- --></span>x <span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*\nQuit æ²¡æœ‰ä»»ä½•å…³è”æ•°æ®\nMove åŒ…å«äº†ä¸€ä¸ªåŒ¿åç»“æ„ä½“\nWrite åŒ…å«äº†ä¸€ä¸ªString\nChangeColor åŒ…å«äº†3ä¸ª i32 å€¼\n*/</span>\n</code></pre>\n<h3><a id=\"Option__1419\"></a>Option æšä¸¾</h3>\n<p><strong>å®šä¹‰åœ¨æ ‡å‡†åº“ä¸­åœ¨ Prelude ä¸­</strong>ï¼Œç”¨å®ƒæ¥æ ‡è¯†ä¸€ä¸ªæ— å€¼æ— æ•ˆæˆ–ç¼ºå¤±ï¼</p>\n<p>Option æ˜¯ä¸€ä¸ªæšä¸¾ï¼Œå®ƒå¯ä»¥æœ‰ä¸¤ä¸ªå˜ä½“ï¼š<strong>Some</strong> å’Œ <strong>None</strong>ã€‚ï¼ˆæè¿°äº†æŸä¸ªå€¼å¯èƒ½å­˜æ”¾ï¼ˆæŸç§ç±»å‹ï¼‰æˆ–ä¸å­˜åœ¨çš„æƒ…å†µï¼‰</p>\n<p><strong>rust ä¸­æ²¡æœ‰ Null æˆ–è€… Nullable çš„æ¦‚å¿µ</strong>ï¼Œè€Œæ˜¯ä½¿ç”¨ Option æ¥è¡¨ç¤ºå¯èƒ½å­˜åœ¨ï¼ˆæœ‰å€¼ï¼‰æˆ–ä¸å­˜åœ¨ï¼ˆæ— å€¼ï¼‰çš„æƒ…å†µã€‚</p>\n<p>æ ‡å‡†åº“å®šä¹‰ï¼š</p>\n<p><strong>T è¡¨ç¤ºæ˜¯ä¸€ä¸ªæ³›å‹å‚æ•°ï¼ï¼ï¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//æ ‡å‡†åº“å®šä¹‰</span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">None</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// Optionç¤ºä¾‹ï¼š</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> sn<span class=\"token operator\">=</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> ss<span class=\"token operator\">=</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> absent_number<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span>  <span class=\"token operator\">=</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>æ³¨æ„ï¼š</mark></p>\n<blockquote>\n<ul><li><strong>Option å’Œ T æ˜¯ä¸åŒçš„ç±»å‹ï¼Œä¸å¯ä»¥æŠŠ Option ç›´æ¥å½“æˆ T</strong></li><li><strong>å¦‚æœæƒ³ä½¿ç”¨ Option ä¸­çš„Tï¼Œå¿…é¡»å°†å®ƒè½¬æ¢ä¸º Tï¼Œæˆ–è€…ä½¿ç”¨ match è¯­å¥æ¥å¤„ç† None å€¼</strong></li></ul>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i8</span> <span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y<span class=\"token punctuation\">:</span><span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i8</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//x å’Œ y æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹</span>\n<span class=\"token keyword\">let</span> sum<span class=\"token operator\">=</span> x <span class=\"token operator\">+</span> y<span class=\"token punctuation\">;</span> <span class=\"token comment\">//æŠ¥é”™ï¼šå¿…é¡»æŠŠ y è½¬æ¢ä¸º i8 ç±»å‹</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>sum<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"match__if_let_1464\"></a>match å’Œ if let</h3>\n<p>ğŸ“šï¼š<strong>match åŒ¹é…å¿…é¡»ç©·ä¸¾æ‰€æœ‰çš„å¯èƒ½æ€§ï¼ï¼ï¼</strong></p>\n<p>ğŸ‘€ï¼šç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å®šä¹‰ä¸€ä¸ªæšä¸¾</span>\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Coin</span><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token class-name\">Penny</span><span class=\"token punctuation\">,</span>\n  <span class=\"token class-name\">Nickel</span><span class=\"token punctuation\">,</span>\n  <span class=\"token class-name\">Dime</span><span class=\"token punctuation\">,</span>\n  <span class=\"token class-name\">Quarter</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//åŒ¹é… Coin çš„æ‰€æœ‰å¯èƒ½æ€§</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">value_in_cents</span><span class=\"token punctuation\">(</span>coin<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">)</span>  <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">u8</span> <span class=\"token punctuation\">{<!-- --></span>\n <span class=\"token keyword\">match</span> coin<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Penny</span> <span class=\"token operator\">=&gt;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Nickel</span> <span class=\"token operator\">=&gt;</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Dime</span> <span class=\"token operator\">=&gt;</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Coin</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Quarter</span> <span class=\"token operator\">=&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Quarter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token number\">25</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>å¦‚æœå¤„ç†çš„è¯­å¥æœ‰å¤šæ¡ï¼Œéœ€è¦ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼ï¼ï¼</p>\n<p>åŒ¹é… Option ç¤ºä¾‹ï¼šè®°ä½å®ƒåªæœ‰ä¸¤ç§çŠ¶æ€ï¼ï¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// åŒ¹é… Option&lt;T&gt;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">plus_one</span><span class=\"token punctuation\">(</span>x <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">match</span> x<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">None</span> <span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n <span class=\"token keyword\">let</span> five <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> six <span class=\"token operator\">=</span><span class=\"token function\">plus_one</span><span class=\"token punctuation\">(</span>five<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> none <span class=\"token operator\">=</span> <span class=\"token function\">plus_one</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ”–ï¼š<strong>å¦‚æœæƒ…å†µå¤ªå¤šï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿é€šé…ç¬¦æ¥ä»£æ›¿å…¶å®ƒæƒ…å†µï¼Œä¸ç”¨ç©·ä¸¾æ‰€æœ‰çš„æƒ…å†µäº†ï¼ï¼ï¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å¦‚æœå€¼çš„æƒ…å†µæœ‰ç‚¹å¤šï¼Œä¸æƒ³åˆ—å‡ºæ‰€æœ‰çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ _ é€šé…ç¬¦æ¥æ›¿ä»£æ²¡åˆ—å‡ºçš„å€¼</span>\n<span class=\"token comment\">// ç¤ºä¾‹ï¼šè¿™æ ·å°±å¯ä»¥ä¸ç©·ä¸¾æ‰€æœ‰å¯èƒ½äº†</span>\n<span class=\"token keyword\">let</span> v<span class=\"token operator\">=</span><span class=\"token number\">0u8</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> v<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">1</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">2</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"two\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token number\">3</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"anything\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// å…¶ä»–æƒ…å†µç”¨ é€šé…ç¬¦æ›¿ä»£</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"if_let_1530\"></a>if let</h4>\n<blockquote>\n<p>ğŸ“–ï¼š <strong>if let å¤„ç†åªå…³å¿ƒä¸€ç§åŒ¹é…è€Œå¿½ç•¥å…¶å®ƒåŒ¹é…çš„æƒ…å†µ</strong></p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">0u8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> v <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¿™é‡Œåªå¤„ç† 3 å’Œå…¶ä»– ä¸¤ç§æƒ…å†µè¿™æ ·ä½¿ç”¨ if let æ›´å¥½</span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"anything\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢åªå¤„ç†ä¸€ç§æƒ…å†µå€¼ä¸º 3 æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ if let æ¥å¤„ç†</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ç®€æ´å†™æ³•</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> v<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"_1553\"></a>åŒ…ã€å•å…ƒåŒ…ã€æ¨¡å—</h3>\n<p>ğŸ“šï¼š</p>\n<blockquote>\n<ul><li><mark>åŒ…ï¼ˆpackageï¼‰</mark>ï¼šä¸€ä¸ªç”¨äºæ„å»ºã€æµ‹è¯•å¹¶åˆ†äº«å•å…ƒåŒ…çš„Cargo åŠŸèƒ½ã€‚</li><li><mark>å•å…ƒåŒ…ï¼ˆcrateï¼‰</mark>ï¼šä¸€ä¸ªç”¨äºç”Ÿæˆåº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„æ ‘å½¢æ¨¡å—ç»“æ„</li><li><mark>æ¨¡å—ï¼ˆmoduleï¼‰åŠ usu å…³é”®å­—</mark>ï¼šå®ƒä»¬è¢«ç”¨äºæ§åˆ¶æ–‡ä»¶ç»“æ„ã€ä½œç”¨åŸŸåŠè·¯å¾„çš„ç§æœ‰æ€§</li><li><mark>è·¯å¾„ï¼ˆpathï¼‰</mark>ï¼šä¸€ç§ç”¨äºå‘½åæ¡ç›®çš„æ–¹æ³•ï¼Œè¿™äº›æ¡ç›®åŒ…æ‹¬ç»“æ„ä½“ã€å‡½æ•°å’Œæ¨¡å—ç­‰</li></ul>\n</blockquote>\n<p>Cargo ä¼šé»˜è®¤å°† src/main.rs è§†ä½œä¸€ä¸ªäºŒè¿›åˆ¶å•å…ƒåŒ…çš„æ ¹èŠ‚ç‚¹è€Œæ— é¡»æŒ‡å®šï¼Œè¿™ä¸ª<strong>äºŒè¿›åˆ¶å•å…ƒåŒ…ä¸åŒ…æ‹¥æœ‰ç›¸åŒçš„åç§°</strong>ã€‚</p>\n<blockquote>\n<p>æ¨¡å—ï¼šä»¥ mod å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œæ¥ç€æŒ‡æ˜è¿™ä¸ªæ¨¡å—çš„åå­—ï¼Œç”¨èŠ±æ‹¬å·åŒ…è£¹å—ä½“ã€‚</p>\n</blockquote>\n<p>è·¯å¾„ï¼š</p>\n<ul><li>ä½¿ç”¨å•å…ƒåŒ…æˆ–å­—é¢é‡ crate ä»æ ¹èŠ‚ç‚¹å¼€å§‹çš„<strong>ç»å¯¹è·¯å¾„</strong></li><li>ä½¿ç”¨ self ã€super æˆ–å†…éƒ¨æ ‡è¯†ç¬¦ä»å½“å‰æ¨¡å—å¼€å§‹çš„<strong>ç›¸å¯¹è·¯å¾„</strong></li></ul>\n<p>æ ‡è¯†ç¬¦ä¹‹é—´ä½¿ç”¨ :: éš”å¼€ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//  å®šä¹‰æ¨¡å—</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod1</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod2</span><span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n   \n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span>my_mod1<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™å› ä¸º my_mod1 æ˜¯ç§æœ‰çš„</span>\n    \n    <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span>my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token namespace\">my_mod<span class=\"token punctuation\">::</span>my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>å¦‚æœæ¨¡å—æ²¡æœ‰ pub å±æ€§ä¿®é¥°ï¼Œå°±ä¸èƒ½ç›´æ¥è®¿é—®ï¼Œä½†å¦‚æœ pub ä¿®é¥°äº†æ¨¡å—ï¼Œæ²¡æœ‰ä¿®é¥°é‡Œé¢çš„å‡½æ•°å¯ä»¥è®¿é—®æ¨¡å—ï¼Œä½†ä¸èƒ½è®¿é—®é‡Œé¢çš„å‡½æ•°ã€‚</p>\n<p>ğŸ”–ï¼š<strong>Rust ä¸­çš„æ‰€æœ‰æ¡ç›®ï¼ˆå‡½æ•°ã€æ–¹æ³•ã€ç»“æ„ä½“ã€æšä¸¾ã€æ¨¡å—åŠå¸¸é‡ï¼‰é»˜è®¤éƒ½æ˜¯ç§æœ‰çš„ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token namespace\">my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n\n      <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod1</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod2</span><span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span></span><span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">super</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span></span><span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//å­æ¨¡å—å¯ä»¥ä½¿ç”¨å®ƒæ‰€æœ‰ç¥–å…ˆæ¨¡å—ä¸­çš„æ¡ç›®</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n   \n  <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ”–<strong>ç»“è®ºï¼šåœ¨çˆ¶æ¨¡å—ä¸­çš„æ¡ç›®æ— æ³•ä½¿ç”¨å­æ¨¡å—ä¸­çš„<mark>ç§æœ‰æ¡ç›®</mark>ï¼Œä½†æ˜¯å­æ¨¡å—ä¸­çš„æ¡ç›®å¯ä»¥ä½¿ç”¨å®ƒ<mark>æ‰€æœ‰ç¥–å…ˆæ¨¡å—ä¸­çš„æ¡ç›®</mark>ã€‚</strong></p>\n<h4><a id=\"_pub__1648\"></a>ä½¿ç”¨ pub å…³é”®å­—æ¥æš´éœ²è·¯å¾„</h4>\n<p>è¦æ³¨æ„ä¸€ä¸‹ä½¿ç”¨ pub å…³é”®å­—æ¥æš´éœ²äº†æ¨¡å—ï¼Œä½†æ˜¯å®ƒé‡Œé¢çš„å‡½æ•°ä¾ç„¶æ˜¯ç§æœ‰çš„æ²¡æœ‰è¢«æš´éœ²ï¼Œè¦æš´éœ²æŸä¸ªå‡½æ•°å¿…é¡»è¦åœ¨å‰é¢åŠ  pub ã€‚</p>\n<p><mark>super å…³é”®å­—æ˜¯ä»çˆ¶çº§æ¨¡å—å¼€å§‹æ„å»ºç›¸å¯¹è·¯å¾„ï¼Œå®ƒå¯ä»¥ç›¸å½“äº linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸¤ä¸ªç‚¹ â€¦ ã€‚</mark></p>\n<p>ğŸ”–ï¼šç»“æ„ä½“å®šä¹‰æ—¶ä½¿ç”¨äº† pub ï¼Œç»“æ„ä½“æœ¬èº«æˆä¸ºäº†å…¬å…±ç»“æ„ä½“ï¼Œä½†å®ƒçš„å­—æ®µä¾æ—§è¿˜æ˜¯ç§æœ‰çš„ï¼Œè¦ä¸€ä¸ªä¸€ä¸ªå­—æ®µçš„è¿›è¡Œæ˜¯å¦éœ€è¦æˆä¸ºå…¬å…±çš„ã€‚</p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">back_of_house</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">pub</span> name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//å…¬å…±çš„</span>\n            age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i16</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//ç§æœ‰çš„</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n                name<span class=\"token punctuation\">:</span>name<span class=\"token punctuation\">,</span>\n                age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token namespace\">back_of_house<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shenyang\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ”–ï¼š<strong>æˆ‘ä»¬å°†ä¸€ä¸ªæšä¸¾å£°æ˜ä¸ºå…¬å…±çš„æ—¶å€™ï¼Œå®ƒæ‰€æœ‰çš„å˜ä½“éƒ½è‡ªåŠ¨å˜æˆä¸ºå…¬å…±çš„ï¼Œä¸ç»“æ„ä½“åŒºåˆ†å¼€</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">sy</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">xianze</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">A</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">B</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">C</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">D</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> xianze<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>   \n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> x1<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">A</span><span class=\"token punctuation\">;</span>\n    x1<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> x2<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">B</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"_use__1707\"></a>ç”¨ use å…³é”®å­—å°†è·¯å¾„å¯¼å…¥ä½œç”¨åŸŸ</h5>\n<p>ä½¿ç”¨ use å°†è·¯å¾„å¼•å…¥ä½œç”¨åŸŸæ—¶ä¹Ÿéœ€è¦éµå®ˆç§æœ‰æ€§è§„åˆ™ï¼ï¼ï¼</p>\n<p>ä½¿ç”¨ use æŒ‡å®šç›¸å¯¹è·¯å¾„å¿…é¡»è¦ä¼ é€’ç»™ use çš„è·¯å¾„çš„å¼€å§‹å¤„ä½¿ç”¨å…³é”®å­— <strong>self</strong> ï¼Œè€Œä¸æ˜¯ä»å½“å‰ä½œç”¨åŸŸä¸­å¯ç”¨çš„åç§°å¼€å§‹ã€‚</p>\n<p>ä½¿ç”¨ use å°†å‡½æ•°çš„çˆ¶æ¨¡å—å¼•å…¥ä½œç”¨åŸŸæ„å‘³ç€åœ¨è°ƒç”¨æ—¶æˆ‘ä»¬å¿…é¡»æŒ‡å®šè¿™ä¸ªçˆ¶æ¨¡å—ï¼Œä»è€Œæ›´æ¸…æ™°çš„åœ°è¡¨æ˜å½“å‰å‡½æ•°æ²¡æœ‰å®šä¹‰åœ¨å½“å‰ä½œç”¨åŸŸä¸­ã€‚</p>\n<p>å½“ä½¿ç”¨ use å°†ç»“æ„ä½“ã€æšä¸¾å’Œå…¶ä»–æ¡ç›®å¼•å…¥ä½œç”¨åŸŸæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸é€šè¿‡å®Œæ•´è·¯å¾„æ¥å¼•å…¥è€Œä¸æ˜¯å¼•å…¥çˆ¶çº§æ¨¡å—ã€‚</p>\n<p>å½“å¼•å…¥çš„å‡½æ•°åç§°ç›¸åŒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒä»¬çš„çˆ¶æ¨¡å—æ¥åŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç±»å‹ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token namespace\">my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n   <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod1</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">pub</span>  <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">my_mod2</span><span class=\"token punctuation\">{<!-- --></span>\n       <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span></span><span class=\"token function\">a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">super</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>a</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span></span><span class=\"token function\">b</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//å­æ¨¡å—å¯ä»¥ä½¿ç”¨å®ƒæ‰€æœ‰ç¥–å…ˆæ¨¡å—ä¸­çš„æ¡ç›®</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n   \n  <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">my_mod<span class=\"token punctuation\">::</span></span>my_mod1<span class=\"token punctuation\">;</span><span class=\"token comment\">//é”™è¯¯ my_mod1æ˜¯ç§æœ‰çš„</span>\n  <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">back_of_house</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">pub</span> name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n            age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i16</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span> <span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">{<!-- --></span>\n                name<span class=\"token punctuation\">:</span>name<span class=\"token punctuation\">,</span>\n                age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//   use back_of_house::Breakfase;//ç»å¯¹è·¯å¾„</span>\n<span class=\"token comment\">//   use self::back_of_house::Breakfase;//ç›¸å¯¹è·¯å¾„</span>\n\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">sy</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">xianze</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">A</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">B</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">C</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">D</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> xianze<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n    \n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">sy<span class=\"token punctuation\">::</span></span>xianze<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> x1<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">A</span><span class=\"token punctuation\">;</span>\n    x1<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> x2<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">B</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token namespace\">back_of_house<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Breakfase</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"shenyang\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>my_mod<span class=\"token punctuation\">::</span>my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™å› ä¸º my_mod1 æ˜¯ç§æœ‰çš„</span>\n    <span class=\"token namespace\">my_mod<span class=\"token punctuation\">::</span>my_mod2<span class=\"token punctuation\">::</span></span><span class=\"token function\">c</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"as__1792\"></a>ä½¿ç”¨as æ¥æŒ‡å®šå¼•å…¥çš„åˆ«å</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">sy<span class=\"token punctuation\">::</span></span>xianze <span class=\"token keyword\">as</span> xz<span class=\"token punctuation\">;</span><span class=\"token comment\">//ä½¿ç”¨ as æŒ‡å®šåˆ«å</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> x1<span class=\"token operator\">=</span><span class=\"token namespace\">xz<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">A</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">let</span> x1<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">A</span><span class=\"token punctuation\">;</span>\n    x1<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> x2<span class=\"token operator\">=</span><span class=\"token namespace\">sy<span class=\"token punctuation\">::</span>xianze<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">B</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"_pub_use__1806\"></a>ä½¿ç”¨ pub use é‡å¯¼å‡ºåç§°</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">front_of_house</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">hosting</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_to_waitlist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token module-declaration namespace\"><span class=\"token punctuation\">::</span>front_of_house<span class=\"token punctuation\">::</span></span>hosting<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">eat_at_restaurant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token namespace\">hosting<span class=\"token punctuation\">::</span></span><span class=\"token function\">add_to_waitlist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token namespace\">hosting<span class=\"token punctuation\">::</span></span><span class=\"token function\">add_to_waitlist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä½¿ç”¨ use å…³é”®å­—å°†åç§°å¼•å…¥ä½œç”¨åŸŸçš„æ—¶å€™ï¼Œè¿™ä¸ªåç§°ä¼šä»¥ç§æœ‰çš„æ–¹å¼åœ¨æ–°çš„ä½œç”¨åŸŸä¸­ç”Ÿæ•ˆï¼Œä¸ºäº†è®©å¤–éƒ¨ä»£ç è®¿é—®è¿™äº›åç§°ï¼Œå¯ä»¥ä½¿ç”¨ <strong>pub use</strong> ,ä¹Ÿè¢«ç§°ä¸º é‡å¯¼å‡ºã€‚</p>\n<h5><a id=\"_1825\"></a>ä½¿ç”¨å¤–éƒ¨åŒ…</h5>\n<p>é¦–å…ˆå°†å®ƒä»¬åˆ—å…¥ Cargo.toml æ–‡ä»¶ï¼Œå†ä½¿ç”¨ use æ¥å°†ç‰¹å®šæ¡ç›®å¼•å…¥ä½œç”¨åŸŸã€‚</p>\n<p>å¯ä»¥ä½¿ç”¨ åµŒå¥—çš„è·¯å¾„æ¥æ¸…ç†ä¼—å¤šçš„ use è¯­å¥ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cmp<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//==============================================</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">cmp<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Ordering</span><span class=\"token punctuation\">,</span> io<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//ä½¿ç”¨ self</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>io<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Write</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//=================================================</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>io<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Write</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//==============================================</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>collections<span class=\"token punctuation\">::</span></span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä½¿ç”¨é€šé…ç¬¦</span>\n</code></pre>\n<p>å†™å‡ºç›¸åŒçš„éƒ¨åˆ†ï¼Œç”¨èŠ±æ‹¬å·åŒ…è£¹æœ‰å·®å¼‚çš„éƒ¨åˆ†ã€‚</p>\n<p>å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ * æ¥å¼•å…¥æŸä¸ªè·¯å¾„ä¸­æ‰€æœ‰çš„å…¬å…±æ¡ç›®ã€‚</p>\n<h2><a id=\"_1853\"></a>é€šç”¨é›†åˆç±»å‹</h2>\n<pre><code class=\"prism language-rust\">\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>collections<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//  vector å­¦ä¹ </span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token comment\">// åªèƒ½å­˜æ”¾ç›¸åŒç±»å‹çš„å€¼</span>\n<span class=\"token comment\">// åˆ›å»ºæ–¹å¼</span>\n<span class=\"token keyword\">let</span> v<span class=\"token punctuation\">:</span><span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;=</span><span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ä¹Ÿåˆ†ä¸ºå¯å˜å’Œä¸å¯å˜</span>\n\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//vecåé¢æœ‰ä¸ª !</span>\n\nv<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// get ä¼šè¿”å›ä¸€ä¸ª Option&lt;&amp;T&gt;</span>\n\n<span class=\"token keyword\">match</span> v<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">None</span><span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// è¯»å– vectoré‡Œé¢çš„å€¼</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// unwrapæ–¹å¼:æ ‡å‡†åº“å®ç°</span>\n<span class=\"token comment\">// pub const fn unwrap&lt;T&gt;(self) -&gt; T {<!-- --></span>\n<span class=\"token comment\">//     match self {<!-- --></span>\n<span class=\"token comment\">//         Some(val) =&gt; val,</span>\n<span class=\"token comment\">//         None =&gt; panic!(\"called `Option::unwrap()` on a `None` value\"),</span>\n<span class=\"token comment\">//     }</span>\n<span class=\"token comment\">// }</span>\n\n<span class=\"token keyword\">match</span> v<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">None</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ç´¢å¼• å’Œ get å¤„ç†è®¿é—®çš„è¶Šç•Œçš„åŒºåˆ«:ç´¢å¼•: panic  get:è¿”å› None</span>\n\n<span class=\"token comment\">// æ‰€æœ‰æƒå’Œå€Ÿç”¨è§„åˆ™:ä¸èƒ½åœ¨åŒä¸€ä½œç”¨åŸŸå†…åŒæ—¶æœ‰å¯å˜çš„å¼•ç”¨ å’Œä¸å¯å˜ çš„å¼•ç”¨</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¯å˜</span>\n<span class=\"token keyword\">let</span> first<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>v<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¸å¯å˜å¼•ç”¨ </span>\nv<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¯å˜å€Ÿç”¨</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¸å¯å˜å¼•ç”¨</span>\n\n<span class=\"token comment\">// éå† vectorçš„å…ƒç´ </span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token operator\">&amp;</span>v<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// éå†åŒæ—¶æ›´æ”¹å€¼</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">130</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> v<span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¦æ˜¯å¯å˜å¼•ç”¨</span>\n    <span class=\"token operator\">*</span>i<span class=\"token operator\">+=</span><span class=\"token number\">50</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¿™é‡Œè¦è§£å¼•ç”¨</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ç¤ºä¾‹å­˜æ”¾å¤šç§ç±»å‹</span>\n<span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">SpreadsheetCell</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token class-name\">Int</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Float</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">f64</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> row<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n    <span class=\"token class-name\">SpreadsheetCell</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">SpreadsheetCell</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">SpreadsheetCell</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Float</span><span class=\"token punctuation\">(</span><span class=\"token number\">10.12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// ==========================================================================</span>\n<span class=\"token comment\">// String ç±»å‹</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nv<span class=\"token punctuation\">.</span><span class=\"token function\">push_str</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//append</span>\nv<span class=\"token punctuation\">.</span><span class=\"token function\">push_str</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>v1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nv1<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token char\">'!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠŠå•ä¸ªå­—ç¬¦æ·»åŠ åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾</span>\n<span class=\"token keyword\">let</span> v2<span class=\"token operator\">=</span>v<span class=\"token operator\">+</span><span class=\"token operator\">&amp;</span>v1<span class=\"token punctuation\">;</span><span class=\"token comment\">//ä½¿ç”¨+å·æ¥è¿æ¥</span>\n<span class=\"token comment\">// ä½¿ç”¨ format! æ‹¼æ¥å­—ç¬¦ä¸²</span>\n<span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token macro property\">format!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}-{}-{}\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">,</span>s2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å®ƒä¸ä¼šå–å¾—ä»»ä½•å‚æ•°çš„æ‰€æœ‰æƒ</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// rust çš„å­—ç¬¦ä¸²ä¸æ”¯æŒç´¢å¼•è®¿é—®</span>\n<span class=\"token keyword\">let</span> he<span class=\"token operator\">=</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token operator\">&amp;</span>he<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// hashmap&lt;k,v&gt;</span>\n<span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token comment\">// key -values å­˜å‚¨æ–¹å¼</span>\n<span class=\"token comment\">// use std::collections::HashMap; å¼•å…¥æ‰èƒ½ä½¿ç”¨</span>\n<span class=\"token keyword\">let</span> hs<span class=\"token punctuation\">:</span><span class=\"token class-name\">HashMap</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;=</span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// åœ¨åˆ›å»ºçš„æ—¶å€™æ²¡æœ‰æ•°æ®,å°±è¦æŒ‡å®šç±»å‹</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ns<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//åƒè¿™æ · rust å°±å¯ä»¥æ¨å¯¼å‡ºå®ƒçš„ç±»å‹äº†</span>\n<span class=\"token comment\">// å¦å¤–ä¸€ç§æ–¹å¼åˆ›å»º </span>\n<span class=\"token keyword\">let</span> teams<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> initial_scores<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> scores<span class=\"token punctuation\">:</span> <span class=\"token class-name\">HashMap</span><span class=\"token operator\">&lt;</span>_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">&gt;=</span>\nteams<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">zip</span><span class=\"token punctuation\">(</span>initial_scores<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> <span class=\"token operator\">&amp;</span>scores<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}: {}\"</span><span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>scores<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// hashmap å’Œæ‰€æœ‰æƒ</span>\n<span class=\"token comment\">/*\nå¯¹äºå®ç°äº† Copy trait çš„ç±»å‹ï¼Œ å€¼ä¼šè¢«å¤åˆ¶åˆ° HashMap ä¸­\nå¯¹äºæ‹¥æœ‰æ‰€æœ‰æƒçš„å€¼ï¼Œå€¼ä¼šè¢«ç§»åŠ¨ï¼Œæ‰€æœ‰æƒä¼šè½¬ç§»ç»™ hashmap\nå¦‚æœå°†å€¼çš„å¼•ç”¨æ’å…¥åˆ° hashmap ä¸­ï¼Œå€¼æœ¬èº«ä¸ä¼šç§»åŠ¨ï¼Œåœ¨hashmap æœ‰æ•ˆæœŸé—´ï¼Œè¢«\nå¼•ç”¨çš„å€¼å¿…é¡»ä¿æŒæœ‰æ•ˆ\n\n*/</span>\n\n<span class=\"token comment\">// åªä¸° k ä¸å¯¹åº”ä»»ä½•å€¼çš„æƒ…å†µä¸‹ï¼Œæ‰æ’å…¥ entry() è¿”å›å€¼ä¸ºæšä¸¾ </span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> first<span class=\"token operator\">=</span>v<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    v<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>ğŸ“š åŠ¨æ€æ•°ç»„ä¸­ï¼š</p>\n<p><strong>&amp;</strong> ä¸ <strong>[ ]</strong> <strong>ä¼šç›´æ¥è¿”å›å…ƒç´ çš„å¼•ç”¨</strong>ã€‚</p>\n<p>ç´¢å¼•è®¿é—®ä¼šå› ä¸ºè®¿é—®ä¸å­˜åœ¨çš„å…ƒç´ è€Œå‘ç”Ÿ panicï¼Œè€Œ get æ–¹æ³•ä¼šè¿”å› None ä¸ä¼šå‘ç”Ÿ panicã€‚</p>\n<p><mark>æ³¨æ„æ‰€æœ‰æƒè§„åˆ™å’Œå€Ÿç”¨è§„åˆ™ï¼š<strong>ä¸èƒ½åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­åŒæ—¶æ‹¥æœ‰å¯å˜å¼•ç”¨å’Œä¸å¯å˜å¼•ç”¨ã€‚</strong></mark></p>\n<p>å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å¯å˜å¼•ç”¨çš„å€¼ï¼Œéœ€è¦å…ˆå¯¹å…¶è§£å¼•ç”¨ *</p>\n<p>è¦åœ¨åŠ¨æ€æ•°ç»„ä¸­å­˜å‚¨ä¸åŒçš„å…ƒç´ ç±»å‹æ—¶ï¼Œå¯ä»¥æšä¸¾æ¥ï¼›å› ä¸ºæšä¸¾ä¸­çš„æ‰€æœ‰å˜ä½“éƒ½è¢«å®šä¹‰ä¸ºäº†åŒä¸€ç§ç±»å‹ã€‚</p>\n<p>pop æ–¹æ³•ç§»é™¤å¹¶è¿”å›æœ«å°¾çš„å…ƒç´ </p>\n</blockquote>\n<hr/>\n<blockquote>\n<p>ğŸ“š å­—ç¬¦ä¸²ï¼š</p>\n<p>Rustä¸­çš„å­—ç¬¦ä¸²ä½¿ç”¨äº† UTF-8 ç¼–ç ã€‚</p>\n<p>rust å†…ç½®çš„string ç¼–ç æ ¼å¼æ˜¯ utf-8ï¼Œå¦‚æœä½¿ç”¨å…¶å®ƒç¼–ç æ ¼å¼ï¼Œå°±ä¼šæŠ¥é”™ï¼Œé™¤éè‡ªå·±å®ç°ä¸€ä¸ªè§£ç å™¨</p>\n<p>rustæ ¸å¿ƒéƒ¨åˆ†åªæœ‰ä¸€ç§å­—ç¬¦ä¸²ç±»å‹ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡ str ,å®ƒé€šå¸¸ä¼šä»¥å€Ÿç”¨å½¢å¼å‡ºç°: &amp; str</p>\n<p>å¯ä»¥å¯¹é‚£äº›å®ç°äº† Display trait çš„ç±»å‹è°ƒç”¨ to_string() æ–¹æ³•ï¼›</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> data<span class=\"token operator\">=</span><span class=\"token string\">\"shenyang\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span>data<span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠŠå­—ç¬¦ä¸²å­—é¢é‡è½¬æ¢æˆString</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token string\">\"sy\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ä¹Ÿå¯ä»¥ç›´æ¥åº”ç”¨äºå­—é¢é‡ï¼Œs1çš„ç±»å‹ä¸ºString</span>\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong><mark>String::from å’Œ to_string å®Œæˆ ç›¸åŒçš„å·¥ä½œã€‚</mark></strong></p>\n<p>ğŸ¼</p>\n<p>æ›´æ–°å­—ç¬¦ä¸²ï¼š</p>\n<p>æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„ä½¿ç”¨ + å’Œ format! å®æ¥æ‹¼æ¥å­—ç¬¦ä¸²ã€‚ï¼ˆ+ æ–¹å¼ä¼šå–å¾—å‚æ•°çš„æ‰€æœ‰æƒï¼Œè€Œ formatï¼ä¸ä¼šå–å¾—å‚æ•°çš„æ‰€æœ‰æƒï¼‰</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s1<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"t2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> s2<span class=\"token operator\">=</span>s<span class=\"token operator\">+</span><span class=\"token operator\">&amp;</span>s1<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//çœ‹ä¸‹é¢æ–¹æ³•çŸ¥é“ï¼šå‡½æ•°ä¼šå–å¾— s çš„æ‰€æœ‰æƒ</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token operator\">+</span> å·ä¼šè°ƒç”¨ä¸€ä¸ªæ–¹æ³•\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> s<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">...</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&amp;</span>s1èƒ½å¤Ÿè°ƒç”¨addæ–¹æ³•åŸå› åœ¨äºï¼šç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨å°† <span class=\"token operator\">&amp;</span><span class=\"token class-name\">String</span> ç±»å‹çš„å‚æ•°å¼ºåˆ¶è½¬æ¢ä¸º  <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> ç±»å‹ã€‚ï¼ˆè§£å¼•ç”¨å¼ºåˆ¶è½¬æ¢æŠ€æœ¯ï¼‰\n</code></pre>\n<p>push_str æ·»åŠ ä¸€æ®µå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼›push æ·»åŠ å•ä¸ªå­—ç¬¦</p>\n<p>å­—ç¬¦ä¸²ä¸æ”¯æŒç´¢å¼•è®¿é—®ã€‚</p>\n<p>éå†æ–¹æ³•ï¼š chars() ã€ bytes()</p>\n</blockquote>\n<blockquote>\n<p>ğŸ“š HashMap</p>\n<p>è¦ä½¿ç”¨å®ƒè¦å¼•å…¥å½“å‰ä½œç”¨åŸŸï¼š</p>\n<p>use std::collections::HashMap;</p>\n<p>å®ƒçš„é”®å¿…é¡»è¦æœ‰ç›¸åŒçš„ç±»å‹ï¼Œå®ƒçš„å€¼ä¹Ÿå¿…é¡»è¦ ç›¸åŒçš„ç±»å‹ã€‚</p>\n<p>è¦è®°ä½å¯å˜ä¸ä¸å¯å˜åŸåˆ™ï¼›</p>\n<p>ä½œç”¨ zip ã€ iter ã€collect é…åˆä½¿ç”¨å¯ä»¥å°†åŠ¨æ€æ•°ç»„è½¬æ¢ä¸ºå“ˆå¸Œæ˜ å°„ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> teams<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> initial_scores<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> scores<span class=\"token punctuation\">:</span> <span class=\"token class-name\">HashMap</span><span class=\"token operator\">&lt;</span>_<span class=\"token punctuation\">,</span>_<span class=\"token operator\">&gt;=</span>\nteams<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">zip</span><span class=\"token punctuation\">(</span>initial_scores<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>æ‰€æœ‰æƒï¼šå®ç°äº† Copy trait çš„ç±»å‹ï¼Œå®ƒä»¬çš„å€¼ä¼šè¢«ç®€å•çš„å¤åˆ¶åˆ°å“ˆå¸Œæ˜ å°„ä¸­ï¼Œå¯¹äºæŒæœ‰æ‰€æœ‰æƒçš„å€¼ï¼Œå€¼ä¼šè¢«è½¬ç§»ï¼Œå¹¶ä¸”æ‰€æœ‰æƒä¼šè½¬ç§»ç»™å“ˆå¸Œæ˜ å°„ ï¼›å°†å¼•ç”¨æ’å…¥è¿›å»å°±ä¸ä¼šè½¬ç§»æ‰€æœ‰æƒï¼ŒæŒ‡å‘çš„å€¼è¦ä¿è¯åœ¨å“ˆå¸Œæœ‰æ•ˆæ—¶è‡ªå·±ä¹Ÿè¦æ˜¯æœ‰æ•ˆçš„ã€‚</p>\n<p>get è·å–å€¼ï¼Œè¿”å›ä¸€ä¸ª Optionã€‚</p>\n<p>entry æ–¹æ³•æ£€æµ‹ä¸€ä¸ªé”®æ˜¯å¦å­˜åœ¨å¯¹åº”å€¼ï¼Œå¦‚æœä¸å­˜åœ¨å°±ä¸ºå®ƒæ’å…¥ä¸€ä¸ªå€¼ã€‚</p>\n</blockquote>\n<h2><a id=\"_2074\"></a>é”™è¯¯å¤„ç†</h2>\n<h2><a id=\"_panic_2076\"></a>ä¸å¯æ¢å¤é”™è¯¯ä¸ panic!</h2>\n<p><strong>å½“ panic! å‘ç”Ÿæ—¶ï¼Œç¨‹åºä¼šé»˜è®¤ä»å¼€å§‹æ ˆå±•å¼€ã€‚å¯ä»¥åœ¨ Cargo.toml æ–‡ä»¶ä¸­çš„ [profile] åŒºåŸŸæ·»åŠ  panic='abortâ€™æ¥æ”¹å˜ panic é»˜è®¤è¡Œä¸ºä»å±•å¼€åˆ‡æ¢ä¸º ç»ˆæ­¢ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//æ˜¾ç¤ºè°ƒç”¨ panic!</span>\n<span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å‘ç”Ÿäº†é”™è¯¯ï¼ï¼!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p>å›æº¯ä¿¡æ¯ï¼š</p>\n<p>å°†ç¯å¢ƒå˜é‡ RUST_BACKTRACE è®¾ç½®ä¸ºä¸€ä¸ªé0å€¼ï¼Œä»è€Œè·å¾—å›æº¯ä¿¡æ¯ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token constant\">RUST_BACKTRACE</span><span class=\"token operator\">=</span><span class=\"token number\">1</span> cargo run\n</code></pre>\n<p>å¸¦æœ‰è°ƒè¯•ä¿¡æ¯çš„å›æº¯ï¼š</p>\n<p>cargo build æˆ– cargo run å‘½ä»¤æ—¶ï¼Œæ²¡æœ‰é™„å¸¦ - - release æ ‡å¿—ï¼Œè°ƒè¯•å°±æ˜¯é»˜è®¤å¼€å¯çš„</p>\n</blockquote>\n<h2><a id=\"_Result_2097\"></a>å¯æ¢å¤é”™è¯¯ä¸ Result</h2>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">E</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">E</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//Result æšä¸¾å®šä¹‰äº†ä¸¤ä¸ªå˜ä½“ï¼šOk å’Œ Err</span>\n</code></pre>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>fs<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">File</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span>  <span class=\"token keyword\">match</span> f<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> file<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Problem opening the file: {:?}\"</span><span class=\"token punctuation\">,</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<p>åŒ¹é…ä¸åŒç±»å‹çš„é”™è¯¯ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>fs<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">File</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span>  <span class=\"token keyword\">match</span> f<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> file<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">match</span> error<span class=\"token punctuation\">.</span><span class=\"token function\">kind</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">ErrorKind</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">NotFound</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">match</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>fc<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> fc<span class=\"token punctuation\">,</span>\n                <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Problem creating the file: {:?}\"</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            other_error <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Problem opening the file: {:?}\"</span><span class=\"token punctuation\">,</span>other_error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"unwrap__expect__2141\"></a>unwrap å’Œ expect ï¼ˆå¿«æ·æ–¹å¼ï¼‰</h3>\n<blockquote>\n<p>unwrap :</p>\n<p>å½“ Result çš„è¿”å›å€¼æ˜¯ Ok å˜ä½“æ—¶ï¼Œå®ƒä¼šè¿”å› Ok å†…éƒ¨çš„å€¼ã€‚è¿”å›å€¼æ˜¯ Err å˜ä½“æ—¶ï¼Œå®ƒä¼šæ›¿æˆ‘ä»¬è°ƒç”¨ panic! å®ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>fs<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">File</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</blockquote>\n<blockquote>\n<p>expectï¼š</p>\n<p>å®ƒå…è®¸æˆ‘ ä»¬åœ¨ unwrap çš„åŸºç¡€ä¸ŠæŒ‡å®š panic! æ‰€é™„å¸¦çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ‰“å¼€æ–‡ä»¶å¤±è´¥ï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</blockquote>\n<h3><a id=\"_2164\"></a>ä¼ æ’­é”™è¯¯</h3>\n<blockquote>\n<p>å½“æ‰§è¡Œå¤±è´¥çš„è°ƒç”¨æ—¶ï¼Œé™¤äº†äº†å¯ä»¥å‡½æ•°ä¸­å¤„ç†è¿™ä¸ª é”™è¯¯ï¼Œè¿˜å¯ä»¥å°†è¿™ä¸ªé”™è¯¯è¿”å›ç»™è°ƒç”¨è€…ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«ä¼ æ’­é”™è¯¯ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>io<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Read</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>fs<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">File</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">read_username_from_file</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å°†é”™è¯¯è¿”å›ç»™è°ƒç”¨è€…</span>\n    <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> f<span class=\"token operator\">=</span><span class=\"token keyword\">match</span> f<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> file<span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">return</span> <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">match</span> f<span class=\"token punctuation\">.</span><span class=\"token function\">read_to_string</span><span class=\"token punctuation\">(</span>buf<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token comment\">//è¿™é‡Œä¸åŠ åˆ†å·ï¼Œè¡¨ç¤ºå‘ç”Ÿé”™è¯¯è¿”å›é”™è¯¯ï¼ŒæˆåŠŸå°±å¿½ç•¥</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"___2193\"></a>ä¼ æ’­é”™è¯¯çš„å¿«æ·æ–¹å¼ï¼š ? è¿ç®—ç¬¦</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">read_username_from_file</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> s<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    f<span class=\"token punctuation\">.</span><span class=\"token function\">read_to_string</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> s<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>è¢« ï¼Ÿ è¿ç®—ç¬¦æ¥æ”¶çš„é”™è¯¯ä¼šéšå¼çš„è¢« from å‡½æ•°å¤„ç†ï¼Œè¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨æ ‡å‡†åº“çš„ From traitä¸­ï¼Œç”¨äºåœ¨é”™è¯¯ç±»å‹ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span>io<span class=\"token punctuation\">,</span>fs<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">read_username_from_file</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token namespace\">io<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token namespace\">fs<span class=\"token punctuation\">::</span></span><span class=\"token function\">read_to_string</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä»æ–‡ä»¶ä¸­è¯»å–å­—ç¬¦ä¸²æ˜¯ä¸€ ç§ç›¸å½“å¸¸è§çš„æ“ä½œäº†ï¼Œæ‰€ä»¥ rust æä¾›äº†ä¸€ä¸ªå‡½æ•° fs::read_to_string ç”¨äºæ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä¸”åˆ›å»ºä¸€ä¸ªæ–° String,æ”¾å…¥ Stringä¸­å¹¶è¿”å›ç»™è°ƒç”¨è€…ã€‚ã€‚</p>\n<p><strong>ä½¿ç”¨ ? è¿ç®—ç¬¦çš„å‡½æ•°å¿…é¡»è¿”å› Resultã€Option æˆ–ä»»ä½•å®ç°äº† std::ops::Try çš„ç±»å‹ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">let</span> f<span class=\"token operator\">=</span><span class=\"token class-name\">File</span><span class=\"token punctuation\">::</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¿™é‡Œçš„Box&lt;dyn Error&gt;&gt; å«ä½œ trait å¯¹è±¡ï¼Œç°åœ¨å¯ä»¥ç†è§£å®ƒä¸ºä»»ä½•å¯èƒ½çš„é”™è¯¯ç±»å‹</span>\n</code></pre>\n<h3><a id=\"_2228\"></a>é”™è¯¯å¤„ç†çš„æŒ‡å¯¼åŸåˆ™</h3>\n<p>ä½¿ç”¨ panic!</p>\n<ol><li>æŸåçŠ¶æ€å¹¶ä¸åŒ…æ‹¬é¢„æœŸä¸­ä¼šå¶å°”å‘ç”Ÿçš„äº‹æƒ…</li><li>éšåçš„ä»£ç æ— æ³•åœ¨å‡ºç°æŸåçŠ¶æ€åç»§ç»­æ­£å¸¸è¿è¡Œ</li><li>æ²¡æœ‰åˆé€‚çš„æ–¹æ³• æ¥å°†â€œå¤„äºæŸåçŠ¶æ€â€è¿™ä¸€ä¿¡æ¯ç¼–ç è‡³æˆ‘ä»¬æ‰€ä½¿ç”¨çš„ç±»å‹ä¸­</li></ol>\n<p>å¦‚æœé”™è¯¯æ˜¯å¯é¢„æœŸçš„ï¼Œå°±åº”è¯¥è¿”å›ä¸€ä¸ª Result è€Œä¸æ˜¯è°ƒç”¨ panic!</p>\n<h1><a id=\"trait__2240\"></a>æ³›å‹ã€trait ä¸ç”Ÿå‘½å‘¨æœŸ</h1>\n<h3><a id=\"_2242\"></a>æ³›å‹</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// æ³›å‹ç»“æ„ä½“,æ³›å‹ä¹Ÿå¯ä»¥ä½¿ç”¨å¤šä¸ªå‚æ•°</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Point</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    v<span class=\"token punctuation\">:</span> <span class=\"token class-name\">U</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">Point</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">x</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>x\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">y</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>y\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">v</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token operator\">&amp;</span><span class=\"token class-name\">U</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>v\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token comment\">// ç»“æ„ä½“æ³›å‹å’Œæ–¹æ³•æ³›å‹å¯ä»¥ä¸åŒ</span>\n<span class=\"token attribute attr-name\">#[derive(Debug)]</span> <span class=\"token comment\">// è¿™ä¸ªæ³¨è§£å¯ä»¥è®©ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ Debug æ–¹æ³•å¸¦æœ‰è°ƒè¯•ä¿¡æ¯</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">p1</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n <span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> p1<span class=\"token operator\">&lt;</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"fgfg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä½¿ç”¨æ³›å‹æ³¨æ„ç‚¹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// fn largest&lt;T&gt;(list: &amp;[T]) -&gt; T {<!-- --></span>\n<span class=\"token comment\">//     let mut largest = list[0];</span>\n\n<span class=\"token comment\">//     for &amp;item in list.iter() {<!-- --></span>\n<span class=\"token comment\">//         if item &gt; largest {<!-- --></span>\n<span class=\"token comment\">//             //æŠ¥é”™å®ƒè¿™ä¸ªæ³›å‹ä¸èƒ½é€‚ç”¨äºæ‰€æœ‰å¯èƒ½çš„ç±»å‹ï¼Œæ¯”å¦‚è¯´å­—ç¬¦ä¸²ï¼Œæˆ–è€…è‡ªå·±å®šä¹‰çš„ç»“æ„ä½“ï¼Œè€ŒC++ä¸ä¼šæŠ¥é”™ï¼Œä½†ä¼šåœ¨æ‰§è¡Œçš„æ—¶å€™æŠ¥é”™</span>\n<span class=\"token comment\">//             largest = item;</span>\n<span class=\"token comment\">//         }</span>\n<span class=\"token comment\">//     }</span>\n<span class=\"token comment\">//     largest</span>\n<span class=\"token comment\">// }</span>\n</code></pre>\n<p>åœ¨å‡½æ•°ä¸­å®šä¹‰æ³›å‹çš„æ—¶å€™ï¼Œæ³›å‹æ”¾ç½®åœ¨å‡½æ•°ç­¾åä¸­é€šå¸¸ç”¨äºæŒ‡å®šå‚æ•°å’Œè¿”å›å€¼ç±»å‹çš„åœ°æ–¹ã€‚</p>\n<p>å¦‚æœæ³›å‹å®šä¹‰çš„å‡½æ•°ä¸é€‚ç”¨äºæ‰€æœ‰ç±»å‹ï¼Œå°±ä¼šæŠ¥é”™ï¼ï¼ï¼</p>\n<p>ä¸ºæ³›å‹ç»“æ„ä½“å®šä¹‰æ–¹æ³•çš„æ—¶å€™ï¼Œä¹Ÿè¦åœ¨ impl åé¢åŠ æ³›å‹å‚æ•°å’Œç»“æ„ä½“çš„ä¸€æ ·ã€‚</p>\n<blockquote>\n<p>æ³›å‹çš„æ€§èƒ½é—®é¢˜ï¼š</p>\n<p><strong>å•æ€åŒ–ï¼šæ˜¯ä¸€ä¸ªåœ¨ç¼–è¯‘æœŸå°†æ³›å‹ä»£ç è½¬æ¢ä¸ºç‰¹å®šä»£ç çš„è¿‡ç¨‹ï¼Œå®ƒä¼šå°†æ‰€æœ‰ä½¿ç”¨è¿‡çš„å…·ä½“ç±»å‹å¡«å…¥æ³›å‹å‚æ•°ä»è€Œå¾—åˆ°èƒ½å…·ä½“ç±»å‹çš„ä»£ç ã€‚æ‰€ä»¥ä½¿ç”¨æ³›å‹å¹¶ä¸ä¼šæ€§èƒ½é—®é¢˜ã€‚</strong>ï¼ˆä¸éœ€è¦ä¸ºè¿è¡Œæ—¶ä»˜å‡ºä»»ä½•çš„ä»£ä»·ï¼‰</p>\n</blockquote>\n<h2><a id=\"trait__2306\"></a>trait å®šä¹‰å…±äº«è¡Œä¸ºï¼ˆæ¥å£ï¼‰</h2>\n<p>å’Œå…¶ä»–è¯­è¨€çš„æ¥å£åŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸åŒçš„åœ°æ–¹ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// trait : å®šä¹‰å…±äº«è¡Œä¸ºï¼Œå’Œå…¶ä»–è¯­è¨€çš„æ¥å£ç±»ä¼¼ï¼Œä½†ä¹Ÿæœ‰ä¸€äº›åŒºåˆ«</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Summary</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">summarize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">NewsArticle</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">pub</span> headline<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> location<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> author<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">pub</span> content<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">// åœ¨ç±»å‹ä¸Šå®ç° trait</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Summary</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">NewsArticle</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¦å®ç°ä¸€ä¸ª traitï¼Œ å°±è¦å®ç°å®ƒé‡Œé¢æ‰€æœ‰æ–¹æ³•</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">summarize</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">format!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},by {} ({})\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>headline<span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{},by {} ({})\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>headline<span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>author<span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>pub trait åç§°</p>\n<p>å®ç°è¯­æ³•ï¼š impl traitå for ç±»å‹å</p>\n<blockquote>\n<p>é™åˆ¶ï¼š</p>\n<p>åªæœ‰å½“ trait æˆ– ç±»å‹å®šä¹‰äºæˆ‘ä»¬çš„åº“ä¸­æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½ä¸ºè¯¥ç±»å‹å®ç°å¯¹åº”çš„ traitã€‚</p>\n<p>æˆ‘ä»¬ä¸èƒ½ä¸ºå¤–éƒ¨ç±»å‹å®ç°å¤–éƒ¨ trait (å­¤å„¿è§„åˆ™)</p>\n</blockquote>\n<h3><a id=\"_2350\"></a>é»˜è®¤å®ç°</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// é»˜è®¤å®ç°</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">sy</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è‹¥æ²¡æœ‰å®ç°å°±ä¼šä½¿ç”¨é»˜è®¤å®ç°</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show1</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">sy1</span><span class=\"token punctuation\">{<!-- --></span>\n    name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> sy <span class=\"token keyword\">for</span> sy1<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show {}\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show1</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show {}\"</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">let</span> l<span class=\"token operator\">=</span>sy1<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">:</span><span class=\"token string\">\"zhangsan\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">let</span> l1<span class=\"token operator\">=</span>sy1<span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">:</span><span class=\"token string\">\"lisi\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">:</span><span class=\"token number\">19</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n   l<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æœ‰å®ç°å°±ä¼šè°ƒç”¨è‡ªå·±çš„å®ç°</span>\n   l1<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸ºæŸä¸ªç±»å‹å®ç° trait æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¿ç•™æˆ–é‡è½½æ¯ä¸ªæ–¹æ³•çš„é»˜è®¤è¡Œä¸ºï¼ï¼</p>\n<p>å®ç° trait æ—¶ï¼Œæ²¡æœ‰å®ç°å¯¹åº”çš„æ–¹æ³•ä¹Ÿå¯ä»¥è°ƒç”¨é»˜è®¤å®ç°çš„æ–¹æ³•ã€‚</p>\n<h4><a id=\"_trait__2390\"></a>ä½¿ç”¨ trait ä½œä¸ºå‚æ•°</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ä½¿ç”¨ trait ä½œä¸ºå‚æ•°</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">syhui</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// item å¯ä»¥æ˜¯ä»»ä½•å®ç°äº† syhui trait çš„ç±»å‹</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">notify</span><span class=\"token punctuation\">(</span>item <span class=\"token punctuation\">:</span><span class=\"token keyword\">impl</span> syhui<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"trait__2405\"></a>trait çº¦æŸ</h3>\n<p>æ„Ÿè§‰å°±æ˜¯é€šè¿‡ trait æ¥é™åˆ¶å‡½æ•°å‚æ•°çš„èŒƒå›´ï¼ï¼ï¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// item å¯ä»¥æ˜¯ä»»ä½•å®ç°äº† syhui trait çš„ç±»å‹</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">notify</span><span class=\"token punctuation\">(</span>item <span class=\"token punctuation\">:</span><span class=\"token keyword\">impl</span> syhui<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//å’Œä¸Šé¢é‚£ç§åŠŸèƒ½ç­‰ä»·ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªå‚æ•°</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">notify1</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> syhui<span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">,</span> item1<span class=\"token punctuation\">:</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    item1<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ“š<mark>å¯ä»¥é€šè¿‡ + å·æ¥æŒ‡å®šå¤šä¸ª trait çº¦æŸ</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ä½¿ç”¨ + å·æ¥å®ç°å¤šä¸ª traitçº¦æŸ</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">notify2</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> syhui <span class=\"token operator\">+</span> sy<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">notify3</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">:</span> <span class=\"token keyword\">impl</span> syhui <span class=\"token operator\">+</span> sy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸¤ç§å†™æ³•ï¼šimpl trait é€‚åˆçŸ­å°çš„ç¤ºä¾‹ï¼Œè€Œ trait çº¦æŸé€‚ç”¨äºå¤æ‚æƒ…å½¢</p>\n<h3><a id=\"_where__trait__2438\"></a>ä½¿ç”¨ where ä»å¥æ¥ç®€åŒ– trait çº¦æŸ</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">some</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> sy<span class=\"token operator\">+</span>syhui<span class=\"token punctuation\">,</span> <span class=\"token class-name\">U</span><span class=\"token punctuation\">:</span> sy5<span class=\"token operator\">+</span>syhui<span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> t1 <span class=\"token punctuation\">:</span> <span class=\"token class-name\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    t<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t1<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t<span class=\"token punctuation\">.</span><span class=\"token function\">show1</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    t1<span class=\"token punctuation\">.</span><span class=\"token function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token number\">45</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä½¿ç”¨ whrer ä»å¥ç®€åŒ–</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">some1</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span> <span class=\"token punctuation\">,</span> t1 <span class=\"token punctuation\">:</span> <span class=\"token class-name\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">i32</span> \n <span class=\"token keyword\">where</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span>sy<span class=\"token operator\">+</span>syhui<span class=\"token punctuation\">,</span>  <span class=\"token comment\">//æ³¨æ„è¿™é‡Œæœ‰ä¸ªé€—å·</span>\n <span class=\"token class-name\">U</span><span class=\"token punctuation\">:</span>sy5<span class=\"token operator\">+</span>syhui <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//æœ€åä¸€ä¸ªè¿™é‡Œä¸ç”¨åŠ é€—å·</span>\n        t<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        t1<span class=\"token punctuation\">.</span><span class=\"token function\">show2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        t<span class=\"token punctuation\">.</span><span class=\"token function\">show1</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        t1<span class=\"token punctuation\">.</span><span class=\"token function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token number\">45</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\">è¯­æ³•ï¼š\n<span class=\"token keyword\">fn</span>  å‡½æ•°å<span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">U</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">,</span> u <span class=\"token punctuation\">:</span><span class=\"token class-name\">U</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> è¿”å›å€¼ç±»å‹\n <span class=\"token keyword\">where</span> <span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> trait1 <span class=\"token operator\">+</span> trait2<span class=\"token operator\">+</span><span class=\"token punctuation\">...</span>  <span class=\"token punctuation\">,</span>\n       <span class=\"token class-name\">U</span> <span class=\"token punctuation\">:</span> trait1 <span class=\"token operator\">+</span> trait2<span class=\"token operator\">+</span><span class=\"token punctuation\">..</span> <span class=\"token punctuation\">{<!-- --></span>\n           <span class=\"token punctuation\">...</span> å‡½æ•°ä½“\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"_trait__2471\"></a>è¿”å›å®ç°äº† trait çš„ç±»å‹</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">sy5</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">sy6</span><span class=\"token punctuation\">{<!-- --></span>\n    name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> sy5 <span class=\"token keyword\">for</span> sy6<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show {}\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returntrait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">impl</span> sy5<span class=\"token punctuation\">{<!-- --></span>\n    sy6<span class=\"token punctuation\">{<!-- --></span>\n        name<span class=\"token punctuation\">:</span><span class=\"token string\">\"sy6\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>âš ï¸ï¼šé”™è¯¯å†™æ³•</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">sy5</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">sy6</span><span class=\"token punctuation\">{<!-- --></span>\n    name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">sy7</span><span class=\"token punctuation\">{<!-- --></span>\n    name<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    age<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> sy5 <span class=\"token keyword\">for</span> sy6<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show {}\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> sy5 <span class=\"token keyword\">for</span> sy7<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">show3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"show {}\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returntrait</span><span class=\"token punctuation\">(</span>sw <span class=\"token punctuation\">:</span> <span class=\"token keyword\">bool</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">impl</span> sy5<span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token keyword\">if</span> sw<span class=\"token punctuation\">{<!-- --></span>\n\n    sy6<span class=\"token punctuation\">{<!-- --></span>\n        name<span class=\"token punctuation\">:</span><span class=\"token string\">\"sy6\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n         sy7<span class=\"token punctuation\">{<!-- --></span>\n        name<span class=\"token punctuation\">:</span><span class=\"token string\">\"sy7\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        age<span class=\"token punctuation\">:</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>  \n</code></pre>\n<h3><a id=\"_trait__2537\"></a>ä½¿ç”¨ trait çº¦æŸæ¥æœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Display</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Pair</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// æ²¡æœ‰ä»»ä½•é™åˆ¶</span>\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">Pair</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">Self</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">Self</span> <span class=\"token punctuation\">{<!-- --></span>\n            x<span class=\"token punctuation\">,</span>\n            y<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//åªæœ‰å®ç°äº† PartialOrd(ç”¨äºæ¯”è¾ƒ) ä¸ Display(ç”¨äºæ‰“å°) çš„ç±»å‹ï¼Œæ‰ä¼šå®ç° cmp_displayæ–¹æ³•</span>\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Display</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">PartialOrd</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">Pair</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">cmp_display</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">&gt;=</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>y <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The largest member is x = {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The largest member is y = {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ä¹Ÿå¯ä»¥ä¸ºå®ç°äº†æŸä¸ª trait çš„ç±»å‹æ¡ä»¶åœ°å®ç°å¦å¤–ä¸€ä¸ª trait ,å¯¹æ»¡è¶³ trait çº¦æŸçš„æ‰€æœ‰ç±»å‹å®ç° trait ä¹Ÿç§°ä½œè¦†ç›–å®ç°</span>\n <span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Display</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">ToString</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">{<!-- --></span>\n    ã€‚ã€‚ã€‚\n <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//æˆ‘ä»¬å¯ä»¥ä¸ºä»»ä½•å®ç°äº† Display trait çš„ç±»å‹è°ƒç”¨ ToString trait é‡Œé¢çš„ to_string æ–¹æ³•</span>\n</code></pre>\n<h1><a id=\"_2579\"></a>ç”Ÿå‘½å‘¨æœŸ</h1>\n<p>ğŸ“–ï¼š</p>\n<blockquote>\n<ul><li>åœ¨rustä¸­æ¯ä¸ªå¼•ç”¨éƒ½æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå®ƒå¯¹åº”ç€å¼•ç”¨ä¿æŒæœ‰æ•ˆæ€§çš„ä½œç”¨åŸŸã€‚</li><li>ç”Ÿå‘½å‘¨æœŸæœ€ä¸»è¦çš„ç›®æ ‡æ˜¯é¿å…æ‚¬å‚å¼•ç”¨ï¼ˆå€¼åœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶ä½¿ç”¨æŒ‡å‘å®ƒçš„å¼•ç”¨ï¼‰</li><li>rust ä¸­ä¸å…è®¸ç©ºå€¼å­˜åœ¨</li></ul>\n</blockquote>\n<h2><a id=\"_2587\"></a>å€Ÿç”¨æ£€æŸ¥å™¨</h2>\n<p>rust ç¼–è¯‘å™¨æœ‰ä¸€ä¸ªå€Ÿç”¨æ£€æŸ¥å™¨ï¼Œå®ƒç”¨äºæ¯”è¾ƒä¸åŒçš„ä½œç”¨åŸŸå¹¶ç¡®å®šæ‰€æœ‰å€Ÿç”¨çš„åˆæ³•æ€§ã€‚</p>\n<p><strong>ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨ä¸ä¼šæ”¹å˜ä»»ä½•å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸé•¿åº¦ã€‚</strong></p>\n<pre><code class=\"prism language-rust\">è¯­æ³•ï¼š\n'å°å†™å­—ç¬¦ï¼ˆé€šå¸¸ä½¿ç”¨å°å†™çš„ï¼‰\neg<span class=\"token punctuation\">:</span>\n<span class=\"token operator\">&amp;</span><span class=\"token keyword\">i32</span>   å¼•ç”¨\n<span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">i32</span>  æ‹¥æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¼•ç”¨\n<span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">mut</span> <span class=\"token keyword\">i32</span>  æ‹¥æœ‰æ˜¾å¼ç”Ÿå‘½å‘¨æœŸçš„å¯å˜å¼•ç”¨\næ ‡æ³¨æ˜¯ä¸ºæè¿°å¤šä¸ªæ³›å‹ç”Ÿå‘½å‘¨æœŸå‚æ•°ä¹‹é—´çš„å…³ç³»\n</code></pre>\n<p>ğŸ‘€ï¼šå¯¹æ¯”</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ç”Ÿå‘½å‘¨æœŸé”™è¯¯</span>\n<span class=\"token comment\">// fn longest(x : &amp;str, y : &amp;str) -&gt; &amp;str {<!-- --></span>\n<span class=\"token comment\">//     if x.len() &gt; y.len() {<!-- --></span>\n<span class=\"token comment\">//         x</span>\n<span class=\"token comment\">//     } else {<!-- --></span>\n<span class=\"token comment\">//         y</span>\n<span class=\"token comment\">//     }</span>\n<span class=\"token comment\">// }</span>\n<span class=\"token comment\">//ä¸ä¼šæŠ¥é”™ï¼Œè¿™æ ‡æ³¨è¯´æ˜äº†å‚æ•°å’Œè¿”å›å€¼å®ƒä»¬ä¸‰ä¸ªçš„å¼•ç”¨è¦æ‹¥æœ‰ç›¸åŒçš„ç”Ÿå‘½å‘¨æœŸ 'a (æˆ–æ˜¯ä¸¤ä¸ªå‚æ•°çš„å­˜æ´»æ—¶é—´ä¸èƒ½çŸ­äºç»™å®šçš„ç”Ÿå‘½å‘¨æœŸ 'a )</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">longes1</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>x <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> x<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&gt;</span> y<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        x\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n        y\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//å½“å…·ä½“çš„å¼•ç”¨ä¼ å…¥å‡½æ•°æ—¶ï¼Œæ³›å‹ç”Ÿå‘½å‘¨æœŸ 'a ä¼šè¢«å…·ä½“åŒ–ä¸º x ä¸ y ä¸¤è€…ä¸­ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„é‚£ä¸€ä¸ªã€‚æˆ‘ä»¬å°†è¿”å›çš„å¼•ç”¨ä¹Ÿæ ‡ä¸ºäº† 'a ï¼Œåœ¨å…·åŒ–åçš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ä¹Ÿæ˜¯æœ‰æ•ˆçš„</span>\n</code></pre>\n<p><strong>æˆ‘ä»¬åœ¨å‡½æ•°ç­¾åä¸­æŒ‡å®šç”Ÿå‘½å‘¨æœŸå‚æ•°æ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ”¹å˜ä»»ä½•ä¼ å…¥å€¼æˆ–è¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸã€‚</strong></p>\n<hr/>\n<p><strong>å½“è¿”å›ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œè¿”å›ç±»å‹çš„ç”Ÿå‘½å‘¨æœŸå‚æ•°å¿…é¡»è¦ä¸å…¶ä¸­ä¸€ä¸ªå‚æ•°çš„ç”Ÿå‘½å‘¨æœŸå‚æ•°ç›¸åŒ¹é…ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">longes1</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>x <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span> <span class=\"token punctuation\">{<!-- --></span>\n        x   <span class=\"token comment\">//æˆ‘ä»¬å¿½ç•¥y ç”Ÿå‘½å‘¨æœŸçš„æ ‡æ³¨</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ğŸ”– æŒ‡å®šç”Ÿå‘½å‘¨æœŸçš„æ–¹å¼å–å†³äºå‡½æ•°çš„å…·ä½“å®ç°åŠŸèƒ½ã€‚ï¼ï¼ï¼ï¼</p>\n<h3><a id=\"_2641\"></a>ç»“æ„ä½“å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨</h3>\n<p><strong>åœ¨ç»“æ„ä½“ä¸­å­˜å‚¨å¼•ç”¨ï¼Œéœ€è¦ä¸ºç»“æ„ä½“å®šä¹‰ä¸­çš„ç¬¬ä¸€ä¸ªå¼•ç”¨éƒ½æ·»åŠ ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ã€‚</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">import</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    part <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ç»“æ„ä½“å®ä¾‹çš„å­˜æ´»æ—¶é—´ä¸èƒ½è¶…è¿‡å­˜å‚¨åœ¨å­—æ®µ part ä¸­çš„å¼•ç”¨çš„å­˜æ´»æ—¶é—´</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> novel<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Call me Ishmael. Some years ago...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> first_sentence<span class=\"token operator\">=</span>novel<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token char\">'.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">expect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Could not find a '.'\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æˆªå–ç¬¬ä¸€ä¸ª . çš„ä½ç½®ä»¥å‰çš„å­—ç¬¦ä¸²</span>\n    <span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span>import<span class=\"token punctuation\">{<!-- --></span>\n        part<span class=\"token punctuation\">:</span> first_sentence<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"_2661\"></a>ç”Ÿå‘½å‘¨æœŸçœç•¥</h2>\n<p>ğŸ“‘ï¼š<strong>ä»»ä½•å¼•ç”¨éƒ½æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸”éœ€è¦ä¸ºä½¿ç”¨å¼•ç”¨çš„å‡½æ•°æˆ–ç»“æ„ä½“æŒ‡å®šç”Ÿå‘½å‘¨æœŸå‚æ•°ã€‚</strong></p>\n<blockquote>\n<p>ä¸‹é¢è¿™ä¸ªå‡½æ•°æ²¡æœ‰æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸå´å¯ä»¥é€šè¿‡ç¼–è¯‘</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">first_word</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> bytes <span class=\"token operator\">=</span> s<span class=\"token punctuation\">.</span><span class=\"token function\">as_bytes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>item<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> bytes<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> item <span class=\"token operator\">==</span> <span class=\"token char\">b' '</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">return</span> <span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">..</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>å†™å…¥ rust å¼•ç”¨åˆ†æéƒ¨åˆ†çš„æ¨¡å¼ä¹Ÿå°±æ˜¯ç”Ÿå‘½å‘¨æœŸçœç•¥è§„åˆ™ã€‚å°±æ˜¯ç¼–è¯‘å™¨ä¼šè€ƒè™‘ä¸€äº›åœºæ™¯ï¼Œæˆ‘ä»¬æ— éœ€å»éµå®ˆï¼Œå½“æˆ‘ä»¬çš„ä»£ç ç¬¦åˆé‚£äº›æ¨¡å¼çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨ã€‚</p>\n</blockquote>\n<p><strong>è¾“å…¥ç”Ÿå‘½å‘¨æœŸï¼šå‡½æ•°å‚æ•°æˆ–æ–¹æ³•å‚æ•°ä¸­çš„ç”Ÿå‘½å‘¨æœŸï¼›</strong></p>\n<p><strong>è¾“å‡ºç”Ÿå‘½å‘¨æœŸï¼šè¿”å›å€¼çš„ç”Ÿå‘½å‘¨æœŸ</strong></p>\n<blockquote>\n<p>ç¼–è¯‘å™¨ç›®å‰ä½¿ç”¨çš„ä¸‰æ¡è§„åˆ™æ¥è®¡ç®—å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>\n<ul><li><strong>æ¯ä¸€ä¸ªå¼•ç”¨å‚æ•°éƒ½ä¼šæ‹¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸå‚æ•°</strong></li><li><strong>å½“åªå­˜åœ¨ä¸€ä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°æ—¶ï¼Œè¿™ä¸ªç”Ÿå‘½å‘¨æœŸä¼šè¢«èµ‹äºˆç»™æ‰€æœ‰è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°</strong></li><li><strong>å½“æ‹¥æœ‰å¤šä¸ªè¾“å…¥ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªæ˜¯ &amp;self æˆ–&amp;mut self æ—¶ï¼Œself çš„ç”Ÿå‘½å‘¨æœŸä¼šè¢«èµ‹äºˆç»™æ‰€æœ‰çš„è¾“å‡ºç”Ÿå‘½å‘¨æœŸå‚æ•°</strong></li></ul>\n</blockquote>\n<h3><a id=\"_2693\"></a>æ–¹æ³•å®šä¹‰ä¸­çš„ç”Ÿå‘½å‘¨æœŸæ ‡æ³¨</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">import</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    part <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> import<span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">level</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token number\">3</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>å£°æ˜åœ¨ impl åŠç±»å‹åç§°ä¹‹åçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸èƒ½çœç•¥çš„ã€‚</strong></p>\n<p>æ ¹æ®è§„åˆ™æˆ‘ä»¬å¯ä»¥ä¸ç”¨ä¸º self å¼•ç”¨æ ‡æ³¨ç”Ÿå‘½å‘¨æœŸã€‚</p>\n<h3><a id=\"_2712\"></a>é™æ€ç”Ÿå‘½å‘¨æœŸ</h3>\n<pre><code class=\"prism language-rust\"><span class=\"token lifetime-annotation symbol\">'static</span> ç”Ÿå‘½å‘¨æœŸ\n</code></pre>\n<p><strong>'static å®ƒè¡¨ç¤ºæ•´ä¸ªç¨‹åºçš„æ‰§è¡ŒæœŸã€‚æ‰€æœ‰çš„å­—ç¬¦ä¸²å­—é¢é‡éƒ½æ‹¥æœ‰è¿™ä¸ªé™æ€ç”Ÿå‘½å‘¨æœŸ</strong></p>\n<p>ç»¼åˆç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">longest_with_an_announcement</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">,</span> ann<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span>\n<span class=\"token keyword\">where</span>\n    <span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Display</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Announcement! {}\"</span><span class=\"token punctuation\">,</span> ann<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> x<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&gt;</span> y<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        x\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n        y\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h1><a id=\"_2740\"></a>æµ‹è¯•ç®€è¦</h1>\n<pre><code class=\"prism language-rust\">æµ‹è¯•å‡½æ•°éœ€è¦ä½¿ç”¨ test å±æ€§\nåœ¨å‡½æ•°ä¸ŠåŠ ä¸Š <span class=\"token attribute attr-name\">#[test]</span> å±æ€§\nä½¿ç”¨ cargo test å‘½ä»¤è¿è¡Œæ‰€æœ‰æµ‹è¯•\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_two</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    a<span class=\"token operator\">+</span><span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// æ–­è¨€ assert</span>\n<span class=\"token comment\">// assert!  assert_eq!   assert_ne! å¯ä»¥æ·»åŠ è‡ªå®šä¹‰ä¿¡æ¯</span>\n<span class=\"token attribute attr-name\">#[cfg(test)]</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">tests</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">it_works</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">::</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¦å¼•å…¥è¿›æ¥æ‰èƒ½ä½¿ç”¨</span>\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">it_add_two</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token function\">add_two</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"æ‰§è¡Œæœ‰å¤±è´¥å—ï¼Ÿ\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//æµ‹è¯•add_two æ‰§è¡Œçš„ç»“æœæ˜¯å¦ç­‰äº 4</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token attribute attr-name\">#[should_panic]</span> <span class=\"token comment\">//æ¥æŒ‡å®šåº”è¯¥å‘ç”Ÿ panic</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">it_cmp</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"this is a panic!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// should_panic å±æ€§ï¼šå‘ç”Ÿäº† panic å°±æµ‹è¯•æˆåŠŸï¼Œæ²¡æœ‰å°±æµ‹è¯•å¤±è´¥</span>\n<span class=\"token comment\">// æ·»åŠ å¯é€‰çš„ expect å±æ€§</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">cmp</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">bool</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"i must be greater than 0\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    i<span class=\"token operator\">&gt;</span><span class=\"token number\">100</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// cargo test åŒ¹é…çš„å </span>\n<span class=\"token comment\">// ä¼šè‡ªåŠ¨åŒ¹é…å¸¦æœ‰åå­—å­—æ®µçš„æµ‹è¯•</span>\n\n<span class=\"token comment\">// å¿½ç•¥æµ‹è¯•</span>\n<span class=\"token comment\">// #[ignore]  æ·»åŠ å­—æ®µå°±ä¼šå¿½ç•¥</span>\n<span class=\"token comment\">// cargo test -- --ignored è¿è¡Œæœ‰å¿½ç•¥å±æ€§çš„æµ‹è¯•</span>\n\n<span class=\"token comment\">// rust ä¸­å…è®¸æµ‹è¯•ç§æœ‰å‡½æ•°</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token macro property\">assert!</span> å®ƒå¯ä»¥ç¡®ä¿æµ‹è¯•ä¸­æŸäº›æ¡ä»¶çš„å€¼ä¸º <span class=\"token boolean\">true</span>ï¼Œå¦‚æœä¸º <span class=\"token boolean\">false</span> å°±ä¼šè°ƒç”¨  <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token macro property\">assert_eq!</span> å®å’Œ <span class=\"token macro property\">assret_ne!</span>å®ï¼Œç”¨äºæ¯”è¾ƒåˆ¤æ–­ä¸¤ä¸ªå‚æ•°ç›¸ç­‰æˆ–ä¸ç›¸ç­‰\n\nåœ¨è‡ªå®šä¹‰çš„ç»“æ„ä½“æˆ–æšä¸¾çš„å®šä¹‰çš„ä¸Šæ–¹æ·»åŠ  <span class=\"token attribute attr-name\">#[derive(PartialEq, Debug)]</span> æ ‡æ³¨æ¥è‡ªåŠ¨å®ç°è¿™ä¸¤ä¸ª <span class=\"token keyword\">trait</span>\n\n\n\n<span class=\"token type-definition class-name\">should_panic</span> æ£€æŸ¥ panic\nè¿™ä¸ªå±æ€§æ ‡è®°äº†æµ‹è¯•å‡½æ•°ä¼šåœ¨ä»£ç å‘ç”Ÿ panic æ—¶é¡ºåˆ©é€šè¿‡ï¼Œè€Œä¸å‘ç”Ÿ panic æ—¶å¤±è´¥\nå¯ä»¥é€‰å‚æ•° expected ï¼šå®ƒæ£€æŸ¥ panic å‘ç”Ÿæ—¶è¾“å‡ºçš„é”™è¯¯æç¤ºä¿¡æ¯æ˜¯å¦åŒ…å«äº†æŒ‡å®šçš„æ–‡å­— \n<span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token attribute attr-name\">#[should_panic(expected=<span class=\"token string\">\"Guess value must be less than or equal to 100\"</span>)]</span>\næµ‹è¯•å‡½æ•°\n\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">E</span><span class=\"token operator\">&gt;</span> æ¥ç¼–å†™æµ‹è¯•ï¼Œå®ƒè¿è¡Œå¤±è´¥æ—¶ä¼šè¿”å›ä¸€ä¸ª <span class=\"token class-name\">Err</span> å€¼è€Œä¸panic\n\n<span class=\"token attribute attr-name\">#[cfg(test)]</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">tests</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">it_works</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nrust ä¼šé»˜è®¤ä½¿ç”¨å¤šçº¿ç¨‹æ¥å¹¶è¡Œæ‰§è¡Œæµ‹è¯•\nå¯ä»¥ä½¿ç”¨  cargo test <span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>test<span class=\"token operator\">-</span>threads<span class=\"token operator\">=</span><span class=\"token number\">1</span>\næ¥å°†çº¿ç¨‹æ•°é‡é™åˆ¶ä¸º <span class=\"token number\">1</span>\n\nå¦‚æœå¸Œæœ›æµ‹è¯•é€šè¿‡æ—¶ä¹Ÿå°†å€¼æ‰“å°å‡ºæ¥ï¼Œå¯ä»¥ä½¿ç”¨ï¼š\ncargo test <span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>nocapture æ¥ç¦ç”¨æˆªè·åŠŸèƒ½\n\ncargo test æµ‹è¯•å‡½æ•°å   <span class=\"token comment\">//åªè¿è¡Œéƒ¨åˆ†æŒ‡å®šçš„æµ‹è¯•</span>\næ³¨æ„ï¼šæˆ‘ä»¬ä¸èƒ½æŒ‡å®šå¤šä¸ªå‚æ•°æ¥è¿è¡Œå¤šä¸ªå‚æ•°ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå‚æ•°æ‰ä¼šç”Ÿæ•ˆ\n\næƒ³è¦è¿è¡Œå¤šä¸ªæµ‹è¯•å¯ä»¥ç”¨åç§°åŒ¹é…æ¥å®ç°\ncargo test add \nè¿è¡Œæ‰€æœ‰æµ‹è¯•åç§°ä¸­å¸¦æœ‰ add çš„æµ‹è¯•\n\nignore å±æ€§æ¥æ ‡è®°å¿½ç•¥æŸäº›æµ‹è¯•\nåœ¨<span class=\"token attribute attr-name\">#[test]</span> ä¸‹é¢æ ‡è®° <span class=\"token attribute attr-name\">#[ignore]</span>\nè¿è¡Œé‚£äº›è¢«å¿½ç•¥çš„æµ‹è¯•\ncargo test <span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>ignored\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•\n</code></pre>\n<h1><a id=\"IO__2849\"></a>I/O é¡¹ç›®</h1>\n<blockquote>\n<p>è·Ÿç€ä¹¦å†™ä¸€ä¸ªç®€æ˜“çš„ grep å·¥å…·</p>\n</blockquote>\n<blockquote>\n<p>ğŸï¼šé¡¹ç›®å…³æ³¨ç‚¹åˆ†ç¦»</p>\n<ul><li>å°†ç¨‹åºæ‹†åˆ†ä¸º main.rs å’Œ lib.rs ï¼Œå¹¶å°†å®é™…çš„ä¸šåŠ¡é€»è¾‘æ”¾å…¥ lib.rs</li><li>å½“å‘½ä»¤è¡Œè§£æé€»è¾‘ç›¸å¯¹ç®€å•æ—¶ï¼Œå°†å®ƒç•™åœ¨ main.rs ä¸­ä¹Ÿå¯ä»¥</li><li>å½“å‘½ä»¤è¡Œè§£æé€»è¾‘å˜å¾—å¤æ‚æ—¶ï¼Œéœ€è¦å°†å®ƒä» main.rs æå–åˆ° lib.rs ä¸­</li></ul>\n<p>main.rs è´Ÿè´£è¿è¡Œç¨‹åºï¼Œè€Œ lib.rs è´Ÿè´£å¤„ç†çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>\n</blockquote>\n<p>å¤§å¤šæ•°ç»ˆç«¯éƒ½æä¾›ä¸¤ç§è¾“å‡ºï¼š</p>\n<ul><li>ç”¨äºè¾“å‡ºä¸€èˆ¬ä¿¡æ¯çš„æ ‡å‡†è¾“å‡º(stdout)</li><li>ç”¨äºè¾“å‡ºé”™è¯¯æç¤ºä¿¡æ¯çš„æ ‡å‡†é”™è¯¯(stderr)</li></ul>\n<pre><code class=\"prism language-bash\"><span class=\"token operator\">&gt;</span>  æ–‡ä»¶å\né‡å®šå‘ <span class=\"token builtin class-name\">:</span> å‘Šè¯‰ç»ˆç«¯å°†æ‰“å°ä¿¡æ¯è¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶è€Œä¸æ˜¯ç»ˆç«¯ä¸Šé¢\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token macro property\">eprintln!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">eprintln!</span>å®ç”¨æ¥å‘æ ‡å‡†é”™è¯¯æ‰“å°ä¿¡æ¯\n</code></pre>\n<p>src/main.rs</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/*\n * @=^=: ===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^\n * @Autor: æ²ˆæ‰¬\n * @Date: 2022-04-04 09:04:55\n * @FilePath: \\VScodeProjects\\Rustlearn\\minigrep\\src\\main.rs\n * @LastEditTime: 2022-04-04 13:10:35\n * @LastEditors: shenyang\n * @symbol_=custom_string_obkoro1: ..............å› ä¸ºä¸ç¡®å®šæ‰æœ‰äº†æœŸå¾…...................................\n * @^=^: ===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^\n */</span>\n\n<span class=\"token comment\">// ç”¨äºè¯»å–å‘½ä»¤è¡Œå‚æ•°å€¼std::env::args() è¿”å›ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°çš„è¿­ä»£å™¨ï¼ˆiteratorï¼‰</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>env<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>process<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// use minigrep::Config;//å¯¼å…¥é”™è¯¯åŸå› æš‚æ—¶ä¸çŸ¥</span>\n<span class=\"token comment\">// æ‰€å…ˆæ”¾åœ¨ä¸‹é¢æ¥ç€ç”¨</span>\n\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">error<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Error</span><span class=\"token punctuation\">,</span>fs<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>  \n        query <span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n        filename <span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n \n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">run</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">:</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    \n        <span class=\"token keyword\">let</span> contents <span class=\"token operator\">=</span> <span class=\"token namespace\">fs<span class=\"token punctuation\">::</span></span><span class=\"token function\">read_to_string</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>filename<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æ³¨æ„è¿™é‡Œæœ‰ä¸ªé—®å·ä¼ æ’­é”™è¯¯</span>\n    \n        <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>config<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>contents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        \n        <span class=\"token punctuation\">}</span>\n    \n\n\n\n\n\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'static</span> <span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token punctuation\">{<!-- --></span>\n           <span class=\"token keyword\">return</span>  <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ æ²¡æœ‰è¾“å…¥å‚æ•°æˆ–è€…æ˜¯å‚æ•°ä¸è¶³å¤Ÿï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n       \n        <span class=\"token class-name\">Ok</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>\n            query<span class=\"token punctuation\">:</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            filename<span class=\"token punctuation\">:</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// collect() æ–¹æ³•å°†è¿­ä»£å™¨è½¬æ¢ä¸ºä¸€ä¸ªé›†åˆä¾‹å¦‚ï¼š Vecã€‚</span>\n   <span class=\"token keyword\">let</span> args<span class=\"token punctuation\">:</span><span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span><span class=\"token namespace\">env<span class=\"token punctuation\">::</span></span><span class=\"token function\">args</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//    åœ¨ç¨‹åºé€€å‡ºæ—¶å‘è°ƒç”¨è€…è¿”å› é0çš„çŠ¶æ€ç æ˜¯ä¸€ç§æƒ¯ç”¨çš„ä¿¡å·ï¼Œå®ƒè¡¨æ˜</span>\n<span class=\"token comment\">// å½“å‰ç¨‹åºçš„é€€å‡ºæ˜¯ç”±äºæŸç§é”™è¯¯çŠ¶æ€å¯¼è‡´çš„ã€‚</span>\n<span class=\"token comment\">// unwrap_or_else ï¼ˆï¼‰ æ–¹æ³•ï¼šå®šä¹‰åœ¨æ ‡å‡†åº“çš„ Result&lt;T,E&gt;  ä¸­ ï¼Œå®ƒçš„å€¼ä¸ºOKæ—¶</span>\n<span class=\"token comment\">// è¡Œä¸ºå’Œ unwrap ç›¸åŒï¼Œå½“è¿”å› Err æ—¶ï¼Œå®ƒä¼šè°ƒç”¨é—­åŒ…ä¸­ç¼–å†™çš„ä»£ç ã€‚é—­åŒ…çš„å‚æ•°æ˜¯å†™åœ¨ä¸¤æ¡ç«–çº¿ä¹‹é—´</span>\n<span class=\"token comment\">// process::exit(1) å‡½æ•°ä¼šç«‹åˆ»ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œï¼Œå¹¶å°†æˆ‘ä»¬æŒ‡å®šçš„é”™è¯¯ç è¿”å›ç»™è°ƒç”¨è€…ã€‚</span>\n\n\n\n\n    <span class=\"token keyword\">let</span> config<span class=\"token operator\">=</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap_or_else</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>err<span class=\"token closure-punctuation punctuation\">|</span></span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">eprintln!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Problem parsing arguments: {}\"</span><span class=\"token punctuation\">,</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>process<span class=\"token punctuation\">::</span></span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\n\n    \n<span class=\"token comment\">//    å°†è·å–åˆ°çš„å€¼å­˜å…¥å˜é‡</span>\n    <span class=\"token comment\">// let query = &amp;args[1];</span>\n    <span class=\"token comment\">// let filename = &amp;args[2];</span>\n    <span class=\"token comment\">// println!(\"query: {}\", query);</span>\n    <span class=\"token comment\">// println!(\"filename: {}\", filename);</span>\n\n    \n\n\n<span class=\"token comment\">// // å¼€å§‹è¯»å–æ–‡ä»¶</span>\n<span class=\"token comment\">//     let contents = fs::read_to_string(config.filename)</span>\n<span class=\"token comment\">//         .expect(\"Something went wrong reading the file\");</span>\n<span class=\"token comment\">//     println!(\"With text:\\n{}\", contents);</span>\n    \n\n<span class=\"token comment\">// å¤„ç†ä¼ æ’­è¿‡æ¥çš„é”™è¯¯</span>\n<span class=\"token comment\">// run(config);</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">eprintln!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Application error: {}\"</span><span class=\"token punctuation\">,</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>process<span class=\"token punctuation\">::</span></span><span class=\"token function\">exit</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">search</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> <span class=\"token punctuation\">,</span> contents<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå°†åŒ¹é…çš„æ–‡æœ¬å­˜å‚¨è¿›å» </span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> results <span class=\"token operator\">=</span> <span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> contents<span class=\"token punctuation\">.</span><span class=\"token function\">lines</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> line<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            results<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    results   <span class=\"token comment\">//è¿”å›åŒ¹é…åˆ°çš„æ‰€æœ‰æ–‡æœ¬</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä½¿ç”¨ç»“æ„ä½“é‡æ„</span>\n<span class=\"token comment\">// struct Config {<!-- --></span>\n<span class=\"token comment\">//     query : String,</span>\n<span class=\"token comment\">//     filename : String,</span>\n<span class=\"token comment\">// }</span>\n\n<span class=\"token comment\">// impl Config {<!-- --></span>\n<span class=\"token comment\">//     // fn new(args: &amp;[String]) -&gt; Config{<!-- --></span>\n<span class=\"token comment\">//     //     if args.len() &lt;3{<!-- --></span>\n<span class=\"token comment\">//     //         panic!(\"ä½ æ²¡æœ‰è¾“å…¥å‚æ•°æˆ–è€…æ˜¯å‚æ•°ä¸è¶³å¤Ÿï¼ï¼ï¼\")</span>\n<span class=\"token comment\">//     //     }</span>\n        \n<span class=\"token comment\">//     //     Config{<!-- --></span>\n<span class=\"token comment\">//     //         query: args[1].clone(),</span>\n<span class=\"token comment\">//     //         filename: args[2].clone(),</span>\n<span class=\"token comment\">//     //     }</span>\n<span class=\"token comment\">//     // }</span>\n<span class=\"token comment\">//     // æˆ‘ä»¬å€¾å‘äºä½¿ç”¨ Panic! æ¥æš´éœ²ç¨‹åºçš„å†…éƒ¨é—®é¢˜è€Œéç”¨æ³•é—®é¢˜ã€‚</span>\n<span class=\"token comment\">//     // æ”¹è¿›  ä½¿ç”¨ Result è¡¨æ˜ç»“æœæˆåŠŸè¿˜æ˜¯å¤±è´¥</span>\n<span class=\"token comment\">//     fn new(args: &amp;[String]) -&gt; Result&lt;Config, &amp;'static str&gt;{<!-- --></span>\n<span class=\"token comment\">//         if args.len() &lt;3{<!-- --></span>\n<span class=\"token comment\">//            return  Err(\"ä½ æ²¡æœ‰è¾“å…¥å‚æ•°æˆ–è€…æ˜¯å‚æ•°ä¸è¶³å¤Ÿï¼ï¼ï¼\")</span>\n<span class=\"token comment\">//         }</span>\n       \n<span class=\"token comment\">//         Ok (Config {<!-- --></span>\n<span class=\"token comment\">//             query: args[1].clone(),</span>\n<span class=\"token comment\">//             filename: args[2].clone(),</span>\n<span class=\"token comment\">//         })  </span>\n<span class=\"token comment\">//     }</span>\n\n<span class=\"token comment\">// }</span>\n\n\n\n<span class=\"token comment\">//æ”¹è¿›ä¸ºä¸ ç»“æ„ä½“å…³è”çš„newå‡½æ•°</span>\n<span class=\"token comment\">// fn parse_config(args:&amp;[String]) -&gt; Config{<!-- --></span>\n<span class=\"token comment\">//     Config {<!-- --></span>\n<span class=\"token comment\">//         query: args[1].clone(),</span>\n<span class=\"token comment\">//         filename: args[2].clone(),</span>\n<span class=\"token comment\">//     }</span>\n<span class=\"token comment\">// }</span>\n\n\n<span class=\"token comment\">// fn parse_config(args:&amp;[String]) -&gt; (&amp;str,&amp;str){<!-- --></span>\n<span class=\"token comment\">//     let query =&amp;args[1];</span>\n<span class=\"token comment\">//     let filename =&amp;args[2];</span>\n<span class=\"token comment\">//     (query,filename)</span>\n<span class=\"token comment\">// }</span>\n\n\n<span class=\"token comment\">// ä» main å‡½æ•°ä¸­é™¤äº†é…ç½®è§£æå’Œé”™è¯¯å¤„ç†ä¹‹å¤–çš„æ‰€æœ‰é€»è¾‘éƒ½æå–åˆ°å•ç‹¬çš„ run å‡½æ•°ä¸­ </span>\n<span class=\"token comment\">// ä» run å‡½æ•°ä¸­è¿”å›é”™è¯¯</span>\n<span class=\"token comment\">// use  std::error::Error;</span>\n<span class=\"token comment\">// () æ˜¯ç©ºå…ƒç»„</span>\n<span class=\"token comment\">// Box&lt;dyn Error&gt; å®ƒä¼š è¿”å›ä¸€ä¸ªå®ç°äº† Error trait çš„ç±»å‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦æŒ‡å®šå…·ä½“æ˜¯ä»€ä¹ˆç±»å‹</span>\n<span class=\"token comment\">// æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä¸åŒçš„é”™è¯¯åœºæ™¯ä¸‹è¿”å›ä¸åŒçš„ é”™è¯¯ç±»å‹ï¼Œ dyn æ„å‘³ç€åŠ¨æ€çš„æ„æ€</span>\n<span class=\"token comment\">// fn run(config:Config) -&gt; Result&lt;(),Box&lt;dyn Error&gt;&gt;{<!-- --></span>\n\n<span class=\"token comment\">// // å¼€å§‹è¯»å–æ–‡ä»¶</span>\n<span class=\"token comment\">// // let contents = fs::read_to_string(config.filename)</span>\n<span class=\"token comment\">// // .expect(\"Something went wrong reading the file\");</span>\n<span class=\"token comment\">// // println!(\"With text:\\n{}\", contents);</span>\n\n\n<span class=\"token comment\">// let contents = fs::read_to_string(config.filename)?;//æ³¨æ„è¿™é‡Œæœ‰ä¸ªé—®å·ä¼ æ’­é”™è¯¯</span>\n<span class=\"token comment\">// Ok(())</span>\n\n\n<span class=\"token comment\">// }</span>\n\n</code></pre>\n<p>src/lib.rs</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/*\n * @=^=: ===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^\n * @Autor: æ²ˆæ‰¬\n * @Date: 2022-04-04 09:31:23\n * @FilePath: \\VScodeProjects\\Rustlearn\\minigrep\\src\\lib.rs\n * @LastEditTime: 2022-04-04 13:06:09\n * @LastEditors: shenyang\n * @symbol_=custom_string_obkoro1: ..............å› ä¸ºä¸ç¡®å®šæ‰æœ‰äº†æœŸå¾…...................................\n * @^=^: ===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^^^===^\n */</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">error<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Error</span><span class=\"token punctuation\">,</span>fs<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n\n    <span class=\"token keyword\">pub</span> <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>\n        query <span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n        filename <span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">pub</span> case_sensitive <span class=\"token punctuation\">:</span> <span class=\"token keyword\">bool</span><span class=\"token punctuation\">,</span><span class=\"token comment\">//åˆ‡æ¢åŒºåˆ†æ˜¯å¦å¿½ç•¥å¤§å° å†™</span>\n    <span class=\"token punctuation\">}</span> \n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">run</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">:</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Error</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n\n        <span class=\"token comment\">// let contents = fs::read_to_string(config.filename)?;//æ³¨æ„è¿™é‡Œæœ‰ä¸ªé—®å·ä¼ æ’­é”™è¯¯</span>\n\n        <span class=\"token comment\">// for line in search(&amp;config.query, &amp;contents){<!-- --></span>\n        <span class=\"token comment\">//     println!(\"{}\",line);</span>\n        <span class=\"token comment\">// }</span>\n        <span class=\"token comment\">// Ok(())</span>\n\n        <span class=\"token comment\">// æ”¹è¿›åŠŸèƒ½ï¼Œæ˜¯å¦åŒºåˆ†å¤§å°å†™</span>\n        <span class=\"token keyword\">let</span> contents <span class=\"token operator\">=</span> <span class=\"token namespace\">fs<span class=\"token punctuation\">::</span></span><span class=\"token function\">read_to_string</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span>filename<span class=\"token punctuation\">)</span><span class=\"token operator\">?</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> results <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> config<span class=\"token punctuation\">.</span>case_sensitive <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>config<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>contents<span class=\"token punctuation\">)</span><span class=\"token comment\">//åŒºåˆ†å¤§å°å†™</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token function\">search_case_insensitive</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>config<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>contents<span class=\"token punctuation\">)</span><span class=\"token comment\">//ä¸åŒºåˆ†å¤§å°å†™</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> results <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>env<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// env::var å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª Result ä½œä¸ºç»“æœï¼Œåªæœ‰ç¯å¢ƒå˜é‡è¢«è®¾ç½®æ—¶ï¼Œè¿™ä¸ªç»“æœæ‰ä¼šåŒ…å«Ok çš„å˜ä½“ï¼Œå¦åˆ™è¿”å›Errã€‚</span>\n<span class=\"token comment\">// æˆ‘ä»¬ä½¿ç”¨äº† Result çš„ is_err æ–¹æ³•æ¥æ£€æŸ¥ç»“æœæ˜¯å¦ä¸ºé”™è¯¯ï¼Œå¦‚æœ CASE_INSENSITIVE è¢«è®¾ç½®ä¸ºäº†æŸä¸ªå€¼é‚£ä¹ˆå°±ä¼šè¿”å›å‡ï¼Œä¹Ÿæ˜¯ä¸åŒºåˆ†å¤§å°å†™æœç´¢</span>\n<span class=\"token comment\">// ä½¿ç”¨ï¼š env:CASE_INSENSITIVE=1   cargo run to poem.txt</span>\n<span class=\"token comment\">// std::env æ¨¡å—ä¸­è¿˜æœ‰å¾ˆå¤šç”¨äºå¤„ç†ç¯å¢ƒå˜é‡çš„ å®ç”¨åŠŸèƒ½</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Config</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'static</span> <span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> args<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span><span class=\"token number\">3</span><span class=\"token punctuation\">{<!-- --></span>\n           <span class=\"token keyword\">return</span>  <span class=\"token class-name\">Err</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä½ æ²¡æœ‰è¾“å…¥å‚æ•°æˆ–è€…æ˜¯å‚æ•°ä¸è¶³å¤Ÿï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n       <span class=\"token keyword\">let</span> case_sensitive<span class=\"token operator\">=</span><span class=\"token namespace\">env<span class=\"token punctuation\">::</span></span><span class=\"token function\">var</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CASE_INSENSITIVE\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">is_err</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Ok</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Config</span> <span class=\"token punctuation\">{<!-- --></span>\n            query<span class=\"token punctuation\">:</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            filename<span class=\"token punctuation\">:</span> args<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>  \n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ç¼–å†™ æœç´¢å‡½æ•°</span>\n<span class=\"token comment\">// ä½¿ç”¨  lines æ–¹æ³•é€è¡Œéå†æ–‡æœ¬ , å®ƒä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨</span>\n<span class=\"token comment\">// contains æ–¹æ³•æ£€æŸ¥æ¯ä¸€è¡Œæ˜¯å¦åŒ…å«æŸ¥è¯¢å­—ç¬¦ä¸²</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">search</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> <span class=\"token punctuation\">,</span> contents<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œå°†åŒ¹é…çš„æ–‡æœ¬å­˜å‚¨è¿›å» </span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> results <span class=\"token operator\">=</span> <span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> contents<span class=\"token punctuation\">.</span><span class=\"token function\">lines</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> line<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            results<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    results   <span class=\"token comment\">//è¿”å›åŒ¹é…åˆ°çš„æ‰€æœ‰æ–‡æœ¬</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//ç”¨äºå¤§å°å†™æœç´¢ ï¼š æ€è·¯æ˜¯ï¼š æŠŠå¤§å†™è½¬æ¢ä¸ºå°å†™ï¼Œå°±å¯ä»¥å¿½ç•¥å¤§å°å†™ï¼Œæ¥è¾¾åˆ°ç›®çš„</span>\n<span class=\"token comment\">// ç”±ä¸Šé¢ç»“æ„ä½“çš„ bool å­—æ®µæ§åˆ¶ ä¸åˆ†å¤§å°å†™è°ƒç”¨è¿™ä¸ªæœç´¢å‡½æ•°ï¼Œåˆ†å¤§å°å†™å°±ç”¨ä¸Šé¢é‚£ä¸ª search å‡½æ•°</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">search_case_insensitive</span><span class=\"token operator\">&lt;</span><span class=\"token lifetime-annotation symbol\">'a</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> <span class=\"token punctuation\">,</span> contents <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">&amp;</span><span class=\"token lifetime-annotation symbol\">'a</span> <span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> query<span class=\"token operator\">=</span>query<span class=\"token punctuation\">.</span><span class=\"token function\">to_lowercase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> results<span class=\"token operator\">=</span>    <span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> contents<span class=\"token punctuation\">.</span><span class=\"token function\">lines</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        results<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\nresults\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[cfg(test)]</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">tests</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">use</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">::</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">one_result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> query <span class=\"token operator\">=</span> <span class=\"token string\">\"duct\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//ç»“æœä¸ºè¿™ä¸ª</span>\n        <span class=\"token keyword\">let</span> contents <span class=\"token operator\">=</span> <span class=\"token string\">\"\\\n\n        Rust:\n        safe, fast, productive. \n        Pick three.\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>\n                <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"safe, fast, productive.\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> contents<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä¸ºä¸åŒºåˆ†å¤§å°å†™ çš„ search å‡½æ•°ç¼–å†™ä¸€ä¸ªä¼šå¤±è´¥çš„æµ‹è¯•</span>\n\n#<span class=\"token punctuation\">[</span><span class=\"token attribute attr-name\">#[cfg(test)]</span>\n<span class=\"token keyword\">mod</span> <span class=\"token module-declaration namespace\">tests</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">use</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">::</span><span class=\"token operator\">*</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token attribute attr-name\">#[test]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">case_sensitive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> query<span class=\"token operator\">=</span><span class=\"token string\">\"duct\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">let</span> contents<span class=\"token operator\">=</span> <span class=\"token string\">\"\\\n        Rust:\n        safe, fast, productive.\n        Pick three.\n        Duct tape.\"</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>\n            <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"safe, fast, productive.\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n            <span class=\"token function\">search</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> contents<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    \n    <span class=\"token punctuation\">}</span>\n<span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">case_insensitive</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> query<span class=\"token operator\">=</span><span class=\"token string\">\"rUsT\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> contents<span class=\"token operator\">=</span> <span class=\"token string\">\"\\\n    Rust:\n    safe, fast, productive.\n    Pick three.\n    Trust me.\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>\n        <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"Rust:\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Trust me.\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function\">search_case_insensitive</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> contents<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h1><a id=\"_3217\"></a>å‡½æ•°å¼è¯­è¨€ç‰¹æ€§ï¼šè¿­ä»£å™¨ä¸é—­åŒ…</h1>\n<h2><a id=\"_3219\"></a>é—­åŒ…</h2>\n<blockquote>\n<p>é—­åŒ…ï¼šå¯ä»¥æ•è·å…¶æ‰€åœ¨ç¯å¢ƒçš„åŒ¿åå‡½æ•°</p>\n<p>å¯ä»¥å­˜å…¥å˜é‡æˆ–è€…ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°çš„åŒ¿åå‡½æ•°</p>\n</blockquote>\n<p><strong>è¯­æ³•ï¼š</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> bibaoa<span class=\"token operator\">=</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>å‚æ•°<span class=\"token number\">1</span> ï¼Œ å‚æ•°<span class=\"token number\">2</span> <span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">-&gt;</span> è¿”å›ç±»å‹ <span class=\"token punctuation\">{<!-- --></span>\n    å‡½æ•°ä½“<span class=\"token punctuation\">;</span>\n    è¿”å›å€¼\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//æ³¨æ„æœ«å°¾æœ‰ä¸ªå†’å·</span>\nå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†éš”\n</code></pre>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">let</span> bp<span class=\"token operator\">=</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>num1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>num2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        num1<span class=\"token operator\">+</span>num2\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">bp</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//é—­åŒ…è°ƒç”¨</span>\n</code></pre>\n<blockquote>\n<p>é—­åŒ…ä¸€èˆ¬ä¸éœ€è¦æŒ‡å®šå‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹ï¼Œå› ä¸ºç¼–è¯‘å™¨èƒ½å¤Ÿæ¨æ–­å‡ºå¤§å¤šæ•°å˜é‡çš„ç±»å‹</p>\n</blockquote>\n<p><strong>å¦‚æœé—­åŒ…åªæœ‰ä¸€æ¡è¯­å¥ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥èŠ±æ‹¬å·ï¼š</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> bp1<span class=\"token operator\">=</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>x<span class=\"token closure-punctuation punctuation\">|</span></span> x<span class=\"token operator\">*</span>x<span class=\"token punctuation\">;</span>  <span class=\"token comment\">//è¿™é‡Œè¿”å›å€¼ä¹Ÿè¦åŠ åˆ†å·</span>\n    <span class=\"token function\">bp1</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ä¸èƒ½ä½¿ç”¨ä¸¤ç§ä¸åŒçš„ç±»å‹è°ƒç”¨åŒä¸€ä¸ª<strong>éœ€è¦ç±»å‹æ¨å¯¼çš„é—­åŒ…</strong></p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">let</span> bp1<span class=\"token operator\">=</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>x<span class=\"token closure-punctuation punctuation\">|</span></span> x<span class=\"token operator\">*</span>x<span class=\"token punctuation\">;</span>\n    <span class=\"token function\">bp1</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">bp1</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™ï¼Œå› ä¸ºä¸Šé¢å·²ç»è¢«æ¨å¯¼æˆäº†æ•´æ•°ç±»å‹</span>\n</code></pre>\n<h3><a id=\"_Fn_trait__3263\"></a>ä½¿ç”¨æ³›å‹å‚æ•°å’Œ Fn trait æ¥å­˜å‚¨é—­åŒ…</h3>\n<p>ğŸ“– å°†é—­åŒ…å­˜å…¥ç»“æ„ä½“ä¸­ï¼Œæˆ‘å¿…é¡»è¦æ˜ç¡®æŒ‡å®šé—­åŒ…çš„ç±»å‹ï¼Œå› ä¸ºç»“æ„ä½“å„ä¸ªå­—æ®µåœ¨å®šä¹‰æ—¶å¿…é¡»è¦ç¡®å®š</p>\n<p>ğŸ“– ç¬¬ä¸€ä¸ªé—­åŒ…å®ä¾‹éƒ½æœ‰å®ƒè‡ªå·±çš„åŒ¿åç±»å‹ï¼Œä¸¤ä¸ªé—­åŒ…æ‹¥æœ‰å®Œå…¨ç›¸åŒçš„ç­¾åï¼Œå®ƒä»¬çš„ç±»å‹ä¹Ÿè¢«è®¤ä¸ºæ˜¯ä¸ä¸€æ ·çš„</p>\n<p><strong>æ‰€æœ‰é—­åŒ…éƒ½è‡³å°‘å®ç°äº† Fn ã€ FnMut ã€ FnOnce ä¸­çš„ä¸€ä¸ª traitã€‚</strong></p>\n<p>(å‡½æ•°ä¹Ÿå¯ä»¥å®ç°è¿™ä¸‰ä¸ª Fn trait)</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Cacher</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> \n<span class=\"token keyword\">where</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token comment\">//Fn(i32) -&gt; i32 è¿™ä¸ªæ·»åŠ ä»£è¡¨äº†é—­åŒ…å‚æ•°å’Œé—­åŒ…è¿”å›å€¼çš„ç±»å‹ </span>\n    calculation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//where çº¦æŸäº†è¿™ä¸ª T ä»£è¡¨ä¸€ä¸ªä½¿ç”¨ Fn trait çš„é—­åŒ…</span>\n</code></pre>\n<p>ç¤ºä¾‹ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Cacher</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> \n<span class=\"token keyword\">where</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n    calculation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">,</span>\n    value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// p 364 ç¤ºä¾‹</span>\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">Cacher</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span>\n<span class=\"token keyword\">where</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>calculation<span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Cacher</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Cacher</span> <span class=\"token punctuation\">{<!-- --></span>\n            calculation<span class=\"token punctuation\">,</span>\n            value<span class=\"token punctuation\">:</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">value</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> arg<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">match</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>value <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> v<span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">None</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>calculation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                v\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_3317\"></a>ä½¿ç”¨é—­åŒ…æ•è·ä¸Šä¸‹æ–‡ç¯å¢ƒ</h4>\n<p><mark>é—­åŒ…å¯ä»¥ä½¿ç”¨å®šä¹‰åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­çš„å˜é‡ x</mark>(è¿™ä¸ªåŠŸèƒ½æ˜¯å‡½æ•°æ‰€æ²¡æœ‰çš„)</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> equal_to_x<span class=\"token operator\">=</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>z<span class=\"token closure-punctuation punctuation\">|</span></span> z <span class=\"token operator\">==</span> x<span class=\"token punctuation\">;</span> <span class=\"token comment\">//x ä¸æ˜¯å®ƒçš„å‚æ•°ï¼Œé—­åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨å®šä¹‰åœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­çš„å˜é‡x</span>\n    <span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert!</span><span class=\"token punctuation\">(</span><span class=\"token function\">equal_to_x</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>è¿™ä¸€ç‰¹æ€§åªèƒ½ç”¨äºé—­åŒ…ã€‚</p>\n<p>ğŸ“šï¼šé—­åŒ…å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼ä»å®ƒä»¬ç¯å¢ƒä¸­æ•è·å€¼: <strong>è·å–æ‰€æœ‰æƒã€å¯å˜å€Ÿç”¨ã€ä¸å¯å˜å€Ÿç”¨</strong></p>\n<blockquote>\n<p><strong>FnOnce</strong> è·å¾—æ‰€æœ‰æƒï¼Œé—­åŒ…ä¸èƒ½å¤šæ¬¡è·å–å¹¶æ¶ˆè€—æ‰åŒä¸€å˜é‡çš„æ‰€æœ‰æƒï¼Œæ‰€ä»¥å®ƒåªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚</p>\n<p><strong>FnMut</strong> å¯å˜åœ°å€Ÿç”¨å€¼</p>\n<p><strong>Fn</strong> å¯ä»¥ä»ç¯å¢ƒä¸å¯å˜çš„å€Ÿç”¨å€¼</p>\n</blockquote>\n<p>å½“æˆ‘ä»¬åˆ›å»ºé—­åŒ…çš„æ—¶å€™ï¼Œrust ä¼šåŸºäºé—­åŒ…ä»ç¯å¢ƒä¸­ä½¿ç”¨å€¼çš„æ–¹å¼æ¥è‡ªåŠ¨æ¨å¯¼å®ƒéœ€è¦ä½¿ç”¨çš„ traitï¼Œ<mark>æ‰€æœ‰é—­åŒ…éƒ½è‡ªåŠ¨å®ç°äº† FnOnce</mark></p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>å¦‚æœå¸Œæœ›å¼ºåˆ¶è·å–ç¯å¢ƒä¸­çš„æ‰€æœ‰æƒï¼Œå¯ä»¥åœ¨å‚æ•°åˆ—è¡¨å‰æ·»åŠ å…³é”®å­— move ï¼›</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ä½¿ç”¨ move</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> equal_to_x <span class=\"token operator\">=</span> <span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>z<span class=\"token closure-punctuation punctuation\">|</span></span> z <span class=\"token operator\">==</span> x<span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//é”™è¯¯å› ä¸ºä½¿ç”¨äº†move x çš„æ‰€æœ‰æƒå’Œå€¼å·²ç»è¢«ç§»åŠ¨åˆ°é—­åŒ…ä¸­</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">equal_to_x</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>è¿™é‡Œä½¿ç”¨åŠ¨æ€æ•°ç»„æ˜¯å› ä¸ºï¼š<strong>æ•´å½¢åªä¼šè¢«å¤åˆ¶è€Œä¸ä¼šè¢«ç§»åŠ¨ï¼ï¼ï¼</strong></p>\n<blockquote>\n<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéœ€è¦æŒ‡å®šæŸä¸€ä¸ª Fn ç³»åˆ—çš„ trait æ—¶ï¼Œå¯ä»¥å…ˆå°è¯•ä½¿ç”¨ Fn trait, ç¼–è¯‘å™¨ä¼šæ ¹æ®é—­åŒ…ä½“ä¸­çš„å…·ä½“æƒ…å†µæ¥å‘Šè¯‰ä½ æ˜¯å¦éœ€è¦ FnMut æˆ– FnOnceã€‚</p>\n</blockquote>\n<h4><a id=\"_3359\"></a>è¿­ä»£å™¨å¤„ç†å…ƒç´ åºåˆ—</h4>\n<blockquote>\n<p>åœ¨rust ä¸­è¿­ä»£å™¨æ˜¯æƒ°æ€§çš„ï¼Œåˆ›å»ºè¿­ä»£å™¨åï¼Œé™¤éä½ ä¸»åŠ¨è°ƒç”¨æ–¹æ³•æ¥æ¶ˆè€—å¹¶ä½¿ç”¨è¿­ä»£å™¨ï¼Œå¦åˆ™å®ƒä»¬ä¸ä¼šäº§ç”Ÿä»»ä½•çš„å®é™…æ•ˆæœã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> v1 <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> vi_iter<span class=\"token operator\">=</span>v1<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> vi_iter<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"Itertor_triat__next__3373\"></a>Itertor triat å’Œ next æ–¹æ³•</h4>\n<p><mark>æ‰€æœ‰çš„è¿­ä»£å™¨éƒ½å®ç°äº†æ ‡å‡†åº“ä¸­çš„ Iterator triatã€‚</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">pub</span> tracit <span class=\"token class-name\">Iterator</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Item</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">next</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Item</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸ºäº†å®ç°å®ƒæˆ‘ä»¬å¿…é¡»è¦å®šä¹‰ä¸€ä¸ªå…·ä½“çš„ Item ç±»å‹ï¼ŒItem ç±»å‹å°†ä¼šæ˜¯è¿­ä»£å™¨è¿”å›å…ƒç´ çš„ç±»å‹ã€‚</span>\n<span class=\"token comment\">//å®ƒè¦æ±‚å®ç°è€…æ‰‹åŠ¨å®ç°ä¸€ä¸ªæ–¹æ³•ï¼šnext æ–¹æ³•ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡è¢«è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªåŒ…è£¹åœ¨ Some ä¸­çš„è¿­ä»£å™¨å…ƒç´ ï¼Œå¹¶åœ¨è¿­ä»£ç»“æŸæ—¶è¿”å› None</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">iterator_demonstration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> v1 <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> v1_iter <span class=\"token operator\">=</span> v1<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>v1_iter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>v1_iter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>v1_iter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>v1_iter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>è¿™äº›è°ƒç”¨ next çš„æ–¹æ³•ä¹Ÿè¢«ç§°ä¸º <strong>æ¶ˆè€—é€‚é…å™¨</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">iterator_sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> v1 <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> v1_iter <span class=\"token operator\">=</span> v1<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> total<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span> <span class=\"token operator\">=</span> v1_iter<span class=\"token punctuation\">.</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>total<span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸Šé¢åœ¨è°ƒç”¨ sum çš„è¿‡ç¨‹ä¸­è·å–äº† v1_iter çš„æ‰€æœ‰æƒ,å› æ­¤è¿™ä¸ªè¿­ä»£å™¨æ— æ³•è¢«åé¢çš„ä»£ç ç»§ç»­ä½¿ç”¨</span>\n</code></pre>\n<h4><a id=\"_3415\"></a>ç”Ÿæˆå…¶ä»–è¿­ä»£å™¨çš„æ–¹æ³•</h4>\n<blockquote>\n<p>è¿­ä»£å™¨é€‚é…å™¨ï¼šå¯ä»¥å°†å·²æœ‰çš„è¿­ä»£å™¨è½¬æ¢æˆå…¶ä»–ä¸åŒç±»å‹çš„è¿­ä»£å™¨ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">    <span class=\"token keyword\">let</span> v1<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> v2<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span>_<span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> v1<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>x<span class=\"token closure-punctuation punctuation\">|</span></span> x <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//Vec&lt;_&gt; è¿™ä¸ªæ˜¯ä»£è¡¨ æ¨å¯¼ç±»å‹</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>v2<span class=\"token punctuation\">,</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>collect æ–¹æ³•å®ƒä¼šæ¶ˆè€—è¿­ä»£å™¨å¹¶å°†ç»“æœé›†æ”¶é›†åˆ°æŸç§é›†åˆæ•°æ®ç±»å‹ä¸­ã€‚</strong></p>\n<h4><a id=\"_3428\"></a>ä½¿ç”¨é—­åŒ…æ•è·ç¯å¢ƒ</h4>\n<p>è¿­ä»£å™¨ filter æ–¹æ³•ä¼šæ¥æ”¶ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªé—­åŒ…ä¼šåœ¨éå†è¿­ä»£å™¨ä¸­çš„å…ƒç´ æ—¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè€Œæ¯æ¬¡éå†çš„å…ƒç´ åœ¨é—­åŒ…è¿”å› true æ—¶æ‰ä¼šè¢«åŒ…å«åœ¨ filter ç”Ÿæˆçš„æ–°è¿­ä»£å™¨ä¸­ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// ä½¿ç”¨é—­åŒ…æ•è·ç¯å¢ƒ</span>\n<span class=\"token attribute attr-name\">#[derive(PartialEq, Debug)]</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n    size<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n    style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">shoes_in_my_size</span><span class=\"token punctuation\">(</span>shoes<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Shoe</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">,</span> shoe_size<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Shoe</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    shoes<span class=\"token punctuation\">.</span><span class=\"token function\">into_iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>s<span class=\"token closure-punctuation punctuation\">|</span></span> s<span class=\"token punctuation\">.</span>size <span class=\"token operator\">==</span> shoe_size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">filters_by_size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> shoes <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n        <span class=\"token class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n            size<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sneaker\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n            size<span class=\"token punctuation\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sandal\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n            size<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"boot\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> in_my_size <span class=\"token operator\">=</span> <span class=\"token function\">shoes_in_my_size</span><span class=\"token punctuation\">(</span>shoes<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>\n        in_my_size<span class=\"token punctuation\">,</span>\n        <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n            <span class=\"token class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n                size<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sneaker\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Shoe</span> <span class=\"token punctuation\">{<!-- --></span>\n                size<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"boot\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_Iterator_trait__3481\"></a>ä½¿ç”¨ Iterator trait æ¥åˆ›å»ºè‡ªå®šä¹‰è¿­ä»£å™¨</h4>\n<p><mark>éœ€è¦æä¾›ä¸€ä¸ª next æ–¹æ³•çš„å®šä¹‰å°±å¯ä»¥å®ç° Itreator triat</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Counter</span> <span class=\"token punctuation\">{<!-- --></span>\n    count<span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Counter</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Counter</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Counter</span> <span class=\"token punctuation\">{<!-- --></span> count<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Iterator</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Counter</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//å°†è¿­ä»£å™¨çš„å…³è”ç±»å‹æŒ‡å®šäº† u32</span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Item</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">next</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Item</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">&lt;</span> <span class=\"token number\">6</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">None</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token attribute attr-name\">#[test]</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">calling_next_directly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> counter <span class=\"token operator\">=</span> <span class=\"token class-name\">Counter</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>å¾ªç¯å’Œè¿­ä»£å™¨çš„æ€§èƒ½ï¼š</p>\n<p>è¿­ä»£å™¨æ˜¯ rust è¯­è¨€ä¸­çš„ä¸€ç§é›¶å¼€é”€æŠ½è±¡ã€‚</p>\n<p>ä½¿ç”¨è¿™äº›æŠ½è±¡æ—¶ï¼Œä¸ä¼šå¼•å…¥é¢å¤–çš„è¿è¡Œæ—¶å¼€é”€ã€‚</p>\n</blockquote>\n<h2><a id=\"Cargo__cratesio_3531\"></a>Cargo åŠ crates.io</h2>\n<p>å¸¸ç”¨é…ç½®ä¸¤ç§ï¼š</p>\n<ul><li>æ‰§è¡Œ cargo build æ—¶ä½¿ç”¨ dev é…ç½®ï¼Œ ä»¥åŠæ‰§è¡Œ cargo build - - release æ—¶ä½¿ç”¨çš„ release é…ç½®ã€‚</li><li><mark>dev</mark>é…ç½®ä¸­çš„é»˜è®¤é€‰é¡¹é€‚åˆåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨</li><li><mark>release</mark>é…ç½®ä¸­çš„é»˜è®¤é€‰é¡¹åˆ™é€‚åˆåœ¨æ­£å¼å‘å¸ƒæ—¶ä½¿ç”¨</li></ul>\n<p><mark><strong>ç¼–å†™æœ‰ç”¨çš„æ–‡æ¡£æ³¨é‡Š</strong></mark> : ä¸‰æ–œçº¿ / / /</p>\n<p>å¹¶ä¸”å¯ä»¥ <mark>markdown</mark> è¯­æ³•æ¥æ ¼å¼åŒ–å†…å®¹ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/// å°†ä¼ å…¥çš„æ•°å­—åŠ  1 </span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// # Examples</span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// ```rust</span>\n<span class=\"token comment\">/// let arg=5;</span>\n<span class=\"token comment\">/// let answer=my_crate::add_one(arg);</span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// assert_eq!(6,answer);</span>\n<span class=\"token comment\">/// ```</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_one</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token operator\">+</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n   <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ–‡æ¡£æ³¨é‡Š!!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<blockquote>\n<p>è¿è¡Œ <strong>cargo doc</strong> å‘½ä»¤æ¥ç”Ÿæˆæ–‡æ¡£ ä¼šç”Ÿæˆ Html æ–‡ä»¶</p>\n<p>ç”Ÿæˆåœ¨ target/doc è·¯å¾„ä¸‹</p>\n</blockquote>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-ftkKrX4m-1651467632366)(E:\\sysy\\Pictures\\å“”å“©å“”å“©åŠ¨ç”»\\image-20220408181001243.png)]</p>\n<blockquote>\n<p>è¿˜æœ‰ä¸€ç§æ–‡æ¡£æ³¨é‡Šï¼š // !</p>\n<p>å®ƒå¯ä»¥ ä¸ºåŒ…è£¹å½“å‰æ³¨é‡Šçš„å¤–å±‚æ¡ç›®æ·»åŠ æ–‡æ¡£ï¼Œè¿™ç§æ³¨é‡Šå¸¸ç”¨åœ¨åŒ…çš„æ ¹æ–‡ä»¶</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//! # my crate</span>\n<span class=\"token comment\">//! my_crate æ˜¯ä¸€ç³»åˆ—å·¥å…·çš„é›†åˆ</span>\n<span class=\"token comment\">//! ..</span>\n<span class=\"token comment\">//! ....</span>\n<span class=\"token comment\">/// å°†ä¼ å…¥çš„æ•°å­—åŠ  1 </span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// # Examples</span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// ```rust</span>\n<span class=\"token comment\">/// let arg=5;</span>\n<span class=\"token comment\">/// let answer=my_crate::add_one(arg);</span>\n<span class=\"token comment\">/// </span>\n<span class=\"token comment\">/// assert_eq!(6,answer);</span>\n<span class=\"token comment\">/// ``</span>\n</code></pre>\n<h1><a id=\"_3595\"></a>æ™ºèƒ½æŒ‡é’ˆ</h1>\n<blockquote>\n<p>æ™ºèƒ½æŒ‡é’ˆèµ·æºäº C++</p>\n<p>å¼•ç”¨æ˜¯ç”¨ &amp; ç¬¦å·è¡¨ç¤ºï¼Œä¼šå€Ÿç”¨å®ƒæ‰€æŒ‡å‘çš„å€¼ã€‚</p>\n<blockquote>\n<p>æ™ºèƒ½æŒ‡é’ˆæ˜¯ä¸€äº›æ•°æ®ç»“æ„ï¼Œå®ƒä»¬çš„è¡Œä¸ºç±»ä¼¼äºæŒ‡é’ˆä½†æ‹¥æœ‰é¢å¤–çš„å…ƒæ•°æ®å’Œé™„å’ŒåŠŸèƒ½</p>\n</blockquote>\n<p>å¼•ç”¨å’Œæ™ºèƒ½æŒ‡é’ˆä¹‹é—´çš„åŒºåˆ«ï¼šå¼•ç”¨æ˜¯åªå€Ÿç”¨æ•°æ®çš„æŒ‡é’ˆï¼›è€Œå¤§å¤šæ•°æ™ºèƒ½æŒ‡é’ˆæœ¬èº«å°±æ‹¥æœ‰å®ƒä»¬æŒ‡å‘çš„æ•°æ®ã€‚</p>\n</blockquote>\n<div>\n<p> <strong>ä½¿ç”¨ç»“æ„ä½“æ¥å®ç°æ™ºèƒ½æŒ‡é’ˆï¼Œå®ƒä»¬ä¼šå®ç° Deref ä¸ Drop è¿™ä¸¤ä¸ª traitï¼š</strong> </p>\n<p> 1.Deref trait ä½¿å¾—æ™ºèƒ½æŒ‡é’ˆç»“æ„ä½“çš„å®ä¾‹æ‹¥æœ‰ä¸å¼•ç”¨ä¸€è‡´ä¸€è¡Œä¸ºã€‚ </p>\n<p> 2.Drop trait æ˜¯ä¸Šè‡ªå®šä¹‰æ™ºèƒ½æŒ‡é’ˆç¦»å¼€ä½œç”¨åŸŸæ—¶è¿è¡Œçš„ã€‚ </p>\n</div>\n<h5><a id=\"_3620\"></a>å¸¸è§çš„æ™ºèƒ½æŒ‡é’ˆ</h5>\n<ol><li><strong>Box</strong> :åœ¨ heap å†…å­˜ä¸Šåˆ†é…å€¼</li><li><strong>Rc</strong> :å¯ç”¨å¤šé‡æ‰€æœ‰æƒçš„å¼•ç”¨è®¡æ•°ç±»å‹</li><li><strong>Ref å’Œ RefMut</strong> , é€šè¿‡ RefCell è®¿é—®ï¼š åœ¨è¿è¡Œæ—¶è€Œä¸æ˜¯ç¼–è¯‘æ—¶å¼ºåˆ¶å€Ÿç”¨è§„åˆ™çš„ç±»å‹</li></ol>\n<p><mark>åœ¨ç¼–è¯‘çš„æ—¶å€™ ï¼Œ rust éœ€è¦çŸ¥é“ä¸€ä¸ªç±»å‹æ‰€å çš„ç©ºé—´å¤§å°ã€‚</mark></p>\n<p>é€’å½’ç±»å‹çš„å¤§å°æ— æ³•åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚</p>\n<blockquote>\n<p>Cons Listï¼šé“¾æ¥åˆ—è¡¨</p>\n<p>ï¼ˆå‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å¸¸è§ï¼‰</p>\n<p>é“¾æ¥åˆ—è¡¨çš„æ¯ä¸€é¡¹éƒ½åŒ…å«äº†ä¸¤ä¸ªå…ƒç´ ï¼šå½“å‰é¡¹çš„å€¼åŠä¸‹ä¸€é¡¹ã€‚</p>\n<p>é“¾æ¥åˆ—è¡¨çš„æœ€åä¸€é¡¹æ˜¯ä¸€ä¸ª Nil ï¼ˆä¸åŒ…å«ä¸‹ä¸€é¡¹çš„ç‰¹æ®Šå€¼ï¼Œæ¥åšåˆ—è¡¨çš„ç»ˆæ­¢æ ‡è®°ï¼ŒNil å¹¶ä¸æ˜¯ä¸€ä¸ªæ— æ•ˆæˆ–ç¼ºå¤±çš„å€¼ï¼‰</p>\n</blockquote>\n<p><mark>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ <strong>Vec</strong> éƒ½æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œé“¾æ¥åˆ—è¡¨å®ƒå¹¶ä¸å¸¸ç”¨</mark></p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">List</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token keyword\">let</span> b<span class=\"token operator\">=</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> list<span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div>\n  é€šè¿‡ Deref trait å°†æ™ºèƒ½æŒ‡é’ˆè§†ä½œå¸¸è§„å¼•ç”¨ \n <br/> å®ç° Deref trait ä½¿æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è§£å¼•ç”¨è¿ç®—ç¬¦ * çš„è¡Œä¸º \n <br/>\n</div>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>x<span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// æ•°å€¼å’Œå¼•ç”¨æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹</span>\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//å¦‚æœ y ä¸åŠ è§£å¼•ç”¨å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºä¸Šé¢é‚£å¥è¯çš„åŸå› </span>\n</code></pre>\n<p>ğŸ“šï¼šæŠŠ Box å½“æˆå¼•ç”¨æ¥æ“ä½œ</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// let y= &amp;x;</span>\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// æ•°å€¼å’Œå¼•ç”¨æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹</span>\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„æ™ºèƒ½æŒ‡é’ˆï¼š</p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">MyBox</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">MyBox</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">new</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">MyBox</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">MyBox</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n \n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// let y= &amp;x;</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token class-name\">MyBox</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// æ•°å€¼å’Œå¼•ç”¨æ˜¯ä¸¤ç§ä¸åŒçš„ç±»å‹</span>\n    <span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>é—®é¢˜ï¼šä¸Šé¢ä»£ç æŠ¥é”™åŸå› ï¼šä¸çŸ¥é“å¦‚ä½•å»è§£å¼•ç”¨ MyBox</p>\n<p>è§£å†³åŠæ³•ï¼š<mark>å®ç° Deref trait</mark></p>\n</blockquote>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>ops<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Deref</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">impl</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token class-name\">Deref</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">MyBox</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Target</span><span class=\"token operator\">=</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">deref</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token operator\">&amp;</span><span class=\"token class-name\">T</span>  <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token number\">0</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">//*y ä¼šè¢«éšåŒ¿åœ°å±•å¼€ä¸ºï¼š *(y.deref())</span>\n</code></pre>\n<h5><a id=\"_3731\"></a>å‡½æ•°å’Œæ–¹æ³•çš„éšå¼è§£å¼•ç”¨è½¬æ¢</h5>\n<blockquote>\n<p>è§£å¼•ç”¨è½¬æ¢ï¼šå½“æŸä¸ªç±»å‹ T å®ç°äº† Deref trait æ—¶ï¼Œå®ƒèƒ½å¤Ÿå°† T çš„å¼•ç”¨è½¬æ¢ä¸º T ç»è¿‡ Deref æ“ä½œåç”Ÿæˆçš„å¼•ç”¨ã€‚æˆ‘ä»¬å°†æŸä¸ªç‰¹å®šç±»å‹çš„å€¼å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°æˆ–æ–¹æ³•ï¼Œä½†ä¼ å…¥çš„ç±»å‹ä¸å‚æ•°ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œ<mark>è§£å¼•ç”¨è½¬æ¢å°±ä¼šè‡ªåŠ¨å‘ç”Ÿ</mark></p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token keyword\">let</span> m<span class=\"token operator\">=</span><span class=\"token class-name\">MyBox</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Rust\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// å¦‚æœæ²¡æœ‰è§£å¼•ç”¨è½¬æ¢åŠŸèƒ½ï¼Œä¸Šé¢è°ƒç”¨çš„ä»£ç å°±è¦è¿™æ ·å†™</span>\n<span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Rust\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n    \n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">hello</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_3750\"></a>è§£å¼•ç”¨è½¬æ¢ä¸å¯å˜æ€§</h4>\n<blockquote>\n<ol><li>ä½¿ç”¨ Deref trait èƒ½å¤Ÿé‡è½½ä¸å¯å˜å¼•ç”¨çš„ * è¿ç®—ç¬¦ã€‚</li><li>ä½¿ç”¨ DerefMut trait èƒ½å¤Ÿé‡è½½å¯å˜å¼•ç”¨çš„ * è¿ç®—ç¬¦</li></ol>\n</blockquote>\n<p>æ»¡ç‚¹ä¸‹é¢3ç§ç±»å‹æƒ…å½¢æ—¶æ‰§è¡Œè§£å¼•ç”¨è½¬æ¢ï¼š</p>\n<ul><li>å½“ Tï¼šDeref&lt;Target=U&gt;æ—¶ï¼Œå…è®¸ &amp;T è½¬æ¢ä¸º &amp;U</li><li>å½“ Tï¼šDerefMut&lt;Target=U&gt;æ—¶ï¼Œå…è®¸&amp;mut T è½¬æ¢ä¸º &amp;mut U</li><li>å½“ Tï¼šDeref&lt;Target=U&gt;æ—¶ï¼Œå…è®¸&amp;mut T è½¬æ¢ä¸º &amp;U</li></ul>\n<p><mark>rust ä¼šå°†ä¸€ä¸ªå¯å˜å¼•ç”¨è‡ªåŠ¨åœ°è½¬æ¢ä¸ºä¸€ä¸ªä¸å¯å˜å¼•ç”¨ã€‚ä½†è¿™ä¸ªè¿‡ç¨‹ä¸ä¼šé€†è½¬ï¼Œ<strong>ä¸å¯å˜å¼•ç”¨æ°¸è¿œä¸å¯èƒ½è½¬æ¢ä¸ºå¯å˜å¼•ç”¨</strong>ã€‚</mark></p>\n<h3><a id=\"Drop_trait__3765\"></a>Drop trait ï¼ˆç›®å‰ç†è§£ææ„å‡½æ•°ï¼‰</h3>\n<p>Drop trait è¦ æ±‚å®ç°ä¸€ä¸ªæ¥æ”¶ self å¯å˜å¼•ç”¨ä½œä¸ºå‚æ•°çš„ drop å‡½æ•°ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n     data<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Drop</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">drop</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dropping CustomSmartPointer with data '{}'\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token keyword\">let</span> c<span class=\"token operator\">=</span><span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    data <span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my stuff\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> d<span class=\"token operator\">=</span><span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    data<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"other stuff\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CustomSmartPointres created.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token class-name\">CustomSmartPointres</span> created<span class=\"token punctuation\">.</span>\n<span class=\"token class-name\">Dropping</span> <span class=\"token class-name\">CustomSmartPointer</span> with data <span class=\"token lifetime-annotation symbol\">'other</span> stuff'\n<span class=\"token class-name\">Dropping</span> <span class=\"token class-name\">CustomSmartPointer</span> with data <span class=\"token lifetime-annotation symbol\">'my</span> stuff'\n</code></pre>\n<p><mark>å˜é‡çš„ä¸¢å¼ƒé¡ºåºä¸åˆ›å»ºé¡ºåºç›¸åã€‚</mark></p>\n<h4><a id=\"_stdmemdrop__3804\"></a>ä½¿ç”¨ std::mem::drop æå‰ä¸¢å¼ƒå€¼</h4>\n<p>rust å¹¶ä¸å…è®¸æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ Drop trait çš„ drop æ–¹æ³•ï¼›ä½†å¯ä»¥è°ƒç”¨æ ‡å‡†åº“ä¸­çš„ std::meme::drop å‡½æ•°æ¥æå‰æ¸…ç†æŸä¸ªå€¼ã€‚</p>\n<p><mark>ä¸å…è®¸æˆ‘ä»¬æ‰‹åŠ¨è°ƒç”¨ drop å‡½æ•°ï¼ˆææ„å‡½æ•°ï¼‰</mark></p>\n<p>è¦ä½¿ç”¨å°±ä½¿ç”¨ std::mem::drop å‡½æ•°</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n     data<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Drop</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">drop</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dropping CustomSmartPointer with data '{}'\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token keyword\">let</span> c<span class=\"token operator\">=</span><span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    data <span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"my stuff\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> d<span class=\"token operator\">=</span><span class=\"token class-name\">CustomSmartPointer</span><span class=\"token punctuation\">{<!-- --></span>\n    data<span class=\"token punctuation\">:</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"other stuff\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">drop</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"CustomSmartPointres created.\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>æ³¨æ„åŒºåˆ«ï¼šğŸ”–</p>\n<pre><code class=\"prism language-rust\">c<span class=\"token punctuation\">.</span><span class=\"token function\">drop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//è°ƒç”¨çš„æ˜¯ drop å‡½æ•°</span>\n<span class=\"token function\">drop</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//å¯ä»¥è°ƒç”¨çš„æ˜¯ std::mem:drop å‡½æ•°</span>\n</code></pre>\n<h3><a id=\"_RcT_3847\"></a>åŸºäºå¼•ç”¨è®¡æ•°çš„æ™ºèƒ½æŒ‡é’ˆ Rc</h3>\n<blockquote>\n<p>Rc çš„ç±»å‹æ”¯æŒå¤šé‡æ‰€æœ‰æƒï¼Œ Rc æ˜¯ Reference countiing ï¼ˆå¼•ç”¨è®¡æ•°ï¼‰çš„ç¼©å†™</p>\n<p>Rc åªèƒ½è¢«ç”¨äºå•çº¿ç¨‹åœºæ™¯ä¸­</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">List</span><span class=\"token punctuation\">{<!-- --></span>\n     <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> b<span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> c<span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//æŠ¥é”™åŸå› ï¼šBox&lt;T&gt; æ— æ³•è®©å¤šä¸ªåˆ—è¡¨åŒæ—¶æŒæœ‰å¦ä¸€ä¸ªåˆ—è¡¨çš„æ‰€æœ‰æƒ</span>\n</code></pre>\n<p>ğŸ”–ï¼šè§£å†³æ–¹æ³•ï¼šå°† List ä¸­ Box æ”¹ä¸º Rc</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">List</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//å¼•å…¥ä½œç”¨åŸŸ</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n     <span class=\"token keyword\">let</span> a<span class=\"token operator\">=</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> b<span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> c<span class=\"token operator\">=</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>æ¯æ¬¡è°ƒç”¨ Rc::clone éƒ½ä¼šä½¿ç”¨å¼•ç”¨è®¡æ•°å¢åŠ ï¼Œè¿™é‡Œçš„ Rc::clone ä¸ä¼šæ‰§è¡Œæ•°æ®çš„æ·±åº¦æ‹·è´æ“ä½œã€‚</p>\n</blockquote>\n<h5><a id=\"_RcT__3889\"></a>å…‹éš† Rc ä¼šå¢åŠ å¼•ç”¨è®¡æ•°</h5>\n<pre><code class=\"prism language-rust\">\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count after creating a= {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count after creating b = {}\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> c <span class=\"token operator\">=</span> <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count after creating c = {}\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"count after c goes out of scope = {}\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">/*\nè¾“å‡ºç»“æœï¼š\ncount after creating a= 1\ncount after creating b = 2\ncount after creating c = 3\ncount after c goes out of scope = 2\n*/</span>\n</code></pre>\n<p><mark>Rc::strong_count å‡½æ•°ä¼šè¯»å–å¼•ç”¨è®¡æ•°å¹¶å°†å®ƒæ‰“å°å‡ºæ¥</mark></p>\n<blockquote>\n<ul><li> <p>strong_count å¼ºå¼•ç”¨è®¡æ•°</p> </li><li> <p>weak_count å¼±å¼•ç”¨è®¡æ•°ï¼ˆé¿å…å¾ªç¯å¼•ç”¨ï¼‰</p> <p>Rc é€šè¿‡ä¸å¯å˜å¼•ç”¨å¯ä»¥è®©ä½ åœ¨ç¨‹åºçš„ä¸åŒéƒ¨åˆ†ä¹‹é—´å…±äº«åªè¯»æ•°æ®ï¼›ä½†ä¸å¯ä»¥è®©ä½ æŒæœ‰å¤šä¸ªå¯å˜å¼•ç”¨ï¼Œè¿™æ ·ä¼šè¿åå€Ÿç”¨è§„åˆ™</p> </li></ul>\n</blockquote>\n<h4><a id=\"RefCellT__3924\"></a>RefCell å’Œå†…éƒ¨å¯å˜æ€§æ¨¡å¼</h4>\n<blockquote>\n<p>å†…éƒ¨å¯å˜æ€§æ˜¯ rust çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚å®ƒå…è®¸ä½ åœ¨åªæŒæœ‰ä¸å¯å˜å¼•ç”¨çš„å‰æä¸‹å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼›å†…éƒ¨å¯å˜æ€§æ¨¡å¼åœ¨å®ƒçš„æ•°æ®ç»“æ„ä¸­ä½¿ç”¨äº† unsafe ï¼ˆä¸å®‰å…¨ï¼‰ä»£ç æ¥ç»•è¿‡ rust æ­£å¸¸çš„å¯å˜æ€§å’Œå€Ÿç”¨è§„åˆ™</p>\n</blockquote>\n<p>ğŸ“šï¼šå›å¿†ä¸€ä¸‹å€Ÿç”¨è§„åˆ™ï¼š</p>\n<ul><li>åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´é‡Œï¼Œä½ è¦ä¹ˆåªèƒ½æ‹¥æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆåªèƒ½æ‹¥æœ‰ä»»æ„æ•°é‡çš„ä¸å¯å˜å¼•ç”¨</li><li>å¼•ç”¨æ€»æ˜¯æœ‰æ•ˆçš„</li></ul>\n<p>ä½¿ç”¨ RefCell çš„ä»£ç ï¼Œ rust åªä¼šåœ¨è¿è¡Œæ—¶æ£€æŸ¥è¿™äº›å€Ÿç”¨è§„åˆ™ï¼Œå¹¶åœ¨å‡ºç°è¿åå€Ÿç”¨è§„åˆ™çš„æƒ…å†µä¸‹è§¦å‘ panic æ¥æå‰ä¸­æ­¢ç¨‹åºã€‚</p>\n<p><strong>Rust å°†ç¼–è¯‘æœŸæ£€æŸ¥ä½œä¸ºé»˜è®¤è¡Œä¸ºã€‚</strong></p>\n<p>Rc å’Œ RefCell åªèƒ½è¢«ç”¨äºå•çº¿ç¨‹åœºæ™¯ä¸­ã€‚</p>\n<h4><a id=\"_3939\"></a>ä¸‰è€…é€‰æ‹©ä¾æ®</h4>\n<ul><li><strong>Rc å…è®¸ä¸€ä»½æ•°æ®æœ‰å¤šä¸ªæ‰€æœ‰è€…ï¼Œè€Œ Box å’Œ RefCell éƒ½åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</strong></li><li><strong>Box å…è®¸åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥çš„å¯å˜æˆ–ä¸å¯å˜å€Ÿç”¨ï¼Œ Rc ä»…å…è®¸ç¼–è¯‘æ—¶æ£€æŸ¥çš„ä¸å¯å˜å€Ÿç”¨ï¼ŒRefCell å…è®¸è¿è¡Œæ—¶æ£€æŸ¥çš„å¯å˜æˆ–ä¸å¯å˜å€Ÿç”¨</strong></li><li><strong>ç”±äº RefCell å…è®¸æˆ‘ä»¬åœ¨è¿è¡Œæ—¶æ£€æŸ¥å¯å˜å¼•ç”¨ï¼Œæ‰€ä»¥å³ä¾¿ RefCell æœ¬èº«æ˜¯ä¸å¯å˜çš„ï¼Œæˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿæ›´æ”¹å…¶ä¸­å­˜å‚¨çš„å€¼</strong></li></ul>\n<h4><a id=\"_3945\"></a>å†…éƒ¨å¯å˜æ€§ï¼šå¯å˜åœ°å€Ÿç”¨ä¸€ä¸ªä¸å¯å˜çš„å€¼</h4>\n<blockquote>\n<p>å€Ÿç”¨è§„åˆ™çš„æ¨è®ºï¼šä½ æ— æ³•å¯å˜åœ°å€Ÿç”¨ä¸€ä¸ªä¸å¯å˜çš„å€¼ã€‚</p>\n</blockquote>\n<ul><li><strong>borrow_mut æ–¹æ³•æ¥è·å–å¯å˜å¼•ç”¨</strong></li><li><strong>borrow æ–¹æ³•è·å–ä¸å¯å˜å¼•ç”¨</strong></li></ul>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Messenger</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">MockMessenger</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">send</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token comment\">//ä¸¤ä¸ªå¯å˜å¼•ç”¨ </span>\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> one_brrow <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sent_messages<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> two_brrow <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>sent_messages<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        one_brrow<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Stirng</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        two_brrow<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Stirng</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n\n <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> åœ¨ç¼–è¯‘æ—¶å¯ç¼–è¯‘é€šè¿‡ï¼Œä½†ä¼šåœ¨è¿è¡Œæ—¶è§¦å‘ <span class=\"token class-name\">Panic</span>\n</code></pre>\n<h4><a id=\"_RcT__RefCellT__3971\"></a>å°† Rc å’Œ RefCell ç»“åˆä½¿ç”¨æ¥å®ç°ä¸€ä¸ªæ‹¥æœ‰å¤šä¸ªæ‰€æœ‰æƒçš„å¯å˜æ•°æ®</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token attribute attr-name\">#[derive(Debug)]</span>\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">List</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cell<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> value <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> a<span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">let</span> b<span class=\"token operator\">=</span> <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> c<span class=\"token operator\">=</span> <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">*</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a after = {:?}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b after = {:?}\"</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"c after = {:?}\"</span><span class=\"token punctuation\">,</span>c<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">/*\nè¾“å‡ºç»“æœï¼š\na after = Cons(RefCell { value: 15 }, Nil)\nb after = Cons(RefCell { value: 6 }, Cons(RefCell { value: 15 }, Nil))\nc after = Cons(RefCell { value: 10 }, Cons(RefCell { value: 15 }, Nil)) \n*/</span>\n\n</code></pre>\n<pre><code>#### å¾ªç¯å¼•ç”¨ä¼šé€ æˆå†…å­˜æ³„æ¼\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cell<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token keyword\">crate</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">List</span><span class=\"token punctuation\">::</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token comment\">// åˆ›å»ºå¾ªç¯å¼•ç”¨</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> a <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Nil</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a initial rc coutn ={}\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a next item = {:?}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">.</span><span class=\"token function\">tail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> b <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a rc count after b creation ={}\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">tail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token operator\">*</span>link<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"b rc coutn after changing a = {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a rc count after changing a = {}\"</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// å–æ¶ˆä¸‹é¢è¿™è¡Œï¼Œå°±ä¼šçœ‹åˆ°å¾ªç¯å¼•ç”¨é€ æˆæ ˆæº¢å‡º</span>\n    <span class=\"token comment\">// println!(\"a next item ={:?} \", a.tail());</span>\n\n\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token attribute attr-name\">#[derive(Debug)]</span>\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">List</span><span class=\"token punctuation\">{<!-- --></span>\n\n <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n <span class=\"token class-name\">Nil</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">List</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">tail</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">&amp;</span><span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">List</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\n        <span class=\"token keyword\">match</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Cons</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span>item<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Nil</span><span class=\"token operator\">=&gt;</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h4><a id=\"_WeakT__RcT__4068\"></a>ä½¿ç”¨ Weak ä»£æ›¿ Rc æ¥é¿å…å¾ªç¯å¼•ç”¨</h4>\n<blockquote>\n<p>å¼ºå¼•ç”¨å¯ä»¥è¢«æˆ‘ä»¬ç”¨æ¥å…±äº«ä¸€ä¸ª Rc å®ä¾‹çš„æ‰€æœ‰æƒï¼Œè€Œå¼±å¼•ç”¨ä¸ä¼šè¡¨è¾¾æ‰€æœ‰æƒå…³ç³»ï¼Œå› æ­¤å¼±å¼•ç”¨ä¸ä¼šé€ æˆå¾ªç¯å¼•ç”¨</p>\n<p>åœ¨ä½¿ç”¨ Weak æŒ‡å‘çš„å€¼ä¹‹å‰ç¡®ä¿å®ƒä¾ç„¶å­˜åœ¨ï¼Œå¯ä»¥è°ƒç”¨ Weak å®ä¾‹çš„ upgrade æ–¹æ³•æ¥å®ŒæˆéªŒè¯ï¼›è¿™ä¸ªæ–¹æ³•è¿”å›çš„ Option&lt;Rc&gt;</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cell<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token attribute attr-name\">#[derive(Debug)]</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n    value<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    parent <span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Weak</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Node</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Node</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n\n <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  \n    <span class=\"token keyword\">let</span> leaf <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n        value<span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        parent<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        children<span class=\"token punctuation\">:</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n     <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"leaf parent ={:?}\"</span><span class=\"token punctuation\">,</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upgrade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> branch <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n        value<span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n        parent<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        children<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token operator\">*</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">downgrade</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>branch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"leaf parent = {:?}\"</span><span class=\"token punctuation\">,</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upgrade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_strong_count__weak_count__4109\"></a>æ˜¾ç¤º strong_count å’Œ weak_count è®¡æ•°å€¼çš„å˜åŒ–</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>cell<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token attribute attr-name\">#[derive(Debug)]</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n    value<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    parent <span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Weak</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Node</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token punctuation\">,</span>\n    children<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Node</span><span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n\n <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  \n    <span class=\"token keyword\">let</span> leaf <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n        value<span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n        parent<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        children<span class=\"token punctuation\">:</span><span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"leaf strong ={} , weak = {}\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">weak_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"leaf parent ={:?}\"</span><span class=\"token punctuation\">,</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upgrade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">let</span> branch <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Node</span><span class=\"token punctuation\">{<!-- --></span>\n            value<span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            parent<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Weak</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            children<span class=\"token punctuation\">:</span> <span class=\"token class-name\">RefCell</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n        <span class=\"token operator\">*</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow_mut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">downgrade</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>branch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"branch strong ={}, weak = {}\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>branch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">weak_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>branch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span>\n            <span class=\"token string\">\"leaf strong = {} , weak = {}\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">weak_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"leaf parent = {:?}\"</span><span class=\"token punctuation\">,</span>leaf<span class=\"token punctuation\">.</span>parent<span class=\"token punctuation\">.</span><span class=\"token function\">borrow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">upgrade</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"leaf strong = {} , weak = {}\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">strong_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">weak_count</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>leaf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*\nè¾“å‡ºç»“æœï¼š\nleaf strong =1 , weak = 0\nleaf parent =None\nbranch strong =1, weak = 1\nleaf strong = 2 , weak = 0\nleaf parent = None\nleaf strong = 1 , weak = 0\n*/</span>\n</code></pre>\n<p>ğŸ“š <strong>Rc å’Œ RefCell éƒ½åªèƒ½ç”¨äºå•çº¿ç¨‹ä¸­ã€‚</strong></p>\n<h2><a id=\"_4188\"></a>æ— ç•å¹¶å‘</h2>\n<blockquote>\n<p>1ï¼š1 æ¨¡å‹ï¼šæ„å‘³ç€ä¸€ä¸ªæ“ä½œç³»ç»Ÿçº¿ç¨‹å¯¹åº”ä¸€ä¸ªè¯­è¨€çº¿ç¨‹</p>\n<p>Mï¼šN æ¨¡å‹ï¼šMä¸ªç»¿è‰²çº¿ç¨‹å¯¹åº”ç€Nä¸ªç³»ç»Ÿçº¿ç¨‹ï¼ŒMä¸Nä¸å¿…ç›¸ç­‰ï¼ˆç»¿è‰²çº¿ç¨‹ç”±ç¨‹åºè¯­è¨€æä¾›çš„çº¿ç¨‹å«åšç»¿è‰²çº¿ç¨‹ï¼‰</p>\n</blockquote>\n<p><mark>rust æ ‡å‡†åº“åªæä¾›äº† 1ï¼š1 çº¿ç¨‹æ¨¡å‹çš„å®ç°</mark></p>\n<h4><a id=\"_spawn__4198\"></a>ä½¿ç”¨ spawn åˆ›å»ºæ–°çº¿ç¨‹</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">/*\nthread::spawn å‡½æ•°æ¥åˆ›å»ºçº¿ç¨‹ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªé—­åŒ…ä¼šåŒ…å«æˆ‘ä»¬æƒ³è¦åœ¨æ–°çº¿ç¨‹ä¸­è¿è¡Œçš„ä»£ç ã€‚\n*/</span>\n <span class=\"token comment\">// åˆ›å»ºçº¿ç¨‹å¼•å…¥æ¨¡å—</span>\n    <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>thread<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>time<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">;</span>\n   \n   <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span> <span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token number\">1</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"çº¿ç¨‹å¼€å§‹è¿è¡Œ...\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">::</span><span class=\"token function\">from_millis</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//çº¿ç¨‹ç¡çœ æ—¶é—´</span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"i = {}\"</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>çº¿ç¨‹æ‰§è¡Œé¡ºåºæ˜¯ç”±æ“ä½œç³»ç»Ÿçº¿ç¨‹è°ƒè¯•ç­–ç•¥å†³å®šçš„ã€‚</strong></p>\n<h4><a id=\"_join__4219\"></a>ä½¿ç”¨ join å¥æŸ„ç­‰å¾…æ‰€æœ‰çº¿ç¨‹ç»“æŸ</h4>\n<blockquote>\n<p>æˆ‘ä»¬é€šè¿‡å°† thread::spawn è¿”å›çš„ç»“æœä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªè‡ªæŒæœ‰æ‰€æœ‰æƒçš„ JoinHandle ,è°ƒç”¨å®ƒçš„ join æ–¹æ³•å¯ä»¥é˜»å¡å½“å‰çº¿ç¨‹ç›´åˆ°å¯¹åº”çš„æ–°çº¿ç¨‹è¿è¡Œç»“æŸã€‚è°ƒç”¨ join æ–¹æ³•æ¥ä¿è¯æ–°çº¿ç¨‹èƒ½å¤Ÿåœ¨ main å‡½æ•°é€€å‡ºå‰æ‰§è¡Œå®Œæ¯•ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">   <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span> <span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n <span class=\"token punctuation\">...</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nhandle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//é˜»å¡çº¿ç¨‹</span>\n<span class=\"token comment\">//è¦åœ¨ä»€ä¹ˆä½ç½®é˜»å¡å°±æ”¾åœ¨ä»€ä¹ˆä½ç½® </span>\n</code></pre>\n<h4><a id=\"_move__4232\"></a>åœ¨çº¿ç¨‹ä¸­ä½¿ç”¨ move é—­åŒ…</h4>\n<blockquote>\n<p>move é—­åŒ…å¸¸å¸¸ç”¨æ¥ä¸ thread::spawn å‡½æ•°é…åˆä½¿ç”¨ï¼Œå®ƒå…è®¸ä½ åœ¨æŸä¸ªçº¿ç¨‹ä¸­ä½¿ç”¨æ¥è‡ªå¦ä¸€ä¸ªçº¿ç¨‹çš„æ•°æ®ã€‚</p>\n<p>åœ¨é—­åŒ…å‚æ•°åˆ—è¡¨å‰é¢æ·»åŠ  move æ¥å¼ºåˆ¶ä»å¤–éƒ¨ç¯å¢ƒä¸­æ•è·å€¼çš„æ‰€æœ‰æƒã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"v {:?}\"</span><span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>é—®é¢˜ï¼šåœ¨æ¨å¯¼å‡ºå¦‚ä½•æ•è· v åå†³å®šè®©é—­åŒ…å€Ÿç”¨ v ï¼Œå› ä¸ºæ‰“å°åªéœ€è¦ä½¿ç”¨ v çš„å¼•ç”¨ï¼Œä½†æ˜¯ rust ä¸çŸ¥é“æ–°çº¿ç¨‹ä¼šè¿è¡Œå¤šä¹…ï¼Œæ‰€ä»¥æ— æ³•ç¡®å®š v çš„å¼•ç”¨æ˜¯å¦ä¸€ç›´æœ‰æ•ˆï¼Ÿ</p>\n<p>eg:</p>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"v {:?}\"</span><span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">drop</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//åœ¨è¿™é‡Œå·²ç»æ¸…ç†äº† v ä½†æ–°çº¿ç¨‹å´è¿˜éœ€è¦ä½¿ç”¨</span>\n    handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ä½¿ç”¨ move è§£å†³ï¼š</p>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> v <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"v {:?}\"</span><span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//move ä¼šå¼ºåˆ¶é—­åŒ…è·å¾—å®ƒæ‰€éœ€å€¼çš„æ‰€æœ‰æƒ</span>\n</code></pre>\n<p><strong>move ä¼šå¼ºåˆ¶é—­åŒ…è·å¾—å®ƒæ‰€éœ€å€¼çš„æ‰€æœ‰æƒ</strong></p>\n<p>æˆ‘ä»¬æŠŠ v çš„æ‰€æœ‰æƒç§»åŠ¨åˆ°äº†é—­åŒ…ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½åœ¨å¤–éƒ¨ç»§ç»­æ“ä½œ v äº†ã€‚</p>\n<h4><a id=\"_4274\"></a>ä½¿ç”¨æ¶ˆæ¯ä¼ é€’åœ¨çº¿ç¨‹é—´è½¬ç§»æ•°æ®</h4>\n<blockquote>\n<p>ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œæ˜¯é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ã€‚</p>\n</blockquote>\n<blockquote>\n<blockquote>\n<p>rust åœ¨æ ‡å‡†åº“ä¸­å®ç°ä¸€ä¸ªåä¸º é€šé“ï¼ˆchannel ï¼‰ çš„ç¼–ç¨‹æ¦‚å¿µï¼Œå®ƒå¯ä»¥è¢«ç”¨æ¥å®ç°åŸºäºæ¶ˆæ¯ä¼ é€’çš„å¹¶å‘æœºåˆ¶ã€‚</p>\n<p>é€šé“ç”±<mark>å‘é€è€…</mark>å’Œ<mark>æ¥æ”¶è€…</mark>ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆã€‚</p>\n<p>ä»»ä½•ä¸€ç«¯è¢«ä¸¢å¼ƒï¼Œç›¸åº”çš„é€šé“å°±è¢«å…³é—­äº†ã€‚</p>\n</blockquote>\n</blockquote>\n<pre><code class=\"prism language-rust\">      <span class=\"token comment\">// é€šé“ </span>\n        <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>sync<span class=\"token punctuation\">::</span></span>mpsc<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>tz<span class=\"token punctuation\">,</span>rx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token namespace\">mpsc<span class=\"token punctuation\">::</span></span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">let</span> val<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello rx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            tz<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//æ¥æ”¶å‘é€è¿‡æ¥çš„å€¼</span>\n        <span class=\"token keyword\">let</span> reveived <span class=\"token operator\">=</span> rx<span class=\"token punctuation\">.</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got: {}\"</span><span class=\"token punctuation\">,</span>reveived<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<div>\n<div>\n<p>å¯¼å…¥é“é“åº“ use std::sync::mpsc</p>\n<p>mpsc::channel å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„é€šé“ã€‚</p>\n<p> mpsc æ˜¯è‹±æ–‡ multiple producer, single consumer ï¼ˆå¤šä¸ªç”Ÿäº§è€…ï¼Œå•ä¸ªæ¶ˆè´¹è€…ï¼‰çš„ç¼©å†™</p>\n<hr/>\n<div>\n<p> <strong>é€šé“å¯ä»¥æ‹¥æœ‰å¤šä¸ªç”Ÿäº§å†…å®¹çš„å‘é€ç«¯ï¼Œä½†åªèƒ½æ‹¥æœ‰ä¸€ä¸ªæ¶ˆè€—å†…å®¹çš„æ¥æ”¶ç«¯</strong></p>\n<p> å‡½æ•° mpsc::channel ä¼šè¿”å›ä¸€ä¸ªå«æœ‰å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„å…ƒç»„ã€‚ </p>\n</div>\n</div>\n</div>\n<p> æ–°çº¿ç¨‹å¿…é¡»æ‹¥æœ‰é€šé“å‘é€ç«¯çš„æ‰€æœ‰æƒæ‰èƒ½é€šè¿‡é€šé“æ¥å‘é€æ¶ˆæ¯ </p>\n<p> send() æ–¹æ³•æ¥æ¥æ”¶æˆ‘ä»¬æƒ³è¦å‘é€çš„å€¼ï¼Œå®ƒä¼šè¿”å› Result</p>\n<p><mark>æ¥æ”¶æ–¹æ³•ï¼šrecv å’Œ try_recv</mark></p>\n<div>\n<p> recv() æ–¹æ³•ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„æ‰§è¡Œç›´åˆ°æœ‰å€¼è¢«ä¼ å…¥é€šé“ï¼› </p>\n<p> try_recv () æ–¹æ³•ä¸ä¼šé˜»å¡çº¿ç¨‹ï¼Œå®ƒä¼šç«‹å³è¿”å› Result</p>\n</div>\n<h4><a id=\"__4336\"></a>é€šé“å’Œ æ‰€æœ‰æƒè½¬ç§»</h4>\n<pre><code class=\"prism language-rust\">  <span class=\"token comment\">// é€šé“ </span>\n        <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>sync<span class=\"token punctuation\">::</span></span>mpsc<span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>tz<span class=\"token punctuation\">,</span>rx<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token namespace\">mpsc<span class=\"token punctuation\">::</span></span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">let</span> val<span class=\"token operator\">=</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello rx\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            tz<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"val is {}\"</span><span class=\"token punctuation\">,</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//é”™è¯¯ï¼Œval å·²ç»é€äº†ï¼Œæ— æ³•å†ä½¿ç”¨å®ƒ</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//æ¥æ”¶å‘é€è¿‡æ¥çš„å€¼</span>\n        <span class=\"token keyword\">let</span> reveived <span class=\"token operator\">=</span> rx<span class=\"token punctuation\">.</span><span class=\"token function\">recv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got: {}\"</span><span class=\"token punctuation\">,</span>reveived<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<h4><a id=\"_4358\"></a>å‘é€å¤šä¸ªå€¼å¹¶è§‚å¯Ÿæ¥æ”¶è€…çš„ç­‰å¾…è¿‡ç¨‹</h4>\n<pre><code class=\"prism language-rust\">    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token namespace\">mpsc<span class=\"token punctuation\">::</span></span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span>  <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> vals<span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"from\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"the\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"thread\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> vals <span class=\"token punctuation\">{<!-- --></span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">::</span><span class=\"token function\">from_secs</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ç­‰å¾…1ç§’å†å‘é€</span>\n        <span class=\"token punctuation\">}</span>\n\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// å¾ªç¯æ¥æ”¶å‘é€è¿‡æ¥çš„ä¿¡æ¯</span>\n        <span class=\"token comment\">//   let mut rs=  y.recv().unwrap(); //åªæ¥æ”¶ä¸€ä¸ªå°±ç»“æŸäº†</span>\n        <span class=\"token comment\">//   println!(\"Got : {}\", rs);//è¿™ä¸ªä¹Ÿèƒ½è¾¾åˆ°å…¨éƒ¨æ¥æ”¶,å°±æ˜¯éº»çƒ¦</span>\n        <span class=\"token comment\">//    rs=  y.recv().unwrap();</span>\n        <span class=\"token comment\">//   println!(\"Got : {}\", rs);</span>\n        <span class=\"token comment\">//   rs=  y.recv().unwrap();</span>\n        <span class=\"token comment\">//   println!(\"Got : {}\", rs);</span>\n        <span class=\"token comment\">//   rs=  y.recv().unwrap();</span>\n        <span class=\"token comment\">//   println!(\"Got : {}\", rs);</span>\n        <span class=\"token keyword\">for</span> received <span class=\"token keyword\">in</span> y <span class=\"token punctuation\">{<!-- --></span> <span class=\"token comment\">//å¦‚æœå‰é¢å·²ç»è¢«æ¥æ”¶äº†ä¸€äº›ä¿¡æ¯,é‚£ä¹ˆè¿™ä¸ªå¾ªç¯æ¥æ”¶çš„å°±æ˜¯ä»å‰é¢å·²ç»æ¥æ”¶äº†çš„å¼€å§‹</span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got : {}\"</span><span class=\"token punctuation\">,</span>received<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nè¾“å‡ºï¼š\n<span class=\"token class-name\">Got</span> <span class=\"token punctuation\">:</span> hi\n<span class=\"token class-name\">Got</span> <span class=\"token punctuation\">:</span> from\n<span class=\"token class-name\">Got</span> <span class=\"token punctuation\">:</span> the\n<span class=\"token class-name\">Got</span> <span class=\"token punctuation\">:</span> thread\n</code></pre>\n<p>ä¸Šé¢ä»£ç ä¸­ y è§†ä½œè¿­ä»£å™¨ï¼Œéšå¼çš„è°ƒç”¨çš„æ˜¯ revc å‡½æ•°ï¼›</p>\n<h4><a id=\"_4400\"></a>é€šè¿‡å…‹éš†å‘é€è€…åˆ›å»ºå¤šä¸ªç”Ÿäº§è€…</h4>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token namespace\">mpsc<span class=\"token punctuation\">::</span></span><span class=\"token function\">channel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">let</span> tx1<span class=\"token operator\">=</span><span class=\"token namespace\">mpsc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Sender</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n      <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span>  <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> vals<span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"from\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"the\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"thread\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> vals <span class=\"token punctuation\">{<!-- --></span>\n            tx1<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// s.send(val).unwrap();</span>\n            <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">::</span><span class=\"token function\">from_secs</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//ç­‰å¾…1ç§’å†å‘é€</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span> <span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> vals<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span>\n            <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"more\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"messages\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"for\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"you\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">for</span> val <span class=\"token keyword\">in</span> vals<span class=\"token punctuation\">{<!-- --></span>\n            s<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>val<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">::</span><span class=\"token function\">from_secs</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">for</span> received <span class=\"token keyword\">in</span> y <span class=\"token punctuation\">{<!-- --></span> <span class=\"token comment\">//å¦‚æœå‰é¢å·²ç»è¢«æ¥æ”¶äº†ä¸€äº›ä¿¡æ¯,é‚£ä¹ˆè¿™ä¸ªå¾ªç¯æ¥æ”¶çš„å°±æ˜¯ä»å‰é¢å·²ç»æ¥æ”¶äº†çš„å¼€å§‹</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got : {}\"</span><span class=\"token punctuation\">,</span>received<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n   <span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">/*\n\tè¾“å‡ºç»“æœï¼š\n\tGot : hi\nGot : more\nGot : messages\nGot : from\nGot : for\nGot : the\nGot : you\nGot : thread\næ“ä½œ ç³»ç»Ÿä¸åŒå¯èƒ½ç»“æœä¸åŒ\n*/</span>\n</code></pre>\n<h3><a id=\"_4456\"></a>å…±äº«çŠ¶æ€çš„å¹¶å‘</h3>\n<p>é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚</p>\n<p><mark>å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®ç›¸åŒçš„å†…å­˜åœ°å€ã€‚</mark></p>\n<h5><a id=\"Mutex_4464\"></a>äº’æ–¥ä½“ï¼ˆMutexï¼‰</h5>\n<blockquote>\n<p>ä¸€ä¸ªäº’æ–¥ä½“åœ¨ä»»æ„æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹è®¿é—®æ•°æ®ã€‚ï¼ˆè·å–é”ã€åŠ é”ã€è§£é”ï¼‰</p>\n<ul><li>å¿…é¡»åœ¨ä½¿ç”¨æ•°æ®å‰å°è¯•è·å–é”</li><li>å¿…é¡»ä½¿ç”¨å®Œäº’æ–¥ä½“å®ˆæŠ¤çš„æ•°æ®åé‡Šæ”¾é”ï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½ç»§ç»­å®Œæˆè·å–é”çš„æ“ä½œã€‚</li></ul>\n<p>rust ä¸­ï¼Œç”±äºç±»å‹ç³»ç»Ÿå’Œæ‰€æœ‰æƒè§„åˆ™çš„å¸®åŠ©ï¼Œæˆ‘ä»¬å¯ä»¥ä¿è¯è‡ªå·±ä¸ä¼šåœ¨åŠ é”å’Œè§£é”è¿™ä¸¤ä¸ªæ­¥éª¤ä¸­å‡ºç°é”™è¯¯ã€‚</p>\n</blockquote>\n<h5><a id=\"MutexT__4473\"></a>Mutex çš„æ¥å£</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//å•çº¿ç¨‹ç¯å¢ƒä¸‹</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> m<span class=\"token operator\">=</span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num<span class=\"token operator\">=</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//lock æ–¹æ³•è·å–é”</span>\n        <span class=\"token operator\">*</span>num<span class=\"token operator\">=</span><span class=\"token number\">6</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"m = {:?}\"</span><span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>Mutex æ˜¯ä¸€ç§æ™ºèƒ½æŒ‡é’ˆï¼Œå¯¹ lock çš„è°ƒç”¨ä¼šè¿”å›ä¸€ä¸ªåä¸º MutexGuard çš„æ™ºèƒ½æŒ‡é’ˆã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//å¤šçº¿ç¨‹ç¯å¢ƒä¸‹</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">,</span>thread<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> counter<span class=\"token operator\">=</span> <span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> handles<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    \n       <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>  <span class=\"token comment\">//åˆ›å»º 10 ä¸ªçº¿ç¨‹</span>\n        <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>  <span class=\"token comment\">//æŠ¥é”™ç‚¹</span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num<span class=\"token operator\">=</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        handles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> handle <span class=\"token keyword\">in</span> handles <span class=\"token punctuation\">{<!-- --></span>\n        handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Result : {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>âš ï¸ï¼š</p>\n<div>\n<p>ä»¥ä¸Šç¨‹åºæŠ¥é”™</p>\n<p> åŸå› æ˜¯ï¼šcounter è¢«ç§»åŠ¨è¿›äº†é—­åŒ…ä¸­å¹¶åœ¨è°ƒç”¨ lock æ–¹æ³•æ—¶ è¢«æ•è·äº†ã€‚åé¢çš„çº¿ç¨‹æ— æ³•ä½¿ç”¨ã€‚ </p>\n</div>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span> <span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num <span class=\"token operator\">=</span> counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token operator\">*</span>num <span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        handles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">let</span> handle2 <span class=\"token operator\">=</span> <span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">move</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token comment\">//æŠ¥é”™ç‚¹</span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num2<span class=\"token operator\">=</span> counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token operator\">*</span>num2<span class=\"token operator\">+=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        handles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>handle2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>âš ï¸ï¼šç¨‹åºæŠ¥é”™åŸå› ï¼šcounter è¢«ç§»åŠ¨åˆ°äº† handle æŒ‡ä»£çš„çº¿ç¨‹ä¸­ï¼Œè€Œç§»åŠ¨è¡Œä¸ºé˜»æ­¢äº†ç¬¬äºŒä¸ªçº¿ç¨‹ä¸­è°ƒç”¨ lock å†æ¬¡æ•è· counterã€‚</p>\n<h4><a id=\"_4539\"></a>å¤šçº¿ç¨‹ä¸å¤šé‡æ‰€æœ‰æƒ</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">,</span>thread<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">// let counter= Mutex::new(0);</span>\n    <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> handles<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>  <span class=\"token comment\">//åˆ›å»º 10 ä¸ªçº¿ç¨‹</span>\n        <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token class-name\">Rc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token comment\">//æŠ¥é”™</span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num<span class=\"token operator\">=</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        handles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> handle <span class=\"token keyword\">in</span> handles <span class=\"token punctuation\">{<!-- --></span>\n        handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Result : {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>âš ï¸:æŠ¥é”™åŸå› </p>\n<pre><code class=\"prism language-rust\">error<span class=\"token punctuation\">[</span><span class=\"token constant\">E0277</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span> `<span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span>` cannot be sent between threads safely\n   <span class=\"token operator\">-</span><span class=\"token punctuation\">-&gt;</span> main<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">:</span><span class=\"token number\">38</span><span class=\"token punctuation\">:</span><span class=\"token number\">20</span>\n    <span class=\"token operator\">|</span>\n<span class=\"token number\">38</span>  <span class=\"token operator\">|</span>           <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token operator\">|</span>  <span class=\"token constant\">____________________</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span>_<span class=\"token operator\">-</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>                    <span class=\"token operator\">|</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>                    `<span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span>` cannot be sent between threads safely\n<span class=\"token number\">39</span>  <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>             <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num<span class=\"token operator\">=</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token number\">40</span>  <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span><span class=\"token constant\">_________</span><span class=\"token operator\">-</span> within this `<span class=\"token punctuation\">[</span>closure<span class=\"token operator\">@</span>main<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">:</span><span class=\"token number\">38</span><span class=\"token punctuation\">:</span><span class=\"token number\">34</span><span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>`\n    <span class=\"token operator\">|</span>\n    <span class=\"token operator\">=</span> help<span class=\"token punctuation\">:</span> within `<span class=\"token punctuation\">[</span>closure<span class=\"token operator\">@</span>main<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">:</span><span class=\"token number\">38</span><span class=\"token punctuation\">:</span><span class=\"token number\">34</span><span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>`<span class=\"token punctuation\">,</span> the <span class=\"token keyword\">trait</span> `<span class=\"token class-name\">Send</span>` is not implemented <span class=\"token keyword\">for</span> `<span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span>`\n    <span class=\"token operator\">=</span> note<span class=\"token punctuation\">:</span> required because it appears within the <span class=\"token keyword\">type</span> `<span class=\"token punctuation\">[</span>closure<span class=\"token operator\">@</span>main<span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">:</span><span class=\"token number\">38</span><span class=\"token punctuation\">:</span><span class=\"token number\">34</span><span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>`\nnote<span class=\"token punctuation\">:</span> required by a bound <span class=\"token keyword\">in</span> `spawn`\n   <span class=\"token operator\">-</span><span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">C</span><span class=\"token punctuation\">:</span>\\<span class=\"token class-name\">Users</span>\\sysy\\<span class=\"token punctuation\">.</span>rustup\\toolchains\\stable<span class=\"token operator\">-</span>x86_64<span class=\"token operator\">-</span>pc<span class=\"token operator\">-</span>windows<span class=\"token operator\">-</span>msvc\\lib<span class=\"token operator\">/</span>rustlib<span class=\"token operator\">/</span>src<span class=\"token operator\">/</span>rust\\library\\std\\src\\thread\\<span class=\"token keyword\">mod</span><span class=\"token punctuation\">.</span>rs<span class=\"token punctuation\">:</span><span class=\"token number\">621</span><span class=\"token punctuation\">:</span><span class=\"token number\">8</span>\n    <span class=\"token operator\">|</span>\n<span class=\"token number\">621</span> <span class=\"token operator\">|</span>     <span class=\"token class-name\">F</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span> <span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token punctuation\">,</span>\n    <span class=\"token operator\">|</span>        <span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span><span class=\"token operator\">^</span> required by this bound <span class=\"token keyword\">in</span> `spawn`\n\nerror<span class=\"token punctuation\">:</span> aborting due to previous error\n\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n`<span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span>` cannot be sent between threads safely è¿™æ„å‘³ç€æˆ‘ä»¬æ–°åˆ›å»ºçš„ <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token namespace\">std<span class=\"token punctuation\">::</span>sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span> ç±»å‹æ— æ³•å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´ä¼ é€’ã€‚\n\nthe <span class=\"token keyword\">trait</span> `<span class=\"token class-name\">Send</span>` is not implemented <span class=\"token keyword\">for</span> `<span class=\"token class-name\">Rc</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mutex</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;&gt;</span>` è¿™ä¸ªæ˜¯è¯´æ˜è¿™ä¸ªç±»å‹ä¸æ»¡è¶³ <span class=\"token keyword\">trait</span> çº¦æŸ <span class=\"token class-name\">Send</span><span class=\"token punctuation\">.</span>\n</code></pre>\n<p>Rc åœ¨è·¨çº¿ç¨‹ä½¿ç”¨æ—¶å¹¶ä¸å®‰å…¨ã€‚</p>\n<h4><a id=\"_ArcT_4601\"></a>åŸå­å¼•ç”¨è®¡æ•° Arc</h4>\n<blockquote>\n<p>Arc ç±»å‹ï¼šå®ƒæ‹¥æœ‰ç±»ä¼¼äº Rc çš„è¡Œä¸ºï¼Œåˆä¿è¯äº†è‡ªå·±å¯ä»¥è¢«å®‰å…¨åœ°ç”¨äºå¹¶å‘åœºæ™¯ã€‚ A ä»£è¡¨åŸå­ï¼ˆatomicï¼‰è¡¨æ˜è‡ªå·±æ˜¯ä¸€ä¸ªåŸå­å¼•ç”¨è®¡æ•°</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span><span class=\"token punctuation\">{<!-- --></span><span class=\"token namespace\">sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">,</span>thread<span class=\"token punctuation\">,</span><span class=\"token namespace\">sync<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Arc</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>rc<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Rc</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">// let counter= Mutex::new(0);</span>\n    <span class=\"token comment\">// let counter = Rc::new(Mutex::new(0));</span>\n    <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token class-name\">Arc</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Mutex</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//å®ƒæœ¬èº«ä¸å¯å˜</span>\n    <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> handles<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token punctuation\">..</span><span class=\"token number\">10</span> <span class=\"token punctuation\">{<!-- --></span>  <span class=\"token comment\">//åˆ›å»º 10 ä¸ªçº¿ç¨‹</span>\n        <span class=\"token comment\">// let counter = Rc::clone(&amp;counter);</span>\n        <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token class-name\">Arc</span><span class=\"token punctuation\">::</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>counter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> handle<span class=\"token operator\">=</span><span class=\"token namespace\">thread<span class=\"token punctuation\">::</span></span><span class=\"token function\">spawn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">move</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num<span class=\"token operator\">=</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">//æˆ‘ä»¬å¯ä»¥è·å–å®ƒå†…éƒ¨å€¼çš„å¯å˜å¼•ç”¨</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        handles<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>handle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">for</span> handle <span class=\"token keyword\">in</span> handles <span class=\"token punctuation\">{<!-- --></span>\n        handle<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Result : {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>counter<span class=\"token punctuation\">.</span><span class=\"token function\">lock</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">unwrap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœ ï¼š Result  : 10</span>\n</code></pre>\n<p>â“‚ï¸ ç»ˆäºæŠŠè¿™ä¸ªå¤šçº¿ç¨‹ç¨‹åºå†™æˆåŠŸäº†ï¼</p>\n<h4><a id=\"RefCellTRcT__MutexTArcT__4638\"></a>RefCell/Rc å’Œ Mutex/Arc ä¹‹é—´çš„ç›¸ä¼¼æ€§</h4>\n<div>\n<p> Mutex ä¸ Cell ç³»åˆ—ç±»å‹æœ‰ç€ç›¸ä¼¼çš„åŠŸèƒ½ï¼ŒåŒæ ·æä¾›äº†å†…éƒ¨å¯å˜æ€§ã€‚ </p>\n<p> Rust å¹¶ä¸èƒ½ä½¿ä½ å®Œå…¨é¿å… Mutex è¿‡ç¨‹ä¸­æ‰€æœ‰çš„é€»è¾‘é”™è¯¯ã€‚ä½¿ç”¨ Mutex ä¹Ÿä¼šæœ‰äº§ç”Ÿæ­»é”ï¼ˆdeadlock) çš„é£é™©ã€‚ </p>\n<p> å½“æŸä¸ªæ“ä½œéœ€è¦åŒæ—¶é”ä½ä¸¤ä¸ªèµ„æºï¼Œè€Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«æŒæœ‰å…¶ä¸­ä¸€ä¸ªé”å¹¶ç›¸äº’è¯·æ±‚å¦å¤–ä¸€ä¸ªé”æ—¶ï¼Œä¸¤ä¸ªçº¿ç¨‹å°±ä¼šé™·å…¥æ— ç©·å°½çš„ç­‰å¾…è¿‡ç¨‹ä¸­ </p>\n</div>\n<h4><a id=\"_Sync_trait__Send_trait__4654\"></a>ä½¿ç”¨ Sync trait å’Œ Send trait å¯¹å¹¶å‘è¿›è¡Œæ‰©å±•</h4>\n<blockquote>\n<p>rust è¯­è¨€æœ¬èº«å†…ç½®çš„å¹¶å‘ç‰¹æ€§éå¸¸å°‘ã€‚</p>\n<p>std::marker æ¨¡å—å†…çš„ Sync trait ä¸ Send trait</p>\n</blockquote>\n<ul><li><mark>å…è®¸çº¿ç¨‹é—´è½¬ç§»æ‰€æœ‰æƒçš„ Send trait</mark></li></ul>\n<div>\n<p> åªæœ‰å®ç°äº† Send trait çš„ç±»å‹æ‰å¯ä»¥å®‰å…¨åœ°çº¿ç¨‹é—´è½¬ç§»æ‰€æœ‰æƒã€‚é™¤äº† Rc ç­‰æå°‘æ•°çš„ç±»å‹ï¼Œå‡ ä¹æ‰€æœ‰çš„ Rust ç±»å‹éƒ½å®ç°äº† Send triat ã€‚ å› æ­¤ï¼ŒRc åªè¢«è®¾è®¡åœ¨å•çº¿ç¨‹åœºæ™¯ä¸­ä½¿ç”¨ï¼Œä¹Ÿæ— é¡»ä¸ºçº¿ç¨‹å®‰å…¨ä»˜å‡ºé¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚ä»»ä½•å®Œå…¨ç”± Send ç±»å‹ç»„åˆæˆçš„å¤åˆç±»å‹éƒ½ä¼šè¢«è‡ªåŠ¨æ ‡è®°ä¸º Sendã€‚ </p>\n</div>\n<ul><li><mark>å…è®¸å¤šçº¿ç¨‹åŒæ—¶è®¿é—®çš„ Sync trait</mark></li></ul>\n<div>\n<p> åªæœ‰å®ç°äº† Sync trait çš„ç±»å‹æ‰å¯ä»¥å®‰å…¨åœ°è¢«å¤šä¸ªçº¿ç¨‹å¼•ç”¨ã€‚ å¯¹äºä»»ä½•ç±»å‹ Tï¼Œå¦‚æœ &amp;T æ»¡è¶³çº¦æŸ Send ï¼Œ é‚£ä¹ˆ T å°±æ˜¯æ»¡è¶³ Sync çš„ã€‚æ‰€æœ‰åŸç”Ÿç±»å‹éƒ½æ»¡è¶³ Sync çº¦æŸã€‚Rc ä¹ŸåŒæ ·ä¸æ»¡è¶³ Sync çš„ç±»å‹ã€‚ </p>\n</div>\n<h2><a id=\"Rust__4679\"></a>Rust é¢å‘å¯¹è±¡ç¼–ç¨‹ç‰¹æ€§</h2>\n<blockquote>\n<p>é¢å‘å¯¹è±¡çš„ç¨‹åºç”±å¯¹è±¡ç»„æˆã€‚å¯¹è±¡åŒ…è£…äº†æ•°æ®å’Œæ“ä½œè¿™äº›æ•°æ®çš„æµç¨‹ã€‚è¿™äº›æµç¨‹ç§°ä¸ºæ–¹æ³•æˆ–æ“ä½œã€‚</p>\n<p>rust ä¸­é»˜è®¤çš„ trait æ–¹æ³•è¿›è¡Œä»£ç çš„å…±äº«</p>\n<p>å¯ä»¥åœ¨ Rust ä¸­ä½¿ç”¨æ³›å‹æ¥æ„å»ºä¸åŒç±»å‹çš„æŠ½è±¡ï¼Œå¹¶ä½¿ç”¨ trait çº¦æŸæ¥å†³å®šç±»å‹å¿…é¡»æä¾›çš„å…·ä½“ç‰¹æ€§ã€‚è¿™æŠ€æœ¯ç§°ä¸º é™å®šå‚æ•°åŒ–å¤šæ€ã€‚</p>\n</blockquote>\n<h1><a id=\"_4689\"></a>æ¨¡å¼åŒ¹é…</h1>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">match</span> åˆ†æ”¯ <span class=\"token punctuation\">{<!-- --></span>\n    æ¨¡å¼ <span class=\"token operator\">=&gt;</span> è¡¨è¾¾å¼<span class=\"token punctuation\">,</span>\n    æ¨¡å¼ <span class=\"token operator\">=&gt;</span> è¡¨è¾¾å¼<span class=\"token punctuation\">,</span>\n    æ¨¡å¼ <span class=\"token operator\">=&gt;</span> è¡¨è¾¾å¼<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">...</span>\t\t\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>è®°ä½ match è¡¨è¾¾å¼å¿…é¡»ç©·å°½åŒ¹é…å€¼çš„æ‰€æœ‰å¯èƒ½æ€§ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æœ€åçš„ åˆ†æ”¯å¤„ä½¿ç”¨å…¨åŒ¹é…æ¨¡å¼ã€‚ä½¿ç”¨ç‰¹æ®Šçš„ä¸‹åˆ’çº¿ _å¯ä»¥ç”¨æ¥åŒ¹é…æ‰€æœ‰å¯èƒ½çš„å€¼ã€‚</mark></p>\n<h5><a id=\"if_let__4702\"></a>if let æ¡ä»¶è¡¨è¾¾å¼</h5>\n<blockquote>\n<p>æˆ‘ä»¬å¯ä»¥æ··åˆä½¿ç”¨ if let ã€ else if åŠ else if let è¡¨è¾¾å¼æ¥è¿›è¡ŒåŒ¹é…ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">\n <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> favorite_color <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">None</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> is_tuesday <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> age<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Result</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">u8</span><span class=\"token punctuation\">,</span>_<span class=\"token operator\">&gt;=</span><span class=\"token string\">\"34\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>favorite_color <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Using  your favorite  color , {} , as the background \"</span><span class=\"token punctuation\">,</span>\n    color\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> is_tuesday<span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tuesday  is green  day!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Ok</span><span class=\"token punctuation\">(</span>age<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> age <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> age<span class=\"token operator\">&gt;</span><span class=\"token number\">30</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Using  purple  as the  background color\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Using  orange  as the  background  color\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Using  blue  as the  bakcground  color \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// è¾“å‡ºç»“æœä¸ºï¼š </span>\n<span class=\"token class-name\">Using</span>  purple  <span class=\"token keyword\">as</span> the  background color\n</code></pre>\n<h5><a id=\"while__let__4737\"></a>while let æ¡ä»¶å¾ªç¯</h5>\n<blockquote>\n<p>å®ƒå’Œ if let çš„æ„é€ ååˆ†ç±»ä¼¼ï¼Œä½†å®ƒä¼šåå¤æ‰§è¡ŒåŒä¸€ä¸ªæ¨¡å¼åŒ¹é…ç›´åˆ°å‡ºç°å¤±è´¥çš„æƒ…å½¢ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> stack<span class=\"token operator\">=</span> <span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    stack<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> stack<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>top<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä¸Šé¢è¿™ä¸ª while let ï¼š åªè¦ stack.pop() è¿”å›çš„å€¼æ˜¯ Some å˜ä½“ï¼Œé‚£ä¹ˆè¿™ä¸ªå¾ªç¯å°±ä¼šä¸æ–­çš„æ‰“å°</span>\n\n\n</code></pre>\n<h4><a id=\"for__4757\"></a>for å¾ªç¯</h4>\n<pre><code class=\"prism language-rust\"><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==============================================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> v<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span><span class=\"token char\">'b'</span><span class=\"token punctuation\">,</span><span class=\"token char\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>index <span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> v<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{} is  at index {}\"</span><span class=\"token punctuation\">,</span>value<span class=\"token punctuation\">,</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>for è¯­å¥ä¸­ç´§éšå…³é”®å­— for çš„å€¼å°±æ˜¯ä¸€ä¸ªæ¨¡å¼ã€‚</p>\n<p><strong>enumerate æ–¹æ³•å®ƒä¼šåœ¨æ¯æ¬¡ è¿­ä»£è¿‡ç¨‹ä¸­ç”Ÿæˆä¸€ä¸ªåŒ…å«å€¼æœ¬èº«åŠå€¼ç´¢å¼•çš„å…ƒç»„ã€‚</strong></p>\n<h5><a id=\"let__4773\"></a>let è¯­å¥</h5>\n<pre><code class=\"prism language-RUST\">let x = 5;\nlet PATTERN=EXPRESSION;\n//ä¸Šé¢xå°±æ˜¯æ•´ä¸ªæ¨¡å¼æœ¬èº«ï¼Œå®é™…ä¸Šæ„å‘³ç€â€œæ— è®ºè¡¨è¾¾å¼ä¼šè¿”å›ä»€ä¹ˆæ ·çš„å€¼ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å°†å®ƒç»‘å®šåˆ°å˜é‡ x ä¸­\n\nlet (x,y,x)=(1,2,2);\n//ä½¿ç”¨æ¨¡å¼æ¥è§£æ„å…ƒç»„å¹¶ä¸€æ¬¡æ€§åˆ›å»ºå‡º 3 ä¸ªå˜é‡\n//ä¸Šé¢çš„æ¨¡å¼è¦åŒ¹é…ï¼Œå¦åˆ™ä¼šæŠ¥é”™\n\n</code></pre>\n<h5><a id=\"_4788\"></a>å‡½æ•°å‚æ•°</h5>\n<blockquote>\n<p>å‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯æ¨¡å¼ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">foo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//ç­¾åä¸­çš„ x éƒ¨åˆ†å°±æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">print_sy</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Current location: ({} , {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> point <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">print_sy</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>point<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"_4812\"></a>å¯å¤±è´¥æ€§ï¼šæ¨¡å¼æ˜¯å¦ä¼šåŒ¹é…å¤±è´¥</h2>\n<blockquote>\n<p>æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸å¯å¤±è´¥å’Œå¯å¤±è´¥ä¸¤ç§ç±»å‹ã€‚</p>\n<p>ä¸å¯å¤±è´¥çš„æ¨¡å¼èƒ½å¤ŸåŒ¹é…ä»»ä½•ä¼ å…¥çš„å€¼ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//x å°±æ˜¯ä¸€ä¸ªä¸å¯å¤±è´¥çš„æ¨¡å¼åŒ¹é…ï¼›å®ƒèƒ½å¤ŸåŒ¹é…å³ä¾§è¡¨è¾¾å¼æ‰€æœ‰å¯èƒ½çš„è¿”å›å€¼</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>a<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//Some(x) å°±æ˜¯ä¸€ä¸ªå¯å¤±è´¥æ¨¡å¼ï¼Œå¦‚æœå€¼ä¸º None å°±ä¼šåŒ¹é…å¤±è´¥</span>\n</code></pre>\n<p><mark>å‡½æ•°å‚æ•°ã€let è¯­å¥ã€for å¾ªç¯åªæ¥æ”¶ä¸å¯å¤±è´¥æ¨¡å¼ï¼›if let å’Œ while let è¡¨è¾¾å¼åˆ™åªæ¥æ”¶å¯å¤±è´¥æ¨¡å¼</mark></p>\n<p>ä¸èƒ½åœ¨ä¸å¯å¤±è´¥æ¨¡å¼ä¸­ä½¿ç”¨å¯å¤±è´¥æ¨¡å¼</p>\n</blockquote>\n<h3><a id=\"_4830\"></a>æ¨¡å¼è¯­æ³•</h3>\n<h5><a id=\"_4832\"></a>åŒ¹é…å­—é¢é‡</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"==============================================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> v<span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span><span class=\"token char\">'b'</span><span class=\"token punctuation\">,</span><span class=\"token char\">'c'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>index <span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> v<span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{} is  at index {}\"</span><span class=\"token punctuation\">,</span>value<span class=\"token punctuation\">,</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h5><a id=\"_4844\"></a>åŒ¹é…å‘½åå˜é‡</h5>\n<pre><code class=\"prism language-rust\">\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> x<span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got 50\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">)</span>  <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Matched,y = {:?}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//åœ¨è¿™ä¸ªåŒ¹é…åˆ†æ”¯ä¸­çš„æ¨¡å¼å¼•å…¥äº†æ–°çš„å˜é‡ y ï¼Œå®ƒä¼šåŒ¹é… Some å˜ä½“ä¸­æºå¸¦çš„ä»»æ„å€¼ã€‚æ‰€ä»¥è¿™é‡Œçš„ y æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡</span>\n    _        <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Default case , x={:?}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"at the end : x = {:?}, y= {:?} \"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœ</span>\n<span class=\"token class-name\">Matched</span><span class=\"token punctuation\">,</span>y <span class=\"token operator\">=</span> <span class=\"token number\">5</span>\nat the end <span class=\"token punctuation\">:</span> x <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n</code></pre>\n<p><strong>å‘½åå˜é‡æ˜¯ä¸€ç§å¯ä»¥åŒ¹é…ä»»ä½•å€¼çš„ä¸å¯å¤±è´¥æ¨¡å¼</strong></p>\n<h5><a id=\"_4867\"></a>å¤šé‡æ¨¡å¼</h5>\n<blockquote>\n<p>å¯ä»¥åœ¨ match è¡¨è¾¾å¼çš„åˆ†æ”¯åŒ¹é…ä¸­ä½¿ç”¨ | è¡¨ç¤º æˆ–çš„æ„æ€ï¼Œå®ƒå¯ä»¥è¢«ç”¨æ¥ä¸€æ¬¡æ€§åŒ¹é…å¤šä¸ªæ¨¡å¼ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//  å¤šé‡æ¨¡å¼</span>\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"=============================\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> x <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">1</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one or two\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     <span class=\"token number\">3</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"three\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n     _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"anything\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"___4883\"></a>ä½¿ç”¨ â€¦ æ¥åŒ¹é…åŒºé—´</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// åŒ¹é…åŒºé—´</span>\n<span class=\"token keyword\">let</span> x<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> x <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">1</span><span class=\"token punctuation\">..=</span><span class=\"token number\">5</span> <span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"one through  five\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//è¿™å¥ä»£ç ä¹Ÿæ¢æˆ : 1 | 2 | 3 | 4 | 5</span>\n    <span class=\"token comment\">// 6...9 =&gt;println!(\"6 åˆ°  9\"),  è¿™é‡Œç¼–è¯‘å™¨è¯´ä¸å»ºè®®ä½¿ç”¨ èŒƒå›´æ¨¡å¼</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"something else\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœï¼š</span>\none or two\none through  five\n</code></pre>\n<p><strong>èŒƒå›´æ¨¡å¼åªè¢«å…è®¸ä½¿ç”¨æ•°å€¼æˆ– char å€¼æ¥è¿›è¡Œå®šä¹‰ï¼›</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token char\">'c'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> x <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token char\">'a'</span> <span class=\"token punctuation\">..=</span> <span class=\"token char\">'j'</span>  <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"early  ASCLL letter\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token char\">'k'</span> <span class=\"token punctuation\">..=</span> <span class=\"token char\">'z'</span>  <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"late  ASCLL letter \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"something else\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h4><a id=\"_4912\"></a>ä½¿ç”¨è§£æ„æ¥åˆ†è§£å€¼</h4>\n<blockquote>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å¼æ¥åˆ†è§£ç»“æ„ä½“ã€æšä¸¾ã€å…ƒç»„æˆ–å¼•ç”¨</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> p<span class=\"token operator\">=</span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span>a<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span>b<span class=\"token punctuation\">}</span><span class=\"token operator\">=</span>p<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ç®€ä¾¿å†™æ³•</span>\n<span class=\"token comment\">//let Point{x:x,y:y}=p;</span>\n<span class=\"token comment\">//ä¸Šé¢è¿™æ¡çš„ç®€ä¾¿å†™æ³•</span>\n<span class=\"token keyword\">let</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span><span class=\"token operator\">=</span>p<span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token macro property\">assert_eq!</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> p <span class=\"token operator\">=</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token number\">7</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> p<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"On the x axis  at {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"On the y axis at{}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span>  <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"On neither axis :({}{})\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"_4944\"></a>è§£æ„æšä¸¾</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Message</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Quit</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Move</span> <span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> msg<span class=\"token operator\">=</span><span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">160</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span>  msg <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Quit</span> <span class=\"token operator\">=&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The Quit  variant has no  data to  destructure.\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Move</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Move in the x direction {} and in the y direction {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Write</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span><span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Text message :{} \"</span><span class=\"token punctuation\">,</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\n        Change the color to red {}, green {} ,and blue {}\"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœï¼š</span>\n  <span class=\"token class-name\">Change</span> the color to red <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> green <span class=\"token number\">160</span> <span class=\"token punctuation\">,</span>and blue <span class=\"token number\">255</span>\n</code></pre>\n<h5><a id=\"_4974\"></a>è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾</h5>\n<blockquote>\n<p>åŒ¹é…è¯­æ³•å¯ä»¥è¢«ç”¨äºåµŒå¥—çš„ç»“æ„ä¸­ï¼ï¼ï¼</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">\n\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Message</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Quit</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Move</span> <span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Write</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Color</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Rgb</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Hsv</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ä»¥ä¸‹æ˜¯ä¸»å‡½æ•°éƒ¨åˆ†</span>\n\n<span class=\"token keyword\">let</span> msg<span class=\"token operator\">=</span><span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hsv</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">160</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> msg<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Rgb</span><span class=\"token punctuation\">(</span>r<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Change  the color  red {} , green{} , and blue {}\"</span><span class=\"token punctuation\">,</span>r<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">ChangeColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Color</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hsv</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> \n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Chang the color to hue {} , saturation {} , and value {}\"</span><span class=\"token punctuation\">,</span>h<span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     _ <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"_5012\"></a>è§£æ„ç»“æ„ä½“å’Œå…ƒç»„</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>feet<span class=\"token punctuation\">,</span> inches<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"_5020\"></a>å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼</h5>\n<h6><a id=\"_____5022\"></a>ä½¿ç”¨ _ å¿½ç•¥æ•´ä¸ªå€¼</h6>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">//åœ¨å‡½æ•°ç­¾åä¸­ä½œç”¨ _</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">foo</span> <span class=\"token punctuation\">(</span> _<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> y <span class=\"token punctuation\">:</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This  code only  uses the y parameter : {}\"</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢ä»£ç çš„å‡½æ•°ç­¾åä¸­ï¼Œè™½ç„¶æ˜¯ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œä¼šå¿½ç•¥åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ï¼ï¼ï¼</p>\n<h6><a id=\"____5034\"></a>ä½¿ç”¨åµŒå¥—çš„ _ å¿½ç•¥å€¼çš„æŸäº›éƒ¨åˆ†</h6>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> setting_value <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> new_setting_value <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">match</span> <span class=\"token punctuation\">(</span>setting_value<span class=\"token punctuation\">,</span>new_setting_value<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token punctuation\">(</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Can't  overweite an existing  customized value\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        _ <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n            setting_value<span class=\"token operator\">=</span>new_setting_value<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Setting is {:?}\"</span><span class=\"token punctuation\">,</span>setting_value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœï¼š</span>\n<span class=\"token class-name\">Can</span><span class=\"token lifetime-annotation symbol\">'t</span>  overweite an existing  customized value\n<span class=\"token class-name\">Setting</span> is <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>å½“æˆ‘ä»¬ä¸éœ€è¦ Some ä¸­çš„å€¼æ—¶ï¼Œåœ¨æ¨¡å¼ä¸­ä½¿ç”¨ä¸‹åˆ’çº¿æ¥åŒ¹é… Some å˜ä½“</p>\n<pre><code class=\"prism language-rust\">\n    <span class=\"token keyword\">let</span>  numbers<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">match</span> numbers <span class=\"token punctuation\">{<!-- --></span>\n\n        <span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">,</span> third <span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">,</span> fifth <span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\n            Some numbers: {} {} {} \"</span><span class=\"token punctuation\">,</span>first<span class=\"token punctuation\">,</span>third<span class=\"token punctuation\">,</span>fifth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">//è¾“å‡ºç»“æœï¼š</span>\n<span class=\"token number\">2</span>  <span class=\"token number\">8</span> <span class=\"token number\">32</span>  \n\n</code></pre>\n<h6><a id=\"____5075\"></a>é€šè¿‡ä»¥ _ å¼€å¤´çš„åç§°æ¥å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡</h6>\n<pre><code class=\"prism language-rust\">    <span class=\"token keyword\">let</span> _x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¦‚æœæ²¡æœ‰ä½¿ç”¨å˜é‡ï¼Œä¸ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå°±ä¼šæœ‰è­¦å‘Š</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æœ‰è­¦å‘Šï¼Œå˜é‡æœªè¢«ä½¿ç”¨</span>\n</code></pre>\n<blockquote>\n<p>ä½¿ç”¨ä¸‹ç”»çº¿å¼€å¤´çš„å˜é‡åä¸ä»…ä»…ä½¿ç”¨_ ä½œä¸ºå˜é‡åå­˜åœ¨ä¸€ä¸ªç»†å¾®çš„å·®åˆ«ï¼š</p>\n<p>_x è¯­æ³•ä»ç„¶å°†å€¼ç»‘å®šåˆ°äº†å˜é‡ä¸Šï¼Œè€Œ _ åˆ™å®Œå…¨ä¸ä¼šè¿›è¡Œç»‘å®šã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> _x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¦‚æœæ²¡æœ‰ä½¿ç”¨å˜é‡ï¼Œä¸ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå°±ä¼šæœ‰è­¦å‘Š</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æœ‰è­¦å‘Šï¼Œå˜é‡æœªè¢«ä½¿ç”¨</span>\n\n    <span class=\"token keyword\">let</span> s <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>_s<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> s <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"found a string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŠ¥é”™ï¼šå› ä¸ºä»¥ä¸‹ç”»çº¿å¼€å¤´çš„æœªä½¿ç”¨å˜é‡ä»ç„¶ç»‘å®šäº†å€¼ï¼Œä¼šå¯¼è‡´å€¼çš„æ‰€æœ‰æƒå‘ç”Ÿè½¬ç§»</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n\n    <span class=\"token keyword\">let</span> _x <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//å¦‚æœæ²¡æœ‰ä½¿ç”¨å˜é‡ï¼Œä¸ç”¨ä¸‹åˆ’çº¿å¼€å¤´ï¼Œå°±ä¼šæœ‰è­¦å‘Š</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æœ‰è­¦å‘Šï¼Œå˜é‡æœªè¢«ä½¿ç”¨</span>\n\n    <span class=\"token keyword\">let</span> s <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token keyword\">let</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> s <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"found a string\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æ­£ç¡®ï¼š å› ä¸ºä¸‹åˆ’çº¿ä¸ä¼šè½¬ç§»å€¼çš„æ‰€æœ‰æƒ </span>\n</code></pre>\n<p><mark>ä¸‹åˆ’çº¿å¼€å¤´çš„å˜é‡ä¼šè½¬ç§»å€¼çš„æ‰€æœ‰æƒï¼Œè€Œçº¯ä¸‹åˆ’çº¿ä¸ä¼šè½¬ç§»å€¼çš„æ‰€æœ‰æƒ</mark></p>\n<h5><a id=\"____5112\"></a>ä½¿ç”¨ â€¦ å¿½ç•¥å€¼çš„å‰©ä½™éƒ¨åˆ†</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Poing</span> <span class=\"token punctuation\">{<!-- --></span>\n    x <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    y <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    z <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">let</span> origin <span class=\"token operator\">=</span> <span class=\"token class-name\">Poing</span> <span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> origin<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//åœ¨è¿™é‡Œæ¨¡å¼åŒ¹é…ä¸­æˆ‘ä»¬å¿½ç•¥äº† y å’Œ z çš„å€¼ </span>\n    <span class=\"token class-name\">Poing</span> <span class=\"token punctuation\">{<!-- --></span>x <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">..</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x is {} \"</span> <span class=\"token punctuation\">,</span>x <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>. . è¯­æ³•ä¼šè‡ªåŠ¨å±•å¼€å¹¶å¡«å……ä»»æ„å¤šä¸ªæ‰€éœ€è¦çš„å€¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> numberss<span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span><span class=\"token number\">32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> numberss <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">..</span> <span class=\"token punctuation\">,</span> last <span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\n        Some numberss : {} , {}\"</span><span class=\"token punctuation\">,</span>first<span class=\"token punctuation\">,</span>last<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¾“å‡º 2 32 </span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä»¥ä¸Šä»£ç åªéœ€è¦åŒ¹é…ç¬¬ä¸€ä¸ªå€¼å’Œæœ€åä¸€ä¸ªå€¼ï¼Œå¿½ç•¥ä¸­é—´çš„æ‰€æœ‰å€¼</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\n<span class=\"token comment\">//ä¸å¯ä»¥åƒä¸‹é¢è¿™æ ·ä¸ç¡®å®š </span>\n\n<span class=\"token punctuation\">(</span><span class=\"token punctuation\">..</span> <span class=\"token punctuation\">,</span> second <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">..</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"_5151\"></a>ä½¿ç”¨åŒ¹é…å®ˆå«æ·»åŠ é¢å¤–æ¡ä»¶</h5>\n<blockquote>\n<p>åŒ¹é…å®ˆå«ï¼šå°±æ˜¯é™„åŠ åœ¨ match åˆ†æ”¯æ¨¡å¼åçš„ if æ¡ä»¶è¯­å¥ï¼Œåˆ†æ”¯ä¸­çš„æ¨¡å¼åªæœ‰åœ¨è¿™ä¸ªæ¡ä»¶è¢«åŒæ—¶æ»¡è¶³æ—¶æ‰èƒ½åŒ¹é…æˆåŠŸã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> num <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> num <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> x<span class=\"token operator\">&lt;</span><span class=\"token number\">5</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"less than five : {} \"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span>  <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">None</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//å°±æ˜¯æ·»åŠ ä¸€ä¸ªæ¡ä»¶æ¥åŒ¹é…</span>\nåŒ¹é…å®ˆå«ï¼šå°±æ˜¯é™„åŠ åœ¨ <span class=\"token keyword\">match</span> åˆ†æ”¯æ¨¡å¼åçš„ <span class=\"token keyword\">if</span> æ¡ä»¶è¯­å¥ï¼Œåˆ†æ”¯ä¸­çš„æ¨¡å¼åªæœ‰åœ¨è¿™ä¸ªæ¡ä»¶è¢«åŒæ—¶æ»¡è¶³æ—¶æ‰èƒ½åŒ¹é…æˆåŠŸã€‚\n</code></pre>\n<pre><code class=\"prism language-rust\">\n<span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> x <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Got 50\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> n<span class=\"token operator\">==</span>y <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Matched, n = {:?}\"</span><span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//è¿™é‡Œå¹¶æ²¡æœ‰å¼•å…¥æ–°çš„å˜é‡ y ,è€Œæ˜¯åˆé€‚å¤–éƒ¨çš„å˜é‡ y ; ä½¿ç”¨ Some(n)  æ¥é¿å…è¦†ç›– å¤–éƒ¨å˜é‡ y</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Default case , x = {:?} \"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"at the end : x= {:?}, y={:?}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœï¼š</span>\n<span class=\"token class-name\">Default</span> case <span class=\"token punctuation\">,</span> x <span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\nat the end <span class=\"token punctuation\">:</span> x<span class=\"token operator\">=</span> <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span><span class=\"token number\">10</span>\n\n<span class=\"token comment\">//ä¸Šé¢ä»£ç ä¸­çš„  if  n==y  ä¸æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå¼•å…¥æ–°çš„å˜é‡ï¼Œæ‰€ä»¥å°±ä¼šä½¿ç”¨å¤–éƒ¨å˜é‡ä¸­çš„  y</span>\n</code></pre>\n<p>æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨åŒ¹é…å®ˆå«ä¸­ä½¿ç”¨ æˆ–è¿ç®—ç¬¦ | æ¥æŒ‡å®šå¤šé‡æ¨¡å¼</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> y <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">match</span> x <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token number\">4</span> <span class=\"token operator\">|</span> <span class=\"token number\">5</span> <span class=\"token operator\">|</span> <span class=\"token number\">6</span> <span class=\"token keyword\">if</span> y <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"yes\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    _ <span class=\"token operator\">=&gt;</span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"no\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸Šé¢åŒ¹é…ä¼˜å…ˆçº§æ˜¯å…ˆåŒ¹é…æ•°å­—å†åŒ¹é… if è¡¨è¾¾å¼</span>\n\n</code></pre>\n<h5><a id=\"_5203\"></a>@ç»‘å®š</h5>\n<blockquote>\n<p>@ è¿ç®—ç¬¦å…è®¸æˆ‘ä»¬åœ¨æµ‹è¯•ä¸€ä¸ªå€¼æ˜¯å¦åŒ¹é…æ¨¡å¼çš„åŒæ—¶åˆ›å»ºå­˜å‚¨è¯¥å€¼çš„å˜é‡ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Message1</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Hello</span><span class=\"token punctuation\">{<!-- --></span>id<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">let</span> msg <span class=\"token operator\">=</span> <span class=\"token class-name\">Message1</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">{<!-- --></span>id<span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">match</span> msg <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Message1</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">{<!-- --></span>id <span class=\"token punctuation\">:</span> id_variable <span class=\"token operator\">@</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">..=</span><span class=\"token number\">7</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Found an id in range :{}\"</span><span class=\"token punctuation\">,</span>id_variable<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message1</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">{<!-- --></span>id <span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">..=</span><span class=\"token number\">12</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Found an id in another range\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token class-name\">Message1</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Hello</span><span class=\"token punctuation\">{<!-- --></span>id<span class=\"token punctuation\">}</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Found some other id : {}\"</span><span class=\"token punctuation\">,</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¾“å‡ºç»“æœä¸ºï¼š</span>\n<span class=\"token class-name\">Found</span> an id <span class=\"token keyword\">in</span> range <span class=\"token punctuation\">:</span><span class=\"token number\">5</span>\n\né€šè¿‡åœ¨ <span class=\"token number\">3</span><span class=\"token punctuation\">...</span><span class=\"token number\">7</span> ä¹‹å‰ä½¿ç”¨ id_variable <span class=\"token operator\">@</span> ï¼Œåœ¨æµ‹è¯•ä¸€ä¸ªå€¼æ˜¯å¦æ»¡è¶³åŒºé—´æ¨¡å¼çš„åŒæ—¶å¯ä»¥æ•è·åˆ°åŒ¹é…æˆåŠŸ \n</code></pre>\n<h1><a id=\"_5233\"></a>é«˜çº§ç‰¹æ€§</h1>\n<h2><a id=\"_Rust_5235\"></a>ä¸å®‰å…¨ Rust</h2>\n<h3><a id=\"_5237\"></a>ä¸å®‰å…¨è¶…èƒ½åŠ›</h3>\n<p><strong>å¯ä»¥åœ¨ä»£ç å—å‰é¢ä½¿ç”¨ unsafe æ¥åˆ‡æ¢åˆ°ä¸å®‰å…¨æ¨¡å¼ã€‚</strong></p>\n<p>å°±æ˜¯å°†ä»£ç å®‰å…¨è´£ä»»è½¬äº¤åˆ°ç¨‹åºå‘˜æ‰‹ä¸Šã€‚</p>\n<p>âš ï¸ï¼šä¸å®‰å…¨è¶…èƒ½åŠ›æœ‰ï¼š</p>\n<ul><li>è§£å¼•ç”¨ç¥¼æŒ‡é’ˆ</li><li>è°ƒç”¨ä¸å®‰å…¨çš„å‡½æ•°æˆ–æ–¹æ³•</li><li>è®¿é—®æˆ–ä¿®æ”¹å¯å˜çš„é™æ€å˜é‡</li><li>å®ç°ä¸å®‰å…¨ Rust</li></ul>\n<blockquote>\n<p>æ³¨æ„ï¼š unsafe å…³é”®å­—ä¸ä¼šå…³é—­å€Ÿç”¨æ£€æŸ¥å™¨æˆ–ç¦ç”¨ä»»ä½•å…¶ä»– Rust å®‰å…¨æ£€æŸ¥ã€‚</p>\n</blockquote>\n<h5><a id=\"_5252\"></a>è§£å¼•ç”¨è£¸æŒ‡é’ˆ</h5>\n<blockquote>\n<p>ä¸å®‰å…¨ Rust çš„ä¸–ç•Œé‡Œæ‹¥æœ‰ä¸¤ç§ç±»ä¼¼äºå¼•ç”¨çš„æ–°æŒ‡é’ˆç±»å‹,å«ä½œè£¸æŒ‡é’ˆã€‚</p>\n<p>è£¸æŒ‡é’ˆè¦ä¹ˆæ˜¯å¯å˜çš„ï¼Œè¦ä¹ˆæ˜¯ä¸å¯å˜çš„ ï¼š *const T å’Œ *mut T</p>\n</blockquote>\n<p><strong>è£¸æŒ‡é’ˆä¸å¼•ç”¨ã€æ™ºèƒ½æŒ‡é’ˆçš„åŒºåˆ«åœ¨äºï¼š</strong></p>\n<ul><li>å…è®¸å¿½ç•¥å€Ÿç”¨è§„åˆ™ï¼Œå¯ä»¥åŒæ—¶æ‹¥æœ‰æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯å˜å’Œä¸å¯å˜æŒ‡é’ˆï¼Œæˆ–è€…æ‹¥æœ‰æŒ‡å‘åŒä¸€ä¸ªåœ°å€çš„å¤šä¸ªå¯å˜æŒ‡é’ˆ</li><li>ä¸èƒ½ä¿è¯è‡ªå·±æ€»æ˜¯æŒ‡å‘äº†æœ‰æ•ˆçš„å†…å­˜åœ°å€</li><li>å…è®¸ä¸ºç©º</li><li>ä¸éª¨å®ç°ä»»ä½•è‡ªåŠ¨æ¸…ç†æœºåˆ¶</li></ul>\n<pre><code class=\"prism language-rust\">   <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// é€šè¿‡å¼•ç”¨åˆ›å»ºè£¸æŒ‡é’ˆ</span>\n<span class=\"token comment\">//è¿™ä¸¤ä¸ªæŒ‡é’ˆéƒ½æ¥è‡ªæœ‰æ•ˆçš„å¼•ç”¨ï¼Œå¯ä»¥ç¡®è®¤å®ƒä»¬çš„æœ‰æ•ˆæ€§</span>\n    <span class=\"token keyword\">let</span> r1 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>num <span class=\"token keyword\">as</span> <span class=\"token operator\">*</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> r2 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> num <span class=\"token keyword\">as</span> <span class=\"token operator\">*</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>æˆ‘ä»¬å¯ä»¥å®‰å…¨ä»£ç å†…åˆæ³•åœ°åˆ›å»ºè£¸æŒ‡é’ˆï¼Œä½†æ˜¯ä¸èƒ½åœ¨ä¸å®‰å…¨ä»£ç å—å¤–è§£å¼•ç”¨è£¸æŒ‡é’ˆã€‚</strong></p>\n<p>ä¸‹é¢çš„ä»£ç æ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ä¸åº”è¯¥ç¼–å†™è¿™æ ·çš„ä»£ç ï¼Œå› ä¸ºæ— æ³•ç¡®å®šå…¶æœ‰æ•ˆæ€§</p>\n<pre><code class=\"prism language-rust\">  <span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªæŒ‡å‘ä»»æ„å†…å­˜åœ°å€çš„è£¸æŒ‡é’ˆ</span>\n    <span class=\"token keyword\">let</span> address <span class=\"token operator\">=</span><span class=\"token number\">0x012345usize</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> r<span class=\"token operator\">=</span> address <span class=\"token keyword\">as</span> <span class=\"token operator\">*</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> num <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// é€šè¿‡å¼•ç”¨åˆ›å»ºè£¸æŒ‡é’ˆ</span>\n    <span class=\"token keyword\">let</span> r1 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span>num <span class=\"token keyword\">as</span> <span class=\"token operator\">*</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> r2 <span class=\"token operator\">=</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> num <span class=\"token keyword\">as</span> <span class=\"token operator\">*</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">unsafe</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r1 is : {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>r1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r2 is : {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">*</span>r2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//ä¸å®‰å…¨ä»£ç ä¸€å®šè¦åœ¨ unsafe ä»£ç å—ä¸­æ‰å¯ä»¥è§£å¼•ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™</span>\n</code></pre>\n<h5><a id=\"_5297\"></a>è°ƒç”¨ä¸å®‰å…¨å‡½æ•°æˆ–æ–¹æ³•</h5>\n<p><strong>ä¸å®‰å…¨å‡½æ•°æˆ–æ–¹æ³•å°±æ˜¯å‰é¢åå­—å‰é¢åŠ äº† unsafe å…³é”®å­—ä¿®é¥°ï¼Œä¸å®‰å…¨å‡½æ•°å¿…é¡»è¦ä¸å®‰å…¨ä»£ç ä¸­æ‰å¯ä»¥è°ƒç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼ï¼ï¼</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">unsafe</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token function\">priunsafe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¡¨æ˜è¿™ä¸ªå‡½æ•°ä½“å†…çš„ä»£ç å—ä¹Ÿæ˜¯ä¸å®‰å…¨çš„</span>\n<span class=\"token keyword\">unsafe</span> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">priunsafe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unsafe!!!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>    \n    \n</code></pre>\n<h5><a id=\"_5317\"></a>åˆ›å»ºä¸å®‰å…¨ä»£ç çš„å®‰å…¨æŠ½è±¡</h5>\n<p>å‡½æ•°å¦‚æœæœ‰ä¸å®‰å…¨ä»£ç å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªå‡½æ•°éƒ½æ ‡è®°ä¸ºä¸å®‰å…¨çš„ã€‚æˆ‘ä»¬åº”è¯¥<strong>å°†ä¸å®‰å…¨ä»£ç å°è£…åœ¨å®‰å…¨å‡½æ•°ä¸­æ˜¯ä¸€ç§ååˆ†å¸¸è§çš„æŠ½è±¡ã€‚</strong></p>\n<pre><code class=\"prism language-rust\">    <span class=\"token comment\">//ä¸‹é¢è°ƒç”¨çš„è¿™ä¸ªæ–¹æ³•æ˜¯æ ‡å‡†åº“ä¸­ä½¿ç”¨ä¸å®‰å…¨ä»£ç çš„å‡½æ•°</span>\n    <span class=\"token keyword\">let</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> r<span class=\"token punctuation\">.</span><span class=\"token function\">split_at_mut</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{:?}\"</span><span class=\"token punctuation\">,</span>b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">split_at_mut</span><span class=\"token punctuation\">(</span>slice <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> mid <span class=\"token punctuation\">:</span> <span class=\"token keyword\">usize</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> len <span class=\"token operator\">=</span> slice<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">assert!</span><span class=\"token punctuation\">(</span>mid<span class=\"token operator\">&lt;=</span> len<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> slice<span class=\"token punctuation\">[</span><span class=\"token punctuation\">..</span>mid<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> slice<span class=\"token punctuation\">[</span>mid<span class=\"token punctuation\">..</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h5><a id=\"_extern___5337\"></a>ä½¿ç”¨ extern å‡½æ•°è°ƒç”¨å¤–éƒ¨ä»£ç </h5>\n<blockquote>\n<p>Rust ä½¿ç”¨ extern å…³é”®å­—ç®€åŒ–åˆ›å»ºå’Œä½¿ç”¨å¤–éƒ¨å‡½æ•°æ¥å£ï¼ˆFFIï¼‰çš„è¿‡ç¨‹ï¼ŒFFI æ˜¯ç¼–ç¨‹è¯­è¨€å®šä¹‰å‡½æ•°çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒå…è®¸å…¶ä»–å¤–éƒ¨çš„ç¼–è¯‘è¯­è¨€æ¥è°ƒç”¨è¿™äº›å‡½æ•°</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">extern</span> <span class=\"token string\">\"C\"</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">abs</span><span class=\"token punctuation\">(</span>input <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>ä»»ä½•åœ¨ extern å—ä¸­å£°æ˜çš„å‡½æ•°éƒ½æ˜¯ä¸å®‰å…¨çš„</strong></p>\n<blockquote>\n<p>åœ¨å…¶ä»–è¯­è¨€ä¸­è°ƒç”¨ Rust å‡½æ•°ï¼š</p>\n<p>extern å…³é”®å­—åŠå¯¹åº”çš„ ABI æ·»åŠ åˆ°å‡½æ•°ç­¾åçš„ fn å…³é”®å­—å‰ï¼Œå¹¶ä¸ºè¿™ä¸ªå‡½æ•°æ·»åŠ  #[no_mangle] æ³¨è§£æ¥é¿å… Rust åœ¨ç¼–è¯‘æ—¶æ”¹å˜å®ƒçš„ åç§°ã€‚</p>\n<blockquote>\n<p>ABI:æ¯ä¸ª<a href=\"https://baike.baidu.com/item/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/192\">æ“ä½œç³»ç»Ÿ</a>éƒ½ä¼šä¸ºè¿è¡Œåœ¨è¯¥ç³»ç»Ÿä¸‹çš„åº”ç”¨ç¨‹åºæä¾›åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£ï¼ˆApplication Binary Interfaceï¼ŒABIï¼‰ã€‚ABIåŒ…å«äº†<a href=\"https://baike.baidu.com/item/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F/5985445\">åº”ç”¨ç¨‹åº</a>åœ¨è¿™ä¸ªç³»ç»Ÿä¸‹è¿è¡Œæ—¶å¿…é¡»éµå®ˆçš„ç¼–ç¨‹çº¦å®šã€‚ABIæ€»æ˜¯åŒ…å«ä¸€ç³»åˆ—çš„ç³»ç»Ÿè°ƒç”¨å’Œä½¿ç”¨è¿™äº›ç³»ç»Ÿè°ƒç”¨çš„æ–¹æ³•ï¼Œä»¥åŠå…³äºç¨‹åºå¯ä»¥ä½¿ç”¨çš„å†…å­˜åœ°å€å’Œä½¿ç”¨æœºå™¨å¯„å­˜å™¨çš„è§„å®šã€‚ä»ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è§’åº¦çœ‹ï¼ŒABIæ—¢æ˜¯ç³»ç»Ÿæ¶æ„çš„ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯ç¡¬ä»¶ä½“ç³»ç»“æ„çš„é‡ç‚¹ï¼Œå› æ­¤åªè¦è¿åäºŒè€…ä¹‹ä¸€çš„æ¡ä»¶çº¦æŸå°±ä¼šå¯¼è‡´ç¨‹åºå‡ºç°ä¸¥é‡é”™è¯¯ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œ<a href=\"https://baike.baidu.com/item/%E9%93%BE%E6%8E%A5%E5%99%A8/10853221\">é“¾æ¥å™¨</a>ä¸ºäº†éµå®ˆABIçš„çº¦å®šéœ€è¦åšä¸€äº›é‡è¦çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼ŒABIè¦æ±‚æ¯ä¸ªåº”ç”¨ç¨‹åºåŒ…å«ä¸€ä¸ªç¨‹åºä¸­å„ä¾‹ç¨‹ä½¿ç”¨çš„é™æ€æ•°æ®çš„æ‰€æœ‰åœ°å€è¡¨ï¼Œé“¾æ¥å™¨é€šè¿‡æ”¶é›†æ‰€æœ‰é“¾æ¥åˆ°ç¨‹åºä¸­çš„æ¨¡å—çš„åœ°å€ä¿¡æ¯æ¥åˆ›å»ºåœ°å€è¡¨ã€‚ABIç»å¸¸å½±å“é“¾æ¥å™¨çš„æ˜¯å¯¹æ ‡å‡†è¿‡ç¨‹è°ƒç”¨çš„å®šä¹‰</p>\n</blockquote>\n<p>Rust ä¸ºäº†è®©å…¶ä»–è¯­è¨€ æ­£å¸¸åœ°è¯†åˆ« Rust å‡½æ•°ï¼Œå¿…é¡»è¦ç¦ç”¨ç¼–è¯‘å™¨ çš„æ”¹ååŠŸèƒ½ã€‚</p>\n</blockquote>\n<h5><a id=\"_5357\"></a>è®¿é—®æˆ–ä¿®æ”¹ä¸€ä¸ªå¯å˜é™æ€å˜é‡</h5>\n<blockquote>\n<p>Rust ä¸­å…¨å±€å˜é‡ä¹Ÿç§°ä¸ºé™æ€å˜é‡</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// é™æ€å˜é‡</span>\n <span class=\"token keyword\">static</span> <span class=\"token constant\">HELLO</span><span class=\"token punctuation\">:</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">str</span> <span class=\"token operator\">=</span><span class=\"token string\">\"Hello , world!!\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"static is {}\"</span><span class=\"token punctuation\">,</span><span class=\"token constant\">HELLO</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">mut</span> <span class=\"token constant\">COUNT</span><span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span> <span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_to_count</span><span class=\"token punctuation\">(</span>inc <span class=\"token punctuation\">:</span> <span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">unsafe</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token constant\">COUNT</span><span class=\"token operator\">+=</span>inc<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">add_to_count</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">unsafe</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"COUNT: {}\"</span><span class=\"token punctuation\">,</span><span class=\"token constant\">COUNT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>é™æ€å˜é‡å¿…é¡»è¦æ ‡æ³¨è‡ªå·±çš„ç±»å‹ï¼›é™æ€å˜é‡åªèƒ½å­˜å‚¨æ‹¥æœ‰ <strong>'static</strong>å‘¨æœŸçš„å¼•ç”¨ã€‚</p>\n<p>å¸¸é‡å’Œä¸å¯å˜é™æ€å˜é‡çš„åŒºåˆ«ï¼š</p>\n<ul><li>é™æ€å˜é‡çš„å€¼åœ¨å†…å­˜ä¸­æ‹¥æœ‰å›ºå®šçš„åœ°å€ï¼Œä½¿ç”¨å®ƒçš„å€¼æ€»æ˜¯ä¼šè®¿é—®åˆ°åŒæ ·çš„æ•°æ®ï¼›å¸¸é‡åˆ™å…è®¸åœ¨ä»»ä½•è¢«ä½¿ç”¨åˆ°çš„æ—¶å€™å¤åˆ¶å…¶æ•°æ®</li><li>é™æ€å˜é‡æ˜¯å¯å˜çš„ï¼Œè®¿é—®å’Œä¿®æ”¹å¯å˜çš„é™æ€å˜é‡æ˜¯ä¸å®‰å…¨çš„</li></ul>\n</blockquote>\n<h5><a id=\"_trait_5393\"></a>å®ç°ä¸å®‰å…¨ trait</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token comment\">// å®ç°ä¸å®‰å…¨ trait</span>\n<span class=\"token keyword\">unsafe</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Foo</span><span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">unsafe</span> <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Foo</span> <span class=\"token keyword\">for</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"_triat_5405\"></a>é«˜çº§ triat</h3>\n<h4><a id=\"trait__5407\"></a>åœ¨trait çš„å®šä¹‰ä¸­ä½¿ç”¨å…³è”ç±»å‹æŒ‡å®šå ä½ç±»å‹</h4>\n<blockquote>\n<p>å…³è”ç±»å‹æ˜¯ trait ä¸­çš„ç±»å‹å ä½ç¬¦ï¼Œå®ƒè¢«ç”¨äº triat çš„æ–¹æ³•ç­¾åä¸­</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Iterator</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Item</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Item æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼ŒIterator trait çš„å®ç°è€…éœ€è¦ä¸º Item æŒ‡å®šå…·ä½“çš„ç±»å‹</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">next</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Item</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Iterator</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Point</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Item</span><span class=\"token operator\">=</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//æŒ‡å®šç±»å‹</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">next</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Item</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Some</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ä½¿ç”¨æ³›å‹çš„ç‰ˆæœ¬</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Iterator</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">next</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Option</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<blockquote>\n<p>å ä½ç±»å‹å’Œæ³›å‹çš„åŒºåˆ«ï¼š</p>\n<p>ä½¿ç”¨æ³›å‹åœ¨æ¯æ¬¡å®ç°è¯¥ trait çš„è¿‡ç¨‹ä¸­æ ‡æ³¨ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä»»æ„çš„è¿­ä»£ç±»å‹ï¼Œä»è€Œä½¿ç”¨å¾—å¯ä»¥æœ‰å¤šä¸ªä¸åŒç‰ˆæœ¬çš„å®ç°ã€‚æˆ‘ä»¬<strong>å¯ä»¥ä¸ºä¸€ä¸ªç±»å‹åŒæ—¶å¤šæ¬¡å®ç° trait</strong></p>\n<p>å…³è”ç±»å‹ä¸éœ€è¦åœ¨ä½¿ç”¨ trait çš„æ–¹æ³•æ—¶æ ‡æ³¨ç±»å‹ï¼Œ<strong>ä¸èƒ½ä¸ºå•ä¸ªç±»å‹å¤šæ¬¡å®ç°è¿™æ ·çš„ trait</strong></p>\n</blockquote>\n<h4><a id=\"_5443\"></a>é»˜è®¤æ³›å‹å‚æ•°å’Œè¿ç®—ç¬¦é‡è½½</h4>\n<pre><code class=\"prism language-rust\">\n <span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>ops<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Add</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token attribute attr-name\">#[derive(Debug,PartialEq)]</span>\n <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Point1</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n <span class=\"token punctuation\">}</span>\n \n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Add</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Point1</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Output</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Point1</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¿™é‡Œç›¸å½“äºé‡è½½ + å·è¿ç®—ç¬¦</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> other <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Point1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Point1</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Point1</span><span class=\"token punctuation\">{<!-- --></span>\n            x<span class=\"token punctuation\">:</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>other<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\n            y<span class=\"token punctuation\">:</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>other<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸ºäº†å®ç°ä¸¤ä¸ªç‚¹ç›¸åŠ æˆ‘ä»¬é‡è½½äº† + å·è¿ç®—ç¬¦</span>\n<span class=\"token comment\">//rust å¯ä»¥é‡è½½çš„è¿ç®—ç¬¦æœ‰é™ï¼Œåªæœ‰å‡ ä¸ªï¼Œ</span>\n<span class=\"token comment\">// è¿™ä¸ªé‡è½½å’Œ C++ ä¸­çš„å·®ä¸å¤šï¼Œå°±æ˜¯å¯ä»¥é‡è½½çš„æ•°é‡å¤ªå°‘</span>\n<span class=\"token comment\">//æ ‡å‡†åº“å®ç°ï¼š</span>\n<span class=\"token attribute attr-name\">#[doc(alias = <span class=\"token string\">\"+\"</span>)]</span>\n<span class=\"token keyword\">pub</span> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Add</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Rhs</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">Self</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//è¿™é‡Œçš„ Add trait ä½¿ç”¨äº†é»˜è®¤æ³›å‹å‚æ•°</span>\n    <span class=\"token comment\">/// The resulting type after applying the `+` operator.</span>\n    <span class=\"token attribute attr-name\">#[stable(feature = <span class=\"token string\">\"rust1\"</span>, since = <span class=\"token string\">\"1.0.0\"</span>)]</span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Output</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/// Performs the `+` operation.</span>\n    <span class=\"token comment\">///</span>\n    <span class=\"token comment\">/// # Example</span>\n    <span class=\"token comment\">///</span>\n    <span class=\"token comment\">/// ```</span>\n    <span class=\"token comment\">/// assert_eq!(12 + 1, 13);</span>\n    <span class=\"token comment\">/// ```</span>\n    <span class=\"token attribute attr-name\">#[must_use]</span>\n    <span class=\"token attribute attr-name\">#[stable(feature = <span class=\"token string\">\"rust1\"</span>, since = <span class=\"token string\">\"1.0.0\"</span>)]</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> rhs<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Rhs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">Self</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Output</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ä¸Šé¢ä»£ç ä¸­ Rhs=self ä½¿ç”¨äº†é»˜è®¤æ³›å‹å‚æ•°ï¼›æ²¡æœ‰ä¸º Rhs æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆ Rhs çš„ç±»å‹å°±ä¼šé»˜è®¤ä¸º self</p>\n<p>é»˜è®¤å‚æ•°ä½¿ç”¨åœºæ™¯ï¼š</p>\n<ul><li>æ‰©å±•ä¸€ä¸ªç±»å‹è€Œä¸ç ´åç°æœ‰ä»£ç </li><li>å…è®¸å¤§éƒ¨åˆ†ç”¨æˆ·ä¸éœ€è¦çš„ç‰¹å®šåœºåˆè¿›è¡Œè‡ªå®šä¹‰</li></ul>\n<h5><a id=\"_5498\"></a>ç”¨äºæ¶ˆé™¤æ­§ä¹‰çš„å®Œå…¨é™å®šè¯­æ³•ï¼šè°ƒç”¨ç›¸åŒåç§°çš„æ–¹æ³•</h5>\n<blockquote>\n<p>Rust ä¸ä¼šé˜»æ­¢ä¸¤ä¸ª trait æ‹¥æœ‰ç›¸åŒåç§°çš„æ–¹æ³•ï¼Œä¹Ÿä¸ä¼šé˜»æ­¢ä½ ä¸ºåŒä¸€ä¸ªç±»å‹å®ç°è¿™æ ·çš„ä¸¤ä¸ª trait</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Pilot</span><span class=\"token punctuation\">{<!-- --></span>\n     <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Wizard</span><span class=\"token punctuation\">{<!-- --></span>\n     <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Human</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Pilot</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This is your captain speaking.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Wizard</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Up\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">impl</span> <span class=\"token class-name\">Human</span><span class=\"token punctuation\">{<!-- --></span>\n     <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n         <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*waving arms furiously*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸Šé¢å®šä¹‰äº†ä¸¤ä¸ªæ‹¥æœ‰åŒåæ–¹æ³• fly çš„ trait å¹¶ä¸”å®ƒæœ¬èº«ä¹Ÿæ‹¥æœ‰ä¸€ä¸ª fly æ–¹æ³•</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> p<span class=\"token operator\">=</span><span class=\"token class-name\">Human</span><span class=\"token punctuation\">;</span>\n    p<span class=\"token punctuation\">.</span><span class=\"token function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è°ƒç”¨è‡ªèº«çš„</span>\n    <span class=\"token class-name\">Pilot</span><span class=\"token punctuation\">::</span><span class=\"token function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Wizard</span><span class=\"token punctuation\">::</span><span class=\"token function\">fly</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// åœ¨æ–¹æ³•åå‰æŒ‡å®š trait åç§°æ¸…æ™°çš„è¡¨æ˜æˆ‘ä»¬è¦è°ƒç”¨å“ªä¸ªå®ç°</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">Animal</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">baby_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Dog</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">baby_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Dog\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Animal</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Dog</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">baby_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">String</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Animal\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A baby dog is called a {}\"</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Dog</span><span class=\"token punctuation\">::</span><span class=\"token function\">baby_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//Dog</span>\n    <span class=\"token comment\">// println!(\"A baby dog is called a {}\",Animal::baby_name()); //ç¼–è¯‘é”™è¯¯</span>\n    <span class=\"token comment\">// ä½¿ç”¨å®Œå…¨é™å®šè¯­æ³•æ¥è°ƒç”¨ Dog ä¸º Animal trait å®ç°çš„å‡½æ•°</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"B baby dog is called a {}\"</span><span class=\"token punctuation\">,</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Dog</span> <span class=\"token keyword\">as</span> <span class=\"token class-name\">Animal</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">::</span><span class=\"token function\">baby_name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>å®Œå…¨é™å®šè¯­æ³•ï¼š</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Type</span> <span class=\"token keyword\">as</span> <span class=\"token class-name\">Trait</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">::</span><span class=\"token function\">function</span><span class=\"token punctuation\">(</span>receiver_if_method<span class=\"token punctuation\">,</span> next_arg<span class=\"token punctuation\">,</span><span class=\"token punctuation\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>å¯ä»¥ä»»ä½•è°ƒç”¨å‡½æ•°æˆ–æ–¹æ³•çš„åœ°æ–¹ä½¿ç”¨å®Œå…¨é™å®šè¯­æ³•ï¼›å½“ä»£ç ä¸­å­˜åœ¨å¤šä¸ªåŒåå®ç°çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªè¯­æ³•æ˜¯éå¸¸æœ‰ç”¨çš„</strong></p>\n<h5><a id=\"__trait__trait__trait_5577\"></a>ç”¨äºåœ¨ trait ä¸­é™„å¸¦å¦å¤–ä¸€ä¸ª trait åŠŸèƒ½çš„è¶… trait</h5>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span></span>fmt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">trait</span> <span class=\"token type-definition class-name\">OutlinePrint</span> <span class=\"token punctuation\">:</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Display</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">outline_print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">let</span> output <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">let</span> len<span class=\"token operator\">=</span>output<span class=\"token punctuation\">.</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">+</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*{}*\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*  {}  *\"</span><span class=\"token punctuation\">,</span>output<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*{}*\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{}\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">.</span><span class=\"token function\">repeat</span><span class=\"token punctuation\">(</span>len<span class=\"token operator\">+</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Point2</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n    y<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//å› ä¸ºä¸Šé¢çš„ OutlinePrint trait ä¾èµ–äº Display trait æ‰€è¦åœ¨è¿™é‡Œå®ç°è¿™ä¸ª trait å¦åˆ™ä¼šæŠ¥é”™</span>\n<span class=\"token keyword\">impl</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Display</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Point2</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fmt</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Formatter</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Result</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token macro property\">write!</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span><span class=\"token string\">\"({},{})\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">// è¿™ä¸ªæœ‰ç‚¹åƒ C++ çš„é‡è½½ &lt;&lt; è¿ç®—ç¬¦</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">OutlinePrint</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Point2</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n\n\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">let</span> p2<span class=\"token operator\">=</span> <span class=\"token class-name\">Point2</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">:</span><span class=\"token number\">6</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    p2<span class=\"token punctuation\">.</span><span class=\"token function\">outline_print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"_newtype__trait_5617\"></a>ä½¿ç”¨ newtype æ¨¡å¼åœ¨å¤–éƒ¨ç±»å‹ä¸Šå®ç°å¤–éƒ¨ trait</h5>\n<blockquote>\n<p>å­¤å„¿è§„åˆ™ï¼šåªæœ‰å½“ç±»å‹å’Œå¯¹åº” trait ä¸­çš„ä»»æ„ä¸€ä¸ªå®šä¹‰åœ¨æœ¬åœ°åŒ…å†…æ—¶ï¼Œæ‰èƒ½å¤Ÿä¸ºè¯¥ç±»å‹å®ç°è¿™ä¸€ä¸ª traitã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ newtype æ¨¡å¼æ¥ç»•è¿‡è¿™ä¸ªé™åˆ¶</p>\n</blockquote>\n<pre><code class=\"prism language-rust\">    <span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Wrapper</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">impl</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Display</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Wrapper</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">fmt</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> f <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token keyword\">mut</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Formatter</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token namespace\">fmt<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Result</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token macro property\">write!</span><span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">,</span><span class=\"token string\">\"[{}]\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\", \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">let</span> w<span class=\"token operator\">=</span><span class=\"token class-name\">Wrapper</span><span class=\"token punctuation\">(</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">::</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"w = {}\"</span><span class=\"token punctuation\">,</span>w<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//è¾“å‡ºï¼šw = [hello, world]</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//ä¸Šé¢ä»£ç ä¸­å­¤å„¿è§„åˆ™ä¼šé˜»æ­¢æˆ‘ä»¬ç›´æ¥ä¸º Vec&lt;T&gt; å®ç° Display trait ,å› ä¸ºå®ƒä»¬çš„ç±»å‹éƒ½è¢«å®šä¹‰åœ¨å¤–éƒ¨åŒ…ä¸­</span>\n<span class=\"token comment\">//æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒæœ‰ Vec&lt;T&gt; çš„å®ä¾‹ï¼Œæ¥ç€æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒå®ç° Display </span>\n</code></pre>\n<p>###ã€€é«˜çº§ç±»å‹</p>\n<h4><a id=\"_newtype__5643\"></a>ä½¿ç”¨ newtype æ¨¡å¼å®ç°ç±»å‹å®‰å…¨ä¸æŠ½è±¡</h4>\n<blockquote>\n<p>newtypeçš„å¦å¤–ä¸€ä¸ªä½œç”¨å°±æ˜¯ä¸ºç±»å‹çš„æŸäº›ç»†èŠ‚æä¾›æŠ½è±¡èƒ½åŠ›ã€‚</p>\n<p>newtype æ¨¡å¼è¿˜å¯ä»¥è¢«ç”¨æ¥éšè—å†…éƒ¨å®ç°ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>ops<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Add</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Millimeters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Meters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Add</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mteters</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Output</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> other<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Meters</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Millimeters</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token number\">0</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>other<span class=\"token number\">.0</span><span class=\"token operator\">*</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¿™å°±æ˜¯å…¸å‹çš„ newtype æ¨¡å¼</span>\n</code></pre>\n</blockquote>\n<h5><a id=\"_5664\"></a>ä½¿ç”¨ç±»å‹åˆ«ååˆ›å»ºåŒä¹‰ç±»å‹</h5>\n<p><mark>ä¹Ÿå°±æ˜¯åˆ›å»ºç±»å‹åˆ«å</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Kilometers</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¿™é‡Œçš„ Kilometers å°±ç­‰åŒäº i32 ç±»å‹</span>\n</code></pre>\n<pre><code class=\"prism language-rust\">   <span class=\"token comment\">// ç±»å‹åˆ«ååŠŸèƒ½</span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">sy</span><span class=\"token operator\">=</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token punctuation\">:</span>sy  <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x+y= {}\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>æœ‰æ—¶å€™æˆ‘ä»¬æ‹¥æœ‰æ¯”è¾ƒé•¿çš„ç±»å‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥ç®€çŸ­ç±»å‹ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">bds</span><span class=\"token operator\">=</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span><span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ bds å»æ›¿æ¢ä¸‹é¢çš„æ¯”è¾ƒé•¿çš„ç±»å‹å</span>\n\n    <span class=\"token keyword\">let</span> f <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span> <span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;=</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">takes_long_type</span> <span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span><span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returns_long_type</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span> <span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><strong><code>ç±»å‹åˆ«åçš„åå­—ä¹Ÿè¦å–å¾—æœ‰æ„ä¹‰ä¸èƒ½ä¹±å–ï¼ï¼ï¼</code></strong></p>\n<p>#####ã€€æ°¸è¿œä¸è¿”å›çš„ Neverç±»å‹</p>\n<blockquote>\n<p>Rust æœ‰ä¸€ä¸ªåä¸º ï¼ çš„ç‰¹æ®Šç±»å‹ï¼Œå®ƒåœ¨ç±»å‹ç³»ç»Ÿä¸­ç§°ä¸ºç©ºç±»å‹ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å€¼ã€‚å®ƒä¹Ÿä»ä¸è¿”å›çš„å‡½æ•°ä¸­å……å½“è¿”å›å€¼çš„ç±»å‹ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n     \n  <span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">!</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å‘æ•£å‡½æ•°è¦æœ‰ä¸€ä¸ª panic! å¦åˆ™ä¼šæŠ¥é”™</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x= {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å‘æ•£å‡½æ•°ï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¿™é‡Œæ²¡æœ‰å¤ªæ˜ç™½ï¼Œåé¢å†åŠ å¼ºä¸€ä¸‹è¿™é‡Œ</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¿™ä¸ªæ‹¬å·ç›¸å½“äº c/c++ ä¸­çš„ void </span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¿™ä¸ªä¹Ÿä»£è¡¨æ²¡æœ‰è¿”å›çš„æ„æ€\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><code>ç±»å‹ ! çš„è¡¨è¾¾å¼å¯ä»¥è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå…¶ä»–çš„ä»»æ„ç±»å‹ã€‚</code></p>\n<p>ä½¿ç”¨äº† never çš„ç±»å‹ï¼šï¼ˆä¸€äº›ï¼‰</p>\n<ul><li>panic!</li><li>å¾ªç¯ loopï¼ˆå®ƒçš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ ï¼ï¼‰</li><li>continue çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ !</li></ul>\n<h5><a id=\"_Sized_trait_5732\"></a>åŠ¨æ€å¤§å°ç±»å‹å’Œ Sized trait</h5>\n<blockquote>\n<p>åŠ¨æ€ç±»å‹å¤§å°ã€€DSTï¼›ä¹Ÿå°±æ˜¯ä¸ç¡®å®šå¤§å°ç±»å‹ï¼›å®ƒä»¬åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…¶å¤§å°</p>\n</blockquote>\n<p>str å°±æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹å¤§å°ï¼›ï¼ˆ<strong>è¿™é‡Œæ˜¯ str ä¸æ˜¯ &amp;str</strong>ï¼‰</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> s1<span class=\"token punctuation\">:</span><span class=\"token keyword\">str</span><span class=\"token operator\">=</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//str ç±»å‹åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå¤§å°ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½åˆ›å»ºå‡º str ç±»å‹çš„å˜é‡</span>\n    <span class=\"token keyword\">let</span> s2<span class=\"token punctuation\">:</span><span class=\"token keyword\">str</span><span class=\"token operator\">=</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ä¸Šé¢ä¸¤ä¸ªéƒ½æŠ¥é”™ï¼Œæ— æ³•ä½¿ç”¨</span>\n\n<span class=\"token comment\">//ä¸Šé¢ä»£ç æ¢æˆ  &amp;strå°±å¯ä»¥ä½¿ç”¨äº†</span>\n<span class=\"token comment\">//å› ä¸º &amp;str å®é™…ä¸Šå°±ç”± str çš„åœ°å€å’Œå®ƒçš„é•¿åº¦ä¸¤ä¸ªå€¼æ„æˆçš„</span>\n\n</code></pre>\n<p>trait ä¹Ÿå°±æ˜¯ä¸€ç§åŠ¨æ€å¤§å°ç±»å‹ï¼Œæ¯ä¸€ä¸ª trait éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡åç§°æ¥è¿›è¡Œå¼•ç”¨çš„åŠ¨æ€å¤§å°ç±»å‹ã€‚</p>\n<p><strong>Rust æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„ Sized trait æ¥ç¡®å®šä¸€ä¸ªç±»å‹çš„å¤§å°åœ¨ç¼–è¯‘æ—¶æ˜¯å¦å¯çŸ¥ï¼Œrust ä¼šä¸ºæ¯ä¸€ä¸ªæ³›å‹å‡½æ•°éšå¼åœ°æ·»åŠ  Sized çº¦æŸ</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä¸Šæˆå‡½æ•°ä¼šè¢«éšå¼è½¬æ¢ä¸ºï¼š</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Sized</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ³›å‹å‡½æ•°åªèƒ½è¢«ç”¨äºåœ¨ç¼–è¯‘æ—¶å·²ç»çŸ¥é“å¤§å°çš„ç±»å‹ã€‚</mark></p>\n<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç‰¹æ®Šè¯­æ³•æ¥è§£é™¤é™åˆ¶ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token class-name\">Sized</span> <span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*\n?Sized trait çº¦æŸè¡¨è¾¾äº†ä¸ Sized ç›¸åçš„å«ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç†è§£ä¸ºï¼šT å¯èƒ½æ˜¯ä¹Ÿå¯èƒ½ä¸æ˜¯ Sized çš„\nè¿™ä¸ªè¯­æ³•åªèƒ½ç”¨åœ¨ Sized ä¸Šï¼Œè€Œä¸èƒ½è¢«ç”¨äºå…¶ä»– trait\nä¸Šé¢å°†ç±»å‹ t æ”¹ä¸ºäº† &amp;T ï¼›å› ä¸ºå¯èƒ½ä¸æ˜¯ Sized\n*/</span>\n</code></pre>\n<h3><a id=\"_5779\"></a>é«˜çº§å‡½æ•°ä¸é—­åŒ…</h3>\n<h4><a id=\"_5781\"></a>å‡½æ•°æŒ‡é’ˆ</h4>\n<p>fn å°±æ˜¯å‡½æ•°æŒ‡é’ˆ</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_one</span><span class=\"token punctuation\">(</span>x <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token operator\">+</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">do_twice</span><span class=\"token punctuation\">(</span>f <span class=\"token punctuation\">:</span> <span class=\"token keyword\">fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> arg <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//è¯­æ³•ï¼š</span>\nf <span class=\"token punctuation\">:</span> <span class=\"token keyword\">fn</span><span class=\"token punctuation\">(</span>å‚æ•°åˆ—è¡¨ç±»å‹<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> è¿”å›å€¼ç±»å‹\n</code></pre>\n<blockquote>\n<p>ä¸é—­åŒ…ä¸åŒï¼Œ fn æ˜¯ä¸€ä¸ªç±»å‹è€Œä¸æ˜¯ä¸€ä¸ª trait ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‡å®š fn ä¸ºå‚æ•°ç±»å‹ï¼Œä¸ç”¨å£°æ˜ä¸€ä¸ªä»¥ Fn trait ä¸ºçº¦æŸçš„æ³›å‹å‚æ•°</p>\n</blockquote>\n<p><code>å‡½æ•°æŒ‡é’ˆå®ç°äº†å…¨éƒ¨ 3 ç§é—­åŒ… trait : Fn FnMut FnOnce </code></p>\n<p><strong>å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°æŒ‡é’ˆç”¨ä½œå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªæ¥æ”¶é—­åŒ…çš„å‡½æ•°ã€‚</strong></p>\n<p>eg: æ—¢å¯ä»¥ä½¿ç”¨é—­åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°ï¼š</p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">let</span> list_of_numbers <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ä½¿ç”¨ map å‡½æ•°å°†ä¸€ä¸ªæ•´å½¢åŠ¨æ€æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åŠ¨æ€æ•°ç»„</span>\n    <span class=\"token keyword\">let</span> list_of_strings <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span>list_of_numbers<span class=\"token punctuation\">.</span>\n    <span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>i<span class=\"token closure-punctuation punctuation\">|</span></span> i<span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> list_of_stringsy<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> list_of_numbers\n    <span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ToString</span><span class=\"token punctuation\">::</span>to_string<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//è¿™é‡Œå¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šè¯­æ³•;å› ä¸ºè¿™ä¸ªä½œç”¨åŸŸä¸­å­˜åœ¨å¤šä¸ªå¯ç”¨çš„ to_string å‡½æ•°</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Status</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Value</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Stop</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> list_of_statuses<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Status</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">0u32</span><span class=\"token punctuation\">..</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Status</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"_5834\"></a>è¿”å›é—­åŒ…</h5>\n<p><strong>æ— æ³•åœ¨å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªé—­åŒ…</strong></p>\n<p>Rustæ— æ³•æ¨æ–­å‡ºéœ€è¦å¤šå¤§çš„ç©ºé—´æ¥å­˜å‚¨è¿”å›çš„é—­åŒ…ã€‚</p>\n<p>ğŸ“–ï¼šè§£å†³ï¼š ä½¿ç”¨ trait å¯¹è±¡ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returns_closure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>x<span class=\"token closure-punctuation punctuation\">|</span></span> x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_5848\"></a>å®</h4>\n<blockquote>\n<p>ä½¿ç”¨ã€€macro_rules! æ„é€ çš„å£°æ˜å®åŠå¦å¤– 3 ç§è¿‡ç¨‹å®ï¼š</p>\n<ul><li>ç”¨äºç»“æ„ä½“æˆ–æšä¸¾çš„è‡ªå®šä¹‰ #[derive] å®ï¼Œå®ƒå¯ä»¥æŒ‡å®šéš derive å±æ€§è‡ªåŠ¨æ·»åŠ çš„ä»£ç </li><li>ç”¨äºä¸ºä»»æ„æ¡ç›®æ·»åŠ è‡ªå®šä¹‰å±æ€§çš„å±æ€§å®</li><li>çœ‹èµ·æ¥ç±»ä¼¼äºå‡½æ•°çš„å‡½æ•°å®ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¹¶å¤„ç†ä¸€æ®µæ ‡è®°åºåˆ—</li></ul>\n</blockquote>\n<h5><a id=\"_5856\"></a>å®å’Œå‡½æ•°ä¹‹é—´çš„å·®åˆ«</h5>\n<blockquote>\n<p>å®æ˜¯ä¸€ç§ç”¨äºç¼–å†™å…¶ä»–ä»£ç çš„ä»£ç ç¼–å†™æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å…ƒç¼–ç¨‹èŒƒå¼</p>\n<p>åŒºåˆ«ï¼š</p>\n<ul><li>å‡½æ•°åœ¨å®šä¹‰ç­¾åæ—¶å¿…é¡»å£°æ˜è‡ªå·±å‚æ•°çš„ä¸ªæ•°ä¸ç±»å‹ï¼Œè€Œå®åˆ™èƒ½å¤Ÿå¤„ç†<strong>å¯å˜æ•°é‡çš„å‚æ•°</strong>ï¼›</li><li>å®çš„å®šä¹‰è¦æ¯”å‡½æ•°å®šä¹‰å¤æ‚å¾—å¤š</li><li>åœ¨æŸä¸ªæ–‡ä»¶ä¸­è°ƒç”¨å®æ—¶ï¼Œå¿…é¡»æå‰å®šä¹‰å®æˆ–å°†å®å¼•å…¥å½“å‰ä½œç”¨åŸŸä¸­ï¼Œè€Œå‡½æ•°åˆ™å¯ä»¥åœ¨ä»»æ„ä½ç½®å®šä¹‰å¹¶åœ¨ä»»æ„ä½ç½®ä½¿ç”¨</li></ul>\n</blockquote>\n<h5><a id=\"_macro_rules__5868\"></a>ç”¨äºé€šç”¨å…ƒç¼–ç¨‹çš„ macro_rules! å£°æ˜å®</h5>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> v <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">u32</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// æ ‡å‡†åº“ä¸­ç®€åŒ–åçš„ vec! å®å®šä¹‰</span>\n    <span class=\"token attribute attr-name\">#[macro_export]</span>\n    <span class=\"token macro property\">macro_rules!</span> vec <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token punctuation\">(</span>$ <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">:</span><span class=\"token fragment-specifier punctuation\">expr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> temp_vec<span class=\"token operator\">=</span><span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                $<span class=\"token punctuation\">(</span>\n                    temp_vec<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>\n            temp_vec\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//#[macro_export] æ„å‘³ç€è¿™ä¸ªå®ä¼šåœ¨å®ƒæ‰€å¤„çš„åŒ…è¢«å¼•å…¥ä½œç”¨åŸŸåå¯ç”¨ï¼Œç¼ºå°‘äº†è¿™ä¸ªæ ‡æ³¨çš„å®åˆ™ä¸èƒ½è¢«å¼•å…¥ä½œç”¨åŸŸ</span>\n</code></pre>\n<p><strong>æˆ‘ä»¬ä½¿ç”¨ macro_rules! åŠä¸å¸¦æ„Ÿå¹å·çš„åç§°æ¥å¼€å§‹å®šä¹‰å®ã€‚</strong></p>\n<h5><a id=\"_5893\"></a>åŸºäºå±æ€§åˆ›å»ºä»£ç çš„è¿‡ç¨‹å®</h5>\n<blockquote>\n<p>è¿‡ç¨‹å®ï¼ˆå®ƒä»¬çš„å½¢å¼åƒå‡½æ•°ï¼‰ï¼š</p>\n<p>æœ‰ 3 ç§ï¼š è‡ªå®šä¹‰æ´¾ç”Ÿå®ã€å±æ€§å®ã€å‡½æ•°å®</p>\n<p>å½“åˆ›å»ºè¿‡ç¨‹å®æ—¶å®çš„å®šä¹‰å¿…é¡»å•ç‹¬æ”¾åœ¨å®ƒä»¬è‡ªå·±çš„åŒ…ä¸­ï¼Œå¹¶ä½¿ç”¨ç‰¹æ®Šçš„åŒ…ç±»å‹ã€‚</p>\n</blockquote>\n<p>å®çŸ¥é“çš„ä¸å¤šï¼Œå¾—åé¢å†ä»”ç»†çœ‹ä¸€ä¸‹</p>\n<h1><a id=\"_web__5907\"></a>æ„å»ºå¤šçº¿ç¨‹ web æœåŠ¡å™¨</h1>\n<blockquote>\n<p>è¶…æ–‡æœ¬ä¼ è¾“åè®® HTTP å’Œ ä¼ è¾“æ§åˆ¶åè®® TCP</p>\n<p>å®ƒä»¬ä¸¤ä¸ªéƒ½æ˜¯åŸºäº è¯·æ±‚å’Œå“åº” çš„åè®®</p>\n<p>TCP æ˜¯ä¸€ç§åº•å±‚åè®®ï¼Œå®ƒæè¿°äº†ä¿¡æ¯å¦‚ä½•ä»ä¸€ä¸ªæœåŠ¡å™¨ä¼ é€åˆ°å¦å¤–ä¸€ä¸ªæœåŠ¡å™¨çš„ç»†èŠ‚ï¼Œä½†å®ƒå¹¶ä¸æŒ‡å®šä¿¡æ¯çš„å…·ä½“å†…å®¹ã€‚HTTP åè®®å»ºç«‹åœ¨ TCP ä¹‹ä¸Šï¼Œå®ƒå®šä¹‰äº†è¯·æ±‚å’Œå“åº”çš„å†…å®¹ã€‚</p>\n</blockquote>\n<p>t.len();<br/> println!(â€œ{}â€,â€œ<em>â€œ.repeat(len+4));<br/> println!(â€</em>{}<em>â€œ,â€ â€œ.repeat(len+2));<br/> println!(â€</em> {} <em>â€œ,output);<br/> println!(â€</em>{}<em>â€œ,â€ â€œ.repeat(len+2));<br/> println!(â€{}â€œ,â€</em>â€.repeat(len+4));<br/> }<br/> }</p>\n<p>struct Point2{<!-- --><br/> x:i32,<br/> y:i32,<br/> }<br/> //å› ä¸ºä¸Šé¢çš„ OutlinePrint trait ä¾èµ–äº Display trait æ‰€è¦åœ¨è¿™é‡Œå®ç°è¿™ä¸ª trait å¦åˆ™ä¼šæŠ¥é”™<br/> impl fmt::Display for Point2{<!-- --><br/> fn fmt(&amp;self, f: &amp;mut fmt::Formatter) -&gt; fmt::Result{<!-- --><br/> write!(f,â€œ({},{})â€,self.x,self.y)<br/> // è¿™ä¸ªæœ‰ç‚¹åƒ C++ çš„é‡è½½ &lt;&lt; è¿ç®—ç¬¦<br/> }<br/> }<br/> impl OutlinePrint for Point2{}</p>\n<p>fn main() {<!-- --><br/> let p2= Point2{x:5,y:6};<br/> p2.outline_print();</p>\n<pre><code>\n\n\n#####  ä½¿ç”¨ newtype æ¨¡å¼åœ¨å¤–éƒ¨ç±»å‹ä¸Šå®ç°å¤–éƒ¨ trait\n\n&gt; å­¤å„¿è§„åˆ™ï¼šåªæœ‰å½“ç±»å‹å’Œå¯¹åº” trait ä¸­çš„ä»»æ„ä¸€ä¸ªå®šä¹‰åœ¨æœ¬åœ°åŒ…å†…æ—¶ï¼Œæ‰èƒ½å¤Ÿä¸ºè¯¥ç±»å‹å®ç°è¿™ä¸€ä¸ª traitã€‚\n&gt;\n&gt;  æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ newtype æ¨¡å¼æ¥ç»•è¿‡è¿™ä¸ªé™åˆ¶\n\n```rust\n    struct Wrapper(Vec&lt;String&gt;);\n    impl fmt::Display for Wrapper{\n        fn fmt(&amp;self , f : &amp;mut fmt::Formatter) -&gt; fmt::Result{\n            write!(f,\"[{}]\",self.0.join(\", \"))\n        }\n    }\nfn main() {\n\n    let w=Wrapper(vec![String::from(\"hello\"),String::from(\"world\")]);\n    println!(\"w = {}\",w);//è¾“å‡ºï¼šw = [hello, world]\n}\n//ä¸Šé¢ä»£ç ä¸­å­¤å„¿è§„åˆ™ä¼šé˜»æ­¢æˆ‘ä»¬ç›´æ¥ä¸º Vec&lt;T&gt; å®ç° Display trait ,å› ä¸ºå®ƒä»¬çš„ç±»å‹éƒ½è¢«å®šä¹‰åœ¨å¤–éƒ¨åŒ…ä¸­\n//æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæŒæœ‰ Vec&lt;T&gt; çš„å®ä¾‹ï¼Œæ¥ç€æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å®ƒå®ç° Display \n</code></pre>\n<p>###ã€€é«˜çº§ç±»å‹</p>\n<h4><a id=\"_newtype__6047\"></a>ä½¿ç”¨ newtype æ¨¡å¼å®ç°ç±»å‹å®‰å…¨ä¸æŠ½è±¡</h4>\n<blockquote>\n<p>newtypeçš„å¦å¤–ä¸€ä¸ªä½œç”¨å°±æ˜¯ä¸ºç±»å‹çš„æŸäº›ç»†èŠ‚æä¾›æŠ½è±¡èƒ½åŠ›ã€‚</p>\n<p>newtype æ¨¡å¼è¿˜å¯ä»¥è¢«ç”¨æ¥éšè—å†…éƒ¨å®ç°ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">use</span> <span class=\"token namespace\">std<span class=\"token punctuation\">::</span>ops<span class=\"token punctuation\">::</span></span><span class=\"token class-name\">Add</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Millimeters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token type-definition class-name\">Meters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">impl</span> <span class=\"token class-name\">Add</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Mteters</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">for</span> <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Output</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span> <span class=\"token punctuation\">,</span> other<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Meters</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Millimeters</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Millimeters</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span><span class=\"token number\">0</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>other<span class=\"token number\">.0</span><span class=\"token operator\">*</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¿™å°±æ˜¯å…¸å‹çš„ newtype æ¨¡å¼</span>\n</code></pre>\n</blockquote>\n<h5><a id=\"_6068\"></a>ä½¿ç”¨ç±»å‹åˆ«ååˆ›å»ºåŒä¹‰ç±»å‹</h5>\n<p><mark>ä¹Ÿå°±æ˜¯åˆ›å»ºç±»å‹åˆ«å</mark></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">Kilometers</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¿™é‡Œçš„ Kilometers å°±ç­‰åŒäº i32 ç±»å‹</span>\n</code></pre>\n<pre><code class=\"prism language-rust\">   <span class=\"token comment\">// ç±»å‹åˆ«ååŠŸèƒ½</span>\n    <span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">sy</span><span class=\"token operator\">=</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span> <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token punctuation\">:</span>sy  <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x+y= {}\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">+</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>æœ‰æ—¶å€™æˆ‘ä»¬æ‹¥æœ‰æ¯”è¾ƒé•¿çš„ç±»å‹æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åæ¥ç®€çŸ­ç±»å‹ã€‚</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">type</span> <span class=\"token type-definition class-name\">bds</span><span class=\"token operator\">=</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span><span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ bds å»æ›¿æ¢ä¸‹é¢çš„æ¯”è¾ƒé•¿çš„ç±»å‹å</span>\n\n    <span class=\"token keyword\">let</span> f <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span> <span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;=</span><span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"hi\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">takes_long_type</span> <span class=\"token punctuation\">(</span>f<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span><span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returns_long_type</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token class-name\">Send</span> <span class=\"token operator\">+</span> <span class=\"token lifetime-annotation symbol\">'static</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span><span class=\"token closure-punctuation punctuation\">|</span></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><strong><code>ç±»å‹åˆ«åçš„åå­—ä¹Ÿè¦å–å¾—æœ‰æ„ä¹‰ä¸èƒ½ä¹±å–ï¼ï¼ï¼</code></strong></p>\n<p>#####ã€€æ°¸è¿œä¸è¿”å›çš„ Neverç±»å‹</p>\n<blockquote>\n<p>Rust æœ‰ä¸€ä¸ªåä¸º ï¼ çš„ç‰¹æ®Šç±»å‹ï¼Œå®ƒåœ¨ç±»å‹ç³»ç»Ÿä¸­ç§°ä¸ºç©ºç±»å‹ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä»»ä½•å€¼ã€‚å®ƒä¹Ÿä»ä¸è¿”å›çš„å‡½æ•°ä¸­å……å½“è¿”å›å€¼çš„ç±»å‹ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n     \n  <span class=\"token keyword\">let</span> x<span class=\"token punctuation\">:</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//</span>\n    <span class=\"token keyword\">let</span> y<span class=\"token operator\">=</span><span class=\"token function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">bar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token operator\">!</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//å‘æ•£å‡½æ•°è¦æœ‰ä¸€ä¸ª panic! å¦åˆ™ä¼šæŠ¥é”™</span>\n    <span class=\"token keyword\">let</span> x <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"x= {}\"</span><span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token macro property\">panic!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å‘æ•£å‡½æ•°ï¼ï¼ï¼\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">//è¿™é‡Œæ²¡æœ‰å¤ªæ˜ç™½ï¼Œåé¢å†åŠ å¼ºä¸€ä¸‹è¿™é‡Œ</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">bar1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">//è¿™ä¸ªæ‹¬å·ç›¸å½“äº c/c++ ä¸­çš„ void </span>\n    <span class=\"token macro property\">println!</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"è¿™ä¸ªä¹Ÿä»£è¡¨æ²¡æœ‰è¿”å›çš„æ„æ€\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><code>ç±»å‹ ! çš„è¡¨è¾¾å¼å¯ä»¥è¢«å¼ºåˆ¶è½¬æ¢ä¸ºå…¶ä»–çš„ä»»æ„ç±»å‹ã€‚</code></p>\n<p>ä½¿ç”¨äº† never çš„ç±»å‹ï¼šï¼ˆä¸€äº›ï¼‰</p>\n<ul><li>panic!</li><li>å¾ªç¯ loopï¼ˆå®ƒçš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ ï¼ï¼‰</li><li>continue çš„è¿”å›å€¼ç±»å‹ä¹Ÿæ˜¯ !</li></ul>\n<h5><a id=\"_Sized_trait_6136\"></a>åŠ¨æ€å¤§å°ç±»å‹å’Œ Sized trait</h5>\n<blockquote>\n<p>åŠ¨æ€ç±»å‹å¤§å°ã€€DSTï¼›ä¹Ÿå°±æ˜¯ä¸ç¡®å®šå¤§å°ç±»å‹ï¼›å®ƒä»¬åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå…¶å¤§å°</p>\n</blockquote>\n<p>str å°±æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹å¤§å°ï¼›ï¼ˆ<strong>è¿™é‡Œæ˜¯ str ä¸æ˜¯ &amp;str</strong>ï¼‰</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">let</span> s1<span class=\"token punctuation\">:</span><span class=\"token keyword\">str</span><span class=\"token operator\">=</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//str ç±»å‹åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå¤§å°ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½åˆ›å»ºå‡º str ç±»å‹çš„å˜é‡</span>\n    <span class=\"token keyword\">let</span> s2<span class=\"token punctuation\">:</span><span class=\"token keyword\">str</span><span class=\"token operator\">=</span><span class=\"token string\">\"world\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//ä¸Šé¢ä¸¤ä¸ªéƒ½æŠ¥é”™ï¼Œæ— æ³•ä½¿ç”¨</span>\n\n<span class=\"token comment\">//ä¸Šé¢ä»£ç æ¢æˆ  &amp;strå°±å¯ä»¥ä½¿ç”¨äº†</span>\n<span class=\"token comment\">//å› ä¸º &amp;str å®é™…ä¸Šå°±ç”± str çš„åœ°å€å’Œå®ƒçš„é•¿åº¦ä¸¤ä¸ªå€¼æ„æˆçš„</span>\n\n</code></pre>\n<p>trait ä¹Ÿå°±æ˜¯ä¸€ç§åŠ¨æ€å¤§å°ç±»å‹ï¼Œæ¯ä¸€ä¸ª trait éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥é€šè¿‡åç§°æ¥è¿›è¡Œå¼•ç”¨çš„åŠ¨æ€å¤§å°ç±»å‹ã€‚</p>\n<p><strong>Rust æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„ Sized trait æ¥ç¡®å®šä¸€ä¸ªç±»å‹çš„å¤§å°åœ¨ç¼–è¯‘æ—¶æ˜¯å¦å¯çŸ¥ï¼Œrust ä¼šä¸ºæ¯ä¸€ä¸ªæ³›å‹å‡½æ•°éšå¼åœ°æ·»åŠ  Sized çº¦æŸ</strong></p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä¸Šæˆå‡½æ•°ä¼šè¢«éšå¼è½¬æ¢ä¸ºï¼š</span>\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Sized</span><span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><mark>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ³›å‹å‡½æ•°åªèƒ½è¢«ç”¨äºåœ¨ç¼–è¯‘æ—¶å·²ç»çŸ¥é“å¤§å°çš„ç±»å‹ã€‚</mark></p>\n<p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç‰¹æ®Šè¯­æ³•æ¥è§£é™¤é™åˆ¶ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">generic</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">T</span> <span class=\"token punctuation\">:</span> <span class=\"token operator\">?</span><span class=\"token class-name\">Sized</span> <span class=\"token operator\">&gt;</span> <span class=\"token punctuation\">(</span>t <span class=\"token punctuation\">:</span> <span class=\"token operator\">&amp;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">...</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*\n?Sized trait çº¦æŸè¡¨è¾¾äº†ä¸ Sized ç›¸åçš„å«ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒç†è§£ä¸ºï¼šT å¯èƒ½æ˜¯ä¹Ÿå¯èƒ½ä¸æ˜¯ Sized çš„\nè¿™ä¸ªè¯­æ³•åªèƒ½ç”¨åœ¨ Sized ä¸Šï¼Œè€Œä¸èƒ½è¢«ç”¨äºå…¶ä»– trait\nä¸Šé¢å°†ç±»å‹ t æ”¹ä¸ºäº† &amp;T ï¼›å› ä¸ºå¯èƒ½ä¸æ˜¯ Sized\n*/</span>\n</code></pre>\n<h3><a id=\"_6183\"></a>é«˜çº§å‡½æ•°ä¸é—­åŒ…</h3>\n<h4><a id=\"_6185\"></a>å‡½æ•°æŒ‡é’ˆ</h4>\n<p>fn å°±æ˜¯å‡½æ•°æŒ‡é’ˆ</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">add_one</span><span class=\"token punctuation\">(</span>x <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">{<!-- --></span>\n    x<span class=\"token operator\">+</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">do_twice</span><span class=\"token punctuation\">(</span>f <span class=\"token punctuation\">:</span> <span class=\"token keyword\">fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">,</span> arg <span class=\"token punctuation\">:</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">f</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token function\">f</span><span class=\"token punctuation\">(</span>arg<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//è¯­æ³•ï¼š</span>\nf <span class=\"token punctuation\">:</span> <span class=\"token keyword\">fn</span><span class=\"token punctuation\">(</span>å‚æ•°åˆ—è¡¨ç±»å‹<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> è¿”å›å€¼ç±»å‹\n</code></pre>\n<blockquote>\n<p>ä¸é—­åŒ…ä¸åŒï¼Œ fn æ˜¯ä¸€ä¸ªç±»å‹è€Œä¸æ˜¯ä¸€ä¸ª trait ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‡å®š fn ä¸ºå‚æ•°ç±»å‹ï¼Œä¸ç”¨å£°æ˜ä¸€ä¸ªä»¥ Fn trait ä¸ºçº¦æŸçš„æ³›å‹å‚æ•°</p>\n</blockquote>\n<p><code>å‡½æ•°æŒ‡é’ˆå®ç°äº†å…¨éƒ¨ 3 ç§é—­åŒ… trait : Fn FnMut FnOnce </code></p>\n<p><strong>å› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°æŒ‡é’ˆç”¨ä½œå‚æ•°ä¼ é€’ç»™ä¸€ä¸ªæ¥æ”¶é—­åŒ…çš„å‡½æ•°ã€‚</strong></p>\n<p>eg: æ—¢å¯ä»¥ä½¿ç”¨é—­åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½åå‡½æ•°ï¼š</p>\n<pre><code class=\"prism language-rust\"> <span class=\"token keyword\">let</span> list_of_numbers <span class=\"token operator\">=</span> <span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// ä½¿ç”¨ map å‡½æ•°å°†ä¸€ä¸ªæ•´å½¢åŠ¨æ€æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åŠ¨æ€æ•°ç»„</span>\n    <span class=\"token keyword\">let</span> list_of_strings <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span>list_of_numbers<span class=\"token punctuation\">.</span>\n    <span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>i<span class=\"token closure-punctuation punctuation\">|</span></span> i<span class=\"token punctuation\">.</span><span class=\"token function\">to_string</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">let</span> list_of_stringsy<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> list_of_numbers\n    <span class=\"token punctuation\">.</span><span class=\"token function\">iter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ToString</span><span class=\"token punctuation\">::</span>to_string<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//è¿™é‡Œå¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šè¯­æ³•;å› ä¸ºè¿™ä¸ªä½œç”¨åŸŸä¸­å­˜åœ¨å¤šä¸ªå¯ç”¨çš„ to_string å‡½æ•°</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">enum</span> <span class=\"token type-definition class-name\">Status</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Value</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">u32</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token class-name\">Stop</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">let</span> list_of_statuses<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token class-name\">Status</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">0u32</span><span class=\"token punctuation\">..</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Status</span><span class=\"token punctuation\">::</span><span class=\"token class-name\">Value</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">collect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h5><a id=\"_6238\"></a>è¿”å›é—­åŒ…</h5>\n<p><strong>æ— æ³•åœ¨å‡½æ•°ç›´æ¥è¿”å›ä¸€ä¸ªé—­åŒ…</strong></p>\n<p>Rustæ— æ³•æ¨æ–­å‡ºéœ€è¦å¤šå¤§çš„ç©ºé—´æ¥å­˜å‚¨è¿”å›çš„é—­åŒ…ã€‚</p>\n<p>ğŸ“–ï¼šè§£å†³ï¼š ä½¿ç”¨ trait å¯¹è±¡ï¼š</p>\n<pre><code class=\"prism language-rust\"><span class=\"token keyword\">fn</span> <span class=\"token function-definition function\">returns_closure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token class-name\">Box</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">dyn</span> <span class=\"token class-name\">Fn</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">i32</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">-&gt;</span> <span class=\"token keyword\">i32</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token class-name\">Box</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token closure-params\"><span class=\"token closure-punctuation punctuation\">|</span>x<span class=\"token closure-punctuation punctuation\">|</span></span> x<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_6252\"></a>å®</h4>\n<blockquote>\n<p>ä½¿ç”¨ã€€macro_rules! æ„é€ çš„å£°æ˜å®åŠå¦å¤– 3 ç§è¿‡ç¨‹å®ï¼š</p>\n<ul><li>ç”¨äºç»“æ„ä½“æˆ–æšä¸¾çš„è‡ªå®šä¹‰ #[derive] å®ï¼Œå®ƒå¯ä»¥æŒ‡å®šéš derive å±æ€§è‡ªåŠ¨æ·»åŠ çš„ä»£ç </li><li>ç”¨äºä¸ºä»»æ„æ¡ç›®æ·»åŠ è‡ªå®šä¹‰å±æ€§çš„å±æ€§å®</li><li>çœ‹èµ·æ¥ç±»ä¼¼äºå‡½æ•°çš„å‡½æ•°å®ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¹¶å¤„ç†ä¸€æ®µæ ‡è®°åºåˆ—</li></ul>\n</blockquote>\n<h5><a id=\"_6260\"></a>å®å’Œå‡½æ•°ä¹‹é—´çš„å·®åˆ«</h5>\n<blockquote>\n<p>å®æ˜¯ä¸€ç§ç”¨äºç¼–å†™å…¶ä»–ä»£ç çš„ä»£ç ç¼–å†™æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å…ƒç¼–ç¨‹èŒƒå¼</p>\n<p>åŒºåˆ«ï¼š</p>\n<ul><li>å‡½æ•°åœ¨å®šä¹‰ç­¾åæ—¶å¿…é¡»å£°æ˜è‡ªå·±å‚æ•°çš„ä¸ªæ•°ä¸ç±»å‹ï¼Œè€Œå®åˆ™èƒ½å¤Ÿå¤„ç†<strong>å¯å˜æ•°é‡çš„å‚æ•°</strong>ï¼›</li><li>å®çš„å®šä¹‰è¦æ¯”å‡½æ•°å®šä¹‰å¤æ‚å¾—å¤š</li><li>åœ¨æŸä¸ªæ–‡ä»¶ä¸­è°ƒç”¨å®æ—¶ï¼Œå¿…é¡»æå‰å®šä¹‰å®æˆ–å°†å®å¼•å…¥å½“å‰ä½œç”¨åŸŸä¸­ï¼Œè€Œå‡½æ•°åˆ™å¯ä»¥åœ¨ä»»æ„ä½ç½®å®šä¹‰å¹¶åœ¨ä»»æ„ä½ç½®ä½¿ç”¨</li></ul>\n</blockquote>\n<h5><a id=\"_macro_rules__6272\"></a>ç”¨äºé€šç”¨å…ƒç¼–ç¨‹çš„ macro_rules! å£°æ˜å®</h5>\n<pre><code class=\"prism language-rust\">  <span class=\"token keyword\">let</span> v <span class=\"token punctuation\">:</span> <span class=\"token class-name\">Vec</span><span class=\"token operator\">&lt;</span><span class=\"token keyword\">u32</span><span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span><span class=\"token macro property\">vec!</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// æ ‡å‡†åº“ä¸­ç®€åŒ–åçš„ vec! å®å®šä¹‰</span>\n    <span class=\"token attribute attr-name\">#[macro_export]</span>\n    <span class=\"token macro property\">macro_rules!</span> vec <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token punctuation\">(</span>$ <span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">:</span><span class=\"token fragment-specifier punctuation\">expr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token keyword\">let</span> <span class=\"token keyword\">mut</span> temp_vec<span class=\"token operator\">=</span><span class=\"token class-name\">Vec</span><span class=\"token punctuation\">::</span><span class=\"token function\">new</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                $<span class=\"token punctuation\">(</span>\n                    temp_vec<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$x</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>\n            temp_vec\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//#[macro_export] æ„å‘³ç€è¿™ä¸ªå®ä¼šåœ¨å®ƒæ‰€å¤„çš„åŒ…è¢«å¼•å…¥ä½œç”¨åŸŸåå¯ç”¨ï¼Œç¼ºå°‘äº†è¿™ä¸ªæ ‡æ³¨çš„å®åˆ™ä¸èƒ½è¢«å¼•å…¥ä½œç”¨åŸŸ</span>\n</code></pre>\n<p><strong>æˆ‘ä»¬ä½¿ç”¨ macro_rules! åŠä¸å¸¦æ„Ÿå¹å·çš„åç§°æ¥å¼€å§‹å®šä¹‰å®ã€‚</strong></p>\n<h5><a id=\"_6297\"></a>åŸºäºå±æ€§åˆ›å»ºä»£ç çš„è¿‡ç¨‹å®</h5>\n<blockquote>\n<p>è¿‡ç¨‹å®ï¼ˆå®ƒä»¬çš„å½¢å¼åƒå‡½æ•°ï¼‰ï¼š</p>\n<p>æœ‰ 3 ç§ï¼š è‡ªå®šä¹‰æ´¾ç”Ÿå®ã€å±æ€§å®ã€å‡½æ•°å®</p>\n<p>å½“åˆ›å»ºè¿‡ç¨‹å®æ—¶å®çš„å®šä¹‰å¿…é¡»å•ç‹¬æ”¾åœ¨å®ƒä»¬è‡ªå·±çš„åŒ…ä¸­ï¼Œå¹¶ä½¿ç”¨ç‰¹æ®Šçš„åŒ…ç±»å‹ã€‚</p>\n</blockquote>\n<p>å®çŸ¥é“çš„ä¸å¤šï¼Œå¾—åé¢å†ä»”ç»†çœ‹ä¸€ä¸‹</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 1, "csharp": 0, "python": 1, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-05-03 06:00:00", "summary": "å­¦ä¹ å»ºè®®ï¼šå…ˆä»æ•´ä½“å‡ºå‘ï¼Œä¸è¦è®©è‡ªå·±é™·å…¥åˆ°ç»†èŠ‚ä¸­å»å’Œè‡ªå·±å·²çŸ¥çš„çŸ¥è¯†å»ºç«‹è”ç³»å’Œä¸€æ ·é‡‡ç”¨ç»„åˆçš„æ‰‹æ®µå®ç°ä»£ç å¤ç”¨ï¼Œä¸è¦æ·±æ€ä¸ºä»€ä¹ˆä¸æ˜¯ç»§æ‰¿å­¦ä¼šé˜…è¯»æºç ï¼Œä»æºç ä¸­å­¦ä¹ è®¾è®¡å“²å­¦ä½¿ç”¨é¡¹ç›®ååœ¨ç»ˆç«¯ä¸­æ„å»ºé¡¹ç›®ä½¿ç”¨æ¥æ„å»ºå’Œ"}