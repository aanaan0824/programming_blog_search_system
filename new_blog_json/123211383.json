{"blogid": "123211383", "writerAge": "码龄11年", "writerBlogNum": "3780", "writerCollect": "5264", "writerComment": "522", "writerFan": "2658", "writerGrade": "9级", "writerIntegral": "63842", "writerName": "allway2", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123211383.jpg", "writerRankTotal": "50", "writerRankWeekly": "1307", "writerThumb": "1068", "writerVisitNum": "4699175", "blog_read_count": "2130", "blog_time": "已于 2022-03-01 17:36:59 修改", "blog_title": "C# – 如何在控制台应用程序中添加和读取 appsetting.json 文件", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<div style=\"margin-left:0;\">\n<p style=\"margin-left:0;\"><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\">在这篇文章中，我们将了解如何在 .NET Core 控制台应用程序中添加和读取 appsettings.json 文件。<br/> 我们打开 Visual Studio 并创建一个名为“ <strong>TestJson</strong> ”的控制台应用程序 (.NET Core) 项目：</span></span></p>\n<div style=\"text-align:center;\">\n<img alt=\"\" src=\"..\\..\\static\\image\\9c7fa7f24daf30a1a3e3b0518b9df5f6.png\"/>\n</div>\n<p style=\"margin-left:0;\"></p>\n<p style=\"margin-left:0;\"><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\">现在，我们添加一个名为“Parameters.json”的文件，我们将在其中存储一个 DB 的连接字符串和两个名为 ValueABC 和 ValueDEF 的参数：</span></span></p>\n<pre><code class=\"language-javascript\">{\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Warning\"\n    }\n  },\n  \"ConnectionStrings\": {\n    \"DbConnection\": \"ExampleTestConnection\"\n  },\n  \"Parameter\": {\n    \"ValueABC\": \"TestValue_ABC\",\n    \"ValueDEF\": \"TestValue_DEF\"\n  }\n}</code></pre>\n<p style=\"margin-left:0;\"><br/><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\"><strong>重要提示：</strong>我们必须将文件的属性“复制到输出目录”设置为：<strong>“如果较新则复制”</strong>：</span></span></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\2d217ac7dc2b2544104d3cd7b8cac662.png\"/></p>\n<p style=\"margin-left:0;\"></p>\n<p style=\"margin-left:0;\"><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\">现在，为了读取 Parameters.json 文件，我们必须使用 NuGet 包添加三个库：<br/><strong>Microsoft.Extensions.Configuration<br/> Microsoft.Extensions.Configuration.FileExtensions<br/> Microsoft.Extensions.Configuration.Json</strong></span></span></p>\n<p style=\"margin-left:0;\"><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\">最后，我们修改 Program.cs 以读取 appsetting 文件：</span></span></p>\n<pre><code class=\"language-cs\">using Microsoft.Extensions.Configuration;\nusing System;\nusing System.IO;\n \nnamespace TestJson\n{\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Console.WriteLine(\"Starting reading file .json\");\n \n            Console.WriteLine($\"ConnectioString: {GetDbConnection()}\");\n \n            Console.WriteLine($\"The parameters are: {GetParameters()}\");\n \n            Console.ReadLine();\n        }\n \n        private static string GetDbConnection()\n        {\n            var builder = new ConfigurationBuilder()\n                                .SetBasePath(Directory.GetCurrentDirectory())\n                                .AddJsonFile(\"Parameters.json\", optional: true, reloadOnChange: true);\n \n            string strConnection = builder.Build().GetConnectionString(\"DbConnection\");\n \n            return strConnection;\n        }\n \n        private static string GetParameters()\n        {\n            var builder = new ConfigurationBuilder()\n                                .SetBasePath(Directory.GetCurrentDirectory())\n                                .AddJsonFile(\"Parameters.json\", optional: true, reloadOnChange: true);\n \n            var val1 = builder.Build().GetSection(\"Parameter\").GetSection(\"ValueABC\").Value;\n            var val2 = builder.Build().GetSection(\"Parameter\").GetSection(\"ValueDEF\").Value;\n \n            return $\"The values of parameters are: {val1} and {val2}\";\n        }\n    }\n}</code></pre>\n<p style=\"margin-left:0;\"><span style=\"color:#444444;\"><span style=\"background-color:#ffffff;\">如果我们运行应用程序，这将是结果：</span></span></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\19029f0ad4271d43ff7ea0fb6655047d.png\"/></p>\n<p style=\"margin-left:0;\"><br/>  </p>\n</div>\n<p></p>\n</div>\n</div>", "first_tag": "JavaScript", "cpp": 0, "csharp": 1, "python": 0, "javascript": 1, "java": 0, "sql": 0, "php": 0, "time": "2022-03-01 17:36:59", "summary": "在这篇文章中，我们将了解如何在控制台应用程序中添加和读取文件。我们打开并创建一个名为的控制台应用程序项目：现在，我们添加一个名为的文件，我们将在其中存储一个的连接字符串和两个名为和的参数：重要提示：我"}