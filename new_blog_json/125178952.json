{"blogid": "125178952", "writerAge": "码龄5年", "writerBlogNum": "771", "writerCollect": "825", "writerComment": "144", "writerFan": "756", "writerGrade": "6级", "writerIntegral": "8627", "writerName": "CRMEB定制开发", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125178952.jpg", "writerRankTotal": "1833", "writerRankWeekly": "9376", "writerThumb": "189", "writerVisitNum": "385139", "blog_read_count": "624", "blog_time": "于 2022-06-08 10:01:09 发布", "blog_title": "linux 安装及使用 composer", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>开始安装：</p>\n<p>1：下载 composer 包：</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">curl</span> <span class=\"token variable\">-sS</span> <span class=\"token variable\">https</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">getcomposer</span><span class=\"token punctuation\">.</span><span class=\"token variable\">org</span><span class=\"token punctuation\">/</span><span class=\"token variable\">installer</span> <span class=\"token punctuation\">|</span> <span class=\"token variable\">php</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错内容：</p>\n<p>Some settings on your machine make Composer unable to work properly.</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">Make</span> <span class=\"token variable\">sure</span> <span class=\"token variable\">that</span> <span class=\"token variable\">you</span> <span class=\"token variable\">fix</span> <span class=\"token variable\">the</span> <span class=\"token variable\">issues</span> <span class=\"token variable\">listed</span> <span class=\"token variable\">below</span> <span class=\"token variable\">and</span> <span class=\"token variable\">run</span> <span class=\"token variable\">this</span> <span class=\"token variable\">script</span> <span class=\"token variable\">again</span><span class=\"token punctuation\">:</span>\n \n<span class=\"token variable\">The</span> <span class=\"token variable\">suhosin</span><span class=\"token punctuation\">.</span><span class=\"token variable\">executor</span><span class=\"token punctuation\">.</span><span class=\"token variable\">include</span><span class=\"token punctuation\">.</span><span class=\"token variable\">whitelist</span> <span class=\"token variable\">setting</span> <span class=\"token variable\">is</span> <span class=\"token variable\">incorrect</span><span class=\"token punctuation\">.</span>\n<span class=\"token variable\">Add</span> <span class=\"token variable\">the</span> <span class=\"token variable\">following</span> <span class=\"token variable\">to</span> <span class=\"token variable\">the</span> <span class=\"token variable\">end</span> <span class=\"token variable\">of</span> <span class=\"token variable\">your</span> <span class=\"token punctuation\">`</span><span class=\"token variable\">php</span><span class=\"token punctuation\">.</span><span class=\"token variable\">ini</span><span class=\"token punctuation\">`</span> <span class=\"token variable\">or</span> <span class=\"token variable\">suhosin</span><span class=\"token punctuation\">.</span><span class=\"token variable\">ini</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">Example</span> <span class=\"token variable\">path</span> <span class=\"token brackets\"><span class=\"token punctuation\">[</span><span class=\"token variable\">for Debian</span><span class=\"token punctuation\">]</span></span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">/</span><span class=\"token variable\">etc</span><span class=\"token punctuation\">/</span><span class=\"token variable\">php5</span><span class=\"token punctuation\">/</span><span class=\"token variable\">cli</span><span class=\"token punctuation\">/</span><span class=\"token variable\">conf</span><span class=\"token punctuation\">.</span><span class=\"token variable\">d</span><span class=\"token punctuation\">/</span><span class=\"token variable\">suhosin</span><span class=\"token punctuation\">.</span><span class=\"token variable\">ini</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token variable\">suhosin</span><span class=\"token punctuation\">.</span><span class=\"token variable\">executor</span><span class=\"token punctuation\">.</span><span class=\"token variable\">include</span><span class=\"token punctuation\">.</span><span class=\"token variable\">whitelist</span> <span class=\"token punctuation\">=</span> <span class=\"token variable\">phar</span>\n \n<span class=\"token variable\">The</span> <span class=\"token variable\">php</span><span class=\"token punctuation\">.</span><span class=\"token variable\">ini</span> <span class=\"token variable\">used</span> <span class=\"token variable\">by</span> <span class=\"token variable\">your</span> <span class=\"token variable\">command-line</span> <span class=\"token variable\">PHP</span> <span class=\"token variable\">is</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">/</span><span class=\"token variable\">etc</span><span class=\"token punctuation\">/</span><span class=\"token variable\">php</span><span class=\"token punctuation\">.</span><span class=\"token variable\">ini</span>\n<span class=\"token variable\">If</span> <span class=\"token variable\">you</span> <span class=\"token variable\">can</span> <span class=\"token variable\">not</span> <span class=\"token variable\">modify</span> <span class=\"token variable\">the</span> <span class=\"token variable\">ini</span> <span class=\"token variable\">file</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">you</span> <span class=\"token variable\">can</span> <span class=\"token variable\">also</span> <span class=\"token variable\">run</span> <span class=\"token punctuation\">`</span><span class=\"token variable\">php</span> <span class=\"token variable\">-d</span> <span class=\"token variable\">option</span><span class=\"token punctuation\">=</span><span class=\"token variable\">value</span><span class=\"token punctuation\">`</span> <span class=\"token variable\">to</span> <span class=\"token variable\">modify</span> <span class=\"token variable\">ini</span> <span class=\"token variable\">values</span> <span class=\"token variable\">on</span> <span class=\"token variable\">the</span> <span class=\"token variable\">fly</span><span class=\"token punctuation\">.</span> <span class=\"token variable\">You</span> <span class=\"token variable\">can</span> <span class=\"token variable\">use</span> <span class=\"token variable\">-d</span> <span class=\"token variable\">multiple</span> <span class=\"token variable\">times</span><span class=\"token punctuation\">.</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错的原因是我 php 安装了 suhosin 扩展，解决方法，报错中已给出，就是在 php.ini 文件中添加</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">suhosin</span><span class=\"token punctuation\">.</span><span class=\"token variable\">executor</span><span class=\"token punctuation\">.</span><span class=\"token variable\">include</span><span class=\"token punctuation\">.</span><span class=\"token variable\">whitelist</span> <span class=\"token punctuation\">=</span> <span class=\"token variable\">phar</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\76bbe9a4f5b5475bb137952e74c67890.png\"/></p>\n<p>2：安装 Composer</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">mv</span> <span class=\"token variable\">composer</span><span class=\"token punctuation\">.</span><span class=\"token variable\">phar</span> <span class=\"token punctuation\">/</span><span class=\"token variable\">usr</span><span class=\"token punctuation\">/</span><span class=\"token variable\">local</span><span class=\"token punctuation\">/</span><span class=\"token variable\">bin</span><span class=\"token punctuation\">/</span><span class=\"token variable\">composer</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>3：查看安装 Composer 是否成功</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">composer</span> <span class=\"token variable\">-v</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a033a5aef2ff4077a7f8cf76e6093476.png\"/></p>\n<p>4：设置中国镜像</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">composer</span> <span class=\"token variable\">config</span> <span class=\"token variable\">-g</span> <span class=\"token variable\">repo</span><span class=\"token punctuation\">.</span><span class=\"token variable\">packagist</span> <span class=\"token variable\">composer</span> <span class=\"token variable\">https</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">packagist</span><span class=\"token punctuation\">.</span><span class=\"token variable\">phpcomposer</span><span class=\"token punctuation\">.</span><span class=\"token variable\">com</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错：</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">Do</span> <span class=\"token variable\">not</span> <span class=\"token variable\">run</span> <span class=\"token variable\">Composer</span> <span class=\"token variable\">as</span> <span class=\"token variable\">root</span><span class=\"token punctuation\">/</span><span class=\"token variable\">super</span> <span class=\"token variable\">user</span><span class=\"token punctuation\">!</span> <span class=\"token variable\">See</span> <span class=\"token variable\">https</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">getcomposer</span><span class=\"token punctuation\">.</span><span class=\"token variable\">org</span><span class=\"token punctuation\">/</span><span class=\"token variable\">root</span> <span class=\"token variable\">for</span> <span class=\"token variable\">details</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错原因：使用 root 用户运行 composer 是不可以的。</p>\n<p>官网给出的解释：</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">https</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">getcomposer</span><span class=\"token punctuation\">.</span><span class=\"token variable\">org</span><span class=\"token punctuation\">/</span><span class=\"token variable\">doc</span><span class=\"token punctuation\">/</span><span class=\"token variable\">faqs</span><span class=\"token punctuation\">/</span><span class=\"token variable\">how-to-install-untrusted-packages-safely</span><span class=\"token punctuation\">.</span><span class=\"token variable\">md</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>解决方法很容易，给你的服务器添加另一个用户，使用新用户来操作 composer</p>\n<p>5：安装 thinkphp5.1</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">composer</span> <span class=\"token variable\">create-project</span> <span class=\"token variable\">topthink</span><span class=\"token punctuation\">/</span><span class=\"token variable\">think</span> <span class=\"token variable\">tp5</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错：</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">PHP</span> <span class=\"token variable\">Fatal</span> <span class=\"token variable\">error</span><span class=\"token punctuation\">:</span>  <span class=\"token variable\">Allowed</span> <span class=\"token variable\">memory</span> <span class=\"token variable\">size</span> <span class=\"token variable\">of</span> <span class=\"token number\">134217728</span> <span class=\"token variable\">bytes</span> <span class=\"token variable\">exhausted</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">tried</span> <span class=\"token variable\">to</span> <span class=\"token variable\">allocate</span> <span class=\"token number\">3194636</span> <span class=\"token variable\">bytes</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">in</span> <span class=\"token variable\">phar</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">usr</span><span class=\"token punctuation\">/</span><span class=\"token variable\">local</span><span class=\"token punctuation\">/</span><span class=\"token variable\">bin</span><span class=\"token punctuation\">/</span><span class=\"token variable\">composer</span><span class=\"token punctuation\">/</span><span class=\"token variable\">src</span><span class=\"token punctuation\">/</span><span class=\"token variable\">Composer</span><span class=\"token punctuation\">/</span><span class=\"token variable\">Cache</span><span class=\"token punctuation\">.</span><span class=\"token variable\">php</span> <span class=\"token variable\">on</span> <span class=\"token variable\">line</span> <span class=\"token number\">94</span>\n \n<span class=\"token variable\">Fatal</span> <span class=\"token variable\">error</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">Allowed</span> <span class=\"token variable\">memory</span> <span class=\"token variable\">size</span> <span class=\"token variable\">of</span> <span class=\"token number\">134217728</span> <span class=\"token variable\">bytes</span> <span class=\"token variable\">exhausted</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">tried</span> <span class=\"token variable\">to</span> <span class=\"token variable\">allocate</span> <span class=\"token number\">3194636</span> <span class=\"token variable\">bytes</span><span class=\"token punctuation\">)</span> <span class=\"token variable\">in</span> <span class=\"token variable\">phar</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token punctuation\">/</span><span class=\"token variable\">usr</span><span class=\"token punctuation\">/</span><span class=\"token variable\">local</span><span class=\"token punctuation\">/</span><span class=\"token variable\">bin</span><span class=\"token punctuation\">/</span><span class=\"token variable\">composer</span><span class=\"token punctuation\">/</span><span class=\"token variable\">src</span><span class=\"token punctuation\">/</span><span class=\"token variable\">Composer</span><span class=\"token punctuation\">/</span><span class=\"token variable\">Cache</span><span class=\"token punctuation\">.</span><span class=\"token variable\">php</span> <span class=\"token variable\">on</span> <span class=\"token variable\">line</span> <span class=\"token number\">94</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>解决方法：</p>\n<p>终端报出了 Allowed memory size of 134217728 bytes exhausted 错误，是因为 php 默认内存限制是 128M，所以需要修改 php.ini 文件。</p>\n<p>查找到 memory_limit = 128M 这一行，将 128M 改大点，我这里直接是改成了 2048M。<br/> 2、重启 apache<br/> 3、重新执行 php 文件，成功，OK</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\62358047fe5d4f9fbf612ea44a614a28.png\"/></p>\n<p>更新方法跟 windows 一样</p>\n<p>进入应用根目录，执行：</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">composer</span> <span class=\"token variable\">update</span> <span class=\"token variable\">topthink</span><span class=\"token punctuation\">/</span><span class=\"token variable\">framework</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>更新操作会删除 thinkphp 目录重新下载安装新版本，但不会影响 application 目录，因此不要在核心框架目录添加任何应用代码和类库。</p>\n<p>安装和更新命令所在的目录是不同的，更新必须在你的应用根目录下面执行</p>\n<p>执行</p>\n<pre><code class=\"prism language-handlebars\"><span class=\"token variable\">composer</span> <span class=\"token variable\">dump-autoload</span>\n<span class=\"token variable\">复制代码</span>\n</code></pre>\n<p>报错</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\980c6b43874b4817bc9ac61bb82350c5.png\"/></p>\n<p>解决方式：</p>\n<p>核对项目中的供应商文件夹。rm -rf vendor/<br/> 核对项目中的 composer.lock 文件。rm composer.lock<br/> 清除项目中的 composer 缓存。composer clearcache<br/> 全局更新编辑器以使其平滑 composer global update<br/> 然后在项目中重新安装。composer install<br/> 有好的建议，请在下方输入你的评论</p>\n<p>源码附件已经打包好上传到百度云了，大家自行下载即可～</p>\n<blockquote>\n<p>链接: https://pan.baidu.com/s/14G-bpVthImHD4eosZUNSFA?pwd=yu27<br/> 提取码: yu27<br/> 百度云链接不稳定，随时可能会失效，大家抓紧保存哈。</p>\n</blockquote>\n<p>如果百度云链接失效了的话，请留言告诉我，我看到后会及时更新～</p>\n<p>开源地址<br/> 码云地址：<br/> <a href=\"http://ym.baisouvip.cn/html/wzym/36.html\">http://github.crmeb.net/u/defu</a></p>\n<p>Github 地址：<br/> <a href=\"http://ym.baisouvip.cn/html/wzym/36.html\">http://github.crmeb.net/u/defu</a></p>\n<p>开源不易，Star 以表尊重，感兴趣的朋友欢迎 Star，提交 PR，一起维护开源项目，造福更多人！</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-06-08 10:01:09", "summary": "开始安装：：下载包：复制代码报错内容："}