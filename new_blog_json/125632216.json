{"blogid": "125632216", "writerAge": "码龄5年", "writerBlogNum": "652", "writerCollect": "1793", "writerComment": "209", "writerFan": "233", "writerGrade": "7级", "writerIntegral": "15251", "writerName": "CaseyWei", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125632216.jpg", "writerRankTotal": "2353", "writerRankWeekly": "19615", "writerThumb": "560", "writerVisitNum": "1417041", "blog_read_count": "1185", "blog_time": "于 2022-07-06 08:58:36 发布", "blog_title": "php——laravel缓存cache", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>Laravel中的cache为我们提供了三种缓存机制。</p>\n<p>Redis，memcache，以及框架的文件缓存。</p>\n<p>这里主要看的是cache中的文件缓存。</p>\n<p>一：访问多个缓存存储</p>\n<p>使用 Cache 门面，你可以使用 store 方法访问不同的缓存存储器，传入 store 方法的键就是 cache 配置文件中 stores 配置数组里列出的相应的存储器：</p>\n<pre><code>$value = Cache::store('file')-&gt;get('foo');\nCache::store('redis')-&gt;put('bar', 'baz', 600);  // 10分钟\n</code></pre>\n<p>二：从缓存中获取数据</p>\n<p>1：获取数据并设置默认值</p>\n<p>（1）：正常取值</p>\n<pre><code>$value = Cache::get('key');\n</code></pre>\n<p>（2）：如果不存在，附默认值</p>\n<pre><code>$value = Cache::get('key', 'default');\n</code></pre>\n<p>（3）：使用闭包操作，附默认值</p>\n<pre><code>$value = Cache::get('key', function() {\n    return DB::table(...)-&gt;get();\n});\n</code></pre>\n<p>2：检查缓存项是否存在</p>\n<p>has 方法用于判断缓存项是否存在，如果值为 null 或 false 该方法会返回 false：</p>\n<pre><code>if (Cache::has('key')) {\n    //\n}\n</code></pre>\n<p>3：数值增加/减少</p>\n<p>increment 和 decrement 方法可用于调整缓存中的整型数值。这两个方法都可以接收第二个参数来指明缓存项数值增加和减少的数目：</p>\n<pre><code>Cache::increment('key');\nCache::increment('key', $amount);\nCache::decrement('key');\nCache::decrement('key', $amount);\n</code></pre>\n<p>4：获取 &amp; 存储</p>\n<p>有时候你可能想要获取缓存项，但如果请求的缓存项不存在时给它存储一个默认值。例如，你可能想要从缓存中获取所有用户，或者如果它们不存在的话，从数据库获取它们并将其添加到缓存中，你可以通过使用 Cache::remember 方法实现：</p>\n<pre><code>$value = Cache::remember('users', $seconds, function() {\n    return DB::table('users')-&gt;get();\n});\n</code></pre>\n<p>如果缓存项不存在，传递给 remember 方法的闭包被执行并且将结果存放到缓存中。</p>\n<p>你还可以使用 rememberForever 方法从缓存中获取数据或者将其永久存储起来：</p>\n<pre><code>$value = Cache::rememberForever('users', function() {\n    return DB::table('users')-&gt;get();\n});\n</code></pre>\n<p>5：获取 &amp; 删除</p>\n<p>如果你需要从缓存中获取缓存项然后删除，你可以使用 pull 方法，和 get 方法一样，如果缓存项不存在的话返回 null：</p>\n<pre><code>$value = Cache::pull('key');\n</code></pre>\n<p>三：缓存中存储数据</p>\n<p>1：获取存储数据</p>\n<p>你可以使用 Cache 门面上的 put 方法在缓存中存储数据。当你在缓存中存储数据的时候，需要指定数据被缓存的时间（秒数）：</p>\n<pre><code>Cache::put('key', 'value', $seconds);\n</code></pre>\n<p>如果没有传递缓存时间到 put 方法，则缓存项永久有效：</p>\n<pre><code>Cache::put('key', 'value');\n</code></pre>\n<p>除了传递缓存项失效时间，你还可以传递一个代表缓存项有效时间的 PHP Datetime 实例：</p>\n<pre><code>$expiresAt = Carbon::now()-&gt;addMinutes(10);\nCache::put('key', 'value', $expiresAt);\n</code></pre>\n<p>2：缓存不存在时存储数据</p>\n<p>add 方法只会在缓存项不存在的情况下添加数据到缓存，如果数据被成功添加到缓存返回 true，否则，返回 false：</p>\n<pre><code>Cache::add('key', 'value', $seconds);\n</code></pre>\n<p>3：永久存储数据</p>\n<p>forever 方法用于持久化存储数据到缓存，这些值必须通过 forget 方法手动从缓存中移除：</p>\n<pre><code>Cache::forever('key', 'value');\n</code></pre>\n<p>四：从缓存中移除数据</p>\n<p>可以使用 Cache 门面上的 forget 方法从缓存中移除缓存项数据：</p>\n<pre><code>Cache::forget('key');\n</code></pre>\n<p>还可以通过设置缓存有效期为 0 或负数来移除缓存项：</p>\n<pre><code>Cache::put('key', 'value', 0);\n  \nCache::put('key', 'value', -5);\n</code></pre>\n<p>如果要清除所有缓存，可以通过 flush 方法：</p>\n<pre><code>Cache::flush();\n</code></pre>\n<p>以上基本上就是laravel框架对文件缓存的操作方法</p>\n<p><br/><br/><br/> 链接：https://www.jianshu.com/p/48d44d91ec93/</p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-07-06 08:58:36", "summary": "中的为我们提供了三种缓存机制。，，以及框架的文件缓存。这里主要看的是中的文件缓存。一：访问多个缓存存储使用门面，你可以使用方法访问不同的缓存存储器，传入方法的键就是配置文件中配置数组里列出的相应的存储"}