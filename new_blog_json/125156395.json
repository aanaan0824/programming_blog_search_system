{"blogid": "125156395", "writerAge": "码龄1年", "writerBlogNum": "606", "writerCollect": "633", "writerComment": "44", "writerFan": "13109", "writerGrade": "6级", "writerIntegral": "6318", "writerName": "免费的东西", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125156395.jpg", "writerRankTotal": "2564", "writerRankWeekly": "807", "writerThumb": "115", "writerVisitNum": "276912", "blog_read_count": "4532", "blog_time": "于 2022-06-06 23:09:58 发布", "blog_title": "mysql中如何查看表是否被锁", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_2\"></a>如何查看是否发生死锁</h1>\n<p>在使用mysql的时候，如何查看表是否被锁呢？</p>\n<p>查看表被锁状态和结束死锁步骤：</p>\n<p>1.在mysql命令行执行sql语句</p>\n<pre><code>use dbName;  // 切换到具体数据库\nshow engine innodb status;  // 查询db是否发生死锁\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ab16847ca79f4c99ab1d6bc487e12450.png\"/></p>\n<p>2.查看数据表被锁状态</p>\n<pre><code>show OPEN TABLES where In_use &gt; 0; \n</code></pre>\n<p>该语句可以查询到当前锁表的状态</p>\n<p>3.分析锁表的SQL<br/> 通过sql日志，分析相应SQL，给表加索引，常用字段加索引，表关联字段加索引等方式对sql进行优化。</p>\n<p>4.查看正在锁的事务</p>\n<pre><code>SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS;\n</code></pre>\n<p>在5.5中，information_schema 库中增加了三个关于锁的表（innoDB引擎）：</p>\n<p>innodb_trx ## 当前运行的所有事务<br/> innodb_locks ## 当前出现的锁<br/> innodb_lock_waits ## 锁等待的对应关系<br/> 先来看一下这三张表结构：</p>\n<pre><code>ro</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-06-06 23:09:58", "summary": "如何查看是否发生死锁在使用的时候，如何查看表是否被锁呢？查看表被锁状态和结束死锁步骤：在命令行执行语句切换到具体数据库查询是否发生死锁在这里插入图片描述查看数据表被锁状态该语句可以查询到当前锁表的状态"}