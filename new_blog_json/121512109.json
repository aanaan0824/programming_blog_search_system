{"blogid": "121512109", "writerAge": "码龄4年", "writerBlogNum": "132", "writerCollect": "132", "writerComment": "30", "writerFan": "16", "writerGrade": "4级", "writerIntegral": "1561", "writerName": "大头目T", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_121512109.jpg", "writerRankTotal": "18063", "writerRankWeekly": "34538", "writerThumb": "32", "writerVisitNum": "73026", "blog_read_count": "3032", "blog_time": "于 2021-11-24 12:15:25 发布", "blog_title": "使用Nginx部署PHP项目", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>1.<a href=\"http://nginx.org/en/download.html\">下载nginx</a>，<a href=\"https://windows.php.net/download\">下载PHP</a></strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\824165de69284558af4b01c5025b2516.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8ee7de790bc941db852844a5f1ae43db.png\"/></p>\n<p><strong>2.解压Nginx,PHP，新建文件夹WWW , 配置nginx.conf</strong></p>\n<p>我的目录结构<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c14e216c74f74007b9590065df6b642e.png\"/></p>\n<p>进入nginx，conf目录找到配置文件nginx.conf</p>\n<pre><code class=\"prism language-xml\">#user  nobody;\nworker_processes  1;\n\n# 打开log\nerror_log  logs/error.log;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    access_log  logs/access.log;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    server {\n        listen       80;\n        server_name  localhost;\n\n        # 打开log\n        access_log  logs/host.access.log;\n\n        location / {\n            # 设置网站的根目录(类似Apache的www目录)\n            # 这个路径自己定义就行,下面的是我自己的路径\n            root   C:\\Users\\TANGSHUAI\\Desktop\\Nginx\\www;\n            # 把index.php添加到默认首页，就是输入/时自动打开/index.php\n            index  index.html index.htm index.php;\n        }\n\n        # 打开404页面(可以不动)\n        error_page  404              /404.html;\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n\n        # 配置FastCGI，PHP 脚本请求全部转发到 FastCGI处理\n        location ~ \\.php$ {\n            # \n            root           C:\\Users\\TANGSHUAI\\Desktop\\Nginx\\www;\n            # 设置监听端口\n            fastcgi_pass   127.0.0.1:9000;\n            # 设置nginx的默认首页文件(上面已经设置过了，可以删除)\n            fastcgi_index  index.php;\n            # 设置脚本文件请求的路径\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            # 引入fastcgi的配置文件\n            include        fastcgi_params;\n        }\n    }\n\n}\n</code></pre>\n<p><strong>3.修改php.ini</strong></p>\n<p>进入解压后的php根目录，重命名文件为php.ini，这里的两个文件随便修改一个都可以<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\622d456154d44484b4b1675d388e39b2.png\"/><br/> 打开php.ini大约在759行,删除前面的分号，给PHP指定可加载扩展模块的位置</p>\n<pre><code class=\"prism language-xml\">extension_dir = \"C:\\Users\\TANGSHUAI\\Desktop\\Nginx\\php7\\ext\"\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\67ea7af789de4653b320e2a80fe3b392.png\"/></p>\n<p>配置nginx的支持，大约在798行</p>\n<pre><code class=\"prism language-xml\">cgi.fix_pathinfo=1\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\fddc861672ec400eb987935c4c8e5b48.png\"/><br/> 配置mysql数据库支持</p>\n<p>取消注释</p>\n<pre><code class=\"prism language-xml\">extension=mysqli\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a2334a2beb4c4fd5a006507260979856.png\"/></p>\n<p><strong>4.在www目录新建文件index.php，要与上面的配置名称一致</strong><br/> index.php</p>\n<pre><code class=\"prism language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"php环境搭建成功!\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<p><strong>5.启动nginx，与PHP</strong></p>\n<pre><code class=\"prism language-xml\">#nginx启动（进入nginx根目录）\nstart nginx.exe\n#php启动（cmd窗口即可）\nC:/Users/TANGSHUAI/Desktop/Nginx/php7/php-cgi.exe -b 127.0.0.1:9000 -c C:/Users/TANGSHUAI/Desktop/Nginx/php7/php.ini\n\n</code></pre>\n<p>访问测试搭建成功<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a2f99e40705d4e94a37fe6af5a54676d.png\"/></p>\n<p><strong>6.配置多站点部署</strong><br/> 在nginx目录新增modules</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\90c09713cac04eb9a32c46345df68f0d.png\"/><br/> 目录里新增配置文件php.conf，这里的名称可以随便取，但是必须是.conf结尾</p>\n<pre><code class=\"prism language-xml\">server {\n        listen       8080;\n        server_name  localhost;\n\n        location / {\n            # 这边的路劲填写项目路劲\n            root   C:/Users/TANGSHUAI/Desktop/Nginx/www;\n            # 记得加上 index.php\n            index  index.php index.html index.htm;\n\n            if (!-e $request_filename) {\n                rewrite . /index.php last;\n            }\n        }\n\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n\n        location ~ \\.php$ {\n            # 这边的路劲填写项目路劲\n            root           C:/Users/TANGSHUAI/Desktop/Nginx/www;\n            fastcgi_pass   127.0.0.1:9000;\n            fastcgi_index  index.php;\n            # 要修改为$document_root\n            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n            include        fastcgi_params;\n        }\n    }\n</code></pre>\n<p>nginx.conf新增配置</p>\n<pre><code class=\"prism language-xml\">include ../modules/*.conf;\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6ff698bc838147ada9e1c22d6fe1bf7e.png\"/><br/> 配置成功重新启动即可</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 1, "time": "2021-11-24 12:15:25", "summary": "下载，下载在这里插入图片描述在这里插入图片描述解压，新建文件夹配置我的目录结构在这里插入图片描述进入，目录找到配置文件打开打开设置网站的根目录类似的目录这个路径自己定义就行下面的是我自己的路径把添加到"}