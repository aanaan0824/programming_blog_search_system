{"blogid": "124272238", "writerAge": "码龄10年", "writerBlogNum": "109", "writerCollect": "1528", "writerComment": "2691", "writerFan": "13774", "writerGrade": "7级", "writerIntegral": "17879", "writerName": "前卫的架构师小D", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124272238.jpg", "writerRankTotal": "604", "writerRankWeekly": "337", "writerThumb": "1858", "writerVisitNum": "1403430", "blog_read_count": "12526", "blog_time": "于 2022-04-19 17:05:18 发布", "blog_title": "RocketMQ详细安装教程（RocketMQ安装、RocketMQ修改默认端口、console管理后台安装）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#RocketMQ_11\">一、RocketMQ安装</a></li><li><ul><li><a href=\"#1_12\">1.下载</a></li><li><a href=\"#2_22\">2.修改启动配置</a></li><li><a href=\"#3_44\">3.启动</a></li></ul>\n</li><li><a href=\"#RocketMQ_69\">二、RocketMQ修改默认端口</a></li><li><a href=\"#Console_107\">三、Console管理后台安装</a></li><li><ul><li><a href=\"#1_110\">1.下载</a></li><li><a href=\"#2_114\">2.修改配置</a></li><li><a href=\"#3pom_119\">3.修改pom</a></li><li><a href=\"#4_125\">4.打包</a></li><li><a href=\"#5_136\">5.启动</a></li></ul>\n</li><li><a href=\"#_146\">结尾</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"RocketMQ_11\"></a>一、RocketMQ安装</h1>\n<h2><a id=\"1_12\"></a>1.下载</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">从apache的文件库下载 https://archive.apache.org/dist/rocketmq/这里我们选择最新版<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\12a49073363f494d87896d31427f9b06.png\"/></font></p>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">项目解压</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">unzip</span> rocketmq-all-4.9.3-bin-release.zip\n</code></pre>\n<h2><a id=\"2_22\"></a>2.修改启动配置</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">修改目录/home/rocketmq-4.9.3/bin下的配置文件： runserver.sh、runbroker.sh不然会报insufficient memory<br/> 修改runserver.sh 中原有内存配置，更改为</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token assign-left variable\">JAVA_OPT</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${JAVA_OPT}</span> -server -Xms256m -Xmx256m -Xmn512m -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m\"</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\99d6fe1e5498465fa89932400e1aa88a.png\"/><br/> <font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">修改runbroker.sh 中原有内存配置，更改为</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token assign-left variable\">JAVA_OPT</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${JAVA_OPT}</span> -server -Xms256m -Xmx256m -Xmn128m\"</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a27069bbb8204524a94cc3c3f4f63de8.png\"/><br/> <font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">修改/home/rocketmq-4.9.3/conf/broker.conf文件，添加配置</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token assign-left variable\">namesrvAddr</span><span class=\"token operator\">=</span><span class=\"token number\">10.101</span>.37.145:9876\n<span class=\"token assign-left variable\">brokerIP1</span><span class=\"token operator\">=</span><span class=\"token number\">10.101</span>.37.145\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2dadaa3384664b18a13813e7f2927cef.png\"/></p>\n<h2><a id=\"3_44\"></a>3.启动</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\"><strong>进入/home/rocketmq-4.9.3，启动 NameServer</strong></font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">nohup</span> <span class=\"token function\">sh</span> bin/mqnamesrv <span class=\"token operator\">&amp;</span>\n</code></pre>\n<blockquote>\n<p><font color=\"#E34A68\" face=\"微软雅黑\" size=\"3\">nohup sh mqnamesrv &amp; 属于后台启动<br/> sh mqnamesrv 属于终端启动，直接输出日志信息，按 ctrl+c 可直接关闭退出</font></p>\n</blockquote>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">在当前目录下会有一个 nohup.out 的日志文件，可以打开查看 namesrv 的启动情况。看到 The Name Server boot success.serializeType=JSON 表示启动成功</font></p>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\"><strong>进入/home/rocketmq-4.9.3，启动 Broker</strong></font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># 启动命令，10.101.37.145:9876为namesrv的IP和端口，保证地址以及端口能够访问。并且指定配置文件启动</span>\n<span class=\"token function\">nohup</span> <span class=\"token function\">sh</span> bin/mqbroker -n <span class=\"token number\">10.101</span>.37.145:9876 -c ./conf/broker.conf <span class=\"token operator\">&amp;</span>\n</code></pre>\n<blockquote>\n<p><font color=\"#E34A68\" face=\"微软雅黑\" size=\"3\"> nohup sh bin/mqbroker -n 10.101.37.145:9876 &amp; 属于后台启动<br/> sh bin/mqbroker -n 10.101.37.145:9876 属于终端启动，直接输出日志信息，按 ctrl+c 可直接关闭退出</font></p>\n</blockquote>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">同样去看nohup.out 文件，看到 boot success 表示启动成功</font></p>\n<hr/>\n<h1><a id=\"RocketMQ_69\"></a>二、RocketMQ修改默认端口</h1>\n<blockquote>\n<p><font color=\"#E34A68\" face=\"微软雅黑\" size=\"3\">修改namesrv默认端口（默认9876）</font></p>\n</blockquote>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">在rocketmq的conf目录下添加namesrv.properties文件，文件中添加端口配置</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token assign-left variable\">listenPort</span><span class=\"token operator\">=</span><span class=\"token number\">8876</span>\n</code></pre>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">使用配置信息后台启动namesrv</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">nohup</span> <span class=\"token function\">sh</span> bin/mqnamesrv -c conf/namesrv.properties <span class=\"token operator\">&amp;</span>\n</code></pre>\n<blockquote>\n<p><font color=\"#E34A68\" face=\"微软雅黑\" size=\"3\">修改broker默认端口（默认10911）</font></p>\n</blockquote>\n<pre><code class=\"prism language-bash\">brokerClusterName <span class=\"token operator\">=</span> DefaultCluster\nbrokerName <span class=\"token operator\">=</span> broker-a\nbrokerId <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\ndeleteWhen <span class=\"token operator\">=</span> 04\nfileReservedTime <span class=\"token operator\">=</span> <span class=\"token number\">48</span>\nbrokerRole <span class=\"token operator\">=</span> ASYNC_MASTER\nflushDiskType <span class=\"token operator\">=</span> ASYNC_FLUSH\n<span class=\"token comment\"># 新增的配置，broker默认端口</span>\n<span class=\"token assign-left variable\">namesrvAddr</span><span class=\"token operator\">=</span><span class=\"token number\">10.238</span>.57.206:8876\n<span class=\"token assign-left variable\">brokerIP1</span><span class=\"token operator\">=</span><span class=\"token number\">10.238</span>.57.206\n<span class=\"token assign-left variable\">listenPort</span><span class=\"token operator\">=</span><span class=\"token number\">8911</span>\n</code></pre>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">使用配置信息后台启动broker</font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">nohup</span> <span class=\"token function\">sh</span> bin/mqbroker -n localhost:8876 -c conf/broker.conf <span class=\"token operator\">&amp;</span>\n</code></pre>\n<hr/>\n<h1><a id=\"Console_107\"></a>三、Console管理后台安装</h1>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">RocketMQ有一个可视化的的dashboard，通过该控制台可以直观的看到很多数据</font></p>\n<h2><a id=\"1_110\"></a>1.下载</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">下载地址：https://github.com/apache/rocketmq-externals/releases<br/> master分支看不到rocketmq-console时，可以切换develop分支<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\20f7afa5f0d040bcabafb38e68cb8594.png\"/></font></p>\n<h2><a id=\"2_114\"></a>2.修改配置</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">修改其src/main/resources中的application.properties配置文件。</font></p>\n<ul><li><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">默认端口号为 8080 ，修改为一个不常用的</font></li><li><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">指定RocketMQ的name server地址<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\68d3182d46724e05a213596491593a15.png\"/></font></li></ul>\n<h2><a id=\"3pom_119\"></a>3.修改pom</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">修改rocketmq.version为4.4.0，（因develop当时查看采用的开发环境为4.4.0-SNAPSHOT，故改为4.4.0兼容性最好，不然需要修改部分代码兼容新版本。</font></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f4e7c9d2680f446683a0ff732ed5b84f.png\"/></p>\n<h2><a id=\"4_125\"></a>4.打包</h2>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">在rocketmq-console目录下执行打包命令</font></p>\n<pre><code class=\"prism language-bash\">mvn clean package -Dmaven.test.skip<span class=\"token operator\">=</span>true\n</code></pre>\n<p><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">打好包后在target目录下会生成可执行的jar包<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d5a5a3d93093489183d3a8b275bbe8e8.png\"/></font></p>\n<h2><a id=\"5_136\"></a>5.启动</h2>\n<pre><code class=\"prism language-bash\">java -jar rocketmq-console-ng-1.0.0.jar\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8316acde35c44ede81e199934e11844a.png\"/></p>\n<hr/>\n<h1><a id=\"_146\"></a>结尾</h1>\n<ul><li><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">感谢大家的耐心阅读，如有建议请私信或评论留言。</font></li><li><font color=\"#999AAA\" face=\"微软雅黑\" size=\"3\">如有收获，劳烦支持，关注、点赞、评论、收藏均可，博主会经常更新，与大家共同进步</font></li></ul>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-04-19 17:05:18", "summary": "文章目录一、安装下载修改启动配置启动二、修改默认端口三、管理后台安装下载修改配置修改打包启动结尾一、安装下载微软雅黑从的文件库下载这里我们选择最新版在这里插入图片描述微软雅黑项目解压修改启动配置微软雅"}