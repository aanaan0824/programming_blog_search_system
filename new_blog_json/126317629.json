{"blogid": "126317629", "writerAge": "ç é¾„4å¹´", "writerBlogNum": "138", "writerCollect": "1895", "writerComment": "2049", "writerFan": "4170", "writerGrade": "6çº§", "writerIntegral": "6549", "writerName": "ä¸ä¼šå‹å¼¯çš„å°é£ä¾ ", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126317629.jpg", "writerRankTotal": "2406", "writerRankWeekly": "35", "writerThumb": "1722", "writerVisitNum": "159861", "blog_read_count": "167", "blog_time": "äºÂ 2022-09-03 10:36:22Â å‘å¸ƒ", "blog_title": "ã€ç”µå•†é¡¹ç›®å®æˆ˜ã€‘æ‹¦æˆªå™¨(è¯¦ç»†ç¯‡)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\6b761ce2799a42cebf7d4fb4bf59e110.jpeg\"/><br/> ğŸ<code>åšå®¢ä¸»é¡µï¼š</code>ğŸ‘‰<a href=\"https://blog.csdn.net/qq_43514330?type=blog\">@ä¸ä¼šå‹å¼¯çš„å°é£ä¾ </a><br/> âœ¨<code>æ¬¢è¿å…³æ³¨ï¼š</code>ğŸ‘‰<code>ç‚¹èµ</code>ğŸ‘<code>æ”¶è—</code>â­<code>ç•™è¨€</code>âœ’<br/> âœ¨<code>ç³»åˆ—ä¸“æ ï¼š</code>ğŸ‘‰<a href=\"https://blog.csdn.net/qq_43514330/category_11959952.html?spm=1001.2014.3001.5482\">SpringBootç”µå•†é¡¹ç›®å®æˆ˜</a><br/> âœ¨<code>å­¦ä¹ ç¤¾åŒºï¼š</code> ğŸ‘‰<a href=\"https://bbs.csdn.net/forums/bhywdxfx\">ä¸ä¼šå‹å¼¯çš„å°é£ä¾ </a><br/> âœ¨<code>çŸ¥è¶³ä¸Šè¿›ï¼Œä¸è´Ÿé‡å¿ƒã€‚</code><br/> ğŸ”¥<code>æ¬¢è¿å¤§ä½¬æŒ‡æ­£ï¼Œä¸€èµ·å­¦ä¹ ï¼ä¸€èµ·åŠ æ²¹ï¼</code></p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/f9e7290d231c413fbc3f595656951ea9.gif#pic_center\"/></p>\n<p></p>\n<div class=\"toc\">\n<h3>ç›®å½•</h3>\n<ul><li><a href=\"#__14\">ğŸ æ‹¦æˆªå™¨</a></li><li><a href=\"#_HandlerInterceptor_28\">ğŸ”¥ HandlerInterceptor</a></li><li><a href=\"#WebMvcConfigurer_36\">ğŸ”¥WebMvcConfigurer</a></li><li><a href=\"#__42\">ğŸ”¥ åœ¨é¡¹ç›®ä¸­æ·»åŠ æ‹¦æˆªå™¨åŠŸèƒ½</a></li><li><a href=\"#_95\">ğŸ”¥æµ‹è¯•</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"__14\"></a>ğŸ æ‹¦æˆªå™¨</h1>\n<ul><li>åœ¨Spring MVCä¸­æ‹¦æˆªè¯·æ±‚æ˜¯é€šè¿‡å¤„ç†å™¨æ‹¦æˆªå™¨HandlerInterceptoræ¥å®ç°çš„ï¼Œå®ƒæ‹¦æˆªçš„ç›®æ ‡æ˜¯è¯·æ±‚çš„åœ°å€ã€‚åœ¨Spring MVCä¸­å®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œéœ€è¦å®ç°HandlerInterceptoræ¥å£ã€‚</li><li>æ‹¦æˆªå™¨:é¦–å…ˆå°†æ‰€æœ‰çš„è¯·æ±‚ç»Ÿä¸€æ‹¦æˆªåˆ°æ‹¦æˆªå™¨ä¸­ï¼Œå¯ä»¥æ‹¦æˆªå™¨ä¸­æ¥å®šä¹‰è¿‡æ»¤çš„è§„åˆ™ï¼Œå¦‚æœä¸æ»¡è¶³ç³»ç»Ÿçš„è®¾ç½®çš„è¿‡æ»¤è§„åˆ™ï¼Œç»Ÿä¸€çš„å¤„ç†æ˜¯é‡æ–°å»æ‰“å¼€login.htmlé¡µé¢(é‡å®šå‘å’Œè½¬å‘)ï¼Œæ¨èä½¿ç”¨é‡å®šå‘ã€‚</li><li>åœ¨SpringBooté¡¹ç›®ä¸­æ‹¦æˆªå™¨çš„å®šä¹‰å’Œä½¿ç”¨ã€‚SpringBootæ˜¯ä¾é springMVCæ¥å®Œæˆçš„ã€‚SpringMVCæä¾›äº†ä¸€ä¸ªHandlerInterceptoræ¥å£ï¼Œç”¨äºè¡¨ç¤ºå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚å—é™åˆ¶è‡ªå®šä¹‰ä¸ªç±»ï¼Œåœ¨è¿™ä¸ªç±»å®ç°è¿™ä¸ªæ¥å£</li><li>1.é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªç±»ï¼Œåœ¨è¿™ä¸ªç±»å®ç°è¿™ä¸ªHandlerlnterceptoræ¥å£ã€‚</li><li>2.æ³¨å†Œè¿‡æ»¤å™¨:</li><li>æ·»åŠ ç™½åå• \n  <ul><li>å¯ä»¥åœ¨ä¸ç™»å½•çš„æƒ…å†µä¸‹è®¿é—®</li><li>login.html\\register.html\\login\\register\\index.html\\product.html</li></ul> </li><li>æ·»åŠ é»‘åå• \n  <ul><li>åœ¨ç”¨æˆ·ç™»å½•çš„çŠ¶æ€æ‰å¯ä»¥è®¿é—®çš„é¡µé¢èµ„æºã€‚</li></ul> </li><li>3.æ³¨å†Œè¿‡æ»¤å™¨çš„æŠ€æœ¯:å€ŸåŠ©WebMvcConfigureæ¥å£ï¼Œå¯ä»¥å°†ç”¨æˆ·å®šä¹‰çš„æ‹¦æˆªå™¨è¿›è¡Œæ³¨å†Œï¼Œæ‰å¯ä»¥ä¿è¯æ‹¦æˆªå™¨èƒ½å¤Ÿç”Ÿæ•ˆå’Œä½¿ç”¨ã€‚å®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åè®©è¿™ä¸ªç±»å®ç°WebMvcConfigureæ¥å£ã€‚é…ç½®ä¿¡æ¯ï¼Œå»ºè®®å­˜æ”¾åœ¨é¡¹ç›®çš„configåŒ…ç»“æ„ä¸‹ã€‚|</li></ul>\n<h1><a id=\"_HandlerInterceptor_28\"></a>ğŸ”¥ HandlerInterceptor</h1>\n<ul><li>preHandle()æ–¹æ³• \n  <ul><li>è¯¥æ–¹æ³•å°†åœ¨è¯·æ±‚å¤„ç†ä¹‹å‰è¢«è°ƒç”¨ã€‚</li></ul> </li><li>postHandle()æ–¹æ³•</li><li>è¯¥æ–¹æ³•å°†åœ¨å½“å‰è¯·æ±‚è¿›è¡Œå¤„ç†ä¹‹åï¼Œä¹Ÿå°±æ˜¯Controlleræ–¹æ³•è°ƒç”¨ä¹‹åæ‰§è¡Œï¼Œä½†æ˜¯å®ƒä¼šåœ¨DispatcherServletè¿›è¡Œè§†å›¾è¿”å›æ¸²æŸ“ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å¯¹Controllerå¤„ç†ä¹‹åçš„ModelAndViewå¯¹è±¡è¿›è¡Œæ“ä½œã€‚</li><li>afterCompletion()æ–¹æ³•</li><li>è¯¥æ–¹æ³•å°†åœ¨æ•´ä¸ªå½“å‰è¯·æ±‚ç»“æŸä¹‹åï¼Œä¹Ÿå°±æ˜¯åœ¨DispatcherServletæ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾ä¹‹åæ‰§è¡Œã€‚</li></ul>\n<h1><a id=\"WebMvcConfigurer_36\"></a>ğŸ”¥WebMvcConfigurer</h1>\n<ul><li>WebMvcConfigureræ¥å£ä¸­çš„æ ¸å¿ƒæ–¹æ³•ä¹‹ä¸€addInterceptors(InterceptorRegistry registry)æ–¹æ³•è¡¨ç¤ºæ·»åŠ æ‹¦æˆªå™¨ã€‚ä¸»è¦ç”¨äºè¿›è¡Œç”¨æˆ·ç™»å½•çŠ¶æ€çš„æ‹¦æˆªï¼Œæ—¥å¿—çš„æ‹¦æˆªç­‰ã€‚ \n  <ul><li>addInterceptorï¼šéœ€è¦ä¸€ä¸ªå®ç°HandlerInterceptoræ¥å£çš„æ‹¦æˆªå™¨å®ä¾‹</li><li>addPathPatternsï¼šç”¨äºè®¾ç½®æ‹¦æˆªå™¨çš„è¿‡æ»¤è·¯å¾„è§„åˆ™ï¼›addPathPatterns(â€œ/**â€)å¯¹æ‰€æœ‰è¯·æ±‚éƒ½æ‹¦æˆª</li><li>excludePathPatternsï¼šç”¨äºè®¾ç½®ä¸éœ€è¦æ‹¦æˆªçš„è¿‡æ»¤è§„åˆ™</li></ul> </li></ul>\n<h1><a id=\"__42\"></a>ğŸ”¥ åœ¨é¡¹ç›®ä¸­æ·»åŠ æ‹¦æˆªå™¨åŠŸèƒ½</h1>\n<ul><li>åˆ†æï¼šé¡¹ç›®ä¸­å¾ˆå¤šæ“ä½œéƒ½æ˜¯éœ€è¦å…ˆç™»å½•æ‰å¯ä»¥æ‰§è¡Œçš„ï¼Œæ‰€ä»¥åº”ä½¿ç”¨æ‹¦æˆªå™¨è§£å†³è¯¥é—®é¢˜ã€‚</li><li>åˆ›å»ºæ‹¦æˆªå™¨ç±»com.jkj.interceptor.LoginInterceptorï¼Œå¹¶å®ç°HandlerInterceptoræ¥å£ã€‚</li></ul>\n<pre><code class=\"prism language-java\"><span class=\"token comment\">/** å®šä¹‰å¤„ç†å™¨æ‹¦æˆªå™¨ */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HandlerInterceptor</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">preHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> handler<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"uid\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            response<span class=\"token punctuation\">.</span><span class=\"token function\">sendRedirect</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/web/login.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<ul><li>åˆ›å»ºLoginInterceptorConfigureræ‹¦æˆªå™¨çš„é…ç½®ç±»å¹¶å®ç°WebMvcConfigureræ¥å£ï¼Œé…ç½®ç±»éœ€è¦æ·»åŠ @Configruationæ³¨è§£ä¿®é¥°ã€‚</li></ul>\n<pre><code class=\"prism language-java\"><span class=\"token comment\">/** æ³¨å†Œå¤„ç†å™¨æ‹¦æˆªå™¨ */</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">LoginInterceptorConfigurer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">WebMvcConfigurer</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">/** æ‹¦æˆªå™¨é…ç½® */</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">addInterceptors</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">InterceptorRegistry</span> registry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// åˆ›å»ºæ‹¦æˆªå™¨å¯¹è±¡</span>\n        <span class=\"token class-name\">HandlerInterceptor</span> interceptor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LoginInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// ç™½åå•</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">&gt;</span></span> patterns <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/bootstrap3/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/css/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/images/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/js/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/web/register.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/web/login.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/web/index.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/web/product.html\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/users/register\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/users/login\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/districts/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        patterns<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/products/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// é€šè¿‡æ³¨å†Œå·¥å…·æ·»åŠ æ‹¦æˆªå™¨</span>\n        registry<span class=\"token punctuation\">.</span><span class=\"token function\">addInterceptor</span><span class=\"token punctuation\">(</span>interceptor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addPathPatterns</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">excludePathPatterns</span><span class=\"token punctuation\">(</span>patterns<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h1><a id=\"_95\"></a>ğŸ”¥æµ‹è¯•</h1>\n<ul><li>å¯åŠ¨é¡¹ç›®ï¼š</li><li>åœ¨æµè§ˆå™¨è¾“å…¥ï¼š<code>localhost:8080/web/product.html</code></li><li>æµ‹è¯•ç»“æœï¼šç›´æ¥æ”¾è¡Œï¼Œä¸è¿›è¡Œæ‹¦æˆª</li></ul>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\f57ec53313564d2f8e15e08e66387bef.jpeg\"/></p>\n<hr/>\n<p>å­¦ä¹ è§†é¢‘ï¼š</p>\n<blockquote>\n<p>ã€SpringBooté¡¹ç›®å®æˆ˜å®Œæ•´ç‰ˆã€‘SpringBoot+MyBatis+MySQLç”µè„‘å•†åŸé¡¹ç›®å®æˆ˜-å“”å“©å“”å“©ã€‘<br/> https://b23.tv/qGh9x9L</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\4ac1a678b52a43c1be1cdb7435533b29.jpeg\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 1, "php": 0, "time": "2022-09-03 10:36:22", "summary": "åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°åšå®¢ä¸»é¡µï¼šä¸ä¼šå‹å¼¯çš„å°é£ä¾ æ¬¢è¿å…³æ³¨ï¼šç‚¹èµæ”¶è—ç•™è¨€ç³»åˆ—ä¸“æ ï¼šç”µå•†é¡¹ç›®å®æˆ˜å­¦ä¹ ç¤¾åŒºï¼šä¸ä¼šå‹å¼¯çš„å°é£ä¾ çŸ¥è¶³ä¸Šè¿›ï¼Œä¸è´Ÿé‡å¿ƒã€‚æ¬¢è¿å¤§ä½¬æŒ‡æ­£ï¼Œä¸€èµ·å­¦ä¹ ï¼ä¸€èµ·åŠ æ²¹ï¼åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°ç›®å½•æ‹¦æˆªå™¨åœ¨é¡¹"}