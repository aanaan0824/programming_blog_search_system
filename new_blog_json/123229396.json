{"blogid": "123229396", "writerAge": "码龄5年", "writerBlogNum": "65", "writerCollect": "1688", "writerComment": "440", "writerFan": "7805", "writerGrade": "5级", "writerIntegral": "2169", "writerName": "我想养只猫 •͓͡•ʔ", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123229396.jpg", "writerRankTotal": "11153", "writerRankWeekly": "3448", "writerThumb": "1242", "writerVisitNum": "994678", "blog_read_count": "8629", "blog_time": "已于 2022-03-09 10:37:41 修改", "blog_title": "本地存储(Local Storage) 和 会话存储(Session Storage)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>我不会告诉你任何定义和概念，上车，读完这篇博客，你就会对本地存储(Local Storage) 和 会话存储(Session Storage)有一个清晰的认识。</strong></p>\n<br/>\n<br/>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><a href=\"#_10\">前提知识</a></li><li><a href=\"#_28\">范例</a></li><li><ul><li><a href=\"#1_34\">示例1：将键值对提供给本地存储</a></li><li><a href=\"#2__47\">示例2: 本地存储中设置键值对</a></li><li><a href=\"#3__60\">示例3: 获取空值</a></li><li><a href=\"#_4_89\">示例 4：将数组存储在本地存储中</a></li><li><a href=\"#_5_103\">示例 5：从本地存储中获取数组</a></li><li><a href=\"#_6_118\">示例 6：从本地存储中获取数组？</a></li><li><a href=\"#_7_133\">示例 7：清除本地存储</a></li><li><a href=\"#_8_Name1__148\">示例 8：仅从本地存储中删除 Name1 键值对</a></li><li><a href=\"#_174\">会话存储</a></li></ul>\n</li><li><a href=\"#_219\">总结</a></li></ul>\n</div>\n<p></p>\n<br/>\n<br/>\n<h1><a id=\"_10\"></a>前提知识</h1>\n<p><strong>请按照我以下的步骤来：</strong></p>\n<p>1、在任意网页中按F12打开开发者工具<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d75890b786d54445bad0822f8298b3ee.png\"/><br/> 2、单击Application，即应用<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3789aa89f311488abb9459b9739fc111.png\"/><br/> 3、单击存储，您将在那里看到本地存储和会话存储。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a0f094d633a5474896a04702381bc307.png\"/><br/> 本地存储和会话存储都存储键值对。</p>\n<p><strong>本地存储和会话存储的主要区别在于</strong>，<strong>在 <code>关闭浏览器</code> 后</strong>，<strong>存储在 <code>会话存储</code> 中的键值对会丢失</strong>。</p>\n<br/>\n<br/>\n<h1><a id=\"_28\"></a>范例</h1>\n<p><strong>现在，让我们通过一些示例来了解如何对本地存储进行操作。</strong></p>\n<br/>\n<h2><a id=\"1_34\"></a>示例1：将键值对提供给本地存储</h2>\n<pre><code class=\"prism language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>控制台执行，查看效果<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4737b34d1f084df3abde0e6639112382.png\"/><br/> 让我们看看本地存储的“ typeof ”：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\79314e724d6b4609a8470cb07c3d6d25.png\"/></p>\n<br/>\n<h2><a id=\"2__47\"></a>示例2: 本地存储中设置键值对</h2>\n<p>在上面的示例中，我们看到了 <strong>如何在本地存储中设置键值对</strong>。</p>\n<p>现在，让我们了解<strong>如何从本地存储中获取键值对</strong>。</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">let</span> Name1 <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Name1<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c3141422118948b98c3a4f4be92d227d.png\"/></p>\n<br/>\n<h2><a id=\"3__60\"></a>示例3: 获取空值</h2>\n<p>现在，让我们尝试获取一些不存在的值。</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">let</span> Name2 <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>Name2<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\12d94a0f46254ce18812fd9c9391d7c0.png\"/></p>\n<p>如果您尝试从不存在的本地存储中获取某些内容，则结果为 <code>null</code> 。</p>\n<p>很多时候我们希望将数组存储在本地存储中，因为数组很容易使用（我们有很多内置的数组方法）。</p>\n<p><strong>但是，本地存储的一个限制是它将数组存储为字符串</strong>。让我们看看我的意思：</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token comment\">// 本地存储</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WebSite'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiuing.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 定义ProgrammingLanguage数组</span>\n<span class=\"token keyword\">let</span> ProgrammingLanguage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Java'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Python'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'JavaScript'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'GO+'</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 本地存储存储 ProgrammingLanguage数组</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">,</span> ProgrammingLanguage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0e68c89308414c04bedcef54f898c8e5.png\"/><br/> 为了克服这个问题☝️，我们使用 <code>JSON.stringify</code>。请看下面的实际操作</p>\n<br/>\n<h2><a id=\"_4_89\"></a>示例 4：将数组存储在本地存储中</h2>\n<p>现在我们使用 <code>JSON.stringify</code> 将数组存储在本地存储中</p>\n<pre><code class=\"prism language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WebSite'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiuing.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> ProgrammingLanguage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Java'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Python'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'JavaScript'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'GO+'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">// 这里讲原先的ProgrammingLanguage 修改为了 JSON.stringify(ProgrammingLanguage)</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">,</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>ProgrammingLanguage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\172a39b510fa4602b2d8391014445922.png\"/></p>\n<br/>\n<h2><a id=\"_5_103\"></a>示例 5：从本地存储中获取数组</h2>\n<p>从本地存储中获取数组。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\789399a2b79f4cc7b6afd9caf615f910.png\"/></p>\n<p>上面的结果可能看起来像一个数组，但我们从本地存储而不是数组获取字符串。</p>\n<p>让我证明一下。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2f70d4c8539f424baee2f6c748c9f88b.png\"/><br/> 因此，为了从本地存储中获取数组，我们使用 <code>JSON.parse</code> ，见下文。</p>\n<br/>\n<h2><a id=\"_6_118\"></a>示例 6：从本地存储中获取数组？</h2>\n<p>现在我们 <code>JSON.parse</code> 使用从本地存储中获取数组</p>\n<pre><code class=\"prism language-javascript\"> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9c8d57cb183e4baca8cb9a6bb3a40213.png\"/></p>\n<p>因此，我们使用：</p>\n<ol><li>JSON.stringify：将数组设置为本地存储中的值。</li><li>JSON.parse：从本地存储中获取数组。</li></ol>\n<br/>\n<h2><a id=\"_7_133\"></a>示例 7：清除本地存储</h2>\n<p>清理前<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\72222862cabe4f4ab5e32c0316637e65.png\"/></p>\n<pre><code class=\"prism language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>运行后<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6e81b89e0b4f437a917cbb65a797ec76.png\"/><br/> 因此，我们可以使用 <code>localStorage.clear()</code> 来清除本地存储</p>\n<p>仅从本地存储中删除“name1”键值对。</p>\n<br/>\n<h2><a id=\"_8_Name1__148\"></a>示例 8：仅从本地存储中删除 Name1 键值对</h2>\n<pre><code class=\"prism language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'WebSite'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiuing.com'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> ProgrammingLanguage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Java'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Python'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'JavaScript'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'GO+'</span><span class=\"token punctuation\">]</span>\nlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">,</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>ProgrammingLanguage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b364aa9cd2b943f0bba066b05ce9b003.png\"/></p>\n<p>运行这条命令试试</p>\n<pre><code class=\"prism language-javascript\">localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c153403aeffe482fbb51ebe3e6b6a4f8.png\"/></p>\n<p>正如您在上面看到的，为了删除我们使用的特定键值对 <code>localStorage.removeItem</code> 。</p>\n<br/>\n<h2><a id=\"_174\"></a>会话存储</h2>\n<p><strong>这就是关于本地存储的全部内容。</strong></p>\n<p>我们在 <strong>会话存储</strong> 中运行类似的操作，唯一的区别是我们 使用 <code>sessionStorage</code> 代替 <code>localStorage</code> ：</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token comment\">// 示例1</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 示例2</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 示例4</span>\n<span class=\"token keyword\">let</span> ProgrammingLanguage <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Java'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Python'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'JavaScript'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'GO+'</span><span class=\"token punctuation\">]</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">,</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>ProgrammingLanguage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 示例6</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'favoriteProgrammingLanguage'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 示例7</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 示例8</span>\nsessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>让我们运行一下</p>\n<pre><code class=\"prism language-javascript\">sessionStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Name1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'uiu'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\64e51c3347644fe68caf6cd16132f5a6.png\"/><br/> 接下来我们关闭该网页，然后重新打开<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a0e9a7b21a304d0eaf17671cc53a2152.png\"/><br/> 此时会话存储的数据已经消失了，而之前示例运行的数据在本地存储中还存在<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a9ebe9a5d3f346178c606c3028818eca.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\13489cc227374676912a0c649d66ba0e.png\"/></p>\n<br/>\n<br/>\n<h1><a id=\"_219\"></a>总结</h1>\n<p><strong>让我重申一下</strong>：本地存储和会话存储之间唯一的主要区别是，一旦我们关闭浏览器，我们就会丢失会话存储中保存的任何内容。但是，本地存储并非如此。</p>\n<p>最后，让我们看看 MDN 怎么说：</p>\n<blockquote>\n<p>窗口界面的 localStorage 只读属性允许您访问 Document 来源的 Storage 对象；存储的数据跨浏览器会话保存。</p>\n</blockquote>\n<blockquote>\n<p>只读 sessionStorage 属性访问当前源的会话存储对象。sessionStorage 类似于 localStorage；不同之处在于，虽然 localStorage 中的数据不会过期，但 sessionStorage 中的数据会在页面会话结束时被清除。</p>\n</blockquote>\n<br/>\n<br/>\n<br/>\n<hr/>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/img_convert/891da0946c822877a54d803464d8c206.gif#pic_center\"/></p>\n<div align=\"center\">\n  如果对您有帮助，可别忘了 \n  点赞 / 收藏 / 评论 / 关注  支持下博主 \n</div>\n<br/>\n<br/>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "JavaScript", "cpp": 0, "csharp": 0, "python": 1, "javascript": 1, "java": 0, "sql": 0, "php": 0, "time": "2022-03-09 10:37:41", "summary": "我不会告诉你任何定义和概念，上车，读完这篇博客，你就会对本地存储和会话存储有一个清晰的认识。目录前提知识范例示例：将键值对提供给本地存储示例本地存储中设置键值对示例获取空值示例：将数组存储在本地存储中"}