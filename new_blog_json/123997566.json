{"blogid": "123997566", "writerAge": "码龄1年", "writerBlogNum": "21", "writerCollect": "5", "writerComment": "0", "writerFan": "1", "writerGrade": "2级", "writerIntegral": "211", "writerName": "子非_s", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123997566.jpg", "writerRankTotal": "72999", "writerRankWeekly": "276273", "writerThumb": "1", "writerVisitNum": "7733", "blog_read_count": "4130", "blog_time": "已于 2022-04-06 20:41:23 修改", "blog_title": "01背包问题——以小明的背包1 为例", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>本文旨在加强01背包问题的记忆与理解，步骤会细化</p>\n</blockquote>\n<hr/>\n<h1><a id=\"_3\"></a>问题如下：</h1>\n<p>小明有一个容量为 VV的背包。</p>\n<p>这天他去商场购物，商场一共有 N 件物品，第 i 件物品的体积为 w ，价值为 v 。</p>\n<p>小明想知道在购买的物品总体积不超过 V 的情况下所能获得的最大价值为多少，请你帮他算算。</p>\n<p>输入描述<br/> 输入第 1 行包含两个正整数 N,V，表示商场物品的数量和小明的背包容量。</p>\n<p>第 2∼N+1 行包含 2 个正整数 w,v，表示物品的体积和价值。</p>\n<p>输入如下：</p>\n<pre><code class=\"prism language-c\"><span class=\"token number\">5</span> <span class=\"token number\">20</span>\n<span class=\"token number\">1</span> <span class=\"token number\">6</span>\n<span class=\"token number\">2</span> <span class=\"token number\">5</span>\n<span class=\"token number\">3</span> <span class=\"token number\">8</span>\n<span class=\"token number\">5</span> <span class=\"token number\">15</span>\n<span class=\"token number\">3</span> <span class=\"token number\">3</span>\n</code></pre>\n<p>下面直接给出题解代码</p>\n<pre><code class=\"prism language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream&gt;</span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> dp<span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3005</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">good</span><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">int</span> v<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">int</span> w<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>a<span class=\"token punctuation\">[</span><span class=\"token number\">105</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n  \t<span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">;</span>\n  \tcin<span class=\"token operator\">&gt;&gt;</span>n<span class=\"token operator\">&gt;&gt;</span>v<span class=\"token punctuation\">;</span>\n  \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n \t<span class=\"token punctuation\">{<!-- --></span>\n    \tcin<span class=\"token operator\">&gt;&gt;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>w<span class=\"token operator\">&gt;&gt;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>v<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n    \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">&lt;=</span>v<span class=\"token punctuation\">;</span>j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n   \t\t<span class=\"token punctuation\">{<!-- --></span>\n     \t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>j<span class=\"token operator\">&lt;</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>w<span class=\"token punctuation\">)</span>\n     \t\tdp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n     \t\t<span class=\"token keyword\">else</span>\n     \t\tdp<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>w<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>a<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>v<span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\tcout<span class=\"token operator\">&lt;&lt;</span>dp<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>v<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>该题是01背包问题的基础题。<br/> 下面给出样例输入对应的dp值：<br/> <img alt=\"对应dp存值\" src=\"..\\..\\static\\image\\af07a22f9fcd4cc5a0aad634929cf021.png\"/></p>\n<hr/>\n<h1><a id=\"_64\"></a>分析：</h1>\n<p>对于一个物品而言，有两种选择（0 1 的体现），要么装进背包，要么，不装进背包。那么对于无限空间下的情况就有 2^n-1 种。显然难以完全计算并判断。而动态规划则很好的解决了这个问题。<br/> 下面分为两种情况：</p>\n<p>一、该物品可装。可装的话，需要对应 w 的空间，假设装完之后正好达到满空间，则应该是 dp[i][j]=dp[i-1][j-w]+v; 可见该处的值由 i-1 行的dp决定，即完成了前面几个物品装与不装的判断后给出的答案。要想装入该物品必然需要满足该物品空间的前驱点。</p>\n<p>二、该物品不装。不装有可分成两种情况。有可能是空间不满足，无法装入，所以不装。也有可能是因为装入之后占用了空间，反而挤出了前面判读过最优值情况下的物品，使得值反而变小。那么这个最优值在哪呢？很显然，当背包空间相同的时候，最优值就是 i-1 行对应相同背包容量的解。判断两者哪个更加合理即可。</p>\n<p><strong>优化代码：</strong><br/> 利用滚动数组节省空间，代码如下：</p>\n<pre><code class=\"prism language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;iostream&gt;</span></span>\nusing namespace std<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> dp<span class=\"token punctuation\">[</span><span class=\"token number\">3005</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span>v<span class=\"token punctuation\">;</span>\n  cin<span class=\"token operator\">&gt;&gt;</span>n<span class=\"token operator\">&gt;&gt;</span>v<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>i<span class=\"token operator\">&lt;=</span>n<span class=\"token punctuation\">;</span>i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n  \tcin<span class=\"token operator\">&gt;&gt;</span>w<span class=\"token operator\">&gt;&gt;</span>v<span class=\"token operator\">&gt;&gt;</span>s<span class=\"token punctuation\">;</span>\n  \t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j<span class=\"token operator\">=</span>v<span class=\"token punctuation\">;</span>j<span class=\"token operator\">&gt;=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>j<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span><span class=\"token comment\">//一定要从j值大出开始，否则会影响后续滚动</span>\n  \t<span class=\"token punctuation\">{<!-- --></span>\n  \t\tdp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dp<span class=\"token punctuation\">[</span>j<span class=\"token operator\">-</span>w<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n  \t<span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n  cout<span class=\"token operator\">&lt;&lt;</span>dp<span class=\"token punctuation\">[</span>v<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-04-06 20:41:23", "summary": "本文旨在加强背包问题的记忆与理解，步骤会细化问题如下：小明有一个容量为的背包。这天他去商场购物，商场一共有件物品，第件物品的体积为，价值为。小明想知道在购买的物品总体积不超过的情况下所能获得的最大价值"}