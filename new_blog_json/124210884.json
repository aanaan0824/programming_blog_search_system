{"blogid": "124210884", "writerAge": "码龄1年", "writerBlogNum": "214", "writerCollect": "544", "writerComment": "19", "writerFan": "188", "writerGrade": "5级", "writerIntegral": "2268", "writerName": "孤城286", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124210884.jpg", "writerRankTotal": "9120", "writerRankWeekly": "5002", "writerThumb": "113", "writerVisitNum": "196390", "blog_read_count": "2853", "blog_time": "于 2022-04-18 00:37:51 发布", "blog_title": "Linux下Nginx服务的建立及 Nginx 实现 php 解析", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%C2%A0Linux%E4%B8%8BNginx%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BB%BA%E7%AB%8B-toc\" style=\"margin-left:0px;\"><a href=\"#%C2%A0Linux%E4%B8%8BNginx%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BB%BA%E7%AB%8B\"> Linux下Nginx服务的建立</a></p>\n<p id=\"%E4%B8%80%E3%80%81%E6%8C%82%E8%BD%BD%E9%95%9C%E5%83%8F%EF%BC%9A-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B8%80%E3%80%81%E6%8C%82%E8%BD%BD%E9%95%9C%E5%83%8F%EF%BC%9A\">一、挂载镜像：</a></p>\n<p id=\"%E4%BA%8C%E3%80%81%E4%BF%AE%E6%94%B9%20yum%20%E6%BA%90%E8%B7%AF%E5%BE%84%20vim%20%2Fetc%2Fyum.repos.d%2Fdvd.repo%20%E5%B0%86%E5%85%B6%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%90%91%20media%20%E5%8D%B3%E5%8F%AF%C2%A0-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%BA%8C%E3%80%81%E4%BF%AE%E6%94%B9%20yum%20%E6%BA%90%E8%B7%AF%E5%BE%84%20vim%20%2Fetc%2Fyum.repos.d%2Fdvd.repo%20%E5%B0%86%E5%85%B6%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%90%91%20media%20%E5%8D%B3%E5%8F%AF%C2%A0\">二、修改 yum 源路径 vim /etc/yum.repos.d/dvd.repo 将其直接指向 media 即可 </a></p>\n<p id=\"%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%BD%AF%E4%BB%B6%E5%8C%85-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%BD%AF%E4%BB%B6%E5%8C%85\">三、安装开发环境软件包</a></p>\n<p id=\"%E5%9B%9B%E3%80%81%E5%88%9B%E5%BB%BA%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%20useradd%20-M%20-s%20%2Fsbin%2Fnologin%20nginx%20(%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%8C%E4%B8%8D%E7%99%BB%E5%BD%95%C2%A0%EF%BC%89-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%9B%9B%E3%80%81%E5%88%9B%E5%BB%BA%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%20useradd%20-M%20-s%20%2Fsbin%2Fnologin%20nginx%20%28%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%8C%E4%B8%8D%E7%99%BB%E5%BD%95%C2%A0%EF%BC%89\">四、创建允许用户和组 useradd -M -s /sbin/nologin nginx (不需要家目录，不登录 ）</a></p>\n<p id=\"%C2%A0%E4%BA%94%E3%80%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-toc\" style=\"margin-left:40px;\"><a href=\"#%C2%A0%E4%BA%94%E3%80%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85\"> 五、编译安装</a></p>\n<p id=\"%C2%A0%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E6%9F%A5%E7%9C%8B%20nginx%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E6%9F%A5%E7%9C%8B%20nginx%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95\"> ————查看 nginx 命令用法</a></p>\n<p id=\"%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8%20nginx%E6%9C%8D%E5%8A%A1-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8%20nginx%E6%9C%8D%E5%8A%A1\">六、启动 nginx服务</a></p>\n<p id=\"%C2%A0%E9%BB%98%E8%AE%A4%E4%B8%BB%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%EF%BC%9A-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%E9%BB%98%E8%AE%A4%E4%B8%BB%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%EF%BC%9A\"> 默认主页存放路径：</a></p>\n<p id=\"%E5%85%B3%E9%97%ADnginx%E6%9C%8D%E5%8A%A1%EF%BC%9A%C2%A0-toc\" style=\"margin-left:80px;\"><a href=\"#%E5%85%B3%E9%97%ADnginx%E6%9C%8D%E5%8A%A1%EF%BC%9A%C2%A0\">关闭nginx服务： </a></p>\n<p id=\"%E4%B8%83%E3%80%81%E4%BA%86%E8%A7%A3%20nginx%20%E7%9A%84%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B8%83%E3%80%81%E4%BA%86%E8%A7%A3%20nginx%20%E7%9A%84%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6\">七、了解 nginx 的重要文件</a></p>\n<p id=\"%C2%A0Nginx%20%E5%AE%9E%E7%8E%B0%20php%20%E8%A7%A3%E6%9E%90-toc\" style=\"margin-left:0px;\"><a href=\"#%C2%A0Nginx%20%E5%AE%9E%E7%8E%B0%20php%20%E8%A7%A3%E6%9E%90\"> Nginx 实现 php 解析</a></p>\n<p id=\"%E5%AE%89%E8%A3%85%20php-toc\" style=\"margin-left:80px;\"><a href=\"#%E5%AE%89%E8%A3%85%20php\">安装 php</a></p>\n<p id=\"%E5%BB%BA%E7%AB%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%A5%E5%8F%8A%E5%91%BD%E4%BB%A4%E8%B7%AF%E5%BE%84%E4%BC%98%E5%8C%96-toc\" style=\"margin-left:80px;\"><a href=\"#%E5%BB%BA%E7%AB%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%A5%E5%8F%8A%E5%91%BD%E4%BB%A4%E8%B7%AF%E5%BE%84%E4%BC%98%E5%8C%96\">建立配置文件以及命令路径优化</a></p>\n<p id=\"%E8%BF%9B%E5%85%A5%E5%AE%89%E8%A3%85%E5%8C%85%E7%9A%84%E4%B8%BB%E7%9B%AE%E5%BD%95-toc\" style=\"margin-left:80px;\"><a href=\"#%E8%BF%9B%E5%85%A5%E5%AE%89%E8%A3%85%E5%8C%85%E7%9A%84%E4%B8%BB%E7%9B%AE%E5%BD%95\">进入安装包的主目录</a></p>\n<p id=\"%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%86%85%E7%9F%AD%E6%A0%87%E8%AE%B0%E5%8A%9F%E8%83%BD%E4%B8%BA%20ON-toc\" style=\"margin-left:80px;\"><a href=\"#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%86%85%E7%9F%AD%E6%A0%87%E8%AE%B0%E5%8A%9F%E8%83%BD%E4%B8%BA%20ON\">修改文件内短标记功能为 ON</a></p>\n<p id=\"%C2%A0%E5%90%AF%E5%8A%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B%C2%A0%20%E9%87%8D%E5%91%BD%E5%90%8D%E5%B0%86%E5%85%B6%E8%AE%BE%E5%AE%9A%E4%B8%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%E5%90%AF%E5%8A%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B%C2%A0%20%E9%87%8D%E5%91%BD%E5%90%8D%E5%B0%86%E5%85%B6%E8%AE%BE%E5%AE%9A%E4%B8%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"> 启动 php-fpm 进程  重命名将其设定为配置文件</a></p>\n<p id=\"%E4%B9%9D%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%A9%20nginx%20%E5%8E%BB%E6%89%BE%20php%20%E5%B8%AE%E5%BF%99%E8%A7%A3%E6%9E%90-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B9%9D%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%A9%20nginx%20%E5%8E%BB%E6%89%BE%20php%20%E5%B8%AE%E5%BF%99%E8%A7%A3%E6%9E%90\">九、如何让 nginx 去找 php 帮忙解析</a></p>\n<p id=\"%E4%BF%AE%E6%94%B9%20nginx%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%BF%E5%85%B6%E8%B0%83%E7%94%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B-toc\" style=\"margin-left:80px;\"><a href=\"#%E4%BF%AE%E6%94%B9%20nginx%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%BF%E5%85%B6%E8%B0%83%E7%94%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B\">修改 nginx 配置文件使其调用 php-fpm 进程</a></p>\n<p id=\"%E4%BF%AE%E6%94%B9%E5%A6%82%E4%B8%8B%EF%BC%9A-toc\" style=\"margin-left:80px;\"><a href=\"#%E4%BF%AE%E6%94%B9%E5%A6%82%E4%B8%8B%EF%BC%9A\">修改如下：</a></p>\n<p id=\"%C2%A0%E5%90%AF%E7%94%A8PHP%E6%9C%8D%E5%8A%A1-toc\" style=\"margin-left:80px;\"><a href=\"#%C2%A0%E5%90%AF%E7%94%A8PHP%E6%9C%8D%E5%8A%A1\"> 启用PHP服务</a></p>\n<p id=\"%E9%AA%8C%E8%AF%81%EF%BC%9A-toc\" style=\"margin-left:80px;\"><a href=\"#%E9%AA%8C%E8%AF%81%EF%BC%9A\">验证：</a></p>\n<p id=\"%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%20php%20%E9%A1%B5%E9%9D%A2%20%E8%BF%9B%E5%85%A5%E9%BB%98%E8%AE%A4%E7%BD%91%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%C2%A0-toc\" style=\"margin-left:80px;\"><a href=\"#%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%20php%20%E9%A1%B5%E9%9D%A2%20%E8%BF%9B%E5%85%A5%E9%BB%98%E8%AE%A4%E7%BD%91%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%C2%A0\">生成一个 php 页面 进入默认网页存放路径 </a></p>\n<p id=\"%EF%BC%88%E5%85%B3%E9%97%AD%EF%BC%89%E9%87%8D%E5%90%AF%EF%BC%9A%C2%A0-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%88%E5%85%B3%E9%97%AD%EF%BC%89%E9%87%8D%E5%90%AF%EF%BC%9A%C2%A0\">（关闭）重启： </a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%C2%A0Linux%E4%B8%8BNginx%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BB%BA%E7%AB%8B\"><strong><span style=\"background-color:#a2e043;\"> Linux下Nginx服务的建立</span></strong></h1>\n<h2 id=\"%E4%B8%80%E3%80%81%E6%8C%82%E8%BD%BD%E9%95%9C%E5%83%8F%EF%BC%9A\"><strong><span style=\"background-color:#dad5e9;\">一、挂载镜像：</span></strong></h2>\n<pre><code>[root@localhost home]# cd /\n[root@localhost /]# ls\nbin   dev  home  lib64  mnt  proc  run   srv  tmp  var\nboot  etc  lib   media  opt  root  sbin  sys  usr\n[root@localhost /]# cd media\n[root@localhost media]# ls\n[root@localhost media]# mount /dev/cdrom /media/ ————镜像挂载（默认的镜像是放在/dev/cdrom）\nmount: /dev/sr0 is write-protected, mounting read-only\n[root@localhost media]# ls\n[root@localhost media]# cd ..\n[root@localhost /]# ls\nbin   dev  home  lib64  mnt  proc  run   srv  tmp  var\nboot  etc  lib   media  opt  root  sbin  sys  usr\n[root@localhost /]# cd media/\n[root@localhost media]# ls ——————查看是否挂载成功\nCentOS_BuildTag  GPL       LiveOS    RPM-GPG-KEY-CentOS-7\nEFI              images    Packages  RPM-GPG-KEY-CentOS-Testing-7\nEULA             isolinux  repodata  TRANS.TBL\n[root@localhost media]# \n</code></pre>\n<h2 id=\"%E4%BA%8C%E3%80%81%E4%BF%AE%E6%94%B9%20yum%20%E6%BA%90%E8%B7%AF%E5%BE%84%20vim%20%2Fetc%2Fyum.repos.d%2Fdvd.repo%20%E5%B0%86%E5%85%B6%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%90%91%20media%20%E5%8D%B3%E5%8F%AF%C2%A0\"><strong><span style=\"background-color:#dad5e9;\">二、修改 yum 源路径 vim /etc/yum.repos.d/dvd.repo 将其直接指向 media 即可 </span></strong></h2>\n<pre><code>[root@localhost media]# cd /etc/yum.repos.d/\n[root@localhost yum.repos.d]# ls\nCentOS-Base.repo  CentOS-Debuginfo.repo  CentOS-Media.repo    CentOS-Vault.repo\nCentOS-CR.repo    CentOS-fasttrack.repo  CentOS-Sources.repo  CentOS-x86_64-kernel.repo\n[root@localhost yum.repos.d]# mkdir bak\n[root@localhost yum.repos.d]# mv C* bak/\n[root@localhost yum.repos.d]# ls\nbak\n[root@localhost yum.repos.d]# cd bak/\n[root@localhost bak]# ls\nCentOS-Base.repo  CentOS-Debuginfo.repo  CentOS-Media.repo    CentOS-Vault.repo\nCentOS-CR.repo    CentOS-fasttrack.repo  CentOS-Sources.repo  CentOS-x86_64-kernel.repo\n[root@localhost bak]# cd ..\n[root@localhost yum.repos.d]# vim /etc/yum.repos.d/dvd.repo\n  1 [dvdrom]   ————标签，yum 源文件的标识\n  2 name=\"yum dvd rom\" ————描述的内容\n  3 baseurl=file:/media/ ————光盘名 告诉操作系统依赖存在关系列表的位置\n  4 gbgcheck=0 ————关闭认证（是否对(互联网)的源做密钥对验证）\n</code></pre>\n<h2 id=\"%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%BD%AF%E4%BB%B6%E5%8C%85\"><strong><span style=\"background-color:#dad5e9;\">三、安装开发环境软件包</span></strong></h2>\n<pre><code>[root@localhost yum.repos.d]# yum -y install pcre-devel zlib-devel ————(PCRE(Perl Compatible Regular Expressions)是一个轻量级的 Perl 函数库) \n</code></pre>\n<h2 id=\"%E5%9B%9B%E3%80%81%E5%88%9B%E5%BB%BA%E5%85%81%E8%AE%B8%E7%94%A8%E6%88%B7%E5%92%8C%E7%BB%84%20useradd%20-M%20-s%20%2Fsbin%2Fnologin%20nginx%20(%E4%B8%8D%E9%9C%80%E8%A6%81%E5%AE%B6%E7%9B%AE%E5%BD%95%EF%BC%8C%E4%B8%8D%E7%99%BB%E5%BD%95%C2%A0%EF%BC%89\"><strong><span style=\"background-color:#dad5e9;\">四、创建允许用户和组 useradd -M -s /sbin/nologin nginx (不需要家目录，不登录 ）</span></strong></h2>\n<pre><code>[root@localhost yum.repos.d]# useradd -M -s /sbin/nologin nginx\n[root@localhost yum.repos.d]# vim /etc/passwd  ————查看是否创建成功</code></pre>\n<p style=\"text-align:center;\"> <img alt=\"\" class=\"left\" src=\"..\\..\\static\\image\\8659c61409ba4a39bb8d150d5b6571d8.png\"/></p>\n<p style=\"text-align:center;\"> <img alt=\"\" class=\"left\" src=\"..\\..\\static\\image\\f132ecc0d84442d3a22d54dd014136d3.png\"/></p>\n<h2 id=\"%C2%A0%E4%BA%94%E3%80%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85\"><strong><span style=\"background-color:#dad5e9;\"> 五、编译安装</span> </strong></h2>\n<p><strong>安装包 ————— &gt;解压————&gt; 进入程序文件目录————&gt; 安装</strong></p>\n<pre><code>[root@localhost home]# cd /home/poem/Desktop/\n[root@localhost Desktop]# ls\napr-1.7.0       httpd-2.4.53        pcre-8.45          test\napr-util-1.6.1  nginx-1.6.2.tar.gz  php-5.3.27.tar.gz\n[root@localhost Desktop]# tar xf nginx-1.6.2.tar.gz ————————解压\n[root@localhost Desktop]# ls  ————————查看\napr-1.7.0       httpd-2.4.53  nginx-1.6.2.tar.gz  php-5.3.27.tar.gz\napr-util-1.6.1  nginx-1.6.2   pcre-8.45           test\n[root@localhost Desktop]# cd nginx-1.6.2/\n[root@localhost nginx-1.6.2]# ls\nauto  CHANGES  CHANGES.ru  conf  configure  contrib  html  LICENSE  man  README  src\n[root@localhost nginx-1.6.2]# \n[root@localhost nginx-1.6.2]# ./configure --prefix=/usr/local/nginx --user=nginx --group=nginx   —————————————————检查编译环境\n[root@localhost nginx-1.6.2]# make -j 4  ————（-j 4 加快编译速度默认只用一个进程 把源代码编译成可执行文件）\n[root@localhost nginx-1.6.2]# make install\n[root@localhost nginx-1.6.2]# cd /usr/local/\n[root@localhost local]# ls ——————————确认安装完成\napr       bin  games  include  lib64    nginx  sbin   src\napr-util  etc  httpd  lib      libexec  pcre   share\n[root@localhost local]# cd nginx/\n[root@localhost nginx]# ls\nconf  html  logs  sbin\n[root@localhost nginx]# \n\n</code></pre>\n<h3 id=\"%C2%A0%E2%80%94%E2%80%94%E2%80%94%E2%80%94%E6%9F%A5%E7%9C%8B%20nginx%20%E5%91%BD%E4%BB%A4%E7%94%A8%E6%B3%95\"><strong><span style=\"background-color:#fef2f0;\"> ————查看 nginx 命令用法</span></strong></h3>\n<pre><code>[root@localhost nginx]# cd sbin/\n[root@localhost sbin]# ls\nnginx\n[root@localhost sbin]# ./nginx -h\nnginx version: nginx/1.6.2\nUsage: nginx [-?hvVtq] [-s signal] [-c filename] [-p prefix] [-g directives]\n\nOptions:\n  -?,-h         : this help\n  -v            : show version and exit\n  -V            : show version and configure options then exit\n  -t            : test configuration and exit\n  -q            : suppress non-error messages during configuration testing\n  -s signal     : send signal to a master process: stop, quit, reopen, reload\n  -p prefix     : set prefix path (default: /usr/local/nginx/)\n  -c filename   : set configuration file (default: conf/nginx.conf)\n  -g directives : set global directives out of configuration file\n\n[root@localhost sbin]# </code></pre>\n<h2 id=\"%E5%85%AD%E3%80%81%E5%90%AF%E5%8A%A8%20nginx%E6%9C%8D%E5%8A%A1\"><strong><span style=\"background-color:#dad5e9;\">六、启动 nginx服务</span></strong></h2>\n<pre><code>[root@localhost sbin]# ./nginx ——启用nginx服务\n[root@localhost sbin]# ss -antpl|grep 80 ————验证服务是否启动，查看 80 端口\nLISTEN     0      128          *:80                       *:*                   users:((\"nginx\",pid=9937,fd=6),(\"nginx\",pid=9936,fd=6))\n[root@localhost sbin]# firewall-cmd --zone=public --add-port=80/tcp ——————关闭防火墙对 TCP80 端口的过滤\nsuccess\n[root@localhost sbin]# \n</code></pre>\n<p><strong>主机访问IP（查看防火墙是否关闭）： </strong></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\8d3083a8d6d34e969cca4491e84dc7a5.png\"/></p>\n<h3 id=\"%C2%A0%E9%BB%98%E8%AE%A4%E4%B8%BB%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%EF%BC%9A\"><strong> 默认主页存放路径：</strong></h3>\n<pre><code>/usr/local/nbinx/html/  ————默认主页存放路径</code></pre>\n<h3 id=\"%E5%85%B3%E9%97%ADnginx%E6%9C%8D%E5%8A%A1%EF%BC%9A%C2%A0\"><strong>关闭nginx服务： </strong></h3>\n<pre><code>[root@localhost sbin]# ./nginx -s stop</code></pre>\n<h2 id=\"%E4%B8%83%E3%80%81%E4%BA%86%E8%A7%A3%20nginx%20%E7%9A%84%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6\"><strong><span style=\"background-color:#dad5e9;\">七、了解 nginx 的重要文件</span></strong></h2>\n<p><strong>nginx 的主配置文件</strong></p>\n<pre><code>[root@localhost nginx]# cd conf/\n[root@localhost conf]# ls\nfastcgi.conf            koi-utf             nginx.conf           uwsgi_params\nfastcgi.conf.default    koi-win             nginx.conf.default   uwsgi_params.default\nfastcgi_params          mime.types          scgi_params          win-utf\nfastcgi_params.default  mime.types.default  scgi_params.default\n[root@localhost conf]# \n[root@localhost conf]# vim nginx.conf\n</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\9174d8f3ae334e97ba4be259838234ff.png\"/></p>\n<p> <img alt=\"\" src=\"..\\..\\static\\image\\0cfa9c809e6a42eeb83c2633007e8d21.png\"/></p>\n<h1 id=\"%C2%A0Nginx%20%E5%AE%9E%E7%8E%B0%20php%20%E8%A7%A3%E6%9E%90\"><strong><span style=\"background-color:#a2e043;\"> Nginx 实现 php 解析</span></strong></h1>\n<p><span style=\"color:#fe2c24;\"><strong>(nginx 默认不识别 php 语言)</strong></span></p>\n<h3 id=\"%E5%AE%89%E8%A3%85%20php\"><strong><span style=\"background-color:#fef2f0;\">安装 php</span></strong></h3>\n<pre><code>[root@localhost nginx]# yum install -y libxml2-devel libjpeg-devel libpng-devel\n[root@localhost nginx]# cd /home/poem/Desktop/\n[root@localhost Desktop]# ls\napr-1.7.0       httpd-2.4.53  nginx-1.6.2.tar.gz  php-5.3.27.tar.gz\napr-util-1.6.1  nginx-1.6.2   pcre-8.45           test\n[root@localhost Desktop]# tar xf php-5.3.27.tar.gz\n[root@localhost php-5.3.27]# \n[root@localhost php-5.3.27]# ./configure --prefix=/usr/local/php5 --with-gd --with-zlib --with-config-filepath=/usr/local/php5 --enable-mbstring --enable-fpm --with-jpeg-dir=/usr/lib\n[root@localhost php-5.3.27]# make -j 4\n[root@localhost php-5.3.27]# make install\n[root@localhost php-5.3.27]# cd /usr/local/\n[root@localhost local]# ls\napr       bin  games  include  lib64    nginx  php5  share\napr-util  etc  httpd  lib      libexec  pcre   sbin  src\n[root@localhost local]# cd php5/ ————————查看是否安装成功\n[root@localhost php5]# ls\nbin  etc  include  lib  man  sbin  share  var\n[root@localhost php5]# \n[root@localhost local]# cd php5/\n[root@localhost php5]# ls\nbin  etc  include  lib  man  sbin  share  var\n[root@localhost php5]# cd bin/\n[root@localhost bin]# ./php -v ——————查看版本信息\nPHP 5.3.27 (cli) (built: Apr 17 2022 08:18:59) \nCopyright (c) 1997-2013 The PHP Group\nZend Engine v2.3.0, Copyright (c) 1998-2013 Zend Technologies\n[root@localhost bin]# \n</code></pre>\n<h3 id=\"%E5%BB%BA%E7%AB%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%A5%E5%8F%8A%E5%91%BD%E4%BB%A4%E8%B7%AF%E5%BE%84%E4%BC%98%E5%8C%96\"><strong><span style=\"background-color:#fef2f0;\">建立配置文件以及命令路径优化</span></strong></h3>\n<p>将命令链接到用户可执行的命令目录下</p>\n<pre><code>[root@localhost bin]# ln -s /usr/local/php5/bin/* /usr/bin/\n[root@localhost bin]# ln -s /usr/local/php5/sbin/* /usr/sbin/</code></pre>\n<h3 id=\"%E8%BF%9B%E5%85%A5%E5%AE%89%E8%A3%85%E5%8C%85%E7%9A%84%E4%B8%BB%E7%9B%AE%E5%BD%95\"><strong>进入安装包的主目录</strong></h3>\n<pre><code>[root@localhost bin]# cd /home/poem/Desktop/\n[root@localhost Desktop]# ls\napr-1.7.0       httpd-2.4.53  nginx-1.6.2.tar.gz  php-5.3.27         test\napr-util-1.6.1  nginx-1.6.2   pcre-8.45           php-5.3.27.tar.gz\n[root@localhost Desktop]# cd php-5.3.27/\n[root@localhost php-5.3.27]# cp php.ini-development /usr/local/php5\n[root@localhost php-5.3.27]# cd /usr/local/php5/\n[root@localhost php5]# ls\nbin  etc  include  lib  man  php.ini-development  sbin  share  var\n[root@localhost php5]# \n[root@localhost php5]# mv php.ini-development php.ini\n[root@localhost php5]# ls\nbin  etc  include  lib  man  php.ini  sbin  share  var\n[root@localhost php5]# vim php.ini</code></pre>\n<p>然后不要 ini 后面的后缀 vim php.ini </p>\n<h3 id=\"%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E5%86%85%E7%9F%AD%E6%A0%87%E8%AE%B0%E5%8A%9F%E8%83%BD%E4%B8%BA%20ON\"><strong>修改文件内短标记功能为 ON</strong></h3>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\a33e776ba25042e49c666dd75259bb66.png\"/></p>\n<h3 id=\"%C2%A0%E5%90%AF%E5%8A%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B%C2%A0%20%E9%87%8D%E5%91%BD%E5%90%8D%E5%B0%86%E5%85%B6%E8%AE%BE%E5%AE%9A%E4%B8%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6\"> 启动 php-fpm 进程  重命名将其设定为配置文件</h3>\n<pre><code>[root@localhost php5]# cd /usr/local/php5/etc\n[root@localhost etc]# ls\npear.conf  php-fpm.conf.default\n[root@localhost etc]# mv php-fpm.conf.default php-fpm.conf\n[root@localhost etc]# cd ..\n[root@localhost php5]# php-fpm\n[root@localhost php5]# ss -antpl|grep 9000\nLISTEN     0      128    127.0.0.1:9000                     *:*                   users:((\"php-fpm\",pid=105674,fd=0),(\"php-fpm\",pid=105673,fd=0),(\"php-fpm\",pid=105672,fd=7))\n[root@localhost php5]# \n</code></pre>\n<p><strong>*停止 fpm 进程（操作两次） </strong></p>\n<pre><code>[root@localhost php5]# killall php-fpm</code></pre>\n<h2 id=\"%E4%B9%9D%E3%80%81%E5%A6%82%E4%BD%95%E8%AE%A9%20nginx%20%E5%8E%BB%E6%89%BE%20php%20%E5%B8%AE%E5%BF%99%E8%A7%A3%E6%9E%90\"><strong><span style=\"background-color:#dad5e9;\">九、如何让 nginx 去找 php 帮忙解析</span></strong></h2>\n<h3 id=\"%E4%BF%AE%E6%94%B9%20nginx%20%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%BF%E5%85%B6%E8%B0%83%E7%94%A8%20php-fpm%20%E8%BF%9B%E7%A8%8B\"><strong>修改 nginx 配置文件使其调用 php-fpm 进程</strong></h3>\n<pre><code>[root@localhost php5]# cd /usr/local/nginx/conf/\n[root@localhost conf]# vim nginx.conf \n[root@localhost conf]# \n</code></pre>\n<h3 id=\"%E4%BF%AE%E6%94%B9%E5%A6%82%E4%B8%8B%EF%BC%9A\"><strong>修改如下：</strong></h3>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\86e739f8de89450c8323f7aab47e6614.png\"/></p>\n<h3 id=\"%C2%A0%E5%90%AF%E7%94%A8PHP%E6%9C%8D%E5%8A%A1\"><strong> 启用PHP服务</strong></h3>\n<pre><code>[root@localhost conf]# php-fpm\n[root@localhost conf]# ss -antpl|grep 9000\nLISTEN     0      128    127.0.0.1:9000                     *:*                   users:((\"php-fpm\",pid=105929,fd=0),(\"php-fpm\",pid=105928,fd=0),(\"php-fpm\",pid=105927,fd=7))\n[root@localhost conf]# \n</code></pre>\n<h3 id=\"%E9%AA%8C%E8%AF%81%EF%BC%9A\"><strong>验证：</strong></h3>\n<h3 id=\"%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%20php%20%E9%A1%B5%E9%9D%A2%20%E8%BF%9B%E5%85%A5%E9%BB%98%E8%AE%A4%E7%BD%91%E9%A1%B5%E5%AD%98%E6%94%BE%E8%B7%AF%E5%BE%84%C2%A0\"><strong>生成一个 php 页面 进入默认网页存放路径 </strong></h3>\n<pre><code>[root@localhost conf]# cd /usr/local/nginx/html/\n[root@localhost html]# ls\n50x.html  index.html\n[root@localhost html]# touch index.php\n[root@localhost html]# vim index.php</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" class=\"left\" src=\"..\\..\\static\\image\\500df884042c416d9189f9a2f15f2922.png\"/> </p>\n<h3 id=\"%EF%BC%88%E5%85%B3%E9%97%AD%EF%BC%89%E9%87%8D%E5%90%AF%EF%BC%9A%C2%A0\"><strong>（关闭）重启： </strong></h3>\n<pre><code>[root@localhost conf]# killall php-fpm\n[root@localhost conf]# /usr/local/nginx/sbin/nginx -s stop\n[root@localhost conf]# ss -antpl|grep 80\n[root@localhost conf]# php-fpm\n[root@localhost conf]# /usr/local/nginx/sbin/nginx\n[root@localhost conf]# ss -antpl|grep 80\nLISTEN     0      128          *:80                       *:*                   users:((\"nginx\",pid=106076,fd=6),(\"nginx\",pid=106075,fd=6))\n[root@localhost conf]# \n</code></pre>\n<p><strong>主机访问：成功识别 php</strong></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"..\\..\\static\\image\\90fee68393644058922ca229e3f4151e.png\"/></p>\n<p> </p>\n<p></p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-04-18 00:37:51", "summary": "目录下服务的建立一、挂载镜像：二、修改源路径将其直接指向即可三、安装开发环境软件包四、创建允许用户和组不需要家目录，不登录五、编译安装查看命令用法六、启动服务默认主页存放路径：关闭服务：七、了解的重要"}