{"blogid": "124345991", "writerAge": "码龄12年", "writerBlogNum": "37", "writerCollect": "35", "writerComment": "10", "writerFan": "1", "writerGrade": "3级", "writerIntegral": "423", "writerName": "吴家健ken", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124345991.jpg", "writerRankTotal": "84797", "writerRankWeekly": "112268", "writerThumb": "7", "writerVisitNum": "42806", "blog_read_count": "2390", "blog_time": "于 2022-04-22 16:17:21 发布", "blog_title": "centos7.8 swoole安装和使用", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<blockquote>\n<p>Swoole是一个国内开源的C语言编写的扩展，Swoole是php的一个异步、并行、高性能的网络通信引擎。</p>\n<p>可以用Swoole做一些想http、websocket的服务器，Swoole提供了异步多线程服务器，支持协程。Swoole可以广泛运用于：互联网、网络游戏、在线直播、聊天室。</p>\n<p>使用PHP+Swoole可以是我们的开发效率大大提升，并且性能非常好。</p>\n</blockquote>\n<p>也算是PHP 众多框架中稍微难上手的框架 ，虽说框架，其实是个PHP 的扩展，不过不像其他扩展，直接调用库这么简单。我的简单理解就是通过用PHP 创建一个服务器，然后在服务器中配置参数，可以使用多线程来运行程序，速度快的原因大概是：</p>\n<p>1.使用多线程，可以自行设置work_num，提高执行效率</p>\n<p>2.使用缓存，提高读取速度</p>\n<p></p>\n<h1><strong>安装方法：</strong></h1>\n<p>因为swoole 不支持window，所以只能在linux安装，如果坚持想在 windows 安装，可以在window下安装<strong>Cygwin64 Terminal ，</strong>我本地安装了，但是再安装swoole就失败了，提示我插件不齐，所以索性在阿里云上安装了。</p>\n<p><a href=\"https://wiki.swoole.com/#/environment?id=%E5%AE%89%E8%A3%85%E5%87%86%E5%A4%87\" title=\"Swoole4 文档\">Swoole4 文档</a></p>\n<p>以上是安装的方法官方精简版</p>\n<p>我简单解释一下，首先用wget 下载swoole</p>\n<pre><code>wget https://pecl.php.net/get/swoole-4.8.9.tgz\n\n//解压\ntar -zxvf swoole-4.8.9.tgz\n\n\ncd swoole-4.8.9\n\n\n//执行命令\nphpize &amp;&amp; \\\n./configure &amp;&amp; \\\nmake &amp;&amp; sudo make install</code></pre>\n<p>执行后会生成以下文件</p>\n<p><img alt=\"\" height=\"150\" src=\"..\\..\\static\\image\\9b43cc9a0131447ab3b0d72e07e0711d.png\" width=\"595\"/></p>\n<p> 这个时候可以查看一下PHP 的php.ini 的路径</p>\n<p><img alt=\"\" height=\"85\" src=\"..\\..\\static\\image\\fad7a62cea6842899ad68bc3c82869ea.png\" width=\"540\"/></p>\n<p> 有时候lib 里面没有php.ini的，在其他地方复制进去就好了！</p>\n<p>在lib 中找到 .so 的文件的文件夹，讲刚才的swoole.so 的文件放进去就好了，像这样</p>\n<p><img alt=\"\" height=\"161\" src=\"..\\..\\static\\image\\dad12aacabe44209b9bbefcec4aac4d5.png\" width=\"599\"/></p>\n<p> 然后再php.ini 中加上extension=swoole.so ，保存，重启PHP 。</p>\n<p>因为我是用php-fpm，我是直接kill 了再打开</p>\n<p>输入命令 php -m 查看PHP 加载模块</p>\n<p><img alt=\"\" height=\"466\" src=\"..\\..\\static\\image\\7bde96abdff4491f85a4a6c8435dde81.png\" width=\"486\"/></p>\n<p> 这样，swoole 模块就算是安装好了！</p>\n<p></p>\n<h1><strong>使用方法：</strong></h1>\n<p>根据官方文档解说，swoole 适用的场景很多，对我来说，应该用得比较多，就是http 服务了，这里贴一些官方的代码</p>\n<p>http_server.php</p>\n<pre><code class=\"language-php\">$http = new Swoole\\Http\\Server('0.0.0.0', 9501);\n\n$http-&gt;on('Request', function ($request, $response) {\n    $response-&gt;header('Content-Type', 'text/html; charset=utf-8');\n    $response-&gt;end('&lt;h1&gt;Hello Swoole. #' . rand(1000, 9999) . '&lt;/h1&gt;');\n});\n\n$http-&gt;start();</code></pre>\n<p>直接用php 命令执行 http_server.php</p>\n<pre><code>php http_server.php</code></pre>\n<p>在浏览器中输入   本机IP:9501</p>\n<p><img alt=\"\" height=\"71\" src=\"..\\..\\static\\image\\2ff2ada4aa5c4b9f8e07b27af4799f53.png\" width=\"381\"/></p>\n<p>以后有时间会将swoole 整合到laravel 中~</p>\n<p> </p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-04-22 16:17:21", "summary": "是一个国内开源的语言编写的扩展，是的一个异步、并行、高性能的网络通信引擎。可以用做一些想、的服务器，提供了异步多线程服务器，支持协程。可以广泛运用于：互联网、网络游戏、在线直播、聊天室。使用可以是我们"}