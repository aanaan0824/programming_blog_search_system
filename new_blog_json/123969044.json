{"blogid": "123969044", "writerAge": "码龄3年", "writerBlogNum": "15", "writerCollect": "691", "writerComment": "58", "writerFan": "64", "writerGrade": "2级", "writerIntegral": "304", "writerName": "plexming", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123969044.jpg", "writerRankTotal": "68977", "writerRankWeekly": "120797", "writerThumb": "91", "writerVisitNum": "57719", "blog_read_count": "32657", "blog_time": "已于 2022-07-09 17:57:08 修改", "blog_title": "python爬虫入门教程：爬取网页图片", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>在现在这个信息爆炸的时代，要想高效的获取数据，爬虫是非常好用的。而用python做爬虫也十分简单方便，下面通过一个简单的小爬虫程序来看一看写爬虫的基本过程：</p>\n<h2>准备工作</h2>\n<p>语言：python</p>\n<p>IDE：pycharm</p>\n<p>首先是要用到的库，因为是刚入门最简单的程序，我们主要就用到下面这两：</p>\n<pre><code class=\"language-python\">import requests //用于请求网页\nimport re  //正则表达式，用于解析筛选网页中的信息</code></pre>\n<p>其中re是python自带的，requests库需要我们自己安装，在命令行中输入pip install requests即可。</p>\n<p>然后随便找一个网站，注意不要尝试爬取隐私敏感信息，这里找了个表情包网站：</p>\n<p>注：此处表情包网站中的内容本来就可以免费下载，所以爬虫只是简化了我们一个个点的流程，注意不能去爬取付费资源。</p>\n<p class=\"img-center\"><img alt=\"\" height=\"220\" src=\"..\\..\\static\\image\\5aaf8a1ebb7a479da4a257c4b4c11ade.png\" width=\"465\"/></p>\n<p>我们要做的就是通过爬虫把这些表情包下载到我们电脑里。</p>\n<h2>编写爬虫程序</h2>\n<p>首先肯定要通过python访问这个网站，代码如下：</p>\n<pre><code class=\"language-python\">headers = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:98.0) Gecko/20100101 Firefox/98.0'\n    }\nresponse = requests.get('https://qq.yh31.com/zjbq/',headers=headers)  //请求网页</code></pre>\n<p>其中之所以要加headers这一段是因为有些网页会识别到你是通过python请求的然后把你拒绝，所以我们要换个正常的请求头。可以随便找一个或者f12从网络信息里复制一个。</p>\n<p><img alt=\"\" height=\"606\" src=\"..\\..\\static\\image\\bb89298c6cf4406bb10f4023d548e0bc.png\" width=\"1200\"/></p>\n<p>然后我们要找到我们要爬取的图片在网页代码里的位置，f12查看源代码，找到表情包如下：</p>\n<p> <img alt=\"\" height=\"559\" src=\"..\\..\\static\\image\\b24f426d395a41e489a5f9703c738e4b.png\" width=\"1200\"/></p>\n<p> 然后建立匹配规则，用正则表达式把中间那串替换掉，最简单的就是.*?</p>\n<pre><code class=\"language-python\">t = '&lt;img src=\"(.*?)\" alt=\"(.*?)\" width=\"160\" height=\"120\"&gt;'</code></pre>\n<p> 像这样。</p>\n<p>然后就可以调用re库里的findall方法把相关内容爬下来了：</p>\n<pre><code class=\"language-python\">result = re.findall(t, response.text)</code></pre>\n<p>返回的内容是由字符串组成的列表，最后我们经由爬到的地址通过python语句把图片下下来保存到文件夹里就行了。</p>\n<h2>程序代码</h2>\n<pre><code class=\"language-python\">import requests\nimport re\nimport os\n\nimage = '表情包'\nif not os.path.exists(image):\n    os.mkdir(image)\nheaders = {\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:98.0) Gecko/20100101 Firefox/98.0'\n    }\nresponse = requests.get('https://qq.yh31.com/zjbq/',headers=headers)\nresponse.encoding = 'GBK'\nresponse.encoding = 'utf-8'\nprint(response.request.headers)\nprint(response.status_code)\nt = '&lt;img src=\"(.*?)\" alt=\"(.*?)\" width=\"160\" height=\"120\"&gt;'\nresult = re.findall(t, response.text)\nfor img in result:\n    print(img)\n    res = requests.get(img[0])\n    print(res.status_code)\n    s = img[0].split('.')[-1]  #截取图片后缀，得到表情包格式，如jpg ，gif\n    with open(image + '/' + img[1] + '.' + s, mode='wb') as file:\n        file.write(res.content)</code></pre>\n<p>最后结果就是这个样子：</p>\n<p><img alt=\"\" height=\"250\" src=\"..\\..\\static\\image\\b2fddccaccdd45659660da5df11ec603.png\" width=\"159\"/></p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-07-09 17:57:08", "summary": "在现在这个信息爆炸的时代，要想高效的获取数据，爬虫是非常好用的。而用做爬虫也十分简单方便，下面通过一个简单的小爬虫程序来看一看写爬虫的基本过程：准备工作语言：：首先是要用到的库，因为是刚入门最简单的程"}