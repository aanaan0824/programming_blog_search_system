{"blogid": "123733731", "writerAge": "码龄4年", "writerBlogNum": "2", "writerCollect": "3", "writerComment": "5", "writerFan": "6", "writerGrade": "1级", "writerIntegral": "23", "writerName": "中禅寺lqc", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123733731.jpg", "writerRankTotal": "218158", "writerRankWeekly": "490383", "writerThumb": "1", "writerVisitNum": "1535", "blog_read_count": "1280", "blog_time": "于 2022-03-28 22:41:33 发布", "blog_title": "C#Script编写Grasshopper电池（Slider篇）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_7\">前言</a></li><li><a href=\"#slider_16\">一、slider介绍</a></li><li><a href=\"#_22\">二、生成电池</a></li><li><ul><li><a href=\"#1slider_23\">1.生成slider</a></li><li><a href=\"#2sliderattributes_40\">2.改变slider的attributes</a></li><li><a href=\"#2slidercolorAttr_70\">2.改变slider的colorAttr</a></li></ul>\n</li><li><a href=\"#_105\">总结</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"_7\"></a>前言</h1>\n<p><code>提示：这里可以添加本文要记录的大概内容：</code></p>\n<p>——今天开始正式记录自己grasshopper的学习过程，起初是在B站和油管上面学习，发现太过于零碎，反而花费了过多无用的时间，后来在CSDN上发现了不少可靠的系列文章，使我受益匪浅，因此记录自己的一点学习心得，既可以帮助与我面临相同困难的同学，也可以促使自己向新的领域不断进发。</p>\n<hr/>\n<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p>\n<h1><a id=\"slider_16\"></a>一、slider介绍</h1>\n<p><img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\eb496c9021114460a10a668d33d0c1f8.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ae29ce0d447b4036ab136dcdf2175d15.png\"/></p>\n<p>——slider作为作为gh中常用电池，时常会因为数量过多而让人修改的头疼，但不得不说作为基础电池，它的确用的还算舒适。</p>\n<h1><a id=\"_22\"></a>二、生成电池</h1>\n<h2><a id=\"1slider_23\"></a>1.生成slider</h2>\n<p>代码如下：</p>\n<pre><code class=\"prism language-c\">private <span class=\"token keyword\">void</span> <span class=\"token function\">RunScript</span><span class=\"token punctuation\">(</span>bool generate<span class=\"token punctuation\">,</span> ref object A<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>generate<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n    Grasshopper<span class=\"token punctuation\">.</span>Kernel<span class=\"token punctuation\">.</span>Special<span class=\"token punctuation\">.</span>GH_NumberSlider slid <span class=\"token operator\">=</span> new Grasshopper<span class=\"token punctuation\">.</span>Kernel<span class=\"token punctuation\">.</span>Special<span class=\"token punctuation\">.</span><span class=\"token function\">GH_NumberSlider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 生成slider</span>\n    GrasshopperDocument<span class=\"token punctuation\">.</span><span class=\"token function\">AddObject</span><span class=\"token punctuation\">(</span>slid<span class=\"token punctuation\">,</span> false<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> \n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/24f150eb78b943df9304f0f6262ed96c.gif\"/></p>\n<h2><a id=\"2sliderattributes_40\"></a>2.改变slider的attributes</h2>\n<p>代码如下：</p>\n<pre><code class=\"prism language-c\">private <span class=\"token keyword\">void</span> <span class=\"token function\">RunScript</span><span class=\"token punctuation\">(</span>bool generate<span class=\"token punctuation\">,</span> List<span class=\"token operator\">&lt;</span>System<span class=\"token punctuation\">.</span>Object<span class=\"token operator\">&gt;</span> x<span class=\"token punctuation\">,</span> ref object A<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n  Random rnd <span class=\"token operator\">=</span> new <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>generate<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">{<!-- --></span>\n    Grasshopper<span class=\"token punctuation\">.</span>Kernel<span class=\"token punctuation\">.</span>Special<span class=\"token punctuation\">.</span>GH_NumberSlider slid <span class=\"token operator\">=</span> new Grasshopper<span class=\"token punctuation\">.</span>Kernel<span class=\"token punctuation\">.</span>Special<span class=\"token punctuation\">.</span><span class=\"token function\">GH_NumberSlider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 样式</span>\n    slid<span class=\"token punctuation\">.</span><span class=\"token function\">CreateAttributes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 位置</span>\n    slid<span class=\"token punctuation\">.</span>Attributes<span class=\"token punctuation\">.</span>Pivot <span class=\"token operator\">=</span> new <span class=\"token function\">PointF</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">)</span> this<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span>Attributes<span class=\"token punctuation\">.</span>DocObject<span class=\"token punctuation\">.</span>Attributes<span class=\"token punctuation\">.</span>Bounds<span class=\"token punctuation\">.</span>Left <span class=\"token operator\">-</span>\n                            slid<span class=\"token punctuation\">.</span>Attributes<span class=\"token punctuation\">.</span>Bounds<span class=\"token punctuation\">.</span>Width <span class=\"token operator\">-</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>                             \n                            <span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span><span class=\"token punctuation\">)</span> this<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span>Params<span class=\"token punctuation\">.</span>Input<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Attributes<span class=\"token punctuation\">.</span>Bounds<span class=\"token punctuation\">.</span>Y\n                            <span class=\"token operator\">+</span> this<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span>Params<span class=\"token punctuation\">.</span>Input<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>SourceCount<span class=\"token operator\">*</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 数值</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>Maximum <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>Minimum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>DecimalPlaces <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span><span class=\"token function\">SetSliderValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>decimal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">(</span>rnd<span class=\"token punctuation\">.</span><span class=\"token function\">Next</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 生成slider</span>\n    GrasshopperDocument<span class=\"token punctuation\">.</span><span class=\"token function\">AddObject</span><span class=\"token punctuation\">(</span>slid<span class=\"token punctuation\">,</span> true<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 连接</span>\n    this<span class=\"token punctuation\">.</span>Component<span class=\"token punctuation\">.</span>Params<span class=\"token punctuation\">.</span>Input<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">AddSource</span><span class=\"token punctuation\">(</span>slid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/de1f0301613444c186d2ae002b231edc.gif\"/></p>\n<h2><a id=\"2slidercolorAttr_70\"></a>2.改变slider的colorAttr</h2>\n<p>代码如下：</p>\n<pre><code class=\"prism language-c\">private <span class=\"token keyword\">void</span> <span class=\"token function\">RunScript</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span> max<span class=\"token punctuation\">,</span> System<span class=\"token punctuation\">.</span>Drawing<span class=\"token punctuation\">.</span>Color color<span class=\"token punctuation\">,</span> ref object A<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">//获取Input[0]端口slider</span>\n  var input <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Component<span class=\"token punctuation\">.</span>Params<span class=\"token punctuation\">.</span>Input<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>Sources<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n  var slid <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Grasshopper<span class=\"token punctuation\">.</span>Kernel<span class=\"token punctuation\">.</span>Special<span class=\"token punctuation\">.</span>GH_NumberSlider<span class=\"token punctuation\">)</span> input<span class=\"token punctuation\">;</span> \n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>slid <span class=\"token operator\">!=</span> null<span class=\"token punctuation\">)</span> \n  <span class=\"token punctuation\">{<!-- --></span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>RailDisplay <span class=\"token operator\">=</span> Grasshopper<span class=\"token punctuation\">.</span>GUI<span class=\"token punctuation\">.</span>Base<span class=\"token punctuation\">.</span>GH_SliderRailDisplay<span class=\"token punctuation\">.</span>Filled<span class=\"token punctuation\">;</span> \n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>RailFullColour <span class=\"token operator\">=</span> color<span class=\"token punctuation\">;</span> \n\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>Minimum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>Maximum <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>decimal<span class=\"token punctuation\">)</span> max<span class=\"token punctuation\">;</span>\n\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>DrawControlBackground <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>DrawControlShadows <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>DrawControlBorder <span class=\"token operator\">=</span> true<span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>ControlEdgeColour <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span>Blue<span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>ControlBackColour <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span>Yellow<span class=\"token punctuation\">;</span>\n    slid<span class=\"token punctuation\">.</span>Slider<span class=\"token punctuation\">.</span>ControlShadowColour <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span>Red<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/d6086a9986274bfab9cbdd3e97cf8d05.gif\"/><br/> <img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\f356c20efdbf484087c105acd372e1fe.png\"/></p>\n<p>——哈哈哈…发现了slider的一个小bug！！slider的值超过其最大值时，会飞出去，除非重新设定value，不然不依赖代码无法拖动。<br/> <img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/cc5cbb2653124c22a5fdb1c738820d79.gif\"/><br/> 移动slider后又变回预设，可能需要更改全局模式。</p>\n<hr/>\n<h1><a id=\"_105\"></a>总结</h1>\n<p>——Rhino+Grasshopper需要深入学习的无非是RhinoCommon（C#）&amp;以此为基础编译的RhinoScriptSyntax（Python）、Grasshopper API（C#）&amp;以此为基础编译的ghenv（Python）。从个人学习简历来说，虽然python入门较快，但直接学习C#会更有框架逻辑性，而且可以制作自己的插件。<br/> ——下一章会讲解Value List的生成。<br/> <em>PS：听说GH2要来了，大家优先学好RhinoCommon才是硬道理啊。</em></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 1, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-03-28 22:41:33", "summary": "提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档文章目录前言一、介绍二、生成电池生成改变的改变的总结前言提示：这里可以添加本文要记录的大概内容：今天开始正式记录自己的学习过程，起初是在"}