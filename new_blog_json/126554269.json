{"blogid": "126554269", "writerAge": "码龄3年", "writerBlogNum": "140", "writerCollect": "54", "writerComment": "18", "writerFan": "1351", "writerGrade": "4级", "writerIntegral": "1426", "writerName": "学无止境DayDayUp", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126554269.jpg", "writerRankTotal": "13621", "writerRankWeekly": "5350", "writerThumb": "15", "writerVisitNum": "34491", "blog_read_count": "180", "blog_time": "于 2022-09-03 21:46:31 发布", "blog_title": "Java项目硅谷课堂学习笔记-P9-整合网关与实现订单和营销管理模块", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>P9-整合网关与实现订单和营销管理模块</h3>\n<ul><li><a href=\"#0_1\">0.概述</a></li><li><a href=\"#1SpringCloud_4\">1.SpringCloud</a></li><li><ul><li><a href=\"#11Spring_Cloud_5\">1.1什么是Spring Cloud</a></li><li><a href=\"#12Spring_CloudSpring_Boot_18\">1.2Spring Cloud和Spring Boot关系</a></li><li><a href=\"#13Spring_Cloud_24\">1.3Spring Cloud相关基础服务组件</a></li></ul>\n</li><li><a href=\"#2Nacos_33\">2.Nacos</a></li><li><ul><li><a href=\"#20Nacos_34\">2.0Nacos作用</a></li><li><a href=\"#21_37\">2.1基本概念</a></li><li><a href=\"#22_40\">2.2常见的注册中心</a></li><li><a href=\"#23Nacos_59\">2.3Nacos结构图</a></li><li><a href=\"#24Nacos_61\">2.4Nacos启动</a></li><li><a href=\"#25_80\">2.5服务注册</a></li><li><ul><li><a href=\"#251_81\">2.5.1引入依赖</a></li><li><a href=\"#252service_vod_97\">2.5.2配置自己的服务service_vod</a></li><li><a href=\"#253Nacos_104\">2.5.3添加Nacos客户端注解</a></li></ul>\n</li><li><a href=\"#26Nacos_126\">2.6Nacos使用注意点</a></li></ul>\n</li><li><a href=\"#3gateway_129\">3.gateway网关</a></li><li><ul><li><a href=\"#31Gateway_132\">3.1Gateway概述</a></li><li><a href=\"#32Gateway_137\">3.2Gateway核心概念</a></li><li><ul><li><a href=\"#321__148\">3.2.1 **路由**</a></li><li><a href=\"#322__158\">3.2.2 **断言**</a></li><li><a href=\"#323_161\">3.2.3.**过滤器**</a></li></ul>\n</li><li><a href=\"#33_165\">3.3实现网关转发功能</a></li><li><ul><li><a href=\"#331_166\">3.3.1创建网关模块</a></li><li><a href=\"#332_171\">3.3.2引入网关依赖</a></li><li><a href=\"#333_194\">3.3.3创建启动类</a></li><li><a href=\"#334_204\">3.3.4创建配置文件</a></li></ul>\n</li><li><a href=\"#34_230\">3.4网关解决跨域问题</a></li><li><ul><li><a href=\"#341_232\">3.4.1跨域概述</a></li><li><a href=\"#342_238\">3.4.2创建配置类</a></li><li><a href=\"#335_267\">3.3.5修改前端</a></li></ul>\n</li></ul>\n</li><li><a href=\"#4__269\">4. 后台管理系统-订单管理模块</a></li><li><ul><li><a href=\"#41_271\">4.1环境准备</a></li><li><ul><li><a href=\"#411_272\">4.1.1创建数据库表</a></li><li><a href=\"#412_276\">4.1.2创建订单模块</a></li><li><a href=\"#413_279\">4.1.3生成订单相关实体类</a></li><li><a href=\"#414_281\">4.1.4创建启动类</a></li><li><a href=\"#415_291\">4.1.5创建配置文件</a></li><li><a href=\"#416_321\">4.1.6创建配置类</a></li></ul>\n</li><li><a href=\"#42_345\">4.2订单列表接口</a></li><li><ul><li><a href=\"#421controller_346\">4.2.1后端-条件分页查询接口controller</a></li><li><a href=\"#422serviceImpl_398\">4.2.2后端-serviceImpl层</a></li><li><a href=\"#423service_gateway_499\">4.2.3后端-service_gateway配置文件</a></li><li><a href=\"#424_510\">4.2.4前端-接口定义</a></li><li><a href=\"#425_529\">4.2.5前端-创建路由</a></li><li><a href=\"#426_549\">4.2.6前端-页面</a></li><li><a href=\"#427_696\">4.2.7最终实现效果</a></li></ul>\n</li><li><a href=\"#5__699\">5. 后台管理系统-营销管理模块</a></li><li><a href=\"#51_702\">5.1环境准备</a></li><li><ul><li><a href=\"#511_703\">5.1.1创建数据库表</a></li><li><a href=\"#512_706\">5.1.2创建营销模块</a></li><li><a href=\"#513_709\">5.1.3生成订单相关实体类</a></li><li><a href=\"#514_713\">5.1.4创建启动类</a></li><li><a href=\"#515_726\">5.1.5创建配置文件</a></li><li><a href=\"#516_756\">5.1.6创建配置类</a></li></ul>\n</li><li><a href=\"#52_770\">5.2开发优惠券相关接口</a></li><li><ul><li><a href=\"#521CouponInfoController_771\">5.2.1编写CouponInfoController</a></li><li><a href=\"#522Service_845\">5.2.2编写Service</a></li><li><a href=\"#523ServiceImpl_854\">5.2.3ServiceImpl</a></li></ul>\n</li></ul>\n</li><li><a href=\"#6__857\">6 .优惠券列表接口</a></li><li><ul><li><a href=\"#61_858\">6.1编写获取用户信息接口</a></li><li><ul><li><a href=\"#611service_user_860\">6.1.1创建service_user模块</a></li><li><a href=\"#612_862\">6.1.2生成相关代码</a></li><li><a href=\"#613_864\">6.1.3创建启动类</a></li><li><a href=\"#614_879\">6.1.4创建配置文件</a></li><li><a href=\"#615UserInfocontroller_907\">6.1.5编写UserInfocontroller</a></li><li><a href=\"#616_927\">6.1.6配置网关</a></li></ul>\n</li><li><a href=\"#62_941\">6.2创建模块定义远程接口.</a></li><li><ul><li><a href=\"#621_942\">6.2.1创建模块</a></li><li><a href=\"#622service_client_947\">6.2.2service_client引入依赖</a></li><li><a href=\"#623_980\">6.2.3定义远程调用的接口</a></li></ul>\n</li><li><a href=\"#63Service_992\">6.3编写Service实现方法</a></li><li><ul><li><a href=\"#631service_activity_993\">6.3.1service_activity引入依赖</a></li><li><a href=\"#632service_activity_1005\">6.3.2service_activity添加注解</a></li><li><a href=\"#633CouponInfoServiceImpl_1026\">6.3.3CouponInfoServiceImpl实现方法</a></li></ul>\n</li><li><a href=\"#64_1117\">6.4配置网关</a></li><li><a href=\"#65_1130\">6.5整合优惠券前端</a></li><li><ul><li><a href=\"#651_1131\">6.5.1定义接口</a></li><li><a href=\"#65_1194\">6.5.创建路由</a></li><li><a href=\"#653vue_1237\">6.5.3创建vue页面</a></li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"0_1\"></a>0.概述</h1>\n<p><img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\f58b576af5494c4787fd37cf1f83b964.png\"/></p>\n<h1><a id=\"1SpringCloud_4\"></a>1.SpringCloud</h1>\n<h2><a id=\"11Spring_Cloud_5\"></a>1.1什么是Spring Cloud</h2>\n<p>Spring Cloud是<mark>一系列框架的集合</mark>。它利用Spring Boot的开发便利性<mark>简化了分布式系统基础设施的开发</mark>，如</p>\n<ul><li>服务发现</li><li>服务注册</li><li>配置中心</li><li>消息总线</li><li>负载均衡</li><li>熔断器</li><li>数据监控等</li></ul>\n<p><mark>都可以用Spring Boot的开发风格做到一键启动和部署</mark>。Spring并没有重复制造轮子，<mark>它只是将目前各家公司开发的比较成熟、经得起实际考验的服务框架组合起来</mark>，通过<mark>SpringBoot风格进行再封装屏蔽掉了复杂的配置和实现原理</mark>，最终给开发者留出了一套简单易懂、易部署和易维护的分布式系统开发工具包</p>\n<h2><a id=\"12Spring_CloudSpring_Boot_18\"></a>1.2Spring Cloud和Spring Boot关系</h2>\n<p>Spring Boot 是 Spring 的一套快速配置脚手架，可以基于Spring Boot 快速开发单个微服务，Spring Cloud是一个基于Spring Boot实现的开发工具；</p>\n<p>Spring Boot专注于快速、方便集成的单个微服务个体，Spring Cloud关注全局的服务治理框架；<br/> Spring Boot使用了默认大于配置的理念，很多集成方案已经帮你选择好了，能不配置就不配置，<mark>Spring Cloud很大的一部分是基于Spring Boot来实现，必须基于Spring Boot开发</mark>。<mark>可以单独使用Spring Boot开发项目，但是Spring Cloud离不开 Spring Boot</mark></p>\n<h2><a id=\"13Spring_Cloud_24\"></a>1.3Spring Cloud相关基础服务组件</h2>\n<ol><li>服务<mark>发现</mark>——Netflix Eureka （Nacos）</li><li>服务<mark>调用</mark>——Netflix Feign</li><li>熔断器——Netflix Hystrix</li><li>服务网关——Spring Cloud GateWay</li><li>分布式配置——Spring Cloud Config （Nacos）</li><li>消息总线 —— Spring Cloud Bus （Nacos）</li></ol>\n<h1><a id=\"2Nacos_33\"></a>2.Nacos</h1>\n<h2><a id=\"20Nacos_34\"></a>2.0Nacos作用</h2>\n<ol><li>注册中心</li><li>配置中心</li></ol>\n<h2><a id=\"21_37\"></a>2.1基本概念</h2>\n<p>Nacos 是<mark>阿里巴巴</mark>推出来的一个新开源项目，是一个更易于构建云原生应用的<mark>动态服务发现</mark>、<mark>配置管理和服务管理平台</mark>。Nacos 致力于帮助您发现、配置和管理微服务。Nacos 提供了一组简单易用的特性集，帮助您快速实现动态服务发现、服务配置、服务元数据及流量管理。Nacos 帮助您更敏捷和容易地构建、交付和管理微服务平台。 Nacos 是构建以“服务”为中心的现代应用架构 (例如微服务范式、云原生范式) 的服务基础设施。</p>\n<h2><a id=\"22_40\"></a>2.2常见的注册中心</h2>\n<ol><li> <p>Eureka（原生，2.0遇到性能瓶颈，停止维护）</p> </li><li> <p>Zookeeper（支持，专业的独立产品。例如：dubbo）</p> </li><li> <p>Consul（原生，GO语言开发）</p> </li><li> <p>Nacos</p> </li></ol>\n<p>相对于 Spring Cloud Eureka 来说，<mark>Nacos 更强大</mark>。</p>\n<p><code>Nacos = Spring Cloud Eureka + Spring Cloud Config</code></p>\n<p>Nacos 可以与 Spring, Spring Boot, Spring Cloud 集成，并能代替 Spring Cloud Eureka, Spring Cloud Config</p>\n<p><mark>通过 Nacos Server 和 spring-cloud-starter-alibaba-nacos-discovery 实现服务的注册与发现</mark>。</p>\n<h2><a id=\"23Nacos_59\"></a>2.3Nacos结构图</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b6fa73540ce14007bb8f85a61bd6e82a.png\"/></p>\n<h2><a id=\"24Nacos_61\"></a>2.4Nacos启动</h2>\n<p><a href=\"https://github.com/alibaba/nacos/releases\">Nacos下载地址</a><br/> Windows</p>\n<p>启动方式，cmd打开，执行命令：</p>\n<pre><code class=\"prism language-bash\">startup.cmd -m standalone\n</code></pre>\n<p>访问：http://localhost:8848/nacos</p>\n<p>用户名密码：nacos/nacos</p>\n<p>如果Nacos启动不了发现网页打不开，</p>\n<ul><li>看一看当前文件夹所在路径是否包含中文，更换到全英文路径的文件下</li><li>其次删除解压的文件，重新解压，再次启动即可<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5e6436996a7f4b75a74bbea1f333dafd.png\"/><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a9f956d7522c44348040188bf0faa36f.png\"/></li></ul>\n<h2><a id=\"25_80\"></a>2.5服务注册</h2>\n<h3><a id=\"251_81\"></a>2.5.1引入依赖</h3>\n<pre><code class=\"prism language-xml\"><span class=\"token comment\">&lt;!-- 服务注册 --&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>com.alibaba.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token comment\">&lt;!-- 服务调用feign --&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-cloud-starter-openfeign<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<h3><a id=\"252service_vod_97\"></a>2.5.2配置自己的服务service_vod</h3>\n<p>配置application.properties，在客户端微服务中添加注册Nacos服务的配置信息</p>\n<pre><code class=\"prism language-xml\"># nacos服务地址\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\n</code></pre>\n<h3><a id=\"253Nacos_104\"></a>2.5.3添加Nacos客户端注解</h3>\n<p>在service_vod微服务<mark>启动类</mark>中添加注解</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>vod</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ComponentScan</span><span class=\"token punctuation\">;</span>\n<span class=\"token annotation punctuation\">@EnableDiscoveryClient</span>\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@ComponentScan</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"com.jq\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceVodApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceVodApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b4af3fc29f6f40bab7618dede4087935.png\"/><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5784e424c7b543c4a4ecf4af4c83b64e.png\"/></p>\n<h2><a id=\"26Nacos_126\"></a>2.6Nacos使用注意点</h2>\n<p><mark>后期每个功能写完的时候，首先启动Nacos，然后再启动Java程序，否则报错</mark></p>\n<h1><a id=\"3gateway_129\"></a>3.gateway网关</h1>\n<p><img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\746bcfe309de4c54826538f486b565ec.png\"/></p>\n<h2><a id=\"31Gateway_132\"></a>3.1Gateway概述</h2>\n<p><strong>Spring cloud gateway</strong>是spring官方基于Spring 5.0、Spring Boot2.0和Project Reactor等技术开发的网关，Spring Cloud Gateway旨在为微服务架构提供<mark>简单、有效和统一的API路由管理方式</mark>，Spring Cloud Gateway作为Spring Cloud生态系统中的网关，目标是替代<mark>Netflix Zuul</mark>，其不仅提供统一的路由方式，并且还<mark>基于Filter链的方式</mark>提供了网关基本的功能，例如：安全、监控/埋点、限流等。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c32805f093c4435b91135339ea3ee4a3.png\"/></p>\n<h2><a id=\"32Gateway_137\"></a>3.2Gateway核心概念</h2>\n<p><mark>网关提供API全托管服务</mark>，丰富的API管理功能，辅助企业管理大规模的API，以降低管理成本和安全风险，包括</p>\n<ul><li>协议适配</li><li>协议转发</li><li>安全策略</li><li>防刷</li><li>流量</li><li>监控日志等</li></ul>\n<p><mark>一般来说网关对外暴露的URL或者接口信息，我们统称为路由信息</mark>。如果研发过网关中间件或者使用过Zuul的人，会知道网关的核心是Filter以及Filter Chain（Filter责任链）。Sprig Cloud Gateway也具有路由和Filter的概念。下面介绍一下Spring Cloud Gateway中几个重要的概念。</p>\n<h3><a id=\"321__148\"></a>3.2.1 <strong>路由</strong></h3>\n<p>路由是网关最基础的部分，路由信息有</p>\n<ul><li>一个ID</li><li>一个目的URL</li><li>一组断言</li><li>一组Filter组成</li></ul>\n<p><mark>如果断言路由为真，则说明请求的URL和配置匹配</mark></p>\n<h3><a id=\"322__158\"></a>3.2.2 <strong>断言</strong></h3>\n<p>Java8中的断言函数。Spring Cloud Gateway中的断言函数输入类型是Spring5.0框架中的ServerWebExchange。Spring Cloud Gateway中的断言函数允许开发者去定义匹配来自于http request中的任何信息，比如请求头和参数等。</p>\n<h3><a id=\"323_161\"></a>3.2.3.<strong>过滤器</strong></h3>\n<p>一个标准的Spring webFilter。Spring cloud gateway中的filter分为<mark>两种类型的Filter，分别是Gateway Filter和Global Filter</mark>。过滤器Filter将会对请求和响应进行修改处理</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\58d59b9ef5df497986a892f4a92631bc.png\"/></p>\n<h2><a id=\"33_165\"></a>3.3实现网关转发功能</h2>\n<h3><a id=\"331_166\"></a>3.3.1创建网关模块</h3>\n<p>在ggkt_parent下创建service_gateway</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f27fe5fa55c14e9fbe4ba2834e03e5d7.png\"/></p>\n<h3><a id=\"332_171\"></a>3.3.2引入网关依赖</h3>\n<pre><code class=\"prism language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>com.atguigu<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>service_util<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">&gt;</span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token comment\">&lt;!-- 网关 --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-cloud-starter-gateway<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token comment\">&lt;!-- 服务注册 --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>com.alibaba.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<h3><a id=\"333_194\"></a>3.3.3创建启动类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ApiGatewayApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ApiGatewayApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"334_204\"></a>3.3.4创建配置文件</h3>\n<p>编写application.properties</p>\n<pre><code class=\"prism language-xml\"># 服务端口\nserver.port=8333\n\n# 服务名\nspring.application.name=service-gateway\n\n# nacos服务地址\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\n\n\n#使用服务发现路由\nspring.cloud.gateway.discovery.locator.enabled=true\n\n#service-vod模块配置\n#设置路由id 即Nacos中服务注册的名称\nspring.cloud.gateway.routes[0].id=service-vod\n#设置路由的uri  lb ：loadbalance\nspring.cloud.gateway.routes[0].uri=lb://service-vod\n#设置路由断言,代理servicerId为auth-service的/auth/路径  /admin/vod/chapter\nspring.cloud.gateway.routes[0].predicates= Path=/*/vod/**\n</code></pre>\n<h2><a id=\"34_230\"></a>3.4网关解决跨域问题</h2>\n<h3><a id=\"341_232\"></a>3.4.1跨域概述</h3>\n<p><mark>跨域本质是浏览器对于ajax请求的一种安全限制</mark>：一个页面发起的ajax请求，只能是<mark>与当前页域名相同的路径</mark>，这<mark>能有效的阻止跨站攻击</mark>。因此：跨域问题 是针对ajax的一种限制。但是这却给我们的开发带来了不便，而且在实际生产环境中，肯定会有很多台服务器之间交互，地址和端口都可能不同。</p>\n<p>之前我们通过服务器添加注解实现，现在我们跨域通过网关来解决跨域问题。</p>\n<h3><a id=\"342_238\"></a>3.4.2创建配置类</h3>\n<p>过滤器实现</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>cors<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CorsConfiguration</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>cors<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CorsWebFilter</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>cors<span class=\"token punctuation\">.</span>reactive<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UrlBasedCorsConfigurationSource</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>pattern<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PathPatternParser</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CorsConfig</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//处理跨域</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CorsWebFilter</span> <span class=\"token function\">corsFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">CorsConfiguration</span> config <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CorsConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        config<span class=\"token punctuation\">.</span><span class=\"token function\">addAllowedMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        config<span class=\"token punctuation\">.</span><span class=\"token function\">addAllowedOrigin</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        config<span class=\"token punctuation\">.</span><span class=\"token function\">addAllowedHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">UrlBasedCorsConfigurationSource</span> source <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UrlBasedCorsConfigurationSource</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">PathPatternParser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        source<span class=\"token punctuation\">.</span><span class=\"token function\">registerCorsConfiguration</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/**\"</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CorsWebFilter</span><span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h3><a id=\"335_267\"></a>3.3.5修改前端</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\df94f2d5686c4aab82aa295456f22665.png\"/></p>\n<h1><a id=\"4__269\"></a>4. 后台管理系统-订单管理模块</h1>\n<p><img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\e09a3e97a8bb45289f285e29124752bd.png\"/></p>\n<h2><a id=\"41_271\"></a>4.1环境准备</h2>\n<h3><a id=\"411_272\"></a>4.1.1创建数据库表</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dbab6f1cc8354940af495e4a54bf245b.png\"/></p>\n<h3><a id=\"412_276\"></a>4.1.2创建订单模块</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c6b8f8422ddb4af69e3dfea7278a4b5c.png\"/></p>\n<h3><a id=\"413_279\"></a>4.1.3生成订单相关实体类</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4200ee4c68154017a50c51b6b3ab849d.png\"/></p>\n<h3><a id=\"414_281\"></a>4.1.4创建启动类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceOrderApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceOrderApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"415_291\"></a>4.1.5创建配置文件</h3>\n<pre><code class=\"prism language-xml\"># 服务端口\nserver.port=8302\n\n# 服务名\nspring.application.name=service-order\n\n# 环境设置：dev、test、prod\nspring.profiles.active=dev\n\n# mysql数据库连接\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/glkt_order?characterEncoding=utf-8&amp;useSSL=false\nspring.datasource.username=root\nspring.datasource.password=123456\n\n#返回json的全局时间格式\nspring.jackson.date-format=yyyy-MM-dd HH:mm:ss\nspring.jackson.time-zone=GMT+8\n\n#mybatis日志\nmybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl\n\nmybatis-plus.mapper-locations=classpath:com/jq/order/mapper/xml/*.xml\n\n# nacos服务地址\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\n</code></pre>\n<h3><a id=\"416_321\"></a>4.1.6创建配置类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PaginationInterceptor</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>mybatis<span class=\"token punctuation\">.</span>spring<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MapperScan</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@MapperScan</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.jq.order.mapper\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderConfig</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">/**\n     * 分页插件\n     */</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PaginationInterceptor</span> <span class=\"token function\">paginationInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaginationInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"42_345\"></a>4.2订单列表接口</h2>\n<h3><a id=\"421controller_346\"></a>4.2.1后端-条件分页查询接口controller</h3>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Page</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>databind<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ObjectReader</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfoService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Result</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>vo<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfoQueryVo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">io<span class=\"token punctuation\">.</span>swagger<span class=\"token punctuation\">.</span>annotations<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Api</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PathVariable</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * &lt;p&gt;\n * 订单表 订单表 前端控制器\n * &lt;/p&gt;\n *\n * @author CJQ\n * @since 2022-08-31\n */</span>\n\n<span class=\"token annotation punctuation\">@Api</span><span class=\"token punctuation\">(</span>tags <span class=\"token operator\">=</span> <span class=\"token string\">\"订单管理\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"/admin/order/orderInfo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderInfoController</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrderInfoService</span> orderInfoService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//订单列表</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{page}/{limit}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">listOrder</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> page<span class=\"token punctuation\">,</span>\n                            <span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> limit<span class=\"token punctuation\">,</span>\n                            <span class=\"token class-name\">OrderInfoQueryVo</span> orderInfoQueryVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//创建page对象</span>\n        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span>pageParam <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">,</span>limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">&gt;</span></span> map<span class=\"token operator\">=</span>orderInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">selectOrderInfoPage</span><span class=\"token punctuation\">(</span>pageParam<span class=\"token punctuation\">,</span>orderInfoQueryVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>map<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n</code></pre>\n<h3><a id=\"422serviceImpl_398\"></a>4.2.2后端-serviceImpl层</h3>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>impl</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">QueryWrapper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Page</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderDetail</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>mapper<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfoMapper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderDetailService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfoService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServiceImpl</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>vo<span class=\"token punctuation\">.</span>order<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">OrderInfoQueryVo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">HashMap</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Map</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * &lt;p&gt;\n * 订单表 订单表 服务实现类\n * &lt;/p&gt;\n *\n * @author CJQ\n * @since 2022-08-31\n */</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OrderInfoServiceImpl</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ServiceImpl</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfoMapper</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OrderInfoService</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrderDetailService</span> orderDetailService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">selectOrderInfoPage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span> pageParam<span class=\"token punctuation\">,</span> <span class=\"token class-name\">OrderInfoQueryVo</span> orderInfoQueryVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//orderInfoQueryVo获得查询条件</span>\n        <span class=\"token class-name\">Long</span> userId <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getUserId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> outTradeNo <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getOutTradeNo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> phone <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getPhone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> createTimeEnd <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getCreateTimeEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> createTimeBegin <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getCreateTimeBegin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Integer</span> orderStatus <span class=\"token operator\">=</span> orderInfoQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getOrderStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//判断条件值是否为空，如果不为空进行条件封装</span>\n        <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span>wrapper<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>orderStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"order_status\"</span><span class=\"token punctuation\">,</span>orderStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user_id\"</span><span class=\"token punctuation\">,</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>outTradeNo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"out_trade_no\"</span><span class=\"token punctuation\">,</span>outTradeNo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"phone\"</span><span class=\"token punctuation\">,</span>phone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>createTimeBegin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">ge</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"create_time\"</span><span class=\"token punctuation\">,</span>createTimeBegin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>createTimeEnd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">le</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"create_time\"</span><span class=\"token punctuation\">,</span>createTimeEnd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">//调用mapper中的方法实现分页查询</span>\n        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span> pages <span class=\"token operator\">=</span> baseMapper<span class=\"token punctuation\">.</span><span class=\"token function\">selectPage</span><span class=\"token punctuation\">(</span>pageParam<span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">long</span> totalCount <span class=\"token operator\">=</span> pages<span class=\"token punctuation\">.</span><span class=\"token function\">getTotal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">long</span> pageCount <span class=\"token operator\">=</span> pages<span class=\"token punctuation\">.</span><span class=\"token function\">getPages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderInfo</span><span class=\"token punctuation\">&gt;</span></span> records <span class=\"token operator\">=</span> pages<span class=\"token punctuation\">.</span><span class=\"token function\">getRecords</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//订单里面包含详情内容，封装详情数据，根据订单id查询详情</span>\n        records<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">-&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">geoOrderDetail</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//所有需要的数据封装到map集合，最终返回</span>\n        <span class=\"token class-name\">Map</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">&gt;</span></span> map<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">HashMap</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"total\"</span><span class=\"token punctuation\">,</span>totalCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pageCount\"</span><span class=\"token punctuation\">,</span>pageCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        map<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"records\"</span><span class=\"token punctuation\">,</span>records<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//查询订单详情数据</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">OrderInfo</span> <span class=\"token function\">geoOrderDetail</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OrderInfo</span> orderInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//先得到订单id</span>\n        <span class=\"token class-name\">Long</span> id <span class=\"token operator\">=</span> orderInfo<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//查询订单详情</span>\n        <span class=\"token class-name\">OrderDetail</span> orderDetail <span class=\"token operator\">=</span> orderDetailService<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>orderDetail<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">String</span> courseName <span class=\"token operator\">=</span> orderDetail<span class=\"token punctuation\">.</span><span class=\"token function\">getCourseName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            orderInfo<span class=\"token punctuation\">.</span><span class=\"token function\">getParam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"courseName\"</span><span class=\"token punctuation\">,</span>courseName<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> orderInfo<span class=\"token punctuation\">;</span>\n        \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h3><a id=\"423service_gateway_499\"></a>4.2.3后端-service_gateway配置文件</h3>\n<pre><code class=\"prism language-xml\">#service-order模块配置\n#设置路由id 即Nacos中服务注册的名称\nspring.cloud.gateway.routes[1].id=service-order\n#设置路由的uri  lb ：loadbalance\nspring.cloud.gateway.routes[1].uri=lb://service-order\n#设置路由断言,代理servicerId为auth-service的/auth/路径  /admin/order/orderInfo\nspring.cloud.gateway.routes[1].predicates= Path=/*/order/**\n</code></pre>\n<h3><a id=\"424_510\"></a>4.2.4前端-接口定义</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\82868edf4a914464bb3b2d91341cad83.png\"/></p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'@/utils/request'</span>\n\n<span class=\"token keyword\">const</span> api_name <span class=\"token operator\">=</span> <span class=\"token string\">'/admin/order/orderInfo'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token function\">getPageList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> searchObj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> searchObj\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"425_529\"></a>4.2.5前端-创建路由</h3>\n<pre><code class=\"prism language-javascript\">  <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/order'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Layout<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">redirect</span><span class=\"token operator\">:</span> <span class=\"token string\">'/order/orderInfo/list'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Order'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'订单管理'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> <span class=\"token string\">'el-icon-truck'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">alwaysShow</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'orderInfo/list'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'OrderInfo'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/views/order/orderInfo/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'订单列表'</span> <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<h3><a id=\"426_549\"></a>4.2.6前端-页面</h3>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"app-container\"</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>card <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"operate-container\"</span> shadow<span class=\"token operator\">=</span><span class=\"token string\">\"never\"</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form <span class=\"token operator\">:</span>inline<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"demo-form-inline\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"searchObj.outTradeNo\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"订单号\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"searchObj.phone\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"手机\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>date<span class=\"token operator\">-</span>picker\n            v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"searchObj.createTimeBegin\"</span>\n            type<span class=\"token operator\">=</span><span class=\"token string\">\"date\"</span>\n            placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"选择下单开始日期\"</span>\n            value<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy-MM-dd\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>date<span class=\"token operator\">-</span>picker\n            v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"searchObj.createTimeEnd\"</span>\n            type<span class=\"token operator\">=</span><span class=\"token string\">\"date\"</span>\n            placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"选择截止日期\"</span>\n            value<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy-MM-dd\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>select v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"searchObj.orderStatus\"</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"订单状态\"</span> <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"v-select patient-select\"</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>option\n              v<span class=\"token operator\">-</span><span class=\"token keyword\">for</span><span class=\"token operator\">=</span><span class=\"token string\">\"item in statusList\"</span>\n              <span class=\"token operator\">:</span>key<span class=\"token operator\">=</span><span class=\"token string\">\"item.status\"</span>\n              <span class=\"token operator\">:</span>label<span class=\"token operator\">=</span><span class=\"token string\">\"item.name\"</span>\n              <span class=\"token operator\">:</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"item.status\"</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>option<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>select<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span> icon<span class=\"token operator\">=</span><span class=\"token string\">\"el-icon-search\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"fetchData()\"</span><span class=\"token operator\">&gt;</span>查询<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"default\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"resetData()\"</span><span class=\"token operator\">&gt;</span>清空<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>card<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 列表 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table\n      v<span class=\"token operator\">-</span>loading<span class=\"token operator\">=</span><span class=\"token string\">\"listLoading\"</span>\n      <span class=\"token operator\">:</span>data<span class=\"token operator\">=</span><span class=\"token string\">\"list\"</span>\n      border\n      fit\n      highlight<span class=\"token operator\">-</span>current<span class=\"token operator\">-</span>row<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column\n        label<span class=\"token operator\">=</span><span class=\"token string\">\"序号\"</span>\n        width<span class=\"token operator\">=</span><span class=\"token string\">\"60\"</span>\n        align<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token punctuation\">(</span>page <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> limit <span class=\"token operator\">+</span> scope<span class=\"token punctuation\">.</span>$index <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"outTradeNo\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"订单号\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"160\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"courseName\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"课程名称\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"160\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> scope<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">.</span>param<span class=\"token punctuation\">.</span>courseName <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"finalAmount\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"订单金额\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"90\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"nickName\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"下单用户\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"phone\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"用户手机\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"payTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"支付时间\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"156\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"orderStatus\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"订单状态\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> scope<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">.</span>orderStatus <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token string\">'未支付'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'已支付'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"createTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"下单时间\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"156\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 分页组件 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>pagination\n      <span class=\"token operator\">:</span>current<span class=\"token operator\">-</span>page<span class=\"token operator\">=</span><span class=\"token string\">\"page\"</span>\n      <span class=\"token operator\">:</span>total<span class=\"token operator\">=</span><span class=\"token string\">\"total\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>size<span class=\"token operator\">=</span><span class=\"token string\">\"limit\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>sizes<span class=\"token operator\">=</span><span class=\"token string\">\"[5, 10, 20, 30, 40, 50, 100]\"</span>\n      style<span class=\"token operator\">=</span><span class=\"token string\">\"padding: 30px 0; text-align: center;\"</span>\n      layout<span class=\"token operator\">=</span><span class=\"token string\">\"sizes, prev, pager, next, jumper, -&gt;, total, slot\"</span>\n      @current<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"fetchData\"</span>\n      @size<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"changeSize\"</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">&gt;</span>\n<span class=\"token keyword\">import</span> orderInfoApi <span class=\"token keyword\">from</span> <span class=\"token string\">'@/api/order/orderInfo'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">listLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据是否正在加载</span>\n      <span class=\"token literal-property property\">list</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// banner列表</span>\n      <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据库中的总记录数</span>\n      <span class=\"token literal-property property\">page</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认页码</span>\n      <span class=\"token literal-property property\">limit</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 每页记录数</span>\n      <span class=\"token literal-property property\">searchObj</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 查询表单对象</span>\n      <span class=\"token literal-property property\">statusList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token string-property property\">'status'</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string-property property\">'name'</span><span class=\"token operator\">:</span> <span class=\"token string\">'未支付'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token string-property property\">'status'</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string-property property\">'name'</span><span class=\"token operator\">:</span> <span class=\"token string\">'已支付'</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 生命周期函数：内存准备完毕，页面尚未渲染</span>\n  <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// 生命周期函数：内存准备完毕，页面渲染成功</span>\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'list mounted......'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 当页码发生改变的时候</span>\n    <span class=\"token function\">changeSize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit <span class=\"token operator\">=</span> size\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 加载banner列表数据</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// 异步获取远程数据（ajax）</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page\n      orderInfoApi<span class=\"token punctuation\">.</span><span class=\"token function\">getPageList</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>records\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>total\n          <span class=\"token comment\">// 数据加载并绑定成功</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 重置查询表单</span>\n    <span class=\"token function\">resetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'重置查询表单'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h3><a id=\"427_696\"></a>4.2.7最终实现效果</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e6d7484ad8a44608985fa9e3b90749eb.png\"/></p>\n<h2><a id=\"5__699\"></a>5. 后台管理系统-营销管理模块</h2>\n<p><img alt=\"请添加图片描述\" src=\"..\\..\\static\\image\\971e474545524188aadf977712f334f1.png\"/></p>\n<h2><a id=\"51_702\"></a>5.1环境准备</h2>\n<h3><a id=\"511_703\"></a>5.1.1创建数据库表</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\468b147cca064dd4b7776d0b234e766d.png\"/></p>\n<h3><a id=\"512_706\"></a>5.1.2创建营销模块</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d2437f5e18db406187a607a9f1b24c46.png\"/></p>\n<h3><a id=\"513_709\"></a>5.1.3生成订单相关实体类</h3>\n<p>service模块下创建service_activity模块<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\38ff0eebc9e241ab96e3ac9cda9908cb.png\"/></p>\n<h3><a id=\"514_713\"></a>5.1.4创建启动类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableDiscoveryClient</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceActivityApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceActivityApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"515_726\"></a>5.1.5创建配置文件</h3>\n<pre><code class=\"prism language-xml\"># 服务端口\nserver.port=8303\n\n# 服务名\nspring.application.name=service-activity\n\n# 环境设置：dev、test、prod\nspring.profiles.active=dev\n\n# mysql数据库连接\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\nspring.datasource.url=jdbc:mysql://localhost:3306/glkt_activity?characterEncoding=utf-8&amp;useSSL=false\nspring.datasource.username=root\nspring.datasource.password=123456\n\n#返回json的全局时间格式\nspring.jackson.date-format=yyyy-MM-dd HH:mm:ss\nspring.jackson.time-zone=GMT+8\n\n#mybatis日志\nmybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl\n\nmybatis-plus.mapper-locations=classpath:com/jq/activity/mapper/xml/*.xml\n\n# nacos服务地址\nspring.cloud.nacos.discovery.server-addr=127.0.0.1:8848\n</code></pre>\n<h3><a id=\"516_756\"></a>5.1.6创建配置类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@MapperScan</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.atguigu.ggkt.activity.mapper\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ActivityConfig</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">/**\n     * 分页插件\n     */</span>\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">PaginationInterceptor</span> <span class=\"token function\">paginationInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PaginationInterceptor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"52_770\"></a>5.2开发优惠券相关接口</h2>\n<h3><a id=\"521CouponInfoController_771\"></a>5.2.1编写CouponInfoController</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/admin/activity/couponInfo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CouponInfoController</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">CouponInfoService</span> couponInfoService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"获取分页列表\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"{page}/{limit}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"当前页码\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> page<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"limit\"</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"每页记录数\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> limit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponInfo</span><span class=\"token punctuation\">&gt;</span></span> pageParam <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">IPage</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponInfo</span><span class=\"token punctuation\">&gt;</span></span> pageModel <span class=\"token operator\">=</span> couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">page</span><span class=\"token punctuation\">(</span>pageParam<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>pageModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"获取优惠券\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">CouponInfo</span> couponInfo <span class=\"token operator\">=</span> couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>couponInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"新增优惠券\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"save\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">CouponInfo</span> couponInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span>couponInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"修改优惠券\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@PutMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"update\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">updateById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">CouponInfo</span> couponInfo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">updateById</span><span class=\"token punctuation\">(</span>couponInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"删除优惠券\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@DeleteMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"remove/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">removeById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value<span class=\"token operator\">=</span><span class=\"token string\">\"根据id列表删除优惠券\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@DeleteMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"batchRemove\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">batchRemove</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestBody</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">&gt;</span></span> idList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">removeByIds</span><span class=\"token punctuation\">(</span>idList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"获取分页列表\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"couponUse/{page}/{limit}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Result</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span>\n            <span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"page\"</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"当前页码\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> page<span class=\"token punctuation\">,</span>\n\n            <span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"limit\"</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"每页记录数\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n            <span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> limit<span class=\"token punctuation\">,</span>\n            <span class=\"token annotation punctuation\">@ApiParam</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"couponUseVo\"</span><span class=\"token punctuation\">,</span> value <span class=\"token operator\">=</span> <span class=\"token string\">\"查询对象\"</span><span class=\"token punctuation\">,</span> required <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token class-name\">CouponUseQueryVo</span> couponUseQueryVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> pageParam <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span>page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">IPage</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> pageModel <span class=\"token operator\">=</span> couponInfoService<span class=\"token punctuation\">.</span><span class=\"token function\">selectCouponUsePage</span><span class=\"token punctuation\">(</span>pageParam<span class=\"token punctuation\">,</span> couponUseQueryVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Result</span><span class=\"token punctuation\">.</span><span class=\"token function\">ok</span><span class=\"token punctuation\">(</span>pageModel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"522Service_845\"></a>5.2.2编写Service</h3>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">CouponInfoService</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">IService</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponInfo</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//获取已使用优惠券列表</span>\n    <span class=\"token class-name\">IPage</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">selectCouponUsePage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> pageParam<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CouponUseQueryVo</span> couponUseQueryVo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"523ServiceImpl_854\"></a>5.2.3ServiceImpl</h3>\n<h1><a id=\"6__857\"></a>6 .优惠券列表接口</h1>\n<h2><a id=\"61_858\"></a>6.1编写获取用户信息接口</h2>\n<h3><a id=\"611service_user_860\"></a>6.1.1创建service_user模块</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\354d843156054458818b9987f2259cbe.png\"/></p>\n<h3><a id=\"612_862\"></a>6.1.2生成相关代码</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5d180e57a56a42f1b752a5f07ddee5d0.png\"/></p>\n<h3><a id=\"613_864\"></a>6.1.3创建启动类</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableDiscoveryClient</span>\n<span class=\"token annotation punctuation\">@MapperScan</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.atguigu.ggkt.user.mapper\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceUserApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceUserApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"614_879\"></a>6.1.4创建配置文件</h3>\n<pre><code class=\"prism language-java\"># 服务端口\nserver<span class=\"token punctuation\">.</span>port<span class=\"token operator\">=</span><span class=\"token number\">8304</span>\n# 服务名\nspring<span class=\"token punctuation\">.</span>application<span class=\"token punctuation\">.</span>name<span class=\"token operator\">=</span>service<span class=\"token operator\">-</span>user\n\n# 环境设置：dev、test、prod\nspring<span class=\"token punctuation\">.</span>profiles<span class=\"token punctuation\">.</span>active<span class=\"token operator\">=</span>dev\n\n# mysql数据库连接\nspring<span class=\"token punctuation\">.</span>datasource<span class=\"token punctuation\">.</span>driver<span class=\"token operator\">-</span><span class=\"token keyword\">class</span><span class=\"token operator\">-</span>name<span class=\"token operator\">=</span><span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>mysql<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span></span>Driver</span>\nspring<span class=\"token punctuation\">.</span>datasource<span class=\"token punctuation\">.</span>url<span class=\"token operator\">=</span>jdbc<span class=\"token operator\">:</span>mysql<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token operator\">:</span><span class=\"token number\">3306</span><span class=\"token operator\">/</span>glkt_user<span class=\"token operator\">?</span>characterEncoding<span class=\"token operator\">=</span>utf<span class=\"token operator\">-</span><span class=\"token number\">8</span><span class=\"token operator\">&amp;</span>useSSL<span class=\"token operator\">=</span><span class=\"token boolean\">false</span>\nspring<span class=\"token punctuation\">.</span>datasource<span class=\"token punctuation\">.</span>username<span class=\"token operator\">=</span>root\nspring<span class=\"token punctuation\">.</span>datasource<span class=\"token punctuation\">.</span>password<span class=\"token operator\">=</span>root\n\n#返回json的全局时间格式\nspring<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>date<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span>yyyy<span class=\"token operator\">-</span>MM<span class=\"token operator\">-</span>dd HH<span class=\"token operator\">:</span>mm<span class=\"token operator\">:</span>ss\nspring<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>time<span class=\"token operator\">-</span>zone<span class=\"token operator\">=</span>GMT<span class=\"token operator\">+</span><span class=\"token number\">8</span>\n\n#mybatis日志\nmybatis<span class=\"token operator\">-</span>plus<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span>log<span class=\"token operator\">-</span>impl<span class=\"token operator\">=</span><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>ibatis<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span>stdout<span class=\"token punctuation\">.</span></span>StdOutImpl</span>\n\n# nacos服务地址\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>nacos<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span>server<span class=\"token operator\">-</span>addr<span class=\"token operator\">=</span><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">:</span><span class=\"token number\">8848</span>\n</code></pre>\n<h3><a id=\"615UserInfocontroller_907\"></a>6.1.5编写UserInfocontroller</h3>\n<p>实现根据用户id获取用户信息接口</p>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/admin/user/userInfo\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserInfoController</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserInfoService</span> userService<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@ApiOperation</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"获取\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"inner/getById/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserInfo</span> <span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> userService<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"616_927\"></a>6.1.6配置网关</h3>\n<p>在网关配置文件配置路径</p>\n<pre><code class=\"prism language-java\">#service<span class=\"token operator\">-</span>user模块配置\n#设置路由id\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>service<span class=\"token operator\">-</span>user\n#设置路由的uri\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uri<span class=\"token operator\">=</span>lb<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>service<span class=\"token operator\">-</span>user\n#设置路由断言<span class=\"token punctuation\">,</span>代理servicerId为auth<span class=\"token operator\">-</span>service的<span class=\"token operator\">/</span>auth<span class=\"token operator\">/</span>路径\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>predicates<span class=\"token operator\">=</span> <span class=\"token class-name\">Path</span><span class=\"token operator\">=</span><span class=\"token comment\">/*/user/**\n</span></code></pre>\n<h2><a id=\"62_941\"></a>6.2创建模块定义远程接口.</h2>\n<h3><a id=\"621_942\"></a>6.2.1创建模块</h3>\n<p>在<code>ggkt_parent -&gt; service_client -&gt; service_user_client</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4bc331ff4baf4fcf9dc1408605a19264.png\"/></p>\n<h3><a id=\"622service_client_947\"></a>6.2.2service_client引入依赖</h3>\n<pre><code class=\"prism language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependencies</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>com.atguigu<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>service_util<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">&gt;</span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">&gt;</span></span>provided <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>com.atguigu<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>model<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">&gt;</span></span>0.0.1-SNAPSHOT<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">&gt;</span></span>provided <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-boot-starter-web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">&gt;</span></span>provided <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token comment\">&lt;!-- 服务调用feign --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.springframework.cloud<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-cloud-starter-openfeign<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>scope</span><span class=\"token punctuation\">&gt;</span></span>provided <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>scope</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependencies</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<h3><a id=\"623_980\"></a>6.2.3定义远程调用的接口</h3>\n<pre><code class=\"prism language-java\"><span class=\"token annotation punctuation\">@FeignClient</span><span class=\"token punctuation\">(</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"service-user\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">UserInfoFeignClient</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n    <span class=\"token annotation punctuation\">@GetMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/admin/user/userInfo/inner/getById/{id}\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token class-name\">UserInfo</span> <span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@PathVariable</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"63Service_992\"></a>6.3编写Service实现方法</h2>\n<h3><a id=\"631service_activity_993\"></a>6.3.1service_activity引入依赖</h3>\n<pre><code class=\"prism language-java\"><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependencies<span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">&gt;</span></span>com<span class=\"token punctuation\">.</span>atguigu<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">&gt;</span>\n        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">&gt;</span></span>service_user_client<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">&gt;</span>\n        <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>version<span class=\"token punctuation\">&gt;</span></span><span class=\"token number\">0.0</span><span class=\"token number\">.1</span><span class=\"token operator\">-</span>SNAPSHOT<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>version<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependencies<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h3><a id=\"632service_activity_1005\"></a>6.3.2service_activity添加注解</h3>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>activity</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token punctuation\">.</span>autoconfigure<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">SpringBootApplication</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>discovery<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableDiscoveryClient</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>openfeign<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableFeignClients</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>openfeign<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FeignClient</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@SpringBootApplication</span>\n<span class=\"token annotation punctuation\">@EnableDiscoveryClient</span>\n<span class=\"token annotation punctuation\">@EnableFeignClients</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"com.jq\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ServiceActivityApplication</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ServiceActivityApplication</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"633CouponInfoServiceImpl_1026\"></a>6.3.3CouponInfoServiceImpl实现方法</h3>\n<p>远程调用，根据用户id获取用户信息</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>impl</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>conditions<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">QueryWrapper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span>metadata<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">IPage</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span>pagination<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Page</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span>mapper<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponInfoMapper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponInfoService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>baomidou<span class=\"token punctuation\">.</span>mybatisplus<span class=\"token punctuation\">.</span>extension<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span>impl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ServiceImpl</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponUseService</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserInfoFeignClient</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>model<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">UserInfo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>jq<span class=\"token punctuation\">.</span>vo<span class=\"token punctuation\">.</span>activity<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CouponUseQueryVo</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>stereotype<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Service</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">List</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * &lt;p&gt;\n * 优惠券信息 服务实现类\n * &lt;/p&gt;\n *\n * @author CJQ\n * @since 2022-09-01\n */</span>\n<span class=\"token annotation punctuation\">@Service</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CouponInfoServiceImpl</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">ServiceImpl</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponInfoMapper</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">CouponInfo</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">CouponInfoService</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//获取已经使用的优惠券列表(条件查询分页)</span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">CouponUseService</span> couponUseService<span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">UserInfoFeignClient</span> userInfoFeignClient<span class=\"token punctuation\">;</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">IPage</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">selectCouponUsePage</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> pageParam<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CouponUseQueryVo</span> couponUseQueryVo<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 获取条件值</span>\n        <span class=\"token class-name\">Long</span> couponId <span class=\"token operator\">=</span> couponUseQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getCouponId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> couponStatus <span class=\"token operator\">=</span> couponUseQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getCouponStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> getTimeBegin <span class=\"token operator\">=</span> couponUseQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGetTimeBegin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> getTimeEnd <span class=\"token operator\">=</span> couponUseQueryVo<span class=\"token punctuation\">.</span><span class=\"token function\">getGetTimeEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 封装条件</span>\n        <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> wrapper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QueryWrapper</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>couponId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"coupon_id\"</span><span class=\"token punctuation\">,</span>couponId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>couponStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"coupon_status\"</span><span class=\"token punctuation\">,</span>couponStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>getTimeBegin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">ge</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get_time\"</span><span class=\"token punctuation\">,</span>getTimeBegin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>getTimeEnd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">le</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"get_time\"</span><span class=\"token punctuation\">,</span>getTimeEnd<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">//调用方法查询</span>\n        <span class=\"token class-name\">Page</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> pageModel <span class=\"token operator\">=</span> couponUseService<span class=\"token punctuation\">.</span><span class=\"token function\">page</span><span class=\"token punctuation\">(</span>pageParam<span class=\"token punctuation\">,</span> wrapper<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//封装用户昵称和手机号</span>\n        <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">CouponUse</span><span class=\"token punctuation\">&gt;</span></span> couponUseList <span class=\"token operator\">=</span> pageModel<span class=\"token punctuation\">.</span><span class=\"token function\">getRecords</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//遍历</span>\n        couponUseList<span class=\"token punctuation\">.</span><span class=\"token function\">stream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>item<span class=\"token operator\">-&gt;</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getUserInfoById</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> pageModel<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">//根据用户id，通过远程调用得到用户信息</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">CouponUse</span> <span class=\"token function\">getUserInfoById</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CouponUse</span> couponUse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//获取用户id</span>\n        <span class=\"token class-name\">Long</span> userId <span class=\"token operator\">=</span> couponUse<span class=\"token punctuation\">.</span><span class=\"token function\">getUserId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token class-name\">StringUtils</span><span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">//远程调用</span>\n            <span class=\"token class-name\">UserInfo</span> userInfo <span class=\"token operator\">=</span> userInfoFeignClient<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span>userId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userInfo<span class=\"token operator\">!=</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n                couponUse<span class=\"token punctuation\">.</span><span class=\"token function\">getParam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"NickName\"</span><span class=\"token punctuation\">,</span>userInfo<span class=\"token punctuation\">.</span><span class=\"token function\">getNickName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                couponUse<span class=\"token punctuation\">.</span><span class=\"token function\">getParam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"phone\"</span><span class=\"token punctuation\">,</span>userInfo<span class=\"token punctuation\">.</span><span class=\"token function\">getPhone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> couponUse<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"64_1117\"></a>6.4配置网关</h2>\n<p>service_gateway配置文件</p>\n<pre><code class=\"prism language-java\">#service<span class=\"token operator\">-</span>activity模块配置\n#设置路由id\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>id<span class=\"token operator\">=</span>service<span class=\"token operator\">-</span>activity\n#设置路由的uri\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uri<span class=\"token operator\">=</span>lb<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>service<span class=\"token operator\">-</span>activity\n#设置路由断言<span class=\"token punctuation\">,</span>代理servicerId为auth<span class=\"token operator\">-</span>service的<span class=\"token operator\">/</span>auth<span class=\"token operator\">/</span>路径\nspring<span class=\"token punctuation\">.</span>cloud<span class=\"token punctuation\">.</span>gateway<span class=\"token punctuation\">.</span>routes<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>predicates<span class=\"token operator\">=</span> <span class=\"token class-name\">Path</span><span class=\"token operator\">=</span><span class=\"token comment\">/*/activity/**\n</span></code></pre>\n<h2><a id=\"65_1130\"></a>6.5整合优惠券前端</h2>\n<h3><a id=\"651_1131\"></a>6.5.1定义接口</h3>\n<p>创建<code>api -&gt; activity -&gt; couponInfo.js</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\31f8e6eb7bf744a3b094f57a63830909.png\"/></p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">import</span> request <span class=\"token keyword\">from</span> <span class=\"token string\">'@/utils/request'</span>\n\n<span class=\"token keyword\">const</span> api_name <span class=\"token operator\">=</span> <span class=\"token string\">'/admin/activity/couponInfo'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token function\">getPageList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span> limit</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'get'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/get/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'get'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">role</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/save</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> role\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">updateById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">role</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/update</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'put'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> role\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">removeById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/remove/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'delete'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">removeRows</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">idList</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/batchRemove</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'delete'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">data</span><span class=\"token operator\">:</span> idList\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">getPageCouponUseList</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page<span class=\"token punctuation\">,</span> limit<span class=\"token punctuation\">,</span> searchObj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">request</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">url</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>api_name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/couponUse/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>page<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>limit<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">method</span><span class=\"token operator\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">params</span><span class=\"token operator\">:</span> searchObj\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"65_1194\"></a>6.5.创建路由</h3>\n<p><code>router -&gt; index.js</code>定义路由</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">component</span><span class=\"token operator\">:</span> Layout<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">redirect</span><span class=\"token operator\">:</span> <span class=\"token string\">'/couponInfo/list'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'Activity'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'营销活动管理'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">icon</span><span class=\"token operator\">:</span> <span class=\"token string\">'el-icon-football'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">alwaysShow</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">children</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'couponInfo/list'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'CouponInfo'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/views/activity/couponInfo/list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'优惠券列表'</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'couponInfo/add'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'CouponInfoAdd'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/views/activity/couponInfo/form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'添加'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">hidden</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'couponInfo/edit/:id'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'CouponInfoEdit'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/views/activity/couponInfo/form'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'编辑'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">noCache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">hidden</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'couponInfo/show/:id'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'CouponInfoShow'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">component</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/views/activity/couponInfo/show'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">meta</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">'详情'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">noCache</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">hidden</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<h3><a id=\"653vue_1237\"></a>6.5.3创建vue页面</h3>\n<p>创建<code>views -&gt; activity-&gt; couponInfo-&gt;</code> 页面<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\bd667963bc4c4459b27277e3fea980f1.png\"/><br/> list.vue</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"app-container\"</span><span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 工具条 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>card <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"operate-container\"</span> shadow<span class=\"token operator\">=</span><span class=\"token string\">\"never\"</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>i <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"el-icon-tickets\"</span> style<span class=\"token operator\">=</span><span class=\"token string\">\"margin-top: 5px\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>i<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>span style<span class=\"token operator\">=</span><span class=\"token string\">\"margin-top: 5px\"</span><span class=\"token operator\">&gt;</span>数据列表<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"btn-add\"</span> size<span class=\"token operator\">=</span><span class=\"token string\">\"mini\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"add()\"</span><span class=\"token operator\">&gt;</span>添加<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>card<span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> banner列表 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table\n      v<span class=\"token operator\">-</span>loading<span class=\"token operator\">=</span><span class=\"token string\">\"listLoading\"</span>\n      <span class=\"token operator\">:</span>data<span class=\"token operator\">=</span><span class=\"token string\">\"list\"</span>\n      element<span class=\"token operator\">-</span>loading<span class=\"token operator\">-</span>text<span class=\"token operator\">=</span><span class=\"token string\">\"数据正在加载......\"</span>\n      border\n      fit\n      highlight<span class=\"token operator\">-</span>current<span class=\"token operator\">-</span>row<span class=\"token operator\">&gt;</span>\n\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column\n        label<span class=\"token operator\">=</span><span class=\"token string\">\"序号\"</span>\n        width<span class=\"token operator\">=</span><span class=\"token string\">\"70\"</span>\n        align<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token punctuation\">(</span>page <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> limit <span class=\"token operator\">+</span> scope<span class=\"token punctuation\">.</span>$index <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"couponName\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"购物券名称\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"couponType\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"购物券类型\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> scope<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">.</span>couponType <span class=\"token operator\">==</span> <span class=\"token string\">'REGISTER'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'注册卷'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'推荐赠送卷'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column label<span class=\"token operator\">=</span><span class=\"token string\">\"规则\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token string\">'现金卷：'</span> <span class=\"token operator\">+</span> scope<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">.</span>amount <span class=\"token operator\">+</span> <span class=\"token string\">'元'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column label<span class=\"token operator\">=</span><span class=\"token string\">\"使用范围 \"</span><span class=\"token operator\">&gt;</span>\n          所有商品\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"publishCount\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"发行数量\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"expireTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"过期时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"createTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"创建时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column label<span class=\"token operator\">=</span><span class=\"token string\">\"操作\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"150\"</span> align<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>router<span class=\"token operator\">-</span>link <span class=\"token operator\">:</span>to<span class=\"token operator\">=</span><span class=\"token string\">\"'/activity/couponInfo/edit/'+scope.row.id\"</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button size<span class=\"token operator\">=</span><span class=\"token string\">\"mini\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">&gt;</span>修改<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>router<span class=\"token operator\">-</span>link<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button size<span class=\"token operator\">=</span><span class=\"token string\">\"mini\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"removeDataById(scope.row.id)\"</span><span class=\"token operator\">&gt;</span>删除<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>router<span class=\"token operator\">-</span>link <span class=\"token operator\">:</span>to<span class=\"token operator\">=</span><span class=\"token string\">\"'/activity/couponInfo/show/'+scope.row.id\"</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button size<span class=\"token operator\">=</span><span class=\"token string\">\"mini\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">&gt;</span>详情<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>router<span class=\"token operator\">-</span>link<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 分页组件 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>pagination\n      <span class=\"token operator\">:</span>current<span class=\"token operator\">-</span>page<span class=\"token operator\">=</span><span class=\"token string\">\"page\"</span>\n      <span class=\"token operator\">:</span>total<span class=\"token operator\">=</span><span class=\"token string\">\"total\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>size<span class=\"token operator\">=</span><span class=\"token string\">\"limit\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>sizes<span class=\"token operator\">=</span><span class=\"token string\">\"[5, 10, 20, 30, 40, 50, 100]\"</span>\n      style<span class=\"token operator\">=</span><span class=\"token string\">\"padding: 30px 0; text-align: center;\"</span>\n      layout<span class=\"token operator\">=</span><span class=\"token string\">\"sizes, prev, pager, next, jumper, -&gt;, total, slot\"</span>\n      @current<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"fetchData\"</span>\n      @size<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"changeSize\"</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">&gt;</span>\n<span class=\"token keyword\">import</span> api <span class=\"token keyword\">from</span> <span class=\"token string\">'@/api/activity/couponInfo'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">listLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据是否正在加载</span>\n      <span class=\"token literal-property property\">list</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// banner列表</span>\n      <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据库中的总记录数</span>\n      <span class=\"token literal-property property\">page</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认页码</span>\n      <span class=\"token literal-property property\">limit</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 每页记录数</span>\n      <span class=\"token literal-property property\">searchObj</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 查询表单对象</span>\n      <span class=\"token literal-property property\">multipleSelection</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">// 批量选择中选择的记录列表</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 生命周期函数：内存准备完毕，页面尚未渲染</span>\n  <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'list created......'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 生命周期函数：内存准备完毕，页面渲染成功</span>\n  <span class=\"token function\">mounted</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'list mounted......'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">// 当页码发生改变的时候</span>\n    <span class=\"token function\">changeSize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit <span class=\"token operator\">=</span> size\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity/couponInfo/add'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 加载banner列表数据</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'翻页。。。'</span> <span class=\"token operator\">+</span> page<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 异步获取远程数据（ajax）</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page\n\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">getPageList</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>records\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>total\n\n          <span class=\"token comment\">// 数据加载并绑定成功</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 重置查询表单</span>\n    <span class=\"token function\">resetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'重置查询表单'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 根据id删除数据</span>\n    <span class=\"token function\">removeDataById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// debugger</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$confirm</span><span class=\"token punctuation\">(</span><span class=\"token string\">'此操作将永久删除该记录, 是否继续?'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'提示'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token literal-property property\">confirmButtonText</span><span class=\"token operator\">:</span> <span class=\"token string\">'确定'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">cancelButtonText</span><span class=\"token operator\">:</span> <span class=\"token string\">'取消'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'warning'</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token comment\">// promise</span>\n        <span class=\"token comment\">// 点击确定，远程调用ajax</span>\n        <span class=\"token keyword\">return</span> api<span class=\"token punctuation\">.</span><span class=\"token function\">removeById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$message</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'删除成功!'</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$message</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'info'</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> <span class=\"token string\">'已取消删除'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>form.vue</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"app-container\"</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form label<span class=\"token operator\">-</span>width<span class=\"token operator\">=</span><span class=\"token string\">\"120px\"</span><span class=\"token operator\">&gt;</span>\n\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"优惠券名称\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.couponName\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"优惠券类型\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>radio<span class=\"token operator\">-</span>group v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.couponType\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>radio label<span class=\"token operator\">=</span><span class=\"token string\">\"1\"</span><span class=\"token operator\">&gt;</span>注册卷<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>radio<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>radio label<span class=\"token operator\">=</span><span class=\"token string\">\"2\"</span><span class=\"token operator\">&gt;</span>推荐购买卷<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>radio<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>radio<span class=\"token operator\">-</span>group<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"发行数量\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.publishCount\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"领取时间\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>date<span class=\"token operator\">-</span>picker\n          v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.startTime\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"date\"</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"选择开始日期\"</span>\n          value<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy-MM-dd\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        至\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>date<span class=\"token operator\">-</span>picker\n          v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.endTime\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"date\"</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"选择开始日期\"</span>\n          value<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy-MM-dd\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"过期时间\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>date<span class=\"token operator\">-</span>picker\n          v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.expireTime\"</span>\n          type<span class=\"token operator\">=</span><span class=\"token string\">\"datetime\"</span>\n          placeholder<span class=\"token operator\">=</span><span class=\"token string\">\"选择开始日期\"</span>\n          value<span class=\"token operator\">-</span>format<span class=\"token operator\">=</span><span class=\"token string\">\"yyyy-MM-dd HH:mm:ss\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item label<span class=\"token operator\">=</span><span class=\"token string\">\"直播详情\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>input v<span class=\"token operator\">-</span>model<span class=\"token operator\">=</span><span class=\"token string\">\"couponInfo.ruleDesc\"</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"textarea\"</span> rows<span class=\"token operator\">=</span><span class=\"token string\">\"5\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button type<span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span> @click<span class=\"token operator\">=</span><span class=\"token string\">\"saveOrUpdate\"</span><span class=\"token operator\">&gt;</span>保存<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"back\"</span><span class=\"token operator\">&gt;</span>返回<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">&gt;</span>\n\n<span class=\"token keyword\">import</span> api <span class=\"token keyword\">from</span> <span class=\"token string\">'@/api/activity/couponInfo'</span>\n\n<span class=\"token keyword\">const</span> defaultForm <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">couponType</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">couponName</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">amount</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">conditionAmount</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">startTime</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">endTime</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">rangeType</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">ruleDesc</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">publishCount</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">perLimit</span><span class=\"token operator\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">useCount</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">receiveCount</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">expireTime</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">publishStatus</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">couponInfo</span><span class=\"token operator\">:</span> defaultForm<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">saveBtnDisabled</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">keyword</span><span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">skuInfoList</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 监听器</span>\n  <span class=\"token literal-property property\">watch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">$route</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">to<span class=\"token punctuation\">,</span> <span class=\"token keyword\">from</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'路由变化......'</span><span class=\"token punctuation\">)</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 生命周期方法（在路由切换，组件不变的情况下不会被调用）</span>\n  <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form created ......'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">// 表单初始化</span>\n    <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// debugger</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$route<span class=\"token punctuation\">.</span>params <span class=\"token operator\">&amp;&amp;</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$route<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$route<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchDataById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 对象拓展运算符：拷贝对象，而不是赋值对象的引用</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token operator\">...</span>defaultForm <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">saveOrUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>saveBtnDisabled <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span> <span class=\"token comment\">// 防止表单重复提交</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">saveData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updateData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 新增</span>\n    <span class=\"token function\">saveData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// debugger</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$message</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>message\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity/couponInfo/list'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 根据id更新记录</span>\n    <span class=\"token function\">updateData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">updateById</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">debugger</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>code<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">$message</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">'success'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>message\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity/couponInfo/list'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity/couponInfo/list'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 根据id查询记录</span>\n    <span class=\"token function\">fetchDataById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// debugger</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>show.vue</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"app-container\"</span><span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">&gt;</span>优惠券信息<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>table <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"table table-striped table-condenseda table-bordered\"</span> width<span class=\"token operator\">=</span><span class=\"token string\">\"100%\"</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tbody<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th width<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token operator\">&gt;</span>优惠券名称<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td width<span class=\"token operator\">=</span><span class=\"token string\">\"35%\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>b style<span class=\"token operator\">=</span><span class=\"token string\">\"font-size: 14px\"</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>couponName <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>b<span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th width<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token operator\">&gt;</span>优惠券类型<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td width<span class=\"token operator\">=</span><span class=\"token string\">\"35%\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>couponType <span class=\"token operator\">==</span> <span class=\"token string\">'REGISTER'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'注册卷'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'推荐赠送卷'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>发行数量<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>publishCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>每人限领次数<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>perLimit <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>领取数量<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>receiveCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>使用数量<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>useCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>领取时间<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>startTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>至<span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>endTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>过期时间<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>expireTime <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>tr<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>th<span class=\"token operator\">&gt;</span>规则描述<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>th<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>td colspan<span class=\"token operator\">=</span><span class=\"token string\">\"3\"</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> couponInfo<span class=\"token punctuation\">.</span>ruleDesc <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>td<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tr<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>tbody<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>table<span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">&gt;</span>\n      优惠券发放列表<span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span><span class=\"token operator\">&amp;</span>nbsp<span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table\n      v<span class=\"token operator\">-</span>loading<span class=\"token operator\">=</span><span class=\"token string\">\"listLoading\"</span>\n      <span class=\"token operator\">:</span>data<span class=\"token operator\">=</span><span class=\"token string\">\"list\"</span>\n      stripe\n      border\n      style<span class=\"token operator\">=</span><span class=\"token string\">\"width: 100%;margin-top: 10px;\"</span><span class=\"token operator\">&gt;</span>\n\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column\n        label<span class=\"token operator\">=</span><span class=\"token string\">\"序号\"</span>\n        width<span class=\"token operator\">=</span><span class=\"token string\">\"70\"</span>\n        align<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token punctuation\">(</span>page <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> limit <span class=\"token operator\">+</span> scope<span class=\"token punctuation\">.</span>$index <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"param.nickName\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"用户昵称\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"param.phone\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"手机号\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column label<span class=\"token operator\">=</span><span class=\"token string\">\"使用状态\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>template slot<span class=\"token operator\">-</span>scope<span class=\"token operator\">=</span><span class=\"token string\">\"scope\"</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">{<!-- --></span> scope<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">.</span>couponStatus <span class=\"token operator\">==</span> <span class=\"token string\">'NOT_USED'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'未使用'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'已使用'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"getTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"获取时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"usingTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"使用时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"usedTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"支付时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">-</span>column prop<span class=\"token operator\">=</span><span class=\"token string\">\"expireTime\"</span> label<span class=\"token operator\">=</span><span class=\"token string\">\"过期时间\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>table<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 分页组件 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>pagination\n      <span class=\"token operator\">:</span>current<span class=\"token operator\">-</span>page<span class=\"token operator\">=</span><span class=\"token string\">\"page\"</span>\n      <span class=\"token operator\">:</span>total<span class=\"token operator\">=</span><span class=\"token string\">\"total\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>size<span class=\"token operator\">=</span><span class=\"token string\">\"limit\"</span>\n      <span class=\"token operator\">:</span>page<span class=\"token operator\">-</span>sizes<span class=\"token operator\">=</span><span class=\"token string\">\"[5, 10, 20, 30, 40, 50, 100]\"</span>\n      style<span class=\"token operator\">=</span><span class=\"token string\">\"padding: 30px 0; text-align: center;\"</span>\n      layout<span class=\"token operator\">=</span><span class=\"token string\">\"sizes, prev, pager, next, jumper, -&gt;, total, slot\"</span>\n      @current<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"fetchData\"</span>\n      @size<span class=\"token operator\">-</span>change<span class=\"token operator\">=</span><span class=\"token string\">\"changeSize\"</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n\n    <span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token string\">\"margin-top: 15px;\"</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form label<span class=\"token operator\">-</span>width<span class=\"token operator\">=</span><span class=\"token string\">\"0px\"</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span>el<span class=\"token operator\">-</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"back\"</span><span class=\"token operator\">&gt;</span>返回<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>button<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">-</span>item<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>el<span class=\"token operator\">-</span>form<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">&gt;</span>\n<span class=\"token keyword\">import</span> api <span class=\"token keyword\">from</span> <span class=\"token string\">'@/api/activity/couponInfo'</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">listLoading</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据是否正在加载</span>\n\n      <span class=\"token literal-property property\">couponId</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">couponInfo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token literal-property property\">list</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// banner列表</span>\n      <span class=\"token literal-property property\">total</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 数据库中的总记录数</span>\n      <span class=\"token literal-property property\">page</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 默认页码</span>\n      <span class=\"token literal-property property\">limit</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 每页记录数</span>\n      <span class=\"token literal-property property\">searchObj</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// 查询表单对象</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 监听器</span>\n  <span class=\"token literal-property property\">watch</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">$route</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">to<span class=\"token punctuation\">,</span> <span class=\"token keyword\">from</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'路由变化......'</span><span class=\"token punctuation\">)</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">)</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// 生命周期方法（在路由切换，组件不变的情况下不会被调用）</span>\n  <span class=\"token function\">created</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'form created ......'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponId <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$route<span class=\"token punctuation\">.</span>params<span class=\"token punctuation\">.</span>id\n    <span class=\"token comment\">// 获取优惠券信息</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchDataById</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">// 根据id查询记录</span>\n    <span class=\"token function\">fetchDataById</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">getById</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponInfo <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 当页码发生改变的时候</span>\n    <span class=\"token function\">changeSize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">size</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit <span class=\"token operator\">=</span> size\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 加载banner列表数据</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">page <span class=\"token operator\">=</span> <span class=\"token number\">1</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'翻页。。。'</span> <span class=\"token operator\">+</span> page<span class=\"token punctuation\">)</span>\n      <span class=\"token comment\">// 异步获取远程数据（ajax）</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page <span class=\"token operator\">=</span> page\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj<span class=\"token punctuation\">.</span>couponId <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>couponId\n      api<span class=\"token punctuation\">.</span><span class=\"token function\">getPageCouponUseList</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>page<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>limit<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>searchObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n        <span class=\"token parameter\">response</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>records\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>total <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>total\n\n          <span class=\"token comment\">// 数据加载并绑定成功</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listLoading <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">'/activity/couponInfo/list'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>style<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">.</span>app<span class=\"token operator\">-</span>container h4 <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> #<span class=\"token number\">606266</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">&gt;</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 1, "java": 0, "sql": 1, "php": 0, "time": "2022-09-03 21:46:31", "summary": "整合网关与实现订单和营销管理模块概述什么是和关系相关基础服务组件作用基本概念常见的注册中心结构图启动服务注册引入依赖配置自己的服务添加客户端注解使用注意点网关概述核心概念路由断言过滤器实现网关转发功能"}