{"blogid": "123028605", "writerAge": "码龄3年", "writerBlogNum": "139", "writerCollect": "639", "writerComment": "27", "writerFan": "1741", "writerGrade": "5级", "writerIntegral": "1730", "writerName": "D之光", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123028605.jpg", "writerRankTotal": "17091", "writerRankWeekly": "6524", "writerThumb": "280", "writerVisitNum": "105695", "blog_read_count": "13983", "blog_time": "已于 2022-02-20 15:47:42 修改", "blog_title": "Pytorch环境搭建", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"Pytorch_0\"></a><strong>Pytorch环境搭建</strong></h1>\n<h2><a id=\"_Anaconda__2\"></a><strong>一、 Anaconda</strong> <strong>安装</strong></h2>\n<blockquote>\n<p>Anaconda 作用包括：构建虚拟环境和资源包管理。其下载安装可以参考链接<a href=\"https://pan.baidu.com/s/1rt7BVNBje_BLknpQIQtZTw?pwd=6666\">https://pan.baidu.com/s/1rt7BVNBje_BLknpQIQtZTw?pwd=6666</a>： 提取码：6666 在百度网盘里下载。作为开源软件，官网版本齐全，可下载。下载后，按提示步骤进行安装即可。</p>\n</blockquote>\n<blockquote>\n<p>可以直接从 <a href=\"https://www.anaconda.com/products/individual\">Anaconda官网</a>下载，但因为Anaconda的服务器在国外，所以下载速度会很慢，这里推荐使用<a href=\"https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/\">清华的镜像</a>来下载。选择合适你的版本下载</p>\n</blockquote>\n<p><img alt=\"image-20220219184247255\" src=\"..\\..\\static\\image\\bbe0bf579e0ab74c58557e906be36ab0.png\"/></p>\n<p><img alt=\"image-20220219184312808\" src=\"..\\..\\static\\image\\3bb58852571e97323c4658e478b86b95.png\"/></p>\n<p><img alt=\"image-20220219184333474\" src=\"..\\..\\static\\image\\dffd4b92967201732d63e5a9772f7046.png\"/></p>\n<p><strong>注意：anaconda 的存储地址选择一个空的文件夹，文件夹以英文字母命名。</strong></p>\n<p><img alt=\"image-20220219184450336\" src=\"..\\..\\static\\image\\c3ec56d49840df15194d0a27028b0c0b.png\"/></p>\n<p><strong>注意：将 conda 自动加入系统环境变量或者可以选择手动加入。 本次安装两个均选择。</strong></p>\n<p><img alt=\"image-20220219184543328\" src=\"..\\..\\static\\image\\3a638954d94015187d94a791180e3ee7.png\"/></p>\n<p><img alt=\"image-20220219184804096\" src=\"..\\..\\static\\image\\69ab356f7fa0dd23c3e99db9d66ed1ed.png\"/></p>\n<p><img alt=\"image-20220219184824800\" src=\"..\\..\\static\\image\\dbbcb4a8ed2ff9d8412891be7f806c1c.png\"/></p>\n<p><img alt=\"image-20220219184846856\" src=\"..\\..\\static\\image\\569c56a776a422e0cc9fe9b6382dc880.png\"/></p>\n<h2><a id=\"_Jupyter_notebook_42\"></a>二、虚拟环境 +Jupyter notebook</h2>\n<p>1.默认进入 base 虚拟环境</p>\n<p>a) 命令退出 base 环境</p>\n<pre><code>conda deactivate\n</code></pre>\n<p><img alt=\"image-20220219201451528\" src=\"..\\..\\static\\image\\db52d0ebc39e3f9c72de8d2705892103.png\"/></p>\n<p>b) 修改其自启动参数</p>\n<pre><code>conda config --set auto_activate_base false\n</code></pre>\n<p>2.创建虚拟环境 DLing,添加镜像源，速度拉满, 安装 numpy mkl cffi</p>\n<p>1).</p>\n<p><strong>有序的管理环境</strong></p>\n<p>这里需要大家查一下自己的python版本，<code>win+R</code>进入cmd，输入python即可获得对应版本信息。（没有配置python环境path则不能查询）</p>\n<p><img alt=\"image-20220219213505240\" src=\"..\\..\\static\\image\\52feb189a5af945c3934ebe2c2db9e6e.png\"/></p>\n<p>我的版本是3.9，所以下面也也安装3.9版本的，pytorch 是后边建立里的命名<br/> 如果不清楚自己的python版本，<code>win+R</code>，打开<code>cmd</code>控制台，输入<code>python</code>就可以看到自己的版本信息。</p>\n<pre><code>conda create -n pytorch python=3.9\nconda create -n DLing python=3.6\n</code></pre>\n<p>之后，弹出提示，输入 y，即可安装。<br/> 安装成功后，输入以下指令：</p>\n<pre><code>conda info --envs\n</code></pre>\n<p>即可看到 <a href=\"https://so.csdn.net/so/search?q=conda&amp;spm=1001.2101.3001.7020\">conda</a> 环境中，有新建的 pytorch 环境（你可以取别的名字，你取啥叫啥），右边的 * 号表示，当前你处于哪个环境。</p>\n<p>接下来，我们要在 pytorch 环境中，安装 PyTorch，使用如下指令，进入 pytorch 环境（你取的啥名字后边activate啥）。</p>\n<pre><code>conda activate pytorch\n</code></pre>\n<p><img alt=\"image-20220219213402610\" src=\"..\\..\\static\\image\\99215410ad2baa313f250c5d02e36ce1.png\"/></p>\n<p>你可以看到左边的 base 变成了 pytorch，代表成功进入 pytorch 环境。</p>\n<p>2).更换清华源</p>\n<pre><code>不用下列代码直接更改用户的家目录.condarc文件\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ \nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ \nconda config --set show_channel_urls yes\n</code></pre>\n<p><img alt=\"image-20220219215508883\" src=\"..\\..\\static\\image\\ee89d32bcba9c83ea20d1650dac8f17c.png\"/></p>\n<pre><code class=\"prism language-ini\">channels:\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/\n  - defaults\nshow_channel_urls: true\nchannel_alias: https://mirrors.tuna.tsinghua.edu.cn/anaconda\ndefault_channels:\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro\n  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2\ncustom_channels:\n  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud\n</code></pre>\n<p>3).</p>\n<pre><code>conda install numpy mkl cffi\n</code></pre>\n<ol start=\"3\"><li>安装 pytorch，进入 <a href=\"https://pytorch.org/\">https://pytorch.org/</a>官网 ，选择合适版本下载，本次选用 anaconda 中 python==3.6，选择下示程序，下载 torch 包。</li></ol>\n<pre><code>不使用这个\nconda install pytorch==1.7.1 torchvision==0.8.2 torchaudio==0.7.2 cpuonly\n\n</code></pre>\n<p><img alt=\"image-20220219202320997\" src=\"..\\..\\static\\image\\8196a8b1cc2be5371419937a22d6e94f.png\"/></p>\n<p>进入官网点击 install，即可进入下示页面，根据自己电脑的配置选择，最后将最后一行复制到 Anaconda Prompt 界面中。</p>\n<p><img alt=\"image-20220219202453242\" src=\"..\\..\\static\\image\\17ea3c41da46b7b3519889387ee66c66.png\"/></p>\n<p>注意：如何判断自己电脑是否有 GPU：控制面板—&gt;硬件和声音—&gt;NVIDIA 控制面板—&gt;帮助—&gt;系统信息—&gt;组件—&gt;NVCUDA.DLL 的产品名称中即看到 GPU 版本，下载的 CUDA 版本必须与之对应。</p>\n<p>但是这里有个坑，参考<a href=\"https://blog.csdn.net/WannaSeaU/article/details/88427010\">博客</a>。其中，<code>-c pytorch</code>参数指定了<code>conda</code>获取<code>pytorch</code>的<code>channel</code>,在此指定为<code>conda</code>自带的<code>pytorch</code>仓库。因此，只需要将<code>-c pytorch</code>语句去掉，就可以使用清华镜像源快速安装<code>pytorch</code>了。</p>\n<p>复制下面的代码，之后，在开始菜单中，打开 Anaconda Prompt，查看最左边括号中是<code>base</code> 还是 <code>pytorch</code>。如果是 <code>[base]</code>，使用 <code>conda activate pytorch</code> 进入 <code>pytorch</code> 环境中。之后粘贴即可。</p>\n<pre><code>conda install pytorch torchvision cpuonly\n</code></pre>\n<p><img alt=\"image-20220219220022682\" src=\"..\\..\\static\\image\\113576bcff1000f95c151fac173de709.png\"/></p>\n<p>根据提示输入y</p>\n<p>验证是否安装成功<br/> （1）在命令行左边为 pytorch 环境中，输入 <code>python</code></p>\n<p>（2）之后，输入 <code>import torch</code>，如果没有报错，意味着 <code>PyTorch</code> 已经顺利安装了</p>\n<p>（3）接下来，输入 <code>torch.cuda.is_available</code>，如果是 True，意味着你可以使用 <code>GPU</code>。</p>\n<p>4.安装并进入<code>jupyter notebook</code>，创建一个 python 文件，输入 <code>import torch</code>，若无错运行即完成 <code>Jupyter notebook</code> 的环境搭建。</p>\n<pre><code>conda install jupyter notebook\n</code></pre>\n<pre><code>jupyter notebook\n</code></pre>\n<p><img alt=\"image-20220219221110583\" src=\"..\\..\\static\\image\\6a5b08c6774934a4a3af7b68814f08d5.png\"/></p>\n<p><img alt=\"image-20220219233447118\" src=\"..\\..\\static\\image\\bdbf387c75bf2703e874f451c96cfd3f.png\"/></p>\n<p><a href=\"https://blog.csdn.net/weixin_39487353/article/details/104666953\">参考博客</a></p>\n<h2><a id=\"Pycharm__195\"></a>三、<strong>Pycharm 在虚拟环境下运行</strong></h2>\n<h3><a id=\"1PyCharm_197\"></a>1.下载安装PyCharm</h3>\n<p>1、进入官网PyCharm的下载地址：链接: <a href=\"http://www.jetbrains.com/pycharm/download/#section=windows.\">http://www.jetbrains.com/pycharm/download/#section=windows.</a><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5ac8aeaf2ce6580dd27fbbfa3145ca36.png\"/></p>\n<p>2、professional表示专业版，community是社区版，推荐安装社区版，因为是免费使用的，我选择的是社区版，下载文件的储存位置出现pycharm-community-版本号。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4de95cf72c204aa4884ed9a292903bd3.png\"/></p>\n<p>3、点击安装，修改安装路径，建议安装C盘以外位置，修改好以后，点击Next。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7c3fea86a44a79a5355db52554cd0f56.png\"/></p>\n<p>4、建议不选择.py选项，这是关联文件，如果打钩了，以后电脑双击.java文件就会用它打开。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8f850949d40542d08ce040c64264961f.png\"/></p>\n<p>5、接下来点击Install，出现安装界面。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2cfb47be945d4f5bba7f708dc7c1d346.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a1ebd3e5be9cf953c44efea998575945.png\"/></p>\n<h3><a id=\"2_conda__pytorch__215\"></a>2.加入 conda 中建立的虚拟环境，作为 pytorch 编程环境。</h3>\n<p><img alt=\"image-20220220110633947\" src=\"..\\..\\static\\image\\ddd15e216647286e859dea078babd052.png\"/></p>\n<p><img alt=\"image-20220220111531149\" src=\"..\\..\\static\\image\\0cbe76c152f5973defd9a86804317e9d.png\"/></p>\n<p><img alt=\"image-20220220112115422\" src=\"..\\..\\static\\image\\983a32b1fc6e97ed5eed9695e53700cc.png\"/></p>\n<p><img alt=\"image-20220220112139141\" src=\"..\\..\\static\\image\\9b73eaa7dd27476a840f6bd260b287a1.png\"/></p>\n<p>添加一句<code>import torch</code>运行后，执行通过，设置成功</p>\n<p><img alt=\"image-20220220112457754\" src=\"..\\..\\static\\image\\5953d269c11995eb159cb6f66226c69c.png\"/></p>\n<p><img alt=\"image-20220220112618906\" src=\"..\\..\\static\\image\\6816a4f41bbd44b65a59a8dfd26e7e9c.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-02-20 15:47:42", "summary": "环境搭建一、安装作用包括：构建虚拟环境和资源包管理。其下载安装可以参考链接：提取码：在百度网盘里下载。作为开源软件，官网版本齐全，可下载。下载后，按提示步骤进行安装即可。可以直接从官网下载，但因为的服"}