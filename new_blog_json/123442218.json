{"blogid": "123442218", "writerAge": "ç é¾„4å¹´", "writerBlogNum": "81", "writerCollect": "295", "writerComment": "23", "writerFan": "26", "writerGrade": "4çº§", "writerIntegral": "915", "writerName": "å¸è½½å¼•æ“", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123442218.jpg", "writerRankTotal": "22610", "writerRankWeekly": "33544", "writerThumb": "77", "writerVisitNum": "91020", "blog_read_count": "9262", "blog_time": "å·²äºÂ 2022-03-12 14:28:15Â ä¿®æ”¹", "blog_title": "Openlayers å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>ğŸ“¢æ¬¢è¿ç‚¹èµğŸ‘/ æ”¶è—â­/ ç•™è¨€ğŸ“å¦‚æœ‰é”™è¯¯æ•¬è¯·æŒ‡æ­£ï¼</p>\n</blockquote>\n<h1><a id=\"1_Openlayers_2\"></a>1. Openlayersç®€ä»‹</h1>\n<p>Openlayers æ˜¯å¼€æºçš„å‰ç«¯åœ°å›¾æ¡†æ¶ï¼Œå®˜ç½‘åœ°å€ï¼š<a href=\"https://openlayers.org/\">https://openlayers.org/</a><br/> å®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨äºå±•ç°æ•°æ®å¹¶ä¸”æä¾›ç›¸åº”çš„åœ°å›¾æ“ä½œå·¥å…·ã€‚</p>\n<h2><a id=\"11__6\"></a>1.1 å®˜ç½‘é¦–é¡µ</h2>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\c52df11a2e6f41a98a09f57f2c56793c.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\9cecae78d9964245b2017e08e1f91b84.png\"/></p>\n<h2><a id=\"12_example_9\"></a>1.2 ä½¿ç”¨ç¤ºä¾‹example</h2>\n<p>Openlayers6ç‰ˆæœ¬å®˜ç½‘æä¾›äº† 228 ä¸ªä½¿ç”¨æ¡ˆä¾‹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ç­›é€‰ï¼š<br/> å¦‚ï¼š popupã€drawã€style ç­‰<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\1313fe1298a548c3957d66577617eba7.png\"/><br/> ä¾‹å¦‚æœç´¢popup:<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\059104d439b74706bd6f534fa93838bc.png\"/><br/> ç‚¹å‡»è¿›å…¥åæœ‰è¯¦ç»†çš„ä»£ç ç¤ºä¾‹ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\730282495c624708aab3224b0b4a513c.png\"/></p>\n<h2><a id=\"13_api_17\"></a>1.3 é˜…è¯»api</h2>\n<p>åœ¨å­¦ä¼šäº† Openlayers çš„åŸºæœ¬ä½¿ç”¨åï¼ŒAPI çš„é˜…è¯»ä½¿ç”¨åˆ™æ˜¯å·¥ä½œå¿…å¤‡ã€‚<br/> å·¦ä¾§åˆ—è¡¨åˆ—å‡ºäº†Openlayersçš„æ‰€æœ‰ç±»ï¼Œæ–¹ä¾¿å¿«é€Ÿæœç´¢<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\0a6640f6396645de8dbd97f15cbe6c32.png\"/><br/> ä¾‹å¦‚æœç´¢Mapåè¿›å…¥ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\cd0cf93e4700420784bebf5e92c03543.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\6fa5baa586484a60aea0c4e50f71cbbe.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\8c9b8d3410ce41319173563edeb5f470.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\43bb43965ca648f49557bfe874536e0b.png\"/></p>\n<h1><a id=\"2__28\"></a>2. å¿«é€Ÿå¼€å§‹ç¤ºä¾‹</h1>\n<p>æˆ‘å°†é€šè¿‡ä¸€ä¸ªå®˜ç½‘çš„demoä»‹ç»å¦‚ä½•ä½¿ç”¨Openlayers<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\f7d4e0f1cbd446b490ce9cfbcdf48b0b.png\"/><br/> åˆå§‹ä»£ç ï¼š</p>\n<pre><code class=\"prism language-html\"><span class=\"token doctype\">&lt;!doctype html&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.13.0/css/ol.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style language-css\">\n      <span class=\"token selector\">.map-class</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50rem<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token comment\">&lt;!-- åŠ è½½OpenLayers ç±»åº“ --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.13.0/build/ol.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>OpenLayersä¾‹å­<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span>æˆ‘çš„åœ°å›¾<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>map-id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>map-class<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script language-javascript\">\n      <span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// ç»‘å®š DIV å…ƒç´ </span>\n        target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map-id'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// æ·»åŠ å›¾å±‚</span>\n        layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">// è®¾ç½®å›¾å±‚çš„æ•°æ®æº</span>\n            source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>OSM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// è®¾ç½®è§†å›¾çª—å£</span>\n        view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token comment\">//center: ol.proj.fromLonLat([37.41, 8.82]),</span>\n          center<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>proj<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">104</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:4326'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:3857'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<p>é€šè¿‡ä¸Šé¢ä¾‹å­å¯ä»¥çœ‹å‡º Openlayers ä½¿ç”¨å¾ˆç®€å•ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ª Mapï¼Œè¿™æ˜¯ Openlayers çš„æ ¸å¿ƒï¼Œå®ƒæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œæ‰€æœ‰åŠ¨ä½œã€è®¾ç½®ç­‰éƒ½åœ¨ Map ä¸­å±•å¼€ã€‚</p>\n<p>ä¸‹é¢å¯¹ä¸Šé¢ demoæ‰€ç®€è¦è¯´æ˜ï¼š</p>\n<ol><li>å°† Map å®¹å™¨ä¸ HTML å…ƒç´ ï¼ˆè¿™é‡Œæ˜¯ DIV å…ƒç´  <code>map-id</code>ï¼‰åšç»‘å®šï¼ŒMap æä¾›æœ‰ <code>target</code> å±æ€§æ¥ç»‘å®šï¼›</li><li>å°†å›¾å±‚ Layer æ·»åŠ åˆ° Map ä¸­ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç“¦é¢å›¾å±‚ <code>ol.layer.Tile</code>ï¼›</li><li>å›¾å±‚æ˜¯ä¸€ä¸ªåŒ…è£…ç›’ï¼Œéœ€è¦ç»™å›¾å±‚æ·»åŠ å…·ä½“çš„æ•°æ®æºï¼š<code>new ol.source.OSM()</code>ï¼Œæ•°æ®æºè¡¨ç¤ºä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ª URLï¼›</li><li>æœ€åè®¾ç½® Map å®¹å™¨çš„è§†å›¾çª—å£ï¼š<code>new ol.View</code>ï¼Œå°±æ˜¯æˆ‘ä»¬åˆå§‹åŒ–èƒ½çœ‹åˆ°çš„åœ°å›¾æ ·å­ã€‚</li></ol>\n<p>Openlayers å…¶æ ¸å¿ƒç»„ä»¶æ˜¯ <code>Mapã€Layerã€Sourceã€Viewã€Controlã€Interaction</code>å‡ ä¹æ‰€æœ‰çš„åŠ¨ä½œéƒ½æ˜¯å›´ç»•è¿™å‡ ä¸ªæ ¸å¿ƒç±»å±•å¼€ã€‚</p>\n<h2><a id=\"Map_84\"></a>Map</h2>\n<p>Mapæ˜¯ Openlayers çš„ä½¿ç”¨çš„åŸºç¡€ï¼Œæ‰€æœ‰çš„å›¾å±‚ã€åœ°å›¾æ§ä»¶ã€åœ°å›¾å·¥å…·ç­‰å¿…é¡»æ·»åŠ åˆ° Map ä¸­æ‰èƒ½ä½¿ç”¨ã€‚<br/> å¾€ Map ä¸­æ·»åŠ å›¾å±‚ã€åœ°å›¾æ§ä»¶ã€åœ°å›¾å·¥å…·ç­‰å¯ä»¥åœ¨åˆå§‹åŒ– Map æ—¶å°±æ·»åŠ ï¼ˆå¦‚ä¸Š demoï¼‰ï¼Œå¯ä»¥è°ƒç”¨ Map ç›¸å…³çš„æ–¹æ³•æ·»åŠ  <code>addControl(control)</code>ã€<code>addInteraction(interaction)</code>ã€<code>addLayer(layer)</code>ã€‚<br/> Map è¿˜æä¾›äº†å¾ˆå¤šäº‹ä»¶ï¼Œå¦‚ï¼šç‚¹å‡»åœ°å›¾ï¼ˆclickï¼‰ã€åŒå‡»åœ°å›¾ï¼ˆdbclickï¼‰ç­‰ã€‚<br/> ç»‘å®š click äº‹ä»¶ä½¿ç”¨ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> evt <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">forEachFeatureAtPixel</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span>pixel<span class=\"token punctuation\">,</span> feature <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token comment\">//é¼ æ ‡ç‚¹å‡»æŸä¸€ä¸ªè¦ç´ åï¼Œè·å–è¿™ä¸ªè¦ç´ ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>PSï¼š</strong> å¦ä¸€ç§äº‹ä»¶è°ƒç”¨æ–¹å¼ï¼š<code>this.map.dispatchEvent({type: \"click\", event: å›è°ƒå‡½æ•° })</code></p>\n<h2><a id=\"Layer_100\"></a>Layer</h2>\n<p>Layer å›¾å±‚ï¼šå•å•ä¸€ä¸ª Map æ˜¯æ²¡æœ‰ä»€ä¹ˆç”¨çš„ï¼Œåªç”¨ç»‘å®šå›¾å±‚æ‰èƒ½æ˜¾ç¤ºæ•°æ®ï¼ŒLayer ä½œç”¨èƒ½æ§åˆ¶æ•°æ®æ˜¯å¦æ˜¾ç¤ºï¼Œä»¥åŠåœ°å›¾å¯æ˜¾ç¤ºçš„æœ€å¤§æˆ–æœ€å°æ¯”ä¾‹å°ºï¼ˆå³æ”¾å¤§æˆ–ç¼©å°åˆ°æŸä¸ªçº§åˆ«ä¸æ˜¾ç¤ºåœ°å›¾ï¼‰ï¼Œè¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸‹ï¼Œå›¾å±‚ä¸»è¦æ˜¯æ ¹æ®æ•°æ®æºçš„ä¸åŒæ¥é€‰æ‹©ï¼Œä¸åŒçš„æ•°æ®æºé€‰æ‹©ä¸åŒçš„å›¾å±‚ï¼Œä½¿ç”¨ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Vector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n  source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TileWMS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://192.168.1.244:9090/geoserver/fj/wms\"</span><span class=\"token punctuation\">,</span>\n    params<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n         <span class=\"token constant\">LAYERS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"fj:cityErase\"</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"Source_114\"></a>Source</h2>\n<p>è¿™æ˜¯æ•´ä¸ª Openlayers çš„çµé­‚ï¼Œsource åˆ†ä¸º<strong>çŸ¢é‡æ•°æ®æº</strong>å’Œ<strong>å½±åƒæ•°æ®æº</strong>ã€‚æœ‰æ—¶å€™åº•å›¾ä½¿ç”¨å½±åƒæ•°æ®ï¼Œè€Œä¸æˆ‘ä»¬ä¸šåŠ¡ç›¸å…³çš„æ²³æµã€è¡Œæ”¿åŒºã€æ°´ç¯å¢ƒç›‘æµ‹ç‚¹ç­‰éƒ½æ˜¯çŸ¢é‡æ•°æ®ã€‚<br/> æ•°æ®æºçš„ä½¿ç”¨å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//åŠ è½½å½±åƒæ•°æ®</span>\n   source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>XYZ</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=a5dd6a2f1c934394bce6b0fb077203eb\"</span><span class=\"token punctuation\">,</span>\n        attributions<span class=\"token punctuation\">:</span> <span class=\"token string\">\"æµ‹è¯•\"</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">VectorLayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//åŠ è½½çŸ¢é‡æ•°æ®</span>\n   source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>Vector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token comment\">//è¿™é‡Œè®¾ç½®æ•°æ®å±•ç¤ºè¾¹æ¡†é¢œè‰²</span>\n   style<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>feature<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Style</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n             stroke<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n                   color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n                   width<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n             <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"View_142\"></a>View</h2>\n<p>view ç”¨æ¥è®¾ç½®åœ°å›¾çš„å±•ç¤ºä½ç½®èŒƒå›´ã€åœ°å›¾ä¸­å¿ƒä½ç½®ä»¥åŠå½“å‰åœ°å›¾ä½¿ç”¨çš„æŠ•å½±åæ ‡ç³»ï¼ˆæœ‰å¾ˆå¤šåæ ‡ç³»ï¼Œå¦‚åœ°ç†åæ ‡ç³»ï¼š4326ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥è®¾ç½®åœ°å›¾æ—‹è½¬ç­‰ï¼Œä½¿ç”¨ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">setView</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n     center<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">114.064839</span><span class=\"token punctuation\">,</span><span class=\"token number\">22.548857</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">//æ·±åœ³</span>\n     zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>    \n     projection<span class=\"token punctuation\">:</span> <span class=\"token string\">'EPSG:4326'</span>     <span class=\"token comment\">//ä½¿ç”¨çš„åæ ‡ï¼Œè¿™é‡Œæ˜¯ WGS84 åæ ‡ç³»</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"Control_153\"></a>Control</h2>\n<p>Control æ§ä»¶ï¼Œå°±æ˜¯ä¸åœ°å›¾ç›¸å…³æ“ä½œçš„å·¥å…·ã€‚å¦‚ä¸‹å›¾ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\473b4eacba274bddb3311118bd541d88.png\"/><br/> åœ°å›¾é»˜è®¤åŒ…å«äº†æ”¾å¤§ç¼©å°æ§ä»¶ï¼Œæ§ä»¶çš„ä½¿ç”¨å¯ä»¥æ›´åŠ æ–¹ä¾¿çš„å¸®åŠ©æˆ‘ä»¬æµè§ˆæ•°æ®ï¼Œæé«˜äº¤äº’ä½“éªŒã€‚</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map2'</span><span class=\"token punctuation\">,</span>\n    layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>OSM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      center<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>proj<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">[</span><span class=\"token number\">104</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:4326'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:3857'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// åœ¨é»˜è®¤æ§ä»¶çš„åŸºç¡€ä¸Šï¼Œå†åŠ ä¸Šå…¶ä»–å†…ç½®çš„æ§ä»¶</span>\n\t<span class=\"token comment\">// åœ¨ä¸Šé¢ demo ä¸­æ²¡æœ‰è®¾ç½® controls å±æ€§ï¼Œç›´æ¥ä½¿ç”¨ Map çš„é»˜è®¤æ§ä»¶ï¼ˆæ”¾å¤§ã€ç¼©å°ï¼‰</span>\n    controls<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span><span class=\"token function\">defaults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>FullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>MousePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>OverviewMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ScaleLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ZoomSlider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ZoomToExtent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"Interaction_184\"></a>Interaction</h2>\n<p>äº¤äº’æ“ä½œå°±æ˜¯æˆ‘ä»¬ä¸åœ°å›¾çš„ç›¸äº’æ“ä½œï¼Œæ¯”å¦‚åœ¨åœ°å›¾ä¸Šç»˜åˆ¶è¦ç´ ã€é€‰æ‹©ã€ä¿®æ”¹ã€ç§»åŠ¨ã€æ‹‰ä¼¸ç­‰ç­‰æ“ä½œã€‚ä½¿ç”¨å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// ä¿®æ”¹ openlayers æä¾›çš„é»˜è®¤çš„äº¤äº’æ–¹å¼</span>\n      interactions<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>interaction<span class=\"token punctuation\">.</span><span class=\"token function\">defaults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          doubleClickZoom<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          mouseWheelZoom<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">...</span> <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map2'</span><span class=\"token punctuation\">,</span>\n      view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token operator\">...</span> <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ·»åŠ ï¼š</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token comment\">// æ·»åŠ ç»˜åˆ¶å·¥å…·</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addInteraction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">//åœ¨åœ°å›¾ä¸Šç»˜åˆ¶å¥½çš„è¦ç´ æ·»åŠ åˆ°æŒ‡å®šæ•°æ®æº</span>\n  source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>drawVectorSource<span class=\"token punctuation\">,</span>   \n  <span class=\"token comment\">//ç»˜åˆ¶è¦ç´ çš„ç±»å‹</span>\n  <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> GeometryType<span class=\"token punctuation\">.</span><span class=\"token constant\">POLYGON</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p>ğŸ“¢æ¬¢è¿ç‚¹èµğŸ‘/ æ”¶è—â­/ ç•™è¨€ğŸ“å¦‚æœ‰é”™è¯¯æ•¬è¯·æŒ‡æ­£ï¼<br/> åç»­æŒç»­æ›´æ–°ä¸­â€¦</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "JavaScript", "cpp": 0, "csharp": 0, "python": 0, "javascript": 1, "java": 0, "sql": 0, "php": 0, "time": "2022-03-12 14:28:15", "summary": "æ¬¢è¿ç‚¹èµæ”¶è—ç•™è¨€å¦‚æœ‰é”™è¯¯æ•¬è¯·æŒ‡æ­£ï¼ç®€ä»‹æ˜¯å¼€æºçš„å‰ç«¯åœ°å›¾æ¡†æ¶ï¼Œå®˜ç½‘åœ°å€ï¼šå®ƒçš„ä½œç”¨ä¸»è¦æ˜¯ç”¨äºå±•ç°æ•°æ®å¹¶ä¸”æä¾›ç›¸åº”çš„åœ°å›¾æ“ä½œå·¥å…·ã€‚å®˜ç½‘é¦–é¡µåœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°ä½¿ç”¨ç¤ºä¾‹ç‰ˆæœ¬å®˜ç½‘æä¾›äº†ä¸ªä½¿ç”¨æ¡ˆä¾‹"}