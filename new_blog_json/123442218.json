{"blogid": "123442218", "writerAge": "码龄4年", "writerBlogNum": "81", "writerCollect": "295", "writerComment": "23", "writerFan": "26", "writerGrade": "4级", "writerIntegral": "915", "writerName": "卸载引擎", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123442218.jpg", "writerRankTotal": "22610", "writerRankWeekly": "33544", "writerThumb": "77", "writerVisitNum": "91020", "blog_read_count": "9262", "blog_time": "已于 2022-03-12 14:28:15 修改", "blog_title": "Openlayers 快速上手教程", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>📢欢迎点赞👍/ 收藏⭐/ 留言📝如有错误敬请指正！</p>\n</blockquote>\n<h1><a id=\"1_Openlayers_2\"></a>1. Openlayers简介</h1>\n<p>Openlayers 是开源的前端地图框架，官网地址：<a href=\"https://openlayers.org/\">https://openlayers.org/</a><br/> 它的作用主要是用于展现数据并且提供相应的地图操作工具。</p>\n<h2><a id=\"11__6\"></a>1.1 官网首页</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c52df11a2e6f41a98a09f57f2c56793c.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9cecae78d9964245b2017e08e1f91b84.png\"/></p>\n<h2><a id=\"12_example_9\"></a>1.2 使用示例example</h2>\n<p>Openlayers6版本官网提供了 228 个使用案例，可以根据自己的需要筛选：<br/> 如： popup、draw、style 等<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1313fe1298a548c3957d66577617eba7.png\"/><br/> 例如搜索popup:<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\059104d439b74706bd6f534fa93838bc.png\"/><br/> 点击进入后有详细的代码示例：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\730282495c624708aab3224b0b4a513c.png\"/></p>\n<h2><a id=\"13_api_17\"></a>1.3 阅读api</h2>\n<p>在学会了 Openlayers 的基本使用后，API 的阅读使用则是工作必备。<br/> 左侧列表列出了Openlayers的所有类，方便快速搜索<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0a6640f6396645de8dbd97f15cbe6c32.png\"/><br/> 例如搜索Map后进入：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cd0cf93e4700420784bebf5e92c03543.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6fa5baa586484a60aea0c4e50f71cbbe.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8c9b8d3410ce41319173563edeb5f470.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\43bb43965ca648f49557bfe874536e0b.png\"/></p>\n<h1><a id=\"2__28\"></a>2. 快速开始示例</h1>\n<p>我将通过一个官网的demo介绍如何使用Openlayers<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f7d4e0f1cbd446b490ce9cfbcdf48b0b.png\"/><br/> 初始代码：</p>\n<pre><code class=\"prism language-html\"><span class=\"token doctype\">&lt;!doctype html&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.13.0/css/ol.css<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style language-css\">\n      <span class=\"token selector\">.map-class</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 50rem<span class=\"token punctuation\">;</span>\n        <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token comment\">&lt;!-- 加载OpenLayers 类库 --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.13.0/build/ol.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script language-javascript\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>OpenLayers例子<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">&gt;</span></span>我的地图<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>map-id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>map-class<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script language-javascript\">\n      <span class=\"token keyword\">var</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 绑定 DIV 元素</span>\n        target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map-id'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 添加图层</span>\n        layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">// 设置图层的数据源</span>\n            source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>OSM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 设置视图窗口</span>\n        view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token comment\">//center: ol.proj.fromLonLat([37.41, 8.82]),</span>\n          center<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>proj<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">104</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:4326'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:3857'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">5</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<p>通过上面例子可以看出 Openlayers 使用很简单，首先定义一个 Map，这是 Openlayers 的核心，它是一个容器，所有动作、设置等都在 Map 中展开。</p>\n<p>下面对上面 demo所简要说明：</p>\n<ol><li>将 Map 容器与 HTML 元素（这里是 DIV 元素 <code>map-id</code>）做绑定，Map 提供有 <code>target</code> 属性来绑定；</li><li>将图层 Layer 添加到 Map 中，这里是一个瓦面图层 <code>ol.layer.Tile</code>；</li><li>图层是一个包装盒，需要给图层添加具体的数据源：<code>new ol.source.OSM()</code>，数据源表示一个服务，可以理解为是一个 URL；</li><li>最后设置 Map 容器的视图窗口：<code>new ol.View</code>，就是我们初始化能看到的地图样子。</li></ol>\n<p>Openlayers 其核心组件是 <code>Map、Layer、Source、View、Control、Interaction</code>几乎所有的动作都是围绕这几个核心类展开。</p>\n<h2><a id=\"Map_84\"></a>Map</h2>\n<p>Map是 Openlayers 的使用的基础，所有的图层、地图控件、地图工具等必须添加到 Map 中才能使用。<br/> 往 Map 中添加图层、地图控件、地图工具等可以在初始化 Map 时就添加（如上 demo），可以调用 Map 相关的方法添加 <code>addControl(control)</code>、<code>addInteraction(interaction)</code>、<code>addLayer(layer)</code>。<br/> Map 还提供了很多事件，如：点击地图（click）、双击地图（dbclick）等。<br/> 绑定 click 事件使用：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> evt <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">forEachFeatureAtPixel</span><span class=\"token punctuation\">(</span>evt<span class=\"token punctuation\">.</span>pixel<span class=\"token punctuation\">,</span> feature <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token comment\">//鼠标点击某一个要素后，获取这个要素，执行业务逻辑</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>PS：</strong> 另一种事件调用方式：<code>this.map.dispatchEvent({type: \"click\", event: 回调函数 })</code></p>\n<h2><a id=\"Layer_100\"></a>Layer</h2>\n<p>Layer 图层：单单一个 Map 是没有什么用的，只用绑定图层才能显示数据，Layer 作用能控制数据是否显示，以及地图可显示的最大或最小比例尺（即放大或缩小到某个级别不显示地图），这里特别说明下，图层主要是根据数据源的不同来选择，不同的数据源选择不同的图层，使用：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Vector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n  source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TileWMS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"http://192.168.1.244:9090/geoserver/fj/wms\"</span><span class=\"token punctuation\">,</span>\n    params<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n         <span class=\"token constant\">LAYERS</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"fj:cityErase\"</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"Source_114\"></a>Source</h2>\n<p>这是整个 Openlayers 的灵魂，source 分为<strong>矢量数据源</strong>和<strong>影像数据源</strong>。有时候底图使用影像数据，而与我们业务相关的河流、行政区、水环境监测点等都是矢量数据。<br/> 数据源的使用如下：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//加载影像数据</span>\n   source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>XYZ</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        url<span class=\"token punctuation\">:</span> <span class=\"token string\">\"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=a5dd6a2f1c934394bce6b0fb077203eb\"</span><span class=\"token punctuation\">,</span>\n        attributions<span class=\"token punctuation\">:</span> <span class=\"token string\">\"测试\"</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addLayer</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">VectorLayer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//加载矢量数据</span>\n   source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>Vector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n   <span class=\"token comment\">//这里设置数据展示边框颜色</span>\n   style<span class=\"token punctuation\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>feature<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Style</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n             stroke<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n                   color<span class=\"token punctuation\">:</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span>\n                   width<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span>\n             <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n         <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"View_142\"></a>View</h2>\n<p>view 用来设置地图的展示位置范围、地图中心位置以及当前地图使用的投影坐标系（有很多坐标系，如地理坐标系：4326）等，也可以设置地图旋转等，使用：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">setView</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n     center<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">114.064839</span><span class=\"token punctuation\">,</span><span class=\"token number\">22.548857</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>    <span class=\"token comment\">//深圳</span>\n     zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>    \n     projection<span class=\"token punctuation\">:</span> <span class=\"token string\">'EPSG:4326'</span>     <span class=\"token comment\">//使用的坐标，这里是 WGS84 坐标系</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"Control_153\"></a>Control</h2>\n<p>Control 控件，就是与地图相关操作的工具。如下图：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\473b4eacba274bddb3311118bd541d88.png\"/><br/> 地图默认包含了放大缩小控件，控件的使用可以更加方便的帮助我们浏览数据，提高交互体验。</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map2'</span><span class=\"token punctuation\">,</span>\n    layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>layer<span class=\"token punctuation\">.</span>Tile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n        source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>OSM</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      center<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>proj<span class=\"token punctuation\">.</span><span class=\"token function\">transform</span><span class=\"token punctuation\">(</span>\n          <span class=\"token punctuation\">[</span><span class=\"token number\">104</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:4326'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'EPSG:3857'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      zoom<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 在默认控件的基础上，再加上其他内置的控件</span>\n\t<span class=\"token comment\">// 在上面 demo 中没有设置 controls 属性，直接使用 Map 的默认控件（放大、缩小）</span>\n    controls<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span><span class=\"token function\">defaults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">extend</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>FullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>MousePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>OverviewMap</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ScaleLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ZoomSlider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>control<span class=\"token punctuation\">.</span>ZoomToExtent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"Interaction_184\"></a>Interaction</h2>\n<p>交互操作就是我们与地图的相互操作，比如在地图上绘制要素、选择、修改、移动、拉伸等等操作。使用如下：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// 修改 openlayers 提供的默认的交互方式</span>\n      interactions<span class=\"token punctuation\">:</span> ol<span class=\"token punctuation\">.</span>interaction<span class=\"token punctuation\">.</span><span class=\"token function\">defaults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          doubleClickZoom<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n          mouseWheelZoom<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      layers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token operator\">...</span> <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n      target<span class=\"token punctuation\">:</span> <span class=\"token string\">'map2'</span><span class=\"token punctuation\">,</span>\n      view<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ol<span class=\"token punctuation\">.</span>View</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token operator\">...</span> <span class=\"token operator\">...</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>也可以手动添加：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token comment\">// 添加绘制工具</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>map<span class=\"token punctuation\">.</span><span class=\"token function\">addInteraction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">//在地图上绘制好的要素添加到指定数据源</span>\n  source<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>drawVectorSource<span class=\"token punctuation\">,</span>   \n  <span class=\"token comment\">//绘制要素的类型</span>\n  <span class=\"token keyword\">type</span><span class=\"token punctuation\">:</span> GeometryType<span class=\"token punctuation\">.</span><span class=\"token constant\">POLYGON</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p>📢欢迎点赞👍/ 收藏⭐/ 留言📝如有错误敬请指正！<br/> 后续持续更新中…</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "JavaScript", "cpp": 0, "csharp": 0, "python": 0, "javascript": 1, "java": 0, "sql": 0, "php": 0, "time": "2022-03-12 14:28:15", "summary": "欢迎点赞收藏留言如有错误敬请指正！简介是开源的前端地图框架，官网地址：它的作用主要是用于展现数据并且提供相应的地图操作工具。官网首页在这里插入图片描述在这里插入图片描述使用示例版本官网提供了个使用案例"}