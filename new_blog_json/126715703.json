{"blogid": "126715703", "writerAge": "码龄1年", "writerBlogNum": "182", "writerCollect": "616", "writerComment": "652", "writerFan": "729", "writerGrade": "5级", "writerIntegral": "3758", "writerName": "一个风轻云淡", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126715703.jpg", "writerRankTotal": "5524", "writerRankWeekly": "82", "writerThumb": "776", "writerVisitNum": "46637", "blog_read_count": "101", "blog_time": "已于 2022-09-06 19:36:00 修改", "blog_title": "微服务项目：尚融宝（20）（后端搭建：OSS文件上传整合）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<blockquote>\n<h1><span style=\"color:#fe2c24;\">认清现实，放弃幻想，准备斗争 </span></h1>\n</blockquote>\n<h1 id=\"articleContentId\">阿里云存储OSS</h1>\n<h1>一、开通“对象存储OSS”服务</h1>\n<p><span style=\"color:#1c7331;\"><strong>为了解决海量数据存储与弹性扩容，项目中我们采用云存储的解决方案- 阿里云OSS。 </strong></span></p>\n<h2>1、开通“对象存储OSS”服务</h2>\n<p><img alt=\"\" height=\"293\" src=\"..\\..\\static\\image\\c7dc09481b074930a4e6a8c56ef25175.png\" width=\"730\"/></p>\n<p><img alt=\"\" height=\"334\" src=\"..\\..\\static\\image\\5fe39d26c6734827a63cc1f0d2624ccd.png\" width=\"761\"/></p>\n<h2>2、进入管理控制台 </h2>\n<p><img alt=\"\" height=\"221\" src=\"..\\..\\static\\image\\513d2f90404c4f71a8b8d5b80baa46c8.png\" width=\"899\"/></p>\n<h1>二、控制台使用</h1>\n<h2>1、创建Bucket</h2>\n<p><span style=\"color:#1c7331;\"><strong>命名：srb-file</strong></span></p>\n<p><span style=\"color:#1c7331;\"><strong>读写权限：公共读</strong></span></p>\n<h2><span style=\"color:#0d0016;\"><strong>2、上传默认头像</strong></span></h2>\n<p><span style=\"color:#b95514;\"><strong>创建文件夹avatar，上传默认的用户头像</strong></span></p>\n<p><img alt=\"\" height=\"297\" src=\"..\\..\\static\\image\\be2b4f468a7048819693df21d067b461.png\" width=\"890\"/></p>\n<p><span style=\"color:#b95514;\"><strong> </strong></span></p>\n<h2>三、使用RAM子用户</h2>\n<h2>1、进入子用户管理页面</h2>\n<p><img alt=\"\" height=\"381\" src=\"..\\..\\static\\image\\a440d04be8614fd7b5260285769c7689.png\" width=\"279\"/></p>\n<p><img alt=\"\" height=\"243\" src=\"..\\..\\static\\image\\7a66c3bfdadc425d8ac35531d2718d88.png\" width=\"600\"/></p>\n<h2>2、添加用户 </h2>\n<p><img alt=\"\" height=\"396\" src=\"..\\..\\static\\image\\4c0ea0903ec94c15b1764eed5c198c32.png\" width=\"881\"/></p>\n<h2>3、获取子用户key</h2>\n<p><span style=\"color:#1c7331;\"><strong>AccessKeyId, AccessKeySecret</strong></span></p>\n<h2>4、设置用户权限</h2>\n<p><strong>AliyunOSSFullAccess</strong></p>\n<p><img alt=\"\" height=\"487\" src=\"..\\..\\static\\image\\d798ece0d3c14ee7842d514b438bd432.png\" width=\"1200\"/></p>\n<h1>一、使用SDK</h1>\n<p><span style=\"color:#1c7331;\"><strong>在OSS的概览页右下角找到“Bucket管理”，点击“OSS学习路径”</strong></span></p>\n<p><img alt=\"\" height=\"306\" src=\"..\\..\\static\\image\\8f249f9eadde470ca8b7f8fc18d7a4fe.png\" width=\"326\"/></p>\n<p><span style=\"color:#1c7331;\"><strong>点击“Java SDK”进入SDK开发文档 </strong></span></p>\n<p><img alt=\"\" height=\"189\" src=\"..\\..\\static\\image\\18a2e40419194d7f931ac3396a3138e3.png\" width=\"625\"/></p>\n<h1>二、创建测试项目</h1>\n<h2>1、创建Maven项目</h2>\n<p><span style=\"color:#ad720d;\"><strong>com.atguigu</strong></span></p>\n<p><span style=\"color:#ad720d;\"><strong>aliyun-oss</strong></span></p>\n<h2>2、配置pom</h2>\n<p><img alt=\"\" height=\"247\" src=\"..\\..\\static\\image\\7843eb561d0d4a03b43289e70f033222.png\" width=\"225\"/></p>\n<pre><code class=\"language-XML\">&lt;dependencies&gt;\n    &lt;!--aliyunOSS--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.aliyun.oss&lt;/groupId&gt;\n        &lt;artifactId&gt;aliyun-sdk-oss&lt;/artifactId&gt;\n        &lt;version&gt;3.10.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;</code></pre>\n<p></p>\n<h1>三、测试用例</h1>\n<h2>1、创建Bucket</h2>\n<p><img alt=\"\" height=\"181\" src=\"..\\..\\static\\image\\86553dccbc80433f8fb0370dc5347ed8.png\" width=\"172\"/></p>\n<pre><code class=\"language-java\">public class OSSTest {\n\n    // Endpoint以杭州为例，其它Region请按实际情况填写。\n    String endpoint = \"your endpoint\";\n    // 阿里云主账号AccessKey拥有所有API的访问权限，风险很高。强烈建议您创建并使用RAM账号进行API访问或日常运维，请登录 https://ram.console.aliyun.com 创建RAM账号。\n    String accessKeyId = \"your accessKeyId\";\n    String accessKeySecret = \"your accessKeySecret\";\n    String bucketName = \"srb-file\";\n\n    @Test\n    public void testCreateBucket() {\n        \n        // 创建OSSClient实例。\n        OSS ossClient = new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);\n\n        // 创建存储空间。\n        ossClient.createBucket(bucketName);\n\n        // 关闭OSSClient。\n        ossClient.shutdown();\n    }\n}</code></pre>\n<h2> 2、判断bucket是否存在</h2>\n<pre><code class=\"language-java\">@Test\npublic void testExist() {\n\n    // 创建OSSClient实例。\n    OSS ossClient = new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);\n\n    boolean exists = ossClient.doesBucketExist(bucketName);\n    System.out.println(exists);\n\n    // 关闭OSSClient。\n    ossClient.shutdown();\n}</code></pre>\n<h2> 3、设置bucket访问权限</h2>\n<pre><code class=\"language-java\">@Test\npublic void testAccessControl() {\n\n    // 创建OSSClient实例。\n    OSS ossClient = new OSSClientBuilder().build(endpoint, accessKeyId, accessKeySecret);\n\n    // 设置存储空间的访问权限为：公共读。\n    ossClient.setBucketAcl(bucketName, CannedAccessControlList.PublicRead);\n\n    // 关闭OSSClient。\n    ossClient.shutdown();\n}</code></pre>\n<blockquote>\n<p><strong><span style=\"color:#ad720d;\">什么是对象存储OSS</span><br/> OSS的全称是：Object Storage Service；即对象存储服务。</strong></p>\n<p><strong>在数据存储领域，存储数据的主要方法有三种: 文件、块和对象。</strong></p>\n<p><strong>简单来说，对象的功能是模块化的单元，每个对象都充当自包含的存储库，其中包含描述权限、隐私、证券、意外事件和其他信息等详细信息的元数据。例如，它类似于一张照片，其中可能包含描述用于拍摄照片的相机设置以及拍摄时间和地点的元数据。</strong></p>\n<p><strong>将OSS与传统的存储方式进行对比<br/><span style=\"color:#1a439c;\">传统上，Web 应用程序使用文件系统和数据库在后端存储用户数据。很简单，结构化数据进入数据库，其他任何东西进入文件系统。这很容易管理，因为很少有应用程序生成非结构化数据——大多数应用程序在表单中接受用户输入并将数据保存到数据库中。</span></strong></p>\n<p><span style=\"color:#1a439c;\"><strong>然而，时代在变，随着社交媒体、云存储、数据分析平台和其他计算范式的出现，越来越多的非结构化数据被推送到互联网上。</strong></span></p>\n<p><strong>DC 在 2014 年进行的一项研究预测，到 2020 年，全球创建和复制的非结构化数据将达到 44 泽字节，即每年 44 万亿千兆字节。2015 年非结构化数据已经占所有数字数据的 90%</strong></p>\n<p><strong>所以，与其他计算范式一样，存储系统需要不断发展才能满足这一新的非结构化数据浪潮席卷互联网。</strong></p>\n<p><strong>自现代计算开始以来人们一直在使用的存储机制，即文件系统，扩展比较困难；不仅需要管理文件系统强加的不必要的元数据和层次结构，还需要处理其他事情，例如备份管理。</strong></p>\n<p><strong>而且，仅仅收集非结构化数据是不够的。我们还需要应用某种级别的组织来理解数据。文本分析、自动分类、自动标记等技术对于从我们收集的所有非结构化数据中获得商业意义至关重要。具有固定布局的文件系统使其难以实现。</strong></p>\n<p><strong>我们最初接触到的文件系统不是为 HTTP(S) 设计的，而是为人类设计的。在文件系统中共享和管理文件很难以编程方式处理。处理文件流和可能的边界情况很容易出错，需要花费大量的时间和精力。</strong></p>\n<p><span style=\"color:#be191c;\"><strong>为了绕过这一切，需要一些新的东西。从头开始设想，始终关注新的需求。这导致了对象存储。</strong></span></p>\n</blockquote>\n</div>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-09-06 19:36:00", "summary": "认清现实，放弃幻想，准备斗争阿里云存储一、开通对象存储服务为了解决海量数据存储与弹性扩容，项目中我们采用云存储的解决方案阿里云。、开通对象存储服务、进入管理控制台二、控制台使用、创建命名：读写权限：公"}