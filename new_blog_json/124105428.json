{"blogid": "124105428", "writerAge": "码龄19年", "writerBlogNum": "183", "writerCollect": "301", "writerComment": "119", "writerFan": "303", "writerGrade": "7级", "writerIntegral": "17434", "writerName": "zhangfeng1133", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124105428.jpg", "writerRankTotal": "1791", "writerRankWeekly": "14636", "writerThumb": "123", "writerVisitNum": "2221794", "blog_read_count": "1478", "blog_time": "于 2022-04-11 22:38:32 发布", "blog_title": "thinkphp5 添加 phpoffice/phpspreadsheet - topthink/think-installer v1.0.12 requires composer-plugin-ap", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>phpexcel php操作excel的类库停止更新换成新的 phpoffice/phpspreadsheet</p>\n<p></p>\n<blockquote>\n<pre>composer require dts/ebay-sdk-php\nUsing version ^17.0 for dts/ebay-sdk-php\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nPackage operations: 1 install, 0 updates, 0 removals\n  - Installing dts/ebay-sdk-php (17.0.0): Downloading (100%)\nPackage phpoffice/phpexcel is abandoned, you should avoid using it. Use phpoffice/phpspreadsheet instead.\n</pre>\n</blockquote>\n<p></p>\n<p>当然</p>\n<pre>composer update phpoffice/phpword</pre>\n<p>word也一样</p>\n<p>操作</p>\n<p></p>\n<pre><code>composer require phpoffice/phpspreadsheet</code></pre>\n<p></p>\n<p>报错</p>\n<p></p>\n<blockquote>\n<pre>Problem 1\n    - topthink/think-installer v1.0.12 requires composer-plugin-api ^1.0 -&gt; foun\nd composer-plugin-api[2.0.0] but it does not match the constraint.\n    - topthink/framework v5.0.21 requires topthink/think-installer ~1.0 -&gt; satis\nfiable by topthink/think-installer[v1.0.12].\n    - topthink/framework is locked to version v5.0.21 and an update of this pack\nage was not requested.\n\nYou are using Composer 2, which some of your plugins seem to be incompatible wit\nh. Make sure you update your plugins or report a plugin-issue to ask them to sup\nport Composer 2.\n\nInstallation failed, reverting ./composer.json and ./composer.lock to their orig\ninal content.</pre>\n</blockquote>\n<p></p>\n<p>有包不支持你的 composer 2，需要用 composer 1 安装</p>\n<pre>composer self-update --1</pre>\n<p>安装 composer 1，若要安装 composer 2 可使用</p>\n<pre>composer self-update --2</pre>\n<p></p>\n<p></p>\n<p>更新后</p>\n<p></p>\n<blockquote>\n<p>composer require phpoffice/phpspreadsheet<br/> topthink/think-installer contains a Composer plugin which is currently not in yo<br/> ur allow-plugins config. See https://getcomposer.org/allow-plugins<br/> Do you trust \"topthink/think-installer\" to execute code and wish to enable it no<br/> w? (writes \"allow-plugins\" to composer.json) [y,n,d,?]</p>\n</blockquote>\n<p><br/> 选择Y</p>\n<p></p>\n<p>\\amazonerp&gt;composer require phpoffice/phpspre<br/> adsheet<br/> topthink/think-installer contains a Composer plugin which is currently not in yo<br/> ur allow-plugins config. See https://getcomposer.org/allow-plugins<br/> Do you trust \"topthink/think-installer\" to execute code and wish to enable it no<br/> w? (writes \"allow-plugins\" to composer.json) [y,n,d,?]</p>\n<p>选择y</p>\n<p><br/> The \"topthink/think-installer\" plugin was skipped because it requires a Plugin A<br/> PI version (\"^1.0\") that does not match your Composer installation (\"2.3.0\"). Yo<br/> u may need to run composer update with the \"--no-plugins\" option.<br/> Using version ^1.22 for phpoffice/phpspreadsheet<br/> ./composer.json has been updated<br/> The \"topthink/think-installer\" plugin was skipped because it requires a Plugin A<br/> PI version (\"^1.0\") that does not match your Composer installation (\"2.3.0\"). Yo<br/> u may need to run composer update with the \"--no-plugins\" option.<br/> Running composer update phpoffice/phpspreadsheet<br/> Loading composer repositories with package information<br/> Updating dependencies<br/> Your requirements could not be resolved to an installable set of packages.</p>\n<p>  Problem 1<br/>     - topthink/think-installer v1.0.12 requires composer-plugin-api ^1.0 -&gt; foun<br/> d composer-plugin-api[2.3.0] but it does not match the constraint.<br/>     - karsonzhang/fastadmin-addons 1.1.4 requires topthink/think-installer &gt;=1.0<br/> .10 -&gt; satisfiable by topthink/think-installer[v1.0.12].<br/>     - karsonzhang/fastadmin-addons is locked to version 1.1.4 and an update of t<br/> his package was not requested.</p>\n<p>You can also try re-running composer require with an explicit version constraint<br/> , e.g. \"composer require phpoffice/phpspreadsheet:*\" to figure out if any versio<br/> n is installable, or \"composer require phpoffice/phpspreadsheet:^2.1\" if you kno<br/> w which you need.</p>\n<p>Installation failed, reverting ./composer.json and ./composer.lock to their orig<br/> inal content.</p>\n<blockquote>\n<p>吧compposer降级</p>\n</blockquote>\n<pre><code>D:\\phpstudy_pro\\WWW\\24.comamazonerp\\amazonerp&gt;composer self-update --1\nWarning: You forced the install of 1.10.25 via --1, but 2.3.4 is the latest stab\nle version. Updating to it via composer self-update --stable is recommended.\nUpgrading to version 1.10.25 (1.x channel).\n\nUse composer self-update --rollback to return to version 2.3.4</code></pre>\n<p></p>\n<p>composer require phpoffice/phpspre<br/> adsheet<br/> Warning from https://mirrors.aliyun.com/composer: Support for Composer 1 is depr<br/> ecated and some packages will not be available. You should upgrade to Composer 2<br/> . See https://blog.packagist.com/deprecating-composer-1-support/</p>\n<p><br/>   [Composer\\Downloader\\TransportException]<br/>   The \"https://mirrors.aliyun.com/composer/p/provider-2017%24b5821b2a546c33da<br/>   ac76e494e604e1154f84a17bbf22858644e5cb028529ff1d.json\" file could not be do<br/>   wnloaded (HTTP/1.1 404 Not Found)<br/>  </p>\n<blockquote>\n<p>镜像没有这个文件，阿里云的镜像是 composer2.0的包</p>\n</blockquote>\n<p></p>\n<h3 id=\"-composer-json-\">修改当前项目的 <code>composer.json</code> 配置文件：</h3>\n<p>打开命令行窗口（windows用户）或控制台（Linux、Mac 用户），进入你的项目的根目录（也就是 <code>composer.json</code> 文件所在目录），执行如下命令：</p>\n<p>复制</p>\n<pre><code>composer config repo.packagist composer https://packagist.phpcomposer.com</code></pre>\n<p></p>\n<p></p>\n<pre><code>composer require phpoffice/phpspre\nadsheet ^1.2</code></pre>\n<p></p>\n</div>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-04-11 22:38:32", "summary": "操作的类库停止更新换成新的当然也一样操作报错有包不支持你的，需要用安装安装，若要安装可使用更新后选择选择吧降级"}