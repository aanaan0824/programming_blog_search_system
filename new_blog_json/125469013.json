{"blogid": "125469013", "writerAge": "码龄2年", "writerBlogNum": "150", "writerCollect": "4989", "writerComment": "6098", "writerFan": "55596", "writerGrade": "7级", "writerIntegral": "13288", "writerName": "桃花键神", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125469013.jpg", "writerRankTotal": "730", "writerRankWeekly": "91", "writerThumb": "4680", "writerVisitNum": "553008", "blog_read_count": "5535", "blog_time": "于 2022-06-27 04:00:00 发布", "blog_title": "Spring Cloud Alibaba —— 服务注册与配置中心", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7563a3ccc5cb4c7281231096df235732.png\"/></p>\n<p>🔎这里是【秒懂·云原生】，关注我学习云原生不迷路<br/> 👍如果对你有帮助，给博主一个免费的点赞以示鼓励<br/> 欢迎各位🔎点赞👍评论收藏⭐️</p>\n<h1><a id=\"_5\"></a>👀专栏介绍</h1>\n<p><strong>【秒懂·云原生】</strong> 目前主要更新微服务，一起学习一起进步。</p>\n<h1><a id=\"_8\"></a>👀本期介绍</h1>\n<p>主要介绍Spring Cloud Alibaba —— 服务注册与配置中心<br/> </p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_5\">👀专栏介绍</a></li><li><a href=\"#_8\">👀本期介绍</a></li><li><a href=\"#_11\">服务注册与配置中心</a></li><li><ul><li><a href=\"#Nacos__39\">Nacos 的特性</a></li><li><ul><li><a href=\"#_42\">服务发现</a></li><li><a href=\"#_47\">服务健康监测</a></li><li><a href=\"#_52\">动态配置服务</a></li><li><a href=\"#_DNS__64\">动态 DNS 服务</a></li><li><a href=\"#_70\">服务及其元数据管理</a></li></ul>\n</li><li><a href=\"#Nacos__76\">Nacos 两大组件</a></li><li><a href=\"#Nacos__86\">Nacos 服务注册中心</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"_11\"></a>服务注册与配置中心</h1>\n<p>Nacos 英文全称为 Dynamic Naming and Configuration<br/> Service，是一个由阿里巴巴团队使用 Java 语言开发的开源<br/> 项目。<br/> Nacos 是一个更易于帮助构建云原生应用的动态服务发<br/> 现、配置和服务管理平台（参考自 Nacos 官网）。<br/> Nacos 的命名是由 3 部分组成：</p>\n<table><thead><tr><th>组成部分</th><th>全称</th><th>描述</th></tr></thead><tbody><tr><td>Na</td><td>naming/nameServer</td><td>即服务注册中心，与Spring Cloud Eureka 的功能类似。</td></tr><tr><td>co</td><td>configuration</td><td>即配置中心，与 SpringCloud Config+SpringCloud Bus 的功能类似。</td></tr><tr><td>s</td><td>service</td><td>即服务，表示 Nacos 实现的服务注册中心和配置中心都是以服务为核心的。</td></tr></tbody></table>\n<p>我们可以将 Nacos 理解成服务注册中心和配置中心的组合<br/> 体，它可以替换 Eureka 作为服务注册中心，实现服务的注<br/> 册与发现；还可以替换 Spring Cloud Config 作为配置中<br/> 心，实现配置的动态刷新。<br/> Nacos 作为服务注册中心经历了十年“双十一”的洪峰考验，<br/> 具有简单易用、稳定可靠、性能卓越等优点，可以帮助用户<br/> 更敏捷、容易地构建和管理微服务应用。<br/> Nacos 支持几乎所有主流类型“服务”的发现、配置和管理：</p>\n<ul><li>Kubernetes Service</li><li>gRPC &amp; Dubbo RPC Service</li><li>Spring Cloud RESTful Service</li></ul>\n<h2><a id=\"Nacos__39\"></a>Nacos 的特性</h2>\n<p>Nacos 提供了一系列简单易用的特性，能够帮助我们快速<br/> 地实现动态服务发现、服务配置等功能。</p>\n<h3><a id=\"_42\"></a>服务发现</h3>\n<p>Nacos 支持基于 DNS 和 RPC 的服务发现。当服务提供者<br/> 使用原生 SDK、OpenAPI 或一个独立的 Agent TODO 向<br/> Nacos 注册服务后，服务消费者可以在 Nacos 上通过 DNS<br/> TODO 或 HTTP&amp;API 查找、发现服务。</p>\n<h3><a id=\"_47\"></a>服务健康监测</h3>\n<p>Nacos 提供对服务的实时健康检查，能够阻止请求发送到<br/> 不健康主机或服务实例上。Nacos 还提供了一个健康检查<br/> 仪表盘，能够帮助我们根据健康状态管理服务的可用性及流<br/> 量。</p>\n<h3><a id=\"_52\"></a>动态配置服务</h3>\n<p>动态配置服务可以让我们以中心化、外部化和动态化的方<br/> 式，管理所有环境的应用配置和服务配置。<br/> 动态配置消除了配置变更时重新部署应用和服务的需要，让<br/> 配置管理变得更加高效、敏捷。<br/> 配置中心化管理让实现无状态服务变得更简单，让服务按需<br/> 弹性扩展变得更容易。<br/> Nacos 提供了一个简洁易用的 UI 帮助我们管理所有服务和<br/> 应用的配置。Nacos 还提供包括配置版本跟踪、金丝雀发<br/> 布、一键回滚配置以及客户端配置更新状态跟踪在内的一系<br/> 列开箱即用的配置管理特性，帮助我们更安全地在生产环境<br/> 中管理配置变更和降低配置变更带来的风险。</p>\n<h3><a id=\"_DNS__64\"></a>动态 DNS 服务</h3>\n<p>Nacos 提供了动态 DNS 服务，能够让我们更容易地实现负<br/> 载均衡、流量控制以及数据中心内网的简单 DNS 解析服<br/> 务。<br/> Nacos 提供了一些简单的 DNS APIs TODO，可以帮助我们<br/> 管理服务的关联域名和可用的 IP:PORT 列表。</p>\n<h3><a id=\"_70\"></a>服务及其元数据管理</h3>\n<p>Nacos 能让我们从微服务平台建设的视角管理数据中心的<br/> 所有服务及元数据，包括管理服务的描述、生命周期、服务<br/> 的静态依赖分析、服务的健康状态、服务的流量管理、路由<br/> 及安全策略、服务的 SLA 以及 metrics 统计数据。</p>\n<h2><a id=\"Nacos__76\"></a>Nacos 两大组件</h2>\n<p>与 Eureka 类似，Nacos 也采用 CS（Client/Server，客户<br/> 端/服务器）架构，它包含两大组件，如下表。</p>\n<table><thead><tr><th>组件</th><th>描述</th><th>功能</th></tr></thead><tbody><tr><td>Nacos Server</td><td>Nacos 服务端，与Eureka Server 不同，Nacos Server由阿里巴巴团队使用 Java 语言编写并将 Nacos Server 的下载地址给用户，用户只需要直接下载并运行即可。</td><td>Nacos Server可以作为服务注册中心，帮助Nacos Client 实现服务的注册与发现。</td></tr><tr><td>Nacos Server可以作为配置中心，帮助Nacos Client在不重启的情况下，实现配置的动态刷新。</td><td></td><td></td></tr><tr><td>Nacos Client</td><td>Nacos 客户端，通常指的是微服务架构中的各个服务，由用户自己搭建，可以使用多种语言编写。</td><td>Nacos Client 通过添加依赖spring-cloudstarter-alibabanacosdiscovery，在服务注册中心（NacosServer）中实现服务的注册与发现。</td></tr><tr><td>Nacos Client通过添加依赖spring-cloudstarteralibabanacosconfig，在配置中心（NacosServer）中实现配置的动态刷新。</td><td></td><td></td></tr></tbody></table>\n<h2><a id=\"Nacos__86\"></a>Nacos 服务注册中心</h2>\n<p>Nacos 作为服务注册中心可以实现服务的注册与发现，流<br/> 程如下图<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\42d28a58f1fd4584adc78997bef8a6db.png\"/><br/> <strong>在图 中共涉及到以下 3 个角色：</strong></p>\n<ul><li>服务注册中心（Register Service）：它是一个 Nacos Server，可以为服务提供者和服务消费者提供服务注册和发现功能。</li><li>服务提供者（Provider Service）：它是一个 Nacos Client，用于对外服务。它将自己提供的服务注册到服务注册中心，以供服务消费者发现和调用。</li><li>服务消费者（Consumer Service）：它是一个 Nacos Client，用于消费服务。它可以从服务注册中心获取服务列表，调用所需的服务。</li></ul>\n<p><strong>Nacos 实现服务注册与发现的流程如下：</strong></p>\n<ol><li>从 Nacos 官方提供的下载页面中，下载 Nacos Server<br/> 并运行。</li><li>服务提供者 Nacos Client 启动时，会把服务以服务名<br/> （spring.application.name）的方式注册到服务注册中<br/> 心（Nacos Server）；</li><li>服务消费者 Nacos Client 启动时，也会将自己的服务注<br/> 册到服务注册中心；</li><li>服务消费者在注册服务的同时，它还会从服务注册中心<br/> 获取一份服务注册列表信息，该列表中包含了所有注册<br/> 到服务注册中心上的服务的信息（包括服务提供者和自<br/> 身的信息）；</li><li>在获取了服务提供者的信息后，服务消费者通过 HTTP<br/> 或消息中间件远程调用服务提供者提供的服务。<br/> <img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/528c5bb11a854e5a95f0c066dd4e5be9.gif#pic_center\"/></li></ol>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-06-27 04:00:00", "summary": "在这里插入图片描述这里是秒懂云原生，关注我学习云原生不迷路如果对你有帮助，给博主一个免费的点赞以示鼓励欢迎各位点赞评论收藏专栏介绍秒懂云原生目前主要更新微服务，一起学习一起进步。本期介绍主要介绍服务注"}