{"blogid": "125984382", "writerAge": "码龄163天", "writerBlogNum": "80", "writerCollect": "2734", "writerComment": "3081", "writerFan": "3573", "writerGrade": "6级", "writerIntegral": "7846", "writerName": "北极的三哈", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125984382.jpg", "writerRankTotal": "1807", "writerRankWeekly": "16", "writerThumb": "2690", "writerVisitNum": "648865", "blog_read_count": "10772", "blog_time": "已于 2022-08-20 16:25:04 修改", "blog_title": "【Flask框架②】——第一个Flask项目", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-dracula\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/4f047c5263c3424b9353a21c7f6ccf8b.gif#pic_center\"/></p>\n<blockquote>\n<p>🤵‍♂️ 个人主页: <a href=\"https://blog.csdn.net/m0_68744965?spm=1000.2115.3001.5343\">@Flyme awei 个主页</a><br/> 👨‍💻 作者简介：<code>Python</code>领域新星创作者。<br/> 📒 系列专栏：《<a href=\"https://blog.csdn.net/m0_68744965/category_11957439.html?spm=1001.2014.3001.5482\">在线编程-Python篇</a>》<br/> 🐋 希望大家多多支持😘一起进步呀！<br/> 📝 如果文章对你有帮助的话，欢迎评论💬点赞👍收藏📂加关注</p>\n</blockquote>\n<p><strong>牛客题库《<a href=\"https://www.nowcoder.com/link/pc_csdncpt_flyme_python\">在线编程-Python篇</a>》</strong><br/> <code>python</code>的学习还是得基础知识+自己动手同步进行。如果是<code>python</code>新手，需要找一个可以在线练习得网站，我建议你去<a href=\"https://www.nowcoder.com/link/pc_csdncpt_flyme_python\">牛客网</a>多练习。<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3c0cd712dde74c3982626838c3094dda.png\"/></p>\n<hr/>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#Flask_15\">第一个Flask项目</a></li><li><a href=\"#1_17\">1、安装环境</a></li><li><a href=\"#2_36\">2、创建项目</a></li><li><a href=\"#3_56\">3、启动程序</a></li><li><a href=\"#4_68\">4、访问项目</a></li><li><a href=\"#5_70\">5、参数说明</a></li><li><a href=\"#6_179\">6、应用程序配置参数</a></li><li><ul><li><a href=\"#1_188\">1.从配置对象中加载</a></li><li><a href=\"#2_230\">2.从配置文件中加载</a></li><li><a href=\"#3_276\">3.从环境变量中加载</a></li><li><a href=\"#4Pycharm_321\">4.从Pycharm中的运行时设置环境变量的方式加载</a></li><li><a href=\"#5_326\">5.企业项目开发常用的方式</a></li><li><ul><li><a href=\"#__363\">**`推 荐:牛客题霸-经典高频面试题库`**</a></li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"Flask_15\"></a>第一个Flask项目</h1>\n<p>本文适合有一定前端、Python、网路基础的同学阅读。</p>\n<h1><a id=\"1_17\"></a>1、安装环境</h1>\n<p>创建虚拟环境</p>\n<blockquote>\n<p>mkvirtualenv flask</p>\n</blockquote>\n<p>安装Flask</p>\n<blockquote>\n<p>pip install flask</p>\n</blockquote>\n<p>查看虚拟环境</p>\n<blockquote>\n<p>workon</p>\n</blockquote>\n<p>进入虚拟环境</p>\n<blockquote>\n<p>workon flask_env</p>\n</blockquote>\n<p>列出当前虚拟环境安装的库</p>\n<blockquote>\n<p>pip list</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e92eb3d6b3a5491db733fdbee348be32.png\"/></p>\n<h1><a id=\"2_36\"></a>2、创建项目</h1>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6c78364b7c5d4993b8a62713d45ecc6c.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a3b7c872fa52466ca66c1a659e879a0d.png\"/><br/> app.py</p>\n<pre><code class=\"prism language-python\">rom flask <span class=\"token keyword\">import</span> Flask\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 初始化 Flask项目的服务</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># put application's code here</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello World!'</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n  \n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<h1><a id=\"3_56\"></a>3、启动程序</h1>\n<p>方式一：pycharm run<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ed64408a13e9406c9406cbaf753df787.png\"/><br/> 方式二 ：terminal <code>python app.py</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c0920253b1bf421c82223bcaa39fdcac.png\"/></p>\n<p>方式三 进入目录 <code>python app.py</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\6836f7eebea540969a0c83685cadbad0.png\"/><br/> 方式四 设置环境变量 <code>set FLASK_APP = app.py</code><br/> <code>flask run</code><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\85145d765e7248a1ac50cf0d62947c7a.png\"/><br/> Ctrl C 关闭程序</p>\n<h1><a id=\"4_68\"></a>4、访问项目</h1>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5bc49b71ca9e427fad39b7994aa29628.png\"/></p>\n<h1><a id=\"5_70\"></a>5、参数说明</h1>\n<p>文件：app.py</p>\n<pre><code class=\"prism language-python\">rom flask <span class=\"token keyword\">import</span> Flask\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 初始化 Flask项目的服务</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># put application's code here</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello World!'</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n  \n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<p>接下来就来详细查看一下 Flask 应用程序在创建的时候一些需要我们关注的参数</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>\n        self<span class=\"token punctuation\">,</span>\n        import_name<span class=\"token punctuation\">:</span> <span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span>\n        static_url_path<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>\n        static_folder<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span>t<span class=\"token punctuation\">.</span>Union<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">,</span> os<span class=\"token punctuation\">.</span>PathLike<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"static\"</span><span class=\"token punctuation\">,</span>\n        static_host<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>\n        host_matching<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n        subdomain_matching<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n        template_folder<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"templates\"</span><span class=\"token punctuation\">,</span>\n        instance_path<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>\n        instance_relative_config<span class=\"token punctuation\">:</span> <span class=\"token builtin\">bool</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n        root_path<span class=\"token punctuation\">:</span> t<span class=\"token punctuation\">.</span>Optional<span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n</code></pre>\n<blockquote>\n<p><code>import_name：str,</code><br/> 当前Flask程序所在的包(模块)名字，传 <code>__name__</code> 就可以 其可以决定 Flask 在访问静态文件时查找的路径</p>\n</blockquote>\n<blockquote>\n<p><code>static_url_path: t.Optional[str] = None,</code><br/> 静态文件访问路径，可以不传，默认为：<code>/ + static_folder</code></p>\n</blockquote>\n<blockquote>\n<p><code>static_folder: t.Optional[t.Union[str, os.PathLike]] = \"static\",</code><br/> 静态文件存储的文件夹，可以不传，默认为 <code>static</code></p>\n</blockquote>\n<blockquote>\n<p><code>template_folder: t.Optional[str] = \"templates\",</code><br/> 模板文件存储的文件夹，可以不传，默认为 <code>templates</code></p>\n</blockquote>\n<p><strong>默认参数情况下</strong></p>\n<pre><code class=\"prism language-python\">app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>static\n\t\t<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>png\n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>templates\n\t\t<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span> index<span class=\"token punctuation\">.</span>html\n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>helloword<span class=\"token punctuation\">.</span>py\n访问<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token punctuation\">:</span>static<span class=\"token operator\">/</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span>png\n</code></pre>\n<p><strong>修改参数的情况下</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">,</span> static_url_path<span class=\"token operator\">=</span><span class=\"token string\">'/Flyme awei'</span><span class=\"token punctuation\">,</span> static_folder<span class=\"token operator\">=</span><span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 初始化 Flask项目的服务</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_world</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\"># put application's code here</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello World!'</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># IP:0.0.0.0 代表当前计算机所有的IP地址，</span>\n    <span class=\"token comment\"># port：端口默认是 5000</span>\n    <span class=\"token comment\"># flask的debug模式：把错误信息显示到页面中</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> debug<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>debug源文件<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\17ba2169709646c2ac5dd8141c34a306.png\"/></p>\n<pre><code class=\"prism language-python\">app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">,</span> static_url_path<span class=\"token operator\">=</span><span class=\"token string\">'/Flyme awei'</span><span class=\"token punctuation\">,</span>static_folder<span class=\"token operator\">=</span><span class=\"token string\">'static'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>\n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>folder_param <span class=\"token comment\"># 此处目录名变化 | </span>\n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">.</span>png \n<span class=\"token operator\">|</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>helloworld<span class=\"token punctuation\">.</span>py \n\n访问<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">:</span><span class=\"token number\">5000</span><span class=\"token operator\">/</span>static_url_path<span class=\"token operator\">/</span><span class=\"token number\">1</span><span class=\"token punctuation\">.</span>png才可以访问到图片\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9102231b3b654d1991d06d00273000f4.png\"/></p>\n<p>app.run参数<br/> 可以指定运行的主机IP地址，端口，是否开启调试模式</p>\n<pre><code class=\"prism language-python\">app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">\"0.0.0.0\"</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">5000</span><span class=\"token punctuation\">,</span> debug <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> \n\nIP<span class=\"token punctuation\">:</span><span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token number\">.0</span> 代表当前计算机所有的IP地址\n</code></pre>\n<p><strong>关于DEBUG调试模式</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f0e91ea28cc6407f96883c26f0e10e4b.png\"/></p>\n<p>1.程序代码修改后可以自动重启服务器<br/> 2.在服务器出现相关错误的时候可以直接将错误信息返回到前端进行展示<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\49647cc94b61473997fe47853077125d.png\"/></p>\n<h1><a id=\"6_179\"></a>6、应用程序配置参数</h1>\n<p>应用程序配置参数设置的是一个Web应用工程的相关信息，比如：</p>\n<ul><li>数据库的连接信息</li><li>日志的配置信息</li><li>自定义的配置信息</li><li>…</li></ul>\n<p><strong>注意：这样可以集中管理项目的所有配置信息</strong><br/> Flask将配置信息保存到了app.config属性中，该属性可以按照字典类型进行操作。</p>\n<h2><a id=\"1_188\"></a>1.从配置对象中加载</h2>\n<blockquote>\n<p><code>app.config.from_object(DefaultConfig)</code></p>\n</blockquote>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"token comment\"># @File  : 02应用程序参数.py</span>\n<span class=\"token comment\"># @author: Flyme awei </span>\n<span class=\"token comment\"># @email : 1071505897@qq.com</span>\n<span class=\"token comment\"># @Time  : 2022/7/26 0:25</span>\n\n\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DefaultConfig</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"默认Web项目配置\"\"\"</span>\n    USER <span class=\"token operator\">=</span> <span class=\"token string\">'Flyme awei'</span>\n    PWD <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span>\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span>DefaultConfig<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'USER'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"PWD\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello word!\"</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3638906f9b4c4a19be34294e72f0bd87.png\"/><br/> 这样的好处是可以在项目开发中来继承和重写：</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">MyDevelopmentConfig</span><span class=\"token punctuation\">(</span>DefaultConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tDEBUG<span class=\"token operator\">=</span><span class=\"token boolean\">True</span>\n</code></pre>\n<h2><a id=\"2_230\"></a>2.从配置文件中加载</h2>\n<p>新建一个配置文件<code>setting.py</code> ，这个文件中的内容是： 参数名=参数值 ，比如：<code>PWD = 'root'</code></p>\n<blockquote>\n<p><code>app.config.from_pyfile('setting.py')</code></p>\n</blockquote>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"token comment\"># @File  : setting.py.py</span>\n<span class=\"token comment\"># @author: Flyme awei </span>\n<span class=\"token comment\"># @email : 1071505897@qq.com</span>\n<span class=\"token comment\"># @Time  : 2022/7/26 0:38</span>\n\n\n<span class=\"token comment\"># Web 项目的整个配置文件</span>\nUSER <span class=\"token operator\">=</span> <span class=\"token string\">'Flyme awei'</span>\nPWD <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span>\n\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"token comment\"># @File  : 02从配置对象中加载.py</span>\n<span class=\"token comment\"># @author: Flyme awei </span>\n<span class=\"token comment\"># @email : 1071505897@qq.com</span>\n<span class=\"token comment\"># @Time  : 2022/7/26 0:25</span>\n\n\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_pyfile<span class=\"token punctuation\">(</span><span class=\"token string\">'setting.py'</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'USER'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">\"PWD\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"hello word!\"</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">8080</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\946d60830ade49f5a46fe38bb0575a94.png\"/></p>\n<h2><a id=\"3_276\"></a>3.从环境变量中加载</h2>\n<p>先配置环境变量<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\87ce64945c2c4d8ba6dffd9e1c17ab09.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e1b8d803f97843e79084ca29119d589e.png\"/></p>\n<p><strong>Flask使用环境变量加载配置的本质是通过环境变量值找到配置文件</strong>，再读取配置文件的信息，其使用方式为</p>\n<blockquote>\n<p><code>app.config.from_envvar('环境变量名')</code></p>\n</blockquote>\n<p>环境变量的值为配置文件的绝对路径<br/> 先在终端中执行如下命令</p>\n<blockquote>\n<p><code>export PROJECT_SETTING='~/setting.py</code>’</p>\n</blockquote>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># -*- coding: utf-8 -*-</span>\n<span class=\"token comment\"># @File  : 04从环境变量中加载.py</span>\n<span class=\"token comment\"># @author: Flyme awei </span>\n<span class=\"token comment\"># @email : 1071505897@qq.com</span>\n<span class=\"token comment\"># @Time  : 2022/7/26 0:50</span>\n\n\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\napp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_envvar<span class=\"token punctuation\">(</span><span class=\"token string\">'SETTING_PATH'</span><span class=\"token punctuation\">,</span> silent<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">hello_word</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'USER'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'PWD'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">'hello word'</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token string\">'0.0.0.0'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8888</span><span class=\"token punctuation\">,</span> debug<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    \n</code></pre>\n<p><code>silent</code>参数：<br/> <code>False</code> 表示不安静的处理，没有值时报错通知，默认为False<br/> <code>True</code> 表示安静的处理，即时没有值也让Flask正常的运行下去</p>\n<h2><a id=\"4Pycharm_321\"></a>4.从Pycharm中的运行时设置环境变量的方式加载</h2>\n<p>使用非常少<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f95b5c54492f4d3893c262db39a85a34.png\"/><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\62be4127552148d991ff724048bcc2bc.png\"/></p>\n<h2><a id=\"5_326\"></a>5.企业项目开发常用的方式</h2>\n<p>使用工厂模式创建Flask app，并结合使用配置对象与环境变量加载配置</p>\n<ul><li>使用配置对象加载默认配置</li><li>使用环境变量加载不想出现在代码中的敏感配置信息</li></ul>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">create_flask_app</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t<span class=\"token triple-quoted-string string\">\"\"\" 创建Flask应用 :param config: 配置对象 :return: Flask应用 \"\"\"</span> \n\tapp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span> \n\tapp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span>\n\n\t<span class=\"token comment\"># 从环境变量指向的配置文件中读取的配置信息会覆盖掉从配置对象中加载的同名参数</span>\n\tapp<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_envvar<span class=\"token punctuation\">(</span><span class=\"token string\">\"PROJECT_SETTING\"</span><span class=\"token punctuation\">,</span> silent<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token keyword\">return</span> app \n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DefaultConfig</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t<span class=\"token triple-quoted-string string\">\"\"\"默认配置\"\"\"</span> \n\tUSER <span class=\"token operator\">=</span> <span class=\"token string\">'ROOT'</span> \n\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">DevelopmentConfig</span><span class=\"token punctuation\">(</span>DefaultConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\tDEBUG<span class=\"token operator\">=</span><span class=\"token boolean\">True</span> \n\n\n<span class=\"token comment\"># app = create_flask_app(DefaultConfig)</span>\napp <span class=\"token operator\">=</span> create_flask_app<span class=\"token punctuation\">(</span>DevelopmentConfig<span class=\"token punctuation\">)</span> \n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span> \n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> \n\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'USER'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token keyword\">return</span> <span class=\"token string\">\"hello world\"</span>\n</code></pre>\n<hr/>\n<h3><a id=\"__363\"></a><strong><code>推 荐:牛客题霸-经典高频面试题库</code></strong></h3>\n<blockquote>\n<p>🌐 <code>找工作神器-|笔试题库|面试经验|大厂面试题</code> 👉 <a href=\"https://www.nowcoder.com/link/pc_csdncpt_flyme_python\">点击链接进行注册学习</a><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\aaef9c2e56aa4b749b1abfac5cae1b44.png\"/></p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-08-20 16:25:04", "summary": "在这里插入图片描述个人主页个主页作者简介：领域新星创作者。系列专栏：《在线编程篇》希望大家多多支持一起进步呀！如果文章对你有帮助的话，欢迎评论点赞收藏加关注牛客题库《在线编程篇》的学习还是得基础知识自"}