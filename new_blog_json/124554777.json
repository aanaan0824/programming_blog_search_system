{"blogid": "124554777", "writerAge": "ç é¾„2å¹´", "writerBlogNum": "84", "writerCollect": "454", "writerComment": "34", "writerFan": "211", "writerGrade": "4çº§", "writerIntegral": "1106", "writerName": "NeverOW", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124554777.jpg", "writerRankTotal": "28468", "writerRankWeekly": "280688", "writerThumb": "234", "writerVisitNum": "56098", "blog_read_count": "4968", "blog_time": "äºÂ 2022-05-03 14:18:49Â å‘å¸ƒ", "blog_title": "Redisäº”ç§åŸºæœ¬æ•°æ®ç±»å‹", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_2\"></a>äº”ç§åŸºæœ¬æ•°æ®ç±»å‹</h1>\n<blockquote>\n<p><mark><strong>redisæ— è®ºä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œåœ¨æ•°æ®åº“ä¸­éƒ½æ˜¯ä»¥key-valueå½¢å¼ä¿å­˜ï¼Œå¹¶ä¸”æ‰€æœ‰çš„key(é”®)éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è®¨è®ºåŸºç¡€æ•°æ®ç»“æ„éƒ½æ˜¯è®¨è®ºçš„valueå€¼çš„æ•°æ®ç±»å‹</strong></mark></p>\n</blockquote>\n<p>ä¸»è¦åŒ…æ‹¬å¸¸è§çš„<strong>5ç§</strong>æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>Stringã€Listã€Setã€Zsetã€Hash</strong>ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\bcd02851b63041d7b324b15e24bc5735.png\"/></p>\n<table><thead><tr><th>ç»“æ„ç±»å‹</th><th>ç»“æ„å­˜å‚¨çš„å€¼</th><th>ç»“æ„çš„è¯»å†™èƒ½åŠ›</th></tr></thead><tbody><tr><td><strong>Stringå­—ç¬¦ä¸²</strong></td><td>å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•´æ•°æˆ–æµ®ç‚¹æ•°</td><td>å¯¹æ•´ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ“ä½œï¼›å¯¹æ•´æ•°æˆ–æµ®ç‚¹æ•°è¿›è¡Œè‡ªå¢æˆ–è‡ªå‡æ“ä½œï¼›</td></tr><tr><td><strong>Liståˆ—è¡¨</strong></td><td>ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸Šçš„æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²</td><td>å¯¹é“¾è¡¨çš„ä¸¤ç«¯è¿›è¡Œpushå’Œpopæ“ä½œï¼Œè¯»å–å•ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼›æ ¹æ®å€¼æŸ¥æ‰¾æˆ–åˆ é™¤å…ƒç´ ï¼›</td></tr><tr><td><strong>Seté›†åˆ</strong></td><td>åŒ…å«å­—ç¬¦ä¸²çš„æ— åºé›†åˆ</td><td>å­—ç¬¦ä¸²çš„é›†åˆï¼ŒåŒ…å«åŸºç¡€çš„æ–¹æ³•æœ‰çœ‹æ˜¯å¦å­˜åœ¨æ·»åŠ ã€è·å–ã€åˆ é™¤ï¼›è¿˜åŒ…å«è®¡ç®—äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰</td></tr><tr><td><strong>Hashæ•£åˆ—</strong></td><td>åŒ…å«é”®å€¼å¯¹çš„æ— åºæ•£åˆ—è¡¨</td><td>åŒ…å«æ–¹æ³•æœ‰æ·»åŠ ã€è·å–ã€åˆ é™¤å•ä¸ªå…ƒç´ </td></tr><tr><td><strong>Zsetæœ‰åºé›†åˆ</strong></td><td>å’Œæ•£åˆ—ä¸€æ ·ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹</td><td>å­—ç¬¦ä¸²æˆå‘˜ä¸æµ®ç‚¹æ•°åˆ†æ•°ä¹‹é—´çš„æœ‰åºæ˜ å°„ï¼›å…ƒç´ çš„æ’åˆ—é¡ºåºç”±åˆ†æ•°çš„å¤§å°å†³å®šï¼›åŒ…å«æ–¹æ³•æœ‰æ·»åŠ ã€è·å–ã€åˆ é™¤å•ä¸ªå…ƒç´ ä»¥åŠæ ¹æ®åˆ†å€¼èŒƒå›´æˆ–æˆå‘˜æ¥è·å–å…ƒç´ </td></tr></tbody></table>\n<h2><a id=\"String_25\"></a>Stringå­—ç¬¦ä¸²</h2>\n<h3><a id=\"_27\"></a>ç®€ä»‹</h3>\n<p>Stringæ˜¯redisæœ€åŸºæœ¬çš„ç±»å‹ï¼Œä¸€ä¸ªkeyå¯¹åº”ä¸€ä¸ªvalueã€‚</p>\n<ul><li>Stringç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œæ„æ€æ˜¯redisçš„stringå¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ï¼Œæ¯”å¦‚jpgå›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚</li><li>Stringç±»å‹æ˜¯redisæœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ªredisä¸­å­—ç¬¦ä¸²valueæœ€å¤šå¯ä»¥æ˜¯512M</li></ul>\n<h3><a id=\"_36\"></a>å‘½ä»¤</h3>\n<p>åŸºæœ¬æ“ä½œ</p>\n<ul><li><code>set (key) (value)</code>ï¼šè®¾ç½®é”®å€¼å¯¹</li><li><code>setnx (key) (value)</code>ï¼šé˜²æ­¢è¦†ç›–ï¼Œè®¾ç½®é”®å€¼å¯¹ï¼Œ \n  <ul><li>å¦‚æœkeyä¸å­˜åœ¨å°±è®¾ç½®ï¼Œè¿”å›1</li><li>å¦‚æœkeyå·²ç»å­˜åœ¨å°±ä¸è®¾ç½®ï¼Œè¿”å›0</li></ul> </li><li><code>get(key)</code>ï¼šè·å–keyå¯¹åº”çš„value</li><li><code>getset (key) (value) </code>ï¼šå…ˆgetå†setï¼Œè¿”å›æ—§å€¼ï¼Œå¦‚æœæ²¡æœ‰æ—§å€¼è¿”å›nil</li><li><code>append (key) (value)</code>ï¼šå‘æŒ‡å®šçš„keyçš„valueåè¿½åŠ å­—ç¬¦ä¸²</li><li><code>del (key) </code>ï¼šåˆ é™¤key</li><li><code>strlen (key)</code>ï¼šè·å–keyå¯¹åº”å€¼çš„å­—ç¬¦ä¸²é•¿åº¦</li></ul>\n<hr/>\n<p>æ•°å­—valueçš„åŠ å‡</p>\n<ul><li><code>incr (key) </code>ï¼švalue + 1</li><li><code>decr (key)</code> ï¼švalue - 1</li><li><code>incrby (key) (number)</code>ï¼švalue + number</li><li><code>decrby (key) (number)</code>ï¼švalue - number</li></ul>\n<hr/>\n<p>è·å–æˆ–è€…è®¾ç½®æŒ‡å®šèŒƒå›´å†…çš„å€¼</p>\n<ul><li><code>getrange (key) (begin) (end) </code>ï¼šè·å–[begin,end]ä¸‹æ ‡èŒƒå›´å†…çš„å€¼ï¼Œå¦‚æœæ˜¯(0,1)å°±æ˜¯è·å–æ‰€æœ‰å€¼</li><li><code>setrange (key) (begin) (xxxx) </code>ï¼šä»beginä¸‹æ ‡å¼€å§‹è®¾ç½®xxxå€¼ï¼Œå°†åŸæœ‰çš„æ›¿æ¢æ‰</li></ul>\n<hr/>\n<p>è®¾ç½®é”®å€¼è¿‡æœŸæ—¶é—´</p>\n<ul><li><code>setex (key) (seconds) expire</code>ï¼šè®¾ç½®é”®è¿‡æœŸæ—¶é—´</li><li><code>ttl (key) </code>ï¼šæŸ¥çœ‹keyå‰©ä½™å­˜æ´»æ—¶é—´</li></ul>\n<hr/>\n<p>åŒæ—¶è®¾ç½®æˆ–è·å–å¤šä¸ªkey-value</p>\n<ul><li><code>met (key1) (value1) (key2) (value2)</code>ï¼šç”¨äºåŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹</li><li><code>mget (key1) (key2) </code>ï¼šè¿”å›æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼ï¼ˆå¦‚æœæŸä¸ªkeyä¸å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„keyè¿”å›nullï¼‰</li><li><code>msetnx(key1) (value1) (key2) (value2)</code>ï¼šå½“æ‰€æœ‰ key éƒ½æˆåŠŸè®¾ç½®ï¼Œè¿”å› 1 ã€‚ å¦‚æœæœ‰ä¸€ä¸ªkeyè®¾ç½®å¤±è´¥ï¼Œæ‰€æœ‰çš„keyè®¾ç½®éƒ½ä¼šå¤±è´¥ï¼Œè¿”å› 0 ã€‚<strong><mark>åŸå­æ“ä½œ</mark></strong></li></ul>\n<h3><a id=\"_85\"></a>ä½¿ç”¨åœºæ™¯</h3>\n<p><strong>å®æˆ˜åœºæ™¯</strong></p>\n<ul><li><strong>ç¼“å­˜</strong>ï¼š ç»å…¸ä½¿ç”¨åœºæ™¯ï¼ŒæŠŠå¸¸ç”¨ä¿¡æ¯ï¼Œå­—ç¬¦ä¸²ï¼Œå›¾ç‰‡æˆ–è€…è§†é¢‘ç­‰ä¿¡æ¯æ”¾åˆ°redisä¸­ï¼Œredisä½œä¸ºç¼“å­˜å±‚ï¼ŒmysqlåšæŒä¹…åŒ–å±‚ï¼Œé™ä½mysqlçš„è¯»å†™å‹åŠ›</li><li><strong>è®¡æ•°å™¨</strong>ï¼šredisæ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå®Œæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªï¼ŒåŒæ—¶æ•°æ®å¯ä»¥ä¸€æ­¥è½åœ°åˆ°å…¶ä»–çš„æ•°æ®æºã€‚</li><li><strong>session</strong>ï¼šå¸¸è§æ–¹æ¡ˆspring session + rediså®ç°sessionå…±äº«ï¼Œ</li></ul>\n<h3><a id=\"_97\"></a>ç¼–ç ä¸åº•å±‚ç»“æ„</h3>\n<p>å­—ç¬¦ä¸²æ˜¯Redisæœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸ä»…æ‰€æœ‰keyéƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œå…¶å®ƒå‡ ç§æ•°æ®ç±»å‹æ„æˆçš„å…ƒç´ ä¹Ÿæ˜¯å­—ç¬¦ä¸²ã€‚æ³¨æ„å­—ç¬¦ä¸²çš„é•¿åº¦ä¸èƒ½è¶…è¿‡512Mã€‚</p>\n<h4><a id=\"_103\"></a><strong>ç¼–ç </strong></h4>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-hYsLFl0o-1651558697727)(Redis.assets/image-20220106194438014.png)]</p>\n<p>å­—ç¬¦ä¸²å¯¹è±¡çš„ç¼–ç å¯ä»¥æ˜¯<code>int</code>ï¼Œ<code>raw</code>æˆ–è€…<code>embstr</code>ã€‚</p>\n<ol><li><code>int ç¼–ç </code>ï¼šä¿å­˜çš„æ˜¯å¯ä»¥ç”¨ long ç±»å‹è¡¨ç¤ºçš„æ•´æ•°å€¼</li><li><code>embstr ç¼–ç </code>ï¼šä¿å­˜<strong>é•¿åº¦å°äº44å­—èŠ‚</strong>çš„<strong>çŸ­å­—ç¬¦ä¸²</strong>ï¼ˆredis3.2ç‰ˆæœ¬ä¹‹å‰æ˜¯39å­—èŠ‚ï¼Œä¹‹åæ˜¯44å­—èŠ‚ï¼‰</li></ol>\n<ul><li>å¯¹å…¶è¿›è¡Œä¿®æ”¹åå˜æˆrawç¼–ç ï¼Œæ— è®ºæ˜¯å¦è¾¾åˆ°44å­—èŠ‚</li></ul>\n<ol start=\"3\"><li><code>raw ç¼–ç </code>ï¼šä¿å­˜<strong>é•¿åº¦å¤§äº44å­—èŠ‚</strong>çš„<strong>é•¿å­—ç¬¦ä¸²</strong>ï¼ˆredis3.2ç‰ˆæœ¬ä¹‹å‰æ˜¯39å­—èŠ‚ï¼Œä¹‹åæ˜¯44å­—èŠ‚ï¼‰</li></ol>\n<img alt=\"img\" src=\"..\\..\\static\\image\\db-redis-x-object-4.png\"/>\n<h4><a id=\"_120\"></a><strong>å†…å­˜å¸ƒå±€</strong></h4>\n<p>å­—ç¬¦ä¸²å¯¹è±¡æ”¯æŒä¸‰ç§ç¼–ç æ–¹å¼: RAW, INT, EMBSTR, ä¸‰ç§æ–¹å¼çš„å†…å­˜å¸ƒå±€åˆ†åˆ«å¦‚ä¸‹:</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-SBpOnVpM-1651558697728)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-21.png)]</p>\n<blockquote>\n<p>ğŸ”Š <strong>raw å’Œ embstr çš„åŒºåˆ«</strong></p>\n</blockquote>\n<p>å…¶å® embstr ç¼–ç æ˜¯ä¸“é—¨ç”¨æ¥ä¿å­˜çŸ­å­—ç¬¦ä¸²çš„ä¸€ç§ä¼˜åŒ–ç¼–ç ï¼Œ</p>\n<p>embsträ¸rawéƒ½ä½¿ç”¨redisObjectå’Œsdsä¿å­˜æ•°æ®ï¼Œ</p>\n<ul><li>embstrçš„ä½¿ç”¨åªåˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ï¼ˆå› æ­¤redisObjectå’Œsdsæ˜¯è¿ç»­çš„ï¼‰</li><li>rawéœ€è¦åˆ†é…ä¸¤æ¬¡å†…å­˜ç©ºé—´ï¼ˆåˆ†åˆ«ä¸ºredisObjectå’Œsdsåˆ†é…ç©ºé—´ï¼‰</li></ul>\n<p>åªåˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´çš„<strong>å¥½å¤„æ˜¯</strong>ï¼Œåˆ›å»ºæ—¶å°‘åˆ†é…ä¸€æ¬¡ç©ºé—´ï¼Œåˆ é™¤æ—¶å°‘é‡Šæ”¾ä¸€æ¬¡ç©ºé—´ï¼Œä»¥åŠå¯¹è±¡çš„æ‰€æœ‰æ•°æ®è¿åœ¨ä¸€èµ·ï¼Œå¯»æ‰¾æ–¹ä¾¿ã€‚</p>\n<p>è€Œembstrçš„<strong>åå¤„ä¹Ÿå¾ˆæ˜æ˜¾</strong>ï¼Œå¦‚æœ<strong>å­—ç¬¦ä¸²çš„é•¿åº¦å¢åŠ éœ€è¦é‡æ–°åˆ†é…å†…å­˜æ—¶</strong>ï¼Œæ•´ä¸ª<mark>redisObjectå’Œsdséƒ½éœ€è¦é‡æ–°åˆ†é…ç©ºé—´</mark>ï¼Œ<strong><mark>å› æ­¤redisä¸­çš„embstrå®ç°ä¸ºåªè¯»ã€‚</mark></strong></p>\n<blockquote>\n<p>ğŸ’¬ <strong>ç¼–ç çš„è½¬æ¢</strong></p>\n</blockquote>\n<ul><li>å½“ int ç¼–ç ä¿å­˜çš„å€¼ä¸å†æ˜¯æ•´æ•°ï¼Œæˆ–å¤§å°è¶…è¿‡äº†longçš„èŒƒå›´æ—¶ï¼Œè‡ªåŠ¨è½¬åŒ–ä¸ºrawã€‚</li><li>å¯¹äº embstr ç¼–ç ï¼Œç”±äº Redis æ²¡æœ‰å¯¹å…¶ç¼–å†™ä»»ä½•çš„ä¿®æ”¹ç¨‹åºï¼ˆ<mark>embstr æ˜¯åªè¯»çš„</mark>ï¼‰ï¼Œåœ¨<strong>å¯¹embstrå¯¹è±¡è¿›è¡Œä¿®æ”¹æ—¶ï¼Œéƒ½ä¼šå…ˆè½¬åŒ–ä¸ºrawå†è¿›è¡Œä¿®æ”¹</strong>ï¼Œå› æ­¤==<strong>ï¼Œåªè¦æ˜¯ä¿®æ”¹embstrå¯¹è±¡ï¼Œä¿®æ”¹åçš„å¯¹è±¡ä¸€å®šæ˜¯rawçš„ï¼Œæ— è®ºæ˜¯å¦è¾¾åˆ°äº†44ä¸ªå­—èŠ‚ã€‚</strong>==</li></ul>\n<h2><a id=\"List_150\"></a>Liståˆ—è¡¨</h2>\n<h3><a id=\"_152\"></a>ç®€ä»‹</h3>\n<p>Redisä¸­çš„Listå…¶å®å°±æ˜¯<strong>åŒç«¯é“¾è¡¨</strong></p>\n<ul><li>ä½¿ç”¨Listç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å®ç°æœ€æ–°æ¶ˆæ¯æ’é˜ŸåŠŸèƒ½ï¼ˆæ¯”å¦‚æ–°æµªå¾®åšçš„TimeLineï¼‰ã€‚Listçš„å¦ä¸€ä¸ªåº”ç”¨å°±æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥åˆ©ç”¨Listçš„ PUSH æ“ä½œï¼Œå°†ä»»åŠ¡å­˜æ”¾åœ¨Listä¸­ï¼Œç„¶åå·¥ä½œçº¿ç¨‹å†ç”¨ POP æ“ä½œå°†ä»»åŠ¡å–å‡ºè¿›è¡Œæ‰§è¡Œã€‚</li><li>Redisè¿˜æä¾›äº†æ“ä½œListä¸­æŸä¸€æ®µçš„apiï¼Œä½ å¯ä»¥ç›´æ¥æŸ¥è¯¢ï¼Œåˆ  é™¤Listä¸­æŸä¸€æ®µçš„å…ƒç´ ã€‚</li><li>ä½¿ç”¨åˆ—è¡¨çš„æŠ€å·§ \n  <ul><li>lpush+lpop=Stack(æ ˆ)</li><li>lpush+rpop=Queueï¼ˆé˜Ÿåˆ—ï¼‰</li><li>lpush+ltrim=Capped Collectionï¼ˆæœ‰é™é›†åˆï¼‰</li><li>lpush+brpop=Message Queueï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li></ul> </li></ul>\n<p><strong>å‘½ä»¤ä½¿ç”¨</strong></p>\n<table><thead><tr><th>å‘½ä»¤</th><th>ç®€è¿°</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>RPUSH</td><td>å°†ç»™å®šå€¼æ¨å…¥åˆ°åˆ—è¡¨å³ç«¯</td><td>RPUSH key value</td></tr><tr><td>LPUSH</td><td>å°†ç»™å®šå€¼æ¨å…¥åˆ°åˆ—è¡¨å·¦ç«¯</td><td>LPUSH key value</td></tr><tr><td>RPOP</td><td>ä»åˆ—è¡¨çš„å³ç«¯å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¢«å¼¹å‡ºçš„å€¼</td><td>RPOP key</td></tr><tr><td>LPOP</td><td>ä»åˆ—è¡¨çš„å·¦ç«¯å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå¹¶è¿”å›è¢«å¼¹å‡ºçš„å€¼</td><td>LPOP key</td></tr><tr><td>LRANGE</td><td>è·å–åˆ—è¡¨åœ¨ç»™å®šèŒƒå›´ä¸Šçš„æ‰€æœ‰å€¼</td><td>LRANGE key 0 -1</td></tr><tr><td>LINDEX</td><td>é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ -2 è¡¨ç¤ºåˆ—è¡¨çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚</td><td>LINEX key index</td></tr></tbody></table>\n<h3><a id=\"_185\"></a>å‘½ä»¤æµ‹è¯•</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># Lpushï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨ã€‚ï¼ˆå·¦ï¼‰</span>\n<span class=\"token comment\"># rpushï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å°¾éƒ¨ã€‚ï¼ˆå³ï¼‰</span>\n<span class=\"token comment\"># lrangeï¼šè¿”å›åˆ—è¡¨ä¸­æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼ŒåŒºé—´ä»¥åç§»é‡ START å’Œ END æŒ‡å®šã€‚</span>\n<span class=\"token comment\"># å…¶ä¸­ 0 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ 1 è¡¨ç¤ºåˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚</span>\n<span class=\"token comment\"># ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨è´Ÿæ•°ä¸‹æ ‡ï¼Œä»¥ -1 è¡¨ç¤ºåˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ -2 è¡¨ç¤ºåˆ—è¡¨çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä»¥æ­¤</span>\nç±»æ¨ã€‚\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> LPUSH list <span class=\"token string\">\"one\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> LPUSH list <span class=\"token string\">\"two\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> RPUSH list <span class=\"token string\">\"right\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lrange list <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"two\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"right\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lrange list <span class=\"token number\">0</span> <span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"two\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># lpop å‘½ä»¤ç”¨äºç§»é™¤å¹¶è¿”å›åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚å½“åˆ—è¡¨ key ä¸å­˜åœ¨æ—¶ï¼Œè¿”å› nil ã€‚</span>\n<span class=\"token comment\"># rpop ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›å€¼ä¸ºç§»é™¤çš„å…ƒç´ ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lpop list\n<span class=\"token string\">\"two\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Rpop list\n<span class=\"token string\">\"right\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lrange list <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># Lindexï¼ŒæŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å¾—å…ƒç´ ï¼ˆ-1ä»£è¡¨æœ€åä¸€ä¸ªï¼Œ0ä»£è¡¨æ˜¯ç¬¬ä¸€ä¸ªï¼‰</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lindex list <span class=\"token number\">1</span>\n<span class=\"token punctuation\">(</span>nil<span class=\"token punctuation\">)</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lindex list <span class=\"token number\">0</span>\n<span class=\"token string\">\"one\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lindex list <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token string\">\"one\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># llen ç”¨äºè¿”å›åˆ—è¡¨çš„é•¿åº¦ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> flushdb\nOK\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lpush list <span class=\"token string\">\"one\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lpush list <span class=\"token string\">\"two\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lpush list <span class=\"token string\">\"three\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Llen list <span class=\"token comment\"># è¿”å›åˆ—è¡¨çš„é•¿åº¦</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># lrem key æ ¹æ®å‚æ•° COUNT çš„å€¼ï¼Œç§»é™¤åˆ—è¡¨ä¸­ä¸å‚æ•° VALUE ç›¸ç­‰çš„å…ƒç´ ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrem list <span class=\"token number\">1</span> <span class=\"token string\">\"two\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> Lrange list <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"three\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># Ltrim key å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒº</span>\né—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"hello2\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"hello3\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">4</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ltrim mylist <span class=\"token number\">1</span> <span class=\"token number\">2</span>\nOK\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrange mylist <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello2\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># rpoplpush ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> rpush mylist <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> rpush mylist <span class=\"token string\">\"foo\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> rpush mylist <span class=\"token string\">\"bar\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> rpoplpush mylist myotherlist\n<span class=\"token string\">\"bar\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrange mylist <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"foo\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrange myotherlist <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"bar\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># lset key index value å°†åˆ—è¡¨ key ä¸‹æ ‡ä¸º index çš„å…ƒç´ çš„å€¼è®¾ç½®ä¸º value ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">exists</span> list <span class=\"token comment\"># å¯¹ç©ºåˆ—è¡¨(key ä¸å­˜åœ¨)è¿›è¡Œ LSET</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lset list <span class=\"token number\">0</span> item <span class=\"token comment\"># æŠ¥é”™</span>\n<span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> ERR <span class=\"token keyword\">no</span> such <span class=\"token keyword\">key</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lpush list <span class=\"token string\">\"value1\"</span> <span class=\"token comment\"># å¯¹éç©ºåˆ—è¡¨è¿›è¡Œ LSET</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrange list <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"value1\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lset list <span class=\"token number\">0</span> <span class=\"token string\">\"new\"</span> <span class=\"token comment\"># æ›´æ–°å€¼</span>\nOK\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lrange list <span class=\"token number\">0</span> <span class=\"token number\">0</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"new\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> lset list <span class=\"token number\">1</span> <span class=\"token string\">\"new\"</span> <span class=\"token comment\"># index è¶…å‡ºèŒƒå›´æŠ¥é”™</span>\n<span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> ERR <span class=\"token keyword\">index</span> <span class=\"token keyword\">out</span> <span class=\"token keyword\">of</span> range\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># linsert key before/after pivot value ç”¨äºåœ¨åˆ—è¡¨çš„å…ƒç´ å‰æˆ–è€…åæ’å…¥å…ƒç´ ã€‚</span>\n<span class=\"token comment\"># å°†å€¼ value æ’å…¥åˆ°åˆ—è¡¨ key å½“ä¸­ï¼Œä½äºå€¼ pivot ä¹‹å‰æˆ–ä¹‹åã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\nredis<span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"Hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\nredis<span class=\"token operator\">&gt;</span> RPUSH mylist <span class=\"token string\">\"World\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\nredis<span class=\"token operator\">&gt;</span> LINSERT mylist BEFORE <span class=\"token string\">\"World\"</span> <span class=\"token string\">\"There\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\nredis<span class=\"token operator\">&gt;</span> LRANGE mylist <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"Hello\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"There\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"World\"</span>\n\n</code></pre>\n<h3><a id=\"_320\"></a>ä½¿ç”¨åœºæ™¯</h3>\n<ul><li><strong>å¾®åšTimeLine</strong>: æœ‰äººå‘å¸ƒå¾®åšï¼Œç”¨lpushåŠ å…¥æ—¶é—´è½´ï¼Œå±•ç¤ºæ–°çš„åˆ—è¡¨ä¿¡æ¯ã€‚</li><li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong></li></ul>\n<h3><a id=\"_327\"></a>ç¼–ç ä¸åº•å±‚ç»“æ„</h3>\n<p>list åˆ—è¡¨ï¼Œå®ƒæ˜¯ç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªå…ƒç´ åˆ°åˆ—è¡¨çš„å¤´éƒ¨ï¼ˆå·¦è¾¹ï¼‰æˆ–è€…å°¾éƒ¨ï¼ˆå³è¾¹ï¼‰ï¼Œå®ƒçš„åº•å±‚å®é™…ä¸Šæ˜¯ä¸ªé“¾è¡¨ç»“æ„ã€‚</p>\n<h4><a id=\"_333\"></a><strong>ç¼–ç </strong></h4>\n<p>åˆ—è¡¨å¯¹è±¡çš„ç¼–ç æ˜¯<code>quicklist</code>ã€‚ (ä¹‹å‰ç‰ˆæœ¬ä¸­æœ‰linkedå’Œziplistè¿™ä¸¤ç§ç¼–ç )</p>\n<h4><a id=\"_339\"></a><strong>å†…å­˜å¸ƒå±€</strong></h4>\n<p>åˆ—è¡¨å¯¹è±¡çš„å†…å­˜å¸ƒå±€å¦‚ä¸‹å›¾æ‰€ç¤º:</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-oLjbplpy-1651558697729)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-22.png)]</p>\n<h2><a id=\"Set_347\"></a>Seté›†åˆ</h2>\n<h3><a id=\"_349\"></a>ç®€ä»‹</h3>\n<p>Redis çš„ Set æ˜¯ String ç±»å‹çš„<strong>æ— åºé›†åˆ</strong>ã€‚</p>\n<ul><li>é›†åˆæˆå‘˜æ˜¯**<mark>ä¸å¯é‡å¤çš„</mark>**</li><li>Redis ä¸­é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)</li></ul>\n<p><strong>ä½¿ç”¨åœºæ™¯</strong></p>\n<ul><li><strong>æ ‡ç­¾</strong>ï¼ˆtagï¼‰,ç»™ç”¨æˆ·æ·»åŠ æ ‡ç­¾ï¼Œæˆ–è€…ç”¨æˆ·ç»™æ¶ˆæ¯æ·»åŠ æ ‡ç­¾ï¼Œè¿™æ ·æœ‰åŒä¸€æ ‡ç­¾æˆ–è€…ç±»ä¼¼æ ‡ç­¾çš„å¯ä»¥ç»™æ¨èå…³æ³¨çš„äº‹æˆ–è€…å…³æ³¨çš„äººã€‚</li><li><strong>ç‚¹èµï¼Œæˆ–ç‚¹è¸©ï¼Œæ”¶è—ç­‰</strong>ï¼Œå¯ä»¥æ”¾åˆ°setä¸­å®ç°</li></ul>\n<p><strong>å‘½ä»¤ä½¿ç”¨</strong></p>\n<table><thead><tr><th>å‘½ä»¤</th><th>ç®€è¿°</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>SADD</td><td>å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td><td>SADD key value</td></tr><tr><td>SCARD</td><td>è·å–é›†åˆçš„æˆå‘˜æ•°</td><td>SCARD key</td></tr><tr><td>SMEMBER</td><td>è¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</td><td>SMEMBER key member</td></tr><tr><td>SISMEMBER</td><td>åˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜</td><td>SISMEMBER key member</td></tr></tbody></table>\n<h3><a id=\"_376\"></a>æµ‹è¯•å‘½ä»¤</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># sadd å°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å…ƒç´ åŠ å…¥åˆ°é›†åˆä¸­ï¼Œä¸èƒ½é‡å¤</span>\n<span class=\"token comment\"># smembers è¿”å›é›†åˆä¸­çš„æ‰€æœ‰çš„æˆå‘˜ã€‚</span>\n<span class=\"token comment\"># sismember å‘½ä»¤åˆ¤æ–­æˆå‘˜å…ƒç´ æ˜¯å¦æ˜¯é›†åˆçš„æˆå‘˜ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SISMEMBER myset <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SISMEMBER myset <span class=\"token string\">\"world\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># scardï¼Œè·å–é›†åˆé‡Œé¢çš„å…ƒç´ ä¸ªæ•°</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> scard myset\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># srem key value ç”¨äºç§»é™¤é›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å…ƒç´ </span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> srem myset <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># srandmember key å‘½ä»¤ç”¨äºè¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"world\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SRANDMEMBER myset\n<span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SRANDMEMBER myset <span class=\"token number\">2</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"world\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SRANDMEMBER myset <span class=\"token number\">2</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># spop key ç”¨äºç§»é™¤é›†åˆä¸­çš„æŒ‡å®š key çš„ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºå…ƒç´ </span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"world\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> spop myset\n<span class=\"token string\">\"world\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> spop myset\n<span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> spop myset\n<span class=\"token string\">\"hello\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># smove SOURCE DESTINATION MEMBER</span>\n<span class=\"token comment\"># å°†æŒ‡å®šæˆå‘˜ member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"world\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd myset2 <span class=\"token string\">\"set2\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> smove myset myset2 <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"world\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SMEMBERS myset2\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"set2\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token operator\">-</span> æ•°å­—é›†åˆç±»\n<span class=\"token operator\">-</span> å·®é›†ï¼š sdiff\n<span class=\"token operator\">-</span> äº¤é›†ï¼š sinter\n<span class=\"token operator\">-</span> å¹¶é›†ï¼š sunion\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key1 <span class=\"token string\">\"a\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key1 <span class=\"token string\">\"b\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key1 <span class=\"token string\">\"c\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key2 <span class=\"token string\">\"c\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key2 <span class=\"token string\">\"d\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> sadd key2 <span class=\"token string\">\"e\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SDIFF key1 key2 <span class=\"token comment\"># å·®é›†</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"a\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"b\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SINTER key1 key2 <span class=\"token comment\"># äº¤é›†</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"c\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> SUNION key1 key2 <span class=\"token comment\"># å¹¶é›†</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"a\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"b\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"c\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"e\"</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"d\"</span>\n</code></pre>\n<h3><a id=\"_496\"></a>ç¼–ç ä¸åº•å±‚ç»“æ„</h3>\n<p>é›†åˆå¯¹è±¡ set æ˜¯ string ç±»å‹ï¼ˆæ•´æ•°ä¹Ÿä¼šè½¬æ¢æˆstringç±»å‹è¿›è¡Œå­˜å‚¨ï¼‰çš„æ— åºé›†åˆã€‚</p>\n<blockquote>\n<p>âš¡ï¸ æ³¨æ„é›†åˆå’Œåˆ—è¡¨çš„åŒºåˆ«ï¼š</p>\n</blockquote>\n<ul><li>é›†åˆä¸­çš„å…ƒç´ æ˜¯<strong>æ— åºçš„</strong>ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡ç´¢å¼•æ¥æ“ä½œå…ƒç´ ï¼›</li><li>é›†åˆä¸­çš„å…ƒç´ <strong>ä¸èƒ½é‡å¤</strong></li></ul>\n<h4><a id=\"_507\"></a><strong>ç¼–ç </strong></h4>\n<p>é›†åˆå¯¹è±¡çš„ç¼–ç å¯ä»¥æ˜¯ intset æˆ–è€… hashtable;</p>\n<h4><a id=\"_511\"></a>åº•å±‚ç»“æ„</h4>\n<p>å¯¹åº”çš„åº•å±‚å®ç°åˆ†åˆ«æ˜¯intsetå’Œdict</p>\n<ul><li>æ˜¾ç„¶å½“<strong>ä½¿ç”¨intset</strong>ä½œä¸ºåº•å±‚å®ç°çš„æ•°æ®ç»“æ„æ—¶, <strong>é›†åˆä¸­å­˜å‚¨çš„åªèƒ½æ˜¯æ•°å€¼æ•°æ®, ä¸”å¿…é¡»æ˜¯æ•´æ•°</strong>;</li><li>å½“<strong>ä½¿ç”¨dict</strong>ä½œä¸ºé›†åˆå¯¹è±¡çš„åº•å±‚å®ç°æ—¶, æ˜¯å°†<strong>æ•°æ®å…¨éƒ¨å­˜å‚¨äºdictçš„é”®ä¸­</strong>, å€¼å­—æ®µé—²ç½®ä¸ç”¨.</li></ul>\n<p>é›†åˆå¯¹è±¡çš„å†…å­˜å¸ƒå±€å¦‚ä¸‹å›¾æ‰€ç¤º:</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-n5Pm9bPW-1651558697730)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-24.png)]</p>\n<ul><li><strong>ä¸¾ä¾‹è¯´æ˜</strong></li></ul>\n<pre><code class=\"prism language-bash\">SADD numbers <span class=\"token number\">1</span> <span class=\"token number\">3</span> <span class=\"token number\">5</span>\n</code></pre>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-fXkGnKx0-1651558697731)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-11.png)]</p>\n<pre><code class=\"prism language-bash\">SADD Dfruits <span class=\"token string\">\"apple\"</span> <span class=\"token string\">\"banana\"</span> <span class=\"token string\">\"cherry\"</span>\n</code></pre>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-S9YFxiAr-1651558697733)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-12.png)]</p>\n<h4><a id=\"_542\"></a><strong>ç¼–ç è½¬æ¢</strong></h4>\n<p>å½“é›†åˆåŒæ—¶æ»¡è¶³ä»¥ä¸‹<strong>ä¸¤ä¸ªæ¡ä»¶</strong>æ—¶ï¼Œ<strong>ä½¿ç”¨ <code>intset</code></strong> ç¼–ç ,å¦åˆ™ä½¿ç”¨ <code>hashtable</code> ç¼–ç </p>\n<p>1ã€é›†åˆå¯¹è±¡ä¸­æ‰€æœ‰å…ƒç´ <strong>éƒ½æ˜¯æ•´æ•°</strong></p>\n<p>2ã€é›†åˆå¯¹è±¡æ‰€æœ‰<strong>å…ƒç´ æ•°é‡ä¸è¶…è¿‡512</strong>(å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„ <code>set-max-intset-entries</code> è¿›è¡Œé…ç½®)</p>\n<h2><a id=\"Hash_554\"></a>Hashæ•£åˆ—</h2>\n<h3><a id=\"_556\"></a>ç®€ä»‹</h3>\n<p>Redis hash æ˜¯<strong>ä¸€ä¸ª string ç±»å‹çš„ field(å­—æ®µ) å’Œ value(å±æ€§) çš„æ˜ å°„è¡¨</strong>ï¼Œhash <strong>ç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡</strong>ã€‚</p>\n<p>ä¸€ä¸ªhashå¯ä»¥å­˜å¤šä¸ªkey-valueï¼Œç±»ä¼¼ä¸€ä¸ªå¯¹è±¡çš„å¤šä¸ªå­—æ®µå’Œå±æ€§</p>\n<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>\n<ul><li><strong>ç¼“å­˜</strong>ï¼š èƒ½ç›´è§‚ï¼Œç›¸æ¯”stringæ›´èŠ‚çœç©ºé—´ï¼Œçš„ç»´æŠ¤ç¼“å­˜ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·ä¿¡æ¯ï¼Œè§†é¢‘ä¿¡æ¯ç­‰ã€‚</li></ul>\n<p><strong>å‘½ä»¤ä½¿ç”¨</strong></p>\n<table><thead><tr><th>å‘½ä»¤</th><th>ç®€è¿°</th><th>ä½¿ç”¨</th></tr></thead><tbody><tr><td>HSET</td><td>æ·»åŠ é”®å€¼å¯¹</td><td>HSET hash-key sub-key1 value1</td></tr><tr><td>HGET</td><td>è·å–æŒ‡å®šæ•£åˆ—é”®çš„å€¼</td><td>HGET hash-key key1</td></tr><tr><td>HGETALL</td><td>è·å–æ•£åˆ—ä¸­åŒ…å«çš„æ‰€æœ‰é”®å€¼å¯¹</td><td>HGETALL hash-key</td></tr><tr><td>HDEL</td><td>å¦‚æœç»™å®šé”®å­˜åœ¨äºæ•£åˆ—ä¸­ï¼Œé‚£ä¹ˆå°±ç§»é™¤è¿™ä¸ªé”®</td><td>HDEL hash-key sub-key1</td></tr></tbody></table>\n<h3><a id=\"_589\"></a>æµ‹è¯•å‘½ä»¤</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hsetã€hget å‘½ä»¤ç”¨äºä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µèµ‹å€¼ ã€‚</span>\n<span class=\"token comment\"># hmsetã€hmget åŒæ—¶å°†å¤šä¸ªfield-valueå¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ä¸­ã€‚ä¼šè¦†ç›–å“ˆå¸Œè¡¨ä¸­å·²å­˜åœ¨çš„å­—æ®µã€‚</span>\n<span class=\"token comment\"># hgetall ç”¨äºè¿”å›å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰€æœ‰çš„å­—æ®µå’Œå€¼ã€‚</span>\n<span class=\"token comment\"># hdel ç”¨äºåˆ é™¤å“ˆå¸Œè¡¨ key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šå­—æ®µ</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hset myhash field1 <span class=\"token string\">\"huangkaiyu\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hget myhash field1\n<span class=\"token string\">\"huangkaiyu\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HMSET myhash field1 <span class=\"token string\">\"Hello\"</span> field2 <span class=\"token string\">\"World\"</span>\nOK\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HGET myhash field1\n<span class=\"token string\">\"Hello\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HGET myhash field2\n<span class=\"token string\">\"World\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hgetall myhash\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"field1\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"Hello\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"field2\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"World\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HDEL myhash field1\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hgetall myhash\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"field2\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"World\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hlen è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hlen myhash\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HMSET myhash field1 <span class=\"token string\">\"Hello\"</span> field2 <span class=\"token string\">\"World\"</span>\nOK\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hlen myhash\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hexists æŸ¥çœ‹å“ˆå¸Œè¡¨çš„æŒ‡å®šå­—æ®µæ˜¯å¦å­˜åœ¨ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hexists myhash field1\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hexists myhash field3\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hkeys è·å–å“ˆå¸Œè¡¨ä¸­çš„æ‰€æœ‰åŸŸï¼ˆfieldï¼‰ã€‚</span>\n<span class=\"token comment\"># hvals è¿”å›å“ˆå¸Œè¡¨æ‰€æœ‰åŸŸ(field)çš„å€¼ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HKEYS myhash\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"field2\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"field1\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HVALS myhash\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"World\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"Hello\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hincrby ä¸ºå“ˆå¸Œè¡¨ä¸­çš„å­—æ®µå€¼åŠ ä¸ŠæŒ‡å®šå¢é‡å€¼ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> hset myhash field <span class=\"token number\">5</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HINCRBY myhash field <span class=\"token number\">1</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">6</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HINCRBY myhash field <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">5</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HINCRBY myhash field <span class=\"token operator\">-</span><span class=\"token number\">10</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token number\">5</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># hsetnx ä¸ºå“ˆå¸Œè¡¨ä¸­ä¸å­˜åœ¨çš„çš„å­—æ®µèµ‹å€¼ ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HSETNX myhash field1 <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span> <span class=\"token comment\"># è®¾ç½®æˆåŠŸï¼Œè¿”å› 1 ã€‚</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HSETNX myhash field1 <span class=\"token string\">\"world\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span> <span class=\"token comment\"># å¦‚æœç»™å®šå­—æ®µå·²ç»å­˜åœ¨ï¼Œè¿”å› 0 ã€‚</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> HGET myhash field1\n<span class=\"token string\">\"hello\"</span>\n</code></pre>\n<h3><a id=\"_670\"></a>ç¼–ç ä¸åº•å±‚ç»“æ„</h3>\n<p><strong>å“ˆå¸Œå¯¹è±¡çš„é”®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œå€¼æ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆã€‚</strong></p>\n<h4><a id=\"_674\"></a><strong>ç¼–ç </strong></h4>\n<p>å“ˆå¸Œå¯¹è±¡çš„ç¼–ç å¯ä»¥æ˜¯ <code>ziplist</code> æˆ–è€… <code>hashtable</code>ï¼›</p>\n<h4><a id=\"_678\"></a>åº•å±‚ç»“æ„</h4>\n<p>å¯¹åº”çš„åº•å±‚å®ç°æœ‰ä¸¤ç§, ä¸€ç§æ˜¯<code>ziplist</code>, ä¸€ç§æ˜¯<code>dict</code>ã€‚</p>\n<h5><a id=\"_684\"></a><strong>å†…å­˜å¸ƒå±€</strong></h5>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-rFg6ht57-1651558697735)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-23.png)]</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯: å½“é‡‡ç”¨HTç¼–ç , å³ä½¿ç”¨dictä½œä¸ºå“ˆå¸Œå¯¹è±¡çš„åº•å±‚æ•°æ®ç»“æ„æ—¶, é”®ä¸å€¼å‡æ˜¯ä»¥sdsçš„å½¢å¼å­˜å‚¨çš„.</p>\n<h5><a id=\"_694\"></a><strong>ä¸¾ä¾‹è¯´æ˜</strong></h5>\n<p>1ï¸âƒ£</p>\n<blockquote>\n<p>å½“ä½¿ç”¨ziplistï¼Œä¹Ÿå°±æ˜¯å‹ç¼©åˆ—è¡¨ä½œä¸ºåº•å±‚å®ç°æ—¶ï¼Œæ–°å¢çš„é”®å€¼å¯¹æ˜¯ä¿å­˜åˆ°å‹ç¼©åˆ—è¡¨çš„è¡¨å°¾ã€‚</p>\n</blockquote>\n<p>æ¯”å¦‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>\n<pre><code class=\"prism language-bash\">hset profile name <span class=\"token string\">\"Tom\"</span>\nhset profile age <span class=\"token number\">25</span>\nhset profile career <span class=\"token string\">\"Programmer\"</span>\n</code></pre>\n<p>ï¼š</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-PV2CRj70-1651558697736)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-9.png)]</p>\n<p>âš¡ï¸ åœ¨å‰é¢ä»‹ç»å‹ç¼©åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬ä»‹ç»è¿‡å‹ç¼©åˆ—è¡¨æ˜¯Redisä¸ºäº†<strong>èŠ‚çœå†…å­˜</strong>è€Œå¼€å‘çš„ï¼Œæ˜¯ç”±ä¸€ç³»åˆ—ç‰¹æ®Šç¼–ç çš„è¿ç»­å†…å­˜å—ç»„æˆçš„é¡ºåºå‹æ•°æ®ç»“æ„ï¼Œç›¸å¯¹äºå­—å…¸æ•°æ®ç»“æ„ï¼Œ<strong>å‹ç¼©åˆ—è¡¨ç”¨äºå…ƒç´ ä¸ªæ•°å°‘ã€å…ƒç´ é•¿åº¦å°çš„åœºæ™¯</strong>ã€‚å…¶ä¼˜åŠ¿åœ¨äºé›†ä¸­å­˜å‚¨ï¼ŒèŠ‚çœç©ºé—´ã€‚</p>\n<p>2ï¸âƒ£</p>\n<blockquote>\n<p>å½“ä½¿ç”¨ hashtable ç¼–ç æ—¶ï¼Œåº•å±‚ä½¿ç”¨å­—å…¸æ•°æ®ç»“æ„ï¼Œå“ˆå¸Œå¯¹è±¡ä¸­çš„æ¯ä¸ªé”®å€¼å¯¹éƒ½ä½¿ç”¨ä¸€ä¸ªå­—å…¸é”®å€¼å¯¹ã€‚ä¸Šé¢å‘½ä»¤å­˜å‚¨å¦‚ä¸‹ï¼š</p>\n</blockquote>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-D4NxMo38-1651558697737)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-10.png)]</p>\n<h4><a id=\"_736\"></a><strong>ç¼–ç è½¬æ¢</strong></h4>\n<p>å’Œä¸Šé¢åˆ—è¡¨å¯¹è±¡ä½¿ç”¨ ziplist ç¼–ç ä¸€æ ·ï¼Œå½“åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œä½¿ç”¨ziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰ç¼–ç ,å¦åˆ™ä½¿ç”¨hashtable ç¼–ç </p>\n<p>1ã€åˆ—è¡¨ä¿å­˜<strong>å…ƒç´ ä¸ªæ•°å°äº512ä¸ª</strong>(é…ç½®æ–‡ä»¶ä¸­çš„ <code>set-max-intset-entries</code> ä¿®æ”¹)</p>\n<p>2ã€æ¯ä¸ªå…ƒç´ <strong>é•¿åº¦å°äº64å­—èŠ‚</strong></p>\n<h2><a id=\"Zset_748\"></a>Zsetæœ‰åºé›†åˆ</h2>\n<h3><a id=\"_750\"></a>ç®€ä»‹</h3>\n<p>Redis æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·åŸºæœ¬ä¸€è‡´</p>\n<p><strong><mark>åŒºåˆ«ï¼š</mark></strong></p>\n<ul><li>**<mark>æ¯ä¸ªå…ƒç´ éƒ½ä¼šå…³è”ä¸€ä¸ª double ç±»å‹çš„æƒé‡å‚æ•°(score)ï¼Œ</mark>**ä½¿å¾—é›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰scoreè¿›è¡Œæœ‰åºæ’åˆ—ã€‚</li></ul>\n<p><strong>ç‰¹ç‚¹ï¼š</strong></p>\n<ul><li>æœ‰åºé›†åˆçš„æˆå‘˜æ˜¯å”¯ä¸€çš„,ä½†åˆ†æ•°(score)å´å¯ä»¥é‡å¤ã€‚é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨å®ç°çš„ï¼Œæ‰€ä»¥æ·»åŠ ï¼Œåˆ é™¤ï¼ŒæŸ¥æ‰¾çš„å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚</li></ul>\n<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>\n<ul><li><strong>æ’è¡Œæ¦œ</strong>ï¼šæœ‰åºé›†åˆç»å…¸ä½¿ç”¨åœºæ™¯ã€‚ä¾‹å¦‚å°è¯´è§†é¢‘ç­‰ç½‘ç«™éœ€è¦å¯¹ç”¨æˆ·ä¸Šä¼ çš„å°è¯´è§†é¢‘åšæ’è¡Œæ¦œï¼Œæ¦œå•å¯ä»¥æŒ‰ç…§ç”¨æˆ·å…³æ³¨æ•°ï¼Œæ›´æ–°æ—¶é—´ï¼Œå­—æ•°ç­‰æ‰“åˆ†ï¼Œåšæ’è¡Œã€‚</li><li><strong>æˆç»©æ’è¡Œ</strong>ï¼šæ¯”å¦‚ä¸€ä¸ªå­˜å‚¨å…¨ç­åŒå­¦æˆç»©çš„sorted setï¼Œå…¶é›†åˆvalueå¯ä»¥æ˜¯åŒå­¦çš„å­¦å·ï¼Œè€Œscoreå°±å¯ä»¥æ˜¯å…¶è€ƒè¯•å¾—åˆ†ï¼Œ å½¢æˆäº†æŒ‰æˆç»©æ’åºã€‚</li><li><strong>æƒé‡åˆ†é…</strong>ï¼šå¯ä»¥ç”¨sorted setæ¥åšå¸¦æƒé‡çš„é˜Ÿåˆ—ï¼Œæ¯”å¦‚æ™®é€šæ¶ˆæ¯çš„scoreä¸º1ï¼Œé‡è¦æ¶ˆæ¯çš„scoreä¸º2ï¼Œç„¶åå·¥ä½œçº¿ç¨‹å¯ä»¥é€‰æ‹©æŒ‰scoreçš„å€’åºæ¥è·å–å·¥ä½œä»»åŠ¡ã€‚è®©é‡è¦çš„ä»»åŠ¡ä¼˜å…ˆæ‰§è¡Œã€‚</li></ul>\n<h3><a id=\"_778\"></a>æµ‹è¯•ç”¨ä¾‹</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zadd å°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜å…ƒç´ åŠå…¶åˆ†æ•°å€¼åŠ å…¥åˆ°æœ‰åºé›†å½“ä¸­ã€‚</span>\n<span class=\"token comment\"># zrange è¿”å›æœ‰åºé›†ä¸­ï¼ŒæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd myset <span class=\"token number\">1</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd myset <span class=\"token number\">2</span> <span class=\"token string\">\"two\"</span> <span class=\"token number\">3</span> <span class=\"token string\">\"three\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGE myset <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"one\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"two\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"three\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zrangebyscore è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†æ•°åŒºé—´çš„æˆå‘˜åˆ—è¡¨ã€‚æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)</span>\næ¬¡åºæ’åˆ—ã€‚\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">2500</span> xiaoming\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">5000</span> xiaohong\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">500</span> kuangshen\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token comment\"># Infæ— ç©·å¤§é‡+âˆ,åŒæ ·åœ°,-âˆå¯ä»¥è¡¨ç¤ºä¸º-Infã€‚</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGEBYSCORE salary <span class=\"token operator\">-</span>inf <span class=\"token operator\">+</span>inf <span class=\"token comment\"># æ˜¾ç¤ºæ•´ä¸ªæœ‰åºé›†</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGEBYSCORE salary <span class=\"token operator\">-</span>inf <span class=\"token operator\">+</span>inf withscores <span class=\"token comment\"># é€’å¢æ’åˆ—</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"500\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"2500\"</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"5000\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZREVRANGE salary <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> WITHSCORES <span class=\"token comment\"># é€’å‡æ’åˆ—</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"5000\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"2500\"</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"500\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGEBYSCORE salary <span class=\"token operator\">-</span>inf <span class=\"token number\">2500</span> WITHSCORES <span class=\"token comment\"># æ˜¾ç¤ºå·¥èµ„ &lt;=2500</span>\nçš„æ‰€æœ‰æˆå‘˜\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"500\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"2500\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zrem ç§»é™¤æœ‰åºé›†ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGE salary <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zrem salary kuangshen\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGE salary <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zcard å‘½ä»¤ç”¨äºè®¡ç®—é›†åˆä¸­å…ƒç´ çš„æ•°é‡ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zcard salary\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\nOK\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zcount è®¡ç®—æœ‰åºé›†åˆä¸­æŒ‡å®šåˆ†æ•°åŒºé—´çš„æˆå‘˜æ•°é‡ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd myset <span class=\"token number\">1</span> <span class=\"token string\">\"hello\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd myset <span class=\"token number\">2</span> <span class=\"token string\">\"world\"</span> <span class=\"token number\">3</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZCOUNT myset <span class=\"token number\">1</span> <span class=\"token number\">3</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">3</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZCOUNT myset <span class=\"token number\">1</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zrank è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šæˆå‘˜çš„æ’åã€‚å…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å¢(ä»å°åˆ°å¤§)é¡ºåºæ’åˆ—ã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">2500</span> xiaoming\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">5000</span> xiaohong\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zadd salary <span class=\"token number\">500</span> kuangshen\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">1</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZRANGE salary <span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> WITHSCORES <span class=\"token comment\"># æ˜¾ç¤ºæ‰€æœ‰æˆå‘˜åŠå…¶ score å€¼</span>\n<span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"kuangshen\"</span>\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"500\"</span>\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaoming\"</span>\n<span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"2500\"</span>\n<span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"xiaohong\"</span>\n<span class=\"token number\">6</span><span class=\"token punctuation\">)</span> <span class=\"token string\">\"5000\"</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zrank salary kuangshen <span class=\"token comment\"># æ˜¾ç¤º kuangshen çš„è–ªæ°´æ’åï¼Œæœ€å°‘</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> zrank salary xiaohong <span class=\"token comment\"># æ˜¾ç¤º xiaohong çš„è–ªæ°´æ’åï¼Œç¬¬ä¸‰</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token comment\"># zrevrank è¿”å›æœ‰åºé›†ä¸­æˆå‘˜çš„æ’åã€‚å…¶ä¸­æœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åºã€‚</span>\n<span class=\"token comment\"># ===================================================</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZREVRANK salary kuangshen <span class=\"token comment\"># ç‹‚ç¥ç¬¬ä¸‰</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">2</span>\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>:<span class=\"token number\">6379</span><span class=\"token operator\">&gt;</span> ZREVRANK salary xiaohong <span class=\"token comment\"># å°çº¢ç¬¬ä¸€</span>\n<span class=\"token punctuation\">(</span><span class=\"token keyword\">integer</span><span class=\"token punctuation\">)</span> <span class=\"token number\">0</span>\n</code></pre>\n<h3><a id=\"_890\"></a>ç¼–ç ä¸åº•å±‚ç»“æ„</h3>\n<p>æœ‰åºé›†åˆå¯¹è±¡æ˜¯æœ‰åºçš„ã€‚ä¸åˆ—è¡¨ä½¿ç”¨ç´¢å¼•ä¸‹æ ‡ä½œä¸ºæ’åºä¾æ®ä¸åŒï¼Œ<strong>æœ‰åºé›†åˆä¸ºæ¯ä¸ªå…ƒç´ è®¾ç½®ä¸€ä¸ªåˆ†æ•°ï¼ˆscoreï¼‰ä½œä¸ºæ’åºä¾æ®ã€‚</strong></p>\n<h4><a id=\"_900\"></a><strong>ç¼–ç </strong></h4>\n<p>1ï¸âƒ£ ä¸€ç§çš„ç¼–ç å€¼å®ä¸º<code>ZIPLIST</code></p>\n<p>2ï¸âƒ£å¯¹åº”çš„ç¼–ç å€¼å®ä¸º<code>SKIPLIST</code></p>\n<h4><a id=\"_908\"></a>åº•å±‚ç»“æ„</h4>\n<p>1ï¸âƒ£ ä¸€ç§æ˜¯ä½¿ç”¨<code>ziplist</code>ä½œä¸ºåº•å±‚å®ç°,</p>\n<ul><li>ä½¿ç”¨ziplistæ¥å®ç°åœ¨åºé›†åˆå¾ˆå®¹æ˜“ç†è§£, åªéœ€è¦åœ¨ziplistè¿™ä¸ªæ•°æ®ç»“æ„çš„åŸºç¡€ä¸Šåšå¥½æ’åºä¸å»é‡å°±å¯ä»¥äº†.</li></ul>\n<p>2ï¸âƒ£ å¦å¤–ä¸€ç§æ¯”è¾ƒç‰¹æ®Š, åº•å±‚<strong>ä½¿ç”¨äº†ä¸¤ç§æ•°æ®ç»“æ„</strong>: <code>dictä¸skiplist.</code></p>\n<ul><li>å•ç‹¬ä½¿ç”¨ <strong>å“ˆå¸Œè¡¨</strong>ï¼Œè™½ç„¶èƒ½ä»¥ <strong>O(1) çš„æ—¶é—´å¤æ‚åº¦</strong>æŸ¥æ‰¾æˆå‘˜ï¼Œä½†æ˜¯å­—å…¸æ˜¯ä»¥æ— åºçš„æ–¹å¼æ¥ä¿å­˜é›†åˆå…ƒç´ ï¼Œæ‰€ä»¥è¿›è¡Œ<strong>èŒƒå›´æ“ä½œçš„æ—¶å€™éƒ½è¦è¿›è¡Œæ’åºï¼›</strong></li><li>å•ç‹¬ä½¿ç”¨ <strong>è·³è¡¨</strong>ï¼Œè™½ç„¶<strong>èƒ½æ‰§è¡ŒèŒƒå›´æ“ä½œ</strong>ï¼Œä½†æ˜¯<strong>æŸ¥æ‰¾æ“ä½œä¸ºO(logN)</strong>ã€‚å› æ­¤Redisä½¿ç”¨äº†ä¸¤ç§æ•°æ®ç»“æ„æ¥å…±åŒå®ç°æœ‰åºé›†åˆã€‚</li></ul>\n<p><mark>ä¸¤è€…ç»“åˆèµ·æ¥ï¼Œæ—¢å¯ä»¥ä»¥<strong>O(1) çš„æ—¶é—´å¤æ‚åº¦</strong>æŸ¥æ‰¾æˆå‘˜ï¼Œåˆå¯ä»¥<strong>å®ç°èŒƒå›´æ“ä½œ</strong></mark></p>\n<p>é¦–å…ˆæ˜¯ç¼–ç ä¸ºZIPLISTæ—¶, æœ‰åºé›†åˆçš„å†…å­˜å¸ƒå±€å¦‚ä¸‹:</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-vMF5EfIG-1651558697738)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-25.png)]</p>\n<p>ç„¶åæ˜¯ç¼–ç ä¸ºSKIPLISTæ—¶, æœ‰åºé›†åˆçš„å†…å­˜å¸ƒå±€å¦‚ä¸‹:</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-6Tkzv0bE-1651558697738)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-ds-x-26.png)]</p>\n<ul><li><strong>ä¸¾ä¾‹è¯´æ˜</strong></li></ul>\n<pre><code class=\"prism language-bash\">ZADD price <span class=\"token number\">8.5</span> apple <span class=\"token number\">5.0</span> banana <span class=\"token number\">6.0</span> cherry\n</code></pre>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-CBsOkDE9-1651558697739)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-13.png)]</p>\n<p>[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-LwEX1Kpj-1651558697739)(https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/db/redis/db-redis-x-object-14.png)]</p>\n<h4><a id=\"_943\"></a><strong>ç¼–ç è½¬æ¢</strong></h4>\n<p>å½“æœ‰åºé›†åˆå¯¹è±¡åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ—¶ï¼Œå¯¹è±¡ä½¿ç”¨ <code>ziplist</code> ç¼–ç ï¼Œå¦è€…ä½¿ç”¨ <code>skiplist</code> ç¼–ç </p>\n<p>1ã€ä¿å­˜çš„<strong>å…ƒç´ æ•°é‡å°äº128</strong>ï¼›(é…ç½®æ–‡ä»¶<code>zset-max-ziplist-entries</code> ä¿®æ”¹)</p>\n<p>2ã€ä¿å­˜çš„æ‰€æœ‰<strong>å…ƒç´ é•¿åº¦éƒ½å°äº64å­—èŠ‚</strong>ã€‚(<code>zset-max-ziplist-value</code> è¿›è¡Œä¿®æ”¹)</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-05-03 14:18:49", "summary": "äº”ç§åŸºæœ¬æ•°æ®ç±»å‹æ— è®ºä»€ä¹ˆæ•°æ®ç±»å‹ï¼Œåœ¨æ•°æ®åº“ä¸­éƒ½æ˜¯ä»¥å½¢å¼ä¿å­˜ï¼Œå¹¶ä¸”æ‰€æœ‰çš„é”®éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è®¨è®ºåŸºç¡€æ•°æ®ç»“æ„éƒ½æ˜¯è®¨è®ºçš„å€¼çš„æ•°æ®ç±»å‹ä¸»è¦åŒ…æ‹¬å¸¸è§çš„ç§æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼šã€ã€ã€ã€ã€‚åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°ç»“æ„ç±»å‹ç»“æ„"}