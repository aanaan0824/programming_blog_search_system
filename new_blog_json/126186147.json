{"blogid": "126186147", "writerAge": "码龄1年", "writerBlogNum": "62", "writerCollect": "464", "writerComment": "603", "writerFan": "1210", "writerGrade": "5级", "writerIntegral": "2370", "writerName": "如风暖阳", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126186147.jpg", "writerRankTotal": "8043", "writerRankWeekly": "880", "writerThumb": "762", "writerVisitNum": "35776", "blog_read_count": "930", "blog_time": "已于 2022-08-09 21:38:33 修改", "blog_title": "MySQL进阶查询", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\40d101bdb695489ba05e90e2522d66cb.png\"/></p>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/43a72a8178b0434f945651b4eb22f1c4.gif#pic_center\"/></p>\n<p>⭐️<font color=\"DeepSkyBlue\" face=\"楷体\" size=\"5\">前言</font>⭐️</p>\n<blockquote>\n<p>🍉<strong>博客主页：</strong> <strong>🍁<a href=\"https://blog.csdn.net/qq_60856948?type=blog\">【如风暖阳】</a>🍁</strong><br/> 🍉<strong>精品Java专栏<a href=\"https://blog.csdn.net/qq_60856948/category_11609568.html?spm=1001.2014.3001.5482\">【JavaSE】</a>、<a href=\"https://blog.csdn.net/qq_60856948/category_11647463.html\">【备战蓝桥】</a><a href=\"https://blog.csdn.net/qq_60856948/category_11797340.html\">、【JavaEE初阶】</a>、<a href=\"https://blog.csdn.net/qq_60856948/category_11860316.html\">【MySQL】</a>、<a href=\"https://blog.csdn.net/qq_60856948/category_11609569.html\">【数据结构】</a></strong><br/> 🍉<strong>欢迎点赞</strong> 👍 <strong>收藏</strong> ⭐<strong>留言评论</strong> 📝<strong>私信必回哟</strong>😁</p>\n<p>🍉<strong>本文由 【如风暖阳】 原创，首发于 CSDN</strong>🙉</p>\n<p>🍉<strong>博主将持续更新学习记录收获，友友们有任何问题可以在评论区留言</strong></p>\n<p>🍉<strong>博客中涉及源码及博主日常练习代码均已上传<a href=\"https://gitee.com/winter-warm-sun/practice\">码云(gitee)</a>、<a href=\"https://github.com/winter-warm-sun/practice\">GitHub</a></strong></p>\n</blockquote>\n<hr/>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/ff787b23d52b49bba4c9a7c613f22d6f.gif#pic_center\"/></p>\n<p></p>\n<div class=\"toc\">\n<h3>📍内容导读📍</h3>\n<ul><li><a href=\"#MySQL_23\">MySQL进阶查询</a></li><li><ul><li><a href=\"#1_25\">🍅1.新增查询</a></li><li><a href=\"#2_38\">🍅2.聚合查询</a></li><li><ul><li><a href=\"#21__39\">2.1 聚合函数</a></li><li><a href=\"#22_group_by_101\">2.2 group by子句</a></li><li><a href=\"#23_having_130\">2.3 having</a></li></ul>\n</li><li><a href=\"#3_137\">🍅3.联合查询</a></li><li><ul><li><a href=\"#31__138\">3.1 笛卡尔积</a></li><li><a href=\"#32__209\">3.2 内连接</a></li><li><a href=\"#33__263\">3.3 外连接</a></li><li><a href=\"#34__293\">3.4 自连接</a></li><li><a href=\"#35__306\">3.5 子查询</a></li><li><a href=\"#36__322\">3.6 合并查询</a></li></ul>\n</li><li><a href=\"#4_346\">🍅4.导图总结</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/d517b38d0f444cb1bb1448009f624e47.gif#pic_center\"/></p>\n<h1><a id=\"MySQL_23\"></a>MySQL进阶查询</h1>\n<h2><a id=\"1_25\"></a>🍅1.新增查询</h2>\n<p>insert语句可以插入查询结果</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> student<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> student<span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span>name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> student <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token string\">'张三'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token string\">'李四'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> student2<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> student2<span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span>name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> student2 <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span><span class=\"token keyword\">from</span> student<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>必须要保证查询的结果的列要和插入的表的列相匹配（列的名字无所谓，但是列的个数和类型需要匹配）</p>\n<h2><a id=\"2_38\"></a>🍅2.聚合查询</h2>\n<h3><a id=\"21__39\"></a>2.1 聚合函数</h3>\n<p>常见的聚合函数：</p>\n<table><thead><tr><th>函数</th><th>说明</th></tr></thead><tbody><tr><td>COUNT([DISTINCT] expr)</td><td>返回查询到的数据的 数量</td></tr><tr><td>SUM([DISTINCT] expr)</td><td>返回查询到的数据的 总和，不是数字没有意义</td></tr><tr><td>AVG([DISTINCT] expr)</td><td>返回查询到的数据的 平均值，不是数字没有意义</td></tr><tr><td>MAX([DISTINCT] expr)</td><td>返回查询到的数据的 最大值，不是数字没有意义</td></tr><tr><td>MIN([DISTINCT] expr)</td><td>返回查询到的数据的 最小值，不是数字没有意义</td></tr></tbody></table>\n<p>案例：<br/> 初始化测试数据</p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\">-- 创建考试成绩表</span>\n<span class=\"token keyword\">DROP</span> <span class=\"token keyword\">TABLE</span> <span class=\"token keyword\">IF</span> <span class=\"token keyword\">EXISTS</span> exam_result<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> exam_result <span class=\"token punctuation\">(</span>\n                             id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span>\n                             name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                             chinese <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                             math <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                             english <span class=\"token keyword\">DECIMAL</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 插入测试数据</span>\n<span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> exam_result <span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">,</span>name<span class=\"token punctuation\">,</span> chinese<span class=\"token punctuation\">,</span> math<span class=\"token punctuation\">,</span> english<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'唐三藏'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">67</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">56</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'孙悟空'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">87.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">78</span><span class=\"token punctuation\">,</span> <span class=\"token number\">77</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'猪悟能'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">88</span><span class=\"token punctuation\">,</span> <span class=\"token number\">98.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token string\">'曹孟德'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">82</span><span class=\"token punctuation\">,</span> <span class=\"token number\">84</span><span class=\"token punctuation\">,</span> <span class=\"token number\">67</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'刘玄德'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">55.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">85</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token string\">'孙权'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span> <span class=\"token number\">78.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                              <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token string\">'宋公明'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">75</span><span class=\"token punctuation\">,</span> <span class=\"token number\">65</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li><strong>count</strong>：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a6ffc338e7d043c08014e9e150738053.png\"/></li></ul>\n<blockquote>\n<p>统计结果共有多少行</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\242107247b1b444e8781d5a95961fd84.png\"/></p>\n<blockquote>\n<p>count(列名)，空值不会记录</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2fa0cf5194a744d9bcfa7319d6a4debf.png\"/></p>\n<ul><li><strong>sum</strong>:</li></ul>\n<blockquote>\n<p>统计数学成绩总分</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d49ab0112db04145b1f337c48d11e26b.png\"/></p>\n<ul><li><strong>avg</strong>：</li></ul>\n<blockquote>\n<p>统计平均分</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\aa65f6b50bec4ebe94d6e07ed67fc999.png\"/></p>\n<ul><li>max</li></ul>\n<blockquote>\n<p>返回英语最高分</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2cf269150c20475d8c808ef5cbf865e6.png\"/></p>\n<ul><li>min</li></ul>\n<blockquote>\n<p>返回七十分以上的数学最低分</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\edd6d6a3bc9e4686a242c37570fd90a1.png\"/></p>\n<h3><a id=\"22_group_by_101\"></a>2.2 group by子句</h3>\n<p>group by子句能够根据查询结果，进行分组，把值相同的记录分成一组，然后可以针对每一组分别进行聚合。</p>\n<p><strong>测试数据初始化</strong>：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> emp<span class=\"token punctuation\">(</span>\n id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span>\n name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n role <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\n salary <span class=\"token keyword\">numeric</span><span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> emp<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> role<span class=\"token punctuation\">,</span> salary<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'马云'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'服务员'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000.20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'马化腾'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'游戏陪玩'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000.99</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'孙悟空'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'游戏角色'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">999.11</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'猪无能'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'游戏角色'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">333.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'沙和尚'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'游戏角色'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">700.33</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">(</span><span class=\"token string\">'隔壁老王'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'董事长'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12000.66</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p>查询每个角色的最高工资、最低工资和平均工资：</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\24061897b4bb47c2b85cfd52235e3199.png\"/><br/> <strong>注意：</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0699dbd3a42743c3b4903fb42a7181c0.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\276efba9d6854977a2356f742795abb7.png\"/><br/> 在上图按照角色分组的查询结果中，每个记录都是相同角色的第一条记录；<br/> 说明在进行分组查询的时候，只有用来分组的这一列可以直接进行查询，其他列必须搭配聚合函数来查询。</p>\n<h3><a id=\"23_having_130\"></a>2.3 having</h3>\n<p>在分组查询中，也可以进行条件筛选。<br/> 若在分组前指定条件，使用where语句，但若在分组后进行指定条件，就需要使用having语句。</p>\n<ul><li>查询除了猪无能以外每个岗位的平均薪资（分组前）<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e102f6f412bd46cfb8461da14b3fdd1e.png\"/></li><li>查询平均薪资大于1000的岗位（分组后）<br/> <img alt=\"*\" src=\"..\\..\\static\\image\\02cd176a4b514892b4f275f522773059.png\"/></li></ul>\n<h2><a id=\"3_137\"></a>🍅3.联合查询</h2>\n<h3><a id=\"31__138\"></a>3.1 笛卡尔积</h3>\n<p>实际开发中往往数据来自不同的表，所以需要多表联合查询。多表查询是对多张表的数据取笛卡尔积：<br/> 假定两张表<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ecdda805508847d6af69f429bc684896.png\"/><br/> 其笛卡尔积结果就是两张表进行排列组合的结果<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\595a40dded194d14be0fea9539a78f6c.png\"/><br/> 笛卡尔积结果的列数为两个表的列数之和，行数为两表行数之积。<br/> 在笛卡尔积的结果中我们可以再上图中发现，只有绿框部分的记录才是有效记录，这是因为笛卡尔积就是两张表直接进行排列组合的结果，并没设置条件，所以需要设置连接条件再进行查询，这样查询出来的结果才是有效记录。</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> student<span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span>name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>classID <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> student <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'张三'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'李四'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'王五'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token string\">'赵六'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> class<span class=\"token punctuation\">(</span>classID <span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span>name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> class <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'java100'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'java101'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> student<span class=\"token punctuation\">,</span>class <span class=\"token keyword\">where</span> student<span class=\"token punctuation\">.</span>classID<span class=\"token operator\">=</span>class<span class=\"token punctuation\">.</span>classID<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\39da9c8e91044965bd375ec685b68772.png\"/></p>\n<hr/>\n<p>以下测试数据初始化：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> classes<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> student<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> course<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token keyword\">if</span> <span class=\"token keyword\">exists</span> score<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> classes <span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span> name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>desc<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> student <span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span> sn <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> qq_mail <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span>\n                      classes_id <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> course<span class=\"token punctuation\">(</span>id <span class=\"token keyword\">int</span> <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token keyword\">auto_increment</span><span class=\"token punctuation\">,</span> name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> score<span class=\"token punctuation\">(</span>score <span class=\"token keyword\">decimal</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> student_id <span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> course_id <span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> classes<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>desc<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span>\n                                      <span class=\"token punctuation\">(</span><span class=\"token string\">'计算机系2019级1班'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'学习了计算机原理、C和Java语言、数据结构和算法'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                      <span class=\"token punctuation\">(</span><span class=\"token string\">'中文系2019级3班'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'学习了中国传统文学'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                      <span class=\"token punctuation\">(</span><span class=\"token string\">'自动化2019级5班'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'学习了机械自动化'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> student<span class=\"token punctuation\">(</span>sn<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> qq_mail<span class=\"token punctuation\">,</span> classes_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'09982'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'黑旋风李逵'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xuanfeng@qq.com'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'00835'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'菩提老祖'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'00391'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'白素贞'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'00031'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'许仙'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'xuxian@qq.com'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'00054'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'不想毕业'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'51234'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'好好说话'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'say@qq.com'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'83223'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'tellme'</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                                                       <span class=\"token punctuation\">(</span><span class=\"token string\">'09527'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'老外学中文'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'foreigner@qq.com'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> course<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span>\n                             <span class=\"token punctuation\">(</span><span class=\"token string\">'Java'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'中国传统文化'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'计算机原理'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'语文'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'高阶数学'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'英文'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> score<span class=\"token punctuation\">(</span>score<span class=\"token punctuation\">,</span> student_id<span class=\"token punctuation\">,</span> course_id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span>\n<span class=\"token comment\">-- 黑旋风李逵</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">70.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">98.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">98</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- 菩提老祖</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">59.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- 白素贞</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">33</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">68</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">99</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- 许仙</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">67</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">56</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">72</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- 不想毕业</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">81</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">37</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- 好好说话</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">56</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">43</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">79</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token comment\">-- tellme</span>\n<span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">92</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"32__209\"></a>3.2 内连接</h3>\n<p>语法：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">select</span> 字段 <span class=\"token keyword\">from</span> 表<span class=\"token number\">1</span> 别名<span class=\"token number\">1</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">inner</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">join</span> 表<span class=\"token number\">2</span> 别名<span class=\"token number\">2</span> <span class=\"token keyword\">on</span> 连接条件 <span class=\"token operator\">and</span> 其他条件<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">select</span> 字段 <span class=\"token keyword\">from</span> 表<span class=\"token number\">1</span> 别名<span class=\"token number\">1</span><span class=\"token punctuation\">,</span>表<span class=\"token number\">2</span> 别名<span class=\"token number\">2</span> <span class=\"token keyword\">where</span> 连接条件 <span class=\"token operator\">and</span> 其他条件<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>案例：</p>\n<blockquote>\n<p>(1)查询“许仙”同学的 成绩</p>\n</blockquote>\n<p>1.计算student表和score表的笛卡尔积<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\23749d1d82b24f989143d0f2f1bd58e1.png\"/><br/> 2.给笛卡尔积加连接条件<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f102e653883b4e0686cdf9ba22c1faef.png\"/><br/> 3.根据许仙这个名字进行筛选<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\bb9da03a9fbd4f8299006bea9b952215.png\"/><br/> 4.对查询结果的列进行精简，保留关注的，去掉不用的<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\64f82616bb8d42e29e40ac1f9108eecd.png\"/></p>\n<p>如果使用join on的方式，一样可以实现相同的效果<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\372924353f16452ea7d64a84d84f83b5.png\"/></p>\n<hr/>\n<blockquote>\n<p>(2)查询所有同学的总成绩，及同学的个人信息<br/> 需要进行分组聚合</p>\n</blockquote>\n<p>1.计算student表和score表的笛卡尔积<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\23749d1d82b24f989143d0f2f1bd58e1.png\"/><br/> 2.给笛卡尔积加连接条件<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f102e653883b4e0686cdf9ba22c1faef.png\"/><br/> 3.按照人来分组（可以使用id、sn或者name）<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0e3c392c68774a009e8b3db65fc38bbf.png\"/><br/> 4.求总成绩，即聚合函数sum<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\01776414aeea44f6987fbb1862806bf4.png\"/></p>\n<blockquote>\n<p>(3)查询所有同学的各科成绩及个人信息<br/> 需要三张表进行联合查询</p>\n</blockquote>\n<p>1.对student表、course表、score表进行笛卡尔积<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cf722711c36348b39d414a6579bb0970.png\"/><br/> 2.加连接条件<br/> 分数表为中间表，需要学生表和分数表的学生id相同，课程表和分数表的课程id相同<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e376b8fb14dc49c0b7cfd4fc2c953e80.png\"/></p>\n<p>3.对查询结果进行列精简<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\91ba4a65da134ac18d9fb68254152fd7.png\"/></p>\n<hr/>\n<p><strong>总结</strong>：<br/> 由上边的例子可以总结出，复杂的SQL很难将其一步到位，需要一步步来完成，一般遵循以下步骤。<br/> 1)笛卡尔积<br/> 2)指定连接条件<br/> 3)加上其他的条件<br/> 4)对查询的列进行结果精简</p>\n<h3><a id=\"33__263\"></a>3.3 外连接</h3>\n<p>外连接分为左外连接和右外连接。如果联合查询，左侧的表完全显示我们就说是左外连接；右侧的表完全显示我们就说是右外连接。<br/> 当两张表中的数据一一对应时，内连接和外连接结果相同(join on内连接)；但若不一一对应时，就会有很大的差别。</p>\n<p>语法：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\">-- 左外连接，表1完全显示</span>\n<span class=\"token keyword\">select</span> 字段名  <span class=\"token keyword\">from</span> 表名<span class=\"token number\">1</span> <span class=\"token keyword\">left</span> <span class=\"token keyword\">join</span> 表名<span class=\"token number\">2</span> <span class=\"token keyword\">on</span> 连接条件<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 右外连接，表2完全显示</span>\n<span class=\"token keyword\">select</span> 字段 <span class=\"token keyword\">from</span> 表名<span class=\"token number\">1</span> <span class=\"token keyword\">right</span> <span class=\"token keyword\">join</span> 表名<span class=\"token number\">2</span> <span class=\"token keyword\">on</span> 连接条件<span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e65c66cc6d0f469a8e54daec1972389c.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5206ece24a0f4f5ea50a81607e60b40b.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4d8a013c07b84935aca8d260f58ef02f.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c0ae9b76e58a430888612a6a727f9423.png\"/></p>\n</blockquote>\n<p>若下图为两张表的关系<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3f3de476dcfa430d9041062dd9d5cbad.png\"/><br/> 则内连接为<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\7272aa3c253b43788f5cdd97e1d5c5f2.png\"/><br/> 左连接为<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3647ba2935c94f54b9cebd7f4753ba24.png\"/><br/> 右连接为<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9beec45551f5463d980ff84f39a67c39.png\"/></p>\n<h3><a id=\"34__293\"></a>3.4 自连接</h3>\n<p>自连接是指在同一张表连接自身进行查询。(自己与自己笛卡尔积)<br/> 案例：<br/> 显示所有“计算机原理”成绩比“Java”成绩高的成绩信息<br/> 1.自身笛卡尔积<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ce61f6fd82a24013a11514cc634c1644.png\"/></p>\n<p>2.加限定条件，对应两门课程<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b266f2975ac24c50adc3ada1a70acb46.png\"/></p>\n<p>3.继续加条件，“计算机原理”成绩比“Java”成绩高的成绩信息</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a2be9f52ee2148838767d9d5fe5261e5.png\"/></p>\n<h3><a id=\"35__306\"></a>3.5 子查询</h3>\n<p>本质上就是把多个查询语句组合成一个查询语句</p>\n<ul><li>单行子查询：返回一行记录的子查询<br/> 案例：查询与“不想毕业” 同学的同班同学：</li></ul>\n<blockquote>\n<p>先找出不想毕业同学的班级id<br/> 根据班级id找到对应的同学</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9c2af49fc57d4644a61c1874fc20ebec.png\"/></p>\n<ul><li>多行子查询：返回多行记录的子查询<br/> 案例：查询“语文”或“英文”课程的成绩信息</li></ul>\n<blockquote>\n<p>先找到语文和英文的课程id<br/> 再在score表中根据课程id找到对应记录</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\944c029ed4fb42c499c78e065c50fd7d.png\"/></p>\n<h3><a id=\"36__322\"></a>3.6 合并查询</h3>\n<p>在实际应用中，为了合并多个select的执行结果，可以使用集合操作符 union，union all。使用UNION和UNION ALL时，前后查询的结果集中，字段需要一致。</p>\n<ul><li>union<br/> 该操作符用于取得两个结果集的并集。当使用该操作符时，会自动去掉结果集中的重复行。<br/> 案例：查询id小于3，或者名字为“英文”的课程：</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> course <span class=\"token keyword\">where</span> id<span class=\"token operator\">&lt;</span><span class=\"token number\">3</span>\n<span class=\"token keyword\">union</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> course <span class=\"token keyword\">where</span> name<span class=\"token operator\">=</span><span class=\"token string\">'英文'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- 或者使用or来实现</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> course <span class=\"token keyword\">where</span> id<span class=\"token operator\">&lt;</span><span class=\"token number\">3</span> <span class=\"token operator\">or</span> name<span class=\"token operator\">=</span><span class=\"token string\">'英文'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\15b6908d864947ee8a3f37b51a6b2859.png\"/></p>\n<ul><li>union all<br/> 该操作符用于取得两个结果集的并集。当使用该操作符时，不会去掉结果集中的重复行。<br/> 案例：查询id小于3，或者名字为“Java”的课程</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\">-- 可以看到结果集中出现重复数据Java</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> course <span class=\"token keyword\">where</span> id<span class=\"token operator\">&lt;</span><span class=\"token number\">3</span>\n<span class=\"token keyword\">union</span> <span class=\"token keyword\">all</span>\n<span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> course <span class=\"token keyword\">where</span> name<span class=\"token operator\">=</span><span class=\"token string\">'英文'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"4_346\"></a>🍅4.导图总结</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d3a22b7bf48c4b84a4467a84f7b8f555.png\"/></p>\n<hr/>\n<p>⭐️<font color=\"DeepSkyBlue\" face=\"楷体\" size=\"5\">最后的话</font>⭐️<br/> <mark>总结不易，希望uu们不要吝啬你们的👍哟(＾Ｕ＾)ノ~ＹＯ！！如有问题，欢迎评论区批评指正😁</mark></p>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/505bfdad61e746389519a7d39b6bf99f.gif#pic_center\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 1, "php": 0, "time": "2022-08-09 21:38:33", "summary": "在这里插入图片描述请添加图片描述楷体前言博客主页：如风暖阳精品专栏、备战蓝桥、初阶、、数据结构欢迎点赞收藏留言评论私信必回哟本文由如风暖阳原创，首发于博主将持续更新学习记录收获，友友们有任何问题可以在"}