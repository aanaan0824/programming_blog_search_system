{"blogid": "123726877", "writerAge": "码龄7年", "writerBlogNum": "2", "writerCollect": "8", "writerComment": "1", "writerFan": "1", "writerGrade": "1级", "writerIntegral": "24", "writerName": "Archer_Eason", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123726877.jpg", "writerRankTotal": "217821", "writerRankWeekly": "587281", "writerThumb": "1", "writerVisitNum": "3152", "blog_read_count": "2058", "blog_time": "已于 2022-03-25 10:28:13 修改", "blog_title": "C#+SQLite操作之一 连接数据库", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_7\">前言</a></li><li><a href=\"#_13\">一、需要做哪些配置</a></li><li><a href=\"#_30\">二、创建数据库</a></li><li><a href=\"#C_37\">三、C#连接数据库</a></li><li><a href=\"#_81\">总结</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"_7\"></a>前言</h1>\n<p>某非联网设备采用了C#+SQLite数据库<br/> 开发平台 ：Visual Studio 2019 Pro<br/> 开发语言：C#<br/> 数据库：SQLite</p>\n<h1><a id=\"_13\"></a>一、需要做哪些配置</h1>\n<ol><li>Sqlite部署<br/> Sqlite部署需下载2个文件包<br/> <a href=\"https://www.sqlite.org/download.html\">Sqlite下载页</a>下载sqlite-tools-win32-<em>.zip 和 sqlite-dll-win32-</em>.zip 压缩文件<br/> 创建文件夹，例如 C:\\Program Files\\Sqlite3<br/> 将两个压缩包解压到 C:\\Program Files\\Sqlite3<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\159668d887754e3c925a47e9ee859cf1.png\"/></li></ol>\n<p>控制面板-&gt;所有控制面板-&gt;系统-&gt;高级系统设置-&gt;环境变量-&gt;系统变量-&gt;path-&gt;编辑,将C:\\Program Files\\Sqlite3加入环境变量<br/> 可通过cmd命令查看是否配置成功，成功如下图：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1fafd443fb73416d9855fb7c19e92b23.png\"/></p>\n<ol start=\"2\"><li>在VS上通过工具 &gt;&gt;Nuget包管理器找到System.Data.SQLite以最新稳定版安装即可<br/> <img alt=\"\" src=\"..\\..\\static\\image\\745c5ddc36ee44e4a7ddc3a22c49379b.png\"/><br/> 安装成功后，右侧引用中会出现<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cd3d584b28f74739a19829e5602cb686.png\"/></li></ol>\n<h1><a id=\"_30\"></a>二、创建数据库</h1>\n<p>创建数据库可以通过命令行的方式和现有工具2种方式<br/> 命令行方式有兴趣的可以自行搜索相关资料<br/> 此处只介绍使用SQLite Export的方法<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5671630421694c2fb2e8fa090b0c45dc.png\"/><br/> 略过数据库创建其他过程，我们创建了如下图所示数据库<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3f074b119da74707934efeb76431a154.png\"/></p>\n<h1><a id=\"C_37\"></a>三、C#连接数据库</h1>\n<ol><li>创建一个winform项目，Designer中放入DataGirdView控件</li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\696ca436e3f5451ea246db534f3c61c9.png\"/><br/> 2. 后台代码加入using</p>\n<pre><code class=\"prism language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Data<span class=\"token punctuation\">.</span>SQLite</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Data</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">namespace</span> <span class=\"token namespace\">WindowsFormsTestApp</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">partial</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Form1</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">Form</span></span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">public</span> <span class=\"token function\">Form1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token function\">InitializeComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">ConnectDB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">ConnectDB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> dataConnPath <span class=\"token operator\">=</span> <span class=\"token string\">@\"Data Source =F:\\CameraML\\DataBase\\Ml_DB.db\"</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">SQLiteConnection</span> dataConn <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">SQLiteConnection</span><span class=\"token punctuation\">(</span>dataConnPath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            dataConn<span class=\"token punctuation\">.</span><span class=\"token function\">Open</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">DataTable</span> dt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">DataTable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">SQLiteCommand</span> command <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">SQLiteCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select * from GJB420A\"</span><span class=\"token punctuation\">,</span>dataConn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            command<span class=\"token punctuation\">.</span><span class=\"token function\">ExecuteNonQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">SQLiteDataAdapter</span> mAdapt <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">SQLiteDataAdapter</span><span class=\"token punctuation\">(</span>command<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            mAdapt<span class=\"token punctuation\">.</span><span class=\"token function\">Fill</span><span class=\"token punctuation\">(</span>dt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            dataGridView1<span class=\"token punctuation\">.</span>DataSource <span class=\"token operator\">=</span> dt<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>运行后效果<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2dc38d0784af4c39961800f10323cf66.png\"/></p>\n<hr/>\n<h1><a id=\"_81\"></a>总结</h1>\n<p>例如：以上就是今天要记录的内容。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-03-25 10:28:13", "summary": "提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档文章目录前言一、需要做哪些配置二、创建数据库三、连接数据库总结前言某非联网设备采用了数据库开发平台：开发语言：数据库：一、需要做哪些配置"}