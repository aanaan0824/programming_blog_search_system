{"blogid": "123023599", "writerAge": "码龄2年", "writerBlogNum": "3", "writerCollect": "34", "writerComment": "38", "writerFan": "913", "writerGrade": "1级", "writerIntegral": "86", "writerName": "HaryCoding", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123023599.jpg", "writerRankTotal": "130680", "writerRankWeekly": "30128", "writerThumb": "22", "writerVisitNum": "7761", "blog_read_count": "4386", "blog_time": "已于 2022-04-18 12:41:05 修改", "blog_title": "Unity学习-------异步场景加载（AsyncOperation）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><strong>首先，学习异步场景加载之前，先了解什么是异步场景加载。</strong></p>\n<h1>一、什么是异步场景加载</h1>\n<p>       在目前市面上基本所有的游戏都使用了这个方法，举个例子</p>\n<p>      </p>\n<p style=\"text-align:center;\"> <img alt=\"watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFyeUNvZGluZw==,size_20,color_FFFFFF,t_70,g_se,x_16\" src=\"..\\..\\static\\image\\0bf5280487e94006aba7e3aeed7bb266.png\"/>    </p>\n<p>       （绝地求生加载画面）</p>\n<p style=\"text-align:center;\"><img alt=\"watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFyeUNvZGluZw==,size_9,color_FFFFFF,t_70,g_se,x_16\" src=\"..\\..\\static\\image\\43bf1c7b8fd94c40a034a43ca76d49d8.png\"/>       </p>\n<p>          （英雄联盟加载画面）</p>\n<p>        从这两个例子不难看出异步加载无非就是让玩家等待游戏进度条加载。</p>\n<h1>二、异步场景加载的学习</h1>\n<p>        这边就简单介绍如何使用这个方法。</p>\n<h3>   1、首先准备两个场景，一个作为主界面，一个作为游戏跳转界面</h3>\n<p>        </p>\n<p style=\"text-align:center;\"><img alt=\"c4a4bdc29d084fc7aa1b84a94b8f567f.png\" src=\"..\\..\\static\\image\\c4a4bdc29d084fc7aa1b84a94b8f567f.png\"/></p>\n<h3>   2、设计两个UI板块，一个作为交互界面，一个作为异步场景加载界面</h3>\n<p style=\"text-align:center;\"><img alt=\"b0076453cbbb416bbf7943629e54e34d.png\" src=\"..\\..\\static\\image\\b0076453cbbb416bbf7943629e54e34d.png\"/><img alt=\"ba8e3e24ac4340f4997bc37ea6ba827c.png\" src=\"..\\..\\static\\image\\ba8e3e24ac4340f4997bc37ea6ba827c.png\"/> </p>\n<p>          我这边简单操作一下</p>\n<p style=\"text-align:center;\"><img alt=\"watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFyeUNvZGluZw==,size_20,color_FFFFFF,t_70,g_se,x_16\" src=\"..\\..\\static\\image\\d104cf65aa814f538b1e2bb181076384.png\"/><img alt=\"watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFyeUNvZGluZw==,size_20,color_FFFFFF,t_70,g_se,x_16\" src=\"..\\..\\static\\image\\444c7aa7fbdf459ab473c6eae20e1344.png\"/></p>\n<p>（按下按钮Loadpanel 界面隐藏，显示Background界面，当数值加载至100%，跳转到游戏场景）</p>\n<h3>      3、上脚本</h3>\n<p>          做完前面几步，写一个关于的AsyncOperation脚本</p>\n<pre><code class=\"language-cs\">using System.Collections;\nusing System.Collections.Generic;\nusing UnityEngine;\nusing UnityEngine.UI;\nusing UnityEngine.SceneManagement;\n\npublic class Begin : MonoBehaviour\n{\n    public GameObject Background;\n    //异步场景加载界面\n    public Text text;\n    //获取加载界面的文本\n    public Slider slider;\n    //设置共有对象来改变slider的value值\n\n    public void loadNext()\n    {\n        StartCoroutine(loadlevel());\n        //使用loadlevel方法\n    }\n\n    IEnumerator loadlevel()\n    //设置协程类型方法loadlevel\n    {\n        Background.SetActive(true);\n\n        AsyncOperation operation = SceneManager.LoadSceneAsync(SceneManager.GetActiveScene().buildIndex + 1);\n        //加载本场景数值 +1的场景SampleScene\n        operation.allowSceneActivation = false;\n        //先不加载下一场景\n        while (!operation.isDone)\n        {\n            slider.value = operation.progress;\n            //operation.progress本质上就是数值\n            text.text = operation.progress * 100 + \"%\";\n\n            if (operation.progress &gt;= 0.9f)\n            //由于该方法本身的问题所以需要手动把数值改为100%\n            {\n                slider.value = 1;\n                text.text = \"Press any key\";\n                if (Input.anyKeyDown)\n                {\n                    operation.allowSceneActivation = true;\n                    //按下任意按钮开始加载下一场景\n                }\n            }\n            yield return null;\n        }\n    }\n}\n</code></pre>\n<p><img alt=\"watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBASGFyeUNvZGluZw==,size_10,color_FFFFFF,t_70,g_se,x_16\" src=\"..\\..\\static\\image\\e87fae048c4542fc8e9b087e180f9c8b.png\"/></p>\n<p>简单展示一下</p>\n<p><img alt=\"e5da140326e44e1bb20a9a402f583739.gif\" src=\"https://img-blog.csdnimg.cn/e5da140326e44e1bb20a9a402f583739.gif\"/></p>\n<p> 说明：这个游戏比较小，所以异步加载界面数值变化不明显。</p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>\n<p> </p>\n</div>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-04-18 12:41:05", "summary": "首先，学习异步场景加载之前，先了解什么是异步场景加载。一、什么是异步场景加载在目前市面上基本所有的游戏都使用了这个方法，举个例子绝地求生加载画面英雄联盟加载画面从这两个例子不难看出异步加载无非就是让玩"}