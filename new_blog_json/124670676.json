{"blogid": "124670676", "writerAge": "ç é¾„5å¹´", "writerBlogNum": "77", "writerCollect": "1302", "writerComment": "119", "writerFan": "712", "writerGrade": "5çº§", "writerIntegral": "1679", "writerName": "æ—æ—zonzon", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_124670676.jpg", "writerRankTotal": "11508", "writerRankWeekly": "17400", "writerThumb": "287", "writerVisitNum": "116937", "blog_read_count": "21299", "blog_time": "å·²äºÂ 2022-05-11 15:12:20Â ä¿®æ”¹", "blog_title": "æ¡Œé¢å® ç‰© â‘  é€šè¿‡pythonåˆ¶ä½œå±äºè‡ªå·±çš„æ¡Œé¢å® ç‰©", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h1>ä¸€ã€æ¡Œé¢å® ç‰©ç´ æ</h1>\n<h2>1.1 éœ€è¦å‡†å¤‡ä»€ä¹ˆç´ æ</h2>\n<p>        æ¡Œé¢å® ç‰©çš„å„ç§åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç”±ä¸€ä¸ªä¸ªGIFåŠ¨å›¾æ‹¼æ¥è€Œæˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å¤šç»„GIFåŠ¨å›¾æ¥å®ç°æ¡Œé¢å® ç‰©çš„åŠ¨ä½œåˆ‡æ¢ã€‚</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"160\" src=\"https://img-blog.csdnimg.cn/49eeb01d875e4fa39e97a2986c8de724.gif\" width=\"198\"/></p>\n<p></p>\n<p>        æœ€å¥½é€‰å–æ˜¯ç™½åº•çš„GIFåŠ¨å›¾ã€‚</p>\n<h2>1.2 ä»‹ç»å‡ ç§è·å¾—GIFåŠ¨å›¾çš„æ–¹å¼</h2>\n<h3>1.2.1 é€šè¿‡prå®ç°è§†é¢‘è½¬GIF</h3>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"181\" src=\"..\\..\\static\\image\\75c7e220b2ab480f8f50c220ef4c372e.png\" width=\"344\"/></p>\n<p>â€‹</p>\n</div>\n<p>        pråœ¨å¯¼å‡ºçš„æ—¶å€™é€‰æ‹©åŠ¨ç”»GIFå¯ä»¥ç›´æ¥å¯¼å‡ºGIFåŠ¨å›¾ã€‚</p>\n<p>        å½“ç„¶äº†æƒ³è¦ç™½åº•å°±éœ€è¦è‡ªå·²ç”¨â€œè’™ç‰ˆâ€å’Œç”»ç¬”å·¥å…·è‡ªå·±æŠ å›¾äº†ã€‚</p>\n<h3>1.2.2 é€šè¿‡pså®ç°å›¾ç‰‡ç»„è½¬GIF</h3>\n<p>        psä¼šé«˜çº§ä¸€ç‚¹ï¼Œé¦–å…ˆç‚¹å‡»æœ€ä¸Šæ–¹çš„çª—å£ï¼Œå†ç‚¹å‡»æ—¶é—´è½´ï¼Œåœ¨ä¸‹æ–¹æ˜¾ç¤ºå‡ºçš„æ—¶é—´è½´çš„æœ€å³è¾¹çš„åŠ å·å¯ä»¥æ·»åŠ ä½ æƒ³è¦æ·»åŠ çš„å›¾ç‰‡ã€‚å›¾å±‚å³è¾¹å¯ä»¥é€‰æ‹©åˆ é™¤èƒŒæ™¯ã€‚</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"278\" src=\"..\\..\\static\\image\\19ffbdc617b849a39e9ee7bc652b5f98.png\" width=\"513\"/></p>\n<p></p>\n<p>        ç„¶åé€‰æ‹©æœ€ä¸Šæ–¹çš„æ–‡ä»¶ï¼Œé€‰æ‹©å¯¼å‡ºï¼Œé€‰æ‹©å¯¼å‡ºä¸ºwebæ‰€ç”¨æ ¼å¼æ—§ç‰ˆï¼Œå³å¯</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"364\" src=\"..\\..\\static\\image\\e77d62823aa845869c403507383b0b64.png\" width=\"413\"/></p>\n<p>â€‹</p>\n</div>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"204\" src=\"https://img-blog.csdnimg.cn/cab8e0b83f3b457496b8b434d85692da.gif\" width=\"204\"/></p>\n<p></p>\n<h3>1.2.3 ç™¾åº¦ä¸€ä¸‹ï¼Œè·å–ç½‘ä¸Šç°æˆçš„GIFèµ„æº</h3>\n<p>â‘  ç™¾åº¦ï¼šâ€œåˆ¶ä½œGIFåŠ¨å›¾â€</p>\n<p>â‘¡ ç™¾åº¦    â€œGIFåŠ¨å›¾èµ„æºâ€</p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/408992668\" title=\"ä½ æƒ³è¦çš„è§’è‰²äººç‰©ç´ æéƒ½åœ¨è¿™é‡Œï¼æœ€å®ç”¨çš„2dæ¸¸æˆç´ æï¼ - çŸ¥ä¹\">ä½ æƒ³è¦çš„è§’è‰²äººç‰©ç´ æéƒ½åœ¨è¿™é‡Œï¼æœ€å®ç”¨çš„2dæ¸¸æˆç´ æï¼ - çŸ¥ä¹</a></p>\n<h2></h2>\n<h1>äºŒã€pythonå®ç°ä»£ç </h1>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"325\" src=\"..\\..\\static\\image\\5f2456f3552c4249b48bdd28fd99b3bf.png\" width=\"440\"/></p>\n<p>â€‹</p>\n</div>\n<p></p>\n<h2>2.1 ç›®å½•ç»“æ„</h2>\n<p>        é¡¹ç›®çš„ç›®å½•ç»“æ„æ•´ä½“å¦‚ä¸‹ï¼šmain.pyä¸ºä¸»ç¨‹åºä»£ç ã€‚</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"357\" src=\"..\\..\\static\\image\\07dff88a11d149faa522fc9ff573c1b7.png\" width=\"400\"/></p>\n<p>â€‹</p>\n</div>\n<p>        normalä¸‹çš„GIFå›¾æ˜¯å® ç‰©å¹³å¸¸ä¼šéšæœºåˆ‡æ¢çš„åŠ¨ä½œGIFå›¾ï¼Œ clickä¸‹é¢çš„GIFå›¾æ˜¯ç‚¹å‡»å® ç‰©ä¹‹åçš„å® ç‰©åŠ¨ä½œçš„GIFå›¾</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"204\" src=\"..\\..\\static\\image\\6d8113c52920428c9a91e038a7b89efd.png\" width=\"391\"/></p>\n<p>â€‹</p>\n</div>\n<p>        dialog.txt è®°å½•äº†å® ç‰©çš„å¯¹è¯ä¿¡æ¯</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"270\" src=\"..\\..\\static\\image\\aaa48580dbb8414dbdb81fbae97b8b40.png\" width=\"467\"/></p>\n<p>â€‹</p>\n</div>\n<p>         tigerIcon.jpgæ˜¯ç¼©å°åˆ°æ‰˜ç›˜åæ‰˜ç›˜å›¾æ ‡çš„å›¾ç‰‡</p>\n<p></p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"250\" src=\"..\\..\\static\\image\\9d9a67b425cd4c279bfccc634b571af3.png\" width=\"471\"/></p>\n<p>â€‹</p>\n</div>\n<h2></h2>\n<h2>2.2 å®ç°ä»£ç </h2>\n<h3>2.2.1 å¼•ç”¨åŒ…</h3>\n<p>        osåŒ…ç”¨äºåŠ è½½æ–‡ä»¶ï¼ŒsysåŒ…ç”¨äºé€€å‡ºç¨‹åºï¼ŒrandomåŒ…ç”¨äºç¨‹åºä¸­ä¸€äº›éœ€è¦è°ƒç”¨éšæœºæ•°çš„æ“ä½œã€‚å…¶ä»–çš„ä¸‰ä¸ªåŒ…åˆ™æ˜¯ç”¨äºå®ç°æ¡Œé¢å® ç‰©çš„åŸºç¡€ã€‚</p>\n<div>\n<pre><code class=\"language-python\">import os\nimport sys\nimport random\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import *</code></pre>\n</div>\n<h3>2.2.2 ä¸»ä»£ç éƒ¨åˆ†</h3>\n<div>\n<pre><code class=\"language-python\">if __name__ == '__main__':\n    # åˆ›å»ºäº†ä¸€ä¸ªQApplicationå¯¹è±¡ï¼Œå¯¹è±¡åä¸ºappï¼Œå¸¦ä¸¤ä¸ªå‚æ•°argc,argv\n    # æ‰€æœ‰çš„PyQt5åº”ç”¨å¿…é¡»åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼ˆApplicationï¼‰å¯¹è±¡ã€‚sys.argvå‚æ•°æ˜¯ä¸€ä¸ªæ¥è‡ªå‘½ä»¤è¡Œçš„å‚æ•°åˆ—è¡¨ã€‚\n    app = QApplication(sys.argv)\n    # çª—å£ç»„ä»¶åˆå§‹åŒ–\n    pet = DesktopPet()\n    # 1. è¿›å…¥æ—¶é—´å¾ªç¯ï¼›\n    # 2. waitï¼Œç›´åˆ°å“åº”appå¯èƒ½çš„è¾“å…¥ï¼›\n    # 3. QTæ¥æ”¶å’Œå¤„ç†ç”¨æˆ·åŠç³»ç»Ÿäº¤ä»£çš„äº‹ä»¶ï¼ˆæ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¼ é€’åˆ°å„ä¸ªçª—å£ï¼›\n    # 4. ç¨‹åºé‡åˆ°exit()é€€å‡ºæ—¶ï¼Œæœºä¼šè¿”å›exec()çš„å€¼ã€‚\n    sys.exit(app.exec_())</code></pre>\n</div>\n<h3>2.2.3 ä»£ç è¿è¡Œæµç¨‹</h3>\n<p>æ•´ä¸ªè¿è¡Œæµç¨‹ä¸ºï¼š</p>\n<p>ï¼ˆ1ï¼‰é€šè¿‡self.init()ï¼šå®ç°çª—ä½“çš„åˆå§‹åŒ–ï¼Œå® ç‰©çš„GIFå›¾åœ¨è¿™ä¸ªçª—ä½“ä¸­æ’­æ”¾ã€‚</p>\n<p>ï¼ˆ2ï¼‰é€šè¿‡self.initPall()ï¼šé…ç½®æ‰˜ç›˜åŒ–</p>\n<p>ï¼ˆ3ï¼‰é€šè¿‡self.initPetImage()ï¼šå°†å® ç‰©çš„é™æ€GIFèµ„æºï¼ŒåŒ…æ‹¬å¯¹è¯å’ŒGIFåŠ¨å›¾è¿›è¡ŒåŠ è½½</p>\n<p>ï¼ˆ4ï¼‰é€šè¿‡self.petNormalAction()ï¼šå®ç°å® ç‰©éšæœºåˆ‡æ¢åŠ¨ä½œå’Œè¯­å¥çš„åŠŸèƒ½</p>\n<div>\n<pre><code class=\"language-python\">class DesktopPet(QWidget):\n    def __init__(self, parent=None, **kwargs):\n        super(DesktopPet, self).__init__(parent)\n        # çª—ä½“åˆå§‹åŒ–\n        self.init()\n        # æ‰˜ç›˜åŒ–åˆå§‹\n        self.initPall()\n        # å® ç‰©é™æ€gifå›¾åŠ è½½\n        self.initPetImage()\n        # å® ç‰©æ­£å¸¸å¾…æœºï¼Œå®ç°éšæœºåˆ‡æ¢åŠ¨ä½œ\n        self.petNormalAction()</code></pre>\n</div>\n<p>â‘  åŠ è½½æ˜¾ç¤ºGIFåŠ¨å›¾çš„çª—ä½“ï¼Œé€šè¿‡å‡½æ•°initå®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹ï¼š</p>\n<p>        è¿™å‡ å¥çš„ä½œç”¨æ˜¯å¯¹å±•ç¤ºå® ç‰©çš„çª—ä½“è¿›è¡Œä¸€äº›åˆæ­¥çš„è®¾ç½®ï¼Œä½¿å¾—ç™½è‰²GIFå›¾èƒ½å¤Ÿå»æ‰èƒŒæ™¯çš„ç™½è‰²ï¼Œå°†GIFå›¾é€æ˜çš„å±•ç¤ºå‡ºæ¥</p>\n<div>\n<pre><code class=\"language-python\">    # çª—ä½“åˆå§‹åŒ–\n    def init(self):\n        # åˆå§‹åŒ–\n        # è®¾ç½®çª—å£å±æ€§:çª—å£æ— æ ‡é¢˜æ ä¸”å›ºå®šåœ¨æœ€å‰é¢\n        # FrameWindowHint:æ— è¾¹æ¡†çª—å£\n        # WindowStaysOnTopHint: çª—å£æ€»æ˜¾ç¤ºåœ¨æœ€ä¸Šé¢\n        # SubWindow: æ–°çª—å£éƒ¨ä»¶æ˜¯ä¸€ä¸ªå­çª—å£ï¼Œè€Œæ— è®ºçª—å£éƒ¨ä»¶æ˜¯å¦æœ‰çˆ¶çª—å£éƒ¨ä»¶\n        # https://blog.csdn.net/kaida1234/article/details/79863146\n        self.setWindowFlags(Qt.FramelessWindowHint | Qt.WindowStaysOnTopHint | Qt.SubWindow)\n        # setAutoFillBackground(True)è¡¨ç¤ºçš„æ˜¯è‡ªåŠ¨å¡«å……èƒŒæ™¯,Falseä¸ºé€æ˜èƒŒæ™¯\n        self.setAutoFillBackground(False)\n        # çª—å£é€æ˜ï¼Œçª—ä½“ç©ºé—´ä¸é€æ˜\n        self.setAttribute(Qt.WA_TranslucentBackground, True)\n        # é‡ç»˜ç»„ä»¶ã€åˆ·æ–°\n        self.repaint()</code></pre>\n</div>\n<p>â‘¡ å®ç°èƒ½æ‰˜ç›˜æ˜¾ç¤ºçš„åŠŸèƒ½ï¼Œé€šè¿‡å‡½æ•°initPallå®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹ï¼š</p>\n<p>        ä¸»è¦æœ‰ä¸‹é¢è¿™å‡ ä¸ªæ“ä½œï¼š</p>\n<p>        ï¼ˆ1ï¼‰è¯»å–é™æ€å›¾ç‰‡èµ„æºè®¾ç½®æ‰˜ç›˜åŒ–çš„å›¾æ ‡</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"216\" src=\"..\\..\\static\\image\\b002e971a3bb4536a7ec4edeb4c3a439.png\" width=\"328\"/></p>\n<p>â€‹</p>\n</div>\n<p>         ï¼ˆ2ï¼‰è®¾ç½®æ‰˜ç›˜åŒ–å›¾ç‰‡ç‚¹å‡»å³é”®æ˜¾ç¤ºçš„èœå•ï¼Œå¹¶å¯¹è¿™äº›èœå•çš„ç‚¹å‡»æ“ä½œè¿›è¡Œè®¾ç½®</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"184\" src=\"..\\..\\static\\image\\f6e5a3239e164a46bfe0fb7791a8c077.png\" width=\"259\"/></p>\n<p>â€‹</p>\n</div>\n<p>æµç¨‹ä»£ç å¦‚ä¸‹ï¼š </p>\n<div>\n<pre><code class=\"language-python\"> # æ‰˜ç›˜åŒ–è®¾ç½®åˆå§‹åŒ–\n    def initPall(self):\n        # å¯¼å…¥å‡†å¤‡åœ¨æ‰˜ç›˜åŒ–æ˜¾ç¤ºä¸Šä½¿ç”¨çš„å›¾æ ‡\n        icons = os.path.join('tigerIcon.jpg')\n        # è®¾ç½®å³é”®æ˜¾ç¤ºæœ€å°åŒ–çš„èœå•é¡¹\n        # èœå•é¡¹é€€å‡ºï¼Œç‚¹å‡»åè°ƒç”¨quitå‡½æ•°\n        quit_action = QAction('é€€å‡º', self, triggered=self.quit)\n        # è®¾ç½®è¿™ä¸ªç‚¹å‡»é€‰é¡¹çš„å›¾ç‰‡\n        quit_action.setIcon(QIcon(icons))\n        # èœå•é¡¹æ˜¾ç¤ºï¼Œç‚¹å‡»åè°ƒç”¨showingå‡½æ•°\n        showing = QAction(u'æ˜¾ç¤º', self, triggered=self.showwin)\n        # æ–°å»ºä¸€ä¸ªèœå•é¡¹æ§ä»¶\n        self.tray_icon_menu = QMenu(self)\n        # åœ¨èœå•æ æ·»åŠ ä¸€ä¸ªæ— å­èœå•çš„èœå•é¡¹â€˜é€€å‡ºâ€™\n        self.tray_icon_menu.addAction(quit_action)\n        # åœ¨èœå•æ æ·»åŠ ä¸€ä¸ªæ— å­èœå•çš„èœå•é¡¹â€˜æ˜¾ç¤ºâ€™\n        self.tray_icon_menu.addAction(showing)\n        # QSystemTrayIconç±»ä¸ºåº”ç”¨ç¨‹åºåœ¨ç³»ç»Ÿæ‰˜ç›˜ä¸­æä¾›ä¸€ä¸ªå›¾æ ‡\n        self.tray_icon = QSystemTrayIcon(self)\n        # è®¾ç½®æ‰˜ç›˜åŒ–å›¾æ ‡\n        self.tray_icon.setIcon(QIcon(icons))\n        # è®¾ç½®æ‰˜ç›˜åŒ–èœå•é¡¹\n        self.tray_icon.setContextMenu(self.tray_icon_menu)\n        # å±•ç¤º\n        self.tray_icon.show()</code></pre>\n</div>\n<p>å…¶ä¸­â€˜é€€å‡ºâ€™é¡¹æ¶‰åŠåˆ°çš„å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>\n<div>\n<pre><code class=\"language-python\">    # é€€å‡ºæ“ä½œï¼Œå…³é—­ç¨‹åº\n    def quit(self):\n        self.close()\n        sys.exit()</code></pre>\n</div>\n<p>å…¶ä¸­â€˜æ˜¾ç¤ºâ€™é¡¹æ¶‰åŠåˆ°çš„å‡½æ•°ä»£ç å¦‚ä¸‹ï¼š</p>\n<div>\n<pre><code class=\"language-python\">    # æ˜¾ç¤ºå® ç‰©\n    def showwin(self):\n        # setWindowOpacityï¼ˆï¼‰è®¾ç½®çª—ä½“çš„é€æ˜åº¦ï¼Œé€šè¿‡è°ƒæ•´çª—ä½“é€æ˜åº¦å®ç°å® ç‰©çš„å±•ç¤ºå’Œéšè—\n        self.setWindowOpacity(1)</code></pre>\n</div>\n<p>â‘¢ å® ç‰©é™æ€èµ„æºçš„åŠ è½½ï¼Œé€šè¿‡å‡½æ•°initPetImageå®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹ï¼š</p>\n<p>        é™æ€èµ„æºçš„åŠ è½½ä¸»è¦æ¶‰åŠä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¯¹è¯æ¡†å†…å®¹çš„åŠ è½½å’Œå›¾ç‰‡å†…å®¹çš„åŠ è½½ã€‚</p>\n<div>\n<pre><code class=\"language-python\">    # å® ç‰©é™æ€gifå›¾åŠ è½½\n    def initPetImage(self):\n        # å¯¹è¯æ¡†å®šä¹‰\n        self.talkLabel = QLabel(self)\n        # å¯¹è¯æ¡†æ ·å¼è®¾è®¡\n        self.talkLabel.setStyleSheet(\"font:15pt 'æ¥·ä½“';border-width: 1px;color:blue;\") \n        # å®šä¹‰æ˜¾ç¤ºå›¾ç‰‡éƒ¨åˆ†\n        self.image = QLabel(self)\n        # QMovieæ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾åŠ¨æ€è§†é¢‘çš„ç±»ï¼Œä¸€èˆ¬æ˜¯é…åˆQLabelä½¿ç”¨çš„,å¯ä»¥ç”¨æ¥å­˜æ”¾GIFåŠ¨æ€å›¾\n        self.movie = QMovie(\"normal/normal1.gif\")\n        # è®¾ç½®æ ‡ç­¾å¤§å°\n        self.movie.setScaledSize(QSize(200, 200))\n        # å°†Qmovieåœ¨å®šä¹‰çš„imageä¸­æ˜¾ç¤º\n        self.image.setMovie(self.movie)\n        self.movie.start()\n        self.resize(1024, 1024)\n        # è°ƒç”¨è‡ªå®šä¹‰çš„randomPositionï¼Œä¼šä½¿å¾—å® ç‰©å‡ºç°ä½ç½®éšæœº\n        self.randomPosition()\n        # å±•ç¤º\n        self.show()\n        # https://new.qq.com/rain/a/20211014a002rs00\n        # å°†å® ç‰©æ­£å¸¸å¾…æœºçŠ¶æ€çš„åŠ¨å›¾æ”¾å…¥pet1ä¸­\n        self.pet1 = []\n        for i in os.listdir(\"normal\"):\n            self.pet1.append(\"normal/\" + i)\n        # å°†å® ç‰©æ­£å¸¸å¾…æœºçŠ¶æ€çš„å¯¹è¯æ”¾å…¥pet2ä¸­\n        self.dialog = []\n        # è¯»å–ç›®å½•ä¸‹dialogæ–‡ä»¶\n        with open(\"dialog.txt\", \"r\") as f:\n            text = f.read()\n            # ä»¥\\n å³æ¢è¡Œç¬¦ä¸ºåˆ†éš”ç¬¦ï¼Œåˆ†å‰²æ”¾è¿›dialogä¸­\n            self.dialog = text.split(\"\\n\")</code></pre>\n</div>\n<p>        å…¶ä¸­æˆ‘ä»¬å¸Œæœ›å® ç‰©å‡ºç°çš„ä½ç½®æ˜¯éšæœºçš„è€Œä¸æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆä¾¿é€šè¿‡ randomPosition()å®ç°å® ç‰©å‡ºç°ä½ç½®çš„éšæœºã€‚</p>\n<div>\n<pre><code class=\"language-python\">    # å® ç‰©éšæœºä½ç½®\n    def randomPosition(self):\n        # screenGeometryï¼ˆï¼‰å‡½æ•°æä¾›æœ‰å…³å¯ç”¨å±å¹•å‡ ä½•çš„ä¿¡æ¯\n        screen_geo = QDesktopWidget().screenGeometry()\n        # è·å–çª—å£åæ ‡ç³»\n        pet_geo = self.geometry()\n        width = (screen_geo.width() - pet_geo.width()) * random.random()\n        height = (screen_geo.height() - pet_geo.height()) * random.random()\n        self.move(width, height)</code></pre>\n</div>\n<p>â‘£ å® ç‰©æ­£å¸¸å¾…æœºï¼Œå®ç°éšæœºåˆ‡æ¢åŠ¨ä½œï¼Œå¯¹è¯æ¡†é€šè¿‡å‡½æ•°petNormalActionå®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹</p>\n<p>        è¿™é‡Œé€šè¿‡QTimerå®ç°å®šæ—¶æ“ä½œï¼Œåˆ°è¾¾è®¾ç½®çš„æ—¶é—´å³è°ƒç”¨ç›¸å…³çš„å‡½æ•°ã€‚å…¶ä¸­conditionä¸ºæ ‡è¯†å® ç‰©çŠ¶æ€çš„flagï¼Œ0ä¸ºå¹³å¸¸çŠ¶æ€ï¼Œ1ä¸ºç‚¹å‡»çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€å¯æŒ‰ç…§è‡ªå·±çš„å–œå¥½æ‹“å±•ã€‚talk_conditionåŒç†ï¼Œä¸ºæ ‡è¯†å® ç‰©å¯¹è¯çŠ¶æ€çš„flagã€‚</p>\n<div>\n<pre><code class=\"language-python\"># å® ç‰©æ­£å¸¸å¾…æœºåŠ¨ä½œ\n    def petNormalAction(self):\n        # æ¯éš”ä¸€æ®µæ—¶é—´åšä¸ªåŠ¨ä½œ\n        # å®šæ—¶å™¨è®¾ç½®\n        self.timer = QTimer()\n        # æ—¶é—´åˆ°äº†è‡ªåŠ¨æ‰§è¡Œ\n        self.timer.timeout.connect(self.randomAct)\n        # åŠ¨ä½œæ—¶é—´åˆ‡æ¢è®¾ç½®\n        self.timer.start(3000)\n        # å® ç‰©çŠ¶æ€è®¾ç½®ä¸ºæ­£å¸¸\n        self.condition = 0\n        # æ¯éš”ä¸€æ®µæ—¶é—´åˆ‡æ¢å¯¹è¯\n        self.talkTimer = QTimer()\n        self.talkTimer.timeout.connect(self.talk)\n        self.talkTimer.start(3000)\n        # å¯¹è¯çŠ¶æ€è®¾ç½®ä¸ºå¸¸æ€\n        self.talk_condition = 0\n        # å® ç‰©å¯¹è¯æ¡†\n        self.talk()</code></pre>\n</div>\n<p>         å…¶ä¸­ï¼Œé€šè¿‡randomActå®ç°å® ç‰©åŠ¨ä½œçš„éšæœºåˆ‡æ¢ï¼Œé€šè¿‡talkå®ç°å¯¹è¯æ¡†å†…å®¹çš„åˆ‡æ¢ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š</p>\n<p>        self.pet1å’Œself.dialogåœ¨åˆå§‹åŒ–çš„æ—¶å€™å³å®šä¹‰äº†ã€‚è¿™é‡Œå¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œå¥½è¿›è¡Œæ‹“å±•ï¼Œç”¨å¤šä¸ªif-else ifå®ç°å¤šç§çŠ¶æ€çš„åˆ‡æ¢å’Œå®šä¹‰ï¼Œå¢åŠ ä¸€äº›å–‚é£Ÿï¼Œç©è€åŠ¨ä½œç­‰ã€‚</p>\n<div>\n<pre><code class=\"language-python\"> # éšæœºåŠ¨ä½œåˆ‡æ¢\n    def randomAct(self):\n        # conditionè®°å½•å® ç‰©çŠ¶æ€ï¼Œå® ç‰©çŠ¶æ€ä¸º0æ—¶ï¼Œä»£è¡¨æ­£å¸¸å¾…æœº\n        if not self.condition:\n            # éšæœºé€‰æ‹©è£…è½½åœ¨pet1é‡Œé¢çš„gifå›¾è¿›è¡Œå±•ç¤ºï¼Œå®ç°éšæœºåˆ‡æ¢\n            self.movie = QMovie(random.choice(self.pet1))\n            # å® ç‰©å¤§å°\n            self.movie.setScaledSize(QSize(200, 200))\n            # å°†åŠ¨ç”»æ·»åŠ åˆ°labelä¸­\n            self.image.setMovie(self.movie)\n            # å¼€å§‹æ’­æ”¾åŠ¨ç”»\n            self.movie.start()\n        # conditionä¸ä¸º0ï¼Œè½¬ä¸ºåˆ‡æ¢ç‰¹æœ‰çš„åŠ¨ä½œï¼Œå®ç°å® ç‰©çš„ç‚¹å‡»åé¦ˆ\n        # è¿™é‡Œå¯ä»¥é€šè¿‡else-ifè¯­å¥å¾€ä¸‹æ‹“å±•åšæ›´å¤šçš„äº¤äº’åŠŸèƒ½\n        else:\n            # è¯»å–ç‰¹æ®ŠçŠ¶æ€å›¾ç‰‡è·¯å¾„\n            self.movie = QMovie(\"./click/click.gif\")\n            # å® ç‰©å¤§å°\n            self.movie.setScaledSize(QSize(200, 200))\n            # å°†åŠ¨ç”»æ·»åŠ åˆ°labelä¸­\n            self.image.setMovie(self.movie)\n            # å¼€å§‹æ’­æ”¾åŠ¨ç”»\n            self.movie.start()\n            # å® ç‰©çŠ¶æ€è®¾ç½®ä¸ºæ­£å¸¸å¾…æœº\n            self.condition = 0\n            self.talk_condition = 0\n\n    # å® ç‰©å¯¹è¯æ¡†è¡Œä¸ºå¤„ç†\n    def talk(self):\n        if not self.talk_condition:\n            # talk_conditionä¸º0åˆ™é€‰å–åŠ è½½åœ¨dialogä¸­çš„è¯­å¥\n            self.talkLabel.setText(random.choice(self.dialog))\n            # è®¾ç½®æ ·å¼\n            self.talkLabel.setStyleSheet(\n                \"font: bold;\"\n                \"font:25pt 'æ¥·ä½“';\"\n                \"color:white;\"\n                \"background-color: white\"\n                \"url(:/)\"\n            )\n            # æ ¹æ®å†…å®¹è‡ªé€‚åº”å¤§å°\n            self.talkLabel.adjustSize()\n        else:\n            # talk_conditionä¸º1æ˜¾ç¤ºä¸ºåˆ«ç‚¹æˆ‘ï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥é€šè¿‡if-else-ifæ¥æ‹“å±•å¯¹åº”çš„è¡Œä¸º\n            self.talkLabel.setText(\"åˆ«ç‚¹æˆ‘\")\n            self.talkLabel.setStyleSheet(\n                \"font: bold;\"\n                \"font:25pt 'æ¥·ä½“';\"\n                \"color:white;\"\n                \"background-color: white\"\n                \"url(:/)\"\n            )\n            self.talkLabel.adjustSize()\n            # è®¾ç½®ä¸ºæ­£å¸¸çŠ¶æ€\n            self.talk_condition = 0\n</code></pre>\n</div>\n<p>â‘¤ å®ç°èƒ½å¤Ÿæ‹–åŠ¨å® ç‰©ï¼Œé€šè¿‡å¤šä¸ªè‡ªå¸¦å‡½æ•°å®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹ï¼š</p>\n<p>        å®ç°å® ç‰©çš„æ‹–åŠ¨ä¸»è¦é€šè¿‡ä¸‰ä¸ªå‡½æ•°å®ç°ï¼ŒmouserPressEventè´Ÿè´£åœ¨é¼ æ ‡ç‚¹å‡»åˆ¤æ–­å…¶æ˜¯å¦åœ¨å® ç‰©çª—å£ä¸Šï¼Œå¦‚æœåœ¨åˆ™å°†å® ç‰©å’Œé¼ æ ‡çš„ä½ç½®ç»‘å®šï¼Œå¹¶æ‰§è¡Œç‚¹å‡»æ”¹å˜å® ç‰©GIFå›¾å’Œå¯¹è¯æ¡†çš„æ“ä½œã€‚</p>\n<p>        mouseMoveEventå®ç°æŒ‰ä¸‹åå® ç‰©è·Ÿç€é¼ æ ‡ç§»åŠ¨</p>\n<p>        mouseReleaseEventå°†ä¹‹å‰çš„é”å®šå–æ¶ˆ</p>\n<div>\n<pre><code class=\"language-python\"> # é¼ æ ‡å·¦é”®æŒ‰ä¸‹æ—¶, å® ç‰©å°†å’Œé¼ æ ‡ä½ç½®ç»‘å®š\n    def mousePressEvent(self, event):\n        # æ›´æ”¹å® ç‰©çŠ¶æ€ä¸ºç‚¹å‡»\n        self.condition = 1\n        # æ›´æ”¹å® ç‰©å¯¹è¯çŠ¶æ€\n        self.talk_condition = 1\n        # å³å¯è°ƒç”¨å¯¹è¯çŠ¶æ€æ”¹å˜\n        self.talk()\n        # å³åˆ»åŠ è½½å® ç‰©ç‚¹å‡»åŠ¨ç”»\n        self.randomAct()\n        if event.button() == Qt.LeftButton:\n            self.is_follow_mouse = True\n        # globalPos() äº‹ä»¶è§¦å‘ç‚¹ç›¸å¯¹äºæ¡Œé¢çš„ä½ç½®\n        # pos() ç¨‹åºç›¸å¯¹äºæ¡Œé¢å·¦ä¸Šè§’çš„ä½ç½®ï¼Œå®é™…æ˜¯çª—å£çš„å·¦ä¸Šè§’åæ ‡\n        self.mouse_drag_pos = event.globalPos() - self.pos()\n        event.accept()\n        # æ‹–åŠ¨æ—¶é¼ æ ‡å›¾å½¢çš„è®¾ç½®\n        self.setCursor(QCursor(Qt.OpenHandCursor))\n\n    # é¼ æ ‡ç§»åŠ¨æ—¶è°ƒç”¨ï¼Œå®ç°å® ç‰©éšé¼ æ ‡ç§»åŠ¨\n    def mouseMoveEvent(self, event):\n        # å¦‚æœé¼ æ ‡å·¦é”®æŒ‰ä¸‹ï¼Œä¸”å¤„äºç»‘å®šçŠ¶æ€\n        if Qt.LeftButton and self.is_follow_mouse:\n            # å® ç‰©éšé¼ æ ‡è¿›è¡Œç§»åŠ¨\n            self.move(event.globalPos() - self.mouse_drag_pos)\n        event.accept()\n\n    # é¼ æ ‡é‡Šæ”¾è°ƒç”¨ï¼Œå–æ¶ˆç»‘å®š\n    def mouseReleaseEvent(self, event):\n        self.is_follow_mouse = False\n        # é¼ æ ‡å›¾å½¢è®¾ç½®ä¸ºç®­å¤´\n        self.setCursor(QCursor(Qt.ArrowCursor))\n</code></pre>\n</div>\n<p>â‘¥ å®ç°å® ç‰©å³é”®ç‚¹å‡»å…·æœ‰äº¤äº’åŠŸèƒ½ï¼Œé€šè¿‡å‡½æ•°contextMenuEventå®ç°ï¼Œå…¶ä»£ç é…ç½®å¦‚ä¸‹ï¼š</p>\n<p>        é€€å‡ºæ“ä½œé€šè¿‡ qApp.quit()å®ç°ï¼Œç›´æ¥é€€å‡ºç›¸åº”çš„QTç¨‹åºã€‚</p>\n<p>        éšè—æ“ä½œåˆ™é€šè¿‡self.setWindowOpacity(0)å®ç°ï¼Œè¿™ä¸ªå¯æ§åˆ¶çª—å£çš„é€æ˜åº¦ã€‚</p>\n<div>\n<pre><code class=\"language-python\"> # å® ç‰©å³é”®ç‚¹å‡»äº¤äº’\n    def contextMenuEvent(self, event):\n        # å®šä¹‰èœå•\n        menu = QMenu(self)\n        # å®šä¹‰èœå•é¡¹\n        quitAction = menu.addAction(\"é€€å‡º\")\n        hide = menu.addAction(\"éšè—\")\n        # ä½¿ç”¨exec_()æ–¹æ³•æ˜¾ç¤ºèœå•ã€‚ä»é¼ æ ‡å³é”®äº‹ä»¶å¯¹è±¡ä¸­è·å¾—å½“å‰åæ ‡ã€‚mapToGlobal()æ–¹æ³•æŠŠå½“å‰ç»„ä»¶çš„ç›¸å¯¹åæ ‡è½¬æ¢ä¸ºçª—å£ï¼ˆwindowï¼‰çš„ç»å¯¹åæ ‡ã€‚\n        action = menu.exec_(self.mapToGlobal(event.pos()))\n        # ç‚¹å‡»äº‹ä»¶ä¸ºé€€å‡º\n        if action == quitAction:\n            qApp.quit()\n        # ç‚¹å‡»äº‹ä»¶ä¸ºéšè—\n        if action == hide:\n            # é€šè¿‡è®¾ç½®é€æ˜åº¦æ–¹å¼éšè—å® ç‰©\n            self.setWindowOpacity(0)\n</code></pre>\n</div>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"245\" src=\"..\\..\\static\\image\\0da580dd315f4458b157af7e3264ebf2.png\" width=\"354\"/></p>\n<p>â€‹</p>\n</div>\n<p>â‘¦ é¼ æ ‡ç§»åˆ°å® ç‰©ä¸Šçš„æ—¶å€™æ˜¾ç¤ºä¸ºé—­åˆçš„æ‰‹</p>\n<div>\n<pre><code class=\"language-python\">    # é¼ æ ‡ç§»è¿›æ—¶è°ƒç”¨\n    def enterEvent(self, event):\n        # è®¾ç½®é¼ æ ‡å½¢çŠ¶ Qt.ClosedHandCursor   éæŒ‡å‘æ‰‹\n        self.setCursor(Qt.ClosedHandCursor)</code></pre>\n</div>\n<h2>2.3 å®Œæ•´æºç </h2>\n<div>\n<pre><code class=\"language-python\">import os\nimport sys\nimport random\nfrom PyQt5.QtGui import *\nfrom PyQt5.QtCore import *\nfrom PyQt5.QtWidgets import *\n\n\nclass DesktopPet(QWidget):\n    def __init__(self, parent=None, **kwargs):\n        super(DesktopPet, self).__init__(parent)\n        # çª—ä½“åˆå§‹åŒ–\n        self.init()\n        # æ‰˜ç›˜åŒ–åˆå§‹\n        self.initPall()\n        # å® ç‰©é™æ€gifå›¾åŠ è½½\n        self.initPetImage()\n        # å® ç‰©æ­£å¸¸å¾…æœºï¼Œå®ç°éšæœºåˆ‡æ¢åŠ¨ä½œ\n        self.petNormalAction()\n\n\n    # çª—ä½“åˆå§‹åŒ–\n    def init(self):\n        # åˆå§‹åŒ–\n        # è®¾ç½®çª—å£å±æ€§:çª—å£æ— æ ‡é¢˜æ ä¸”å›ºå®šåœ¨æœ€å‰é¢\n        # FrameWindowHint:æ— è¾¹æ¡†çª—å£\n        # WindowStaysOnTopHint: çª—å£æ€»æ˜¾ç¤ºåœ¨æœ€ä¸Šé¢\n        # SubWindow: æ–°çª—å£éƒ¨ä»¶æ˜¯ä¸€ä¸ªå­çª—å£ï¼Œè€Œæ— è®ºçª—å£éƒ¨ä»¶æ˜¯å¦æœ‰çˆ¶çª—å£éƒ¨ä»¶\n        # https://blog.csdn.net/kaida1234/article/details/79863146\n        self.setWindowFlags(Qt.FramelessWindowHint | Qt.WindowStaysOnTopHint | Qt.SubWindow)\n        # setAutoFillBackground(True)è¡¨ç¤ºçš„æ˜¯è‡ªåŠ¨å¡«å……èƒŒæ™¯,Falseä¸ºé€æ˜èƒŒæ™¯\n        self.setAutoFillBackground(False)\n        # çª—å£é€æ˜ï¼Œçª—ä½“ç©ºé—´ä¸é€æ˜\n        self.setAttribute(Qt.WA_TranslucentBackground, True)\n        # é‡ç»˜ç»„ä»¶ã€åˆ·æ–°\n        self.repaint()\n\n    # æ‰˜ç›˜åŒ–è®¾ç½®åˆå§‹åŒ–\n    def initPall(self):\n        # å¯¼å…¥å‡†å¤‡åœ¨æ‰˜ç›˜åŒ–æ˜¾ç¤ºä¸Šä½¿ç”¨çš„å›¾æ ‡\n        icons = os.path.join('tigerIcon.jpg')\n        # è®¾ç½®å³é”®æ˜¾ç¤ºæœ€å°åŒ–çš„èœå•é¡¹\n        # èœå•é¡¹é€€å‡ºï¼Œç‚¹å‡»åè°ƒç”¨quitå‡½æ•°\n        quit_action = QAction('é€€å‡º', self, triggered=self.quit)\n        # è®¾ç½®è¿™ä¸ªç‚¹å‡»é€‰é¡¹çš„å›¾ç‰‡\n        quit_action.setIcon(QIcon(icons))\n        # èœå•é¡¹æ˜¾ç¤ºï¼Œç‚¹å‡»åè°ƒç”¨showingå‡½æ•°\n        showing = QAction(u'æ˜¾ç¤º', self, triggered=self.showwin)\n        # æ–°å»ºä¸€ä¸ªèœå•é¡¹æ§ä»¶\n        self.tray_icon_menu = QMenu(self)\n        # åœ¨èœå•æ æ·»åŠ ä¸€ä¸ªæ— å­èœå•çš„èœå•é¡¹â€˜é€€å‡ºâ€™\n        self.tray_icon_menu.addAction(quit_action)\n        # åœ¨èœå•æ æ·»åŠ ä¸€ä¸ªæ— å­èœå•çš„èœå•é¡¹â€˜æ˜¾ç¤ºâ€™\n        self.tray_icon_menu.addAction(showing)\n        # QSystemTrayIconç±»ä¸ºåº”ç”¨ç¨‹åºåœ¨ç³»ç»Ÿæ‰˜ç›˜ä¸­æä¾›ä¸€ä¸ªå›¾æ ‡\n        self.tray_icon = QSystemTrayIcon(self)\n        # è®¾ç½®æ‰˜ç›˜åŒ–å›¾æ ‡\n        self.tray_icon.setIcon(QIcon(icons))\n        # è®¾ç½®æ‰˜ç›˜åŒ–èœå•é¡¹\n        self.tray_icon.setContextMenu(self.tray_icon_menu)\n        # å±•ç¤º\n        self.tray_icon.show()\n\n    # å® ç‰©é™æ€gifå›¾åŠ è½½\n    def initPetImage(self):\n        # å¯¹è¯æ¡†å®šä¹‰\n        self.talkLabel = QLabel(self)\n        # å¯¹è¯æ¡†æ ·å¼è®¾è®¡\n        self.talkLabel.setStyleSheet(\"font:15pt 'æ¥·ä½“';border-width: 1px;color:blue;\")\n        # å®šä¹‰æ˜¾ç¤ºå›¾ç‰‡éƒ¨åˆ†\n        self.image = QLabel(self)\n        # QMovieæ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾åŠ¨æ€è§†é¢‘çš„ç±»ï¼Œä¸€èˆ¬æ˜¯é…åˆQLabelä½¿ç”¨çš„,å¯ä»¥ç”¨æ¥å­˜æ”¾GIFåŠ¨æ€å›¾\n        self.movie = QMovie(\"normal/normal1.gif\")\n        # è®¾ç½®æ ‡ç­¾å¤§å°\n        self.movie.setScaledSize(QSize(200, 200))\n        # å°†Qmovieåœ¨å®šä¹‰çš„imageä¸­æ˜¾ç¤º\n        self.image.setMovie(self.movie)\n        self.movie.start()\n        self.resize(1024, 1024)\n        # è°ƒç”¨è‡ªå®šä¹‰çš„randomPositionï¼Œä¼šä½¿å¾—å® ç‰©å‡ºç°ä½ç½®éšæœº\n        self.randomPosition()\n        # å±•ç¤º\n        self.show()\n        # https://new.qq.com/rain/a/20211014a002rs00\n        # å°†å® ç‰©æ­£å¸¸å¾…æœºçŠ¶æ€çš„åŠ¨å›¾æ”¾å…¥pet1ä¸­\n        self.pet1 = []\n        for i in os.listdir(\"normal\"):\n            self.pet1.append(\"normal/\" + i)\n        # å°†å® ç‰©æ­£å¸¸å¾…æœºçŠ¶æ€çš„å¯¹è¯æ”¾å…¥pet2ä¸­\n        self.dialog = []\n        # è¯»å–ç›®å½•ä¸‹dialogæ–‡ä»¶\n        with open(\"dialog.txt\", \"r\") as f:\n            text = f.read()\n            # ä»¥\\n å³æ¢è¡Œç¬¦ä¸ºåˆ†éš”ç¬¦ï¼Œåˆ†å‰²æ”¾è¿›dialogä¸­\n            self.dialog = text.split(\"\\n\")\n\n    # å® ç‰©æ­£å¸¸å¾…æœºåŠ¨ä½œ\n    def petNormalAction(self):\n        # æ¯éš”ä¸€æ®µæ—¶é—´åšä¸ªåŠ¨ä½œ\n        # å®šæ—¶å™¨è®¾ç½®\n        self.timer = QTimer()\n        # æ—¶é—´åˆ°äº†è‡ªåŠ¨æ‰§è¡Œ\n        self.timer.timeout.connect(self.randomAct)\n        # åŠ¨ä½œæ—¶é—´åˆ‡æ¢è®¾ç½®\n        self.timer.start(3000)\n        # å® ç‰©çŠ¶æ€è®¾ç½®ä¸ºæ­£å¸¸\n        self.condition = 0\n        # æ¯éš”ä¸€æ®µæ—¶é—´åˆ‡æ¢å¯¹è¯\n        self.talkTimer = QTimer()\n        self.talkTimer.timeout.connect(self.talk)\n        self.talkTimer.start(3000)\n        # å¯¹è¯çŠ¶æ€è®¾ç½®ä¸ºå¸¸æ€\n        self.talk_condition = 0\n        # å® ç‰©å¯¹è¯æ¡†\n        self.talk()\n\n    # éšæœºåŠ¨ä½œåˆ‡æ¢\n    def randomAct(self):\n        # conditionè®°å½•å® ç‰©çŠ¶æ€ï¼Œå® ç‰©çŠ¶æ€ä¸º0æ—¶ï¼Œä»£è¡¨æ­£å¸¸å¾…æœº\n        if not self.condition:\n            # éšæœºé€‰æ‹©è£…è½½åœ¨pet1é‡Œé¢çš„gifå›¾è¿›è¡Œå±•ç¤ºï¼Œå®ç°éšæœºåˆ‡æ¢\n            self.movie = QMovie(random.choice(self.pet1))\n            # å® ç‰©å¤§å°\n            self.movie.setScaledSize(QSize(200, 200))\n            # å°†åŠ¨ç”»æ·»åŠ åˆ°labelä¸­\n            self.image.setMovie(self.movie)\n            # å¼€å§‹æ’­æ”¾åŠ¨ç”»\n            self.movie.start()\n        # conditionä¸ä¸º0ï¼Œè½¬ä¸ºåˆ‡æ¢ç‰¹æœ‰çš„åŠ¨ä½œï¼Œå®ç°å® ç‰©çš„ç‚¹å‡»åé¦ˆ\n        # è¿™é‡Œå¯ä»¥é€šè¿‡else-ifè¯­å¥å¾€ä¸‹æ‹“å±•åšæ›´å¤šçš„äº¤äº’åŠŸèƒ½\n        else:\n            # è¯»å–ç‰¹æ®ŠçŠ¶æ€å›¾ç‰‡è·¯å¾„\n            self.movie = QMovie(\"./click/click.gif\")\n            # å® ç‰©å¤§å°\n            self.movie.setScaledSize(QSize(200, 200))\n            # å°†åŠ¨ç”»æ·»åŠ åˆ°labelä¸­\n            self.image.setMovie(self.movie)\n            # å¼€å§‹æ’­æ”¾åŠ¨ç”»\n            self.movie.start()\n            # å® ç‰©çŠ¶æ€è®¾ç½®ä¸ºæ­£å¸¸å¾…æœº\n            self.condition = 0\n            self.talk_condition = 0\n\n    # å® ç‰©å¯¹è¯æ¡†è¡Œä¸ºå¤„ç†\n    def talk(self):\n        if not self.talk_condition:\n            # talk_conditionä¸º0åˆ™é€‰å–åŠ è½½åœ¨dialogä¸­çš„è¯­å¥\n            self.talkLabel.setText(random.choice(self.dialog))\n            # è®¾ç½®æ ·å¼\n            self.talkLabel.setStyleSheet(\n                \"font: bold;\"\n                \"font:25pt 'æ¥·ä½“';\"\n                \"color:white;\"\n                \"background-color: white\"\n                \"url(:/)\"\n            )\n            # æ ¹æ®å†…å®¹è‡ªé€‚åº”å¤§å°\n            self.talkLabel.adjustSize()\n        else:\n            # talk_conditionä¸º1æ˜¾ç¤ºä¸ºåˆ«ç‚¹æˆ‘ï¼Œè¿™é‡ŒåŒæ ·å¯ä»¥é€šè¿‡if-else-ifæ¥æ‹“å±•å¯¹åº”çš„è¡Œä¸º\n            self.talkLabel.setText(\"åˆ«ç‚¹æˆ‘\")\n            self.talkLabel.setStyleSheet(\n                \"font: bold;\"\n                \"font:25pt 'æ¥·ä½“';\"\n                \"color:white;\"\n                \"background-color: white\"\n                \"url(:/)\"\n            )\n            self.talkLabel.adjustSize()\n            # è®¾ç½®ä¸ºæ­£å¸¸çŠ¶æ€\n            self.talk_condition = 0\n\n    # é€€å‡ºæ“ä½œï¼Œå…³é—­ç¨‹åº\n    def quit(self):\n        self.close()\n        sys.exit()\n\n    # æ˜¾ç¤ºå® ç‰©\n    def showwin(self):\n        # setWindowOpacityï¼ˆï¼‰è®¾ç½®çª—ä½“çš„é€æ˜åº¦ï¼Œé€šè¿‡è°ƒæ•´çª—ä½“é€æ˜åº¦å®ç°å® ç‰©çš„å±•ç¤ºå’Œéšè—\n        self.setWindowOpacity(1)\n\n    # å® ç‰©éšæœºä½ç½®\n    def randomPosition(self):\n        screen_geo = QDesktopWidget().screenGeometry()\n        pet_geo = self.geometry()\n        width = (screen_geo.width() - pet_geo.width()) * random.random()\n        height = (screen_geo.height() - pet_geo.height()) * random.random()\n        self.move(width, height)\n\n    # é¼ æ ‡å·¦é”®æŒ‰ä¸‹æ—¶, å® ç‰©å°†å’Œé¼ æ ‡ä½ç½®ç»‘å®š\n    def mousePressEvent(self, event):\n        # æ›´æ”¹å® ç‰©çŠ¶æ€ä¸ºç‚¹å‡»\n        self.condition = 1\n        # æ›´æ”¹å® ç‰©å¯¹è¯çŠ¶æ€\n        self.talk_condition = 1\n        # å³å¯è°ƒç”¨å¯¹è¯çŠ¶æ€æ”¹å˜\n        self.talk()\n        # å³åˆ»åŠ è½½å® ç‰©ç‚¹å‡»åŠ¨ç”»\n        self.randomAct()\n        if event.button() == Qt.LeftButton:\n            self.is_follow_mouse = True\n        # globalPos() äº‹ä»¶è§¦å‘ç‚¹ç›¸å¯¹äºæ¡Œé¢çš„ä½ç½®\n        # pos() ç¨‹åºç›¸å¯¹äºæ¡Œé¢å·¦ä¸Šè§’çš„ä½ç½®ï¼Œå®é™…æ˜¯çª—å£çš„å·¦ä¸Šè§’åæ ‡\n        self.mouse_drag_pos = event.globalPos() - self.pos()\n        event.accept()\n        # æ‹–åŠ¨æ—¶é¼ æ ‡å›¾å½¢çš„è®¾ç½®\n        self.setCursor(QCursor(Qt.OpenHandCursor))\n\n    # é¼ æ ‡ç§»åŠ¨æ—¶è°ƒç”¨ï¼Œå®ç°å® ç‰©éšé¼ æ ‡ç§»åŠ¨\n    def mouseMoveEvent(self, event):\n        # å¦‚æœé¼ æ ‡å·¦é”®æŒ‰ä¸‹ï¼Œä¸”å¤„äºç»‘å®šçŠ¶æ€\n        if Qt.LeftButton and self.is_follow_mouse:\n            # å® ç‰©éšé¼ æ ‡è¿›è¡Œç§»åŠ¨\n            self.move(event.globalPos() - self.mouse_drag_pos)\n        event.accept()\n\n    # é¼ æ ‡é‡Šæ”¾è°ƒç”¨ï¼Œå–æ¶ˆç»‘å®š\n    def mouseReleaseEvent(self, event):\n        self.is_follow_mouse = False\n        # é¼ æ ‡å›¾å½¢è®¾ç½®ä¸ºç®­å¤´\n        self.setCursor(QCursor(Qt.ArrowCursor))\n\n\n    # é¼ æ ‡ç§»è¿›æ—¶è°ƒç”¨\n    def enterEvent(self, event):\n        # è®¾ç½®é¼ æ ‡å½¢çŠ¶ Qt.ClosedHandCursor   éæŒ‡å‘æ‰‹\n        self.setCursor(Qt.ClosedHandCursor)\n\n    # å® ç‰©å³é”®ç‚¹å‡»äº¤äº’\n    def contextMenuEvent(self, event):\n        # å®šä¹‰èœå•\n        menu = QMenu(self)\n        # å®šä¹‰èœå•é¡¹\n        quitAction = menu.addAction(\"é€€å‡º\")\n        hide = menu.addAction(\"éšè—\")\n        # ä½¿ç”¨exec_()æ–¹æ³•æ˜¾ç¤ºèœå•ã€‚ä»é¼ æ ‡å³é”®äº‹ä»¶å¯¹è±¡ä¸­è·å¾—å½“å‰åæ ‡ã€‚mapToGlobal()æ–¹æ³•æŠŠå½“å‰ç»„ä»¶çš„ç›¸å¯¹åæ ‡è½¬æ¢ä¸ºçª—å£ï¼ˆwindowï¼‰çš„ç»å¯¹åæ ‡ã€‚\n        action = menu.exec_(self.mapToGlobal(event.pos()))\n        # ç‚¹å‡»äº‹ä»¶ä¸ºé€€å‡º\n        if action == quitAction:\n            qApp.quit()\n        # ç‚¹å‡»äº‹ä»¶ä¸ºéšè—\n        if action == hide:\n            # é€šè¿‡è®¾ç½®é€æ˜åº¦æ–¹å¼éšè—å® ç‰©\n            self.setWindowOpacity(0)\n\n\nif __name__ == '__main__':\n    # åˆ›å»ºäº†ä¸€ä¸ªQApplicationå¯¹è±¡ï¼Œå¯¹è±¡åä¸ºappï¼Œå¸¦ä¸¤ä¸ªå‚æ•°argc,argv\n    # æ‰€æœ‰çš„PyQt5åº”ç”¨å¿…é¡»åˆ›å»ºä¸€ä¸ªåº”ç”¨ï¼ˆApplicationï¼‰å¯¹è±¡ã€‚sys.argvå‚æ•°æ˜¯ä¸€ä¸ªæ¥è‡ªå‘½ä»¤è¡Œçš„å‚æ•°åˆ—è¡¨ã€‚\n    app = QApplication(sys.argv)\n    # çª—å£ç»„ä»¶åˆå§‹åŒ–\n    pet = DesktopPet()\n    # 1. è¿›å…¥æ—¶é—´å¾ªç¯ï¼›\n    # 2. waitï¼Œç›´åˆ°å“åº”appå¯èƒ½çš„è¾“å…¥ï¼›\n    # 3. QTæ¥æ”¶å’Œå¤„ç†ç”¨æˆ·åŠç³»ç»Ÿäº¤ä»£çš„äº‹ä»¶ï¼ˆæ¶ˆæ¯ï¼‰ï¼Œå¹¶ä¼ é€’åˆ°å„ä¸ªçª—å£ï¼›\n    # 4. ç¨‹åºé‡åˆ°exit()é€€å‡ºæ—¶ï¼Œæœºä¼šè¿”å›exec()çš„å€¼ã€‚\n    sys.exit(app.exec_())\n</code></pre>\n</div>\n<h1>ä¸‰ã€ç¨‹åºæ‰“åŒ…</h1>\n<h2>3.1 å®‰è£…pyinstaller</h2>\n<div>\n<pre><code class=\"language-python\">pip install pyinstaller \n</code></pre>\n</div>\n<p>å¦‚æœæç¤ºé»„è‰²æç¤ºpipç‰ˆæœ¬é—®é¢˜ï¼Œç…§ç€ä¸Šé¢çš„æç¤ºä¿®æ”¹å³å¯</p>\n<h2> 3.2 é¡¹ç›®ç›®å½•ä¸‹å®Œæˆæ‰“åŒ…</h2>\n<p>        è¿›å…¥æ‰“å¼€cmdå‘½ä»¤è¡Œï¼Œè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œè¾“å…¥å‘½ä»¤</p>\n<div>\n<pre><code class=\"language-python\">pyinstaller -F -w main.py\n</code></pre>\n</div>\n<p><img alt=\"\" height=\"170\" src=\"..\\..\\static\\image\\aff4486b86fc45ddbebff9352eacbb95.png\" width=\"1095\"/></p>\n<p>         æ‰“åŒ…å®Œæˆåï¼Œåœ¨ç”Ÿæˆçš„disté‡Œé¢å¯ä»¥çœ‹åˆ°main.exeæ–‡ä»¶</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"194\" src=\"..\\..\\static\\image\\75d443368b7143c983c0743600553458.png\" width=\"584\"/></p>\n<p>â€‹</p>\n</div>\n<p>         </p>\n<p>        è¿™é‡Œå› ä¸ºæˆ‘è‡ªå·±çš„åŸå› ï¼Œéœ€è¦å°†main.exeæ”¾åˆ°ä¸»ç›®å½•ä¸‹æ‰å¯æ­£å¸¸è¿è¡Œ</p>\n<div>\n<p class=\"img-center\"><img alt=\"\" height=\"187\" src=\"..\\..\\static\\image\\bf982a14dba5493b998820a1f9f38ffc.png\" width=\"452\"/></p>\n<p>â€‹</p>\n</div>\n<p></p>\n<h1>å››ã€æ€»ç»“ä¸å‚è€ƒèµ„æ–™</h1>\n<h1>4.1 é¡¹ç›®ç™¾åº¦ç½‘ç›˜ï¼š</h1>\n<p>é“¾æ¥ï¼šhttps://pan.baidu.com/s/1YYXzGpmCJkz43tYuki1wFQ <br/> æå–ç ï¼š3gkw</p>\n<p><img alt=\"\" height=\"617\" src=\"..\\..\\static\\image\\f8aebebc85604b92a6965aeeb3312795.png\" width=\"1200\"/></p>\n<p>DeskTopPetEXEä¸ºå¸¦æ‰“åŒ…å¥½çš„æ–‡ä»¶ã€‚</p>\n<p>DeskTopPetæ˜¯æ‰“åŒ…å‰çš„æ–‡ä»¶ã€‚</p>\n<p></p>\n<h1>4.2 æ€»ç»“</h1>\n<p>å†™ä¹‹å‰æŒºå¼€å¿ƒçš„ï¼Œå†™çš„æ—¶å€™ä¹ŸæŒºå¼€å¿ƒçš„ï¼Œå†™å®Œä¹‹åå°±æœ‰ç‚¹ç´¢ç„¶æ— å‘³äº†ã€‚ç”¨pythonåšä¸€ä¸ªç®€å•çš„æ¡Œé¢å® ç‰©ï¼Œæˆ‘çœ‹åˆ°çš„æ–¹æ³•é™¤äº†æˆ‘å‚è€ƒçš„è¿™ç§åŠ è½½GIFå›¾å¤–ï¼š</p>\n<p><a href=\"https://blog.csdn.net/dQCFKyQDXYm3F8rB0/article/details/114957009?spm=1001.2101.3001.6650.16&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-16-114957009-blog-123293381.topblog&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-16-114957009-blog-123293381.topblog&amp;utm_relevant_index=26\" title=\"Python ç©å‡ºèŠ±å„¿ï¼ŒæŠŠç½—å°é»‘å…»åœ¨è‡ªå·±æ¡Œé¢_AIç§‘æŠ€å¤§æœ¬è¥çš„åšå®¢-CSDNåšå®¢\">Python ç©å‡ºèŠ±å„¿ï¼ŒæŠŠç½—å°é»‘å…»åœ¨è‡ªå·±æ¡Œé¢_AIç§‘æŠ€å¤§æœ¬è¥çš„åšå®¢-CSDNåšå®¢</a></p>\n<p>è¿˜æœ‰ä¸€ç§é€šè¿‡åŠ è½½å›¾ç‰‡å¸§çš„æ–¹å¼å®ç°</p>\n<p><a href=\"https://blog.csdn.net/hxxjxw/article/details/105923371?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165218719816782248520785%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165218719816782248520785&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-105923371-null-null.142%5Ev9%5Econtrol,157%5Ev4%5Econtrol&amp;utm_term=python%E6%A1%8C%E9%9D%A2%E5%AE%A0%E7%89%A9&amp;spm=1018.2226.3001.4187\" title=\"Pythonå®ç°æ¡Œé¢å® ç‰©_hxxjxwçš„åšå®¢-CSDNåšå®¢_pythonæ¡Œé¢å® ç‰©\">Pythonå®ç°æ¡Œé¢å® ç‰©_hxxjxwçš„åšå®¢-CSDNåšå®¢_pythonæ¡Œé¢å® ç‰©</a></p>\n<p>è¿™ç§é€šè¿‡å›¾ç‰‡å¸§çš„åŠ è½½å®ç°ï¼Œéœ€è¦ç¼–å†™ä¸€ä¸ªè‡ªå®šä¹‰é…ç½®ç±»cfg.py,å¾ˆå¤šäººä¹Ÿä¸æŠŠè¿™ä¸ªä¸œè¥¿ä»£ç ç»™å‡ºæ¥ï¼š</p>\n<pre><code class=\"language-python\">'''é…ç½®æ–‡ä»¶'''\n\nROOT_DIR = 'resources'\nACTION_DISTRIBUTION = [['1', '2', '3'],\n                  ['4', '5', '6', '7', '8', '9', '10', '11'],\n                  ['12', '13', '14'],\n                  ['15', '16', '17', '18']]\n\n\nPET_ACTIONS_MAP = {'pet_1': ACTION_DISTRIBUTION}\nfor i in range(1, 4):\n   PET_ACTIONS_MAP.update({'pet_%s' % i: ACTION_DISTRIBUTION})</code></pre>\n<p>è¿™ç§æ–¹å¼å® ç‰©åŠ¨ä½œçš„å®ç°ï¼Œæ˜¯æ ¹æ®ä¸Šé¢è¿™ä¸ªé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½®çš„ï¼Œæ¯”å¦‚[1,2,3]å°±ä»£è¡¨è¿™ä¸ªpet_1æ–‡ä»¶å¤¹ä¸‹å¯¹åº”1ï¼Œ2ï¼Œ3å·å›¾ç‰‡ç»„æˆä¸€ä¸ªåŠ¨ä½œã€‚æˆ‘çœ‹åˆ°æœ‰äººç›´æ¥æŠŠè¿™ä¸ªå½“ä½œä¸€ä¸ªåŠ¨ä½œèµ‹å€¼ç»™å® ç‰©ï¼Œç„¶åå›¾ç‰‡å°±ä¼šè«åé¬¼ç•œã€‚</p>\n<p>çº¯ç²¹æ˜¯å› ä¸ºæ— èŠå†™ç€ç©çš„ï¼Œä¸‹æ¬¡å†è¯•è¯•èƒ½ä¸èƒ½å¼„ä¸ª3Dçš„ğŸ™‚</p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-05-11 15:12:20", "summary": "ä¸€ã€æ¡Œé¢å® ç‰©ç´ æéœ€è¦å‡†å¤‡ä»€ä¹ˆç´ ææ¡Œé¢å® ç‰©çš„å„ç§åŠ¨ç”»æ•ˆæœï¼Œå¯ä»¥çœ‹ä½œæ˜¯ç”±ä¸€ä¸ªä¸ªåŠ¨å›¾æ‹¼æ¥è€Œæˆï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡å¤šç»„åŠ¨å›¾æ¥å®ç°æ¡Œé¢å® ç‰©çš„åŠ¨ä½œåˆ‡æ¢ã€‚æœ€å¥½é€‰å–æ˜¯ç™½åº•çš„åŠ¨å›¾ã€‚ä»‹ç»å‡ ç§è·å¾—åŠ¨å›¾çš„æ–¹å¼é€šè¿‡å®ç°è§†é¢‘è½¬åœ¨å¯¼å‡ºçš„"}