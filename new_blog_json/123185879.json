{"blogid": "123185879", "writerAge": "码龄2年", "writerBlogNum": "2", "writerCollect": "53", "writerComment": "8", "writerFan": "11", "writerGrade": "1级", "writerIntegral": "39", "writerName": "Violet·Evergarden-", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123185879.jpg", "writerRankTotal": "194377", "writerRankWeekly": "1071052", "writerThumb": "12", "writerVisitNum": "7536", "blog_read_count": "5651", "blog_time": "于 2022-03-21 22:37:41 发布", "blog_title": "FastAPI 快速入门", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_FastAPI__0\"></a>👑 FastAPI 快速入门</h1>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_FastAPI__0\">👑 FastAPI 快速入门</a></li><li><a href=\"#_11\">😉前言</a></li><li><ul><li><a href=\"#FastApi_23\">一、👻FastApi？？</a></li><li><ul><li><a href=\"#1FastAPI_25\">1.😎FastAPI可以做什么</a></li><li><a href=\"#2_FastAPI_36\">2.🚲为什么要学习 FastAPI</a></li></ul>\n</li><li><a href=\"#_50\">二、💌准备工作</a></li><li><ul><li><a href=\"#1_51\">1.✨编译器工具</a></li><li><a href=\"#2python_56\">2.🎫python安装教程</a></li><li><a href=\"#3pycharm_60\">3.🎟pycharm安装教程</a></li><li><a href=\"#4_65\">4.💫安装虚拟环境</a></li></ul>\n</li><li><a href=\"#_72\">三、🥐🍞🧈</a></li><li><ul><li><a href=\"#1_74\">1.🍚开启服务和接口访问</a></li><li><a href=\"#2json_112\">2.🥗json数据</a></li><li><a href=\"#3api_122\">3.🌮api文档在线生成</a></li><li><a href=\"#4_131\">4.🥪发送请求</a></li><li><a href=\"#5URL_139\">5.🥪获取URL参数</a></li><li><a href=\"#6_160\">6.🥧获取请求头参数</a></li><li><a href=\"#7_179\">7.🍥表单获取数据</a></li><li><a href=\"#8JSON_206\">8.🍲自定义返回JSON信息</a></li><li><a href=\"#8HTML_229\">8.🥡自定义返回HTML</a></li><li><a href=\"#9_261\">9.🥖自定义返回文件</a></li><li><a href=\"#10HTML_299\">10.🍿自定义返回HTML页面</a></li><li><a href=\"#11_326\">11.🥩代办事项小案例</a></li><li><a href=\"#12_339\">12.🧃绑定数据库</a></li><li><a href=\"#13_347\">13.🧃数据库访问</a></li><li><a href=\"#14_401\">14.🍘数据库写入</a></li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<hr color=\"#000000\" size='1\"'/>\n<h1><a id=\"_11\"></a>😉前言</h1>\n<p><font color=\"#999AAA\"><strong>提示：</strong><br/> 🍝面向有一丢丢后端基础的<br/> 🎂文章为个人学习心得 如有冒犯 call me！<br/> 🛴快点做！！！！**<br/> </font></p>\n<hr color=\"#000000\" size='1\"'/>\n<h2><a id=\"FastApi_23\"></a>一、👻FastApi？？</h2>\n<p>😀----😃----连----😃----接----😄----线----😆</p>\n<h3><a id=\"1FastAPI_25\"></a>1.😎FastAPI可以做什么</h3>\n<p>🍳<strong>由Sebastian Ramirez开发</strong><br/> 😀----😃----连----😃----接----😄----线----😆<br/> 🍿<strong>开发网站</strong><br/> 🌭<strong>开发 web API</strong><br/> 🥐<strong>做一个测试平台</strong><br/> 🥠<strong>做一个持续集成工具</strong><br/> 🍣<strong>生成文档</strong></p>\n<p>😀----😃----连----😃----接----😄----线----😆</p>\n<h3><a id=\"2_FastAPI_36\"></a>2.🚲为什么要学习 FastAPI</h3>\n<p><strong>🎈FastAPI的使用方法和设计参考了几十个python明星项目 博采众长 吸收各家精华<br/> 🧨FastAPI和Flask一样简约<br/> FastAPI非常新 并且基于python3.6的类型声明系统</strong></p>\n<p>😀----😃----连----😃----接----😄----线----😆<br/> <strong>🎨自动生成文档<br/> 🎀类型声明和数据检验<br/> 🛒内置身份认证<br/> 🩳性能强<br/> 🎋原生支持异步<br/> 🎏强大的依赖注入系统<br/> 🧣GraphQL和WebSocket支持</strong></p>\n<h2><a id=\"_50\"></a>二、💌准备工作</h2>\n<h3><a id=\"1_51\"></a>1.✨编译器工具</h3>\n<p>😀----😃----连----😃----接----😄----线----😆<br/> <strong>🎠Python<br/> 🎐Pycharm</strong></p>\n<h3><a id=\"2python_56\"></a>2.🎫python安装教程</h3>\n<pre><code class=\"prism language-bash\">https://www.runoob.com/python/python-install.html\n</code></pre>\n<h3><a id=\"3pycharm_60\"></a>3.🎟pycharm安装教程</h3>\n<pre><code class=\"prism language-bash\">runoob.com/w3cnote/pycharm-windows-install.html\n</code></pre>\n<h3><a id=\"4_65\"></a>4.💫安装虚拟环境</h3>\n<p>🥪<strong>创建项目工程</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8d6dca005f334ae4af0b3b47aa48fd8a.png\"/><br/> 🥩<strong>安装环境</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ccb245284a2a4169b48a3361832ccd6f.png\"/><br/> 🍿<strong>安装fastapi</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9654fba8b2814c53926b27073237d5d8.png\"/></p>\n<h2><a id=\"_72\"></a>三、🥐🍞🧈</h2>\n<h3><a id=\"1_74\"></a>1.🍚开启服务和接口访问</h3>\n<p>🥯<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\478d2402348e491f989c6798c2eb5390.png\"/><br/> 🦪<strong>服务器运行</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\fe6b2c62d0be4f7e968ee97d627a2cf2.png\"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9142672b10f94f6a95d82d8439e2d36a.png\"/><br/> 🍣<strong>添加接口</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1cc39241163d4172ac1dc287c71e0a1d.png\"/><br/> 🍤<strong>main</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 添加首页</span>\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\ndef index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"This is Home Page.\"</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>🍛<strong>重新运行项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5b580484b31c46d7b14bb9fc854ccfe3.png\"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\944c41ca73594f05b521c06427b7b525.png\"/></p>\n<h3><a id=\"2json_112\"></a>2.🥗json数据</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2fe1df7e764e4698bc9da2fd4e500bc8.png\"/><br/> 🥠<strong>重新项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4cce55ea87904dfa98878e7c8768887f.png\"/><br/> 🥖<strong>json数据格式解析</strong></p>\n<pre><code class=\"prism language-bash\">https://www.json.cn/\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ba48b3c05f9540819d2afa9049f7bfc0.png\"/></p>\n<h3><a id=\"3api_122\"></a>3.🌮api文档在线生成</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b826945549114e81bbd11f12a7ff6759.png\"/><br/> 🌯<strong>文档解析</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4364d2604ef84d399c5cf53df12e7faf.png\"/><br/> 🍱<strong>文档备注信息</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cb931e2bc2094624b602576f46df3d72.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2dc7239a03bf4bab84ce3ecd7349f467.png\"/></p>\n<h3><a id=\"4_131\"></a>4.🥪发送请求</h3>\n<p>🍥<strong>POST请求</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\61498e62681143f58a04eb6ddccb09e6.png\"/><br/> 🥚<strong>使用ApiPost接口测试工具来访问接口</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9409b44682a34b20bc641518e51ca8df.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c4f45dc63f3b4c21b7bd716d6230dcd1.png\"/><br/> 🍢<strong>定义多种请求格式</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c5c86680fe994a12906990ab667277d1.png\"/></p>\n<h3><a id=\"5URL_139\"></a>5.🥪获取URL参数</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a8119461cef3433f9b266c9014d403f7.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\eaef4bbe6ff64dc1a312dfabe4394411.png\"/><br/> 🍧<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user/{id}\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span>id<span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"id\"</span>:id<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"6_160\"></a>6.🥧获取请求头参数</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5e849fea06354ccaab0870343236d198.png\"/><br/> 😀----😃----连----😃----接----😄----线----😆<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\512fc6c416d14dd8a968eadb3f23e69e.png\"/><br/> 🥞<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI,Header\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span>id, token<span class=\"token operator\">=</span>Header<span class=\"token punctuation\">(</span>None<span class=\"token punctuation\">))</span>:\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"id\"</span>:id,<span class=\"token string\">\"token\"</span>:token<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"7_179\"></a>7.🍥表单获取数据</h3>\n<p>🥘<strong>安装包</strong></p>\n<pre><code class=\"prism language-bash\">python-multipart\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8fcb5ebec2a448a194d0ae4b61647078.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f9cab381b11046c48a744c388d276f7e.png\"/><br/> 🍭<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI,Header,Form\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span>id, token<span class=\"token operator\">=</span>Header<span class=\"token punctuation\">(</span>None<span class=\"token punctuation\">))</span>:\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"id\"</span>:id,<span class=\"token string\">\"token\"</span>:token<span class=\"token punctuation\">}</span>\n\n@app.post<span class=\"token punctuation\">(</span><span class=\"token string\">\"/login\"</span><span class=\"token punctuation\">)</span>\ndef login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>Form<span class=\"token punctuation\">(</span>None<span class=\"token punctuation\">)</span>,password<span class=\"token operator\">=</span>Form<span class=\"token punctuation\">(</span>None<span class=\"token punctuation\">))</span>:\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"data\"</span>:<span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"username\"</span>:username,<span class=\"token string\">\"password\"</span>:password<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"8JSON_206\"></a>8.🍲自定义返回JSON信息</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0d8fd4040834406ebec6fbeaab1fb247.png\"/><br/> 🍾<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\nfrom fastapi.responses <span class=\"token function\">import</span> JSONResponse\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> JSONResponse<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"msg\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"get user\"</span><span class=\"token punctuation\">}</span>,\n                        status_code<span class=\"token operator\">=</span>202,\n                        headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"a\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\968c032a0d004b80bb1d14546c988abe.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d5d600bd174f4a018f2b2b528b8ef081.png\"/></p>\n<h3><a id=\"8HTML_229\"></a>8.🥡自定义返回HTML</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\65ed14e4a58949dba8f7e739e600a281.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\245d8932565047c9b4e41c4415762991.png\"/><br/> 🍣<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\nfrom fastapi.responses <span class=\"token function\">import</span> JSONResponse,HTMLResponse\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> JSONResponse<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"msg\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"get user\"</span><span class=\"token punctuation\">}</span>,\n                        status_code<span class=\"token operator\">=</span>202,\n                        headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"a\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    html_content<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token string\">\"\n    &lt;html&gt;\n        &lt;body&gt;&lt;p style=\"</span>color:red<span class=\"token string\">\"&gt;Hello World&lt;/p&gt;&lt;/body&gt;\n        &lt;/html&gt;\n    \"</span><span class=\"token string\">\"\"</span>\n    <span class=\"token keyword\">return</span> HTMLResponse<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span>html_content<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"9_261\"></a>9.🥖自定义返回文件</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\d88adb56b8954da989a8c99c4f374ae5.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\a1bcdba299db40cb826ff5598eedbe00.png\"/><br/> 🥨<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI\nfrom fastapi.responses <span class=\"token function\">import</span> JSONResponse,HTMLResponse\nfrom starlette.responses <span class=\"token function\">import</span> FileResponse\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> JSONResponse<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"msg\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"get user\"</span><span class=\"token punctuation\">}</span>,\n                        status_code<span class=\"token operator\">=</span>202,\n                        headers<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"a\"</span><span class=\"token keyword\">:</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    html_content<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token string\">\"\n    &lt;html&gt;\n        &lt;body&gt;&lt;p style=\"</span>color:red<span class=\"token string\">\"&gt;Hello World&lt;/p&gt;&lt;/body&gt;\n        &lt;/html&gt;\n    \"</span><span class=\"token string\">\"\"</span>\n    <span class=\"token keyword\">return</span> HTMLResponse<span class=\"token punctuation\">(</span>content<span class=\"token operator\">=</span>html_content<span class=\"token punctuation\">)</span>\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/avatar\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>:\n    avatar<span class=\"token operator\">=</span><span class=\"token string\">'./static/violet.jpg'</span>\n    <span class=\"token keyword\">return</span> FileResponse<span class=\"token punctuation\">(</span>avatar<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"10HTML_299\"></a>10.🍿自定义返回HTML页面</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\29607746fe3e4939bded1e49b11007d8.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b40bb301fcb04324bddd2059b2458092.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3472dfe729e64448b39fbd137667ad8f.png\"/><br/> 🥣<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI,Request\nfrom fastapi.templating <span class=\"token function\">import</span> Jinja2Templates\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntemplate<span class=\"token operator\">=</span>Jinja2Templates<span class=\"token punctuation\">(</span><span class=\"token string\">\"pages\"</span><span class=\"token punctuation\">)</span>\n\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\ndef user<span class=\"token punctuation\">(</span>req:Request<span class=\"token punctuation\">)</span>:\n    <span class=\"token keyword\">return</span> template.TemplateResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span>,context<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"request\"</span>:req<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>🍕<strong>返回结果</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\caf78707cc0243718ecdaecc2c203406.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ab3e4511f5e3401681a60825b7b02847.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8c724567585242fda2813ec4d9c7c244.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\10648bddd8bb4fd888e01637aba509d7.png\"/></p>\n<h3><a id=\"11_326\"></a>11.🥩代办事项小案例</h3>\n<p>🥯<strong>main.py</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\cb7e649ad2eb42e5afa1b1192b74a28f.png\"/><br/> 🍣<strong>index.html</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e10b003213dc4fcc89c7c8a3ff0d6d3c.png\"/><br/> 🧂<strong>运行项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\76511dc15aaf455ea2e3cd09fb93c8be.png\"/><br/> 🍞<strong>main.py</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e83089dee31649d99dc87e1e67d1c4e7.png\"/><br/> 🍱<strong>index.html</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\06714d0d02eb4b7db04cac5ac426fc5d.png\"/><br/> 🍥<strong>运行项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\21728b48af0049cba2c8cca189d37699.png\"/></p>\n<h3><a id=\"12_339\"></a>12.🧃绑定数据库</h3>\n<p>🍩<strong>安装 tortoise-orm</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\29be295659f745b288ec3ea476977c23.png\"/><br/> 🍝<strong>安装 aiomysql</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\ef94dd56560643799df04e6ebad8ce0d.png\"/></p>\n<p>🥧<strong>main.py</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\be83e5a3db044feaa3b70b611d1f3286.png\"/></p>\n<h3><a id=\"13_347\"></a>13.🧃数据库访问</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\002366273c66491badce69f0fd06a47d.png\"/><br/> 🍺<strong>models.py</strong></p>\n<pre><code class=\"prism language-bash\">from tortoise <span class=\"token function\">import</span> Model,fields\n\nclass Todo<span class=\"token punctuation\">(</span>Model<span class=\"token punctuation\">)</span>:\n    id<span class=\"token operator\">=</span>fields.IntField<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n    content<span class=\"token operator\">=</span>fields.CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span>500<span class=\"token punctuation\">)</span>\n    create_at<span class=\"token operator\">=</span>fields.DatetimeField<span class=\"token punctuation\">(</span>auto_now_add<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n    updated_at<span class=\"token operator\">=</span>fields.DatetimeField<span class=\"token punctuation\">(</span>auto_now<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8f15b796d86f43d38de5110d4b252893.png\"/><br/> 🍤<strong>main.py</strong></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">import</span> uvicorn\nfrom fastapi <span class=\"token function\">import</span> FastAPI, Request, Form\nfrom fastapi.responses <span class=\"token function\">import</span> RedirectResponse\nfrom starlette.templating <span class=\"token function\">import</span> Jinja2Templates\nfrom tortoise.contrib.fastapi <span class=\"token function\">import</span> register_tortoise\n\nfrom dao.models <span class=\"token function\">import</span> Todo\n\napp<span class=\"token operator\">=</span>FastAPI<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ntemplate<span class=\"token operator\">=</span>Jinja2Templates<span class=\"token punctuation\">(</span><span class=\"token string\">\"pages\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 数据库绑定</span>\nregister_tortoise<span class=\"token punctuation\">(</span>app,db_url<span class=\"token operator\">=</span><span class=\"token string\">\"mysql://root:123456@localhost:3306/fastapi\"</span>,\n                  modules<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"models\"</span>:<span class=\"token punctuation\">[</span><span class=\"token string\">'dao.models'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>,\n                  add_exception_handlers<span class=\"token operator\">=</span>True,\n                  generate_schemas<span class=\"token operator\">=</span>True<span class=\"token punctuation\">)</span>\n\ntodos <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"写日记\"</span>, <span class=\"token string\">\"看电影\"</span>, <span class=\"token string\">\"玩游戏\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 添加首页</span>\n@app.get<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\nasync def user<span class=\"token punctuation\">(</span>req:Request<span class=\"token punctuation\">)</span>:\n    todos<span class=\"token operator\">=</span>await Todo.all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    print<span class=\"token punctuation\">(</span>todos<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> template.TemplateResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"index.html\"</span>,context<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"request\"</span>:req,<span class=\"token string\">\"todos\"</span>:todos<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n@app.post<span class=\"token punctuation\">(</span><span class=\"token string\">\"/todo\"</span><span class=\"token punctuation\">)</span>\ndef todo<span class=\"token punctuation\">(</span>todo<span class=\"token operator\">=</span>Form<span class=\"token punctuation\">(</span>None<span class=\"token punctuation\">))</span>:\n    todos.insert<span class=\"token punctuation\">(</span>0,todo<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> RedirectResponse<span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span>,status_code<span class=\"token operator\">=</span>302<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token keyword\">:</span>\n    uvicorn.run<span class=\"token punctuation\">(</span>app<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>🍳<strong>运行项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\5e25b40b837945679018efdcf4d93378.png\"/></p>\n<h3><a id=\"14_401\"></a>14.🍘数据库写入</h3>\n<p>🥗<strong>main.py</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3645ee70e01c40938ceb1462fcede995.png\"/><br/> 🍹<strong>运行项目</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\239d37e93ce842b1a985a37a3e17294b.png\"/><br/> 🍕<strong>数据库里就多了个字段</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\137af7d31e824a40a3e5dda232c347c6.png\"/><br/> 🥞<strong>此时就是显示有问题</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\96f8b3dbe2c74b3badd940710c6592ce.png\"/><br/> 🍚<strong>index.html</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dc9d0ca5defd46e8aae67d5667eda9de.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\15140f7e63cd4cdcbe54a96da9cc4cab.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-03-21 22:37:41", "summary": "快速入门文章目录快速入门前言一、？？可以做什么为什么要学习二、准备工作编译器工具安装教程安装教程安装虚拟环境三、开启服务和接口访问数据文档在线生成发送请求获取参数获取请求头参数表单获取数据自定义返回信"}