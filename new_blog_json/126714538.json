{"blogid": "126714538", "writerAge": "码龄7年", "writerBlogNum": "60", "writerCollect": "1651", "writerComment": "154", "writerFan": "3309", "writerGrade": "5级", "writerIntegral": "2282", "writerName": "haichuangdianzi", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126714538.jpg", "writerRankTotal": "8847", "writerRankWeekly": "10330", "writerThumb": "479", "writerVisitNum": "214714", "blog_read_count": "305", "blog_time": "于 2022-09-05 22:03:52 发布", "blog_title": "在云服务器中搭建MQTT平台", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_2\"></a></h1>\n<h2><a id=\"1_4\"></a>1、服务器购买</h2>\n<p>https://www.aliyun.com/ 打开网址，注册账号。按下图一步步操作。</p>\n<p><img alt=\"image-20220905171609329\" src=\"..\\..\\static\\image\\0f4086e4c3c3a894981ac0f97b28c661.png\"/></p>\n<p><img alt=\"image-20220905171702609\" src=\"..\\..\\static\\image\\3f9839890e47604d259b71764557d5c1.png\"/></p>\n<p>由于实验为主，购买低配，安装windows 64位服务器，如步骤④⑤所示。</p>\n<p><img alt=\"image-20220905171857184\" src=\"..\\..\\static\\image\\0e2d88c7e050c6487d80ca83bb40b961.png\"/></p>\n<p>进行系统配置。</p>\n<p><img alt=\"image-20220905174842751\" src=\"..\\..\\static\\image\\e1232e2d2ba9afc95ff0edf634bcf799.png\"/></p>\n<p>设置登录密码，后面远程登录会用到。</p>\n<p><img alt=\"image-20220905175009694\" src=\"..\\..\\static\\image\\ab3e38e5bac04be8d3e337f740fb68fa.png\"/></p>\n<p><img alt=\"image-20220905175134415\" src=\"..\\..\\static\\image\\5eb199649d18865d10de0388425a2497.png\"/></p>\n<p>购买完成后，直接点击“管理控制台”进行配置，主要配置规则。</p>\n<p><img alt=\"image-20220905175405337\" src=\"..\\..\\static\\image\\ff56e622e184970304da44e54eb13b2f.png\"/></p>\n<p>首先点击左侧的“安全组”。这里简单讲下为什么要配置安全组，比如你要去参观朋友居住的寝室，那么会事先跟朋友讲好，你要过来了，把你住的的寝室门打开，这样到时你才能进去，而别的寝室由于没有打招呼就一直是关着的。其实这里的“门”相当于端口，由于以后会涉及到各种各样的端口，我们就直接把所有的端口都打开，这也是我们为什么配置安全组的原因。</p>\n<p><img alt=\"image-20220905211831480\" src=\"..\\..\\static\\image\\6cb24ffd3d117f89ee590df1b9d3250f.png\"/></p>\n<p>看到右侧有“配置规则”，点击进入。</p>\n<p><img alt=\"image-20220905180744472\" src=\"..\\..\\static\\image\\30c9c78146c3713e3dae104be3c3ac60.png\"/></p>\n<p>在“入方向”和“出方向”都要进行配置，先进行“入方向”配置，手动添加。</p>\n<p><img alt=\"image-20220905180807567\" src=\"..\\..\\static\\image\\c3d1dc8ba2cfeebe5bd1dbb3afe25db4.png\"/></p>\n<p>根据下图配置</p>\n<p><img alt=\"image-20220905180834754\" src=\"..\\..\\static\\image\\5150aa223d4a52fd2528c0819481d48c.png\"/></p>\n<p>进行“出方向”配置，同理于“入方向”配置。</p>\n<p><img alt=\"image-20220905180859968\" src=\"..\\..\\static\\image\\b26c213633a4baf6c5e5b4d0a374636f.png\"/></p>\n<p><img alt=\"image-20220905180920635\" src=\"..\\..\\static\\image\\c0d568914391bcc19cedd6d4ebbf35f4.png\"/></p>\n<p><img alt=\"image-20220905181135178\" src=\"..\\..\\static\\image\\7b718125428a39a5698e0dba8b27a420.png\"/></p>\n<p>购买的服务器配置到此为止。</p>\n<h2><a id=\"2_80\"></a>2、远程登录</h2>\n<p>按住键盘的WIN+R，输入“mstsc”。</p>\n<p><img alt=\"image-20220905181901864\" src=\"..\\..\\static\\image\\39623302240ba8e9e3a4e12576d3a58c.png\"/></p>\n<p>在①处输入购买的服务器公有IP地址。由于有需要将本地电脑中的资料复制到云服务器，将建立本地电脑和云服务器的连接，点击②处。</p>\n<p><img alt=\"image-20220905183127281\" src=\"..\\..\\static\\image\\896804a3a7ce4f29f3636851346c11bf.png\"/></p>\n<p>点击“详细信息”。</p>\n<p><img alt=\"image-20220905183206711\" src=\"..\\..\\static\\image\\dfec678a917dacd31a4997299cab7771.png\"/></p>\n<p>勾选“I”盘，大家根据需要勾选，因为我的资料都在I盘。</p>\n<p><img alt=\"image-20220905183223138\" src=\"..\\..\\static\\image\\c4bbbb6ef519e1fc95fdb8a140297247.png\"/></p>\n<p>确认后，点击“连接”。</p>\n<p><img alt=\"image-20220905183239271\" src=\"..\\..\\static\\image\\584715c8e5c7974411943ebb13ad5340.png\"/></p>\n<p>输入之前设置的密码。</p>\n<p><img alt=\"image-20220905182053422\" src=\"..\\..\\static\\image\\5fe9d7fd759fbf33e64dc751558d7072.png\"/></p>\n<p>按要求操作。</p>\n<p><img alt=\"image-20220905182116986\" src=\"..\\..\\static\\image\\4cadfac831597eb4bea2d5eb334c6eba.png\"/></p>\n<p>进入服务器以后，可以看到本地电脑的I盘了。</p>\n<p><img alt=\"image-20220905183345938\" src=\"..\\..\\static\\image\\2dcc8f809da5fd9607822240f6981450.png\"/></p>\n<h2><a id=\"3mqtt_120\"></a>3、mqtt平台搭建</h2>\n<p>在云服务器中搭建mqtt平台需要用到两个文件，在本地电脑中如下图所示。</p>\n<p><img alt=\"image-20220905212937356\" src=\"..\\..\\static\\image\\7f1f15d6963f4c6aa8e876e40e6f329c.png\"/></p>\n<p>链接：https://pan.baidu.com/s/1soetUhqIDHqpUrbXuDgPwg?pwd=udbe<br/> 提取码：udbe<br/> 在云服务器中打开I盘，将本地I盘中的formqtt文件夹复制到云服务器中的C盘，如下图所示，将其中的压缩包解压。（注意：由于购买的服务器配置低，解压速度慢，有考虑先在本地电脑解压，再复制。这样有一定的风险，文件容易丢失，因此最好压缩包复制过去，在云服务器中解压）。<mark>接下去操作均在云服务器中操作！！</mark></p>\n<p><img alt=\"image-20220905193620919\" src=\"..\\..\\static\\image\\8f1bfc99c216b807b529a247a9d95976.png\"/></p>\n<p>在云服务其中按下图的路径复制 msvcv120.dll文件。</p>\n<p><img alt=\"image-20220905193636665\" src=\"..\\..\\static\\image\\21da2ce00fa5630ed3796238f20d6944.png\"/></p>\n<p>复制到下图路径。</p>\n<p><img alt=\"image-20220905193727894\" src=\"..\\..\\static\\image\\5104119af475fd93ab0f4beb05e016f2.png\"/></p>\n<p>打开下图路径，接下去需要运行emqttd文件。根据以往知识，首先要在命令框中打开对应路径，再运行，这里教大家一个简单方法，在下图箭头地方直接输入cmd.</p>\n<p><img alt=\"image-20220905193820234\" src=\"..\\..\\static\\image\\ab365e575b0dc8c979d920dea6864bec.png\"/></p>\n<p>从命令框中我们知道已经进入了bin文件夹，输入指令 <strong>emqttd console</strong></p>\n<p><img alt=\"image-20220905193918879\" src=\"..\\..\\static\\image\\6d29a51205cf6f6046a64c3df486a33e.png\"/></p>\n<p>第一次启动的时候可能没反应，再重新运行一次，如下图，启动成功。</p>\n<p><img alt=\"image-20220905194055065\" src=\"..\\..\\static\\image\\2fc4163f858c4b75c88bd67c5bcb0d48.png\"/></p>\n<p>在网页输入http://IP地址:18083，提示输入账号密码。默认的账号：admin。密码：public。</p>\n<p><img alt=\"image-20220905194500536\" src=\"..\\..\\static\\image\\7ad2d8d438e9619759e5a7a65275f345.png\"/></p>\n<p>如下图，配置完成。</p>\n<p><img alt=\"image-20220905195328080\" src=\"..\\..\\static\\image\\7a381d82e13ca64e8b91c6f133bde382.png\"/></p>\n<p>在实际使用过程中涉及到mqtt的账号和密码，但我们不知道，我们就直接修改MQTT用户名和密码。</p>\n<p>首先关闭mqtt服务器。</p>\n<p><img alt=\"image-20220905201735100\" src=\"..\\..\\static\\image\\ebc2e8f8c20cdc72700b973141ef505c.png\"/></p>\n<p>根据文件夹路径找到文件，以写字板方式打开，<mark>不要用记事本方式打开！！！</mark></p>\n<p><img alt=\"image-20220905204626455\" src=\"..\\..\\static\\image\\35318f606033e21548e4dc35519c55ab.png\"/></p>\n<p>将“true”改成“false”。</p>\n<p><img alt=\"image-20220905204228511\" src=\"..\\..\\static\\image\\534013c49fe566f51d660f201703757e.png\"/></p>\n<p>在“plugins”文件夹下找到emq_auth_username.conf文件，添加账号和密码。</p>\n<p><img alt=\"image-20220905204550889\" src=\"..\\..\\static\\image\\356f750e5d5b7ede81ed61527b2f22b3.png\"/></p>\n<p>到此为止修改完成！！</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-05 22:03:52", "summary": "、服务器购买打开网址，注册账号。按下图一步步操作。由于实验为主，购买低配，安装位服务器，如步骤所示。进行系统配置。设置登录密码，后面远程登录会用到。购买完成后，直接点击管理控制台进行配置，主要配置规则"}