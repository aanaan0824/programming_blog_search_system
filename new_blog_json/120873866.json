{"blogid": "120873866", "writerAge": "码龄8年", "writerBlogNum": "4", "writerCollect": "15", "writerComment": "1", "writerFan": "2", "writerGrade": "1级", "writerIntegral": "41", "writerName": "思海999", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_120873866.jpg", "writerRankTotal": "182442", "writerRankWeekly": "1074694", "writerThumb": "0", "writerVisitNum": "3878", "blog_read_count": "2467", "blog_time": "于 2021-10-20 20:03:15 发布", "blog_title": "C#使用Modbus开源库NModbus4以TCP方式读取数据", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>首先Modbus slave配置如下：</p>\n<p><img alt=\"\" height=\"507\" src=\"..\\..\\static\\image\\c064a8920ed841d997a6cab4d7c5e5f4.png\" width=\"483\"/></p>\n<p> </p>\n<p><img alt=\"\" height=\"580\" src=\"..\\..\\static\\image\\35598cea53b94ea291ff0790c8d4c6f6.png\" width=\"460\"/><img alt=\"\" height=\"505\" src=\"..\\..\\static\\image\\1b7bc3b080bc4f6d90109b4dc1aaa777.png\" width=\"603\"/></p>\n<p> </p>\n<p> </p>\n<p>代码如下：</p>\n<p>using System;<br/> using System.Collections.Generic;<br/> using System.Linq;<br/> using System.Net;<br/> using System.Net.Sockets;<br/> using System.Text;<br/> using System.Threading.Tasks;<br/> using Modbus.Device;</p>\n<p>namespace ConsoleApp1<br/> {<!-- --><br/>     class Program<br/>     {<!-- --><br/>         static void Main(string[] args)<br/>         {<!-- --><br/>             IPAddress address = new IPAddress(new byte[] { 127, 0, 0, 1 });<br/>             using (TcpClient clinet = new TcpClient(address.ToString(), 502))<br/>             {<!-- --><br/>                 clinet.SendTimeout = 1;<br/>                 ModbusIpMaster master = ModbusIpMaster.CreateIp(clinet);</p>\n<p>                ushort startAddress = 0;<br/>                 ushort numInputs = 10;<br/>                 ushort[] inputs = master.ReadInputRegisters(1, startAddress, numInputs);</p>\n<p>                for (int i = 0; i &lt; numInputs; i++)<br/>                     Console.WriteLine($\"Registers {(startAddress + i)}={(inputs[i])}\");</p>\n<p><br/>             }<br/>         }<br/>     }<br/> }<br/>  </p>\n<p></p>\n<p>运行结果如下：</p>\n<p><img alt=\"\" height=\"280\" src=\"..\\..\\static\\image\\345f35154a8e4fe18c4a9a7b0b42bafd.png\" width=\"324\"/></p>\n<p> </p>\n<p></p>\n<p></p>\n</div>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2021-10-20 20:03:15", "summary": "首先配置如下：代码如下：运行结果如下："}