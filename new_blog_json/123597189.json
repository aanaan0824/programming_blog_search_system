{"blogid": "123597189", "writerAge": "码龄1年", "writerBlogNum": "31", "writerCollect": "24", "writerComment": "1", "writerFan": "8", "writerGrade": "2级", "writerIntegral": "318", "writerName": "YUuuuME_", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123597189.jpg", "writerRankTotal": "59985", "writerRankWeekly": "517905", "writerThumb": "5", "writerVisitNum": "17478", "blog_read_count": "4344", "blog_time": "已于 2022-04-16 18:58:29 修改", "blog_title": "Unity场景切换（同步切换，异步切换）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"Unity_0\"></a>Unity场景切换（同步切换，异步切换）</h1>\n<p>在游戏中终会会有场景的切换，因此在我们做完场景UI后或者是在对游戏完成后，场景的切换（从选关菜单进入到游戏界面，反之亦然）都会用到场景切换</p>\n<h2><a id=\"SceneManagerLoadScene_4\"></a>SceneManager.LoadScene();</h2>\n<p>同步加载，用于切换场景（非异步）</p>\n<p>例如在我们需要去从选关菜单进入到游戏界面时既可以这个方法，在此方法的参数中，需要加入\"String\"</p>\n<p>，String为所需加载场景的名称。<strong>当然在此之前我们需要把两个场景放入一个 Building Setting中</strong>（在File下，也可以通过快捷键CTRL SHIFT B快速进入）</p>\n<p>例如：</p>\n<pre><code class=\"prism language-c#\">void Start()\n    {\n        btn = transform.GetComponent&lt;Button&gt;();\n        //绑定事件的监听\n        btn.onClick.AddListener(ButClick);\n    }\n\n\n    public void ButClick()\n    {\n        text = transform.GetChild(0).GetComponent&lt;Text&gt;();\n        Debug.Log(\"加载Level.\" + text.text);\n        //切换场景的主要方法\n        SceneManager.LoadScene(\"Gaming\");\n    }\n</code></pre>\n<h2><a id=\"SceneManagerLoadSceneAsync_34\"></a>SceneManager.LoadSceneAsync();</h2>\n<p>异步切换场景，当场景过大时，加载需要较长的时间时就可以通过这种方法来加载新场景。在加载新场景时，通常会有一个另外的较为简单的场景作为过渡，为了交互性，可以显示一些加载的信息，像是使用Slider来加载显示当前的加载进度。当然一般来说，大部分游戏中的加载进度条都是假的，显示的并不是当前的加载进度，如果你在玩游戏时观察仔细就会发现，一般进度条都会在一个特定的地方卡住较长的事件，像是当下的原神，明日方舟也都有这种现象。照成这种现象的可能主要原因就是，在异步加载时，常常会有一个Boolean来控制进度，当这种Boolean为true时才会往下进行。</p>\n<p>同时我们用协同来控制其进度。</p>\n<p>例如：</p>\n<pre><code class=\"prism language-c#\">private void Start() {\n   \t\t//进度条进度的显示\n        progress = GetComponent&lt;Text&gt;();\n    \t//寻找slider\n        slider = FindObjectWithName&lt;Slider&gt;();\n    \t//协同加载\n        StartCoroutine(\"LoadSceneByAsync\");\n}\nIEnumerator LoadSceneByAsync() {\n        async = SceneManager.LoadSceneAsync(nextSceneName);\n        async.allowSceneActivation = false;\n    \t//控制进度条，当进度加载到0.95后并且玩家按下按钮时\n        while (!async.isDone) {\n            if (async.progress &lt; 0.95f){\n                progressNumber= async.progress;\n            }else{\n                progressNumber = 1.0f;\n            }\n\t\t\t//加载进度条的值\n            slider.value = progressNumber;\n            //显示进度条的百分比\n            progress.text = (int)(slider.value * 100) + \" %\";\n \t\t\t//在加载0.95后，按下空格键，从而进行场景跳转，也可以去掉条件，使其自动跳转到新场景\n            if (progressValue &gt;= 0.95) {\n                progress.text = \"按空格键以继续\";\n                if (Input.GetKeyDown(KeyCode.Space)) {\n                    async.allowSceneActivation = true;\n                }\n            }\n \t\t\t//结束函数\n            yield return null;\n        }\n \n    }\n\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-04-16 18:58:29", "summary": "场景切换同步切换，异步切换在游戏中终会会有场景的切换，因此在我们做完场景后或者是在对游戏完成后，场景的切换从选关菜单进入到游戏界面，反之亦然都会用到场景切换同步加载，用于切换场景非异步例如在我们需要去"}