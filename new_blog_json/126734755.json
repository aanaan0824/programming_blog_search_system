{"blogid": "126734755", "writerAge": "码龄3年", "writerBlogNum": "44", "writerCollect": "226", "writerComment": "274", "writerFan": "266", "writerGrade": "4级", "writerIntegral": "1231", "writerName": "乔伊波伊 o(*^＠^*)o", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126734755.jpg", "writerRankTotal": "16589", "writerRankWeekly": "299", "writerThumb": "288", "writerVisitNum": "7388", "blog_read_count": "121", "blog_time": "已于 2022-09-07 10:46:06 修改", "blog_title": "Qt5开发从入门到精通——第五篇四节（ 文本编辑器 Easy Word 开发 V1.3详解 ）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>欢迎小伙伴的点评✨✨，相互学习、互关必回、全天在线🍳🍳🍳<br/> 博主🧑🧑 本着开源的精神交流Qt开发的经验、将持续更新续章，为社区贡献博主自身的开源精神👩‍🚀</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_8\">前言</a></li><li><a href=\"#Qt_5__14\">一、Qt 5 文本编辑功能概述</a></li><li><a href=\"#_Easy_Word_V12__Easy_Word_V13_26\">二、基于 Easy Word V1.2 框架进行升级 Easy Word V1.3框架</a></li><li><ul><li><a href=\"#21_27\">2.1、实现增加文本编辑模块</a></li><li><a href=\"#22_Easy_Word_V13__96\">2.2、文本编辑器 Easy Word V1.3 槽函数与框架连接解析</a></li></ul>\n</li><li><a href=\"#_212\">三、效果实例</a></li><li><a href=\"#_219\">四、原码解析</a></li><li><ul><li><a href=\"#mainwindowh_228\">mainwindow.h</a></li><li><a href=\"#showwidgeth_352\">showwidget.h</a></li><li><a href=\"#maincpp_382\">main.cpp</a></li><li><a href=\"#mainwindowcpp_398\">mainwindow.cpp</a></li><li><a href=\"#showwidgetcpp_921\">showwidget.cpp</a></li></ul>\n</li><li><a href=\"#_941\">总结</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"_8\"></a>前言</h1>\n<p><font size=\"4\">本章节会给大家带来基于文本编辑器 Easy Word V1.2开发升级到Easy Word V1.3开发的解析。</font></p>\n<hr/>\n<h1><a id=\"Qt_5__14\"></a>一、Qt 5 文本编辑功能概述</h1>\n<p><font size=\"4\">在编写包含格式设置的文本编辑程序时，经常用到的 Qt 类有 QTextEdit、 QTextDocument、<br/> QTextBlock 、 QTextList 、 QTextFrame 、 QTextTable 、 QTextCharFormat 、 QTextBlockFormat 、<br/> QTextListFormat 、 QTextFrameFormat 和 QTextTableFormat 等。<br/> 文本编辑各类之间的划分与关系如图一所示。<br/> <strong>图一</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1148c18db0fd42d9b046cbeac68a3c07.jpeg\"/><br/> <font size=\"4\">任何一个文本编辑的程序都要用 QTextEdit 作为输入文本的容器，在它里面输入可编辑文本由 QTextDocument 作为载体，而用来表示 QTextDocument 的元素的 QTextBlock 、 QTextList 、QTextFrame 等是 QTextDocument 的不同表现形式，可以表示为字符串、段落、列表、表格或图片等。<br/> 每种元素都有自己的格式，这些格式则用 QTextCharFormat、 QTextBlockFormat、 QTextListFormat、<br/> QTextFrameFormat 等类来描述与实现。例如， QTextBlockFormat 类对应于 QTextBlock 类， QTextBlock<br/> 类用千表示一块文本，通常可以理解为一个段落，但它并不仅指段落； QTextBlockFormat 类则表示这一块文本的格式，如缩进的值、与四边的边距等。<br/> 从图一中可以看出，用千表示编辑文本中的光标 QTextCursor 类是一个非常重要且经常用到的类，它提供了对 QTextDocument 文档的修改接口，所有对文档格式的修改，说到底都与光标有关 。 例如，改变字符的格式，实际上指的是改变光标处字符的格式 。 又例如，改变段落的格式，实际上指的是改变光标所在段落的格式。因此，所有对 QTextDocument 的修改都能够通过 QTextCursor 类实现， QTextCursor 类在文档编辑类程序中具有重要的作用 。</font></font></p>\n<h1><a id=\"_Easy_Word_V12__Easy_Word_V13_26\"></a>二、基于 Easy Word V1.2 框架进行升级 Easy Word V1.3框架</h1>\n<h2><a id=\"21_27\"></a>2.1、实现增加文本编辑模块</h2>\n<p><font size=\"4\">(1)在 “mainwindow.h” 头文件中添加 “private:” 变量：</font></p>\n<pre><code class=\"prism language-cpp\">    <span class=\"token comment\">/****************文本编辑功能*****************/</span>\n\n    QLabel <span class=\"token operator\">*</span>fontLabel1<span class=\"token punctuation\">;</span> <span class=\"token comment\">//字体设置项</span>\n    QFontComboBox <span class=\"token operator\">*</span>fontComboBox<span class=\"token punctuation\">;</span>\n    QLabel <span class=\"token operator\">*</span>fontLabel2<span class=\"token punctuation\">;</span>\n    QComboBox <span class=\"token operator\">*</span>sizeComboBox<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>boldBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>italicBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>underlineBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>colorBtn<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>fontToolBar<span class=\"token punctuation\">;</span> <span class=\"token comment\">//字体工具栏</span>\n</code></pre>\n<p><font size=\"4\">(2)在函数createActions()中添加如下代码</font></p>\n<pre><code class=\"prism language-cpp\">    <span class=\"token comment\">//在工具栏上嵌入控件</span>\n    <span class=\"token comment\">//设置字号</span>\n   fontLabel1 <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QLabel</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字体：\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   fontComboBox <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QFontComboBox<span class=\"token punctuation\">;</span>\n   fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setFontFilters</span><span class=\"token punctuation\">(</span>QFontComboBox<span class=\"token double-colon punctuation\">::</span>ScalableFonts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   fontLabel2 <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QLabel</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字号：\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   sizeComboBox <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QComboBox<span class=\"token punctuation\">;</span>\n   QFontDatabase db<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/***************文本编辑功能******************/</span>\n   <span class=\"token function\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> size<span class=\"token punctuation\">,</span>db<span class=\"token punctuation\">.</span><span class=\"token function\">standardSizes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">{<!-- --></span>\n       sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">addItem</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">number</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   boldBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/bold.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   italicBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/italic.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n   underlineBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/underline.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n   colorBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   colorBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/color.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   colorBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   \n</code></pre>\n<p><font size=\"4\">(3)在相对应的工具栏 createToolBars() 函数中添加如下代码：</font></p>\n<pre><code class=\"prism language-cpp\">    <span class=\"token comment\">//字体工具条</span>\n    fontToolBar <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Font\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontLabel1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontLabel2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>boldBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span> <span class=\"token punctuation\">(</span>italicBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>underlineBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>colorBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"22_Easy_Word_V13__96\"></a>2.2、文本编辑器 Easy Word V1.3 槽函数与框架连接解析</h2>\n<p><font size=\"4\"> (1)在 “mainwindow.h” 头文件中添加 “private slots:” 变量：</font></p>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">/*****************文本编辑功能****************************/</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString comboStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString spinValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowItalicBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowUnderlineBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QTextCharFormat <span class=\"token operator\">&amp;</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><font size=\"4\">(2)在 createActions() 函数的”“放大“动作“最后添加事件关联：</font></p>\n<pre><code class=\"prism language-cpp\"><span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>boldBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>italicBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowItalicBtn</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>underlineBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowUnderlineBtn</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>colorBtn<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">activated</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">activated</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">currentCharFormatChanged</span><span class=\"token punctuation\">(</span>QTextCharFormat<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span>QTextCharFormat<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n</code></pre>\n<p><font size=\"4\">(3)实现设置字体的函数 如下：</font></p>\n<pre><code class=\"prism language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString comboStr<span class=\"token punctuation\">)</span>   <span class=\"token comment\">//设置字体</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>             <span class=\"token comment\">//创建一个 QTextCharFormat 对象</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontFamily</span><span class=\"token punctuation\">(</span>comboStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//选择的字体名称设置给 QTextCharFormat 对象</span>\n    <span class=\"token function\">mergeFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>               <span class=\"token comment\">//／将新的格式应用到光标选区内的字符</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">mergeFormat</span><span class=\"token punctuation\">(</span>QTextCharFormat format<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCursor cursor <span class=\"token operator\">=</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">textCursor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//获得编辑框中的光标</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>cursor<span class=\"token punctuation\">.</span> <span class=\"token function\">hasSelection</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//若光标没有高亮选区，则将光标所在处的词作为选区，由前后空格或\",\"\".\"等标点符号区分词。</span>\n    cursor<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>QTextCursor<span class=\"token double-colon punctuation\">::</span>WordUnderCursor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cursor<span class=\"token punctuation\">.</span><span class=\"token function\">mergeCharFormat</span> <span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 调用 QTextCursor 的 mergeCharFonnatO函数将参数format 所表示的格式应用到光标所在处的字符上。</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//调用 QTextEdit 的 merge CurrentCharFormat() </span>\n                                                    <span class=\"token comment\">//函数将格式应用到选区内的所有字符上。</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString spinValue<span class=\"token punctuation\">)</span>    <span class=\"token comment\">//设置字号</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontPointSize</span> <span class=\"token punctuation\">(</span>spinValue<span class=\"token punctuation\">.</span><span class=\"token function\">toFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                    <span class=\"token comment\">//设置文字加粗</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontWeight</span><span class=\"token punctuation\">(</span>boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span>QFont<span class=\"token double-colon punctuation\">::</span>Bold<span class=\"token operator\">:</span>QFont<span class=\"token double-colon punctuation\">::</span> Normal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/*其中，调用 QTextCharFormat 的 setFontWeightO函数设置粗细值，若检测到“加粗”按钮被按\n下，则设置字符的 Weight 值为 QFont::Bold, 可直接设为 75; 反之，则设为 QFont: :Normal。文字的\n粗细值由 QFont::Weight 表示，它是一个整型值，取值的范围可为 0~99, 有 5 个预置值，分别为\nQFont::Light(25) 、 QFont::Normal(50) 、 QFont::DemiBold(63) 、 QFont: :Bold(75)和 QFont::Black(87),\n通常在 QFont: :Normal 和 QFont::Bold 之间转换。*/</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowItalicBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                <span class=\"token comment\">//设置文字加下划线</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontItalic</span><span class=\"token punctuation\">(</span>italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowUnderlineBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span> <span class=\"token function\">setFontUnderline</span> <span class=\"token punctuation\">(</span>underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                 <span class=\"token comment\">//设置颜色</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QColor color<span class=\"token operator\">=</span><span class=\"token class-name\">QColorDialog</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span>Qt<span class=\"token double-colon punctuation\">::</span>red<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//使用了标准颜色对话框的方式，当单击“颜色”按钮时，</span>\n                                                          <span class=\"token comment\">//在弹出的标准颜色对话框中选择颜色。</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span> <span class=\"token function\">isValid</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n        fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setForeground</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\t<span class=\"token comment\">/*标准颜色对话框 QColorDialog 类的使用：\n\tQColor getColor\n\t(\n\t\tconst QColor&amp; initial=Qt::white,\n        QWidget* parent=0\n\t); \n\t第 1 个参数指定了选中的颜色，默认为白色。通过 QColor::isValidO可以判断用户选择的颜\n色是否有效，若用户单击“取消\" (Cancel) 按钮，则 QColor::isValid()返回 false 。第 2 个参数定\n义了标准颜色对话框的父窗口。 */</span>\n\t\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QTextCharFormat <span class=\"token operator\">&amp;</span>fmt<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCurrentIndex</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">findText</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontFamily</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCurrentIndex</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">findText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">number</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontPointSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span> <span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bold</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontItalic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontUnderline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h1><a id=\"_212\"></a>三、效果实例</h1>\n<p><font size=\"4\"><strong>图一</strong><br/> <img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/35c795a458364226a7e175fc78d13ce2.gif#pic_center\"/><br/> <font size=\"4\"><strong>图二<br/> 图标和图片放到新建的Resources中</strong><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\90ead058f16948c98e5ef7c633ce5b4a.jpeg\"/></font></font></p>\n<h1><a id=\"_219\"></a>四、原码解析</h1>\n<p><font size=\"4\"><strong>工程文件（包含图标）已经上传GitHub，通过git直接拉取即可</strong></font></p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">git</span> clone https://github.com/dhn111/EasyWord.git\n\n</code></pre>\n<h2><a id=\"mainwindowh_228\"></a>mainwindow.h</h2>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">MAINWINDOW_H</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">MAINWINDOW_H</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QMainWindow&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QImage&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QLabel&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QMenu&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QMenuBar&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QAction&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QComboBox&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QSpinBox&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QToolBar&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QFontComboBox&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QToolButton&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QTextCharFormat&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"showwidget.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QApplication&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QFileDialog&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QFile&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QTextStream&gt;</span>              <span class=\"token comment\">//读入文本</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QDebug&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QByteArray&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QTextCodec&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QtPrintSupport/QPrintDialog&gt;</span>  <span class=\"token comment\">//打印文本</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QtPrintSupport/QPrinter&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QPainter&gt;</span>               <span class=\"token comment\">//打印图片</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QRect&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QString&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QColorDialog&gt;</span>        <span class=\"token comment\">//文字颜色</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QColor&gt;</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MainWindow</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">QMainWindow</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    Q_OBJECT\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span>QWidget <span class=\"token operator\">*</span>parent <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">~</span><span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">createActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">//创建动作</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">createMenus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         <span class=\"token comment\">//创建菜单</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">createToolBars</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//创建工具栏</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">loadFile</span><span class=\"token punctuation\">(</span>QString filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">mergeFormat</span><span class=\"token punctuation\">(</span>QTextCharFormat<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    QMenu <span class=\"token operator\">*</span>fileMenu<span class=\"token punctuation\">;</span>                     <span class=\"token comment\">//各项菜单栏</span>\n    QMenu <span class=\"token operator\">*</span>zoomMenu<span class=\"token punctuation\">;</span>\n    QMenu <span class=\"token operator\">*</span>rotateMenu<span class=\"token punctuation\">;</span>\n    QMenu <span class=\"token operator\">*</span>mirrorMenu<span class=\"token punctuation\">;</span>\n    QImage img<span class=\"token punctuation\">;</span>\n    QString fileName<span class=\"token punctuation\">;</span>\n    ShowWidget <span class=\"token operator\">*</span>showWidget<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>openFileAction<span class=\"token punctuation\">;</span>          <span class=\"token comment\">//文件菜单项</span>\n    QAction <span class=\"token operator\">*</span>NewFileAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>PrintTextAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>PrintImageAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>exitAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>copyAction<span class=\"token punctuation\">;</span>           <span class=\"token comment\">//编辑菜单项</span>\n    QAction <span class=\"token operator\">*</span>cutAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>pasteAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>aboutAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>zoomInAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>zoomOutAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>rotate90Action<span class=\"token punctuation\">;</span>       <span class=\"token comment\">//旋转菜单项</span>\n    QAction <span class=\"token operator\">*</span>rotate180Action<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>rotate270Action<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>mirrorVerticalAction<span class=\"token punctuation\">;</span>     <span class=\"token comment\">//镜像菜单项</span>\n    QAction <span class=\"token operator\">*</span>mirrorHorizontalAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>undoAction<span class=\"token punctuation\">;</span>\n    QAction <span class=\"token operator\">*</span>redoAction<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>fileTool<span class=\"token punctuation\">;</span>              <span class=\"token comment\">//工具栏</span>\n    QToolBar <span class=\"token operator\">*</span>zoomTool<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>rotateTool<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>mirrorTool<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>doToolBar<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/****************文本编辑功能*****************/</span>\n\n    QLabel <span class=\"token operator\">*</span>fontLabel1<span class=\"token punctuation\">;</span> <span class=\"token comment\">//字体设置项</span>\n    QFontComboBox <span class=\"token operator\">*</span>fontComboBox<span class=\"token punctuation\">;</span>\n    QLabel <span class=\"token operator\">*</span>fontLabel2<span class=\"token punctuation\">;</span>\n    QComboBox <span class=\"token operator\">*</span>sizeComboBox<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>boldBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>italicBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>underlineBtn<span class=\"token punctuation\">;</span>\n    QToolButton <span class=\"token operator\">*</span>colorBtn<span class=\"token punctuation\">;</span>\n    QToolBar <span class=\"token operator\">*</span>fontToolBar<span class=\"token punctuation\">;</span> <span class=\"token comment\">//字体工具栏</span>\n\n\n\n\n<span class=\"token keyword\">private</span> slots<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//新建文件</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowOpenFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//打开文件</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowPrintText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//打印文本</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowPrintImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//打印图像</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowZoomIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">//缩放功能放大</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowZoomOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">//缩放功能缩小</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowRotate90</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">//旋转90°</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowRotate180</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//旋转180°</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowRotate270</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//旋转270°</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowMirrorVertical</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//纵向</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowMirrorHorizontal</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//横向</span>\n\n\n\n    <span class=\"token comment\">/*****************文本编辑功能****************************/</span>\n\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString comboStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString spinValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowItalicBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowUnderlineBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QTextCharFormat <span class=\"token operator\">&amp;</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span> <span class=\"token comment\">// MAINWINDOW_H</span></span>\n\n</code></pre>\n<h2><a id=\"showwidgeth_352\"></a>showwidget.h</h2>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">SHOWWIDGET_H</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SHOWWIDGET_H</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QWidget&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QImage&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QLabel&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QTextEdit&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QHBoxLayout&gt;</span></span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ShowWidget</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">QWidget</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    Q_OBJECT\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">explicit</span> <span class=\"token function\">ShowWidget</span><span class=\"token punctuation\">(</span>QWidget <span class=\"token operator\">*</span>parent <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    QImage img<span class=\"token punctuation\">;</span>\n    QLabel <span class=\"token operator\">*</span>imageLabel<span class=\"token punctuation\">;</span>\n    QTextEdit <span class=\"token operator\">*</span>text<span class=\"token punctuation\">;</span>\n\n\nsignals<span class=\"token operator\">:</span>\n\n<span class=\"token keyword\">public</span> slots<span class=\"token operator\">:</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span> <span class=\"token comment\">// SHOWWIDGET_H</span></span>\n\n</code></pre>\n<h2><a id=\"maincpp_382\"></a>main.cpp</h2>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"mainwindow.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QApplication&gt;</span></span>\n\n<span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> argc<span class=\"token punctuation\">,</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span>argv<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QApplication <span class=\"token function\">a</span><span class=\"token punctuation\">(</span>argc<span class=\"token punctuation\">,</span> argv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    MainWindow w<span class=\"token punctuation\">;</span>\n    w<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> a<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"mainwindowcpp_398\"></a>mainwindow.cpp</h2>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"mainwindow.h\"</span></span>\n\n<span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span>QWidget <span class=\"token operator\">*</span>parent<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">:</span> <span class=\"token function\">QMainWindow</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token comment\">//各项菜单栏</span>\n    fileMenu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QMenu<span class=\"token punctuation\">;</span>\n    zoomMenu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QMenu<span class=\"token punctuation\">;</span>\n    rotateMenu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QMenu<span class=\"token punctuation\">;</span>\n    mirrorMenu <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QMenu<span class=\"token punctuation\">;</span>\n    showWidget <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> ShowWidget<span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">//文件菜单</span>\n    openFileAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n    NewFileAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n    PrintTextAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n    PrintImageAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n    exitAction       <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n\n     <span class=\"token comment\">//缩放菜单</span>\n     copyAction   <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     cutAction    <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     pasteAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     aboutAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     zoomInAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     zoomOutAction<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n\n     <span class=\"token comment\">//旋转菜单项</span>\n     rotate90Action <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     rotate180Action<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     rotate270Action<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n\n     <span class=\"token comment\">//镜像菜单项</span>\n     mirrorVerticalAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     mirrorHorizontalAction<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     undoAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n     redoAction  <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QAction<span class=\"token punctuation\">;</span>\n\n     <span class=\"token comment\">//工具栏</span>\n     fileTool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  QToolBar<span class=\"token punctuation\">;</span>\n     zoomTool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  QToolBar<span class=\"token punctuation\">;</span>\n     rotateTool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  QToolBar<span class=\"token punctuation\">;</span>\n     mirrorTool <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  QToolBar<span class=\"token punctuation\">;</span>\n     doToolBar <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span>  QToolBar<span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token function\">setWindowTitle</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Easy Word\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//设置窗体标题</span>\n    showWidget <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">ShowWidget</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//（a）</span>\n    <span class=\"token function\">setCentralWidget</span><span class=\"token punctuation\">(</span>showWidget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">/*创建动作、菜单、工具栏的函数*/</span>\n    <span class=\"token function\">createActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createMenus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">createToolBars</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/PKQ.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//在 imageLabel 对象中放置图片</span>\n        showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token operator\">~</span><span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createActions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//“打开”动作</span>\n    openFileAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/open.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"打开\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//(a)</span>\n    openFileAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tr</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+O\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                      <span class=\"token comment\">//(b)</span>\n    openFileAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"打开一个文件 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">//(c)</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>openFileAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowOpenFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"新建“动作</span>\n    NewFileAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/new.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新建\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    NewFileAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+N\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    NewFileAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"新建一个文件\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>NewFileAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \"退出“动作</span>\n    exitAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"退出\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    exitAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+Q\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    exitAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"退出程序\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>exitAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// \"复制”动作</span>\n    copyAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/copy.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"复制\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    copyAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    copyAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" 复制文件\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>copyAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span> <span class=\"token function\">triggered</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"剪切“动作</span>\n    cutAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/cut.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"剪切\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cutAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+X\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cutAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"剪切文件\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>cutAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span> <span class=\"token function\">triggered</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">cut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"粘贴“动作</span>\n    pasteAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/paste.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"粘贴\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pasteAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setShortcut</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Ctrl+V\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    pasteAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"粘贴文件\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>pasteAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">paste</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"关于“动作</span>\n    aboutAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"关于\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>aboutAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QApplication</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">aboutQt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"打印文本“动作</span>\n    PrintTextAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/printText.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" 打印文本\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    PrintTextAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"打印一个文本\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>PrintTextAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowPrintText</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"打印图片“动作</span>\n    PrintImageAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/printimage.png\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"打印图片\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    PrintImageAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"打印一幅图片\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>PrintImageAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowPrintImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"放大“动作</span>\n    zoomInAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span> <span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/zoomin.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" 放大 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomInAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"放大一幅图片\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>zoomInAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowZoomIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//\"缩小“动作</span>\n    zoomOutAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/zoomout.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"缩小 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomOutAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"缩小一幅图片 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>zoomOutAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowZoomOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//实现图片旋转的动作 (Action)</span>\n    <span class=\"token comment\">//旋转 90°</span>\n    rotate90Action <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span> <span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/rotate90.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"旋转 90°\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotate90Action<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"将一幅图旋转90°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>rotate90Action<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowRotate90</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//旋转180°</span>\n    rotate180Action <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span> <span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/rotate180.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"旋转 180°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotate180Action<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"将一幅图旋转180°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>rotate180Action<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowRotate180</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//旋转270°</span>\n    rotate270Action <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/rotate270.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"旋转 270°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotate270Action<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"将一幅图旋转 270°\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>rotate270Action<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowRotate270</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//实现图片镜像的动作（Action）</span>\n    <span class=\"token comment\">//纵向镜像</span>\n    mirrorVerticalAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/mirrorVertical.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"纵向镜像\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mirrorVerticalAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"对一幅图做纵向镜像\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>mirrorVerticalAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowMirrorVertical</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//横向镜像</span>\n    mirrorHorizontalAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/mirrorHorizontal.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"横向镜像 \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mirrorHorizontalAction<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStatusTip</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"对一幅图做横向镜像\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>mirrorHorizontalAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowMirrorHorizontal</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//实现撤销和重做的动作（ACtion）</span>\n    <span class=\"token comment\">//撤销和重做</span>\n    undoAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span> <span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/undo.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"撤销\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>undoAction<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">undo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    redoAction <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QAction</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/redo.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"重做\"</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>redoAction<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">triggered</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">redo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n    <span class=\"token comment\">//在工具栏上嵌入控件</span>\n    <span class=\"token comment\">//设置字号</span>\n   fontLabel1 <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QLabel</span> <span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字体：\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   fontComboBox <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QFontComboBox<span class=\"token punctuation\">;</span>\n   fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setFontFilters</span><span class=\"token punctuation\">(</span>QFontComboBox<span class=\"token double-colon punctuation\">::</span>ScalableFonts<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   fontLabel2 <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QLabel</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"字号：\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   sizeComboBox <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QComboBox<span class=\"token punctuation\">;</span>\n   QFontDatabase db<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">/***************文本编辑功能******************/</span>\n   <span class=\"token function\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> size<span class=\"token punctuation\">,</span>db<span class=\"token punctuation\">.</span><span class=\"token function\">standardSizes</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n   <span class=\"token punctuation\">{<!-- --></span>\n       sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">addItem</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">number</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   boldBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/bold.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>boldBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   italicBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/italic.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>italicBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowItalicBtn</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n\n   underlineBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/underline.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">connect</span> <span class=\"token punctuation\">(</span>underlineBtn<span class=\"token punctuation\">,</span> <span class=\"token function\">SIGNAL</span> <span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token function\">SLOT</span> <span class=\"token punctuation\">(</span><span class=\"token function\">ShowUnderlineBtn</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   colorBtn <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QToolButton<span class=\"token punctuation\">;</span>\n   colorBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token function\">QIcon</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":/src/color.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   colorBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCheckable</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>colorBtn<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">clicked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n   <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">activated</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">activated</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n\n\n\n   <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token punctuation\">,</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token function\">currentCharFormatChanged</span><span class=\"token punctuation\">(</span>QTextCharFormat<span class=\"token operator\">&amp;</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span><span class=\"token function\">SLOT</span><span class=\"token punctuation\">(</span><span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QTextCharFormat <span class=\"token operator\">&amp;</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createMenus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//文件菜单</span>\n\n    fileMenu <span class=\"token operator\">=</span><span class=\"token function\">menuBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">addMenu</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"文件\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>openFileAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>NewFileAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>PrintTextAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>PrintImageAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>exitAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//缩放菜单</span>\n\n    zoomMenu <span class=\"token operator\">=</span><span class=\"token function\">menuBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">addMenu</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"编辑\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>copyAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>cutAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>pasteAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>aboutAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>zoomInAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>zoomOutAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//旋转菜单</span>\n    rotateMenu <span class=\"token operator\">=</span><span class=\"token function\">menuBar</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">addMenu</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"旋转\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    rotateMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate90Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotateMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate180Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotateMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate270Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//镜像菜单</span>\n    mirrorMenu <span class=\"token operator\">=</span><span class=\"token function\">menuBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">addMenu</span><span class=\"token punctuation\">(</span><span class=\"token function\">tr</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" 镜像\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    mirrorMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>mirrorVerticalAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mirrorMenu<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>mirrorHorizontalAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createToolBars</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//文件工具条</span>\n    fileTool <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"File\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>openFileAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>NewFileAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>PrintTextAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fileTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>PrintImageAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//编辑工具条</span>\n    zoomTool <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Edit\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>copyAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>cutAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>pasteAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>zoomInAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    zoomTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>zoomOutAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//旋转工具条</span>\n    rotateTool <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"rotate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotateTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate90Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotateTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate180Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    rotateTool<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>rotate270Action<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">//撤销和重做工具条</span>\n    doToolBar <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"doEdit\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    doToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>undoAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    doToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addAction</span><span class=\"token punctuation\">(</span>redoAction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//字体工具条</span>\n    fontToolBar <span class=\"token operator\">=</span><span class=\"token function\">addToolBar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Font\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontLabel1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>fontLabel2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>boldBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span> <span class=\"token punctuation\">(</span>italicBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>underlineBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addSeparator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    fontToolBar<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>colorBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowNewFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                  <span class=\"token comment\">//新建文件的槽</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    MainWindow <span class=\"token operator\">*</span>newMainWindow <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> MainWindow<span class=\"token punctuation\">;</span>\n    newMainWindow<span class=\"token operator\">-&gt;</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowOpenFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                  <span class=\"token comment\">//读取文件的槽</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    fileName <span class=\"token operator\">=</span><span class=\"token class-name\">QFileDialog</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">getOpenFileName</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fileName<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">document</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token function\">loadFile</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            MainWindow <span class=\"token operator\">*</span>newMainWindows <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> MainWindow<span class=\"token punctuation\">;</span>\n            newMainWindows<span class=\"token operator\">-&gt;</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            newMainWindows<span class=\"token operator\">-&gt;</span><span class=\"token function\">loadFile</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">if</span> <span class=\"token expression\"><span class=\"token number\">1</span></span></span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">loadFile</span><span class=\"token punctuation\">(</span>QString filename<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\n     QFile  <span class=\"token function\">file</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>QIODevice<span class=\"token double-colon punctuation\">::</span>ReadOnly<span class=\"token operator\">|</span>QIODevice<span class=\"token double-colon punctuation\">::</span>Text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n         QTextStream <span class=\"token function\">textStream</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>textStream<span class=\"token punctuation\">.</span><span class=\"token function\">atEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n\n\n            showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>textStream<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n        <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span>\n\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">if</span> <span class=\"token expression\"><span class=\"token number\">0</span></span></span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">loadFile</span><span class=\"token punctuation\">(</span>QString filename<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\n     QFile  <span class=\"token function\">file</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     QTextCodec <span class=\"token operator\">*</span>codec <span class=\"token operator\">=</span> <span class=\"token class-name\">QTextCodec</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">codecForName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GBK\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>QIODevice<span class=\"token double-colon punctuation\">::</span>ReadOnly<span class=\"token operator\">|</span>QIODevice<span class=\"token double-colon punctuation\">::</span>Text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n\n        <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>file<span class=\"token punctuation\">.</span><span class=\"token function\">atEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            QByteArray line <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">readLine</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            QString str <span class=\"token operator\">=</span> codec<span class=\"token operator\">-&gt;</span><span class=\"token function\">toUnicode</span><span class=\"token punctuation\">(</span>line<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span>str<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token comment\">//qDebug()&lt;&lt;textStream.readLine();</span>\n\n        <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowPrintText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>             <span class=\"token comment\">//文本打印</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QPrinter printer<span class=\"token punctuation\">;</span>\n    QPrintDialog <span class=\"token function\">printDialog</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>printer<span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>printDialog<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//获得QTextEdit对象的文档</span>\n        QTextDocument <span class=\"token operator\">*</span>doc <span class=\"token operator\">=</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">document</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        doc<span class=\"token operator\">-&gt;</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>printer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//打印</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowPrintImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>           <span class=\"token comment\">//图像打印</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QPrinter printer<span class=\"token punctuation\">;</span>\n    QPrintDialog <span class=\"token function\">printDialog</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>printer<span class=\"token punctuation\">,</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>printDialog<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        QPainter <span class=\"token function\">painter</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>printer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        QRect rect <span class=\"token operator\">=</span>painter<span class=\"token punctuation\">.</span><span class=\"token function\">viewport</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//获得QPainter对象的视图矩形区域</span>\n        QSize size <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">//获得图像的大小</span>\n        <span class=\"token comment\">/*按照图形的比例大小重新设置视图矩形区域*/</span>\n        size<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Qt<span class=\"token double-colon punctuation\">::</span>KeepAspectRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        painter<span class=\"token punctuation\">.</span><span class=\"token function\">setViewport</span><span class=\"token punctuation\">(</span>rect<span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>rect<span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">width</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>size<span class=\"token punctuation\">.</span><span class=\"token function\">height</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        painter<span class=\"token punctuation\">.</span><span class=\"token function\">setWindow</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">rect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        painter<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowZoomIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>          <span class=\"token comment\">//图像放大</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>     <span class=\"token comment\">//有效性判断</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    QMatrix matrix<span class=\"token punctuation\">;</span>     <span class=\"token comment\">//声明一个QMatrix类的实例</span>\n    matrix<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    img <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">transformed</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowZoomOut</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>      <span class=\"token comment\">//图像缩小</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    QMatrix matrix<span class=\"token punctuation\">;</span>\n    matrix<span class=\"token punctuation\">.</span><span class=\"token function\">scale</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    img<span class=\"token operator\">=</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">transformed</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowRotate90</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>                  <span class=\"token comment\">//旋转90°</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    QMatrix matrix<span class=\"token punctuation\">;</span>\n    matrix<span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span><span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    img <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">transformed</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowRotate180</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>        <span class=\"token comment\">//旋转180°</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    QMatrix matrix<span class=\"token punctuation\">;</span>\n    matrix<span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span><span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    img <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">transformed</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowRotate270</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>      <span class=\"token comment\">//旋转270°</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">isNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    QMatrix matrix<span class=\"token punctuation\">;</span>\n    matrix<span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span><span class=\"token number\">270</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    img <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span><span class=\"token function\">transformed</span><span class=\"token punctuation\">(</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowMirrorVertical</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\">//纵向镜像</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span> <span class=\"token function\">isNull</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    img<span class=\"token operator\">=</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">mirrored</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowMirrorHorizontal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//横向镜像</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span> <span class=\"token function\">isNull</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    img<span class=\"token operator\">=</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">mirrored</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setPixmap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QPixmap</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">fromImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowFontComboBox</span><span class=\"token punctuation\">(</span>QString comboStr<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>             <span class=\"token comment\">//设置字体</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontFamily</span><span class=\"token punctuation\">(</span>comboStr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">mergeFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">mergeFormat</span><span class=\"token punctuation\">(</span>QTextCharFormat format<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCursor cursor <span class=\"token operator\">=</span>showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">textCursor</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//获得编辑框中的光标</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>cursor<span class=\"token punctuation\">.</span> <span class=\"token function\">hasSelection</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//(a)</span>\n    cursor<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>QTextCursor<span class=\"token double-colon punctuation\">::</span>WordUnderCursor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    cursor<span class=\"token punctuation\">.</span><span class=\"token function\">mergeCharFormat</span> <span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// (b)</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//(c)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowSizeSpinBox</span><span class=\"token punctuation\">(</span>QString spinValue<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontPointSize</span> <span class=\"token punctuation\">(</span>spinValue<span class=\"token punctuation\">.</span><span class=\"token function\">toFloat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowBoldBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontWeight</span><span class=\"token punctuation\">(</span>boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?</span>QFont<span class=\"token double-colon punctuation\">::</span>Bold<span class=\"token operator\">:</span>QFont<span class=\"token double-colon punctuation\">::</span> Normal<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowItalicBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setFontItalic</span><span class=\"token punctuation\">(</span>italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowUnderlineBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n    fmt<span class=\"token punctuation\">.</span> <span class=\"token function\">setFontUnderline</span> <span class=\"token punctuation\">(</span>underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">isChecked</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowColorBtn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QColor color<span class=\"token operator\">=</span><span class=\"token class-name\">QColorDialog</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span>Qt<span class=\"token double-colon punctuation\">::</span>red<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">.</span> <span class=\"token function\">isValid</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        QTextCharFormat fmt<span class=\"token punctuation\">;</span>\n        fmt<span class=\"token punctuation\">.</span><span class=\"token function\">setForeground</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        showWidget<span class=\"token operator\">-&gt;</span>text<span class=\"token operator\">-&gt;</span><span class=\"token function\">mergeCurrentCharFormat</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">MainWindow</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowCurrentFormatChanged</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QTextCharFormat <span class=\"token operator\">&amp;</span>fmt<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCurrentIndex</span><span class=\"token punctuation\">(</span>fontComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">findText</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontFamily</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">;</span>\n    sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCurrentIndex</span><span class=\"token punctuation\">(</span>sizeComboBox<span class=\"token operator\">-&gt;</span><span class=\"token function\">findText</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">number</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontPointSize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    boldBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span> <span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">font</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">bold</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    italicBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontItalic</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    underlineBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setChecked</span><span class=\"token punctuation\">(</span>fmt<span class=\"token punctuation\">.</span><span class=\"token function\">fontUnderline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"showwidgetcpp_921\"></a>showwidget.cpp</h2>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"showwidget.h\"</span></span>\n\n<span class=\"token class-name\">ShowWidget</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ShowWidget</span><span class=\"token punctuation\">(</span>QWidget <span class=\"token operator\">*</span>parent<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">QWidget</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    imageLabel <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QLabel<span class=\"token punctuation\">;</span>\n    imageLabel<span class=\"token operator\">-&gt;</span><span class=\"token function\">setScaledContents</span><span class=\"token punctuation\">(</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    text <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> QTextEdit<span class=\"token punctuation\">;</span>\n    QHBoxLayout <span class=\"token operator\">*</span>mainLayout <span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token function\">QHBoxLayout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mainLayout<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>imageLabel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mainLayout<span class=\"token operator\">-&gt;</span><span class=\"token function\">addWidget</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<hr/>\n<h1><a id=\"_941\"></a>总结</h1>\n<p><font size=\"4\">窗口构成会在应用程序开发中经常用到的</font></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Others", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-09-07 10:46:06", "summary": "欢迎小伙伴的点评，相互学习、互关必回、全天在线博主本着开源的精神交流开发的经验、将持续更新续章，为社区贡献博主自身的开源精神文章目录前言一、文本编辑功能概述二、基于框架进行升级框架、实现增加文本编辑模"}