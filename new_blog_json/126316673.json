{"blogid": "126316673", "writerAge": "码龄1年", "writerBlogNum": "43", "writerCollect": "1838", "writerComment": "2939", "writerFan": "2160", "writerGrade": "6级", "writerIntegral": "6920", "writerName": "敲代码の流川枫", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126316673.jpg", "writerRankTotal": "2211", "writerRankWeekly": "65", "writerThumb": "2422", "writerVisitNum": "29332", "blog_read_count": "316", "blog_time": "于 2022-08-13 11:54:16 发布", "blog_title": "JavaSE——图书管理", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><img alt=\"ced485cbb11e458d81a746890b32cf3f.gif\" src=\"https://img-blog.csdnimg.cn/ced485cbb11e458d81a746890b32cf3f.gif\"/></p>\n<blockquote>\n<p>作者：<span style=\"color:#faa572;\">敲代码の流川枫</span></p>\n<p>博客主页：<a href=\"https://blog.csdn.net/chenchenchencl?spm=1011.2421.3001.5343\" title=\"流川枫的博客\">流川枫的博客</a></p>\n<p>专栏：<a href=\"https://blog.csdn.net/chenchenchencl/category_11932758.html\" title=\"和我一起学java\">和我一起学java</a></p>\n<p>语录：<span style=\"color:#faa572;\">Stay hungry stay foolish</span></p>\n<p><span style=\"color:#faa572;\">工欲善其事必先利其器，给大家介绍一款超牛的斩获大厂offer利器——牛客网</span></p>\n<p><span style=\"color:#faa572;\"><a href=\"https://www.nowcoder.com/link/pc_csdncpt_qdmdlcf_c\" title=\"点击免费注册和我一起刷题吧\">点击免费注册和我一起刷题吧</a>  </span></p>\n</blockquote>\n<p id=\"main-toc\"><strong>文章目录</strong></p>\n<p id=\"%E5%89%8D%E8%A8%80-toc\" style=\"margin-left:0px;\"><a href=\"#%E5%89%8D%E8%A8%80\">前言</a></p>\n<p id=\"book-toc\" style=\"margin-left:0px;\"><a href=\"#book\">book</a></p>\n<p id=\"Book-toc\" style=\"margin-left:40px;\"><a href=\"#Book\">Book</a></p>\n<p id=\"BookList-toc\" style=\"margin-left:40px;\"><a href=\"#BookList\">BookList</a></p>\n<p id=\"operation-toc\" style=\"margin-left:0px;\"><a href=\"#operation\">operation</a></p>\n<p id=\"IOperation-toc\" style=\"margin-left:40px;\"><a href=\"#IOperation\">IOperation</a></p>\n<p id=\"AddOperation-toc\" style=\"margin-left:40px;\"><a href=\"#AddOperation\">AddOperation</a></p>\n<p id=\"BorrowOperation-toc\" style=\"margin-left:40px;\"><a href=\"#BorrowOperation\">BorrowOperation</a></p>\n<p id=\"DelOperation-toc\" style=\"margin-left:40px;\"><a href=\"#DelOperation\">DelOperation</a></p>\n<p id=\"DisplayOperation-toc\" style=\"margin-left:40px;\"><a href=\"#DisplayOperation\">DisplayOperation</a></p>\n<p id=\"ExitOperation-toc\" style=\"margin-left:40px;\"><a href=\"#ExitOperation\">ExitOperation</a></p>\n<p id=\"FindOperation-toc\" style=\"margin-left:40px;\"><a href=\"#FindOperation\">FindOperation</a></p>\n<p id=\"ReturnOperation-toc\" style=\"margin-left:40px;\"><a href=\"#ReturnOperation\">ReturnOperation</a></p>\n<p id=\"user-toc\" style=\"margin-left:0px;\"><a href=\"#user\">user</a></p>\n<p id=\"User-toc\" style=\"margin-left:40px;\"><a href=\"#User\">User</a></p>\n<p id=\"AdminUser-toc\" style=\"margin-left:40px;\"><a href=\"#AdminUser\">AdminUser</a></p>\n<p id=\"NormalUser-toc\" style=\"margin-left:40px;\"><a href=\"#NormalUser\">NormalUser</a></p>\n<p id=\"Main-toc\" style=\"margin-left:0px;\"><a href=\"#Main\">Main</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%E5%89%8D%E8%A8%80\">前言</h1>\n<blockquote>\n<p>以面向对象的思想找到并且<strong>抽象出图书管理所需要的对象，再分析这些类和对象应该具有哪些属性和方法，对象通过“属性”和“方法”来分别对应事物所具有的静态属性和动态属性，最后分析类和类之间具体有什么关系，通过各个对象间的交互，</strong>使用对象、类、继承、封装、接口等基本概念完成序设计 </p>\n</blockquote>\n<p>抽象出来的对象有：书，书架，用户等，分别建立三个包管理<img alt=\"\" height=\"189\" src=\"..\\..\\static\\image\\d39bfba34fe84cbfa2968e6fd7d358c7.png\" width=\"737\"/> </p>\n<h1 id=\"book\">book</h1>\n<h2 id=\"Book\">Book</h2>\n<pre><code>package book;\npublic class Book {\n    //书名\n    private String  name;\n    //作者\n    private String author;\n    //价格\n    private int price;\n    //类型\n    private String type;\n    //状态\n    private boolean isBorrow;\n    public Book(String name, String author, int price, String type) {\n        this.name = name;\n        this.author = author;\n        this.price = price;\n        this.type = type;\n\n    }\n    @Override\n    public String toString() {\n        return \"Book{\" +\n                \"name='\" + name + '\\'' +\n                \", author='\" + author + '\\'' +\n                \", price=\" + price +\n                \", type='\" + type + '\\'' +\n                ((isBorrow==true)?\"已借出\":\"未借出\")+\n                '}';\n    }\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public int getPrice() {\n        return price;\n    }\n\n    public void setPrice(int price) {\n        this.price = price;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public boolean isBorrow() {\n        return isBorrow;\n    }\n\n    public void setBorrow(boolean borrow) {\n        isBorrow = borrow;\n    }\n}\n</code></pre>\n<h2 id=\"BookList\">BookList</h2>\n<p>先存储三本书：</p>\n<p><img alt=\"\" height=\"344\" src=\"..\\..\\static\\image\\434bc26a894640b5b69ebdbc61082e57.png\" width=\"1056\"/></p>\n<pre><code>package book;\n\npublic class BookList {\n    private Book[] books = new Book[10];\n    private int usedSize;//存储当前书的个数\n\n    public BookList() {\n\n        books[0] = new Book(\"三国演义\",\"罗贯中\",90,\"小说\");\n        books[1] = new Book(\"红楼梦\",\"曹雪芹\",80,\"小说\");\n        books[2] = new Book(\"水浒传\",\"施耐庵\",70,\"小说\");\n\n        this.usedSize = 3;\n    }\n\n    public int getUsedSize() {\n        return usedSize;\n    }\n\n    public void setUsedSize(int usedSize) {\n        this.usedSize = usedSize;\n    }\n    public Book getPos(int pos){\n        return books[pos];\n\n    }\n    //存储一本书到指定的位置\n    public void setBooks(Book book,int pos){\n        books[pos] = book;\n    }\n}\n//将对数组的操作写到一个接口中</code></pre>\n<h1 id=\"operation\">operation</h1>\n<h2 id=\"IOperation\">IOperation</h2>\n<pre><code>package operation;\n\nimport book.BookList;\n\npublic interface IOperation {\n    void work(BookList bookList);\n}\n</code></pre>\n<h2 id=\"AddOperation\">AddOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\nimport java.util.Scanner;\n\npublic class AddOperation implements IOperation{\n    //添加图书\n    public void work(BookList bookList){\n        System.out.println(\"添加图书\");\n\n        System.out.println(\"请输入书名\");\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n        System.out.println(\"请输入作者\");\n        String  author = scanner.nextLine();\n        System.out.println(\"请输入价格\");\n        int price = scanner.nextInt();\n        //读取回车\n        scanner.nextLine();\n        System.out.println(\"请输入类型\");\n        String type = scanner.nextLine();\n\n        Book book =  new Book(name,author,price,type);\n        //获取可以存放的位置\n        int currentSize = bookList.getUsedSize();\n        //放到指定位置\n        bookList.setBooks(book,currentSize);\n        //书的个数加一\n        bookList.setUsedSize(currentSize+1);\n    }\n}</code></pre>\n<h2 id=\"BorrowOperation\">BorrowOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\nimport java.util.Scanner;\n\npublic class BorrowOperation implements IOperation{\n    public void work(BookList bookList){\n        System.out.println(\"借阅图书\");\n        System.out.println(\"请输入书名\");\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n        //遍历是否有要借阅的书并记录下标\n        int index = -1;\n        int currentSize = bookList.getUsedSize();\n        for (int i = 0; i &lt; currentSize ; i++) {\n            Book book = bookList.getPos(i);\n            if(name.equals(book.getName())){\n                if(book.isBorrow()){\n                    System.out.println(\"已借出\");\n                }\n                else{\n                    book.setBorrow(true);\n                    System.out.println(\"借阅成功\");\n                }\n                return;\n            }\n        }\n        System.out.println(\"没有要借阅的书\");\n    }\n}\n</code></pre>\n<h2 id=\"DelOperation\">DelOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\nimport java.util.Scanner;\n\npublic class DelOperation implements IOperation{\n    public void work(BookList bookList){\n        System.out.println(\"删除图书\");\n        System.out.println(\"请输入书名\");\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n\n        //遍历是否有要删除的书并记录下标\n        int index = -1;\n        int currentSize = bookList.getUsedSize();\n        for (int i = 0; i &lt; currentSize ; i++) {\n            Book book = bookList.getPos(i);\n            if(name.equals(book.getName())){\n                index = i;\n                break;\n            }\n        }\n        if(index == -1){\n            System.out.println(\"没有要删除的书\");\n            return ;\n        }\n        for (int i = index; i &lt; currentSize-1 ; i++) {\n\n            Book book = bookList.getPos(i+1);\n            bookList.setBooks(book,i);\n        }\n        \n        bookList.setBooks(null,currentSize-1);\n\n        //重置有效长度\n        bookList.setUsedSize(currentSize-1);\n        System.out.println(\"删除成功\");\n    }\n}\n</code></pre>\n<p>假设有四本书，那么i+1最大值就是3，即 i &lt; currentSize-1才不会越界</p>\n<p class=\"img-center\"><img alt=\"\" height=\"511\" src=\"..\\..\\static\\image\\6a46f4bc520042e48e9f03a6948521c6.png\" width=\"980\"/></p>\n<p>删除书之后要置空，否则可能会出现内存泄漏<br/> 一个对象没有人引用才会回收 </p>\n<h2 id=\"DisplayOperation\">DisplayOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\npublic class DisplayOperation implements IOperation{\n    public void work(BookList bookList){\n        System.out.println(\"显示图书\");\n        int currentSize = bookList.getUsedSize();\n        for (int i = 0; i &lt; currentSize ; i++) {\n            Book book = bookList.getPos(i);\n            System.out.println(book);\n        }\n    }\n}\n</code></pre>\n<h2 id=\"ExitOperation\">ExitOperation</h2>\n<pre><code>package operation;\n\nimport book.BookList;\nimport com.sun.xml.internal.ws.api.model.wsdl.WSDLOutput;\n\npublic class ExitOperation implements IOperation{\n    public void work(BookList bookList){\n        System.out.println(\"退出系统\");\n        System.exit(0);\n    }\n}\n</code></pre>\n<h2 id=\"FindOperation\">FindOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\nimport java.util.Scanner;\n\npublic class FindOperation implements IOperation{\n    //查找图书\n    public void work(BookList bookList){\n        System.out.println(\"查找图书\");\n        System.out.println(\"请输入书名：\");\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n        int currentSize = bookList.getUsedSize();\n        for (int i = 0; i &lt; currentSize ; i++) {\n            Book book = bookList.getPos(i);\n            if(name.equals(book.getName())){\n                System.out.println(book);\n                return;\n            }\n        }\n        System.out.println(\"没有这本书\");\n    }\n}\n</code></pre>\n<h2 id=\"ReturnOperation\">ReturnOperation</h2>\n<pre><code>package operation;\n\nimport book.Book;\nimport book.BookList;\n\nimport java.util.Scanner;\n\npublic class ReturnOperation implements IOperation{\n    public void work(BookList bookList){\n\n        System.out.println(\"归还图书\");\n        System.out.println(\"请输入书名\");\n        Scanner scanner = new Scanner(System.in);\n        String name = scanner.nextLine();\n\n        int index = -1;\n        int currentSize = bookList.getUsedSize();\n        for (int i = 0; i &lt; currentSize ; i++) {\n            Book book = bookList.getPos(i);\n            if(name.equals(book.getName())){\n                book.setBorrow(false);\n                System.out.println(\"归还成功\");\n                return;\n            }\n        }\n        System.out.println(\"没有要归还的书\");\n    }\n\n\n}\n</code></pre>\n<h1 id=\"user\">user</h1>\n<h2 id=\"User\">User</h2>\n<pre><code>package user;\n\nimport book.BookList;\nimport operation.IOperation;\n\npublic abstract class User {\n    protected String name;\n    //只是定义数组， 没有初始化，内存没有分配\n    protected IOperation[] iOperations;\n    public User(String name) {\n        this.name = name;\n    }\n    public abstract int menu();\n    public void doOperation (int choice, BookList bookList){\n        iOperations[choice].work(bookList);\n\n    }\n}\n</code></pre>\n<h2><img alt=\"\" height=\"575\" src=\"..\\..\\static\\image\\ba759ec745b34b5386782e8edc664d7b.png\" width=\"1200\"/></h2>\n<p> 需要写一个操作接口数组的方法doOperation()</p>\n<h2 id=\"AdminUser\">AdminUser</h2>\n<pre><code>package user;\n\nimport operation.*;\n\nimport java.util.Scanner;\n\n//管理员\npublic class AdminUser extends User{\n    public AdminUser(String name) {\n        super(name);\n        this.iOperations = new IOperation[]{\n                new ExitOperation(),\n                new FindOperation(),\n                new AddOperation(),\n                new DelOperation(),\n                new DisplayOperation()\n\n        };\n\n    }\n\n    public int menu(){\n        System.out.println(\"*************\");\n        System.out.println(\"hello\"+name+\"欢迎来到图书管理\");\n        System.out.println(\"1. 查找图书\");\n        System.out.println(\"2. 新增图书\");\n        System.out.println(\"3. 删除图书\");\n        System.out.println(\"4. 显示图书\");\n        System.out.println(\"0. 退出系统\");\n        System.out.println(\"*************\");\n        System.out.println(\"请输入你的操作：\");\n\n        Scanner scanner = new Scanner(System.in);\n        int choice = scanner.nextInt();\n        return choice;\n\n    }\n}\n</code></pre>\n<h2 id=\"NormalUser\">NormalUser</h2>\n<pre><code>package user;\n\nimport operation.*;\n\nimport java.util.Scanner;\n\n//普通用户\npublic class NormalUser extends User {\n    public NormalUser(String name) {\n        super(name);\n        this.iOperations = new IOperation[]{\n                new ExitOperation(),\n\n                new FindOperation(),\n                new BorrowOperation(),\n                new ReturnOperation()\n\n        };\n    }\n\n    public int menu() {\n        System.out.println(\"*************\");\n        System.out.println(\"hello\" + name + \"欢迎来到图书管理\");\n        System.out.println(\"1. 查找图书\");\n        System.out.println(\"2. 借阅图书\");\n        System.out.println(\"3. 归还图书\");\n        System.out.println(\"0. 退出系统\");\n        System.out.println(\"*************\");\n        System.out.println(\"请输入你的操作：\");\n        Scanner scanner = new Scanner(System.in);\n        int choice = scanner.nextInt();\n        return choice;\n    }\n\n}\n</code></pre>\n<h1 id=\"Main\">Main</h1>\n<pre><code>import book.BookList;\nimport user.AdminUser;\nimport user.NormalUser;\nimport user.User;\n\nimport java.util.Scanner;\n\npublic class Main {\n    //利用向上转型确定是哪个对象\n    public static  User login(){\n        System.out.println(\"请输入你的姓名\");\n        Scanner scanner =  new Scanner(System.in);\n        String userName = scanner.nextLine();\n        System.out.println(\"请输入你的身份：1. 管理员  2. 用户\");\n        int choice = scanner.nextInt();\n        if(choice==1){\n           return new AdminUser(userName);\n        }\n        else{\n            return new NormalUser(userName);\n        }\n    }\n\n    public static void main(String[] args) {\n        //先放三本书\n        BookList bookList = new BookList();\n        //登录\n        User user =  login();\n        while(true){\n            int choice = user.menu();\n            user.doOperation(choice,bookList);\n        }\n    }\n}\n</code></pre>\n<p><img alt=\"\" height=\"410\" src=\"..\\..\\static\\image\\22b0971abeb346ccb0105476845f0d91.png\" width=\"1200\"/></p>\n<p>当引用的对象不同时，会打印不同的菜单</p>\n<p> </p>\n<blockquote>\n<p><span style=\"color:#faa572;\"><strong>“ 本期的分享就到这里了， 记得给博主一个三连哈，你的支持是我创作的最大动力！</strong></span></p>\n</blockquote>\n<p><img alt=\"ced485cbb11e458d81a746890b32cf3f.gif\" src=\"https://img-blog.csdnimg.cn/ced485cbb11e458d81a746890b32cf3f.gif\"/></p>\n<p> </p>\n<p></p>\n</div>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-08-13 11:54:16", "summary": "作者：敲代码流川枫博客主页：流川枫的博客流川枫的博客专栏：和我一起学和我一起学语录：工欲善其事必先利其器，给大家介绍一款超牛的斩获大厂利器牛客网点击免费注册和我一起刷题吧点击免费注册和我一起刷题吧文章"}