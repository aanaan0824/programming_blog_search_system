{"blogid": "126631670", "writerAge": "码龄2年", "writerBlogNum": "371", "writerCollect": "2050", "writerComment": "204", "writerFan": "3220", "writerGrade": "5级", "writerIntegral": "4278", "writerName": "在人间负债^", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126631670.jpg", "writerRankTotal": "3788", "writerRankWeekly": "3784", "writerThumb": "283", "writerVisitNum": "136750", "blog_read_count": "11", "blog_time": "于 2022-09-07 11:38:57 发布", "blog_title": "MySql 数据库【分组查询】", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>MySql 数据库【分组查询】</h3>\n<ul><li><a href=\"#1_group_by_1\">1. group by</a></li><li><a href=\"#2_having_29\">2. having</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"1_group_by_1\"></a>1. group by</h1>\n<ol><li>找出每个工作岗位的工资和？<br/> 思路：先按照工作岗位分组，然后对工资进行求和。</li></ol>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> job<span class=\"token punctuation\">,</span> <span class=\"token function\">sum</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> job<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\fdc0f65662554a7081ec17e83036b0fc.png\"/></p>\n<ol start=\"2\"><li>找出每个部门的最高薪资？<br/> 思路：按照部门编号分组，然后求每一组的最大值</li></ol>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> deptno<span class=\"token punctuation\">,</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> deptno<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9b0039f7c60940a9b55d16a4b3811822.png\"/></p>\n<ol start=\"3\"><li>找出每个部门，不同工作岗位的最高薪资？<br/> 思路：将两个字段联合成一个字段看（两个字段分组）</li></ol>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> deptno<span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">,</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> deptno<span class=\"token punctuation\">,</span> job<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4d69d99cbe3e4746ac4847d975fb2b93.png\"/></p>\n<h1><a id=\"2_having_29\"></a>2. having</h1>\n<blockquote>\n<p>可以对分完组之后的数据进一步过滤<br/> having 必须要和 group by 联合使用</p>\n</blockquote>\n<ol><li>找出每个部门最高薪资，要求显示最高薪资大于 3000 的？<br/> 第一步：找出每个部门最高薪资，按照部门编号分组，求每一组的最大值<br/> 第二步：要求显示最高薪资大于 3000 的</li></ol>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> deptno<span class=\"token punctuation\">,</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> deptno <span class=\"token keyword\">having</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token operator\">&gt;</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3b1a0e48471440ffbefb043e2a543190.png\"/><br/> 优化</p>\n<blockquote>\n<p>where 和 having，优先选择 where，不能使用 where 再使用 having</p>\n</blockquote>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> deptno<span class=\"token punctuation\">,</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>sal<span class=\"token punctuation\">)</span> <span class=\"token keyword\">from</span> emp <span class=\"token keyword\">where</span> sal <span class=\"token operator\">&gt;</span> <span class=\"token number\">3000</span> <span class=\"token keyword\">group</span> <span class=\"token keyword\">by</span> deptno<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dcb10b5db7284912aef998a9bbfc16bd.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-09-07 11:38:57", "summary": "数据库分组查询找出每个工作岗位的工资和？思路：先按照工作岗位分组，然后对工资进行求和。在这里插入图片描述找出每个部门的最高薪资？思路：按照部门编号分组，然后求每一组的最大值在这里插入图片描述找出每个部"}