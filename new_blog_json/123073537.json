{"blogid": "123073537", "writerAge": "码龄6年", "writerBlogNum": "15", "writerCollect": "19", "writerComment": "2", "writerFan": "1", "writerGrade": "3级", "writerIntegral": "642", "writerName": "Binzaga", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123073537.jpg", "writerRankTotal": "96637", "writerRankWeekly": "155275", "writerThumb": "6", "writerVisitNum": "51004", "blog_read_count": "4206", "blog_time": "已于 2022-03-17 19:23:14 修改", "blog_title": "php通过IMAP收取各个文件夹的邮件（附代码）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"_1\"></a>本文内容</h2>\n<h4><a id=\"Gmailqqqqoutlookhotmail__2\"></a>已实现对于Gmail，qq，qq企业邮箱，阿里企业邮箱，outlook，hotmail的指定文件夹来拉取邮件内容，内容截图，附件等功能 ！</h4>\n<ul><li><strong>什么是IMAP，POP3，IMAP协议</strong></li><li><strong>php获取收件箱，发件箱，垃圾箱，各种自定义分类</strong></li><li><strong>php 解析邮件内容，邮件内容，邮件内截图，邮件附件</strong></li></ul>\n<p>什么是IMAP，POP3，IMAP协议？</p>\n<blockquote>\n<p><strong>IMAP和POP3的区别?</strong></p>\n<p>MAP像POP3那样提供了方便的邮件下载服务，让用户能进行离线阅读。IMAP和POP3是邮件访问最为普遍的Internet标准协议。不同的是：<br/> 1、IMAP提供Webmail 与电子邮件客户端之间的双向通信，客户端收取的邮件仍然保留在服务器上，同时在客户端上的操作都会反馈到服务器上（如：删除邮件，标记已读等，服务器上的邮件也会做相应的动作。所以无论从浏览器登录邮箱或者客户端软件登录邮箱，看到的邮件以及状态都是一致的。） 。而POP3在客户端的操作不会反馈到服务器上。<br/> 2、IMAP更好地支持了从多个不同设备中随时访问新邮件。<br/> 3、IMAP提供的摘要浏览功能可以让你在阅读完所有的邮件到达时间、主题、发件人、大小等信息后才作出是否下载的决定。<br/> 4、POP3需要下载未阅读的邮件，IMAP可以不用把所有的邮件全部下载，而是通过客户端直接对服务器上的邮件进行操作。所有通过IMAP传输的数据都会被加密，从而保证通信的安全性。<br/> 5、IMAP 整体上为用户带来更为便捷和可靠的体验。POP3 更易丢失邮件或多次下载相同的邮件。<br/> SMTP的全称是“Simple Mail Transfer Protocol”，即简单邮件传输协议（25号端口）。它是一组用于从源地址到目的地址传输邮件的规范，通过它来控制邮件的中转方式。SMTP 协议属于 TCP/IP 协议簇，它帮助每台计算机在发送或中转信件时找到下一个目的地。</p>\n</blockquote>\n<blockquote>\n<p><strong>SMTP</strong><br/> SMTP是一个“推”的协议，它不允许根据需要从远程服务器上“拉”来消息。SMTP服务器就是遵循SMTP协议的发送邮件服务器，SMTP认证就是要求必须在提供了账户名和密码之后才可以登录<br/> SMTP 服务器，这就使得那些垃圾邮件的散播者无可乘之机。</p>\n</blockquote>\n<p>重要的php函数</p>\n<p><a href=\"https://www.php.net/manual/zh/function.imap-open.php\">imap_open</a> //建立imap连接<br/> <a href=\"https://www.php.net/manual/zh/function.imap-list.php\">imap_list</a><br/> //获取邮箱文件夹（收件箱，发件箱，垃圾箱等）<br/> <a href=\"https://www.php.net/manual/zh/function.imap-header.php\">imap_header</a><br/> //获取邮件基础信息（发件人，接收人，抄送人，邮件主题，发送时间等）</p>\n<p>代码示例：</p>\n<pre><code>$mbox = imap_open(\"{imap.qq.com:993/imap/ssl}INBOX\",\"**@qq.com\",\"******\");\n$emailArr = imap_search($mbox, \"SINCE 2022-03-10\"); //获取从2022-03-10后的邮件\n$header = imap_headerinfo($mbox, $mid); //获取某个邮件信息,$mid为$emailArr数组中的值\necho 'title:'.$this-&gt;decode($header-&gt;subject).PHP_EOL;//获取邮件主题\n$body = $this-&gt;getPart($mbox, $mid, \"TEXT/HTML\");\n$encode = mb_detect_encoding($body, array(\"ASCII\",'UTF-8',\"GB2312\",\"GBK\",'BIG5'));\n$body = mb_convert_encoding($body,'UTF-8',$encode);\necho 'body:'.$body.PHP_EOL;die;//获取转换成utf8格式的邮件内容\n\n</code></pre>\n<p>完整版代码我已经放在微信讨论群，欢迎各位码农来获取代码（保证免费），完整版代码已实现对于Gmail，qq，qq企业邮箱，阿里企业邮箱，outlook，hotmail的指定文件夹来拉取邮件内容，内容截图，附件等功能，感兴趣可加我WeChat: LJ249070636，加人请备注：CSDN邮箱</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2022-03-17 19:23:14", "summary": "本文内容已实现对于，，企业邮箱，阿里企业邮箱，，的指定文件夹来拉取邮件内容，内容截图，附件等功能！什么是，，协议获取收件箱，发件箱，垃圾箱，各种自定义分类解析邮件内容，邮件内容，邮件内截图，邮件附件什"}