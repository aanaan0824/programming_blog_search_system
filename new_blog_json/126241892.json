{"blogid": "126241892", "writerAge": "码龄1年", "writerBlogNum": "78", "writerCollect": "1993", "writerComment": "2708", "writerFan": "2032", "writerGrade": "6级", "writerIntegral": "5845", "writerName": "SYFStrive", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126241892.jpg", "writerRankTotal": "2738", "writerRankWeekly": "40", "writerThumb": "2130", "writerVisitNum": "41940", "blog_read_count": "525", "blog_time": "已于 2022-08-30 13:18:02 修改", "blog_title": "第九天 Python爬虫之Scrapy（框架简单使用 ）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>​<br/> ​<br/> <img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/154d035aa4db42df99f3b01fbf287e46.gif#pic_center\"/></p>\n<blockquote>\n<p><strong>@作者</strong> : <font color=\"#409EFF\"><strong>SYFStrive</strong></font><br/> <strong>@创建时间</strong> : <font color=\"#409EFF\"><strong>2022/8/9 7:42</strong></font><br/> 📜： <font color=\"#009688\"><strong>Scrapy框架</strong></font><br/> 🥧： <a href=\"https://blog.csdn.net/m0_61490399/article/details/126216719\"><font color=\"#0096ed\"><strong>点击跳转到上一篇续文</strong></font></a>🦄<br/> 🥧： <strong>感谢支持,学习累了可以先看小段由小胖给大家带来的街舞😀</strong><br/> <img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/2c353ec3abfe4f1d9980da9ac6becd57.gif#pic_center\"/><br/> <img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/1a8e166d911442018cd6dac77a52cfb6.gif#pic_center\"/></p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><a href=\"#_13\">简介</a></li><li><ul><li><a href=\"#Scrapy_18\">📦Scrapy使用前准备</a></li><li><a href=\"#Scrapy_26\">Scrapy项目的创建，运行以及分析框架结构📦</a></li><li><ul><li><a href=\"#_27\">创建项目</a></li><li><a href=\"#_30\">创建爬虫文件</a></li><li><a href=\"#_39\">运行</a></li><li><a href=\"#_42\">分析</a></li></ul>\n</li><li><a href=\"#_56\">简单运行框架📦</a></li><li><a href=\"#_66\">简单运行框架访问一个网站（以💼为例，以及（三个属性两个方法））📦</a></li><li><ul><li><a href=\"#_67\">三个属性以及两个方法</a></li><li><a href=\"#_73\">📰代码演示</a></li><li><a href=\"#_89\">小总结</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_91\">最后</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_13\"></a>简介</h1>\n<ol><li>Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。 其最初是为了页面抓取 (更确切来说, 网络抓取 )所设计的， 也可以应用在获取API所返回的数据 (例如 Amazon Associates Web Services ) 或者通用的网络爬虫。</li><li>Scrapy 是一个基于 Twisted 实现的异步处理爬虫框架，该框架使用纯 Python 语言编写。Scrapy 框架应用广泛，常用于数据采集、网络监测，以及自动化测试等。</li><li>提示：Twisted 是一个基于事件驱动的网络引擎框架，同样采用 Python 实现。</li></ol>\n<h2><a id=\"Scrapy_18\"></a>📦Scrapy使用前准备</h2>\n<ul><li>文档如👇</li></ul>\n<ol><li>官网文档：<a href=\"https://scrapy.org/\">链接</a></li><li>C语言中文文档：<a href=\"http://c.biancheng.net/python_spider/scrapy.html\">链接</a></li></ol>\n<ul><li>安装</li></ul>\n<ol start=\"3\"><li>安装语法：python -m pip install Scrapy</li><li>报错：使用pip install -i https://pypi.tuna.tsinghua.edu.cn/simple --trusted-host pypi.tuna.tsinghua.edu.cn 加包名</li></ol>\n<h2><a id=\"Scrapy_26\"></a>Scrapy项目的创建，运行以及分析框架结构📦</h2>\n<h3><a id=\"_27\"></a>创建项目</h3>\n<ul><li>scrapy startproject 项目名称</li><li>注意：项目的名字不允许使用数字开头 也不能包含中文</li></ul>\n<h3><a id=\"_30\"></a>创建爬虫文件</h3>\n<ol><li>首先到项目目录下</li><li>终端运行：scrapy genspider 爬虫名字 网页的域名（如： scrapy genspider baidu www.baidu.com）</li><li>一般情况下不需要添加http协议 因为start_urls的值是根据allowed_domains</li><li>所以添加了http的话 那么start_urls就需要我们手动去修改了</li><li>分析创建的爬虫文件</li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\e577202c675d4002b439001b5724944c.png\"/></p>\n<h3><a id=\"_39\"></a>运行</h3>\n<p>scrapy crawl 爬虫的名字（如 👉 ：scrapy crawl baidu）</p>\n<h3><a id=\"_42\"></a>分析</h3>\n<ul><li>项目组成：</li></ul>\n<ol><li>spiders<br/> <strong>init</strong>.py<br/> 自定义的爬虫文件.py 👉 由我们自己创建，👉 是实现爬虫核心功能的文件<br/> <strong>init</strong>.py<br/> items.py 👉 定义数据结构的地方，是一个继承自scrapy.Item的类<br/> middlewares.py 👉 中间件 代理<br/> pipelines.py 👉 管道文件，里面只有一个类，用于处理下载数据的后续处理<br/> 默认是300优先级，值越小优先级越高（1‐1000）<br/> settings.py 👉 配置文件 比如：是否遵守robots协议，User‐Agent定义等<br/> 2.settings.py （下的ROBOTSTXT_OBEY = True）说明如👇<br/> <strong>注意（裙子协议）：</strong> 注释掉之后 那么就不遵守robots协议了 他是一个君子协议 一般情况下 我们不用遵守</li></ol>\n<h2><a id=\"_56\"></a>简单运行框架📦</h2>\n<p>scrapy crawl baidu (运行完有并没有看到hello scrapyShell（因为开启了君子协议） )</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1f7a74dda14a44e0ae984e5385937abe.png\"/><br/> 如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\74299bcb717040398d78fe349b933883.png\"/><br/> 如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\b97981fede88431e85a622ce95a0e655.png\"/></p>\n<h2><a id=\"_66\"></a>简单运行框架访问一个网站（以💼为例，以及（三个属性两个方法））📦</h2>\n<h3><a id=\"_67\"></a>三个属性以及两个方法</h3>\n<ol><li>response.text 👉 响应的是字符串</li><li>response.body 👉 响应的是二进制文件</li><li>response.xpath() 👉 xpath方法的返回值类型是selector列表</li><li>extract() 👉 提取的是selector对象的是data</li><li>extract_first() 👉 提取的是selector列表中的第一个数据</li></ol>\n<h3><a id=\"_73\"></a>📰代码演示</h3>\n<p>如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\9c0a77fd7c194c819b76f49114efcadc.png\"/><br/> 获取源码 如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8005c4293e4043e0803d89ede4537b3f.png\"/></p>\n<p>利用xpath插件找到想要的内容 如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\c70bae794973479797bff9621644ea5d.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8237aa47e2a2423ba55f9c119e91b7a0.png\"/></p>\n<p>获取内容 如下：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0b342a508c6b48f2ac84d2ff31edeac9.png\"/></p>\n<h3><a id=\"_89\"></a>小总结</h3>\n<p>创建项目 👉 创建爬虫文件（检测能不能正常爬到：随便打印print（）） 👉 同过xpath bas等 👉 获取相关内容</p>\n<h1><a id=\"_91\"></a>最后</h1>\n<p><strong>Scrapy框架还未结束（待更），觉得不错的请给我专栏点点订阅，你的支持是我们更新的动力，感谢大家的支持，希望这篇文章能帮到大家</strong></p>\n<blockquote>\n<p><a href=\"https://blog.csdn.net/m0_61490399/category_11945820.html?spm=1001.2014.3001.5482\">点击跳转到我的Python专栏</a></p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\21ab07bbc52e422090c2b819b9318958.png\"/></p>\n<p><strong>下篇文章再见ヾ(￣▽￣)Bye<sub>Bye</sub></strong></p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\dd8d5f8e512f4c778736eee95712d6b3.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-08-30 13:18:02", "summary": "请添加图片描述作者创建时间：框架：点击跳转到上一篇续文：感谢支持学习累了可以先看小段由小胖给大家带来的街舞请添加图片描述在这里插入图片描述目录简介使用前准备项目的创建，运行以及分析框架结构创建项目创建"}