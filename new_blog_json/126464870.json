{"blogid": "126464870", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "79", "writerCollect": "3725", "writerComment": "3286", "writerFan": "5894", "writerGrade": "7çº§", "writerIntegral": "9793", "writerName": "knighthood2001", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126464870.jpg", "writerRankTotal": "1343", "writerRankWeekly": "41", "writerThumb": "3239", "writerVisitNum": "158303", "blog_read_count": "1100", "blog_time": "äºÂ 2022-08-23 06:00:00Â å‘å¸ƒ", "blog_title": "ã€tensorflowã€‘åˆ¶ä½œè‡ªå·±çš„æ•°æ®é›†", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<blockquote>\n<p>  ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”</p>\n<p><strong>ğŸ¥° åšå®¢é¦–é¡µï¼š<strong><a href=\"https://blog.csdn.net/knighthood2001?type=blog\" title=\"knighthood2001\">knighthood2001</a></strong></strong></p>\n<p><strong>ğŸ˜— æ¬¢è¿ç‚¹èµğŸ‘è¯„è®ºğŸ—¨ï¸</strong></p>\n<p><strong>â¤ï¸ çƒ­çˆ±pythonï¼ŒæœŸå¾…ä¸å¤§å®¶ä¸€åŒè¿›æ­¥æˆé•¿ï¼ï¼â¤ï¸</strong></p>\n<p><strong>ğŸ‘€<strong><a href=\"https://www.nowcoder.com/link/pc_csdncpt_knight_python\" title=\"ç»™å¤§å®¶æ¨èä¸€æ¬¾å¾ˆç«çˆ†çš„åˆ·é¢˜ã€é¢è¯•æ±‚èŒç½‘ç«™\">ç»™å¤§å®¶æ¨èä¸€æ¬¾å¾ˆç«çˆ†çš„åˆ·é¢˜ã€é¢è¯•æ±‚èŒç½‘ç«™</a></strong>ğŸ‘€</strong></p>\n<p><strong>è·Ÿæˆ‘ä¸€èµ·æ¥å·©å›ºåŸºç¡€å’Œåˆ·é¢˜å§</strong></p>\n</blockquote>\n<p id=\"main-toc\"><strong>ç›®å½•</strong></p>\n<p id=\"%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">æ•°æ®é›†çš„åŸºæœ¬ä»‹ç»</span></span></a></strong></p>\n<p id=\"tensorflow%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86-toc\" style=\"margin-left:0px;\"><strong><a href=\"#tensorflow%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">tensorflowä¸­çš„æ•°æ®é›†</span></span></a></strong></p>\n<p id=\"%E4%BB%80%E4%B9%88%E6%98%AFTFDS-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E4%BB%80%E4%B9%88%E6%98%AFTFDS\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">ä»€ä¹ˆæ˜¯TFDS</span></span></a></strong></p>\n<p id=\"%E5%AE%89%E8%A3%85TFDS-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E5%AE%89%E8%A3%85TFDS\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">å®‰è£…TFDS</span></span></a></strong></p>\n<p id=\"%E7%94%A8TFDS%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E7%94%A8TFDS%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">ç”¨TFDSåŠ è½½æ•°æ®é›†</span></span></a></strong></p>\n<p id=\"%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%B0%86%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%88%B6%E4%BD%9C%E6%88%90%E5%86%85%E5%AD%98%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E9%9B%86-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%B0%86%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%88%B6%E4%BD%9C%E6%88%90%E5%86%85%E5%AD%98%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E9%9B%86\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">å®ä¾‹ï¼šå°†æ¨¡æ‹Ÿæ•°æ®åˆ¶ä½œæˆå†…å­˜å¯¹è±¡æ•°æ®é›†</span></span></a></strong></p>\n<p id=\"%E2%91%A0%E7%94%9F%E6%88%90%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E2%91%A0%E7%94%9F%E6%88%90%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">â‘ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</span></span></a></strong></p>\n<p id=\"%E2%91%A1%E5%AE%9A%E4%B9%89%E5%8D%A0%E4%BD%8D%E7%AC%A6-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E2%91%A1%E5%AE%9A%E4%B9%89%E5%8D%A0%E4%BD%8D%E7%AC%A6\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">â‘¡å®šä¹‰å ä½ç¬¦</span></span></a></strong></p>\n<p id=\"%E2%91%A2%E5%BB%BA%E7%AB%8Bsession%E4%BC%9A%E8%AF%9D%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%98%BE%E7%A4%BA%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E3%80%82-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E2%91%A2%E5%BB%BA%E7%AB%8Bsession%E4%BC%9A%E8%AF%9D%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%98%BE%E7%A4%BA%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E3%80%82\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">â‘¢å»ºç«‹sessionä¼šè¯ï¼Œè·å–å¹¶æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ã€‚</span></span></a></strong></p>\n<p id=\"%E2%91%A3%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E2%91%A3%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">â‘£æ¨¡æ‹Ÿæ•°æ®å¯è§†åŒ–</span></span></a></strong></p>\n<p id=\"%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C-toc\" style=\"margin-left:40px;\"><strong><a href=\"#%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">è¿è¡Œç»“æœ</span></span></a></strong></p>\n<p id=\"%E6%94%B9%E8%BF%9B%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E6%9C%89%E8%BF%AD%E4%BB%A3%E5%80%BC%E5%B9%B6%E6%94%AF%E6%8C%81%E4%B9%B1%E5%BA%8F%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E9%9B%86%C2%A0-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E6%94%B9%E8%BF%9B%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E6%9C%89%E8%BF%AD%E4%BB%A3%E5%80%BC%E5%B9%B6%E6%94%AF%E6%8C%81%E4%B9%B1%E5%BA%8F%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E9%9B%86%C2%A0\"><span style=\"color:#1c7331;\"><span style=\"background-color:#fefcd8;\">æ”¹è¿›ï¼šåˆ›å»ºå¸¦æœ‰è¿­ä»£å€¼å¹¶æ”¯æŒä¹±åºåŠŸèƒ½çš„æ¨¡æ‹Ÿæ•°æ®é›† </span></span></a></strong></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D\"><strong>æ•°æ®é›†çš„åŸºæœ¬ä»‹ç»</strong></h1>\n<p>        æ•°æ®é›†æ˜¯æ ·æœ¬çš„é›†åˆï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ•°æ®é›†ç”¨äºæ¨¡å‹è®­ç»ƒã€‚å†ç”¨tensorflowæ¡†æ¶å¼€å‘æ·±åº¦å­¦ä¹ æ¨¡å‹ä¹‹å‰ï¼Œéœ€è¦ä¸ºæ¨¡å‹å‡†å¤‡å¥½æ•°æ®é›†ã€‚åœ¨è®­ç»ƒæ¨¡å‹ç¯èŠ‚ï¼Œç¨‹åºéœ€è¦ä»æ•°æ®é›†ä¸­ä¸æ–­åœ°å°†æ•°æ®è¾“å…¥æ¨¡å‹ï¼Œæ¨¡å‹é€šè¿‡å¯¹æ³¨å…¥æ•°æ®çš„è®¡ç®—æ¥å­¦ä¹ ç‰¹å¾ã€‚</p>\n<h1 id=\"tensorflow%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E9%9B%86\"><strong>tensorflowä¸­çš„æ•°æ®é›†</strong></h1>\n<p><span style=\"color:#ff9900;\">tensorflowä¸­æœ‰4ç§æ•°æ®é›†æ ¼å¼</span></p>\n<p><strong>        <span style=\"background-color:#e7fafa;\">å†…å­˜å¯¹è±¡æ•°æ®é›†ï¼š</span></strong>ç›´æ¥ç”¨å­—å…¸å˜é‡feed_dictï¼Œé€šè¿‡æ³¨å…¥æ¨¡å¼å‘æ¨¡å‹ä¸­è¾“å…¥æ•°æ®ã€‚<span style=\"color:#956fe7;\"><strong>è¯¥æ•°æ®é›†é€‚ç”¨äºå°‘é‡çš„æ•°æ®é›†è¾“å…¥ã€‚</strong></span></p>\n<p><strong>        <span style=\"background-color:#e7fafa;\">TFRecordæ•°æ®é›†ï¼š</span></strong>ç”¨é˜Ÿåˆ—å¼ç®¡é“ï¼ˆtfrecordï¼‰å‘æ¨¡å‹è¾“å…¥æ•°æ®ã€‚<span style=\"color:#956fe7;\"><strong>è¯¥æ•°æ®é›†é€‚ç”¨å¤§é‡çš„æ•°æ®é›†è¾“å…¥ã€‚</strong></span></p>\n<p><strong>        <span style=\"background-color:#e7fafa;\">Datasetæ•°æ®é›†ï¼š</span></strong>é€šè¿‡æ€§èƒ½æ›´é«˜çš„è¾“å…¥ç®¡é“ï¼ˆtf.dataï¼‰å‘æ¨¡å‹è¾“å…¥æ•°æ®ã€‚è¯¥æ•°æ®é›†é€‚ç”¨äºtensorflow1.4ä¹‹åçš„ç‰ˆæœ¬ã€‚</p>\n<p><strong>        <span style=\"background-color:#e7fafa;\">tf.kerasæ¥å£æ•°æ®é›†ï¼š</span></strong>æ”¯æŒtf.kerasè¯­æ³•çš„æ•°æ®é›†æ¥å£ã€‚è¯¥æ•°æ®é›†é€‚ç”¨äºtensorflow1.4ä¹‹åçš„ç‰ˆæœ¬ã€‚</p>\n<h1 id=\"%E4%BB%80%E4%B9%88%E6%98%AFTFDS\"><strong>ä»€ä¹ˆæ˜¯TFDS</strong></h1>\n<p>        TFDSæ˜¯tensorflowä¸­çš„æ•°æ®é›†é›†åˆæ¨¡å—ï¼Œè¯¥æ¨¡å—å°†å¸¸ç”¨çš„æ•°æ®åŠå°è£…èµ·æ¥ï¼Œå®ç°è‡ªåŠ¨ä¸‹è½½ä¸ç»Ÿä¸€çš„è°ƒç”¨æ¥å£ï¼Œä¸ºå¼€å‘æ¨¡å‹æä¾›äº†ä¾¿åˆ©ã€‚</p>\n<h2 id=\"%E5%AE%89%E8%A3%85TFDS\"><strong>å®‰è£…TFDS</strong></h2>\n<p>è¦æ±‚ï¼štensorflowç‰ˆæœ¬åœ¨1.12åŠä»¥ä¸Šã€‚å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">pip install tensorflow-datasets</code></pre>\n<h2 id=\"%E7%94%A8TFDS%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86\"><strong>ç”¨TFDSåŠ è½½æ•°æ®é›†</strong></h2>\n<p><strong>è¿™é‡Œä»¥minstæ•°æ®é›†ä¸ºä¾‹</strong></p>\n<pre><code class=\"language-python\">import tensorflow_datasets as tfds\nprint(tfds.list_builders())\nds_train, ds_test = tfds.load(name='mnist', split=[\"train\", \"test\"])\nds_train = ds_train.shuffle(1000).batch(128).prefetch(10)\nfor features in ds_train.take(1):\n    image, label = features[\"image\"], [\"label\"]</code></pre>\n<p>é‡è¦ç»“æœå¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">Downloading and preparing dataset Unknown size (download: Unknown size, generated: Unknown size, total: Unknown size) to ~\\tensorflow_datasets\\mnist\\3.0.1...\n\nDataset mnist downloaded and prepared to ~\\tensorflow_datasets\\mnist\\3.0.1. Subsequent calls will reuse this data.</code></pre>\n<h1 id=\"%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%B0%86%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%88%B6%E4%BD%9C%E6%88%90%E5%86%85%E5%AD%98%E5%AF%B9%E8%B1%A1%E6%95%B0%E6%8D%AE%E9%9B%86\"><strong>å®ä¾‹ï¼šå°†æ¨¡æ‹Ÿæ•°æ®åˆ¶ä½œæˆå†…å­˜å¯¹è±¡æ•°æ®é›†</strong></h1>\n<p>        æœ¬å®ä¾‹å°†ç”¨å†…å­˜ä¸­çš„æ¨¡æ‹Ÿæ•°æ®æ¥åˆ¶ä½œæˆæ•°æ®é›†ï¼Œç”Ÿæˆçš„æ•°æ®é›†è¢«ç›´æ¥å­˜æ”¾åœ¨pythonå†…å­˜å¯¹è±¡ä¸­ï¼Œè¿™æ ·åšçš„å¥½å¤„--<span style=\"color:#1c7331;\"><strong>æ•°æ®é›†çš„åˆ¶ä½œå¯ä»¥ç‹¬ç«‹äºä»»ä½•æ¡†æ¶</strong></span>ã€‚</p>\n<p>        æœ¬å®ä¾‹å°†ç”Ÿæˆä¸€ä¸ªæ¨¡æ‹Ÿyâ‰ˆ2xçš„æ•°æ®é›†ï¼Œå¹¶é€šè¿‡é™æ€å›¾çš„æ–¹å¼æ˜¾ç¤ºå‡ºæ¥ã€‚</p>\n<blockquote>\n<p><strong>æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>\n<p><strong>â‘ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</strong></p>\n<p><strong>â‘¡å®šä¹‰å ä½ç¬¦</strong></p>\n<p><strong>â‘¢å»ºç«‹sessionä¼šè¯ï¼Œè·å–å¹¶æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ã€‚</strong></p>\n<p><strong>â‘£æ¨¡æ‹Ÿæ•°æ®å¯è§†åŒ–</strong></p>\n</blockquote>\n<h2 id=\"%E2%91%A0%E7%94%9F%E6%88%90%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE\"><strong>â‘ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</strong></h2>\n<p>        åœ¨æ ·æœ¬åˆ¶ä½œè¿‡ç¨‹ä¸­ï¼Œæœ€å¿Œè®³çš„æ˜¯ä¸€æ¬¡æ€§å°†æ•°æ®éƒ½æ”¾å…¥å†…å­˜ä¸­ï¼Œå¦‚æœæ•°æ®é‡å¾ˆå¤§ï¼Œè¿™æ ·å®¹æ˜“é€ æˆå†…å­˜ç”¨å°½ï¼Œå³ä½¿æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œä¹Ÿä¸å»ºè®®å°†æ•°æ®å…¨éƒ¨ç”Ÿæˆä»¥åä¸€æ¬¡æ€§æ”¾å…¥å†…å­˜ä¸­ï¼Œä¸€èˆ¬åšæ³•æ˜¯ï¼š</p>\n<p><span style=\"background-color:#ffd900;\">â… åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨ï¼Œ</span></p>\n<p><span style=\"background-color:#ffd900;\">â…¡æ¯æ¬¡åªç”ŸæˆæŒ‡å®šæ‰¹æ¬¡çš„æ ·æœ¬</span></p>\n<p>è¿™æ ·å°±åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥ç”¨â€œéšç”¨éšåˆ¶ä½œâ€çš„æ–¹æ³•æ¥è·å–æ ·æœ¬æ•°æ®ã€‚</p>\n<p>        ä¸‹é¢å®šä¹‰GenerateDataå‡½æ•°æ¥ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼Œå¹¶å°†GenerateDataå‡½æ•°çš„è¿”å›å€¼è®¾ä¸ºä»¥ç”Ÿæˆå™¨æ–¹å¼è¿”å›ã€‚è¿™ç§åšæ³•<strong>ä½¿å†…å­˜è¢«å ç”¨çš„æœ€å°‘</strong>ã€‚</p>\n<pre><code class=\"language-python\">import tensorflow as tf\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ntf.compat.v1.disable_v2_behavior()\n\n#åœ¨å†…å­˜ä¸­ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®\ndef GenerateData(batchsize = 100):\n    train_X = np.linspace(-1, 1, batchsize)   #train_Xä¸º-1åˆ°1ä¹‹é—´è¿ç»­çš„100ä¸ªæµ®ç‚¹æ•°\n    train_Y = 2 * train_X + np.random.randn(*train_X.shape) * 0.3 # y=2xï¼Œä½†æ˜¯åŠ å…¥äº†å™ªå£°\n    yield train_X, train_Y       #ä»¥ç”Ÿæˆå™¨çš„æ–¹å¼è¿”å›</code></pre>\n<p>        <span style=\"color:#fe2c24;\"><strong>å‡½æ•°ä½¿ç”¨yieldï¼Œä½¿å¾—å‡½æ•°ä»¥ç”Ÿæˆå™¨çš„æ–¹å¼è¿”å›æ•°æ®ã€‚ç”Ÿæˆå™¨å¯¹è±¡åªç”Ÿæˆä¸€æ¬¡ï¼Œè¿‡åä¾¿ä¼šè‡ªåŠ¨é”€æ¯ï¼Œå¯ä»¥çœç•¥å¤§é‡çš„å†…å­˜ã€‚</strong></span></p>\n<h2 id=\"%E2%91%A1%E5%AE%9A%E4%B9%89%E5%8D%A0%E4%BD%8D%E7%AC%A6\"><strong>â‘¡å®šä¹‰å ä½ç¬¦</strong></h2>\n<pre><code class=\"language-python\">#å®šä¹‰ç½‘ç»œæ¨¡å‹ç»“æ„éƒ¨åˆ†ï¼Œè¿™é‡Œåªæœ‰å ä½ç¬¦å¼ é‡\nXinput = tf.compat.v1.placeholder(\"float\", (None))\nYinput = tf.compat.v1.placeholder(\"float\", (None))</code></pre>\n<p><span style=\"color:#fe2c24;\"><strong>æ³¨æ„ï¼š</strong></span>åœ¨æ­£å¸¸çš„æ¨¡å‹å¼€å‘ä¸­ï¼Œè¿™ä¸ªç¯èŠ‚åº”è¯¥æ˜¯å®šä¹‰å ä½ç¬¦å’Œç½‘ç»œç»“æ„ï¼Œåœ¨è®­ç»ƒæ¨¡å‹æ—¶ï¼Œç³»ç»Ÿä¼šå°†æ•°æ®é›†çš„è¾“å…¥æ•°æ®ç”¨å ä½ç¬¦æ¥ä»£æ›¿ï¼Œå¹¶ä½¿ç”¨é™æ€å›¾çš„æ³¨å…¥æœºåˆ¶ï¼Œå°†è¾“å…¥æ•°æ®ä¼ å…¥æ¨¡å‹è¿›è¡Œè¿­ä»£è®­ç»ƒã€‚å› ä¸ºæœ¬å®ä¾‹åªéœ€è¦ä»æ•°æ®é›†ä¸­è·å–æ•°æ®ï¼Œæ‰€ä»¥åªå®šä¹‰å ä½ç¬¦ï¼Œä¸éœ€è¦å®šä¹‰å…¶ä»–ç½‘ç»œèŠ‚ç‚¹ã€‚</p>\n<h2 id=\"%E2%91%A2%E5%BB%BA%E7%AB%8Bsession%E4%BC%9A%E8%AF%9D%EF%BC%8C%E8%8E%B7%E5%8F%96%E5%B9%B6%E6%98%BE%E7%A4%BA%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E3%80%82\"><strong>â‘¢å»ºç«‹sessionä¼šè¯ï¼Œè·å–å¹¶æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ã€‚</strong></h2>\n<p><strong>        é¦–å…ˆå®šä¹‰æ•°æ®é›†çš„è¿­ä»£æ¬¡æ•°ï¼Œæ¥ç€å»ºç«‹ä¼šè¯ï¼Œåœ¨ä¼šè¯ä¸­ä½¿ç”¨ä¸¤å±‚forå¾ªç¯ï¼›ç¬¬ä¸€å±‚æ˜¯æŒ‰ç…§è¿­ä»£æ¬¡æ•°æ¥å¾ªç¯ï¼Œç¬¬äºŒå±‚æ˜¯å¯¹GenerateDataå‡½æ•°è¿”å›çš„ç”Ÿæˆå™¨å¯¹è±¡è¿›è¡Œå¾ªç¯ï¼Œå¹¶å°†æ•°æ®æ‰“å°å‡ºæ¥ã€‚</strong></p>\n<p><strong>        å› ä¸ºGenerateData</strong><strong>å‡½æ•°è¿”å›çš„ç”Ÿæˆå™¨å¯¹è±¡åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ç¬¬äºŒå±‚å¾ªç¯ä¹Ÿåªè¿è¡Œä¸€æ¬¡ã€‚</strong></p>\n<pre><code class=\"language-python\">#å»ºç«‹ä¼šè¯ï¼Œè·å–å¹¶è¾“å‡ºæ•°æ®\ntraining_epochs = 20  # å®šä¹‰éœ€è¦è¿­ä»£çš„æ¬¡æ•°\nwith tf.compat.v1.Session() as sess:  # å»ºç«‹ä¼šè¯ï¼ˆsessionï¼‰\n    for epoch in range(training_epochs): #è¿­ä»£æ•°æ®é›†20é\n        for x, y in GenerateData(): #é€šè¿‡forå¾ªç¯æ‰“å°æ‰€æœ‰çš„ç‚¹\n            xv,yv = sess.run([Xinput,Yinput],feed_dict={Xinput: x, Yinput: y}) #é€šè¿‡é™æ€å›¾æ³¨å…¥çš„æ–¹å¼ï¼Œä¼ å…¥æ•°æ®\n\n            print(epoch,\"| x.shape:\",np.shape(xv),\"| x[:3]:\",xv[:3])\n            print(epoch,\"| y.shape:\",np.shape(yv),\"| y[:3]:\",yv[:3])</code></pre>\n<p><span style=\"background-color:#d4e9d5;\">ä»£ç å¼€å§‹å®šä¹‰äº†æ•°æ®é›†çš„è¿­ä»£æ¬¡æ•°ï¼Œè¿™ä¸ªå‚æ•°åœ¨è®­ç»ƒæ¨¡å‹ä¸­æ‰ä¼šç”¨åˆ°ã€‚</span></p>\n<h2 id=\"%E2%91%A3%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96\"><strong>â‘£æ¨¡æ‹Ÿæ•°æ®å¯è§†åŒ–</strong></h2>\n<pre><code class=\"language-python\">#æ˜¾ç¤ºæ¨¡æ‹Ÿæ•°æ®ç‚¹\ntrain_data = list(GenerateData())[0]\nplt.plot(train_data[0], train_data[1], 'ro', label='Original data')\nplt.legend()\nplt.show()</code></pre>\n<h2 id=\"%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C\"><strong>è¿è¡Œç»“æœ</strong></h2>\n<p> </p>\n<pre><code class=\"language-python\">...\n17 |x.shape: (100,) |x[:3]: [-1.         -0.97979796 -0.959596  ]\n17 |y.shape: (100,) |y[:3]: [-2.0945473 -2.1236315 -1.6280223]\n18 |x.shape: (100,) |x[:3]: [-1.         -0.97979796 -0.959596  ]\n18 |y.shape: (100,) |y[:3]: [-2.022675  -2.118289  -1.8735064]\n19 |x.shape: (100,) |x[:3]: [-1.         -0.97979796 -0.959596  ]\n19 |y.shape: (100,) |y[:3]: [-2.0080116 -2.5169287 -1.6713679]</code></pre>\n<p>æ¯è¡Œæ•°æ®è¢«|ç¬¦å·åˆ’åˆ†ä¸º3å—åŒºåŸŸï¼Œåˆ†åˆ«ä¸ºï¼šè¿­ä»£æ¬¡æ•°ã€æ•°æ®çš„å½¢çŠ¶ã€å‰ä¸‰ä¸ªå…ƒç´ çš„å€¼ã€‚</p>\n<p>å¯è§†åŒ–ç»“æœå¦‚ä¸‹</p>\n<p><img alt=\"\" height=\"356\" src=\"..\\..\\static\\image\\9fce6539763e4fcc99a61a35629dd711.png\" width=\"475\"/></p>\n<h1 id=\"%E6%94%B9%E8%BF%9B%EF%BC%9A%E5%88%9B%E5%BB%BA%E5%B8%A6%E6%9C%89%E8%BF%AD%E4%BB%A3%E5%80%BC%E5%B9%B6%E6%94%AF%E6%8C%81%E4%B9%B1%E5%BA%8F%E5%8A%9F%E8%83%BD%E7%9A%84%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E9%9B%86%C2%A0\"><strong>æ”¹è¿›ï¼šåˆ›å»ºå¸¦æœ‰è¿­ä»£å€¼å¹¶æ”¯æŒä¹±åºåŠŸèƒ½çš„æ¨¡æ‹Ÿæ•°æ®é›† </strong></h1>\n<p>ä¼˜åŒ–å¦‚ä¸‹ï¼š</p>\n<p><strong>â‘ å°†æ•°æ®é›†ä¸ è¿­ä»£åŠŸèƒ½ç»‘å®šåœ¨ä¸€èµ·ï¼Œè®©ä»£ç å˜å¾—æ›´ç®€æ´ã€‚</strong></p>\n<p><strong>â‘¡å¯¹æ•°æ®é›†è¿›è¡Œä¹±åºæ’åºï¼Œè®©ç”Ÿæˆçš„xæ•°æ®æ— è§„åˆ™ ã€‚</strong></p>\n<p>é€šè¿‡å¯¹æ•°æ®é›†çš„ä¹±åºï¼Œå¯ä»¥æ¶ˆé™¤æ ·æœ¬ä¸­æ— ç”¨çš„ç‰¹å¾ï¼Œä»è€Œå¤§å¤§æå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼š</p>\n<p>åœ¨ä¹±åºæ“ä½œéƒ¨åˆ†ä½¿ç”¨çš„æ˜¯sklearn.utilsåº“ä¸­çš„shuffle()æ–¹æ³•ã€‚è¦ä½¿ç”¨ï¼Œé¦–å…ˆéœ€è¦å®‰è£…ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"language-python\">pip install sklearn</code></pre>\n</blockquote>\n<p>æ”¹è¿›åå…¨éƒ¨ä»£ç å¦‚ä¸‹ï¼š </p>\n<pre><code class=\"language-python\">import tensorflow as tf\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom sklearn.utils import shuffle\ntf.compat.v1.disable_v2_behavior()\n\ndef GenerateData(training_epochs,batchsize=100):\n    for i in range(training_epochs):\n        train_X=np.linspace(-1,1,batchsize)\n        train_Y=2*train_X+np.random.randn(*train_X.shape)*0.3\n        yield shuffle(train_X,train_Y),i\n\nXinput=tf.compat.v1.placeholder(\"float\",(None))\nYinput=tf.compat.v1.placeholder(\"float\",(None))\n\ntraining_epochs=20\nwith tf.compat.v1.Session() as sess:\n    for (x,y),ii in GenerateData(training_epochs):\n        xv,yv=sess.run([Xinput,Yinput],feed_dict={Xinput:x,Yinput:y})\n            \n        print(ii,\"|x.shape:\",np.shape(xv),\"|x[:3]:\",xv[:3])\n        print(ii,\"|y.shape:\",np.shape(yv),\"|y[:3]:\",yv[:3])\n            \ntrain_data=list(GenerateData(1))[0]\nplt.plot(train_data[0][0],train_data[0][1],'ro',label='Original data')\nplt.legend()\nplt.show()</code></pre>\n<p>å¯è§†åŒ–ç»“æœå›¾ç‰‡å¦‚ä¸‹ï¼š</p>\n<p><img alt=\"\" height=\"345\" src=\"..\\..\\static\\image\\5543039e3b5140c6945f6258f0b7f197.png\" width=\"460\"/></p>\n<p> </p>\n</div>\n</div>", "first_tag": "Python", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-08-23 06:00:00", "summary": "åšå®¢é¦–é¡µï¼šæ¬¢è¿ç‚¹èµè¯„è®ºçƒ­çˆ±ï¼ŒæœŸå¾…ä¸å¤§å®¶ä¸€åŒè¿›æ­¥æˆé•¿ï¼ï¼ç»™å¤§å®¶æ¨èä¸€æ¬¾å¾ˆç«çˆ†çš„åˆ·é¢˜ã€é¢è¯•æ±‚èŒç½‘ç«™ç»™å¤§å®¶æ¨èä¸€æ¬¾å¾ˆç«çˆ†çš„åˆ·é¢˜ã€é¢è¯•æ±‚èŒç½‘ç«™è·Ÿæˆ‘ä¸€èµ·æ¥å·©å›ºåŸºç¡€å’Œåˆ·é¢˜å§ç›®å½•æ•°æ®é›†çš„åŸºæœ¬ä»‹ç»ä¸­çš„æ•°æ®é›†ä»€ä¹ˆæ˜¯å®‰è£…"}