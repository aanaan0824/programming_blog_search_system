{"blogid": "121843235", "writerAge": "码龄4年", "writerBlogNum": "499", "writerCollect": "6016", "writerComment": "466", "writerFan": "2511", "writerGrade": "7级", "writerIntegral": "10438", "writerName": "拾牙慧者", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_121843235.jpg", "writerRankTotal": "1362", "writerRankWeekly": "21299", "writerThumb": "1579", "writerVisitNum": "697365", "blog_read_count": "11099", "blog_time": "已于 2022-07-03 21:57:26 修改", "blog_title": "html网页如何获取后台数据库的数据(html + ajax + php + mysql)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-github-gist\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p><font color=\"red\">博主联系方式：</font><br/> <font color=\"Blue\">QQ:1540984562</font><br/> <font color=\"Blue\">QQ交流群：892023501</font><br/> <font color=\"Blue\"><strong>群里会有往届的smarters和电赛选手，群里也会不时分享一些有用的资料，有问题可以在群里多问问。</strong></font></p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><ul><li><a href=\"#html_10\">html代码</a></li><li><a href=\"#php_76\">php文件代码</a></li><li><a href=\"#vscodephpphp_138\">还得在vscode上的php配置以及php环境搭建</a></li><li><a href=\"#PhpStudyweb_146\">基于PhpStudy完成web配置</a></li><li><a href=\"#_152\">登录数据库</a></li><li><a href=\"#mysqltable_182\">mysql的table准备</a></li><li><a href=\"#htmlphpWWW_218\">将html文件和php文件项目放入WWW文件夹下</a></li><li><a href=\"#_233\">跨域问题以及解决方案</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<p>HTML是无法读取数据库的，HTML是页面前端脚本语言，要想从HTML网页中获取SQL数据库里的数据，需要借助JSP或ASP或PHP或RUBY等语言来实现。 简单的关系可以这样理解： 数据库&lt;—&gt;JSP或ASP或PHP或RUBY等语言&lt;—&gt;HTML<br/> 这里我们选取php作为我们的后端语言。（主要是因为菜鸟教程里面是这样用的…）<br/> 这里可以参考一下：:<a href=\"https://www.runoob.com/php/php-ajax-database.html\">PHP - AJAX 与 MySQL</a></p>\n<h2><a id=\"html_10\"></a>html代码</h2>\n<pre><code class=\"prism language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>菜鸟教程(runoob.com)<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span> \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">function</span> <span class=\"token function\">showSite</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">str</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>str<span class=\"token operator\">==</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"txtHint\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> \n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>XMLHttpRequest<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span>\n        xmlhttp<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// IE6, IE5 浏览器执行代码</span>\n        xmlhttp<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">ActiveXObject</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Microsoft.XMLHTTP\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    xmlhttp<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onreadystatechange</span><span class=\"token operator\">=</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xmlhttp<span class=\"token punctuation\">.</span>readyState<span class=\"token operator\">==</span><span class=\"token number\">4</span> <span class=\"token operator\">&amp;&amp;</span> xmlhttp<span class=\"token punctuation\">.</span>status<span class=\"token operator\">==</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"txtHint\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML<span class=\"token operator\">=</span>xmlhttp<span class=\"token punctuation\">.</span>responseText<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    xmlhttp<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"getsite_mysql.php?q=\"</span><span class=\"token operator\">+</span>str<span class=\"token punctuation\">,</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    xmlhttp<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>users<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onchange</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">showSite</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>选择一个网站:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Google<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>2<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>淘宝<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>菜鸟教程<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>微博<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>option</span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>5<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Facebook<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>option</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>txtHint<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b</span><span class=\"token punctuation\">&gt;</span></span>网站信息显示在这里……<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n \n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<p>其中的 showSite() 函数会执行以下操作：</p>\n<p>1、检查是否有网站被选择</p>\n<p>2、创建XMLHttpRequest对象</p>\n<p>3、创建在服务器响应就绪时执行的函数</p>\n<p>4、向服务器的文件发送请求（这一步比较难以理解）</p>\n<p>5、注意添加到URL末端的参数(q)（包含下拉列表的内容）</p>\n<h2><a id=\"php_76\"></a>php文件代码</h2>\n<p>html调用的是<code>getsite_mysql.php</code>文件</p>\n<p>该文件中的源代码会运行针对mysql数据库的查询，然后再html表格中返回结果。<br/> 代码如下：</p>\n<pre><code class=\"prism language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$q</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">isset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"q\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token function\">intval</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"q\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">:</span> <span class=\"token string single-quoted-string\">''</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">empty</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$q</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string single-quoted-string\">'请选择一个网站'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">exit</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n \n<span class=\"token variable\">$con</span> <span class=\"token operator\">=</span> <span class=\"token function\">mysqli_connect</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'localhost'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'123456'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">die</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Could not connect: '</span> <span class=\"token operator\">.</span> <span class=\"token function\">mysqli_error</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 选择数据库</span>\n<span class=\"token function\">mysqli_select_db</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">,</span><span class=\"token string double-quoted-string\">\"test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 设置编码，防止中文乱码</span>\n<span class=\"token function\">mysqli_set_charset</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"utf8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token variable\">$sql</span><span class=\"token operator\">=</span><span class=\"token string double-quoted-string\">\"SELECT * FROM Websites WHERE id = '\"</span><span class=\"token operator\">.</span><span class=\"token variable\">$q</span><span class=\"token operator\">.</span><span class=\"token string double-quoted-string\">\"'\"</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token function\">mysqli_query</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">,</span><span class=\"token variable\">$sql</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;table border='1'&gt;\n&lt;tr&gt;\n&lt;th&gt;ID&lt;/th&gt;\n&lt;th&gt;网站名&lt;/th&gt;\n&lt;th&gt;网站 URL&lt;/th&gt;\n&lt;th&gt;Alexa 排名&lt;/th&gt;\n&lt;th&gt;国家&lt;/th&gt;\n&lt;/tr&gt;\"</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$row</span> <span class=\"token operator\">=</span> <span class=\"token function\">mysqli_fetch_array</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$result</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;tr&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;td&gt;\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$row</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'id'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;/td&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;td&gt;\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$row</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;/td&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;td&gt;\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$row</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'url'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;/td&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;td&gt;\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$row</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'alexa'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;/td&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;td&gt;\"</span> <span class=\"token operator\">.</span> <span class=\"token variable\">$row</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'country'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">.</span> <span class=\"token string double-quoted-string\">\"&lt;/td&gt;\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;/tr&gt;\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">echo</span> <span class=\"token string double-quoted-string\">\"&lt;/table&gt;\"</span><span class=\"token punctuation\">;</span>\n \n<span class=\"token function\">mysqli_close</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$con</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>解释如下：</p>\n<p>当查询从js发送到php文件时，会发生：</p>\n<p>1、php打开一个到mysql数据库的连接</p>\n<p>2、找到选中的用户</p>\n<p>3、创建HTML表格，填充数据，并发送\"txtHint\"占位符</p>\n<h2><a id=\"vscodephpphp_138\"></a>还得在vscode上的php配置以及php环境搭建</h2>\n<p>主要参考这篇文章：</p>\n<p>https://www.jb51.net/article/193704.htm</p>\n<p>PHPstudy官网如下：</p>\n<p>https://www.xp.cn/download.html</p>\n<h2><a id=\"PhpStudyweb_146\"></a>基于PhpStudy完成web配置</h2>\n<p>首页-&gt;一键启动选项修改一下<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\3d8ae8ce016646c7a404b5860fea2246.png\"/></p>\n<p>这里对于“网站”这一栏进行修改，给个域名，指定一下php文件的根目录<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\8b78e0a9d7da477e8a84aa355daa9659.png\"/></p>\n<h2><a id=\"_152\"></a>登录数据库</h2>\n<p>在PHPStudy里面启动mysql和apache，然后打开cmd，切换到mysql的bin文件下</p>\n<pre><code class=\"prism language-bash\">D:<span class=\"token punctuation\">\\</span><span class=\"token operator\">&gt;</span>cd D:<span class=\"token punctuation\">\\</span>phpstudy_pro<span class=\"token punctuation\">\\</span>Extensions<span class=\"token punctuation\">\\</span>MySQL5.7.26<span class=\"token punctuation\">\\</span>bin\n</code></pre>\n<p>然后输入：</p>\n<pre><code class=\"prism language-sql\">mysql <span class=\"token operator\">-</span>hlocalhost <span class=\"token operator\">-</span>uroot <span class=\"token operator\">-</span>p\n</code></pre>\n<p>默认帐号和密码为root。</p>\n<pre><code class=\"prism language-sql\">Welcome <span class=\"token keyword\">to</span> the MySQL monitor<span class=\"token punctuation\">.</span>  Commands <span class=\"token keyword\">end</span> <span class=\"token keyword\">with</span> <span class=\"token punctuation\">;</span> <span class=\"token operator\">or</span> \\g<span class=\"token punctuation\">.</span>\nYour MySQL connection id <span class=\"token operator\">is</span> <span class=\"token number\">2</span>\nServer version: <span class=\"token number\">5.7</span><span class=\"token number\">.26</span> MySQL Community Server <span class=\"token punctuation\">(</span>GPL<span class=\"token punctuation\">)</span>\n\nCopyright <span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2019</span><span class=\"token punctuation\">,</span> Oracle <span class=\"token operator\">and</span><span class=\"token operator\">/</span><span class=\"token operator\">or</span> its affiliates<span class=\"token punctuation\">.</span> <span class=\"token keyword\">All</span> rights reserved<span class=\"token punctuation\">.</span>\n\nOracle <span class=\"token operator\">is</span> a registered trademark <span class=\"token keyword\">of</span> Oracle Corporation <span class=\"token operator\">and</span><span class=\"token operator\">/</span><span class=\"token operator\">or</span> its\naffiliates<span class=\"token punctuation\">.</span> Other names may be trademarks <span class=\"token keyword\">of</span> their respective\nowners<span class=\"token punctuation\">.</span>\n\n<span class=\"token keyword\">Type</span> <span class=\"token string\">'help;'</span> <span class=\"token operator\">or</span> <span class=\"token string\">'\\h'</span> <span class=\"token keyword\">for</span> help<span class=\"token punctuation\">.</span> <span class=\"token keyword\">Type</span> <span class=\"token string\">'\\c'</span> <span class=\"token keyword\">to</span> clear the <span class=\"token keyword\">current</span> input statement<span class=\"token punctuation\">.</span>\n\nmysql<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"mysqltable_182\"></a>mysql的table准备</h2>\n<p>建表语句：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> Websites\n<span class=\"token punctuation\">(</span>\n    id <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span>\n    name <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    url <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    alexa <span class=\"token keyword\">INT</span><span class=\"token punctuation\">,</span>\n    country <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">character</span> <span class=\"token keyword\">set</span> <span class=\"token operator\">=</span> utf8<span class=\"token punctuation\">;</span>  \n\n</code></pre>\n<p>插入数据：</p>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> Websites <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Google'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'https://www.google.cm/'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'USA'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> Websites <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token string\">'淘宝'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'https://www.taobao.com/'</span><span class=\"token punctuation\">,</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span><span class=\"token string\">'CN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> Websites <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'菜鸟教程'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'http://www.runoob.com/'</span><span class=\"token punctuation\">,</span><span class=\"token number\">4689</span><span class=\"token punctuation\">,</span><span class=\"token string\">'CN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> Websites <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token string\">'微博'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'http://weibo.com/'</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token string\">'CN'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> Websites <span class=\"token keyword\">values</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Facebook'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'https://www.facebook.com/'</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token string\">'USA'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> websites<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+--------------+---------------------------+-------+---------+</span>\n<span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> name         <span class=\"token operator\">|</span> url                       <span class=\"token operator\">|</span> alexa <span class=\"token operator\">|</span> country <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+--------------+---------------------------+-------+---------+</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">1</span>  <span class=\"token operator\">|</span> Google       <span class=\"token operator\">|</span> https:<span class=\"token comment\">//www.google.cm/    | 1     | USA     |</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">2</span>  <span class=\"token operator\">|</span> 淘宝       <span class=\"token operator\">|</span> https:<span class=\"token comment\">//www.taobao.com/   | 13    | CN      |</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">3</span>  <span class=\"token operator\">|</span> 菜鸟教程 <span class=\"token operator\">|</span> http:<span class=\"token comment\">//www.runoob.com/    | 4689  | CN      |</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">4</span>  <span class=\"token operator\">|</span> 微博       <span class=\"token operator\">|</span> http:<span class=\"token comment\">//weibo.com/         | 20    | CN      |</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">5</span>  <span class=\"token operator\">|</span> Facebook     <span class=\"token operator\">|</span> https:<span class=\"token comment\">//www.facebook.com/ | 3     | USA     |</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----+--------------+---------------------------+-------+---------+</span>\n</code></pre>\n<h2><a id=\"htmlphpWWW_218\"></a>将html文件和php文件项目放入WWW文件夹下</h2>\n<p>必须要在<code>D:\\phpstudy_pro\\WWW</code>下放入php执行文件，否则文件不会执行的。</p>\n<p>这里新建一个文件夹<code>D:\\phpstudy_pro\\WWW\\NewProject</code>，里面的文件如下：<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\18d97f57298a4c2198b352929be762e8.png\"/><br/> 这里对上面的html代码和php代码进行微调：<br/> html修改部分如下：</p>\n<pre><code class=\"prism language-html\">// 注意此时这个写法是有问题的\nxmlhttp.open(\"GET\",\"index.php?q=\"+str,true); \n</code></pre>\n<p>php修改部分如下：</p>\n<pre><code class=\"prism language-php\"><span class=\"token variable\">$con</span> <span class=\"token operator\">=</span> <span class=\"token function\">mysqli_connect</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'www.test.com'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">,</span><span class=\"token string single-quoted-string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"_233\"></a>跨域问题以及解决方案</h2>\n<p>按照我的理解此时应该是没有问题的，点击html网站的复选框，就应该渲染出结果来。<br/> 但是此时是有问题的，经过排查发现是下面代码中的<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2c0c5d9900c14c0ba16aea554be3bf1b.png\"/><br/> xmlhttp.status的值为0.<br/> 参考下面两个文章，解决了这个问题：<br/> <a href=\"https://blog.csdn.net/iaiti/article/details/42192659\">AJAX问题之XMLHttpRequest status = 0</a><br/> <a href=\"https://blog.csdn.net/stpeace/article/details/76735737\">xmlhttp.status为0的原因及其解决方案</a><br/> 有两处需要修改：<br/> html：</p>\n<pre><code class=\"prism language-html\">xmlhttp.open(\"GET\",\"http://www.test.com/index.php?q=\"+str,true);\n</code></pre>\n<p>与之前区别在于加上了<code>http://www.test.com/</code><br/> php:</p>\n<pre><code class=\"prism language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"Access-Control-Allow-Origin:*\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>在头部加上了一个header。<br/> 下面是原因分析：<br/> 1、为什么state为0：xmlhttp自己在模拟，因为根本就没通过服务器。本地直接打开而已。OPENED了，所以status为0。<br/> 基于此，我修改了html中代码，使其通过http访问，但是只是如此的话还是不能获取数据，这涉及到了另外一个问题了：跨域<br/> 先简单介绍下跨域基本概念：<br/> 首先一个url是由：协议、域名、端口 三部分组成。（一般端口默认80）<br/> 如：https://blog.moonlet.cn:80<br/> 当一个请求url的协议、域名、端口三者之间的任意一个与当前页面url不同即为跨域。<br/> 跨域产生的原因：</p>\n<p>出于浏览器的同源策略限制。</p>\n<p>同源策略（Same Orgin Policy）是一种约定，它是浏览器核心也最基本的安全功能，它会阻止一个域的js脚本和另外一个域的内容进行交互，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击。。所谓同源（即在同一个域）就是两个页面具有相同的协议（protocol）、主机（host）和端口号（port）。</p>\n<p>所以我们的html虽然去访问了<code>http://www.test.com/index.php</code>，但是浏览器跨域的返回头没有允许，所以浏览器阻止，添加Access-Control-Allow-Origin这个属性可以解决这个问题。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 1, "java": 0, "sql": 1, "php": 1, "time": "2022-07-03 21:57:26", "summary": "博主联系方式：交流群：群里会有往届的和电赛选手，群里也会不时分享一些有用的资料，有问题可以在群里多问问。目录代码文件代码还得在上的配置以及环境搭建基于完成配置登录数据库的准备将文件和文件项目放入文件夹"}