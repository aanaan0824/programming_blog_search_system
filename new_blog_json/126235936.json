{"blogid": "126235936", "writerAge": "ç é¾„12å¹´", "writerBlogNum": "74", "writerCollect": "198", "writerComment": "368", "writerFan": "1133", "writerGrade": "5çº§", "writerIntegral": "1718", "writerName": "å…­æœˆæš´é›ªé£æ¢¨èŠ±", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_126235936.jpg", "writerRankTotal": "11083", "writerRankWeekly": "208", "writerThumb": "204", "writerVisitNum": "43863", "blog_read_count": "373", "blog_time": "å·²äºÂ 2022-08-08 22:45:44Â ä¿®æ”¹", "blog_title": "æŠ€æœ¯å­¦ä¹ ï¼šPythonï¼ˆ08ï¼‰ï½œæ“ä½œMySQL", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>æ´»åŠ¨åœ°å€ï¼š<a href=\"https://marketing.csdn.net/p/bdabfb52c5d56532133df2adc1a728fd\">CSDN21å¤©å­¦ä¹ æŒ‘æˆ˜èµ›</a></p>\n</blockquote>\n<h1><a id=\"1_pipMySQL_3\"></a>ğŸ®1 ä½¿ç”¨pipå®‰è£…MySQL</h1>\n<h2><a id=\"11_PyMySQL_4\"></a>ğŸˆ1.1 ä»€ä¹ˆæ˜¯PyMySQL</h2>\n<p><code>PyMySQL</code> æ˜¯åœ¨<code> Python3.x</code> ç‰ˆæœ¬ä¸­ç”¨äºè¿æ¥ MySQL æœåŠ¡å™¨çš„ä¸€ä¸ªåº“ï¼Œ<code>Python2 </code>ä¸­åˆ™ä½¿ç”¨ <code>mysqldb</code>ã€‚<br/> <code>PyMySQL</code>çš„Githubä¸»é¡µåœ°å€ï¼š<a href=\"https://github.com/PyMySQL/PyMySQL\">https://github.com/PyMySQL/PyMySQL</a><br/> <code>PyMySQL</code>çš„æœ€æ–°ç‰ˆæœ¬æ–‡æ¡£åœ°å€ï¼š<a href=\"https://pymysql.readthedocs.io/en/latest/\">https://pymysql.readthedocs.io/en/latest/</a></p>\n<h2><a id=\"12_pip_9\"></a>ğŸˆ1.2 æŸ¥çœ‹pipçš„ç‰ˆæœ¬</h2>\n<p>é’ˆå¯¹Macç”¨æˆ·ï¼Œåªéœ€è¦æ‰“å¼€<code>ç»ˆç«¯</code>æˆ–è€…<code>iTerm</code>ã€‚</p>\n<pre><code class=\"prism language-shell\">Aion.Local $ pip3 --version\npip <span class=\"token number\">22.2</span>.2 from /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages/pip <span class=\"token punctuation\">(</span>python <span class=\"token number\">3.10</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å‘½ä»¤æŸ¥çœ‹å½“å‰æœºå™¨çš„<code>pip</code>ç‰ˆæœ¬ï¼Œ<code>pip3 -V</code> ã€ <code>pip3 --help</code>éƒ½æ˜¯ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼Œå¸Œæœ›è®°ä½ã€‚</p>\n<h2><a id=\"13_pip_17\"></a>ğŸˆ1.3 å‡çº§pip</h2>\n<pre><code class=\"prism language-shell\">Aion.Local $ pip3 <span class=\"token function\">install</span> --upgrade pip\nRequirement already satisfied: pip <span class=\"token keyword\">in</span> /Library/Frameworks/Python.framework/Versions/3.10/lib/python3.10/site-packages <span class=\"token punctuation\">(</span><span class=\"token number\">22.2</span>.1<span class=\"token punctuation\">)</span>\nCollecting pip\n  Using cached pip-22.2.2-py3-none-any.whl <span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span> MB<span class=\"token punctuation\">)</span>\nInstalling collected packages: pip\n  Attempting uninstall: pip\n    Found existing installation: pip <span class=\"token number\">22.2</span>.1\n    Uninstalling pip-22.2.1:\n      Successfully uninstalled pip-22.2.1\nSuccessfully installed pip-22.2.2\n</code></pre>\n<p>å‡çº§<code>pip</code>ä¹Ÿæ˜¯å¾ˆç®€å•ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨å‘½ä»¤è¡Œå‡çº§ï¼Œå¤šæ•°éƒ½æ˜¯ä½¿ç”¨<code>--upgrade</code>å‘½ä»¤æ¥å‡çº§ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\1116304d773a4cd4856a4a824b0a9c2f.png\"/></p>\n<h2><a id=\"14_pippymysql_34\"></a>ğŸˆ1.4 ä½¿ç”¨pipå®‰è£…pymysql</h2>\n<p>å®‰è£…ç¬¬ä¸‰æ–¹çš„<code>mysql</code>ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‰ç…§ä¸‹é¢çš„å‘½ä»¤æ‰§è¡Œå°±å¯ä»¥äº†ã€‚</p>\n<pre><code class=\"prism language-shell\">Aion.Local $ pip3 <span class=\"token function\">install</span> pymysql\nCollecting pymysql\n  Downloading PyMySQL-1.0.2-py3-none-any.whl <span class=\"token punctuation\">(</span><span class=\"token number\">43</span> kB<span class=\"token punctuation\">)</span>\n     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” <span class=\"token number\">43.8</span>/43.8 kB <span class=\"token number\">35.4</span> kB/s eta <span class=\"token number\">0</span>:00:00\nInstalling collected packages: pymysql\nSuccessfully installed pymysql-1.0.2\n</code></pre>\n<h1><a id=\"_2_pythonPyMySQLMySQL_46\"></a>ğŸ® 2 pythonä½¿ç”¨PyMySQLé©±åŠ¨æ“ä½œMySQL</h1>\n<h2><a id=\"_21_users_47\"></a>ğŸˆ 2.1 åˆ›å»ºå®éªŒè¡¨ï¼ˆusersï¼‰</h2>\n<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥æˆ‘ä»¬è‡ªå·±çš„æ•°æ®ï¼Œåœ¨æˆ‘ä»¬è‡ªå·±çš„æ•°æ®åº“åˆ›å»ºä¸€å¼ å®éªŒéœ€è¦çš„è¡¨ã€‚</p>\n<pre><code class=\"prism language-mysql\">DROP TABLE IF EXISTS `users`;\n\nCREATE TABLE `users` (\n    `id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'IDç¼–å·',\n\t`username` VARCHAR(128) NOT NULL COMMENT 'è´¦å·/ç”¨æˆ·å',\n    `email` VARCHAR(255) COLLATE utf8_bin NOT NULL COMMENT 'é‚®ç®±',\n    `password` VARCHAR(255) COLLATE utf8_bin NOT NULL COMMENT 'å¯†ç ',\n    PRIMARY KEY (`id`)\n) ENGINE = InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_bin AUTO_INCREMENT=1 COMMENT 'ç”¨æˆ·è¡¨';\n</code></pre>\n<h2><a id=\"_22_PyMySQL_61\"></a>ğŸˆ 2.2 ä½¿ç”¨PyMySQLè¿æ¥æ•°æ®åº“</h2>\n<p>è¿æ¥æ•°æ®åº“çš„å‚æ•°æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™åŸºæœ¬ä¸Šå°±å¸¸ç”¨çš„å‡ ä¸ªå°±å¯ä»¥äº†ã€‚å…·ä½“çš„è¿æ¥å‚æ•°å¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>pymysql.connections.Connection(*, user=None, password=â€˜â€™, host=None, database=None, unix_socket=None, port=0, charset=â€˜â€™, sql_mode=None, read_default_file=None, conv=None, use_unicode=True, client_flag=0, cursorclass=&lt;class â€˜pymysql.cursors.Cursorâ€™&gt;, init_command=None, connect_timeout=10, read_default_group=None, autocommit=False, local_infile=False, max_allowed_packet=16777216, defer_connect=False, auth_plugin_map=None, read_timeout=None, write_timeout=None, bind_address=None, binary_prefix=False, program_name=None, server_public_key=None, ssl=None, ssl_ca=None, ssl_cert=None, ssl_disabled=None, ssl_key=None, ssl_verify_cert=None, ssl_verify_identity=None, compress=None, named_pipe=None, passwd=None, db=None)</p>\n</blockquote>\n<p>æˆ‘ä»¬å¸¸ç”¨çš„å‚æ•°å¦‚ä¸‹ï¼š</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> pymysql<span class=\"token punctuation\">.</span>cursors\n\n<span class=\"token comment\"># è¿æ¥åˆ°æ•°æ®åº“</span>\nconnection <span class=\"token operator\">=</span> pymysql<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'localhost'</span><span class=\"token punctuation\">,</span>\n                             user<span class=\"token operator\">=</span><span class=\"token string\">'python_study_user'</span><span class=\"token punctuation\">,</span>\n                             password<span class=\"token operator\">=</span><span class=\"token string\">'xxxxxx'</span><span class=\"token punctuation\">,</span>\n                             database<span class=\"token operator\">=</span><span class=\"token string\">'python_study'</span><span class=\"token punctuation\">,</span>\n                             charset<span class=\"token operator\">=</span><span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span>\n                             cursorclass<span class=\"token operator\">=</span>pymysql<span class=\"token punctuation\">.</span>cursors<span class=\"token punctuation\">.</span>DictCursor<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>è¿æ¥çš„å‚æ•°è¯´æ˜ï¼š</p>\n<ul><li><code>host</code>ï¼šæ•°æ®åº“æœåŠ¡å™¨çš„ä¸»æœº</li><li><code>user</code>ï¼šç™»å½•çš„ç”¨æˆ·å</li><li><code>password</code>ï¼šç™»å½•çš„æ•°æ®åº“å¯†ç </li><li><code>database</code>ï¼šç™»å½•çš„æ•°æ®åº“ï¼Œå¦‚æœæ˜¯None è¡¨ç¤ºä¸ä½¿ç”¨ç‰¹å®šçš„æ•°æ®åº“</li><li><code>charset</code>ï¼šç¼–ç å­—ç¬¦é›†</li><li><code>cursorclass</code>ï¼šè‡ªå®šä¹‰å…‰æ ‡ç±»</li></ul>\n<p>å…¶ä»–å‚æ•°è¯·å‚è€ƒå®˜æ–¹æä¾›çš„æ–‡æ¡£ï¼š<a href=\"https://pymysql.readthedocs.io/en/latest/modules/connections.html\">connections</a></p>\n<h2><a id=\"_22_INSERT_87\"></a>ğŸˆ 2.2 æ“ä½œæ•°æ®åº“ï½œINSERT</h2>\n<pre><code class=\"prism language-python3\"><span class=\"token keyword\">with</span> connection<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> cursor<span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># æ’å…¥ä¸€æ¡è®°å½•</span>\n    sql <span class=\"token operator\">=</span> <span class=\"token string\">\"INSERT INTO `users` (`username`, `email`, `password`) VALUES (%s, %s)\"</span>\n    cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Aion.Liu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Aion.Liu@gmail.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Aion!@#QAZ_0808'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># æ‰‹å·¥æäº¤.</span>\n    connection<span class=\"token punctuation\">.</span>commit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"_23_SELECT_98\"></a>ğŸˆ 2.3 æ“ä½œæ•°æ®åº“ï½œSELECT</h2>\n<pre><code class=\"prism language-python3\"><span class=\"token keyword\">with</span> connection<span class=\"token punctuation\">.</span>cursor<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> cursor<span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># è¯»å–æ•°æ®</span>\n    sql <span class=\"token operator\">=</span> <span class=\"token string\">\"SELECT `id`, `username`, `password` FROM `users` WHERE `email`=%s\"</span>\n    cursor<span class=\"token punctuation\">.</span>execute<span class=\"token punctuation\">(</span>sql<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Aion.Liu@gmail.com'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    result <span class=\"token operator\">=</span> cursor<span class=\"token punctuation\">.</span>fetchone<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># æ‰“å°çš„ç»“æœ</span>\n<span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'username'</span>ï¼š<span class=\"token string\">'Aion.Liu'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Aion!@#QAZ_0808'</span><span class=\"token punctuation\">}</span>\n</code></pre>\n<p>å½“ç„¶ï¼Œå¯ä»¥å¤šæ‰§è¡Œå‡ æ¬¡ï¼Œçœ‹ä¸‹æ•ˆæœï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\e1b033b9dc594949adf7e71d2468109d.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\5c88ee08dd25477cb136ef760abe56b0.png\"/><br/> ä¸‹é¢ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•°æ®åº“çš„æ•°æ®ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\541ec4a40a4a46a8afb1fbdaaf24cdf7.png\"/></p>\n<h2><a id=\"_24__116\"></a>ğŸˆ 2.4 é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•</h2>\n<blockquote>\n<p>Q1ï¼šç”±äºæˆ‘å‡çº§äº†<code>Python</code>çš„ç‰ˆæœ¬ï¼Œä¹Ÿå‡çº§äº†<code>pip</code>çš„ç‰ˆæœ¬ï¼Œå¯¼è‡´åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå‡ºç°æ‰¾ä¸åˆ° <strong>pymysql</strong> æ¨¡å—</p>\n</blockquote>\n<pre><code>import pymysql.cursors\nModuleNotFoundError: No module named 'pymysql'\n</code></pre>\n<p>è§£å†³æ–¹æ³•ï¼š</p>\n<pre><code class=\"prism language-shell\"><span class=\"token comment\"># ğŸ‘‡ï¸ æ²¡æœ‰PyMySQLï¼Œéœ€è¦å®‰è£…</span>\npip <span class=\"token function\">install</span> PyMySQL\n\n<span class=\"token comment\"># ğŸ‘‡ï¸ python 3 ä¸­æ²¡æœ‰PyMySQLï¼Œéœ€è¦å®‰è£…(pip3.10 ä¾èµ–)</span>\npip3 <span class=\"token function\">install</span> PyMySQL\n\n<span class=\"token comment\"># ğŸ‘‡ï¸ æ²¡æœ‰æƒé™é”™è¯¯</span>\n<span class=\"token function\">sudo</span> pip3 <span class=\"token function\">install</span> PyMySQL\n\n<span class=\"token comment\"># ğŸ‘‡ï¸ ç¯å¢ƒä¸­æ²¡æœ‰pip</span>\npython -m pip <span class=\"token function\">install</span> PyMySQL\n\n<span class=\"token comment\"># ğŸ‘‡ï¸ python 3 ä¸­æ²¡æœ‰PyMySQLï¼Œéœ€è¦å®‰è£…(pip3.10 ä¾èµ–)</span>\npython3 -m pip <span class=\"token function\">install</span> PyMySQL\n\n<span class=\"token comment\"># ğŸ‘‡ï¸ for Anaconda ç¯å¢ƒ</span>\nconda <span class=\"token function\">install</span> -c anaconda pymysql\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 1, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2022-08-08 22:45:44", "summary": "æ´»åŠ¨åœ°å€ï¼šå¤©å­¦ä¹ æŒ‘æˆ˜èµ›ä½¿ç”¨å®‰è£…ä»€ä¹ˆæ˜¯æ˜¯åœ¨ç‰ˆæœ¬ä¸­ç”¨äºè¿æ¥æœåŠ¡å™¨çš„ä¸€ä¸ªåº“ï¼Œä¸­åˆ™ä½¿ç”¨ã€‚çš„ä¸»é¡µåœ°å€ï¼šçš„æœ€æ–°ç‰ˆæœ¬æ–‡æ¡£åœ°å€ï¼šæŸ¥çœ‹çš„ç‰ˆæœ¬é’ˆå¯¹ç”¨æˆ·ï¼Œåªéœ€è¦æ‰“å¼€ç»ˆç«¯æˆ–è€…ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å‘½ä»¤æŸ¥çœ‹å½“å‰æœºå™¨çš„ç‰ˆæœ¬ï¼Œã€"}