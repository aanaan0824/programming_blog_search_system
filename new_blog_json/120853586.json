{"blogid": "120853586", "writerAge": "码龄3年", "writerBlogNum": "76", "writerCollect": "1790", "writerComment": "268", "writerFan": "247", "writerGrade": "5级", "writerIntegral": "1806", "writerName": "檬柠wan", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_120853586.jpg", "writerRankTotal": "17354", "writerRankWeekly": "214433", "writerThumb": "322", "writerVisitNum": "199233", "blog_read_count": "10778", "blog_time": "于 2021-10-19 23:23:42 发布", "blog_title": "MySQL-多表查询", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"_0\"></a>一、表架构</h1>\n<ul><li>student(sid,sname,sage,ssex) 学生表</li><li>course(cid,cname,tid) 课程表</li><li>sc(sid,cid,score) 成绩表</li><li>teacher(tid,tname) 教师表</li></ul>\n<h1><a id=\"_sql_6\"></a>二 、建表sql语句</h1>\n<pre><code class=\"prism language-bash\">SET NAMES utf8mb4<span class=\"token punctuation\">;</span>\nSET FOREIGN_KEY_CHECKS <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Table structure <span class=\"token keyword\">for</span> course\n-- ----------------------------\nDROP TABLE IF EXISTS <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span><span class=\"token punctuation\">;</span>\nCREATE TABLE <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token variable\"><span class=\"token variable\">`</span>cid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NOT NULL COMMENT <span class=\"token string\">'课程号'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>cname<span class=\"token variable\">`</span></span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT <span class=\"token string\">'课程名'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>tid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NULL DEFAULT NULL COMMENT <span class=\"token string\">'老师号'</span>,\n  PRIMARY KEY <span class=\"token punctuation\">(</span><span class=\"token variable\"><span class=\"token variable\">`</span>cid<span class=\"token variable\">`</span></span><span class=\"token punctuation\">)</span> USING BTREE\n<span class=\"token punctuation\">)</span> ENGINE <span class=\"token operator\">=</span> InnoDB CHARACTER SET <span class=\"token operator\">=</span> utf8mb4 COLLATE <span class=\"token operator\">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class=\"token operator\">=</span> DYNAMIC<span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Records of course\n-- ----------------------------\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">3001</span>, <span class=\"token string\">'英语'</span>, <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">3002</span>, <span class=\"token string\">'数学'</span>, <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">3003</span>, <span class=\"token string\">'物理'</span>, <span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>course<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">3004</span>, <span class=\"token string\">'语文'</span>, <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Table structure <span class=\"token keyword\">for</span> sc\n-- ----------------------------\nDROP TABLE IF EXISTS <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span><span class=\"token punctuation\">;</span>\nCREATE TABLE <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token variable\"><span class=\"token variable\">`</span>sid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NOT NULL COMMENT <span class=\"token string\">'学生号'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>cid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NOT NULL COMMENT <span class=\"token string\">'课程号'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>score<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NULL DEFAULT NULL COMMENT <span class=\"token string\">'成绩'</span>\n<span class=\"token punctuation\">)</span> ENGINE <span class=\"token operator\">=</span> InnoDB CHARACTER SET <span class=\"token operator\">=</span> utf8mb4 COLLATE <span class=\"token operator\">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class=\"token operator\">=</span> DYNAMIC<span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Records of sc\n-- ----------------------------\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">90</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">102</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">85</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">103</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">76</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">87</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">105</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">92</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">81</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">102</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">93</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">103</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">73</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">65</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">105</span>, <span class=\"token number\">3002</span>, <span class=\"token number\">96</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token number\">3003</span>, <span class=\"token number\">85</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">102</span>, <span class=\"token number\">3003</span>, <span class=\"token number\">76</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">103</span>, <span class=\"token number\">3003</span>, <span class=\"token number\">63</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>, <span class=\"token number\">3003</span>, <span class=\"token number\">59</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">105</span>, <span class=\"token number\">3003</span>, <span class=\"token number\">56</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token number\">3004</span>, <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">102</span>, <span class=\"token number\">3004</span>, <span class=\"token number\">83</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">103</span>, <span class=\"token number\">3004</span>, <span class=\"token number\">75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>, <span class=\"token number\">3004</span>, <span class=\"token number\">69</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">105</span>, <span class=\"token number\">3004</span>, <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">106</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>sc<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">106</span>, <span class=\"token number\">3001</span>, <span class=\"token number\">60</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Table structure <span class=\"token keyword\">for</span> student\n-- ----------------------------\nDROP TABLE IF EXISTS <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span><span class=\"token punctuation\">;</span>\nCREATE TABLE <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token variable\"><span class=\"token variable\">`</span>sid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NOT NULL COMMENT <span class=\"token string\">'学生号'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>sname<span class=\"token variable\">`</span></span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT <span class=\"token string\">'姓名'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>sage<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NULL DEFAULT NULL COMMENT <span class=\"token string\">'年龄'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>ssex<span class=\"token variable\">`</span></span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT <span class=\"token string\">'性别'</span>,\n  PRIMARY KEY <span class=\"token punctuation\">(</span><span class=\"token variable\"><span class=\"token variable\">`</span>sid<span class=\"token variable\">`</span></span><span class=\"token punctuation\">)</span> USING BTREE\n<span class=\"token punctuation\">)</span> ENGINE <span class=\"token operator\">=</span> InnoDB CHARACTER SET <span class=\"token operator\">=</span> utf8mb4 COLLATE <span class=\"token operator\">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class=\"token operator\">=</span> DYNAMIC<span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Records of student\n-- ----------------------------\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">101</span>, <span class=\"token string\">'王明'</span>, <span class=\"token number\">18</span>, <span class=\"token string\">'女'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">102</span>, <span class=\"token string\">'王天'</span>, <span class=\"token number\">19</span>, <span class=\"token string\">'男'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">103</span>, <span class=\"token string\">'张三'</span>, <span class=\"token number\">18</span>, <span class=\"token string\">'男'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>, <span class=\"token string\">'李四'</span>, <span class=\"token number\">19</span>, <span class=\"token string\">'女'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">105</span>, <span class=\"token string\">'王五'</span>, <span class=\"token number\">20</span>, <span class=\"token string\">'男'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>student<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">107</span>, <span class=\"token string\">'万源'</span>, <span class=\"token number\">17</span>, <span class=\"token string\">'男'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Table structure <span class=\"token keyword\">for</span> teacher\n-- ----------------------------\nDROP TABLE IF EXISTS <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span><span class=\"token punctuation\">;</span>\nCREATE TABLE <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span>  <span class=\"token punctuation\">(</span>\n  <span class=\"token variable\"><span class=\"token variable\">`</span>tid<span class=\"token variable\">`</span></span> int<span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span> NOT NULL COMMENT <span class=\"token string\">'老师号'</span>,\n  <span class=\"token variable\"><span class=\"token variable\">`</span>tname<span class=\"token variable\">`</span></span> varchar<span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT <span class=\"token string\">'老师名称'</span>,\n  PRIMARY KEY <span class=\"token punctuation\">(</span><span class=\"token variable\"><span class=\"token variable\">`</span>tid<span class=\"token variable\">`</span></span><span class=\"token punctuation\">)</span> USING BTREE\n<span class=\"token punctuation\">)</span> ENGINE <span class=\"token operator\">=</span> InnoDB CHARACTER SET <span class=\"token operator\">=</span> utf8mb4 COLLATE <span class=\"token operator\">=</span> utf8mb4_0900_ai_ci ROW_FORMAT <span class=\"token operator\">=</span> DYNAMIC<span class=\"token punctuation\">;</span>\n\n-- ----------------------------\n-- Records of teacher\n-- ----------------------------\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">1</span>, <span class=\"token string\">'王老师'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">2</span>, <span class=\"token string\">'李老师'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">3</span>, <span class=\"token string\">'赵老师'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nINSERT INTO <span class=\"token variable\"><span class=\"token variable\">`</span>teacher<span class=\"token variable\">`</span></span> VALUES <span class=\"token punctuation\">(</span><span class=\"token number\">4</span>, <span class=\"token string\">'宋老师'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nSET FOREIGN_KEY_CHECKS <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h1><a id=\"_108\"></a>三、查询</h1>\n<h2><a id=\"1_109\"></a>1、多表查询语法</h2>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span>  字段1,字段2<span class=\"token punctuation\">..</span>. from 表1,表2<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>where 条件<span class=\"token punctuation\">]</span>\n</code></pre>\n<ul><li>查询学生表和成绩表所有信息</li></ul>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> * from student,sc where student.sid <span class=\"token operator\">=</span> sc.sid\n</code></pre>\n<p>注意: 多表查询时,一定要找到两个表中相互关联的字段,并且作为条件使用<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1e192ba7baaa448c8f9606b5d5f8587d.png\"/></p>\n<h1><a id=\"2_123\"></a>2、多表链接查询</h1>\n<pre><code class=\"prism language-bash\">多表连接查询语法<span class=\"token punctuation\">(</span>重点<span class=\"token punctuation\">)</span>\nSELECT 字段列表\n    FROM 表1  INNER<span class=\"token operator\">|</span>LEFT<span class=\"token operator\">|</span>RIGHT JOIN  表2\nON 表1.字段 <span class=\"token operator\">=</span> 表2.字段<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>①内连接查询 (只显示符合条件的数据)</p>\n<ul><li>查询学生表和成绩表所有信息</li></ul>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> * from student inner <span class=\"token function\">join</span> sc  on student.sid <span class=\"token operator\">=</span> sc.sid<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>内连接查询与多表联合查询的效果是一样的.<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\f1fe10e22aef4d768daf27a02dd8fcbb.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\2385c368991b40d389d950aad3eb756f.png\"/></p>\n<p>②左外连接查询 (左边表中的数据优先全部显示)</p>\n<ul><li>查询学生表和成绩表所有信息</li></ul>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> * from student left <span class=\"token function\">join</span> sc  on student.sid <span class=\"token operator\">=</span> sc.sid<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>学生表中的数据全部都显示,而成绩表中的数据符合条件的才会显示,不符合条件的会以 null 进行填充<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\1f948a2ed4e4480bac7313735675f795.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\0d5907fb79a44a53bb4fcdaf1dca3eef.png\"/><br/> ③右外连接查询 (右边表中的数据优先全部显示)</p>\n<ul><li>查询学生表和成绩表所有信息</li></ul>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> * from student right <span class=\"token function\">join</span> sc  on student.sid <span class=\"token operator\">=</span> sc.sid<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>正好与[左外连接相反]</p>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4e00050a51524ace992e75d106bf9c54.png\"/><br/> ④全连接查询(显示左右表中全部数据)</p>\n<pre><code>全连接查询：是在内连接的基础上增加 左右两边没有显示的数据\n注意: mysql并不支持全连接 full JOIN 关键字\n注意: 但是mysql 提供了 UNION 关键字.使用 UNION 可以间接实现 full JOIN 功能\n</code></pre>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> * from student left <span class=\"token function\">join</span> sc on student.sid <span class=\"token operator\">=</span> sc.sid\nUNION\n<span class=\"token keyword\">select</span> * from student right <span class=\"token function\">join</span> sc on student.sid <span class=\"token operator\">=</span> sc.sid<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>注意: UNION 和 UNION ALL 的区别:UNION 会去掉重复的数据,而 UNION ALL 则直接显示结果<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\007ac2299b8f4ab3be93ef2a57a8146a.png\"/></p>\n<h2><a id=\"3_175\"></a>3、三表查询</h2>\n<p>①查询所有人的英语成绩</p>\n<pre><code class=\"prism language-bash\">语法：\n<span class=\"token keyword\">select</span> 表1.字段,表2.字段,表3.字段 from 表1 <span class=\"token function\">join</span> 表2 on 表1.关联字段 <span class=\"token operator\">=</span> 表2.关联字段 <span class=\"token function\">join</span> 表3 on 表2.关联字段 <span class=\"token operator\">=</span> 表3.关联字段 where<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> student.sname,course.cname,sc.score from student <span class=\"token function\">join</span> sc on student.sid <span class=\"token operator\">=</span> sc.sid <span class=\"token function\">join</span> course on sc.cid <span class=\"token operator\">=</span> course.cid where course.cname <span class=\"token operator\">=</span> <span class=\"token string\">\"英语\"</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\58ecf0de21484a9baf134c3af6e06e44.png\"/></p>\n<h2><a id=\"4_187\"></a>4、其它查询</h2>\n<p>1、查询“3001”课程比“3003”课程成绩高的所有学生的学号与分数；</p>\n<pre><code class=\"prism language-bash\">SELECT a.sid,a.score FROM <span class=\"token punctuation\">(</span>SELECT sid,score FROM sc WHERE <span class=\"token assign-left variable\">cid</span><span class=\"token operator\">=</span><span class=\"token string\">\"3001\"</span><span class=\"token punctuation\">)</span> a,\n\n      <span class=\"token punctuation\">(</span>SELECT sid,score FROM sc WHERE <span class=\"token assign-left variable\">cid</span><span class=\"token operator\">=</span><span class=\"token string\">\"3003\"</span><span class=\"token punctuation\">)</span> b\n\n     WHERE a.score<span class=\"token operator\">&gt;</span>b.score AND a.sid<span class=\"token operator\">=</span>b.sid\n</code></pre>\n<p>2、查询平均成绩大于60分的同学的学号和平均成绩</p>\n<pre><code class=\"prism language-bash\">SELECT sid,AVG<span class=\"token punctuation\">(</span>score<span class=\"token punctuation\">)</span>\n\nFROM sc\n\nGROUP BY sid HAVING AVG<span class=\"token punctuation\">(</span>score<span class=\"token punctuation\">)</span><span class=\"token operator\">&gt;</span><span class=\"token number\">60</span>\n</code></pre>\n<p>3、查询所有同学的学号、姓名、选课数、总成绩</p>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> s.sid as 学号,s.sname as 姓名,count<span class=\"token punctuation\">(</span>sc.cid<span class=\"token punctuation\">)</span> as 选课数,SUM<span class=\"token punctuation\">(</span>sc.score<span class=\"token punctuation\">)</span> as 总成绩\nfrom student s INNER JOIN sc sc\non s.sid<span class=\"token operator\">=</span>sc.sid\nGROUP BY s.sid\n</code></pre>\n<p>4、查询姓“李”的老师的个数；</p>\n<pre><code class=\"prism language-bash\"><span class=\"token keyword\">select</span> count<span class=\"token punctuation\">(</span>distinct<span class=\"token punctuation\">(</span>Tname<span class=\"token punctuation\">))</span>\n  from teacher\n  where tname like <span class=\"token string\">'李%'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>5、查询学过“王老师”课的同学的学号、姓名</p>\n<pre><code class=\"prism language-bash\">SELECT s.sid AS 学号,s.sname AS 姓名 \nFROM student s, sc sc, course c, teacher t \nWHERE s.sid <span class=\"token operator\">=</span> sc.sid AND sc.cid <span class=\"token operator\">=</span> c.cid AND c.tid <span class=\"token operator\">=</span> t.tid AND tname <span class=\"token operator\">=</span> <span class=\"token string\">\"王老师\"</span>\n</code></pre>\n<p>6、查询没有学过“王老师”课的同学的学号、姓名</p>\n<pre><code class=\"prism language-bash\">SELECT s.sid, s.sname\nFROM student s\nWHERE s.sid NOT IN <span class=\"token punctuation\">(</span>\nSELECT s.sid\nFROM student s, sc sc, course c, teacher t\nWHERE s.sid<span class=\"token operator\">=</span>sc.sid AND c.cid<span class=\"token operator\">=</span>sc.cid AND t.tid<span class=\"token operator\">=</span>c.tid AND t.tname<span class=\"token operator\">=</span><span class=\"token string\">\"王老师\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "SQL", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 1, "php": 0, "time": "2021-10-19 23:23:42", "summary": "一、表架构学生表课程表成绩表教师表二、建表语句课程号课程名老师号英语数学物理语文"}