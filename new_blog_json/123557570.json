{"blogid": "123557570", "writerAge": "ç é¾„3å¹´", "writerBlogNum": "79", "writerCollect": "288", "writerComment": "19", "writerFan": "23", "writerGrade": "4çº§", "writerIntegral": "868", "writerName": "Ricardo0324", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_123557570.jpg", "writerRankTotal": "20651", "writerRankWeekly": "35586", "writerThumb": "49", "writerVisitNum": "69032", "blog_read_count": "8062", "blog_time": "å·²äºÂ 2022-03-18 11:35:12Â ä¿®æ”¹", "blog_title": "Spring Booté¢è¯•å¿…é—®ï¼šå¯åŠ¨æµç¨‹", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"__0\"></a>ä¸€ é¢è¯•æé—®</h1>\n<h2><a id=\"11_Spring_Boot_2\"></a>1.1 Spring Bootå¯åŠ¨æµç¨‹</h2>\n<p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong>ï¼šè¯´è¯´SpringBootå¯åŠ¨æµç¨‹å§</p>\n<p>ğŸ™‹ <strong>æˆ‘</strong> ï¼š</p>\n<ol><li>é¦–å…ˆä»mainæ‰¾åˆ°run()æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œrun()æ–¹æ³•ä¹‹å‰newä¸€ä¸ª<code>SpringApplication</code>å¯¹è±¡</li><li>è¿›å…¥run()æ–¹æ³•ï¼Œåˆ›å»ºåº”ç”¨ç›‘å¬å™¨<code>SpringApplicationRunListeners</code>å¼€å§‹ç›‘å¬</li><li>ç„¶ååŠ è½½SpringBooté…ç½®ç¯å¢ƒ(<code>ConfigurableEnvironment</code>)ï¼Œç„¶åæŠŠé…ç½®ç¯å¢ƒ(Environment)åŠ å…¥ç›‘å¬å¯¹è±¡ä¸­</li><li>ç„¶ååŠ è½½åº”ç”¨ä¸Šä¸‹æ–‡(<code>ConfigurableApplicationContext</code>)ï¼Œå½“åšrunæ–¹æ³•çš„è¿”å›å¯¹è±¡</li><li>æœ€ååˆ›å»ºSpringå®¹å™¨ï¼Œ<code>refreshContext(context)</code>ï¼Œå®ç°starterè‡ªåŠ¨åŒ–é…ç½®å’Œbeançš„å®ä¾‹åŒ–ç­‰å·¥ä½œã€‚</li></ol>\n<h2><a id=\"12_SpringBoot_15\"></a>1.2 SpringBootè‡ªåŠ¨è£…é…</h2>\n<p>ğŸ‘¨â€ğŸ’»<strong>é¢è¯•å®˜</strong>ï¼šè¯´è¯´SpringBootè‡ªåŠ¨é…ç½®çš„åŸç†</p>\n<p>ğŸ™‹ <strong>æˆ‘</strong>ï¼šé€šè¿‡<code>@EnableAutoConfiguration</code>æ³¨è§£åœ¨ç±»è·¯å¾„çš„META-INF/spring.factoriesæ–‡ä»¶ä¸­æ‰¾åˆ°æ‰€æœ‰çš„å¯¹åº”é…ç½®ç±»ï¼Œç„¶åå°†è¿™äº›è‡ªåŠ¨é…ç½®ç±»åŠ è½½åˆ°springå®¹å™¨ä¸­ã€‚</p>\n<h1><a id=\"__21\"></a>äºŒ çŸ¥è¯†ç‚¹è¯¦è§£</h1>\n<h2><a id=\"21_SpringBoot_23\"></a>2.1 SpringBootæ ¸å¿ƒæ³¨è§£ï¼š</h2>\n<p><code>@SpringBootApplication</code>æ³¨è§£æ˜¯Spring Bootçš„æ ¸å¿ƒæ³¨è§£ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…æ‹¬ä¸‰ä¸ªæ³¨è§£</p>\n<ol><li> <p><code>@Configuration</code>:è¢«æ ‡æ³¨çš„ç±»ç­‰äºåœ¨Springçš„XMLé…ç½®æ–‡ä»¶ä¸­ï¼ˆapplicationContext.xmlï¼‰,è£…é…æ‰€æœ‰beanäº‹åŠ¡ï¼Œæä¾›äº†ä¸€ä¸ªSpringçš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</p> </li><li> <p><code>@EnableAutoConfiguration</code>:SpringBootæ ¹æ®åº”ç”¨æ‰€å£°æ˜çš„ä¾èµ–æ¥å¯¹Springæ¡†æ¶è¿›è¡Œè‡ªåŠ¨é…ç½®ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸¤ä¸ªé‡è¦æ³¨è§£ï¼š</p>\n<ul><li> <p><code>@AutoConfigurationPackage</code>ï¼šè¯¥æ³¨è§£ä¸Šæœ‰ä¸€ä¸ª@Import({Registrar.class})æ³¨è§£ï¼Œå…¶ä¸­Registrarç±»çš„ä½œç”¨æ˜¯å°†å¯åŠ¨ç±»æ‰€åœ¨çš„åŒ…ä¸‹çš„æ‰€æœ‰å­åŒ…ç»„ä»¶æ‰«ææ³¨å…¥åˆ°springå®¹å™¨ä¸­ã€‚</p> <p><strong>å› æ­¤è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå°†controllerã€serviceç­‰åŒ…æ”¾åœ¨å¯åŠ¨ç±»çš„åŒçº§ç›®å½•ä¸‹çš„åŸå› </strong></p> </li><li> <p><code>@Import({AutoConfigurationImportSelector.class})</code>ï¼šå…¶ä¸­AutoConfigurationImportSelectorç±»ä¸­æœ‰ä¸€ä¸ªgetCandidateConfigurations()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é€šè¿‡SpringFactoriesLoader.loadFactoryNames()æŸ¥æ‰¾ä½äºMETA-INF/spring.factoriesæ–‡ä»¶ä¸­çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»å¹¶åŠ è½½è¿™äº›ç±»ã€‚</p> <p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\def4707a4c0c45fda29bafe58cea47ba.png\"/></p> </li></ul> </li><li> <p><code>@ComponentScan</code>:ç»„ä»¶æ‰«æï¼Œè‡ªåŠ¨æ‰«æå’Œè£…é…Beanï¼Œæ‰«æSpringApplicationçš„runæ–¹æ³•ä¸­çš„ExammanagerApplication.classæ‰€åœ¨çš„åŒ…è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼Œå› æ­¤å°†å¯åŠ¨ç±»ï¼ˆmainï¼‰æ”¾åœ¨è·ŸåŒ…è·¯å¾„ä¸‹ã€‚å®ƒå»å¯»æ‰¾å¸¦æœ‰<code>@Component</code>æ³¨è§£çš„ç±»ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºbeanã€‚</p> </li></ol>\n<h2><a id=\"22_42\"></a>2.2è¯¦ç»†å¯åŠ¨æµç¨‹ï¼ˆç»“åˆæºç ï¼‰</h2>\n<ol><li> <p>é¦–å…ˆè¿›å…¥run()æ–¹æ³•ï¼Œrunæ–¹æ³•ä¸­newåˆ›å»ºäº†ä¸€ä¸ª<code>SpringApplication</code>å®ä¾‹</p> <pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> ConfigurableApplicationContext <span class=\"token function\">run</span><span class=\"token punctuation\">(</span>Class<span class=\"token operator\">&lt;</span><span class=\"token operator\">?</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> primarySources<span class=\"token punctuation\">,</span> String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SpringApplication</span><span class=\"token punctuation\">(</span>primarySources<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre> </li><li> <p>åœ¨SpringApplicationçš„æ„é€ æ–¹æ³•é‡Œä¸ºSpringApplicationå¯¹è±¡èµ‹ä¸€äº›åˆå€¼ã€‚</p> <p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\e8193dc3b5cb4f439a48d5961301f68e.png\"/></p> </li><li> <p>æ„é€ æ–¹æ³•æ‰§è¡Œå®Œåï¼Œå›åˆ°run()æ–¹æ³•</p> <p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\eb3cf3db954242739febaace64e01614.png\"/></p> <p>è¯¥æ–¹æ³•ä¸­å®ç°äº†å¦‚ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>\n<ol><li>åˆ›å»ºäº†åº”ç”¨çš„ç›‘å¬å™¨SpringApplicationRunListenerså¹¶å¼€å§‹ç›‘å¬</li><li>åŠ è½½SpringBooté…ç½®ç¯å¢ƒ(ConfigurableEnvironment)ï¼Œå¦‚æœæ˜¯é€šè¿‡webå®¹å™¨å‘å¸ƒï¼Œä¼šåŠ è½½StandardEnvironmentï¼Œå…¶æœ€ç»ˆä¹Ÿæ˜¯ç»§æ‰¿äº†ConfigurableEnvironment</li><li>é…ç½®ç¯å¢ƒ(Environment)åŠ å…¥åˆ°ç›‘å¬å™¨å¯¹è±¡ä¸­(SpringApplicationRunListeners)</li><li>åˆ›å»ºrunæ–¹æ³•çš„è¿”å›å¯¹è±¡ï¼šConfigurableApplicationContext(åº”ç”¨é…ç½®ä¸Šä¸‹æ–‡)</li><li>å›åˆ°runæ–¹æ³•å†…ï¼ŒprepareContextæ–¹æ³•å°†listenersã€environmentã€applicationArgumentsã€bannerç­‰é‡è¦ç»„ä»¶ä¸ä¸Šä¸‹æ–‡å¯¹è±¡å…³è”</li><li>æ¥ä¸‹æ¥çš„refreshContext(context)æ–¹æ³•(åˆå§‹åŒ–æ–¹æ³•å¦‚ä¸‹)å°†æ˜¯å®ç°spring-boot-starter-*(mybatisã€redisç­‰)è‡ªåŠ¨åŒ–é…ç½®çš„å…³é”®ï¼ŒåŒ…æ‹¬spring.factoriesçš„åŠ è½½ï¼Œbeançš„å®ä¾‹åŒ–ç­‰æ ¸å¿ƒå·¥ä½œã€‚</li></ol> <p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"..\\..\\static\\image\\45e2e4b19a5f4f4ab8371279a77f85f3.png\"/><br/> é…ç½®ç»“æŸåï¼ŒSpringbootåšäº†ä¸€äº›åŸºæœ¬çš„æ”¶å°¾å·¥ä½œï¼Œè¿”å›äº†åº”ç”¨ç¯å¢ƒä¸Šä¸‹æ–‡ã€‚å›é¡¾æ•´ä½“æµç¨‹ï¼ŒSpringbootçš„å¯åŠ¨ï¼Œä¸»è¦åˆ›å»ºäº†é…ç½®ç¯å¢ƒ(environment)ã€äº‹ä»¶ç›‘å¬(listeners)ã€åº”ç”¨ä¸Šä¸‹æ–‡(applicationContext)ï¼Œå¹¶åŸºäºä»¥ä¸Šæ¡ä»¶ï¼Œåœ¨å®¹å™¨ä¸­å¼€å§‹å®ä¾‹åŒ–æˆ‘ä»¬éœ€è¦çš„Beanï¼Œè‡³æ­¤ï¼Œé€šè¿‡SpringBootå¯åŠ¨çš„ç¨‹åºå·²ç»æ„é€ å®Œæˆã€‚</p> </li></ol>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "Java", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 1, "sql": 0, "php": 0, "time": "2022-03-18 11:35:12", "summary": "ä¸€é¢è¯•æé—®å¯åŠ¨æµç¨‹é¢è¯•å®˜ï¼šè¯´è¯´å¯åŠ¨æµç¨‹å§æˆ‘ï¼šé¦–å…ˆä»æ‰¾åˆ°æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œæ–¹æ³•ä¹‹å‰ä¸€ä¸ªå¯¹è±¡è¿›å…¥æ–¹æ³•ï¼Œåˆ›å»ºåº”ç”¨ç›‘å¬å™¨å¼€å§‹ç›‘å¬ç„¶ååŠ è½½é…ç½®ç¯å¢ƒï¼Œç„¶åæŠŠé…ç½®ç¯å¢ƒåŠ å…¥ç›‘å¬å¯¹è±¡ä¸­ç„¶ååŠ è½½åº”ç”¨ä¸Šä¸‹æ–‡ï¼Œå½“åšæ–¹æ³•çš„è¿”å›å¯¹è±¡æœ€"}