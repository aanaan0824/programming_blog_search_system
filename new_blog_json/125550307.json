{"blogid": "125550307", "writerAge": "码龄12年", "writerBlogNum": "389", "writerCollect": "774", "writerComment": "196", "writerFan": "2497", "writerGrade": "7级", "writerIntegral": "9083", "writerName": "蓝创精英团队", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_125550307.jpg", "writerRankTotal": "1655", "writerRankWeekly": "3529", "writerThumb": "287", "writerVisitNum": "593238", "blog_read_count": "951", "blog_time": "于 2022-07-01 08:30:00 发布", "blog_title": "C# NanoFramework 开发单片机嵌入式之 ESP32", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>上节已经对ESP32有了一个简单的介绍和官方示例，想深入了解的可以去安信可官方网站上了解。</p>\n<p>当然，它主频可以达到240MHZ，外部FLASH 4M，已经足够使用了，还自带一个WIFI和蓝牙还有大概40个IO口。</p>\n<p>最重要的是，ESP32S型号的开发板才27块，还包邮。</p>\n<p>买了之后，下边这个样子<br/> <img alt=\"在这里插入图片描述\" src=\"..\\..\\static\\image\\4d84c019d0914d61b1559a50ec74fcdf.png\"/></p>\n<h1><a id=\"NanoFramework_8\"></a>NanoFramework简介</h1>\n<p>说起C#的嵌入式单片机开发，就离不开早期的.Net Micro Framework 简称 .Net MF，我2018年的时候在北京与叶帆刘洪峰，刘总共事过，当时搞的就是这个.Net MF框架，刘总基于.Net MF搞的还是相当不错的，搞出来了一系列的产品体系。</p>\n<p>当然，.NET MF 这个产品是被微软自己放弃掉了，不进行维护和继续开发了。</p>\n<p>然后呢，国外一些大佬不想这样的项目就被舍弃掉，毕竟像我这样还是很看好这样的项目的，就开始开源级别的维护。</p>\n<p>这个项目就叫做 NanoFramework，可以说是.Net MF的升级版，主要是更好玩了。</p>\n<p>然后，这个项目NanoFramework 被.Net基金会支持了。（又回到了微软自己家的感觉）</p>\n<h2><a id=\"_NanoFreamwork_19\"></a>官方对 NanoFreamwork的描述</h2>\n<blockquote>\n<p>.NET nanoFramework是一个免费的开源平台，可以为受限的嵌入式设备编写托管代码应用程序。它适用于多种类型的项目，包括物联网传感器、可穿戴设备、学术概念证明、机器人技术、爱好者/制造商的创作，甚至是复杂的工业设备。它使嵌入式开发人员能够访问桌面应用程序开发人员使用的现代技术和工具，从而使此类平台的开发更容易、更快且成本更低。</p>\n</blockquote>\n<h1><a id=\"C_22\"></a>C#编写嵌入式单片机逻辑</h1>\n<h2><a id=\"_ESP32XP__Windows_23\"></a>新买到的 ESP32是需要对其内部固件进行烧写的(相当于刷机，或者，XP 换 Windows系统)。</h2>\n<p>首先，板子要用USB连接到电脑，并且，出现串口设备，如下所示</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\547ecd08f7678a5a861ec628e7388240.png\"/><br/> 这个时候，证明板子已经通过串口连接上电脑了。</p>\n<h2><a id=\"Bin_29\"></a>刷机(刷固件，Bin文件烧写)</h2>\n<p>因为我们是VS2019开发 NanoFramework 的，所以，需要安装 Nanoff工具来刷机(固件，Bin文件）</p>\n<pre><code class=\"prism language-cshap\">dotnet tool install -g nanoff\n</code></pre>\n<p>安装完毕后</p>\n<h3><a id=\"_36\"></a>执行刷机命令</h3>\n<p>我的板子是ESP32S型号的，所以要刷这个命令(COM5要选你自己的Com口名称)</p>\n<pre><code class=\"prism language-csharp\">nanoff <span class=\"token operator\">--</span>serialport COM5 <span class=\"token operator\">--</span>target ESP32_PSRAM_REV0 <span class=\"token operator\">--</span>update\n</code></pre>\n<p>如果是其他的，可以参考Nanoff帮助命令 cmd 然后输入 nanoff 就可以看其命令帮助手册了。</p>\n<p>大概会出现下面的情况：</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\11111db342883efeb5a243a5c006b98b.png\"/></p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\8a22398b7f7755f1b175a0d947eaf363.png\"/></p>\n<p>显示OK，就是好了。没啥子问题了。</p>\n<p>当然也可以输入以下命令查看当前全部串口有哪些</p>\n<pre><code class=\"prism language-csharp\">nanoff <span class=\"token operator\">--</span>listports\n</code></pre>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\26989b0009a4f15776e8e8d36c3c74e4.png\"/></p>\n<h2><a id=\"VS2022_60\"></a>开始VS2022新建项目</h2>\n<p>当然，我这边是2022，你可以是其他版本，同理。</p>\n<h3><a id=\"NanoFreamwork_VS__63\"></a>NanoFreamwork VS 扩展安装</h3>\n<p>打开VS，扩展，管理扩展</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\cfe89647f69fe7a119c8834bfea60c66.png\"/><br/> 按照这个搜索，NanoFreamwork 关键字，然后，点击安装(我这边稍微有点慢，大概10分钟？)</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\b1f3417fa3c4f65859ad6e17511b5b7f.png\"/></p>\n<p>然后，关闭VS，自动弹出来以下的安装，直接下一步啥的，就OK。<br/> <img alt=\"\" src=\"..\\..\\static\\image\\b4366c4ff20004e76aba268c0579d5f8.png\"/><br/> 继续<br/> <img alt=\"\" src=\"..\\..\\static\\image\\c7ca110bfbace27aa6ffd6b27e77d5d0.png\"/></p>\n<h3><a id=\"_NanoFreamwork__76\"></a>创建 NanoFreamwork 项目</h3>\n<p>重新打开VS。</p>\n<p>选择 Blank Application(空白的应用)，点击创建</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\49030013a22bcf546cb09bf61d2af422.png\"/><br/> 创建完，是这个样子的。</p>\n<p>很简单的示例。</p>\n<p>当然，我们的示例得表现出一点特色，尽量表现它的优势。</p>\n<p>改成这样子的</p>\n<pre><code class=\"prism language-charp\">public class Program\n{\n    public static void Main()\n    {\n        Thread thread = new(new ThreadStart(Testc));\n        thread.Start();\n        while (true)\n        {\n            Debug.WriteLine($\"fine , think you !\");\n            Thread.Sleep(1000);\n        }\n    }\n    private static void Testc()\n    {\n        while (true)\n        {\n            Debug.WriteLine($\"how are you ? \\r\\n\");\n            Thread.Sleep(1000);\n        }\n    }\n}\n</code></pre>\n<p>右键项目，生成代码，没有错误，然后，开始烧写到设备里</p>\n<h3><a id=\"_114\"></a>设备游览器</h3>\n<p>通过下面的操作就可以打开 设备游览器了。</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\4db338074b7e5ea660a82b3aa00cb5a7.png\"/></p>\n<h4><a id=\"_118\"></a>设备游览器详解</h4>\n<p>如果正常的话，会出现我下面的这个 ESP32 @ COM5 信息</p>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\02625999ac87e981f2da04e542c2782e.png\"/></p>\n<p>(1). ping 设备，点击后 VS 输出里会有以下的信息</p>\n<pre><code class=\"prism language-csharp\">ESP32 @ COM5 <span class=\"token keyword\">is</span> <span class=\"token class-name\">active</span> running nanoCLR<span class=\"token punctuation\">.</span>\n</code></pre>\n<p>(2). 设备信息收集</p>\n<p>点击后，会输出设备的全部信息</p>\n<pre><code class=\"prism language-csharp\">System Information\nHAL <span class=\"token class-name\">build</span> info<span class=\"token punctuation\">:</span> nanoCLR running @ ESP32 built with ESP<span class=\"token operator\">-</span>IDF v4<span class=\"token punctuation\">.</span><span class=\"token number\">4.1</span>\n  Target<span class=\"token punctuation\">:</span>   <span class=\"token class-name\">ESP32</span>\n  Platform<span class=\"token punctuation\">:</span> ESP32\n\nFirmware <span class=\"token class-name\">build</span> Info<span class=\"token punctuation\">:</span>\n  Date<span class=\"token punctuation\">:</span>        Jun <span class=\"token number\">27</span> <span class=\"token number\">2022</span>\n  Type<span class=\"token punctuation\">:</span>        <span class=\"token class-name\">MinSizeRel</span> build<span class=\"token punctuation\">,</span> chip rev<span class=\"token punctuation\">.</span> <span class=\"token operator\">&gt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> support <span class=\"token keyword\">for</span> PSRAM\n  <span class=\"token class-name\">CLR</span> Version<span class=\"token punctuation\">:</span> <span class=\"token number\">1.8</span><span class=\"token number\">.0</span><span class=\"token number\">.291</span>\n  Compiler<span class=\"token punctuation\">:</span>    GNU ARM GCC v8<span class=\"token punctuation\">.</span><span class=\"token number\">4.0</span>\n\nOEM <span class=\"token return-type class-name\">Product</span> codes <span class=\"token punctuation\">(</span>vendor<span class=\"token punctuation\">,</span> model<span class=\"token punctuation\">,</span> SKU<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span>\n\n<span class=\"token return-type class-name\">Serial</span> Numbers <span class=\"token punctuation\">(</span>module<span class=\"token punctuation\">,</span> system<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n  <span class=\"token number\">00000000000000000000000000000000</span>\n  <span class=\"token number\">0000000000000000</span>\n\n<span class=\"token class-name\">Target</span> capabilities<span class=\"token punctuation\">:</span>\n  <span class=\"token class-name\">Has</span> nanoBooter<span class=\"token punctuation\">:</span> NO\n  <span class=\"token class-name\">IFU</span> capable<span class=\"token punctuation\">:</span> NO\n  Has <span class=\"token class-name\">proprietary</span> bootloader<span class=\"token punctuation\">:</span> <span class=\"token class-name\">YES</span>\n\nAppDomains<span class=\"token punctuation\">:</span>\n\nAssemblies<span class=\"token punctuation\">:</span>\n\n<span class=\"token class-name\">Native</span> Assemblies<span class=\"token punctuation\">:</span>\n  mscorlib v100<span class=\"token punctuation\">.</span><span class=\"token number\">5.0</span><span class=\"token number\">.17</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x004CF1CE</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Runtime<span class=\"token punctuation\">.</span>Native v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.9</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x109F6F22</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Hardware<span class=\"token punctuation\">.</span>Esp32 v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.7</span><span class=\"token number\">.3</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xBE7FF253</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Hardware<span class=\"token punctuation\">.</span>Esp32<span class=\"token punctuation\">.</span>Rmt v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.3</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x0A915860</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>OneWire v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.4</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xB95C43B4</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Networking<span class=\"token punctuation\">.</span>Sntp v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.4</span><span class=\"token number\">.4</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xE2D9BDED</span>\n  nanoFramework<span class=\"token punctuation\">.</span>ResourceManager v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xDCD7DF4D</span>\n  nanoFramework<span class=\"token punctuation\">.</span>System<span class=\"token punctuation\">.</span>Collections v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.1</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x2DC2B090</span>\n  nanoFramework<span class=\"token punctuation\">.</span>System<span class=\"token punctuation\">.</span>Text v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x8E6EB73D</span>\n  nanoFramework<span class=\"token punctuation\">.</span>Runtime<span class=\"token punctuation\">.</span>Events v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.8</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x0EAB00C9</span>\n  EventSink v1<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xF32F4C3E</span>\n  System<span class=\"token punctuation\">.</span>IO<span class=\"token punctuation\">.</span>FileSystem v1<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x3AB74021</span>\n  System<span class=\"token punctuation\">.</span>Math v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.5</span><span class=\"token number\">.4</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x46092CB1</span>\n  System<span class=\"token punctuation\">.</span>Net v100<span class=\"token punctuation\">.</span><span class=\"token number\">1.5</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x5BAB8CB3</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Adc v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xE5B80F0B</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Dac v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.6</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x02B3E860</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Gpio v100<span class=\"token punctuation\">.</span><span class=\"token number\">1.0</span><span class=\"token number\">.4</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xB6D0ACC1</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>I2c v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.0</span><span class=\"token number\">.1</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xFA806D33</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Pwm v100<span class=\"token punctuation\">.</span><span class=\"token number\">1.0</span><span class=\"token number\">.4</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xABF532C3</span>\n  System<span class=\"token punctuation\">.</span>IO<span class=\"token punctuation\">.</span>Ports v100<span class=\"token punctuation\">.</span><span class=\"token number\">1.6</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xB798CE30</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Spi v100<span class=\"token punctuation\">.</span><span class=\"token number\">1.2</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0xB6C4B3BD</span>\n  System<span class=\"token punctuation\">.</span>Device<span class=\"token punctuation\">.</span>Wifi v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.6</span><span class=\"token number\">.4</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x1C1D3214</span>\n  Windows<span class=\"token punctuation\">.</span>Storage v100<span class=\"token punctuation\">.</span><span class=\"token number\">0.2</span><span class=\"token number\">.0</span><span class=\"token punctuation\">,</span> checksum <span class=\"token number\">0x954A4192</span>\n\n\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span>\n<span class=\"token operator\">++</span>        Memory Map          <span class=\"token operator\">++</span>\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span>\n  Type     Start       Size\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span>\n  RAM   <span class=\"token number\">0x3ffe4bbc</span>  <span class=\"token number\">0x0001b000</span>\n  FLASH <span class=\"token number\">0x00000000</span>  <span class=\"token number\">0x00400000</span>\n\n\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n<span class=\"token operator\">++</span>                   Flash Sector Map                        <span class=\"token operator\">++</span>\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n  Region     Start      Blocks   Bytes<span class=\"token operator\">/</span>Block    Usage\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n      <span class=\"token number\">0</span>    <span class=\"token number\">0x00010000</span>       <span class=\"token number\">1</span>      <span class=\"token number\">0x1A0000</span>     nanoCLR\n      <span class=\"token number\">1</span>    <span class=\"token number\">0x001B0000</span>       <span class=\"token number\">1</span>      <span class=\"token number\">0x1F0000</span>     Deployment\n      <span class=\"token number\">2</span>    <span class=\"token number\">0x003C0000</span>       <span class=\"token number\">1</span>      <span class=\"token number\">0x040000</span>     Configuration\n\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n<span class=\"token operator\">++</span>              Storage Usage Map                <span class=\"token operator\">++</span>\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n  <span class=\"token return-type class-name\">Start</span>        Size <span class=\"token punctuation\">(</span>kB<span class=\"token punctuation\">)</span>           Usage\n<span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">++</span><span class=\"token operator\">+</span>\n  <span class=\"token number\">0x003C0000</span>    <span class=\"token number\">0x040000</span> <span class=\"token punctuation\">(</span>256kB<span class=\"token punctuation\">)</span>    Configuration\n  <span class=\"token number\">0x00010000</span>    <span class=\"token number\">0x1A0000</span> <span class=\"token punctuation\">(</span>1664kB<span class=\"token punctuation\">)</span>   nanoCLR\n  <span class=\"token number\">0x001B0000</span>    <span class=\"token number\">0x1F0000</span> <span class=\"token punctuation\">(</span>1984kB<span class=\"token punctuation\">)</span>   Deployment\n\nDeployment Map\nEmpty\n\n</code></pre>\n<p>(3). 擦除应用部署区域(移除项目应用)</p>\n<pre><code class=\"prism language-csharp\"><span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">09.928</span> <span class=\"token punctuation\">[</span>Connected to CLR<span class=\"token punctuation\">.</span> Pausing execution<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">10.454</span> <span class=\"token punctuation\">[</span>Erasing sector @ <span class=\"token number\">0x001B0000</span><span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">10.721</span> <span class=\"token punctuation\">[</span>Rebooting <span class=\"token punctuation\">(</span>ClrOnly<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">10.736</span> <span class=\"token punctuation\">[</span>Reboot command <span class=\"token class-name\">executed</span> successfully<span class=\"token punctuation\">]</span>\n<span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">10.736</span> <span class=\"token punctuation\">[</span>Waiting 5000ms <span class=\"token keyword\">for</span> reboot<span class=\"token range operator\">..</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">58</span><span class=\"token punctuation\">:</span><span class=\"token number\">10.786</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span> Device reboot confirmed <span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span>\nESP32 @ COM5 deployment area erased<span class=\"token punctuation\">.</span>\n</code></pre>\n<p>(4). 网络信息编辑和设置</p>\n<p>跟系统自带的差不多，搞WIFI 可能就要用到这个玩意儿。<br/> <img alt=\"\" src=\"..\\..\\static\\image\\d4457eec74793ace103a89e8b98a7013.png\"/></p>\n<p>(5). 重启设备</p>\n<p>(6). 启动或者关闭设备监听(就是监听设备是否存在)</p>\n<p>(7). 重新搜寻设备信息</p>\n<p>(8). 输出内部错误(VS输出里看到)</p>\n<p>(9). 设置信息</p>\n<p>(10). 具体的设备信息</p>\n<h4><a id=\"_246\"></a>连接不上的处理</h4>\n<p>如果不正常那就是刷机(固件)有问题，请重新刷一下，然后，重启一下单片机，试试，应该就好了。</p>\n<p>可以在VS的输出 目录里看到相应的输出。</p>\n<p>类似这样的</p>\n<pre><code class=\"prism language-csharp\"><span class=\"token number\">22</span><span class=\"token punctuation\">:</span><span class=\"token number\">50</span><span class=\"token punctuation\">:</span><span class=\"token number\">28.056</span> <span class=\"token punctuation\">[</span>NanoDevices<span class=\"token punctuation\">:</span> Serial device enumeration completed<span class=\"token punctuation\">.</span> Found <span class=\"token number\">1</span> devices<span class=\"token punctuation\">]</span> \n</code></pre>\n<p>就是正常的</p>\n<h2><a id=\"F5__258\"></a>部署项目，直接F5，或者点击 运行即可。</h2>\n<p><img alt=\"\" src=\"..\\..\\static\\image\\b10f20028ef5f1cb2776d259182b126f.png\"/></p>\n<p>效果如图所示:</p>\n<p><img alt=\"\" src=\"https://img-blog.csdnimg.cn/img_convert/5240bdd3f4f8cab595bb7e0780051998.gif\"/></p>\n<p>实现多线程，简单，方便，还支持VS调试，更是爽歪歪。</p>\n<h2><a id=\"_268\"></a>总结</h2>\n<p>NanoFreamwork 技术是非常不错的，能轻松的实现嵌入式设备ESP32的开发，当然，有些问题也正常，搞嵌入式的哪个没有问题。</p>\n<p>但是，板子信息，硬件信息，都搞明白了。从应用角度来说，还是C# 方便，我感觉是省的在学一门语言了。</p>\n<h2><a id=\"_273\"></a>参考</h2>\n<p>https://docs.nanoframework.net/content/getting-started-guides/getting-started-managed.html</p>\n<h1><a id=\"_276\"></a>阅</h1>\n<p>一键三连呦！，感谢大佬的支持，您的支持就是我的动力!</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "C#", "cpp": 0, "csharp": 1, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 0, "time": "2022-07-01 08:30:00", "summary": "上节已经对有了一个简单的介绍和官方示例，想深入了解的可以去安信可官方网站上了解。当然，它主频可以达到，外部，已经足够使用了，还自带一个和蓝牙还有大概个口。最重要的是，型号的开发板才块，还包邮。买了之后"}