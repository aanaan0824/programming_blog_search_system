{"blogid": "120172805", "writerAge": "码龄8年", "writerBlogNum": "208", "writerCollect": "449", "writerComment": "94", "writerFan": "46", "writerGrade": "5级", "writerIntegral": "2531", "writerName": "最凶残的小海豹", "writerProfileAdress": "..\\..\\static\\writer_image\\profile_120172805.jpg", "writerRankTotal": "11115", "writerRankWeekly": "15139", "writerThumb": "136", "writerVisitNum": "287086", "blog_read_count": "3489", "blog_time": "于 2021-09-08 10:17:43 发布", "blog_title": "PHP获取系统时间的方法（毫秒数）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"../../static/bootstrap/css/csdnstyle.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>php中获取时间方法是date()，在php中获取时间戳方法有time()、strtotime()；</p>\n<p><strong>date()</strong> ：<code>date(format, timestamp)</code>，<code>format</code>为格式、<code>timestamp</code>为时间戳（可选）。<br/> <strong>time()</strong>：返回当前时间的 Unix 时间戳，没有参数。<br/> <strong>strtotime(time, now)</strong> ：将英文文本格式的时间字符串解析为 Unix 时间戳。<code>time</code> 为必填，规定要解析的时间字符串；<code>now</code> 用来计算返回值的时间戳，如果省略该参数，则使用当前时间。</p>\n<p>一、获取当前时间戳</p>\n<pre><code class=\"prism language-php\"><span class=\"token comment\">// time函数</span>\n<span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// $_SERVER中的REQUEST_TIME元素</span>\n<span class=\"token variable\">$_SERVER</span><span class=\"token punctuation\">[</span><span class=\"token string single-quoted-string\">'REQUEST_TIME'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// strtotime函数</span>\n<span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'now'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>二、获取当前时间</p>\n<pre><code class=\"prism language-php\"><span class=\"token comment\">// date函数格式化时间戳</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d h:i:s'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2021-09-08 10:43:06</span>\n</code></pre>\n<p>三、获取当前毫秒数<br/> <code>var_dump(explode(’ ', microtime()));</code> 返回的是 <code>string(21) 0.46920200 1489743107</code> 前者是微妙数，后者是毫秒数</p>\n<p>所以下面函数返回的就是当前毫秒数</p>\n<pre><code class=\"prism language-php\"><span class=\"token keyword\">function</span> <span class=\"token function\">getMillisecond</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">list</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$microsecond</span> <span class=\"token punctuation\">,</span> <span class=\"token variable\">$time</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token function\">explode</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">' '</span><span class=\"token punctuation\">,</span> <span class=\"token function\">microtime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//' '中间是一个空格</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token keyword type-casting\">float</span><span class=\"token punctuation\">)</span><span class=\"token function\">sprintf</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'%.0f'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token function\">floatval</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$microsecond</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token function\">floatval</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$time</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>举例：<br/> data()：</p>\n<pre><code class=\"prism language-php\"><span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 输出结果：2021-09-08</span>\n<span class=\"token keyword\">echo</span>  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 输出结果：2021-09-08 10:43:06</span>\n<span class=\"token keyword\">echo</span>  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 输出结果：2021-09-08 10:43:06（结果同上，只是多了一个时间戳参数）</span>\n<span class=\"token keyword\">echo</span>  <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'年'</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'m'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'月'</span><span class=\"token operator\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'d'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">.</span><span class=\"token string single-quoted-string\">'日'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 输出结果：2021年09月08日</span>\n</code></pre>\n<p>data() 格式化 字符串中，字母所代表的含义：</p>\n<pre><code class=\"prism language-bash\">a - <span class=\"token string\">\"am\"</span> 或是 <span class=\"token string\">\"pm\"</span>  \nA - <span class=\"token string\">\"AM\"</span> 或是 <span class=\"token string\">\"PM\"</span>  \nd - 几日，二位数字，若不足二位则前面补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"01\"</span> 至 <span class=\"token string\">\"31\"</span>  \nD - 星期几，三个英文字母<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"Fri\"</span>  \nF - 月份，英文全名<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"January\"</span>  \nh - <span class=\"token number\">12</span> 小时制的小时<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"01\"</span> 至 <span class=\"token string\">\"12\"</span>  \nH - <span class=\"token number\">24</span> 小时制的小时<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"00\"</span> 至 <span class=\"token string\">\"23\"</span>  \ng - <span class=\"token number\">12</span> 小时制的小时，不足二位不补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"1\"</span> 至 <span class=\"token string\">\"12\"</span>  \nG - <span class=\"token number\">24</span> 小时制的小时，不足二位不补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"0\"</span> 至 <span class=\"token string\">\"23\"</span>  \ni - 分钟<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"00\"</span> 至 <span class=\"token string\">\"59\"</span>  \nj - 几日，二位数字，若不足二位不补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"1\"</span> 至 <span class=\"token string\">\"31\"</span>  \nl - 星期几，英文全名<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"Friday\"</span>  \nm - 月份，二位数字，若不足二位则在前面补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"01\"</span> 至 <span class=\"token string\">\"12\"</span>  \nn - 月份，二位数字，若不足二位则不补零<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"1\"</span> 至 <span class=\"token string\">\"12\"</span>  \nM - 月份，三个英文字母<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"Jan\"</span>  \ns - 秒<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"00\"</span> 至 <span class=\"token string\">\"59\"</span>  \nS - 字尾加英文序数，二个英文字母<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"th\"</span>，<span class=\"token string\">\"nd\"</span>  \nt - 指定月份的天数<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"28\"</span> 至 <span class=\"token string\">\"31\"</span>  \nU - 总秒数  \nw - 数字型的星期几，如: <span class=\"token string\">\"0\"</span> <span class=\"token punctuation\">(</span>星期日<span class=\"token punctuation\">)</span> 至 <span class=\"token string\">\"6\"</span> <span class=\"token punctuation\">(</span>星期六<span class=\"token punctuation\">)</span>  \nY - 年，四位数字<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"1999\"</span>  \ny - 年，二位数字<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"99\"</span>  \nz - 一年中的第几天<span class=\"token punctuation\">;</span> 如: <span class=\"token string\">\"0\"</span> 至 <span class=\"token string\">\"365\"</span>\n</code></pre>\n<p>strtotime()：</p>\n<pre><code class=\"prism language-php\"><span class=\"token keyword\">echo</span> <span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'2021-09-08'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 输出结果为2021-09-08对应的时间戳</span>\n<span class=\"token keyword\">echo</span> <span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-d-m'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 输出结果当前年月日的时间戳</span>\n</code></pre>\n<p>strtotime()还可加入对于数字的操作、年月日周英文字符的操作，示例如下：</p>\n<pre><code class=\"prism language-php\"><span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">,</span><span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+1 day'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>输出结果为明天此时的时间\n<span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">,</span><span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'-1 day'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>输出结果为昨天此时的时间\n<span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">,</span><span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'+1 week'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>输出结果为下个星期此时的时间\n<span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">,</span><span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'next Thursday'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>输出结果为下个星期四此时的时间\n<span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'Y-m-d H:i:s'</span><span class=\"token punctuation\">,</span><span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'last Thursday'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>输出结果为上个星期四此时的时间\n</code></pre>\n<p>修改时区的方法：</p>\n<p>方法一：php.ini中修改为中国时区</p>\n<pre><code class=\"prism language-php\">date<span class=\"token operator\">.</span>timezone <span class=\"token operator\">=</span> <span class=\"token constant\">PRC</span>\n</code></pre>\n<p>方法二：在php文件中临时设置为中国时区</p>\n<pre><code class=\"prism language-php\"><span class=\"token function\">date_default_timezone_set</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'PRC'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>", "first_tag": "PHP", "cpp": 0, "csharp": 0, "python": 0, "javascript": 0, "java": 0, "sql": 0, "php": 1, "time": "2021-09-08 10:17:43", "summary": "中获取时间方法是，在中获取时间戳方法有、；：，为格式、为时间戳可选。：返回当前时间的时间戳，没有参数。：将英文文本格式的时间字符串解析为时间戳。为必填，规定要解析的时间字符串；用来计算返回值的时间戳，"}