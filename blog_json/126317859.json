{"blogid": "126317859", "writerAge": "ç é¾„2å¹´", "writerBlogNum": "63", "writerCollect": "864", "writerComment": "972", "writerFan": "1315", "writerGrade": "5çº§", "writerIntegral": "2904", "writerName": "è´¤è›‹å¤§çœ¼èŒ", "writerProfileAdress": "writer_image\\profile_126317859.jpg", "writerRankTotal": "6654", "writerRankWeekly": "92", "writerThumb": "703", "writerVisitNum": "34306", "blog_read_count": "1506", "blog_time": "äºÂ 2022-08-13 12:20:12Â å‘å¸ƒ", "blog_title": "ã€Vueå…¨å®¶æ¡¶ã€‘æ–°ä¸€ä»£çš„çŠ¶æ€ç®¡ç†--Pinia", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>ã€Vueå…¨å®¶æ¡¶ã€‘æ–°ä¸€ä»£çš„çŠ¶æ€ç®¡ç†--Pinia</h3>\n<ul><li><ul><li><a href=\"#__Pinia_1\">ğŸ¦´ ä»€ä¹ˆæ˜¯ Pinia</a></li><li><ul><li><a href=\"#_Pinia_13\">å¦‚ä½•ä½¿ç”¨ Pinia</a></li></ul>\n</li><li><a href=\"#_Store_41\">ğŸŒ‚è®¤è¯† Store</a></li><li><ul><li><a href=\"#1_store_47\">1. å®šä¹‰ä¸€ä¸ªstore</a></li><li><a href=\"#2__store_55\">2. ä½¿ç”¨ store</a></li></ul>\n</li><li><a href=\"#__State_63\">ğŸ§³ æ“ä½œ State</a></li><li><a href=\"#_Getters_84\">ğŸ¨ Getters</a></li><li><ul><li><a href=\"#1__Getters_86\">1. è®¤è¯†å’Œå®šä¹‰ Getters</a></li><li><a href=\"#2__Getters_93\">2. è®¿é—® Getters</a></li></ul>\n</li><li><a href=\"#_Action_137\">ğŸ³è®¤è¯†å’Œå®šä¹‰ Action</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h2><a id=\"__Pinia_1\"></a>ğŸ¦´ ä»€ä¹ˆæ˜¯ Pinia</h2>\n<p>Pinia (è¥¿ç­ç‰™è¯­ä¸­çš„è è)ï¼Œæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ª<mark>çŠ¶æ€ç®¡ç†çš„åº“</mark>ï¼Œç”¨äºè·¨ç»„ä»¶ã€é¡µé¢è¿›è¡ŒçŠ¶æ€å…±äº«.</p>\n<p>pinia ä¸ vuex çš„åŒºåˆ«ï¼š</p>\n<ol><li> <p>æ›´å‹å¥½çš„TypeScriptæ”¯æŒï¼ŒVuexä¹‹å‰å¯¹TSçš„æ”¯æŒå¾ˆä¸å‹å¥½</p> </li><li> <p><strong>ä¸ Vuex ç›¸æ¯”ï¼ŒPinia æä¾›äº†ä¸€ä¸ªæ›´ç®€å•çš„ APIï¼Œå…·æœ‰æ›´å°‘çš„ä»ªå¼ï¼Œæä¾›äº† Composition-API é£æ ¼çš„ API</strong></p> </li><li> <p>ä¸å†æœ‰modulesçš„åµŒå¥—ç»“æ„</p> </li><li> <p>ä¹Ÿä¸å†æœ‰å‘½åç©ºé—´çš„æ¦‚å¿µï¼Œä¸éœ€è¦è®°ä½å®ƒä»¬çš„å¤æ‚å…³ç³»</p> </li></ol>\n<h3><a id=\"_Pinia_13\"></a>å¦‚ä½•ä½¿ç”¨ Pinia</h3>\n<ol><li>å®‰è£… pinia</li></ol>\n<pre><code class=\"prism language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> pinia\n</code></pre>\n<ol start=\"2\"><li>åˆ›å»ºä¸€ä¸ªpinia</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// src/stores/index.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> createPinia <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"pinia\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> pinia <span class=\"token operator\">=</span> <span class=\"token function\">createPinia</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> pinia\n</code></pre>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">//main.js</span>\n<span class=\"token keyword\">import</span> pinia <span class=\"token keyword\">from</span> <span class=\"token string\">'./stores'</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>pinia<span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"_Store_41\"></a>ğŸŒ‚è®¤è¯† Store</h2>\n<p>ä¸€ä¸ª Store ï¼ˆå¦‚ Piniaï¼‰æ˜¯ä¸€ä¸ªå®ä½“ï¼Œå®ƒä¼šæŒæœ‰ä¸ºç»‘å®šåˆ°ä½ ç»„ä»¶æ ‘çš„<mark>çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘</mark>ï¼Œä¹Ÿå°±æ˜¯ä¿å­˜äº†å…¨å±€çš„çŠ¶æ€</p>\n<blockquote>\n<p>è¿™æ ·å°±å¯ä»¥å®šä¹‰ä»»æ„æ•°é‡çš„Storeæ¥ç®¡ç†ä½ çš„çŠ¶æ€ï¼ŒåŒ…æ‹¬ <code>stateã€gettersã€actions</code></p>\n</blockquote>\n<h3><a id=\"1_store_47\"></a>1. å®šä¹‰ä¸€ä¸ªstore</h3>\n<ul><li> <p>Store æ˜¯ä½¿ç”¨ defineStore() å®šä¹‰çš„ï¼Œ</p> </li><li> <p>ä¸”å®ƒéœ€è¦ä¸€ä¸ªå”¯ä¸€åç§°ï¼Œä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’</p> </li></ul>\n<p><img alt=\"image-20220812152348346\" src=\"image\\55ddc85247e418a95e6a8f430116c48a.png\"/></p>\n<h3><a id=\"2__store_55\"></a>2. ä½¿ç”¨ store</h3>\n<p><img alt=\"image-20220812152432057\" src=\"image\\9a26d2800541d38146baac32e0583655.png\"/></p>\n<p><img alt=\"image-20220812154916315\" src=\"image\\80aa1894e174b3215f8ceb03dd5c8ed2.png\"/></p>\n<h2><a id=\"__State_63\"></a>ğŸ§³ æ“ä½œ State</h2>\n<p>state æ˜¯ store çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œstoreæ˜¯ç”¨æ¥å®ç°æˆ‘ä»¬ç®¡ç†çŠ¶æ€çš„ã€‚</p>\n<p><img alt=\"image-20220812163115369\" src=\"image\\631149fcad9f5a459986e61066b79f53.png\"/></p>\n<ul><li><strong>æ–¹å¼ä¸€ï¼šç›´æ¥ä¸€ä¸ªä¸ªä¿®æ”¹state</strong></li><li><strong>æ–¹å¼äºŒï¼šä¸€æ¬¡æ€§ä¿®æ”¹å¤šä¸ªçŠ¶æ€</strong></li><li><strong>æ–¹å¼ä¸‰ï¼šæ›¿æ¢state</strong></li><li><strong>æ–¹å¼å››ï¼šé‡ç½®state</strong></li></ul>\n<p><img alt=\"image-20220812165009960\" src=\"image\\3d35373d49c5399130e6d12155a14192.png\"/></p>\n<p><img alt=\"image-20220812165858904\" src=\"image\\1b3ec94f5fadf2d232ba55ee963f6b30.png\"/></p>\n<p><img alt=\"image-20220812170350560\" src=\"image\\5f814a130035215fc4f6556ac1008eb5.png\"/></p>\n<p><img alt=\"image-20220812170540664\" src=\"image\\775b79997915e03ab9ece547e31b09ce.png\"/></p>\n<h2><a id=\"_Getters_84\"></a>ğŸ¨ Getters</h2>\n<h3><a id=\"1__Getters_86\"></a>1. è®¤è¯†å’Œå®šä¹‰ Getters</h3>\n<p><mark>Getters</mark>ç›¸å½“äºStoreçš„è®¡ç®—å±æ€§ï¼š</p>\n<ul><li>å¯ä»¥ç”¨ defineStore() ä¸­çš„ getters å±æ€§å®šä¹‰ï¼›</li><li>gettersä¸­å¯ä»¥å®šä¹‰æ¥å—ä¸€ä¸ªstateä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›</li></ul>\n<h3><a id=\"2__Getters_93\"></a>2. è®¿é—® Getters</h3>\n<ul><li> <p><strong>æ–¹å¼ä¸€ï¼šè®¿é—®å½“å‰ store çš„Getters</strong></p> </li><li> <p><strong>æ–¹å¼äºŒï¼šGetters ä¸­è®¿é—®è‡ªå·±çš„å…¶ä»–Getters</strong></p> </li><li> <p><strong>æ–¹å¼ä¸‰ï¼šè®¿é—®å…¶ä»–çš„ store çš„Getters</strong></p> </li></ul>\n<pre><code class=\"prism language-js\"><span class=\"token literal-property property\">getters</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 1. åŸºæœ¬ä½¿ç”¨</span>\n    <span class=\"token function\">debouleCount</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 2. ä¸€ä¸ª getters å¼•å…¥å¦å¤–ä¸€ä¸ª getters</span>\n    <span class=\"token function\">useDebouleCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>debouleCount <span class=\"token operator\">+</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 3. getterä¹Ÿæ”¯æŒè¿”å›ä¸€ä¸ªå‡½æ•°</span>\n    <span class=\"token function\">getFriendById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token keyword\">return</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> state<span class=\"token punctuation\">.</span>vagetabel<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token keyword\">const</span> vagetabel <span class=\"token operator\">=</span> state<span class=\"token punctuation\">.</span>vagetabel<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>vagetabel<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">return</span> vagetabel\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// 4.è®¿é—®å…¶ä»–storeä¸­çš„Getters</span>\n    <span class=\"token function\">showMessage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// è·å–userä¿¡æ¯</span>\n      <span class=\"token keyword\">const</span> useStore <span class=\"token operator\">=</span> <span class=\"token function\">useUser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n      <span class=\"token comment\">// è·å–è‡ªå·±çš„state</span>\n      <span class=\"token comment\">// æ‹¼æ¥ä¿¡æ¯</span>\n      <span class=\"token keyword\">return</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">name:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>useStore<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> - count:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>state<span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre>\n<p><img alt=\"image-20220812181122665\" src=\"image\\98dbb66d07ec4371836bce18f55c8c96.png\"/></p>\n<h2><a id=\"_Action_137\"></a>ğŸ³è®¤è¯†å’Œå®šä¹‰ Action</h2>\n<blockquote>\n<p>Action å¯ä»¥ç†è§£æˆç»„ä»¶ä¸­çš„ methods ï¼Œå’Œgettersä¸€æ ·ï¼Œåœ¨actionä¸­å¯ä»¥é€šè¿‡thisè®¿é—®æ•´ä¸ªstoreå®ä¾‹çš„æ‰€æœ‰æ“ä½œã€‚</p>\n</blockquote>\n<p><img alt=\"image-20220813121159762\" src=\"image\\5e9c085e496d362dc2c256c88d9e34f9.png\"/></p>\n<blockquote>\n<p>Action æ˜¯æ”¯æŒå¼‚æ­¥æ“ä½œçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ awaitã€‚</p>\n</blockquote>\n<p><img alt=\"image-20220813121241994\" src=\"image\\4da700421af9ecfe6e80c9fed0e1bc32.png\"/></p>\n<p><img alt=\"å–œæ¬¢å°±ä¸€é”®ä¸‰è¿å§ï¼\" src=\"image\\bfb5dacd16813059ae2d91be6f88dae7.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}