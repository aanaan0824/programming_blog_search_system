{"blogid": "124238246", "writerAge": "码龄1年", "writerBlogNum": "60", "writerCollect": "1412", "writerComment": "2002", "writerFan": "3854", "writerGrade": "6级", "writerIntegral": "6392", "writerName": "沙漠下的胡杨", "writerProfileAdress": "writer_image\\profile_124238246.jpg", "writerRankTotal": "3440", "writerRankWeekly": "1187", "writerThumb": "2275", "writerVisitNum": "41953", "blog_read_count": "1209", "blog_time": "于 2022-04-17 23:57:21 发布", "blog_title": "指针的深度解刨《五》", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><span style=\"color:#ffd900;\"><strong><span style=\"background-color:#fe2c24;\">今天主要讲些指针数组，和数组指针相关知识</span></strong></span></p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\c7275e8d2b2d45fdbe1dca3c59c680ae.png\"/></p>\n<p> </p>\n<p></p>\n<p><span style=\"color:#fe2c24;\"><strong><span style=\"background-color:#ffd900;\">希望大家今天也要开心呀！</span></strong></span></p>\n<p></p>\n<p></p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\d7d6e2a98bc64f458e6e5826bd40af87.png\"/></p>\n<p> </p>\n<p id=\"main-toc\"><strong><span style=\"background-color:#956fe7;\">目录</span></strong></p>\n<p id=\"%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%EF%BC%9A-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%EF%BC%9A\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\">指针数组：</span></span></a></strong></p>\n<p id=\"%E7%A8%8D%E5%BE%AE%E8%BF%9B%E9%98%B6%E4%B8%8B%E5%91%A2%EF%BC%9F-toc\" style=\"margin-left:80px;\"><strong><a href=\"#%E7%A8%8D%E5%BE%AE%E8%BF%9B%E9%98%B6%E4%B8%8B%E5%91%A2%EF%BC%9F\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\">稍微进阶下呢？</span></span></a></strong></p>\n<p id=\"%E6%89%A9%E5%B1%95%EF%BC%9A-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E6%89%A9%E5%B1%95%EF%BC%9A\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\">扩展：</span></span></a></strong></p>\n<p id=\"%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%95%B0%E5%AD%97%E6%98%AF%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E5%90%97%EF%BC%9F%EF%BC%88int%20%5B10%5D%E4%B8%AD%E7%9A%8410%EF%BC%89-toc\" style=\"margin-left:80px;\"><strong><a href=\"#%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%95%B0%E5%AD%97%E6%98%AF%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E5%90%97%EF%BC%9F%EF%BC%88int%20%5B10%5D%E4%B8%AD%E7%9A%8410%EF%BC%89\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\">数组中的数字是类型的一部分吗？（int [10]中的10）</span></span></a></strong></p>\n<p id=\"%C2%A0%E9%82%A3%E4%B9%88%E5%AF%B9%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E5%BC%BA%E8%BD%AC%E5%91%A2%EF%BC%9F-toc\" style=\"margin-left:80px;\"><strong><a href=\"#%C2%A0%E9%82%A3%E4%B9%88%E5%AF%B9%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E5%BC%BA%E8%BD%AC%E5%91%A2%EF%BC%9F\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\"> 那么对地址进行强转呢？</span></span></a></strong></p>\n<p id=\"%E4%B8%8B%E6%9C%9F%E9%A2%84%E5%91%8A%EF%BC%9A-toc\" style=\"margin-left:0px;\"><strong><a href=\"#%E4%B8%8B%E6%9C%9F%E9%A2%84%E5%91%8A%EF%BC%9A\"><span style=\"color:#fe2c24;\"><span style=\"background-color:#ffd900;\">下期预告：</span></span></a></strong></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84%EF%BC%9A\"><span style=\"color:#ffd900;\">指针数组：</span></h1>\n<p>首先是一个数组，数组的元素都是指针，数组所占的字节数由数组本身大小决定。、</p>\n<p><span style=\"color:#e6b223;\"><strong>数组可以存放任何类型（整形，浮点，结构，位段，指针，数组 等）</strong></span></p>\n<p>数组指针：</p>\n<p>首先是指针，指向一个数组，在32位下是4个字节，指向的数组占字节数未知</p>\n<p><strong><span style=\"color:#ffd900;\">指针可以指向任何合法的类型变量。</span></strong></p>\n<pre><code>    int *p1[10] ;\n\tint(*p2)[10] ;</code></pre>\n<p>以上面例子分析：</p>\n<p></p>\n<p>首先<span style=\"color:#ff9900;\"><strong> [ ]的优先级高于 *</strong></span> 所以，p1先和 [ ]结合是数组，然后类型是数组的类型int *。</p>\n<p>p2是先和 * 结合变成指针，指向一个数组，数组的类型是 int [ 10 ]。</p>\n<p></p>\n<h3 id=\"%E7%A8%8D%E5%BE%AE%E8%BF%9B%E9%98%B6%E4%B8%8B%E5%91%A2%EF%BC%9F\">稍微进阶下呢？</h3>\n<pre><code>    int(*p3[7])[10];\n\tint(*(*p4)[8])[10];</code></pre>\n<p>这下看起来有些复杂，但是本质是没有变，我们分析下：</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\a528a30c5bbe4d5d9e890165a86a5109.png\"/></p>\n<p>首先，<span style=\"color:#fe2c24;\"><strong>p3</strong></span>先和数组结合，是数组，那么就要放内容，类型就是int (*) [10]，这个类型是一个指针数组，所以这个<span style=\"color:#fe2c24;\"><strong>就是一个数组指针数组</strong></span>，数组元素个数是7个，数组元素类型是int (*) [10]。</p>\n<p></p>\n<p><span style=\"color:#fe2c24;\"><strong>p4</strong></span>先和指针结合，是指针，指针就要有指向，指向一个数组，数组存放的是一个数组指针，所以这个<span style=\"color:#fe2c24;\"><strong>是一个数组指针数组的指针</strong></span>，指针先指向了一个数组指针，数组指针的内容是一个数组。</p>\n<p>这下面可以无线套娃啦，但是一般情况下，不会使用到这一步，只要能看懂就好了。</p>\n<p></p>\n<h1 id=\"%E6%89%A9%E5%B1%95%EF%BC%9A\"><span style=\"color:#a2e043;\">扩展：</span></h1>\n<p>这里有个C语言的奇怪的地方，正常来说，一个变量是<span style=\"color:#1c7331;\">  <strong>类型 + 变量名 = 值</strong></span>。整形，浮点，指针都满足，但是放到<span style=\"color:#ffd900;\"><strong>数组就不一样</strong></span>啦！</p>\n<p>看个例子：</p>\n<pre><code>    int a = 10;\n\tdouble b = 11.1;\n\tint * c = NULL;\n\tdouble *d = NULL;\n\tint arr[10] = { 0 };\n\tdouble brr[10] = { 0 };</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\d7d670164066452c8e405bc0b45996f5.png\"/></p>\n<p>一般的类型，都在左边，而数组就不一样，但是都满足把变量名去掉就是类型。</p>\n<p>所以我们如果想把数组的类型也像其他一样，那么我们使用typedef进行类型重名。</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\71875cbaabd840fda7b904569ce24a41.png\"/></p>\n<p> 这样看就符合常理了，但是<span style=\"color:#ffd900;\"><strong>使用typedef是一种封装，不建议过度使用</strong></span>。</p>\n<p></p>\n<h3 id=\"%E6%95%B0%E7%BB%84%E4%B8%AD%E7%9A%84%E6%95%B0%E5%AD%97%E6%98%AF%E7%B1%BB%E5%9E%8B%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E5%90%97%EF%BC%9F%EF%BC%88int%20%5B10%5D%E4%B8%AD%E7%9A%8410%EF%BC%89\"><span style=\"color:#38d8f0;\">数组中的数字是类型的一部分吗？（int [10]中的10）</span></h3>\n<p></p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\ceeb47234b8645c38a3ee6557eb0c07b.png\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\825d066d084e4ffc88619e58d35f2cba.png\"/> </p>\n<p>这样通过调试来看，数组中[ ]数字是类型的一部分，还因为&amp;a之后没有警告的就放入b中，这就证明了&amp;a的类型和指针变量b的类型一样，如果数字不一样可以放进去吗？</p>\n<p>可以放进入，但是有警告。</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\f3558871c4734251af332437ee1f0db0.png\"/> </p>\n<p> 这就和另一点知识相关啦，关于地址的强制转换。</p>\n<p><span style=\"color:#ffd900;\"><strong><span style=\"background-color:#fe2c24;\">强制类型转化：只改变了看待数据的方式，而不是数据类型发生变化。</span></strong></span></p>\n<p>比如字符串“12345”，如果转化为整数12345，是不能通过强转来实现的，那么这个数据是发生变化啦。在比如int a = 97，你想把它表示为 字符 'a'，那么只需要用char类型的数据来看就行啦，不用更改数组本身。</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\770b90cbcb3f461b98f0e8bd74a46eb2.png\"/> </p>\n<h3 id=\"%C2%A0%E9%82%A3%E4%B9%88%E5%AF%B9%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E5%BC%BA%E8%BD%AC%E5%91%A2%EF%BC%9F\"><span style=\"color:#4da8ee;\"> 那么对地址进行强转呢？</span></h3>\n<p><span style=\"color:#fe2c24;\"><strong>实际上地址的值没有变</strong></span>，只改变访问的字节数，或者说和指针强转后的访问步长有关。</p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\c3d0a846e2654348ae14336acb4fa080.png\"/></p>\n<p style=\"text-align:center;\"> <img alt=\"\" src=\"image\\de972069380249dea311f9f2e4f0d5d4.png\"/></p>\n<p> </p>\n<h1 id=\"%E4%B8%8B%E6%9C%9F%E9%A2%84%E5%91%8A%EF%BC%9A\"><span style=\"color:#956fe7;\">下期预告：</span></h1>\n<p><span style=\"color:#ed7976;\"><strong>下期讲解二维数组相关知识。</strong></span></p>\n<p><span style=\"color:#ed7976;\"><strong>下期更精彩！~！~！</strong></span></p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\65282254848c4999a8f25bfc6dff52cd.png\"/></p>\n<p> </p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n<p></p>\n</div>\n</div>"}