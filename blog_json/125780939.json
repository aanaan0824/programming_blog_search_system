{"blogid": "125780939", "writerAge": "码龄2年", "writerBlogNum": "37", "writerCollect": "23", "writerComment": "5", "writerFan": "15", "writerGrade": "2级", "writerIntegral": "395", "writerName": "走出半生的少年", "writerProfileAdress": "writer_image\\profile_125780939.jpg", "writerRankTotal": "42260", "writerRankWeekly": "15015", "writerThumb": "15", "writerVisitNum": "8759", "blog_read_count": "1885", "blog_time": "于 2022-07-14 16:03:21 发布", "blog_title": "uniapp开发微信小程序自定义顶部导航栏", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>自定义导航栏渐变色，先上效果</p>\n<p><img alt=\"\" height=\"129\" src=\"image\\09976dabef5f4c3ca08230468d0d97fa.png\" width=\"439\"/></p>\n<p> </p>\n<p><br/> 使用uniapp开发小程序，在不同界面，要去对页面进行修改顶部导航栏。</p>\n<p>比如说要去定义导航栏的背景颜色，常规的去定义导航栏背景颜色</p>\n<p>全局定义导航栏</p>\n<pre><code class=\"language-javascript\">\"window\": {\n   \"navigationBarBackgroundColor\": \"#32A2FD\",  // 顶部背景颜色\n    \"navigationBarTitleText\": \"123456\",         // 顶部文字\n    \"navigationStyle\": \"default\",               // 是否自定义导航栏,当\"default\"为\"custom\"时开启自定义头部导航栏选项\n    \"navigationBarTextStyle\": \"white\",          // 顶部文字颜色 仅支持 white/black    \n},\n</code></pre>\n<p>单页面定义导航栏</p>\n<pre><code class=\"language-javascript\">\"path\": \"pages/cargo/pickUpGoods\",//页面路径\n\"style\": {\n\t\"navigationBarTitleText\": \"uni-app\", // 顶部文字\n\t\"navigationBarBackgroundColor\": \"#fff\", // 顶部背景颜色\n\t\"navigationBarTextStyle\": \"black\" // 顶部文字颜色\n\n}</code></pre>\n<h2></h2>\n<h2><span style=\"color:#0d0016;\"><strong>重点来了，导航栏设置渐变色</strong></span></h2>\n<p>踩坑，开始我以为把顶部导航栏的颜色换成渐变的就可以了，但是不行</p>\n<p>查了之后才知道，设置渐变色要去自定义背景颜色</p>\n<p>首先  如果是全部页面就在window里面添加，如果是单页面就在页面添加</p>\n<p>\"navigationStyle\": \"custom\"</p>\n<pre><code class=\"language-javascript\">\"path\": \"pages/cargo/shipments\",\n\"style\": {\n\t\"navigationBarTitleText\": \"uni-app\",\n\t\"navigationStyle\": \"custom\",//设置自定义导航栏\n}</code></pre>\n<p></p>\n<p>然后，自己封装一个组件，</p>\n<pre><code class=\"language-javascript\">&lt;template&gt;\n\t&lt;view class=\"prohibition\"&gt;\n\t\t&lt;view class=\"demo\" :style=\"[{background},{color},{height},{paddingTop}]\"&gt;\n\t\t\t&lt;!-- 左侧返回按钮 --&gt;\n\t\t\t&lt;view class=\"left\" @click=\"onBack\" v-if=\"back\" :style=\"[{color},{paddingTop}]\"&gt;\n\t\t\t\t&lt;uni-icons type=\"arrowleft\" size=\"30\" :color='color'&gt;&lt;/uni-icons&gt;\n\t\t\t\t&lt;!-- 此处图标使用的是 uni-ui图标 --&gt;\n\t\t\t&lt;/view&gt;\n\t\t\t&lt;!-- 中间标题文字 --&gt;\n\t\t\t&lt;view class=\"title\"&gt;\n\t\t\t\t{<!-- -->{title}}\n\t\t\t&lt;/view&gt;\n\t\t&lt;/view&gt;\n\t&lt;/view&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\theight: 0, \n\t\t\t\tpaddingTop: 0,\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\t// props: [\"title\", \"back\"],\n\t\tprops:{\n\t\t\ttitle:{ // 标题文字(默认为空)\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\tcolor:{ // 标题和返回按钮颜色(默认白色)\n\t\t\t\ttype:String,\n\t\t\t\tdefault:'#fff'\n\t\t\t},\n            //建议使用background  因为使用backgroundColor，会导致不识别渐变颜色\n\t\t\tbackground:{ // 背景颜色(不传值默认透明)\n\t\t\t\ttype:String,\n\t\t\t\tdefault:'transparent'\n\t\t\t},\n\t\t\tback:{ // 是否显示返回按钮(不传值默认不显示)\n\t\t\t\ttype:Boolean,\n\t\t\t\tdefault:false\n\t\t\t},\n\t\t},\n\t\t\n\t\tcreated() {\n\t\t\tconst demo = uni.getMenuButtonBoundingClientRect()\n\t\t\tthis.height = demo.height + \"px\"\n\t\t\tthis.paddingTop = demo.top + \"px\"\n\n\t\t},\n\t\tmethods: {\n\t\t\t// 左侧返回按钮调用\n\t\t\tonBack() {\n\t\t\t\tthis.$emit(\"onBack\")\n\t\t\t}\n\t\t}\n\t}\n&lt;/script&gt;\n&lt;style lang=\"less\"&gt;\n\t.demo {\n\t\tposition: relative;//注意，建议使用相对定位，因为固定定位会脱离文档流，然后你还要去设置marginTop值\n\t\t// position: fixed;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tfont-size: 26rpx;\n\t\tz-index: 100;\n\t\tpadding-bottom: 10rpx;\n\n\t\t.left {\n\t\t\tfloat: left;\n\t\t\tposition: absolute;\n\t\t\twidth: 100rpx;\n\t\t\theight: 50rpx;\n\t\t\ttop: 0;\n\t\t\tbottom: 0;\n\t\t\tleft: 20rpx;\n\t\t\tcolor: #fff;\n\t\t\tmargin: auto;\n\t\t}\n\n\t\t.title {\n\t\t\tfont-size: 36rpx;\n\t\t\tfont-family: Source Han Sans CN;\n\t\t\t// color: #FFFFFF;\n\t\t}\n\t}\n&lt;/style&gt;\n</code></pre>\n<p>然后，引入你的这个组件，写在页面的最上面</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\919070dc82ad474bb6678426eeef0533.jpeg\"/></p>\n<p> 代码在这里</p>\n<pre><code class=\"language-javascript\">&lt;navbar class=\"header\" :background=\"backgroundColor\" back :title=\"title\" @onBack=\"goBack\"&gt;&lt;/navbar&gt;</code></pre>\n<p>引入组件，使用</p>\n<p><img alt=\"\" height=\"190\" src=\"image\\1b7681c16557491e8074a1f6ce0d5be0.png\" width=\"629\"/></p>\n<p> </p>\n<p></p>\n<p>踩了很多坑，制作不易。</p>\n<p></p>\n<p></p>\n<p></p>\n</div>\n</div>"}