{"blogid": "126570618", "writerAge": "ç é¾„7å¹´", "writerBlogNum": "66", "writerCollect": "751", "writerComment": "1325", "writerFan": "1192", "writerGrade": "5çº§", "writerIntegral": "3252", "writerName": "ä¼šæ•²é”®ç›˜çš„è‚˜å­", "writerProfileAdress": "writer_image\\profile_126570618.jpg", "writerRankTotal": "5745", "writerRankWeekly": "36", "writerThumb": "1040", "writerVisitNum": "130405", "blog_read_count": "3729", "blog_time": "äºÂ 2022-08-28 15:48:26Â å‘å¸ƒ", "blog_title": "çŒ¿åˆ›å¾æ–‡ï½œã€.Netå®ç”¨æ–¹æ³•æ€»ç»“ã€‘ æ•´ç†å¹¶æ€»ç»“System.IOä¸­FileStreamç±»åŠå…¶æ–¹æ³•ä»‹ç»", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atelier-sulphurpool-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>ğŸ‹ä½œè€…ç®€ä»‹ï¼šåšä¸»æ˜¯ä¸€ä½.Netå¼€å‘è€…ï¼ŒåŒæ—¶ä¹Ÿæ˜¯RPAå’Œä½ä»£ç å¹³å°çš„è·µè¡Œè€…ã€‚<br/> ğŸ¬ä¸ªäººä¸»é¡µï¼š<a href=\"https://blog.csdn.net/baidu_33146219?type=blog\">ä¼šæ•²é”®ç›˜çš„è‚˜å­</a><br/> ğŸ°ç³»åˆ—ä¸“æ ï¼š<a href=\"https://blog.csdn.net/baidu_33146219/category_11968078.html?spm=1001.2014.3001.5482\">.Netå®ç”¨æ–¹æ³•æ€»ç»“</a><br/> ğŸ¦€ä¸“æ ç®€ä»‹ï¼šåšä¸»é’ˆå¯¹.Netå¼€å‘å’ŒCç«™é—®ç­”è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜è¿›è¡Œæ€»ç»“ï¼Œå½¢æˆæœ¬ä¸“æ ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æ‚¨è§£å†³é—®é¢˜ã€‚<br/> ğŸ¶åº§å³é“­ï¼šæ€»æœ‰ä¸€å¤©ä½ æ‰€åšæŒçš„ä¼šåè¿‡æ¥æ‹¥æŠ±ä½ ã€‚</p>\n</blockquote>\n<hr/>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20149cf905ca46f78ca992f76476341b.png\"/></p>\n<blockquote>\n<p>ğŸŒˆå†™åœ¨å‰é¢ï¼š</p>\n<p>æœ¬æ–‡ä¸»è¦ä»‹ç»<strong>System.IO</strong>å‘½åç©ºé—´çš„<strong>FileStream</strong> ç±»ï¼Œä»‹ç»å…¶å¸¸ç”¨çš„æ–¹æ³•å’Œç¤ºä¾‹è¯´æ˜ã€‚</p>\n</blockquote>\n<hr/>\n<p><strong>ğŸ‘‰æœ¬æ–‡å…³é”®å­—ï¼šSystem.IOã€FileStreamç±»ã€æ–‡ä»¶æµã€æ–¹æ³•ç¤ºä¾‹ã€C#</strong></p>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><ul><li><ul><li><a href=\"#1_SystemIO_21\">1ï¸âƒ£ System.IOå‘½åç©ºé—´</a></li><li><a href=\"#2_FileStream_45\">2ï¸âƒ£ FileStreamç±»</a></li><li><ul><li><a href=\"#__47\">â™ˆ å®šä¹‰</a></li><li><a href=\"#__55\">â› ç¤ºä¾‹</a></li><li><a href=\"#__147\">â™‰ æ„é€ å‡½æ•°</a></li><li><ul><li><a href=\"#FileStreamString_FileMode_FileAccess_FileShare_Int32_FileOptions_151\">FileStream(String, FileMode, FileAccess, FileShare, Int32, FileOptions)</a></li><li><a href=\"#FileStreamString_FileMode_FileAccess_FileShare_Int32_Boolean_264\">FileStream(String, FileMode, FileAccess, FileShare, Int32, Boolean)</a></li><li><a href=\"#FileStreamString_FileMode_436\">FileStream(String, FileMode)</a></li></ul>\n</li><li><a href=\"#__504\">â™Š å±æ€§</a></li><li><ul><li><a href=\"#CanRead__506\">CanRead å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æŒ‡ç¤ºå½“å‰æµæ˜¯å¦æ”¯æŒè¯»å–çš„å€¼</a></li><li><a href=\"#CanWrite__535\">CanWrite å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æŒ‡ç¤ºå½“å‰æµæ˜¯å¦æ”¯æŒå†™å…¥åŠŸèƒ½çš„å€¼</a></li><li><a href=\"#Length__566\">Length å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æµé•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</a></li></ul>\n</li><li><a href=\"#__572\">â™Œ å¸¸ç”¨æ–¹æ³•</a></li><li><ul><li><a href=\"#Close__574\">Close() å…³é—­å½“å‰æµå¹¶é‡Šæ”¾ä¸ä¹‹å…³è”çš„æ‰€æœ‰èµ„æºï¼ˆå¦‚å¥—æ¥å­—å’Œæ–‡ä»¶å¥æŸ„ï¼‰</a></li><li><a href=\"#CopyToStream__582\">CopyTo(Stream) ä»å½“å‰æµä¸­è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€æµä¸­</a></li><li><a href=\"#CopyToStream_Int32__618\">CopyTo(Stream, Int32) ä½¿ç”¨æŒ‡å®šçš„ç¼“å†²åŒºå¤§å°ï¼Œä»å½“å‰æµä¸­è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€æµä¸­</a></li><li><a href=\"#CopyToAsyncStream__638\">CopyToAsync(Stream) ä»å½“å‰æµä¸­å¼‚æ­¥è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€ä¸ªæµä¸­</a></li><li><a href=\"#Dispose__Stream__693\">Dispose() é‡Šæ”¾ç”± Stream ä½¿ç”¨çš„æ‰€æœ‰èµ„æº</a></li><li><a href=\"#ReadByte_Int32_Int32__699\">Read(Byte[], Int32, Int32) å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œä»å½“å‰æµè¯»å–å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æ­¤æµä¸­çš„ä½ç½®æå‡è¯»å–çš„å­—èŠ‚æ•°</a></li><li><a href=\"#ReadAsyncByte_Int32_Int32__772\">ReadAsync(Byte[], Int32, Int32) ä»å½“å‰æµå¼‚æ­¥è¯»å–å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æµä¸­çš„ä½ç½®æå‡è¯»å–çš„å­—èŠ‚æ•°</a></li><li><a href=\"#ReadByte__842\">ReadByte() ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶å°†è¯»å–ä½ç½®æå‡ä¸€ä¸ªå­—èŠ‚</a></li><li><a href=\"#WriteByte_Int32_Int32__900\">Write(Byte[], Int32, Int32) å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œå‘å½“å‰æµä¸­å†™å…¥å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æ­¤æµä¸­çš„å½“å‰ä½ç½®æå‡å†™å…¥çš„å­—èŠ‚æ•°</a></li><li><a href=\"#WriteAsyncByte_Int32_Int32__930\">WriteAsync(Byte[], Int32, Int32) å°†å­—èŠ‚åºåˆ—å¼‚æ­¥å†™å…¥å½“å‰æµï¼Œå¹¶å°†æµçš„å½“å‰ä½ç½®æå‡å†™å…¥çš„å­—èŠ‚æ•°</a></li><li><a href=\"#WriteByteByte__1000\">WriteByte(Byte) ä¸€ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶æµä¸­çš„å½“å‰ä½ç½®</a></li><li><a href=\"#Flush__1060\">Flush() æ¸…é™¤æ­¤æµçš„ç¼“å†²åŒºï¼Œä½¿å¾—æ‰€æœ‰ç¼“å†²æ•°æ®éƒ½å†™å…¥åˆ°æ–‡ä»¶ä¸­</a></li><li><a href=\"#FlushAsync__1105\">FlushAsync() å¼‚æ­¥æ¸…é™¤æ­¤æµçš„æ‰€æœ‰ç¼“å†²åŒºå¹¶å¯¼è‡´æ‰€æœ‰ç¼“å†²æ•°æ®éƒ½å†™å…¥åŸºç¡€è®¾å¤‡ä¸­</a></li><li><a href=\"#LockInt64_Int64__FileStream_1117\">Lock(Int64, Int64) é˜²æ­¢å…¶ä»–è¿›ç¨‹è¯»å–æˆ–å†™å…¥ FileStream</a></li><li><a href=\"#UnlockInt64_Int64__1299\">Unlock(Int64, Int64) å…è®¸å…¶ä»–è¿›ç¨‹è®¿é—®ä»¥å‰é”å®šçš„æŸä¸ªæ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†</a></li></ul>\n</li><li><a href=\"#__1481\">â™ æ³¨è§£</a></li><li><a href=\"#__1493\">â™ æ›´å¤šæ–¹æ³•</a></li></ul>\n</li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h3><a id=\"1_SystemIO_21\"></a>1ï¸âƒ£ System.IOå‘½åç©ºé—´</h3>\n<p>.NETä¸­çš„IOæ“ä½œå‘½åç©ºé—´ï¼ŒåŒ…å«å…è®¸<strong>è¯»å†™æ–‡ä»¶</strong>å’Œ<strong>æ•°æ®æµ</strong>çš„ç±»å‹ä»¥åŠæä¾›åŸºæœ¬<strong>æ–‡ä»¶å’Œç›®å½•æ”¯æŒ</strong>çš„ç±»å‹ã€‚</p>\n<p>æˆ‘ä»¬åœ¨.NETä¸­çš„IOæ“ä½œï¼Œç»å¸¸éœ€è¦è°ƒç”¨ä¸€ä¸‹å‡ ä¸ªç±»ã€‚</p>\n<ul><li><strong>FileStreamç±»</strong></li></ul>\n<p>â€‹ æ–‡ä»¶æµç±»ï¼Œè´Ÿè´£å¤§æ–‡ä»¶çš„æ‹·è´ï¼Œè¯»å†™ã€‚</p>\n<ul><li><strong>Pathç±»</strong></li></ul>\n<p>â€‹ Pathç±»ä¸­æ–¹æ³•ï¼ŒåŸºæœ¬éƒ½æ˜¯å¯¹å­—ç¬¦ä¸²ï¼ˆæ–‡ä»¶åï¼‰çš„æ“ä½œï¼Œä¸å®é™…æ–‡ä»¶æ²¡å¤šå¤§å…³ç³»ã€‚</p>\n<ul><li> <p><strong>Fileç±»</strong></p> <p>Fileç±»å¯ä»¥è¿›è¡Œä¸€äº›å¯¹å°æ–‡ä»¶æ‹·è´ã€å‰ªåˆ‡æ“ä½œï¼Œè¿˜èƒ½è¯»ä¸€äº›æ–‡æ¡£æ–‡ä»¶ã€‚</p> </li><li> <p><strong>Dirctoryç±»</strong></p> <p>ç›®å½•æ“ä½œï¼Œåˆ›å»ºæ–‡ä»¶ã€åˆ é™¤ç›®å½•ï¼Œè·å–ç›®å½•ä¸‹æ–‡ä»¶åç­‰ç­‰ã€‚</p> </li></ul>\n<h3><a id=\"2_FileStream_45\"></a>2ï¸âƒ£ FileStreamç±»</h3>\n<h4><a id=\"__47\"></a>â™ˆ å®šä¹‰</h4>\n<p>ä¸ºæ–‡ä»¶æä¾› <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a>ï¼Œæ—¢æ”¯æŒåŒæ­¥è¯»å†™æ“ä½œï¼Œä¹Ÿæ”¯æŒå¼‚æ­¥è¯»å†™æ“ä½œã€‚</p>\n<pre><code class=\"prism language-C#\">public class FileStream : System.IO.Stream\n</code></pre>\n<h4><a id=\"__55\"></a>â› ç¤ºä¾‹</h4>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºäº†ä¸€äº› <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> æ„é€ å‡½æ•°ã€‚</p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\nusing System.Text;\n\nclass Test\n{\n\n    public static void Main()\n    {\n        string path = @\"c:\\temp\\MyTest.txt\";\n\n        // Delete the file if it exists.\n        if (File.Exists(path))\n        {\n            File.Delete(path);\n        }\n\n        //Create the file.\n        using (FileStream fs = File.Create(path))\n        {\n            AddText(fs, \"This is some text\");\n            AddText(fs, \"This is some more text,\");\n            AddText(fs, \"\\r\\nand this is on a new line\");\n            AddText(fs, \"\\r\\n\\r\\nThe following is a subset of characters:\\r\\n\");\n\n            for (int i=1;i &lt; 120;i++)\n            {\n                AddText(fs, Convert.ToChar(i).ToString());\n            }\n        }\n\n        //Open the stream and read it back.\n        using (FileStream fs = File.OpenRead(path))\n        {\n            byte[] b = new byte[1024];\n            UTF8Encoding temp = new UTF8Encoding(true);\n            while (fs.Read(b,0,b.Length) &gt; 0)\n            {\n                Console.WriteLine(temp.GetString(b));\n            }\n        }\n    }\n\n    private static void AddText(FileStream fs, string value)\n    {\n        byte[] info = new UTF8Encoding(true).GetBytes(value);\n        fs.Write(info, 0, info.Length);\n    }\n}\n</code></pre>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å¼‚æ­¥å†™å…¥æ–‡ä»¶ã€‚ æ­¤ä»£ç åœ¨ WPF åº”ç”¨ä¸­è¿è¡Œï¼Œè¯¥åº”ç”¨å…·æœ‰åä¸º UserInput çš„ TextBlock å’Œå·²æŒ‚æ¥åˆ°åä¸º Button_Click çš„ Click äº‹ä»¶å¤„ç†ç¨‹åºçš„æŒ‰é’®ã€‚ æ–‡ä»¶è·¯å¾„éœ€è¦æ›´æ”¹ä¸ºè®¡ç®—æœºä¸Šå­˜åœ¨çš„æ–‡ä»¶ã€‚</p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.IO;\n\nnamespace WpfApplication1\n{\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n\n        private async void Button_Click(object sender, RoutedEventArgs e)\n        {\n            UnicodeEncoding uniencoding = new UnicodeEncoding();\n            string filename = @\"c:\\Users\\exampleuser\\Documents\\userinputlog.txt\";\n\n            byte[] result = uniencoding.GetBytes(UserInput.Text);\n\n            using (FileStream SourceStream = File.Open(filename, FileMode.OpenOrCreate))\n            {\n                SourceStream.Seek(0, SeekOrigin.End);\n                await SourceStream.WriteAsync(result, 0, result.Length);\n            }\n        }\n    }\n}\n</code></pre>\n<h4><a id=\"__147\"></a>â™‰ æ„é€ å‡½æ•°</h4>\n<p>åˆå§‹åŒ– FileStream ç±»çš„æ–°å®ä¾‹</p>\n<h5><a id=\"FileStreamString_FileMode_FileAccess_FileShare_Int32_FileOptions_151\"></a>FileStream(String, FileMode, FileAccess, FileShare, Int32, FileOptions)</h5>\n<p>ä½¿ç”¨æŒ‡å®šçš„è·¯å¾„ã€åˆ›å»ºæ¨¡å¼ã€è¯»/å†™å’Œå…±äº«æƒé™ã€å…¶ä»– FileStreams å¯ä»¥å…·æœ‰çš„å¯¹æ­¤æ–‡ä»¶çš„è®¿é—®æƒé™ã€ç¼“å†²åŒºå¤§å°å’Œé™„åŠ æ–‡ä»¶é€‰é¡¹åˆå§‹åŒ– <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»çš„æ–°å®ä¾‹ã€‚</p>\n<pre><code class=\"prism language-C#\">public FileStream (string path, System.IO.FileMode mode, System.IO.FileAccess access, System.IO.FileShare share, int bufferSize, System.IO.FileOptions options);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>path</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.string?view=net-6.0\">String</a></p>\n<p>å½“å‰ <code>FileStream</code> å¯¹è±¡å°†å°è£…çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚</p>\n<p><code>mode</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filemode?view=net-6.0\">FileMode</a></p>\n<p>ç”¨äºç¡®å®šæ–‡ä»¶çš„æ‰“å¼€æˆ–åˆ›å»ºæ–¹å¼çš„æšä¸¾å€¼ä¹‹ä¸€ã€‚</p>\n<p><code>access</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.fileaccess?view=net-6.0\">FileAccess</a></p>\n<p>æšä¸¾å€¼çš„æŒ‰ä½ç»„åˆï¼Œè¿™äº›æšä¸¾å€¼ç¡®å®š <code>FileStream</code> å¯¹è±¡è®¿é—®æ–‡ä»¶çš„æ–¹å¼ã€‚ è¯¥å¸¸æ•°è¿˜å¯ä»¥ç¡®å®šç”± <code>FileStream</code> å¯¹è±¡çš„ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canread?view=net-6.0#system-io-filestream-canread\">CanRead</a> å’Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canwrite?view=net-6.0#system-io-filestream-canwrite\">CanWrite</a> å±æ€§è¿”å›çš„å€¼ã€‚ å¦‚æœ <code>path</code> æŒ‡å®šç£ç›˜æ–‡ä»¶ï¼Œåˆ™ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canseek?view=net-6.0#system-io-filestream-canseek\">CanSeek</a> ä¸º <code>true</code>ã€‚</p>\n<p><code>share</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.fileshare?view=net-6.0\">FileShare</a></p>\n<p>æšä¸¾å€¼çš„æŒ‰ä½ç»„åˆï¼Œè¿™äº›æšä¸¾å€¼ç¡®å®šè¿›ç¨‹å…±äº«æ–‡ä»¶çš„æ–¹å¼ã€‚</p>\n<p><code>bufferSize</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>ä¸€ä¸ªå¤§äºé›¶çš„æ­£ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a> å€¼ï¼Œè¡¨ç¤ºç¼“å†²åŒºå¤§å°ã€‚ é»˜è®¤ç¼“å†²åŒºå¤§å°ä¸º 4096ã€‚</p>\n<p><code>options</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.fileoptions?view=net-6.0\">FileOptions</a></p>\n<p>æšä¸¾å€¼çš„æŒ‰ä½ç»„åˆï¼Œå®ƒç”¨äºæŒ‡å®šå…¶ä»–æ–‡ä»¶é€‰é¡¹ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä»¥ä¸‹ç¤ºä¾‹å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ å¯¹è±¡è¯»å– <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> æ•°æ®ã€‚</p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\nusing System.Text;\nusing System.Security.AccessControl;\n\nnamespace FileSystemExample\n{\n    class FileStreamExample\n    {\n        public static void Main()\n        {\n            try\n            {\n                // Create a file and write data to it.\n\n                // Create an array of bytes.\n                byte[] messageByte = Encoding.ASCII.GetBytes(\"Here is some data.\");\n\n                // Create a file using the FileStream class.\n                FileStream fWrite = new FileStream(\"test.txt\", FileMode.Create, FileAccess.ReadWrite, FileShare.None, 8, FileOptions.None);\n\n                // Write the number of bytes to the file.\n                fWrite.WriteByte((byte)messageByte.Length);\n\n                // Write the bytes to the file.\n                fWrite.Write(messageByte, 0, messageByte.Length);\n\n                // Close the stream.\n                fWrite.Close();\n\n                // Open a file and read the number of bytes.\n\n                FileStream fRead = new FileStream(\"test.txt\", FileMode.Open);\n\n                // The first byte is the string length.\n                int length = (int)fRead.ReadByte();\n\n                // Create a new byte array for the data.\n                byte[] readBytes = new byte[length];\n\n                // Read the data from the file.\n                fRead.Read(readBytes, 0, readBytes.Length);\n\n                // Close the stream.\n                fRead.Close();\n\n                // Display the data.\n                Console.WriteLine(Encoding.ASCII.GetString(readBytes));\n\n                Console.WriteLine(\"Done writing and reading data.\");\n            }\n            catch (Exception e)\n            {\n                Console.WriteLine(e);\n            }\n\n            Console.ReadLine();\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"FileStreamString_FileMode_FileAccess_FileShare_Int32_Boolean_264\"></a>FileStream(String, FileMode, FileAccess, FileShare, Int32, Boolean)</h5>\n<p>ä½¿ç”¨æŒ‡å®šçš„è·¯å¾„ã€åˆ›å»ºæ¨¡å¼ã€è¯»/å†™å’Œå…±äº«æƒé™ã€ç¼“å†²åŒºå¤§å°å’ŒåŒæ­¥æˆ–å¼‚æ­¥çŠ¶æ€åˆå§‹åŒ– <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»çš„æ–°å®ä¾‹ã€‚</p>\n<pre><code class=\"prism language-C#\">public FileStream (string path, System.IO.FileMode mode, System.IO.FileAccess access, System.IO.FileShare share, int bufferSize, bool useAsync);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>path</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.string?view=net-6.0\">String</a></p>\n<p>å½“å‰ <code>FileStream</code> å¯¹è±¡å°†å°è£…çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚</p>\n<p><code>mode</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filemode?view=net-6.0\">FileMode</a></p>\n<p>ç”¨äºç¡®å®šæ–‡ä»¶çš„æ‰“å¼€æˆ–åˆ›å»ºæ–¹å¼çš„æšä¸¾å€¼ä¹‹ä¸€ã€‚</p>\n<p><code>access</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.fileaccess?view=net-6.0\">FileAccess</a></p>\n<p>æšä¸¾å€¼çš„æŒ‰ä½ç»„åˆï¼Œè¿™äº›æšä¸¾å€¼ç¡®å®š <code>FileStream</code> å¯¹è±¡è®¿é—®æ–‡ä»¶çš„æ–¹å¼ã€‚ è¯¥å¸¸æ•°è¿˜å¯ä»¥ç¡®å®šç”± <code>FileStream</code> å¯¹è±¡çš„ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canread?view=net-6.0#system-io-filestream-canread\">CanRead</a> å’Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canwrite?view=net-6.0#system-io-filestream-canwrite\">CanWrite</a> å±æ€§è¿”å›çš„å€¼ã€‚ å¦‚æœ <code>path</code> æŒ‡å®šç£ç›˜æ–‡ä»¶ï¼Œåˆ™ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.canseek?view=net-6.0#system-io-filestream-canseek\">CanSeek</a> ä¸º <code>true</code>ã€‚</p>\n<p><code>share</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.fileshare?view=net-6.0\">FileShare</a></p>\n<p>æšä¸¾å€¼çš„æŒ‰ä½ç»„åˆï¼Œè¿™äº›æšä¸¾å€¼ç¡®å®šè¿›ç¨‹å…±äº«æ–‡ä»¶çš„æ–¹å¼ã€‚</p>\n<p><code>bufferSize</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>ä¸€ä¸ªå¤§äºé›¶çš„æ­£ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a> å€¼ï¼Œè¡¨ç¤ºç¼“å†²åŒºå¤§å°ã€‚ é»˜è®¤ç¼“å†²åŒºå¤§å°ä¸º 4096ã€‚</p>\n<p><code>useAsync</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.boolean?view=net-6.0\">Boolean</a></p>\n<p>æŒ‡å®šä½¿ç”¨å¼‚æ­¥ I/O è¿˜æ˜¯åŒæ­¥ I/Oã€‚ ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼ŒåŸºç¡€æ“ä½œç³»ç»Ÿå¯èƒ½ä¸æ”¯æŒå¼‚æ­¥ I/Oï¼Œå› æ­¤åœ¨æŒ‡å®š <code>true</code> åï¼Œæ ¹æ®æ‰€ç”¨å¹³å°ï¼Œå¥æŸ„å¯èƒ½åŒæ­¥æ‰“å¼€ã€‚ å½“å¼‚æ­¥æ‰“å¼€æ—¶ï¼Œ[BeginRead(Byte<a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.beginread?view=net-6.0#system-io-filestream-beginread%28system-byte%28%29-system-int32-system-int32-system-asynccallback-system-object%29\">], Int32, Int32, AsyncCallback, Object)</a> å’Œ [BeginWrite(Byte<a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.beginwrite?view=net-6.0#system-io-filestream-beginwrite%28system-byte%28%29-system-int32-system-int32-system-asynccallback-system-object%29\">], Int32, Int32, AsyncCallback, Object)</a> æ–¹æ³•åœ¨æ‰§è¡Œå¤§é‡è¯»æˆ–å†™æ—¶æ•ˆæœæ›´å¥½ï¼Œä½†å¯¹äºå°‘é‡çš„è¯»/å†™ï¼Œè¿™äº›æ–¹æ³•é€Ÿåº¦å¯èƒ½è¦æ…¢å¾—å¤šã€‚ å¦‚æœåº”ç”¨ç¨‹åºæ‰“ç®—åˆ©ç”¨å¼‚æ­¥ I/Oï¼Œå°† <code>useAsync</code> å‚æ•°è®¾ç½®ä¸º <code>true</code>ã€‚ æ­£ç¡®ä½¿ç”¨å¼‚æ­¥ I/O å¯ä»¥ä½¿åº”ç”¨ç¨‹åºçš„é€Ÿåº¦åŠ å¿« 10 å€ï¼Œä½†æ˜¯å¦‚æœåœ¨æ²¡æœ‰ä¸ºå¼‚æ­¥ I/O é‡æ–°è®¾è®¡åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹ä½¿ç”¨å¼‚æ­¥ I/Oï¼Œåˆ™å¯èƒ½ä½¿æ€§èƒ½é™ä½ 10 å€ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å°†æ•°æ®å¼‚æ­¥å†™å…¥æ–‡ä»¶ï¼Œç„¶åéªŒè¯æ•°æ®æ˜¯å¦å†™å…¥æ­£ç¡®ã€‚ <code>State</code>åˆ›å»º å¯¹è±¡ä»¥å°†ä¿¡æ¯ä»ä¸»çº¿ç¨‹ä¼ é€’åˆ° å’Œ <code>EndReadCallback</code> <code>EndWriteCallback</code> æ–¹æ³•ã€‚</p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\nusing System.Threading;\n\nclass FStream\n{\n    static void Main()\n    {\n        // Create a synchronization object that gets\n        // signaled when verification is complete.\n        ManualResetEvent manualEvent = new ManualResetEvent(false);\n\n        // Create random data to write to the file.\n        byte[] writeArray = new byte[100000];\n        new Random().NextBytes(writeArray);\n\n        FileStream fStream =\n            new FileStream(\"Test#@@#.dat\", FileMode.Create,\n            FileAccess.ReadWrite, FileShare.None, 4096, true);\n\n        // Check that the FileStream was opened asynchronously.\n        Console.WriteLine(\"fStream was {0}opened asynchronously.\",\n            fStream.IsAsync ? \"\" : \"not \");\n\n        // Asynchronously write to the file.\n        IAsyncResult asyncResult = fStream.BeginWrite(\n            writeArray, 0, writeArray.Length,\n            new AsyncCallback(EndWriteCallback),\n            new State(fStream, writeArray, manualEvent));\n\n        // Concurrently do other work and then wait\n        // for the data to be written and verified.\n        manualEvent.WaitOne(5000, false);\n    }\n\n    // When BeginWrite is finished writing data to the file, the\n    // EndWriteCallback method is called to end the asynchronous\n    // write operation and then read back and verify the data.\n    static void EndWriteCallback(IAsyncResult asyncResult)\n    {\n        State tempState = (State)asyncResult.AsyncState;\n        FileStream fStream = tempState.FStream;\n        fStream.EndWrite(asyncResult);\n\n        // Asynchronously read back the written data.\n        fStream.Position = 0;\n        asyncResult = fStream.BeginRead(\n            tempState.ReadArray, 0 , tempState.ReadArray.Length,\n            new AsyncCallback(EndReadCallback), tempState);\n\n        // Concurrently do other work, such as\n        // logging the write operation.\n    }\n\n    // When BeginRead is finished reading data from the file, the\n    // EndReadCallback method is called to end the asynchronous\n    // read operation and then verify the data.\n    static void EndReadCallback(IAsyncResult asyncResult)\n    {\n        State tempState = (State)asyncResult.AsyncState;\n        int readCount = tempState.FStream.EndRead(asyncResult);\n\n        int i = 0;\n        while(i &lt; readCount)\n        {\n            if(tempState.ReadArray[i] != tempState.WriteArray[i++])\n            {\n                Console.WriteLine(\"Error writing data.\");\n                tempState.FStream.Close();\n                return;\n            }\n        }\n        Console.WriteLine(\"The data was written to {0} and verified.\",\n            tempState.FStream.Name);\n        tempState.FStream.Close();\n\n        // Signal the main thread that the verification is finished.\n        tempState.ManualEvent.Set();\n    }\n\n    // Maintain state information to be passed to\n    // EndWriteCallback and EndReadCallback.\n    class State\n    {\n        // fStream is used to read and write to the file.\n        FileStream fStream;\n\n        // writeArray stores data that is written to the file.\n        byte[] writeArray;\n\n        // readArray stores data that is read from the file.\n        byte[] readArray;\n\n        // manualEvent signals the main thread\n        // when verification is complete.\n        ManualResetEvent manualEvent;\n\n        public State(FileStream fStream, byte[] writeArray,\n            ManualResetEvent manualEvent)\n        {\n            this.fStream   = fStream;\n            this.writeArray = writeArray;\n            this.manualEvent = manualEvent;\n            readArray = new byte[writeArray.Length];\n        }\n\n        public FileStream FStream\n        { get{ return fStream; } }\n\n        public byte[] WriteArray\n        { get{ return writeArray; } }\n\n        public byte[] ReadArray\n        { get{ return readArray; } }\n\n        public ManualResetEvent ManualEvent\n        { get{ return manualEvent; } }\n    }\n}\n</code></pre>\n<h5><a id=\"FileStreamString_FileMode_436\"></a>FileStream(String, FileMode)</h5>\n<p>ä½¿ç”¨æŒ‡å®šçš„è·¯å¾„å’Œåˆ›å»ºæ¨¡å¼åˆå§‹åŒ– <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»çš„æ–°å®ä¾‹ã€‚</p>\n<pre><code class=\"prism language-C#\">public FileStream (string path, System.IO.FileMode mode);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>path</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.string?view=net-6.0\">String</a></p>\n<p>å½“å‰ <code>FileStream</code> å¯¹è±¡å°†å°è£…çš„æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ã€‚</p>\n<p><code>mode</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filemode?view=net-6.0\">FileMode</a></p>\n<p>ç”¨äºç¡®å®šæ–‡ä»¶çš„æ‰“å¼€æˆ–åˆ›å»ºæ–¹å¼çš„æšä¸¾å€¼ä¹‹ä¸€ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•æŒ‰å­—èŠ‚å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œç„¶åéªŒè¯æ˜¯å¦å·²æ­£ç¡®å†™å…¥æ•°æ®ã€‚</p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\n\nclass FStream\n{\n    static void Main()\n    {\n        const string fileName = \"Test#@@#.dat\";\n\n        // Create random data to write to the file.\n        byte[] dataArray = new byte[100000];\n        new Random().NextBytes(dataArray);\n\n        using(FileStream\n            fileStream = new FileStream(fileName, FileMode.Create))\n        {\n            // Write the data to the file, byte by byte.\n            for(int i = 0; i &lt; dataArray.Length; i++)\n            {\n                fileStream.WriteByte(dataArray[i]);\n            }\n\n            // Set the stream position to the beginning of the file.\n            fileStream.Seek(0, SeekOrigin.Begin);\n\n            // Read and verify the data.\n            for(int i = 0; i &lt; fileStream.Length; i++)\n            {\n                if(dataArray[i] != fileStream.ReadByte())\n                {\n                    Console.WriteLine(\"Error writing data.\");\n                    return;\n                }\n            }\n            Console.WriteLine(\"The data was written to {0} \" +\n                \"and verified.\", fileStream.Name);\n        }\n    }\n}\n</code></pre>\n<h4><a id=\"__504\"></a>â™Š å±æ€§</h4>\n<h5><a id=\"CanRead__506\"></a>CanRead å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æŒ‡ç¤ºå½“å‰æµæ˜¯å¦æ”¯æŒè¯»å–çš„å€¼</h5>\n<pre><code class=\"prism language-C#\">public abstract bool CanRead { get; }\n</code></pre>\n<p><strong>ç¤ºä¾‹</strong></p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\n\nclass TestRW\n{\n    public static void Main(String[] args)\n    {\n        FileStream fs = new FileStream(\"MyFile.txt\", FileMode.OpenOrCreate, FileAccess.Read);\n        if (fs.CanRead &amp;&amp; fs.CanWrite)\n        {\n            Console.WriteLine(\"MyFile.txt can be both written to and read from.\");\n        }\n        else if (fs.CanRead)\n        {\n            Console.WriteLine(\"MyFile.txt is not writable.\");\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"CanWrite__535\"></a>CanWrite å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æŒ‡ç¤ºå½“å‰æµæ˜¯å¦æ”¯æŒå†™å…¥åŠŸèƒ½çš„å€¼</h5>\n<pre><code class=\"prism language-C#\">public abstract bool CanWrite { get; }\n</code></pre>\n<p><strong>ç¤ºä¾‹</strong></p>\n<pre><code class=\"prism language-c#\">using System;\nusing System.IO;\n\nclass TestRW\n{\n  public static void Main(String[] args)\n  {\n    FileStream fs = new FileStream(\"MyFile.txt\", FileMode.OpenOrCreate,\n       FileAccess.Write);\n    if (fs.CanRead &amp;&amp; fs.CanWrite) {\n        Console.WriteLine(\"MyFile.txt can be both written to and read from.\");\n    }\n    else if (fs.CanWrite) {\n        Console.WriteLine(\"MyFile.txt is writable.\");\n    }\n  }\n}\n//This code outputs \"MyFile.txt is writable.\"\n//To get the output message \"MyFile.txt can be both written to and read from.\",\n//change the FileAccess parameter to ReadWrite in the FileStream constructor.\n</code></pre>\n<h5><a id=\"Length__566\"></a>Length å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œè·å–æµé•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰</h5>\n<pre><code class=\"prism language-C#\">public abstract long Length { get; }\n</code></pre>\n<h4><a id=\"__572\"></a>â™Œ å¸¸ç”¨æ–¹æ³•</h4>\n<h5><a id=\"Close__574\"></a>Close() å…³é—­å½“å‰æµå¹¶é‡Šæ”¾ä¸ä¹‹å…³è”çš„æ‰€æœ‰èµ„æºï¼ˆå¦‚å¥—æ¥å­—å’Œæ–‡ä»¶å¥æŸ„ï¼‰</h5>\n<pre><code class=\"prism language-C#\">public virtual void Close ();\n</code></pre>\n<blockquote>\n<p>æ³¨æ„ï¼šæ­¤æ–¹æ³•è°ƒç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.dispose?view=net-6.0\">Dispose</a> ï¼ŒæŒ‡å®š <code>true</code> ä»¥é‡Šæ”¾æ‰€æœ‰èµ„æºã€‚ ä¸éœ€è¦ä¸“é—¨è°ƒç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.close?view=net-6.0\">Close</a> æ–¹æ³•ã€‚ è¯·ç¡®ä¿ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a> å·²æ­£ç¡®é‡Šæ”¾æ¯ä¸ªå¯¹è±¡ã€‚ å¯ä»¥ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a> <code>using</code> <code>Using</code> åœ¨ Visual Basic) ä¸­ (æˆ–å—ä¸­å£°æ˜å¯¹è±¡ï¼Œä»¥ç¡®ä¿é‡Šæ”¾æµåŠå…¶æ‰€æœ‰èµ„æºï¼Œæˆ–è€…å¯ä»¥æ˜¾å¼è°ƒç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.dispose?view=net-6.0\">Dispose</a> æ–¹æ³•ã€‚</p>\n</blockquote>\n<h5><a id=\"CopyToStream__582\"></a>CopyTo(Stream) ä»å½“å‰æµä¸­è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€æµä¸­</h5>\n<pre><code class=\"prism language-C#\">public void CopyTo (System.IO.Stream destination);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>destination</code></p>\n<p><strong>Stream</strong></p>\n<p>å½“å‰æµçš„å†…å®¹å°†å¤åˆ¶åˆ°çš„æµã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹å°†çš„å†…å®¹å¤åˆ¶ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> åˆ° <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.memorystream?view=net-6.0\">MemoryStream</a> ä¸­ã€‚</p>\n<pre><code class=\"prism language-C#\">// Create the streams.\nMemoryStream destination = new MemoryStream();\n\nusing (FileStream source = File.Open(@\"c:\\temp\\data.dat\",\n    FileMode.Open))\n{\n\n    Console.WriteLine(\"Source length: {0}\", source.Length.ToString());\n\n    // Copy source to destination.\n    source.CopyTo(destination);\n}\n\nConsole.WriteLine(\"Destination length: {0}\", destination.Length.ToString());\n</code></pre>\n<h5><a id=\"CopyToStream_Int32__618\"></a>CopyTo(Stream, Int32) ä½¿ç”¨æŒ‡å®šçš„ç¼“å†²åŒºå¤§å°ï¼Œä»å½“å‰æµä¸­è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€æµä¸­</h5>\n<pre><code class=\"prism language-C#\">public virtual void CopyTo (System.IO.Stream destination, int bufferSize);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>destination</code></p>\n<p><strong>Stream</strong></p>\n<p>å½“å‰æµçš„å†…å®¹å°†å¤åˆ¶åˆ°çš„æµã€‚</p>\n<p><code>bufferSize</code></p>\n<p><strong>Int</strong></p>\n<p>ç¼“å†²åŒºçš„å¤§å°ã€‚ æ­¤å€¼å¿…é¡»å¤§äºé›¶ã€‚ é»˜è®¤å¤§å°ä¸º 81920ã€‚</p>\n</blockquote>\n<h5><a id=\"CopyToAsyncStream__638\"></a>CopyToAsync(Stream) ä»å½“å‰æµä¸­å¼‚æ­¥è¯»å–å­—èŠ‚å¹¶å°†å…¶å†™å…¥åˆ°å¦ä¸€ä¸ªæµä¸­</h5>\n<pre><code class=\"prism language-C#\">public System.Threading.Tasks.Task CopyToAsync (System.IO.Stream destination);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>destination</code></p>\n<p><strong>Stream</strong></p>\n<p>å½“å‰æµçš„å†…å®¹å°†å¤åˆ¶åˆ°çš„æµã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ä¸¤ä¸ª <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> å¯¹è±¡å°†æ–‡ä»¶ä»ä¸€ä¸ªç›®å½•å¼‚æ­¥å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•ã€‚ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»æ˜¯ä» <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a> ç±»æ´¾ç”Ÿçš„ã€‚ è¯·æ³¨æ„ï¼Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.web.ui.webcontrols.button.click?view=net-6.0\">Click</a> æ§ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åº <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.windows.controls.button?view=net-6.0\">Button</a> ä½¿ç”¨ä¿®é¥°ç¬¦æ ‡è®°ï¼Œ <code>async</code> å› ä¸ºå®ƒè°ƒç”¨å¼‚æ­¥æ–¹æ³•</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.Threading.Tasks;\nusing System.Windows;\nusing System.IO;\n\nnamespace WpfApplication\n{\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n\n        private async void Button_Click(object sender, RoutedEventArgs e)\n        {\n            string StartDirectory = @\"c:\\Users\\exampleuser\\start\";\n            string EndDirectory = @\"c:\\Users\\exampleuser\\end\";\n\n            foreach (string filename in Directory.EnumerateFiles(StartDirectory))\n            {\n                using (FileStream SourceStream = File.Open(filename, FileMode.Open))\n                {\n                    using (FileStream DestinationStream = File.Create(EndDirectory + filename.Substring(filename.LastIndexOf('\\\\'))))\n                    {\n                        await SourceStream.CopyToAsync(DestinationStream);\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.copytoasync?view=net-6.0\">CopyToAsync</a>æ–¹æ³•ä½¿ä½ å¯ä»¥åœ¨ä¸é˜»å¡ä¸»çº¿ç¨‹çš„æƒ…å†µä¸‹æ‰§è¡Œå ç”¨å¤§é‡èµ„æºçš„ i/o æ“ä½œã€‚</p>\n</blockquote>\n<h5><a id=\"Dispose__Stream__693\"></a>Dispose() é‡Šæ”¾ç”± Stream ä½¿ç”¨çš„æ‰€æœ‰èµ„æº</h5>\n<pre><code class=\"prism language-C#\">public void Dispose ();\n</code></pre>\n<h5><a id=\"ReadByte_Int32_Int32__699\"></a>Read(Byte[], Int32, Int32) å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œä»å½“å‰æµè¯»å–å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æ­¤æµä¸­çš„ä½ç½®æå‡è¯»å–çš„å­—èŠ‚æ•°</h5>\n<pre><code class=\"prism language-C#\">public abstract int Read (byte[] buffer, int offset, int count);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>buffer</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.byte?view=net-6.0\">Byte</a>[]</p>\n<p>å­—èŠ‚æ•°ç»„ã€‚ å½“æ­¤æ–¹æ³•è¿”å›æ—¶ï¼Œæ­¤ç¼“å†²åŒºåŒ…å«æŒ‡å®šçš„å­—ç¬¦æ•°ç»„ï¼Œæ­¤æ•°ç»„ä¸­ <code>offset</code> å’Œ (<code>offset</code> + <code>count</code> - 1) ä¹‹é—´çš„å€¼è¢«ä»å½“å‰æºä¸­è¯»å–çš„å­—èŠ‚æ‰€æ›¿æ¢ã€‚</p>\n<p><code>offset</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p><code>buffer</code> ä¸­çš„ä»é›¶å¼€å§‹çš„å­—èŠ‚åç§»é‡ï¼Œä»æ­¤å¤„å¼€å§‹å­˜å‚¨ä»å½“å‰æµä¸­è¯»å–çš„æ•°æ®ã€‚</p>\n<p><code>count</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>è¦ä»å½“å‰æµä¸­æœ€å¤šè¯»å–çš„å­—èŠ‚æ•°ã€‚</p>\n</blockquote>\n<p><strong>è¿”å›</strong></p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>è¯»å…¥ç¼“å†²åŒºä¸­çš„æ€»å­—èŠ‚æ•°ã€‚ å¦‚æœå¾ˆå¤šå­—èŠ‚å½“å‰ä¸å¯ç”¨ï¼Œåˆ™æ€»å­—èŠ‚æ•°å¯èƒ½å°äºè¯·æ±‚çš„å­—èŠ‚æ•°ï¼›å¦‚æœå·²åˆ°è¾¾æµç»“å°¾ï¼Œåˆ™ä¸ºé›¶ (0)ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.read?view=net-6.0\">Read</a> è¯»å–æ•°æ®å—ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.IO;\n\npublic class Block\n{\n    public static void Main()\n    {\n        Stream s = new MemoryStream();\n        for (int i = 0; i &lt; 122; i++)\n        {\n            s.WriteByte((byte)i);\n        }\n        s.Position = 0;\n\n        // Now read s into a byte buffer with a little padding.\n        byte[] bytes = new byte[s.Length + 10];\n        int numBytesToRead = (int)s.Length;\n        int numBytesRead = 0;\n        do\n        {\n            // Read may return anything from 0 to 10.\n            int n = s.Read(bytes, numBytesRead, 10);\n            numBytesRead += n;\n            numBytesToRead -= n;\n        } while (numBytesToRead &gt; 0);\n        s.Close();\n\n        Console.WriteLine(\"number of bytes read: {0:d}\", numBytesRead);\n    }\n}\n</code></pre>\n<blockquote>\n<p>ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.canread?view=net-6.0\">CanRead</a> å±æ€§ç¡®å®šå½“å‰å®ä¾‹æ˜¯å¦æ”¯æŒè¯»å–ã€‚ ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.readasync?view=net-6.0\">ReadAsync</a> æ–¹æ³•ä»å½“å‰æµå¼‚æ­¥è¯»å–ã€‚</p>\n<p>æ­¤æ–¹æ³•çš„å®ç°ä»å½“å‰æµä¸­è¯»å–æœ€å¤§å­—èŠ‚ <code>count</code> æ•°ï¼Œå¹¶å­˜å‚¨ä» <code>buffer</code> å¼€å§‹çš„å­—èŠ‚ <code>offset</code> ã€‚ æµä¸­çš„å½“å‰ä½ç½®æŒ‰è¯»å–çš„å­—èŠ‚æ•°è¿›è¡Œé«˜çº§;ä½†æ˜¯ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æµä¸­çš„å½“å‰ä½ç½®ä¿æŒä¸å˜ã€‚ å®ç°è¿”å›è¯»å–çš„å­—èŠ‚æ•°ã€‚ åœ¨æ²¡æœ‰ä»»ä½•æ•°æ®å¯ç”¨æ—¶ï¼Œå®ç°å°†ä¸€ç›´é˜»æ­¢ï¼Œç›´åˆ°è‡³å°‘å¯ä»¥è¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.read?view=net-6.0\">Read</a> ä»…åœ¨æµä¸­æ²¡æœ‰æ›´å¤šæ•°æ®ä¸”é¢„æœŸæ²¡æœ‰æ›´å¤šæ•°æ®ï¼ˆä¾‹å¦‚å…³é—­å¥—æ¥å­—æˆ–æ–‡ä»¶ç»“å°¾ï¼‰ (è¿”å› 0) ã€‚ å³ä½¿å°šæœªåˆ°è¾¾æµçš„æœ«å°¾ï¼Œå®ç°ä¹Ÿèƒ½å¤Ÿè¿”å›æ¯”è¯·æ±‚çš„æ›´å°‘çš„å­—èŠ‚ã€‚</p>\n</blockquote>\n<h5><a id=\"ReadAsyncByte_Int32_Int32__772\"></a>ReadAsync(Byte[], Int32, Int32) ä»å½“å‰æµå¼‚æ­¥è¯»å–å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æµä¸­çš„ä½ç½®æå‡è¯»å–çš„å­—èŠ‚æ•°</h5>\n<pre><code class=\"prism language-C#\">public System.Threading.Tasks.Task&lt;int&gt; ReadAsync (byte[] buffer, int offset, int count);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>buffer</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.byte?view=net-6.0\">Byte</a>[]</p>\n<p>è¦å†™å…¥æ•°æ®çš„ç¼“å†²åŒºã€‚</p>\n<p><code>offset</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p><code>buffer</code> ä¸­çš„å­—èŠ‚åç§»é‡ï¼Œä»è¯¥åç§»é‡å¼€å§‹å†™å…¥ä»æµä¸­è¯»å–çš„æ•°æ®ã€‚</p>\n<p><code>count</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>æœ€å¤šè¯»å–çš„å­—èŠ‚æ•°ã€‚</p>\n</blockquote>\n<p><strong>è¿”å›</strong></p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1?view=net-6.0\">Task</a>&lt;<a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a>&gt;</p>\n<p>è¡¨ç¤ºå¼‚æ­¥è¯»å–æ“ä½œçš„ä»»åŠ¡ã€‚ <code>TResult</code> å‚æ•°çš„å€¼åŒ…å«è¯»å…¥ç¼“å†²åŒºçš„æ€»å­—èŠ‚æ•°ã€‚ å¦‚æœå½“å‰å¯ç”¨å­—èŠ‚æ•°å°‘äºæ‰€è¯·æ±‚çš„å­—èŠ‚æ•°ï¼Œåˆ™è¯¥ç»“æœå€¼å¯å°äºæ‰€è¯·æ±‚çš„å­—èŠ‚æ•°ï¼›å¦‚æœå·²åˆ°è¾¾æµç»“å°¾æ—¶ï¼Œåˆ™ä¸º 0ï¼ˆé›¶ï¼‰ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä»¥å¼‚æ­¥æ–¹å¼ä»æ–‡ä»¶è¯»å–ã€‚ è¯¥ç¤ºä¾‹ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»ï¼Œè¯¥ç±»æ´¾ç”Ÿè‡ª <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a> ç±»ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.IO;\n\nnamespace WpfApplication1\n{\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n\n        private async void Button_Click(object sender, RoutedEventArgs e)\n        {\n            string filename = @\"c:\\Temp\\userinputlog.txt\";\n            byte[] result;\n\n            using (FileStream SourceStream = File.Open(filename, FileMode.Open))\n            {\n                result = new byte[SourceStream.Length];\n                await SourceStream.ReadAsync(result, 0, (int)SourceStream.Length);\n            }\n\n            UserInput.Text = System.Text.Encoding.ASCII.GetString(result);\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"ReadByte__842\"></a>ReadByte() ä»æ–‡ä»¶ä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œå¹¶å°†è¯»å–ä½ç½®æå‡ä¸€ä¸ªå­—èŠ‚</h5>\n<pre><code class=\"prism language-C#\">public override int ReadByte ();\n</code></pre>\n<p><strong>è¿”å›</strong></p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>å¼ºåˆ¶è½¬æ¢ä¸º <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a> çš„å­—èŠ‚ï¼›æˆ–è€…å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾ï¼Œåˆ™ä¸º -1ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•æŒ‰å­—èŠ‚å°†æ•°æ®å†™å…¥æ–‡ä»¶ï¼Œç„¶åéªŒè¯æ˜¯å¦å·²æ­£ç¡®å†™å…¥æ•°æ®ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.IO;\n\nclass FStream\n{\n    static void Main()\n    {\n        const string fileName = \"Test#@@#.dat\";\n\n        // Create random data to write to the file.\n        byte[] dataArray = new byte[100000];\n        new Random().NextBytes(dataArray);\n\n        using(FileStream\n            fileStream = new FileStream(fileName, FileMode.Create))\n        {\n            // Write the data to the file, byte by byte.\n            for(int i = 0; i &lt; dataArray.Length; i++)\n            {\n                fileStream.WriteByte(dataArray[i]);\n            }\n\n            // Set the stream position to the beginning of the file.\n            fileStream.Seek(0, SeekOrigin.Begin);\n\n            // Read and verify the data.\n            for(int i = 0; i &lt; fileStream.Length; i++)\n            {\n                if(dataArray[i] != fileStream.ReadByte())\n                {\n                    Console.WriteLine(\"Error writing data.\");\n                    return;\n                }\n            }\n            Console.WriteLine(\"The data was written to {0} \" +\n                \"and verified.\", fileStream.Name);\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"WriteByte_Int32_Int32__900\"></a>Write(Byte[], Int32, Int32) å½“åœ¨æ´¾ç”Ÿç±»ä¸­é‡å†™æ—¶ï¼Œå‘å½“å‰æµä¸­å†™å…¥å­—èŠ‚åºåˆ—ï¼Œå¹¶å°†æ­¤æµä¸­çš„å½“å‰ä½ç½®æå‡å†™å…¥çš„å­—èŠ‚æ•°</h5>\n<pre><code class=\"prism language-C#\">public abstract void Write (byte[] buffer, int offset, int count);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>buffer</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.byte?view=net-6.0\">Byte</a>[]</p>\n<p>å­—èŠ‚æ•°ç»„ã€‚ æ­¤æ–¹æ³•å°† <code>count</code> ä¸ªå­—èŠ‚ä» <code>buffer</code> å¤åˆ¶åˆ°å½“å‰æµã€‚</p>\n<p><code>offset</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p><code>buffer</code> ä¸­çš„ä»é›¶å¼€å§‹çš„å­—èŠ‚åç§»é‡ï¼Œä»æ­¤å¤„å¼€å§‹å°†å­—èŠ‚å¤åˆ¶åˆ°å½“å‰æµã€‚</p>\n<p><code>count</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>è¦å†™å…¥å½“å‰æµçš„å­—èŠ‚æ•°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.canwrite?view=net-6.0\">CanWrite</a> å±æ€§ç¡®å®šå½“å‰å®ä¾‹æ˜¯å¦æ”¯æŒå†™å…¥ã€‚ ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.writeasync?view=net-6.0\">WriteAsync</a> æ–¹æ³•å¼‚æ­¥å†™å…¥å½“å‰æµã€‚</p>\n<p>å¦‚æœå†™å…¥æ“ä½œæˆåŠŸï¼Œåˆ™æµä¸­çš„ä½ç½®å°†æŒ‰å†™å…¥çš„å­—èŠ‚æ•°å‰è¿›ã€‚ å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ™æµä¸­çš„ä½ç½®ä¿æŒä¸å˜ã€‚</p>\n</blockquote>\n<h5><a id=\"WriteAsyncByte_Int32_Int32__930\"></a>WriteAsync(Byte[], Int32, Int32) å°†å­—èŠ‚åºåˆ—å¼‚æ­¥å†™å…¥å½“å‰æµï¼Œå¹¶å°†æµçš„å½“å‰ä½ç½®æå‡å†™å…¥çš„å­—èŠ‚æ•°</h5>\n<pre><code class=\"prism language-C#\">public System.Threading.Tasks.Task WriteAsync (byte[] buffer, int offset, int count);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>buffer</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.byte?view=net-6.0\">Byte</a>[]</p>\n<p>ä»ä¸­å†™å…¥æ•°æ®çš„ç¼“å†²åŒºã€‚</p>\n<p><code>offset</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p><code>buffer</code> ä¸­çš„ä»é›¶å¼€å§‹çš„å­—èŠ‚åç§»é‡ï¼Œä»æ­¤å¤„å¼€å§‹å°†å­—èŠ‚å¤åˆ¶åˆ°è¯¥æµã€‚</p>\n<p><code>count</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int32?view=net-6.0\">Int32</a></p>\n<p>æœ€å¤šå†™å…¥çš„å­—èŠ‚æ•°ã€‚</p>\n</blockquote>\n<p><strong>è¿”å›</strong></p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0\">Task</a></p>\n<p>è¡¨ç¤ºå¼‚æ­¥å†™å…¥æ“ä½œçš„ä»»åŠ¡ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å¼‚æ­¥å†™å…¥æ–‡ä»¶ã€‚ è¯¥ç¤ºä¾‹ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> ç±»ï¼Œè¯¥ç±»æ´¾ç”Ÿè‡ª <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream?view=net-6.0\">Stream</a> ç±»ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.Text;\nusing System.Threading.Tasks;\nusing System.Windows;\nusing System.Windows.Controls;\nusing System.IO;\n\nnamespace WpfApplication1\n{\n    public partial class MainWindow : Window\n    {\n        public MainWindow()\n        {\n            InitializeComponent();\n        }\n\n        private async void Button_Click(object sender, RoutedEventArgs e)\n        {\n            UnicodeEncoding uniencoding = new UnicodeEncoding();\n            string filename = @\"c:\\Users\\exampleuser\\Documents\\userinputlog.txt\";\n\n            byte[] result = uniencoding.GetBytes(UserInput.Text);\n\n            using (FileStream SourceStream = File.Open(filename, FileMode.OpenOrCreate))\n            {\n                SourceStream.Seek(0, SeekOrigin.End);\n                await SourceStream.WriteAsync(result, 0, result.Length);\n            }\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"WriteByteByte__1000\"></a>WriteByte(Byte) ä¸€ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶æµä¸­çš„å½“å‰ä½ç½®</h5>\n<pre><code class=\"prism language-C#\">public override void WriteByte (byte value);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>value</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.byte?view=net-6.0\">Byte</a></p>\n<p>è¦å†™å…¥æµçš„å­—èŠ‚ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•å°†æ•°æ®ä»¥å­—èŠ‚å­—èŠ‚å½¢å¼å†™å…¥æ–‡ä»¶ï¼Œç„¶åéªŒè¯æ•°æ®æ˜¯å¦å†™å…¥æ­£ç¡®ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.IO;\n\nclass FStream\n{\n    static void Main()\n    {\n        const string fileName = \"Test#@@#.dat\";\n\n        // Create random data to write to the file.\n        byte[] dataArray = new byte[100000];\n        new Random().NextBytes(dataArray);\n\n        using(FileStream\n            fileStream = new FileStream(fileName, FileMode.Create))\n        {\n            // Write the data to the file, byte by byte.\n            for(int i = 0; i &lt; dataArray.Length; i++)\n            {\n                fileStream.WriteByte(dataArray[i]);\n            }\n\n            // Set the stream position to the beginning of the file.\n            fileStream.Seek(0, SeekOrigin.Begin);\n\n            // Read and verify the data.\n            for(int i = 0; i &lt; fileStream.Length; i++)\n            {\n                if(dataArray[i] != fileStream.ReadByte())\n                {\n                    Console.WriteLine(\"Error writing data.\");\n                    return;\n                }\n            }\n            Console.WriteLine(\"The data was written to {0} \" +\n                \"and verified.\", fileStream.Name);\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"Flush__1060\"></a>Flush() æ¸…é™¤æ­¤æµçš„ç¼“å†²åŒºï¼Œä½¿å¾—æ‰€æœ‰ç¼“å†²æ•°æ®éƒ½å†™å…¥åˆ°æ–‡ä»¶ä¸­</h5>\n<pre><code class=\"prism language-C#\">public override void Flush ();\n</code></pre>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>æ­¤ä»£ç ç¤ºä¾‹æ˜¯ä¸º æ–¹æ³•æä¾›çš„è¾ƒå¤§ç¤ºä¾‹çš„ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.lock?view=net-6.0\">Lock</a> ä¸€éƒ¨åˆ†ã€‚</p>\n<pre><code class=\"prism language-C#\">// Update the file.\ncase 'W':\n    try\n    {\n        fileStream.Seek(textLength,\n            SeekOrigin.Begin);\n        fileStream.Read(\n            readText, textLength - 1, byteCount);\n        tempString = new String(\n            uniEncoding.GetChars(\n            readText, textLength - 1, byteCount));\n        recordNumber = int.Parse(tempString) + 1;\n        fileStream.Seek(\n            textLength, SeekOrigin.Begin);\n        fileStream.Write(uniEncoding.GetBytes(\n            recordNumber.ToString()),\n            0, byteCount);\n        fileStream.Flush();\n        Console.WriteLine(\n            \"Record has been updated.\");\n    }\n</code></pre>\n<blockquote>\n<p>æ­¤æ–¹æ³•é‡å†™ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.flush?view=net-6.0\">Stream.Flush</a>ã€‚</p>\n<p>è°ƒç”¨ æ–¹æ³• <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.flush?view=net-6.0\">FileStream.Flush</a> æ—¶ï¼Œä¹Ÿä¼šåˆ·æ–°æ“ä½œç³»ç»Ÿ I/O ç¼“å†²åŒºã€‚</p>\n<p>é™¤éæ˜¾å¼è°ƒç”¨æˆ–é‡Šæ”¾ å¯¹è±¡ï¼Œå¦åˆ™ä¸ä¼šåˆ·æ–° <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.flush?view=net-6.0\">Flush</a> æµçš„ç¼–ç å™¨ã€‚ è®¾ç½®ä¸º <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.streamwriter.autoflush?view=net-6.0\">StreamWriter.AutoFlush</a> <code>true</code> è¡¨ç¤ºæ•°æ®ä»ç¼“å†²åŒºåˆ·æ–°åˆ°æµï¼Œä½†ä¸åˆ·æ–°ç¼–ç å™¨çŠ¶æ€ã€‚ è¿™å…è®¸ç¼–ç å™¨ä¿ç•™å…¶çŠ¶æ€ (éƒ¨åˆ†å­—ç¬¦) ä»¥ä¾¿å®ƒå¯ä»¥æ­£ç¡®ç¼–ç ä¸‹ä¸€ä¸ªå­—ç¬¦å—ã€‚ è¿™ç§æƒ…å†µä¼šå½±å“ UTF8 å’Œ UTF7ï¼Œå…¶ä¸­æŸäº›å­—ç¬¦åªèƒ½åœ¨ç¼–ç å™¨æ”¶åˆ°ç›¸é‚»å­—ç¬¦åè¿›è¡Œç¼–ç ã€‚</p>\n<p>ç”±äºç¼“å†²åŒºå¯ç”¨äºè¯»å–æˆ–å†™å…¥ï¼Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.flush?view=net-6.0#system-io-filestream-flush\">Flush()</a> å› æ­¤ æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š</p>\n<ul><li>ä»¥å‰å†™å…¥ç¼“å†²åŒºçš„ä»»ä½•æ•°æ®éƒ½å¤åˆ¶åˆ°æ–‡ä»¶ï¼Œå¹¶ä¸”ç¼“å†²åŒºè¢«æ¸…é™¤ï¼Œä½†ç¼–ç å™¨çŠ¶æ€é™¤å¤–ã€‚</li><li>å¦‚æœ ä¸º ä¸”æ•°æ®ä»¥å‰ä»æ–‡ä»¶å¤åˆ¶åˆ°ç¼“å†²åŒºè¿›è¡Œè¯»å–ï¼Œåˆ™æ–‡ä»¶ä¸­å½“å‰ä½ç½®å°†å‡å°‘ç¼“å†²åŒºä¸­æœªè¯» <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.bufferedstream.canseek?view=net-6.0\">BufferedStream.CanSeek</a> <code>true</code> å­—èŠ‚æ•°ã€‚ ç„¶åæ¸…é™¤ç¼“å†²åŒºã€‚</li></ul>\n</blockquote>\n<h5><a id=\"FlushAsync__1105\"></a>FlushAsync() å¼‚æ­¥æ¸…é™¤æ­¤æµçš„æ‰€æœ‰ç¼“å†²åŒºå¹¶å¯¼è‡´æ‰€æœ‰ç¼“å†²æ•°æ®éƒ½å†™å…¥åŸºç¡€è®¾å¤‡ä¸­</h5>\n<pre><code class=\"prism language-C#\">public System.Threading.Tasks.Task FlushAsync ();\n</code></pre>\n<p><strong>è¿”å›</strong></p>\n<blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task?view=net-6.0\">Task</a></p>\n<p>è¡¨ç¤ºå¼‚æ­¥åˆ·æ–°æ“ä½œçš„ä»»åŠ¡ã€‚</p>\n</blockquote>\n<h5><a id=\"LockInt64_Int64__FileStream_1117\"></a>Lock(Int64, Int64) é˜²æ­¢å…¶ä»–è¿›ç¨‹è¯»å–æˆ–å†™å…¥ FileStream</h5>\n<pre><code class=\"prism language-C#\">[System.Runtime.Versioning.UnsupportedOSPlatform(\"ios\")]\n[System.Runtime.Versioning.UnsupportedOSPlatform(\"macos\")]\n[System.Runtime.Versioning.UnsupportedOSPlatform(\"tvos\")]\npublic virtual void Lock (long position, long length);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>position</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int64?view=net-6.0\">Int64</a></p>\n<p>è¦é”å®šçš„èŒƒå›´çš„èµ·å§‹å¤„ã€‚ æ­¤å‚æ•°çš„å€¼å¿…é¡»å¤§äºæˆ–ç­‰äºé›¶ (0)ã€‚</p>\n<p><code>length</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int64?view=net-6.0\">Int64</a></p>\n<p>è¦é”å®šçš„èŒƒå›´ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•é”å®šæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¾¿å¦ä¸€ä¸ªè¿›ç¨‹æ— æ³•è®¿é—®è¯¥æ–‡ä»¶çš„è¯¥éƒ¨åˆ†ï¼Œå³ä½¿å®ƒå…·æœ‰å¯¹æ–‡ä»¶çš„è¯»/å†™è®¿é—®æƒé™ã€‚ åœ¨ä¸åŒçš„å‘½ä»¤çª—å£ä¸­åŒæ—¶è¿è¡Œç¨‹åºï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„æ§åˆ¶å°è¾“å…¥é€‰é¡¹è¿›è¡Œè°ƒæŸ¥ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.IO;\nusing System.Text;\n\nclass FStreamLock\n{\n    static void Main()\n    {\n        UnicodeEncoding uniEncoding = new UnicodeEncoding();\n        string lastRecordText =\n            \"The last processed record number was: \";\n        int textLength = uniEncoding.GetByteCount(lastRecordText);\n        int recordNumber = 13;\n        int byteCount =\n            uniEncoding.GetByteCount(recordNumber.ToString());\n        string tempString;\n\n        using(FileStream fileStream = new FileStream(\n            \"Test#@@#.dat\", FileMode.OpenOrCreate,\n            FileAccess.ReadWrite, FileShare.ReadWrite))\n        {\n            // Write the original file data.\n            if(fileStream.Length == 0)\n            {\n                tempString =\n                    lastRecordText + recordNumber.ToString();\n                fileStream.Write(uniEncoding.GetBytes(tempString),\n                    0, uniEncoding.GetByteCount(tempString));\n            }\n\n            // Allow the user to choose the operation.\n            char consoleInput = 'R';\n            byte[] readText = new byte[fileStream.Length];\n            while(consoleInput != 'X')\n            {\n                Console.Write(\n                    \"\\nEnter 'R' to read, 'W' to write, 'L' to \" +\n                    \"lock, 'U' to unlock, anything else to exit: \");\n\n                if((tempString = Console.ReadLine()).Length == 0)\n                {\n                    break;\n                }\n                consoleInput = char.ToUpper(tempString[0]);\n                switch(consoleInput)\n                {\n                    // Read data from the file and\n                    // write it to the console.\n                    case 'R':\n                        try\n                        {\n                            fileStream.Seek(0, SeekOrigin.Begin);\n                            fileStream.Read(\n                                readText, 0, (int)fileStream.Length);\n                            tempString = new String(\n                                uniEncoding.GetChars(\n                                readText, 0, readText.Length));\n                            Console.WriteLine(tempString);\n                            recordNumber = int.Parse(\n                                tempString.Substring(\n                                tempString.IndexOf(':') + 2));\n                        }\n\n                        // Catch the IOException generated if the\n                        // specified part of the file is locked.\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\"{0}: The read \" +\n                                \"operation could not be performed \" +\n                                \"because the specified part of the \" +\n                                \"file is locked.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Update the file.\n                    case 'W':\n                        try\n                        {\n                            fileStream.Seek(textLength,\n                                SeekOrigin.Begin);\n                            fileStream.Read(\n                                readText, textLength - 1, byteCount);\n                            tempString = new String(\n                                uniEncoding.GetChars(\n                                readText, textLength - 1, byteCount));\n                            recordNumber = int.Parse(tempString) + 1;\n                            fileStream.Seek(\n                                textLength, SeekOrigin.Begin);\n                            fileStream.Write(uniEncoding.GetBytes(\n                                recordNumber.ToString()),\n                                0, byteCount);\n                            fileStream.Flush();\n                            Console.WriteLine(\n                                \"Record has been updated.\");\n                        }\n\n                        // Catch the IOException generated if the\n                        // specified part of the file is locked.\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The write operation could not \" +\n                                \"be performed because the specified \" +\n                                \"part of the file is locked.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Lock the specified part of the file.\n                    case 'L':\n                        try\n                        {\n                            fileStream.Lock(textLength - 1, byteCount);\n                            Console.WriteLine(\"The specified part \" +\n                                \"of file has been locked.\");\n                        }\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The specified part of file is\" +\n                                \" already locked.\", e.GetType().Name);\n                        }\n                        break;\n\n                    // Unlock the specified part of the file.\n                    case 'U':\n                        try\n                        {\n                            fileStream.Unlock(\n                                textLength - 1, byteCount);\n                            Console.WriteLine(\"The specified part \" +\n                                \"of file has been unlocked.\");\n                        }\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The specified part of file is \" +\n                                \"not locked by the current process.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Exit the program.\n                    default:\n                        consoleInput = 'X';\n                        break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h5><a id=\"UnlockInt64_Int64__1299\"></a>Unlock(Int64, Int64) å…è®¸å…¶ä»–è¿›ç¨‹è®¿é—®ä»¥å‰é”å®šçš„æŸä¸ªæ–‡ä»¶çš„å…¨éƒ¨æˆ–éƒ¨åˆ†</h5>\n<pre><code class=\"prism language-C#\">[System.Runtime.Versioning.UnsupportedOSPlatform(\"ios\")]\n[System.Runtime.Versioning.UnsupportedOSPlatform(\"macos\")]\n[System.Runtime.Versioning.UnsupportedOSPlatform(\"tvos\")]\npublic virtual void Unlock (long position, long length);\n</code></pre>\n<p><strong>å‚æ•°</strong></p>\n<blockquote>\n<p><code>position</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int64?view=net-6.0\">Int64</a></p>\n<p>è¦å–æ¶ˆé”å®šçš„èŒƒå›´çš„å¼€å§‹å¤„ã€‚</p>\n<p><code>length</code></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.int64?view=net-6.0\">Int64</a></p>\n<p>è¦å–æ¶ˆé”å®šçš„èŒƒå›´ã€‚</p>\n</blockquote>\n<p><strong>ç¤ºä¾‹</strong></p>\n<p>ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•é”å®šéƒ¨åˆ†æ–‡ä»¶ï¼Œä»¥ä¾¿å…¶ä»–è¿›ç¨‹å³ä½¿å¯¹æ–‡ä»¶å…·æœ‰è¯»/å†™è®¿é—®æƒé™ä¹Ÿæ— æ³•è®¿é—®è¯¥æ–‡ä»¶çš„è¯¥éƒ¨åˆ†ï¼Œç„¶åå¯¹è¯¥æ–‡ä»¶çš„æŒ‡å®šéƒ¨åˆ†è§£é™¤é”å®šã€‚ åœ¨ä¸åŒçš„å‘½ä»¤çª—å£ä¸­åŒæ—¶è¿è¡Œç¨‹åºï¼Œå¹¶ä½¿ç”¨ä¸åŒçš„æ§åˆ¶å°è¾“å…¥é€‰é¡¹è¿›è¡Œè°ƒæŸ¥ã€‚</p>\n<pre><code class=\"prism language-C#\">using System;\nusing System.IO;\nusing System.Text;\n\nclass FStreamLock\n{\n    static void Main()\n    {\n        UnicodeEncoding uniEncoding = new UnicodeEncoding();\n        string lastRecordText =\n            \"The last processed record number was: \";\n        int textLength = uniEncoding.GetByteCount(lastRecordText);\n        int recordNumber = 13;\n        int byteCount =\n            uniEncoding.GetByteCount(recordNumber.ToString());\n        string tempString;\n\n        using(FileStream fileStream = new FileStream(\n            \"Test#@@#.dat\", FileMode.OpenOrCreate,\n            FileAccess.ReadWrite, FileShare.ReadWrite))\n        {\n            // Write the original file data.\n            if(fileStream.Length == 0)\n            {\n                tempString =\n                    lastRecordText + recordNumber.ToString();\n                fileStream.Write(uniEncoding.GetBytes(tempString),\n                    0, uniEncoding.GetByteCount(tempString));\n            }\n\n            // Allow the user to choose the operation.\n            char consoleInput = 'R';\n            byte[] readText = new byte[fileStream.Length];\n            while(consoleInput != 'X')\n            {\n                Console.Write(\n                    \"\\nEnter 'R' to read, 'W' to write, 'L' to \" +\n                    \"lock, 'U' to unlock, anything else to exit: \");\n\n                if((tempString = Console.ReadLine()).Length == 0)\n                {\n                    break;\n                }\n                consoleInput = char.ToUpper(tempString[0]);\n                switch(consoleInput)\n                {\n                    // Read data from the file and\n                    // write it to the console.\n                    case 'R':\n                        try\n                        {\n                            fileStream.Seek(0, SeekOrigin.Begin);\n                            fileStream.Read(\n                                readText, 0, (int)fileStream.Length);\n                            tempString = new String(\n                                uniEncoding.GetChars(\n                                readText, 0, readText.Length));\n                            Console.WriteLine(tempString);\n                            recordNumber = int.Parse(\n                                tempString.Substring(\n                                tempString.IndexOf(':') + 2));\n                        }\n\n                        // Catch the IOException generated if the\n                        // specified part of the file is locked.\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\"{0}: The read \" +\n                                \"operation could not be performed \" +\n                                \"because the specified part of the \" +\n                                \"file is locked.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Update the file.\n                    case 'W':\n                        try\n                        {\n                            fileStream.Seek(textLength,\n                                SeekOrigin.Begin);\n                            fileStream.Read(\n                                readText, textLength - 1, byteCount);\n                            tempString = new String(\n                                uniEncoding.GetChars(\n                                readText, textLength - 1, byteCount));\n                            recordNumber = int.Parse(tempString) + 1;\n                            fileStream.Seek(\n                                textLength, SeekOrigin.Begin);\n                            fileStream.Write(uniEncoding.GetBytes(\n                                recordNumber.ToString()),\n                                0, byteCount);\n                            fileStream.Flush();\n                            Console.WriteLine(\n                                \"Record has been updated.\");\n                        }\n\n                        // Catch the IOException generated if the\n                        // specified part of the file is locked.\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The write operation could not \" +\n                                \"be performed because the specified \" +\n                                \"part of the file is locked.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Lock the specified part of the file.\n                    case 'L':\n                        try\n                        {\n                            fileStream.Lock(textLength - 1, byteCount);\n                            Console.WriteLine(\"The specified part \" +\n                                \"of file has been locked.\");\n                        }\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The specified part of file is\" +\n                                \" already locked.\", e.GetType().Name);\n                        }\n                        break;\n\n                    // Unlock the specified part of the file.\n                    case 'U':\n                        try\n                        {\n                            fileStream.Unlock(\n                                textLength - 1, byteCount);\n                            Console.WriteLine(\"The specified part \" +\n                                \"of file has been unlocked.\");\n                        }\n                        catch(IOException e)\n                        {\n                            Console.WriteLine(\n                                \"{0}: The specified part of file is \" +\n                                \"not locked by the current process.\",\n                                e.GetType().Name);\n                        }\n                        break;\n\n                    // Exit the program.\n                    default:\n                        consoleInput = 'X';\n                        break;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<h4><a id=\"__1481\"></a>â™ æ³¨è§£</h4>\n<p>ä½¿ç”¨ ç±»å¯ä»¥è¯»å–ã€å†™å…¥ã€æ‰“å¼€å’Œå…³é—­æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ï¼Œä»¥åŠæ“ä½œå…¶ä»–ä¸æ–‡ä»¶ç›¸å…³çš„æ“ä½œç³»ç»Ÿå¥æŸ„ï¼ŒåŒ…æ‹¬ç®¡é“ã€æ ‡å‡†è¾“å…¥å’Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> æ ‡å‡†è¾“å‡ºã€‚ å¯ä»¥ä½¿ç”¨ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.read?view=net-6.0\">Read</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.write?view=net-6.0\">Write</a> ã€ã€ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.copyto?view=net-6.0\">CopyTo</a> å’Œ æ–¹æ³•æ¥æ‰§è¡ŒåŒæ­¥æ“ä½œï¼Œæˆ–ä½¿ç”¨ ã€ã€ å’Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.flush?view=net-6.0\">Flush</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.readasync?view=net-6.0\">ReadAsync</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.writeasync?view=net-6.0\">WriteAsync</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.copytoasync?view=net-6.0\">CopyToAsync</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.flushasync?view=net-6.0\">FlushAsync</a> æ–¹æ³•æ¥æ‰§è¡Œå¼‚æ­¥æ“ä½œã€‚</p>\n<blockquote>\n<p>æ³¨æ„ï¼š</p>\n<p>æ­¤ç±»å‹å®ç° <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.idisposable?view=net-6.0\">IDisposable</a> æ¥å£ã€‚ åœ¨ä½¿ç”¨å®Œç±»å‹åï¼Œæ‚¨åº”ç›´æ¥æˆ–é—´æ¥é‡Šæ”¾ç±»å‹ã€‚ è‹¥è¦ç›´æ¥é‡Šæ”¾ç±»å‹ï¼Œè¯·åœ¨ <code>try</code>/<code>catch</code> å—ä¸­è°ƒç”¨å…¶ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.idisposable.dispose?view=net-6.0\">Dispose</a> æ–¹æ³•ã€‚ è‹¥è¦é—´æ¥é‡Šæ”¾ç±»å‹ï¼Œè¯·ä½¿ç”¨ <code>using</code>ï¼ˆåœ¨ C# ä¸­ï¼‰æˆ– <code>Using</code>ï¼ˆåœ¨ Visual Basic ä¸­ï¼‰ç­‰è¯­è¨€æ„é€ ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.idisposable?view=net-6.0\">IDisposable</a> æ¥å£ä¸»é¢˜ä¸­çš„â€œä½¿ç”¨å®ç° IDisposable çš„å¯¹è±¡â€ä¸€èŠ‚ã€‚</p>\n</blockquote>\n<p><a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.isasync?view=net-6.0\">IsAsync</a>å±æ€§æ£€æµ‹æ–‡ä»¶å¥æŸ„æ˜¯å¦å·²å¼‚æ­¥æ‰“å¼€ã€‚ ä½¿ç”¨å…·æœ‰ ã€ æˆ– å‚æ•°çš„æ„é€ å‡½æ•°åˆ›å»º ç±»çš„å®ä¾‹æ—¶ï¼Œè¯· <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStream</a> <code>isAsync</code> <code>useAsync</code> æŒ‡å®š <code>options</code> æ­¤å€¼ã€‚ å½“ å±æ€§ä¸º <code>true</code> æ—¶ï¼Œæµåˆ©ç”¨é‡å çš„ I/O ä»¥å¼‚æ­¥æ–¹å¼æ‰§è¡Œæ–‡ä»¶æ“ä½œã€‚ ä½†æ˜¯ï¼Œ <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.isasync?view=net-6.0\">IsAsync</a> å±æ€§ä¸ä¸€å®šè°ƒç”¨ <code>true</code> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.readasync?view=net-6.0\">ReadAsync</a> ã€ æˆ– <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.writeasync?view=net-6.0\">WriteAsync</a> <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.stream.copytoasync?view=net-6.0\">CopyToAsync</a> æ–¹æ³•ã€‚ å½“ å±æ€§ä¸º å¹¶ä¸”è°ƒç”¨å¼‚æ­¥è¯»å–å’Œå†™å…¥æ“ä½œæ—¶ï¼ŒUI çº¿ç¨‹ä»æœªè¢«é˜»æ­¢ï¼Œä½†å®é™… <a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream.isasync?view=net-6.0\">IsAsync</a> <code>false</code> I/O æ“ä½œæ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</p>\n<h4><a id=\"__1493\"></a>â™ æ›´å¤šæ–¹æ³•</h4>\n<blockquote>\n<p>æ›´å¤šæ–¹æ³•è¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£<a href=\"https://docs.microsoft.com/zh-cn/dotnet/api/system.io.filestream?view=net-6.0\">FileStreamç±»</a>ã€‚</p>\n</blockquote>\n<hr/>\n<blockquote>\n<p>â­å†™åœ¨ç»“å°¾ï¼š</p>\n<p>æ–‡ç« ä¸­å‡ºç°çš„ä»»ä½•é”™è¯¯è¯·å¤§å®¶æ‰¹è¯„æŒ‡å‡ºï¼Œä¸€å®šåŠæ—¶ä¿®æ”¹ã€‚</p>\n<p>å¸Œæœ›å†™åœ¨è¿™é‡Œçš„å°ä¼™ä¼´èƒ½ç»™ä¸ª<strong>ä¸‰è¿æ”¯æŒ</strong>ï¼</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}