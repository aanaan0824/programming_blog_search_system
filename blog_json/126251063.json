{"blogid": "126251063", "writerAge": "码龄2年", "writerBlogNum": "161", "writerCollect": "1780", "writerComment": "2232", "writerFan": "6325", "writerGrade": "6级", "writerIntegral": "6450", "writerName": "海底烧烤店ai", "writerProfileAdress": "writer_image\\profile_126251063.jpg", "writerRankTotal": "2402", "writerRankWeekly": "15", "writerThumb": "1716", "writerVisitNum": "407099", "blog_read_count": "6785", "blog_time": "已于 2022-08-18 08:58:59 修改", "blog_title": "【React】使用Next.js构建并部署个人博客", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>👉 <strong>TypeScript学习</strong>：<a href=\"https://blog.csdn.net/m0_51969330/category_11929325.html\">TypeScript从入门到精通</a><br/> <br/>👉 <strong>蓝桥杯真题解析</strong>：<a href=\"https://blog.csdn.net/m0_51969330/article/details/125360660?spm=1001.2014.3001.5502\">蓝桥杯Web国赛真题解析</a><br/> <br/>👉 个人简介：一个又菜又爱玩的前端小白🍬<br/> 👉 你的一键三连是我更新的最大动力❤️！<br/> <br/><font color=\"#32ca99\" face=\"黑体\" size=\"4\"> 🏆分享博主自用<strong>牛客网</strong>🏆：<a href=\"https://www.nowcoder.com/link/pc_csdncpt_hdskdai_js\">一个非常全面的面试刷题求职网站，真的超级好用🍬</a></font></p>\n</blockquote>\n<hr/>\n<h1><a id=\"_7\"></a>前言</h1>\n<p>关于博客系统，相信大家早已驾轻就熟，网上有很多以<code>markdown</code>驱动的博客框架，如<a href=\"https://www.vuepress.cn/\">vuepress</a>，<a href=\"https://hexo.io/zh-cn/\">hexo</a>等，这类框架的本质是生成静态站点，而个人开发的博客系统大多是使用数据库的<strong>全栈项目</strong>，这两种方式各有各的好处，这里就不做比较了</p>\n<p>这篇文章我们将自己独立去开发并部署一个以<code>markdown</code>驱动的<strong>静态站点博客</strong>，所用技术栈如下：</p>\n<ul><li><code>React</code></li><li><code>TypeScript</code></li><li><code>Next.js</code></li><li><code>tailwindcss</code></li><li><code>Vercel</code>部署</li></ul>\n<blockquote>\n<p><strong>注意：</strong> 本文只是演示使用<code>Next.js</code>从0到1构建并部署一个个人博客项目，不会对项目构建过程中所用到的技术做详细的讲解，不过不用担心，只要跟着文章一步一步来，小白都能成功部署自己的个人博客！</p>\n</blockquote>\n<p>项目仓库地址：<a href=\"https://next-blog-eosin-six.vercel.app/\">https://github.com/Chen0807AiLJX/next-blog</a><br/> 最终效果可见：<a href=\"https://next-blog-eosin-six.vercel.app/\">https://next-blog-eosin-six.vercel.app/</a></p>\n<p>现在让我们开始吧！</p>\n<blockquote>\n<p>开始之前请确保自己电脑上配置的有<code>Node.js 12.13.0</code> 或更高版本。</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#_7\">前言</a></li><li><a href=\"#1Nextjs_34\">1、创建Next.js项目</a></li><li><a href=\"#2tailwindcss_53\">2、安装tailwindcss</a></li><li><a href=\"#3_80\">3、添加布局页面</a></li><li><a href=\"#4markdown_172\">4、新建markdown文章</a></li><li><a href=\"#5markdown_195\">5、解析markdown内容</a></li><li><a href=\"#6_319\">6、添加首页</a></li><li><a href=\"#7_441\">7、添加文章详情页面</a></li><li><a href=\"#8Vercel_505\">8、Vercel部署</a></li><li><a href=\"#_564\">结语</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"1Nextjs_34\"></a>1、创建Next.js项目</h1>\n<p>要创建 <code>Next.js</code> 应用程序，请打开终端，<code>cd</code>进入到要在其中创建应用程序的目录，然后运行以下命令：</p>\n<pre><code class=\"prism language-bash\">npx create-next-app@latest --typescript ailjx-blog\n</code></pre>\n<blockquote>\n<p>上述代码表示：通过<code>create-next-app</code>创建名为<code>ailjx-blog</code>的<code>TypeScript</code>版本的<code>Next.js</code>应用程序</p>\n</blockquote>\n<p>用<code>vscode</code>打开<code>ailjx-blog</code>项目，目录结构如下：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\1fa08a47523045c1b476a482893988a5.png\"/></p>\n<p>在项目根目录终端运行以下命令<strong>启动项目</strong>：</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">npm</span> run dev\n</code></pre>\n<p>打开<a href=\"http://localhost:3000/\">http://localhost:3000/</a>显示如下页面：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\efedb3e347284901a9c1eb15a99946dc.png\"/></p>\n<h1><a id=\"2tailwindcss_53\"></a>2、安装tailwindcss</h1>\n<p>在项目根目录终端运行以下命令：</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -D tailwindcss@latest postcss@latest autoprefixer@latest\n</code></pre>\n<p>生成<code>tailwindcss</code>配置文件：</p>\n<pre><code class=\"prism language-bash\">npx tailwindcss init -p \n</code></pre>\n<p>此时项目里会多出两个文件：<code>tailwind.config.js</code>和<code>postcss.config.js</code></p>\n<p>修改<code>tailwind.config.js</code>文件里的<code>content</code>为：</p>\n<pre><code class=\"prism language-typescript\">    content<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token string\">\"./pages/**/*.{js,ts,jsx,tsx}\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"./components/**/*.{js,ts,jsx,tsx}\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">\"./styles/**/*.css\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre>\n<p>在<code>pages</code>文件夹下的<code>_app.tsx</code>文件的第一行添加：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"tailwindcss/tailwind.css\"</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>之后重新启动项目</p>\n<h1><a id=\"3_80\"></a>3、添加布局页面</h1>\n<p>准备一张自己的头像（建议比例为1:1，这里演示用的头像文件名为<code>author.jpg</code>）</p>\n<p>在<code>public</code>文件夹下新建<code>images</code>文件夹，将你的头像图片放入其中，并删除<code>public</code>文件夹下的<code>svg</code>文件</p>\n<blockquote>\n<p><code>public</code>文件为项目的静态文件，可直接通过地址访问，如访问演示所用头像：<code>http://localhost:3000/images/author.jpg</code></p>\n</blockquote>\n<p>项目根目录下新建<code>components</code>文件夹，并添加布局文件<code>layout.tsx</code>：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> Head <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/head\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Image <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/image\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> name <span class=\"token operator\">=</span> <span class=\"token string\">\"Ailjx\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 名称，根据需要修改</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> siteTitle <span class=\"token operator\">=</span> <span class=\"token string\">\"Ailjx Blog\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 网站标题，根据需要修改</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{<!-- --></span>\n    children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n    home<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Layout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> children<span class=\"token punctuation\">,</span> home <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'max-w-2xl mx-auto px-4 mt-12 mb-24'</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>link rel<span class=\"token operator\">=</span><span class=\"token string\">'icon'</span> href<span class=\"token operator\">=</span><span class=\"token string\">'/favicon.ico'</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">'description'</span> content<span class=\"token operator\">=</span><span class=\"token string\">'AiljxBlog——Ailjx的博客'</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>meta\n                    property<span class=\"token operator\">=</span><span class=\"token string\">'og:image'</span>\n                    content<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://og-image.vercel.app/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span><span class=\"token function\">encodeURI</span><span class=\"token punctuation\">(</span>\n                        siteTitle\n                    <span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">'og:title'</span> content<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>siteTitle<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">'twitter:card'</span> content<span class=\"token operator\">=</span><span class=\"token string\">'summary_large_image'</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>header className<span class=\"token operator\">=</span><span class=\"token string\">'flex flex-col items-center'</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{<!-- --></span>home <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>Image\n                            priority\n                            src<span class=\"token operator\">=</span><span class=\"token string\">'/images/author.jpg'</span>\n                            className<span class=\"token operator\">=</span><span class=\"token string\">'rounded-full'</span>\n                            height<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">144</span><span class=\"token punctuation\">}</span>\n                            width<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">144</span><span class=\"token punctuation\">}</span>\n                            alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">}</span>\n                        <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token string\">'text-5xl font-extrabold tracking-tighter my-4'</span><span class=\"token operator\">&gt;</span>\n                            <span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">}</span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">'/'</span><span class=\"token operator\">&gt;</span>\n                            <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span>Image\n                                    priority\n                                    src<span class=\"token operator\">=</span><span class=\"token string\">'/images/author.jpg'</span>\n                                    className<span class=\"token operator\">=</span><span class=\"token string\">'rounded-full'</span>\n                                    height<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">108</span><span class=\"token punctuation\">}</span>\n                                    width<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">108</span><span class=\"token punctuation\">}</span>\n                                    alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">}</span>\n                                <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>h2 className<span class=\"token operator\">=</span><span class=\"token string\">'text-2xl my-4'</span><span class=\"token operator\">&gt;</span>\n                            <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">'/'</span><span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">&gt;</span>\n                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>main<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>children<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>main<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{<!-- --></span><span class=\"token operator\">!</span>home <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'mt-12'</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">'/'</span><span class=\"token operator\">&gt;</span>\n                        <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">&gt;</span>← 返回首页<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>这里使用了几个<code>Next</code>自带的组件：</p>\n<ul><li><code>Head</code>：向<code>Html</code>页面的<code>head</code>内添加内容，里面内容自己根据需要修改</li><li><code>Image</code>：渲染图像的组件，<code>src</code>地址修改为自己头像的地址</li><li><code>Link</code> ：页面间跳转组件</li></ul>\n<h1><a id=\"4markdown_172\"></a>4、新建markdown文章</h1>\n<p>项目根目录下新建<code>posts</code>文件夹，添加一个<code>markdown</code>文件，如：</p>\n<p><code>欢迎来到我的博客.md</code></p>\n<pre><code class=\"prism language-bash\">---\ntitle: <span class=\"token string\">\"欢迎来到我的博客\"</span>\ndate: <span class=\"token string\">\"2022-08-08\"</span>\n---\n\n<span class=\"token comment\">## 欢迎你！</span>\n</code></pre>\n<p><strong>注意：</strong> 需要在每个<code>markdown</code>文件的顶部通过<code>---</code>添加<strong>元数据</strong>，元数据需要有<code>title</code>字段表示文章标题，<code>date</code>字段表示日期，如上面<code>欢迎来到我的博客.md</code>的元数据为：</p>\n<pre><code class=\"prism language-bash\">---\ntitle: <span class=\"token string\">\"欢迎来到我的博客\"</span>\ndate: <span class=\"token string\">\"2022-08-08\"</span>\n---\n</code></pre>\n<p>这些数据在我们渲染<code>markdown</code>内容时需要用到</p>\n<h1><a id=\"5markdown_195\"></a>5、解析markdown内容</h1>\n<p>需要安装以下插件：</p>\n<ul><li><code>remark-prism</code>：代码高亮插件</li><li><code>date-fns</code>：处理日期</li><li><code>gray-matter</code>：获取<strong>元数据</strong></li><li><code>next-mdx-remote</code>：用于解析和渲染<code>markdown</code>内容</li><li><code>remark-external-links</code>：对<code>markdown</code>内的链接添加<code>rel</code>和<code>target</code>，使其能够在新页面打开</li></ul>\n<p>在项目根目录终端运行以下命令安装上述插件：</p>\n<pre><code class=\"prism language-bash\"> <span class=\"token function\">npm</span> i remark-prism date-fns gray-matter next-mdx-remote remark-external-links\n</code></pre>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">npm</span> i @types/remark-prism --D\n</code></pre>\n<p>在项目根目录新建存放工具函数的<code>utils</code>文件夹，里面新建处理<code>markdown</code>文件的<code>posts.ts</code>：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> fs <span class=\"token keyword\">from</span> <span class=\"token string\">\"fs\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> path <span class=\"token keyword\">from</span> <span class=\"token string\">\"path\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// gray-matter：获取元数据</span>\n<span class=\"token keyword\">import</span> matter <span class=\"token keyword\">from</span> <span class=\"token string\">\"gray-matter\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// date-fns：处理日期</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> parseISO <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"date-fns\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> serialize <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next-mdx-remote/serialize\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// remark-prism：markdown代码高亮</span>\n<span class=\"token keyword\">import</span> prism <span class=\"token keyword\">from</span> <span class=\"token string\">\"remark-prism\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// externalLinks：使markdown的链接是在新页面打开链接</span>\n<span class=\"token keyword\">import</span> externalLinks <span class=\"token keyword\">from</span> <span class=\"token string\">\"remark-external-links\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">MatterMark</span> <span class=\"token punctuation\">{<!-- --></span>\n    data<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> date<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span> title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    content<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">[</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> <span class=\"token builtin\">unknown</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// posts目录的路径</span>\n<span class=\"token keyword\">const</span> postsDirectory <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>process<span class=\"token punctuation\">.</span><span class=\"token function\">cwd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"posts\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 获取posts目录下的所有文件名（带后缀）</span>\n<span class=\"token keyword\">const</span> fileNames <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readdirSync</span><span class=\"token punctuation\">(</span>postsDirectory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 获取所有文章用于展示首页列表的数据</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getSortedPostsData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 获取所有md文件用于展示首页列表的数据，包含id，元数据（标题，时间）</span>\n    <span class=\"token keyword\">const</span> allPostsData <span class=\"token operator\">=</span> fileNames<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 去除文件名的md后缀，使其作为文章id使用</span>\n        <span class=\"token keyword\">const</span> id <span class=\"token operator\">=</span> fileName<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.md$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 获取md文件路径</span>\n        <span class=\"token keyword\">const</span> fullPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>postsDirectory<span class=\"token punctuation\">,</span> fileName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 读取md文件内容</span>\n        <span class=\"token keyword\">const</span> fileContents <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>fullPath<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 使用matter提取md文件元数据：{data:{//元数据},content:'内容'}</span>\n        <span class=\"token keyword\">const</span> matterResult <span class=\"token operator\">=</span> <span class=\"token function\">matter</span><span class=\"token punctuation\">(</span>fileContents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n            id<span class=\"token punctuation\">,</span>\n            <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>matterResult<span class=\"token punctuation\">.</span>data <span class=\"token keyword\">as</span> MatterMark<span class=\"token punctuation\">[</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 按照日期从进到远排序</span>\n    <span class=\"token keyword\">return</span> allPostsData<span class=\"token punctuation\">.</span><span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> date<span class=\"token operator\">:</span> a <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> date<span class=\"token operator\">:</span> b <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n        <span class=\"token comment\">// parseISO：字符串转日期</span>\n        <span class=\"token function\">parseISO</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token function\">parseISO</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 获取格式化后的所有文章id（文件名）</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getAllPostIds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 这是返回的格式:</span>\n    <span class=\"token comment\">// [</span>\n    <span class=\"token comment\">//   {<!-- --></span>\n    <span class=\"token comment\">//     params: {<!-- --></span>\n    <span class=\"token comment\">//       id: '......'</span>\n    <span class=\"token comment\">//     }</span>\n    <span class=\"token comment\">//   },</span>\n    <span class=\"token comment\">//   {<!-- --></span>\n    <span class=\"token comment\">//     params: {<!-- --></span>\n    <span class=\"token comment\">//       id: '......'</span>\n    <span class=\"token comment\">//     }</span>\n    <span class=\"token comment\">//   }</span>\n    <span class=\"token comment\">// ]</span>\n\n    <span class=\"token keyword\">return</span> fileNames<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n            params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n                id<span class=\"token operator\">:</span> fileName<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.md$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 获取指定文章内容</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getPostData</span><span class=\"token punctuation\">(</span>id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 文章路径</span>\n    <span class=\"token keyword\">const</span> fullPath <span class=\"token operator\">=</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>postsDirectory<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.md</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 读取文章内容</span>\n    <span class=\"token keyword\">const</span> fileContents <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFileSync</span><span class=\"token punctuation\">(</span>fullPath<span class=\"token punctuation\">,</span> <span class=\"token string\">\"utf8\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 使用matter解析markdown元数据和内容</span>\n    <span class=\"token keyword\">const</span> matterResult <span class=\"token operator\">=</span> <span class=\"token function\">matter</span><span class=\"token punctuation\">(</span>fileContents<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n        content<span class=\"token operator\">:</span> <span class=\"token keyword\">await</span> <span class=\"token function\">serialize</span><span class=\"token punctuation\">(</span>matterResult<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span>\n            mdxOptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span> remarkPlugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>prism<span class=\"token punctuation\">,</span> externalLinks<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token operator\">...</span><span class=\"token punctuation\">(</span>matterResult<span class=\"token punctuation\">.</span>data <span class=\"token keyword\">as</span> MatterMark<span class=\"token punctuation\">[</span><span class=\"token string\">\"data\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><code>posts.ts</code>里有三个主要的函数：</p>\n<ul><li> <p><code>getSortedPostsData</code>：在首页用于展示文章列表</p> </li><li> <p><code>getAllPostIds</code>：获取指定格式的所有文章<code>id</code>（文件名），这个格式是<code>Next</code>所要求的</p>\n<blockquote>\n<p>因为我们在写文章详情页面时需要使用动态路由，每个文章的<code>id</code>就是一个路由，并且我们使用的<code>Next</code>静态站点生成会在项目打包构建时直接生成<strong>所有的</strong><code>html</code>文件，需要把每一个路由对应的页面都构建出来，<code>Next</code>会根据<code>getAllPostIds</code>函数返回的这种格式的数据去构建每一个<code>html</code>页面</p>\n</blockquote> </li><li> <p><code>getPostData</code>：获取文章详情，在文章详情页面会用到</p> </li></ul>\n<h1><a id=\"6_319\"></a>6、添加首页</h1>\n<p>首页会展示文章列表，会用到一个日期渲染组件，我们先创建一下</p>\n<p>在<code>components</code>文件夹下新建<code>date.tsx</code>文件：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> parseISO<span class=\"token punctuation\">,</span> format <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"date-fns\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{<!-- --></span>\n    dateString<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> dateString <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">const</span> date <span class=\"token operator\">=</span> <span class=\"token function\">parseISO</span><span class=\"token punctuation\">(</span>dateString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>time dateTime<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>dateString<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">'text-gray-500'</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">{<!-- --></span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">,</span> <span class=\"token string\">\"yyyy年MM月dd日\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>time<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>修改<code>pages</code>文件夹下的<code>index.tsx</code>文件如下：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{<!-- --></span> NextPage<span class=\"token punctuation\">,</span> GetStaticProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Head <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/head\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Layout<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> siteTitle <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/layout\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/link\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Date <span class=\"token keyword\">from</span> <span class=\"token string\">\"../components/date\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> getSortedPostsData <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../utils/posts\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{<!-- --></span>\n    allPostsData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n        date<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n        title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n        id<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Home<span class=\"token operator\">:</span> NextPage<span class=\"token operator\">&lt;</span>Props<span class=\"token operator\">&gt;</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> allPostsData <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Layout home<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>siteTitle<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">&gt;</span>\n\n                <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">'text-xl leading-normal text-center'</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">&gt;</span>你好，我是 Ailjx<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">&gt;</span>一个又菜又爱玩的前端小白，欢迎来到我的博客！<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">&gt;</span>\n\n                <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">'text-xl leading-normal pt-4'</span><span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>h2 className<span class=\"token operator\">=</span><span class=\"token string\">' text-2xl my-4 font-bold'</span><span class=\"token operator\">&gt;</span>Blog<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h2<span class=\"token operator\">&gt;</span>\n                    <span class=\"token operator\">&lt;</span>ul<span class=\"token operator\">&gt;</span>\n                        <span class=\"token punctuation\">{<!-- --></span>allPostsData<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> id<span class=\"token punctuation\">,</span> date<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span>\n                            <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>id<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token string\">'mb-5'</span><span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/posts/</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${<!-- --></span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                                    <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span>small<span class=\"token operator\">&gt;</span>\n                                    <span class=\"token operator\">&lt;</span>Date dateString<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>date<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>small<span class=\"token operator\">&gt;</span>\n                            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">&gt;</span>\n                        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getStaticProps<span class=\"token operator\">:</span> <span class=\"token function-variable function\">GetStaticProps</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  \t<span class=\"token comment\">// 获取文章列表</span>\n    <span class=\"token keyword\">const</span> allPostsData <span class=\"token operator\">=</span> <span class=\"token function\">getSortedPostsData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n            allPostsData<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>修改<code>styles</code>文件夹下的<code>globals.css</code>如下：</p>\n<pre><code class=\"prism language-css\"><span class=\"token selector\">a</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #0070f3<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">a:hover</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> underline<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">img</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> block<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">::-webkit-scrollbar</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 5px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">::-webkit-scrollbar-thumb</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #0070f3<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">::-webkit-scrollbar-track</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #ddd<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>删除<code>style</code>文件夹下的<code>Home.module.css</code></p>\n<p>此时运行项目，打开<a href=\"http://localhost:3000/\">http://localhost:3000/</a>可见：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\57b71c787a714e22b04fd2c75233991e.png\"/></p>\n<h1><a id=\"7_441\"></a>7、添加文章详情页面</h1>\n<p>在<code>pages</code>文件夹下创建<code>posts</code>文件夹，在其中创建<code>[id].tsx</code>文件：</p>\n<pre><code class=\"prism language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{<!-- --></span> GetStaticProps<span class=\"token punctuation\">,</span> GetStaticPaths <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Layout <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/layout\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> getAllPostIds<span class=\"token punctuation\">,</span> getPostData <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../utils/posts\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Head <span class=\"token keyword\">from</span> <span class=\"token string\">\"next/head\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Date <span class=\"token keyword\">from</span> <span class=\"token string\">\"../../components/date\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> MDXRemote<span class=\"token punctuation\">,</span> MDXRemoteProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"next-mdx-remote\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 引入代码高亮css</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">\"prismjs/themes/prism-okaidia.min.css\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">Props</span> <span class=\"token punctuation\">{<!-- --></span>\n    postData<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n        title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n        date<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n        content<span class=\"token operator\">:</span> MDXRemoteProps<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Post</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> postData <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> Props<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>Layout<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>postData<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span>h1 className<span class=\"token operator\">=</span><span class=\"token string\">'text-3xl font-extrabold my-4 tracking-tighter'</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token punctuation\">{<!-- --></span>postData<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n\n            <span class=\"token operator\">&lt;</span>Date dateString<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>postData<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n\n            <span class=\"token operator\">&lt;</span>article className<span class=\"token operator\">=</span><span class=\"token string\">'py-8 prose  prose-h1:mt-8'</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>MDXRemote <span class=\"token punctuation\">{<!-- --></span><span class=\"token operator\">...</span>postData<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>article<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Layout<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// getStaticProps和getStaticPaths只在服务器端运行，永远不会在客户端运行</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getStaticPaths<span class=\"token operator\">:</span> <span class=\"token function-variable function\">GetStaticPaths</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 获取所有文章id，即所有路由</span>\n    <span class=\"token keyword\">const</span> paths <span class=\"token operator\">=</span> <span class=\"token function\">getAllPostIds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n        paths<span class=\"token punctuation\">,</span>\n        fallback<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getStaticProps<span class=\"token operator\">:</span> <span class=\"token function-variable function\">GetStaticProps</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> params <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token comment\">// 获取文章内容 </span>\n    <span class=\"token keyword\">const</span> postData <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">getPostData</span><span class=\"token punctuation\">(</span>params<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span>id <span class=\"token keyword\">as</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span>\n        props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n            postData<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>之后在首页点击文章列表跳转到文章详情页面：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\febc528af7254ab19d1956d142fe9aea.png\"/><br/> 到此一个简单的博客项目就写好了</p>\n<h1><a id=\"8Vercel_505\"></a>8、Vercel部署</h1>\n<blockquote>\n<p>没有<code>Github</code>账号的先去注册一个账号</p>\n</blockquote>\n<p>在<a href=\"https://github.com/\">Github</a>上新建一个名为<code>next-blog</code>的仓库（名称自己根据需要修改）：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\6ad06fd74e014deba8d643c5a2ec8b30.png\"/></p>\n<blockquote>\n<p>仓库权限公共私有都可，并且不需要使用<code>README</code> 或其他文件对其进行初始化</p>\n</blockquote>\n<p>在我们的博客项目根目录下运行以下命令推送代码到<code>Github</code>仓库里：</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/<span class=\"token operator\">&lt;</span>username<span class=\"token operator\">&gt;</span>/next-blog.git\n<span class=\"token function\">git</span> branch -M main\n<span class=\"token function\">git</span> push -u origin main\n</code></pre>\n<p>请将上述第一行命令<code>origin</code>后面的地址<strong>替换</strong>成你的仓库地址，一般是将<code>&lt;username&gt;</code>替换为你<code>Gitub</code>的用户名，<code>next-blog</code>替换成你仓库的名称</p>\n<p>之后刷新仓库查看代码：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\d17425a79f934c89bbc212fa6c29277e.png\"/></p>\n<blockquote>\n<p>项目仓库地址：<a href=\"https://github.com/Chen0807AiLJX/next-blog\">https://github.com/Chen0807AiLJX/next-blog</a></p>\n</blockquote>\n<blockquote>\n<p>细心的大佬应该会发现我们这样提交代码是有问题的，因为我们并没有<strong>合并本地代码到本地仓库</strong>，所以提交到<code>Github</code>仓库的代码并不是我们最终的效果，而是创建<code>Next.js</code>时的初始效果。</p>\n<p>不过不用担心，我们在后面会对其进行处理。当然，你也可以现在处理，直接将最新的代码同步到仓库，这样你就免了后面我们对其处理的操作</p>\n</blockquote>\n<p>打开<a href=\"https://vercel.com/\">Vercel</a>，没有<code>Vercel</code>账号的点击右上角的注册按钮进行注册，注册时选择通过<code>Github</code>注册，登录时也使用<code>Github</code>登录</p>\n<p>登录<code>Vecel</code>成功后打开 <a href=\"https://vercel.com/import/git\">https://vercel.com/import/git</a>或<a href=\"https://vercel.com/new\">https://vercel.com/new</a>或点击新建项目按钮，之后进入到以下页面：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\c092e950566f4a30a3589b87ee5646bd.png\"/><br/> 这个页面中会自动获取你的<code>Github</code>仓库，选择你刚刚推送博客项目的仓库，点击<code>Import</code>按钮，之后直接点击<code>Deploy</code>按钮：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\1e15ace77738439fb486174ce1f56108.png\"/></p>\n<p>稍等片刻，出现以下页面就部署成功了：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\808840e77fa34b6fb76744b4d68f33c7.png\"/></p>\n<p>点击上述页面左侧的页面预览框就能跳转到你部署成功的网页了，但这时你会发现<strong>部署的页面不是我们最终的页面</strong>，而是创建<code>Next.js</code>时的<strong>初始页面</strong>，这是因为我们在<code>Git</code>提交代码到仓库时没有合并本地代码，我们重新提交一下就行了</p>\n<p>我们可以在<code>VScode</code>里快速提交代码到仓库：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\5cfd8010fe3b422bb180a81220e2bca5.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\2153afcdede6413b8edd94c58c7819bb.png\"/></p>\n<p>点击<strong>同步更改</strong>后会开始转圈，等待转圈结束就提交成功了，之后什么都不用干，<strong>仓库代码更新后<code>Vercel</code>会自动部署</strong>！！！</p>\n<p>打开<a href=\"https://vercel.com/dashboard\">https://vercel.com/dashboard</a>能查看到你已经部署的项目和对应的网页地址：</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\0b4681af1739416b91baab13195dd534.png\"/></p>\n<p>好啦，到此我们的任务就全部完成了，之后需要添加文章只需要在项目的<code>posts</code>文件内新建<code>markdown</code>文件就行了（不要忘记在<code>markdown</code>顶部添加元数据），更新完文章提交代码到仓库即可</p>\n<h1><a id=\"_564\"></a>结语</h1>\n<p>这次使用<code>Next.js</code>搭建个人博客只是一个小小的尝试，可以说是只搭建了一个<strong>骨架</strong>，其实走完整个流程你应该会有很多有趣的想法去完善填充你的博客，因为基础功能我们已经实现，剩下的就是锦上添花的操作了，这完全取决于你</p>\n<p>项目仓库地址：<a href=\"https://next-blog-eosin-six.vercel.app/\">https://github.com/Chen0807AiLJX/next-blog</a><br/> 最终效果可见：<a href=\"https://next-blog-eosin-six.vercel.app/\">https://next-blog-eosin-six.vercel.app/</a></p>\n<blockquote>\n<p><strong>参考资料：</strong></p>\n<ul><li><a href=\"https://nextjs.org/learn/basics/create-nextjs-app\">Next.js官网</a></li><li><a href=\"https://www.tailwindcss.cn/docs\">tailwindcss中文文档</a></li><li><a href=\"https://date-fns.org/\">date-fns文档</a></li><li><a href=\"https://github.com/hashicorp/next-mdx-remote#readme\">next-mdx-remote仓库</a></li><li><a href=\"https://remark.js.org/\">remark文档</a></li></ul>\n</blockquote>\n<p>如果本篇文章对你有所帮助，还请客官一件四连！❤️</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}