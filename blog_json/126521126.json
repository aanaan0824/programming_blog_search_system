{"blogid": "126521126", "writerAge": "None", "writerBlogNum": "528", "writerCollect": "13494", "writerComment": "2045", "writerFan": "91414", "writerGrade": "9级", "writerIntegral": "50274", "writerName": "长沙红胖子Qt", "writerProfileAdress": "writer_image\\profile_126521126.jpg", "writerRankTotal": "64", "writerRankWeekly": "345", "writerThumb": "3034", "writerVisitNum": "11795995", "blog_read_count": "861", "blog_time": "已于 2022-08-26 10:20:58 修改", "blog_title": "关于 国产麒麟系统Qt强制退出应用程序qApp-＞exit()无效 的解决方法", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>若该文为原创文章，转载请注明原文出处<br/> 本文章博客地址：<a href=\"https://hpzwl.blog.csdn.net/article/details/126521126\">https://hpzwl.blog.csdn.net/article/details/126521126</a></p>\n<p><a href=\"https://blog.csdn.net/qq21497936/article/details/102478062\">红胖子(红模仿)的博文大全：开发技术集合（包含Qt实用技术、树莓派、三维、OpenCV、OpenGL、ffmpeg、OSG、单片机、软硬结合等等）持续更新中…（点击传送门）</a></p>\n<h1><a id=\"Qthttpsblogcsdnnetqq21497936articledetails102478062QtE5BC80E58F91E4B893E6A08FEFBC9AE59084E7A78DE997AEE9A298E8A7A3E586B3_5\"></a><a href=\"https://blog.csdn.net/qq21497936/article/details/102478062#Qt%E5%BC%80%E5%8F%91%E4%B8%93%E6%A0%8F%EF%BC%9A%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3\">Qt开发专栏：各种问题解决(点击传送门）</a></h1>\n<h1><a id=\"httpshpzwlblogcsdnnetarticledetails102478062t20_6\"></a><a href=\"https://hpzwl.blog.csdn.net/article/details/102478062#t20\">国产麒麟系统相关开发</a></h1>\n<br/>\n<h1><a id=\"_10\"></a>问题</h1>\n<p>  Qt强制退出应用可使用下图的两个方法（习惯用此方法），但是在本麒麟系统上开发时，强制退出无效。</p>\n<p>  <img alt=\"在这里插入图片描述\" src=\"image\\96ec944fee6e4cbb971e67359033b64a.png\"/><br/>   本段代码位置是在刚启动系统时，主界面类构造函数中。</p>\n<br/>\n<h1><a id=\"_18\"></a>原因</h1>\n<p>  推测理解为本个版本系统的bug，不知道其他系统是否有这个问题。<br/>   附上系统版本；<br/>   <img alt=\"在这里插入图片描述\" src=\"image\\7e611b08aaec4b6ba6c24d194001ff5c.png\"/><br/>   <strong>经过后续，有大佬提醒，才发现在消息循环进入前，使用该函数时退出无效，其本身是退出消息循环，主界面构造函数还未进入，所以是无效的。</strong></p>\n<br/>\n<h1><a id=\"_26\"></a>解决方法</h1>\n<p>  如果不在主界面等其他弹窗强制退出可能代码上去操作退出就麻烦点了，本次是在主页面类的构造函数中，所以换成了系统的exit()为退出主程序。<br/>   <img alt=\"在这里插入图片描述\" src=\"image\\facd8c2bdcbf4d27a67190268e3339a2.png\"/><br/>   退出方式总结种（不算旁门左道：如直接拿到进程，给系统发消息干掉进程，直接写个段错误让他崩溃）：</p>\n<ul><li><strong>第一种：全隐藏方式。</strong> 可以使所有界面都隐藏，自然退出，这个属性是Qt界面程序默认的，如果想完全隐藏（如任务栏右小角仅有个任务栏标识）又不退出，可以在main函数种设置属性：</li></ul>\n<pre><code class=\"prism language-cpp\">a<span class=\"token punctuation\">.</span><span class=\"token function\">setQuitOnLastWindowClosed</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li><strong>第二种：Qt强制退出方式（主要为退出消息循环：在没有a.exec()消息循环之前调用无效)。</strong> 可以使用qApp-&gt;exit()，QApplication::exit()，QCoreApplication::exit()。</li><li><strong>第三种：系统强制退出方式。</strong> 可以直接使用exit()，这是c语言系统函数。</li></ul>\n<br/>\n<p>若该文为原创文章，转载请注明原文出处<br/> 本文章博客地址：<a href=\"https://hpzwl.blog.csdn.net/article/details/126521126\">https://hpzwl.blog.csdn.net/article/details/126521126</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}