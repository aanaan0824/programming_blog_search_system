{"blogid": "124270494", "writerAge": "码龄7年", "writerBlogNum": "114", "writerCollect": "220", "writerComment": "30", "writerFan": "5994", "writerGrade": "4级", "writerIntegral": "1289", "writerName": "CDamogu", "writerProfileAdress": "writer_image\\profile_124270494.jpg", "writerRankTotal": "17924", "writerRankWeekly": "1074", "writerThumb": "44", "writerVisitNum": "68336", "blog_read_count": "923", "blog_time": "已于 2022-04-19 18:20:33 修改", "blog_title": "VisualStudio 快速开始使用 NanUI（从0搭建到运行程序仅需10分钟）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-dracula\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>快速开始使用 NanUI</h3>\n<ul><li><a href=\"#_2\">学习目标：</a></li><li><a href=\"#NanUI_12\">NanUI基本介绍</a></li><li><a href=\"#_22\">效果展示：</a></li><li><ul><li><a href=\"#_24\">遮罩层</a></li><li><a href=\"#_27\">运行界面</a></li></ul>\n</li><li><a href=\"#_34\">开始配置项目：</a></li><li><ul><li><a href=\"#Create_a_new_Project_36\">Create a new Project</a></li><li><a href=\"#Configure_your_new_Project_40\">Configure your new Project</a></li><li><a href=\"#ReferencesNetDimensionNanUI_42\">References引用NetDimension.NanUI</a></li><li><a href=\"#progromecs_59\">修改progrome.cs文件</a></li></ul>\n</li><li><a href=\"#_150\">遮罩定制篇</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_2\"></a>学习目标：</h1>\n<ul><li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"disabled\" type=\"checkbox\"/> 快速开始使用 NanUI</li><li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"disabled\" type=\"checkbox\"/> 通过VisualStudio2022 快速跑通NanUIDemo</li><li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"disabled\" type=\"checkbox\"/> <a href=\"https://gitee.com/linxuanchen/NanUI\">Gitee 林选臣 / NanUI</a></li><li class=\"task-list-item\"><input class=\"task-list-item-checkbox\" disabled=\"disabled\" type=\"checkbox\"/> Gitee中附带了中英文文档，里面写的很详细了，进阶的可以去看看</li></ul>\n<hr/>\n<h1><a id=\"NanUI_12\"></a>NanUI基本介绍</h1>\n<blockquote>\n<p>这是一个开放源代码的 .NET / .NET Core 窗体应用程序（WinForms）界面组件。您可以使用 HTML5 / CSS3 / Javascript 等前端技术来构建您的应用程序界面。主流的Javascript框架，比如Angular, React, Vue都是可以用来构架SPA应用的明智选择。使用 NanUI 界面组件将给您的窗体设计工作带来无限可能。</p>\n</blockquote>\n<p>NanUI文档 - 使用网页来设计整个窗口<br/> NanUI是一套桌面开发框架，最终输出的是exe桌面程序，但运行的内容是浏览器页面的内容（解决了CS界面不容易输出很美观界面的问题）</p>\n<hr/>\n<h1><a id=\"_22\"></a>效果展示：</h1>\n<p>如果效果展示符合你的审美，那么你可以继续往下看该文章</p>\n<h2><a id=\"_24\"></a>遮罩层</h2>\n<p>有点类似于Ps打开软件的时候出现的logo，加载画面，当然该遮罩层可以关闭，后面会提供关闭方法<br/> <img alt=\"在这里插入图片描述\" src=\"image\\06c6f1831c4e471c98d6fd4567647e35.png\"/></p>\n<h2><a id=\"_27\"></a>运行界面</h2>\n<p>有点类似将网页装进了App，当然该界面的前提是你已经搭建好自己的网站，也可以是你用别人的网页地址<br/> <img alt=\"在这里插入图片描述\" src=\"image\\43a1e42b6ee64e2c973706a59e9848d8.png\"/></p>\n<hr/>\n<h1><a id=\"_34\"></a>开始配置项目：</h1>\n<p>查看电脑安装Framwork ： C:\\Windows\\Microsoft.NET\\Framework</p>\n<h2><a id=\"Create_a_new_Project_36\"></a>Create a new Project</h2>\n<p>创建新的Windows Form App(.NET Framework)<br/> <img alt=\"在这里插入图片描述\" src=\"image\\8573e6cbdec649dcaae498cd3a1bb1d3.png\"/></p>\n<h2><a id=\"Configure_your_new_Project_40\"></a>Configure your new Project</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\8d675632517e4dbe82b38ed717215166.png\"/></p>\n<h2><a id=\"ReferencesNetDimensionNanUI_42\"></a>References引用NetDimension.NanUI</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\5c5553dd27814735b6b302658f19df37.png\"/><br/> 右键选择Manage NuGet Packages<br/> <img alt=\"在这里插入图片描述\" src=\"image\\966c3bacb8594fa6aae350611f3c1d16.png\"/><br/> 搜索安装NanUI</p>\n<ul><li>NetDimension.NanUI</li><li>NetDimension.NanUI.Runtime</li></ul>\n<p>安装过程中有问题请移步：<a href=\"https://blog.csdn.net/qq_33704787/article/details/124263267?spm=1001.2014.3001.5501\">NetDimension.NanUI安装报错Unable to find a version of ‘SharpGen.Runtime‘解决方案</a></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\3bca843ece5444b6984afcabadbda798.png\"/></p>\n<p>当所有环境安装完成，那么可以继续下面代码修改环节</p>\n<hr/>\n<h2><a id=\"progromecs_59\"></a>修改progrome.cs文件</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\4e62d13ee3364288a53dc8251a24e634.png\"/><br/> <code>progrome.cs</code>修改代码如下：</p>\n<pre><code class=\"prism language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">System</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Collections<span class=\"token punctuation\">.</span>Generic</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Linq</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Threading<span class=\"token punctuation\">.</span>Tasks</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Windows<span class=\"token punctuation\">.</span>Forms</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">NetDimension<span class=\"token punctuation\">.</span>NanUI</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">namespace</span> <span class=\"token namespace\">WindowsFormsApp1</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Program</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">// ...</span>\n            WinFormium<span class=\"token punctuation\">.</span><span class=\"token function\">CreateRuntimeBuilder</span><span class=\"token punctuation\">(</span>env <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n\n                env<span class=\"token punctuation\">.</span><span class=\"token function\">CustomCefSettings</span><span class=\"token punctuation\">(</span>settings <span class=\"token operator\">=&gt;</span>\n                <span class=\"token punctuation\">{<!-- --></span>\n                    <span class=\"token comment\">// 在此处设置 CEF 的相关参数</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                env<span class=\"token punctuation\">.</span><span class=\"token function\">CustomCefCommandLineArguments</span><span class=\"token punctuation\">(</span>commandLine <span class=\"token operator\">=&gt;</span>\n                <span class=\"token punctuation\">{<!-- --></span>\n                    <span class=\"token comment\">// 在此处指定 CEF 命令行参数</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> app <span class=\"token operator\">=&gt;</span>\n            <span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token comment\">// 指定启动窗体</span>\n                app<span class=\"token punctuation\">.</span><span class=\"token function\">UseMainWindow</span><span class=\"token punctuation\">(</span>context <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">MainWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">Build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">Run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>新建一个名为MainWindow的Class</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\9d292a3e5bbd4f3a85de89ed23bcae4f.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\73d00ec69b454ca7abb765a5d6a4ec63.png\"/><br/> <code>MainWindow.cs</code>修改代码如下：</p>\n<pre><code class=\"prism language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">NetDimension<span class=\"token punctuation\">.</span>NanUI</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">using</span> <span class=\"token namespace\">NetDimension<span class=\"token punctuation\">.</span>NanUI<span class=\"token punctuation\">.</span>HostWindow</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MainWindow</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">Formium</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 设置窗体样式类型</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\">HostWindowType</span> WindowType <span class=\"token operator\">=&gt;</span> HostWindowType<span class=\"token punctuation\">.</span>System<span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 指定启动 Url</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> StartUrl <span class=\"token operator\">=&gt;</span> <span class=\"token string\">\"https://www.formium.net\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 在此处设置窗口样式</span>\n        Size <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">System<span class=\"token punctuation\">.</span>Drawing<span class=\"token punctuation\">.</span>Size</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">,</span> <span class=\"token number\">768</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n\t\t<span class=\"token comment\">//设置标题</span>\n        Title <span class=\"token operator\">=</span> <span class=\"token string\">\"m-todo.com\"</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">// 在此处设置窗口Icon</span>\n        <span class=\"token comment\">//Icon = new System.Drawing.Icon(\"Mega.ico\");</span>\n\n        <span class=\"token comment\">//设置启动位置</span>\n        StartPosition <span class=\"token operator\">=</span> System<span class=\"token punctuation\">.</span>Windows<span class=\"token punctuation\">.</span>Forms<span class=\"token punctuation\">.</span>FormStartPosition<span class=\"token punctuation\">.</span>CenterScreen<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">OnReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 在此处进行浏览器相关操作</span>\n\n        <span class=\"token comment\">//ShowDevTools();</span>\n        <span class=\"token comment\">//ExecuteJavaScript(\"alert('Hello NanUI')\");</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>至此运行即可实现效果展示的样子</p>\n<hr/>\n<h1><a id=\"_150\"></a>遮罩定制篇</h1>\n<p><a href=\"https://gitee.com/linxuanchen/NanUI-0.9-Examples/tree/master/src/HostWindowFeatures\">选臣 / NanUI 0.9 示例</a></p>\n<p>双击Resource.resx 点击添加Resource，添加现有项<br/> <img alt=\"在这里插入图片描述\" src=\"image\\087cff37b2f4489e95bc6f0994cbb616.png\"/><br/> MainWindow.cs加入下述代码<br/> <img alt=\"在这里插入图片描述\" src=\"image\\10b1ba02efe54543a23f9168edf89e45.png\"/></p>\n<pre><code class=\"prism language-csharp\"><span class=\"token keyword\">using</span> <span class=\"token namespace\">System<span class=\"token punctuation\">.</span>Drawing</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MainWindow</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">Formium</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token function\">MainWindow</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// 修改启动界面</span>\n        <span class=\"token comment\">//ColorTranslator使用前提是using System.Drawing;</span>\n        SplashScreen<span class=\"token punctuation\">.</span>BackColor <span class=\"token operator\">=</span> ColorTranslator<span class=\"token punctuation\">.</span><span class=\"token function\">FromHtml</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#fafafa\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token comment\">//mmmmtodo为你项目的名称</span>\n        <span class=\"token comment\">//林选臣Demo中解决方案是namespace HostWindowFeatures; 然后 SplashScreen.Image = Properties.Resources.SplashLogo;</span>\n        <span class=\"token comment\">//但是当我使用namespace HostWindowFeatures;时候报错： 让C# langversion 7.4提升到10.0+</span>\n        <span class=\"token comment\">//修改项目mmmmtodo.csproj里面的langversion为10.0后，发现Program.cs代码部分又报错了，所以最后选择方案是使用mmmmtodo</span>\n        SplashScreen<span class=\"token punctuation\">.</span>Image <span class=\"token operator\">=</span> mmmmtodo<span class=\"token punctuation\">.</span>Properties<span class=\"token punctuation\">.</span>Resources<span class=\"token punctuation\">.</span>SplashLogo<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>如此便得到下述页面效果：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\5cd2607d21e6447594234bc4ca34c6d4.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}