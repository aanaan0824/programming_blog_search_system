{"blogid": "124411220", "writerAge": "码龄1年", "writerBlogNum": "10", "writerCollect": "89", "writerComment": "28", "writerFan": "17", "writerGrade": "2级", "writerIntegral": "194", "writerName": "Vim_飞鱼", "writerProfileAdress": "writer_image\\profile_124411220.jpg", "writerRankTotal": "79792", "writerRankWeekly": "488346", "writerThumb": "32", "writerVisitNum": "18157", "blog_read_count": "9290", "blog_time": "已于 2022-04-26 11:03:27 修改", "blog_title": "Python连接MySQL数据库(简单便捷)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>🐒，本文中，使用到的工具有：Pycharm，Anaconda，MySQL 5.5，spyder(Anaconda)</p>\n<h3>什么是 PyMySQL？</h3>\n<p>PyMySQL 是在 Python3.x 版本中用于连接 MySQL 服务器的一个库，Python2 中则使用 mysqldb。</p>\n<h1>一、🏔环境准备</h1>\n<h3><strong>1、安装pymysql：</strong></h3>\n<p>进行Python连接mysql数据库之前，需要先安装一下pymysql。</p>\n<p>直接在终端执行下面的命令即可。(在此处我将指定1.0.2版本)</p>\n<pre><code>pip install pymysql==1.0.2</code></pre>\n<h3>2、查询安装：</h3>\n<p>下载完成后，在终端输入 pip list 即可看到下图：</p>\n<pre><code>pip list</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\e2edea07ca0e4df2ad40a427bcf12a95.png\"/></p>\n<p>可以看到我们的PyMySQL是1.0.2版本的。</p>\n<h3>3、Anaconda下载pymysql：</h3>\n<p>打开Anaconda，选择 Environments 点击右上方的的搜索框 输入 pymysql</p>\n<p></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\945fc921b8fd4b389d0026dcaea794e5.png\"/></p>\n<p> 点击方框，即可下载</p>\n<h3><strong>方式一🏔：</strong></h3>\n<p>        此处我们可以选择 spyder 或者 pycharm 首先为大家介绍一下 spyder 我们只需要直接导入 pymysql 库即可 </p>\n<p><img alt=\"\" height=\"532\" src=\"image\\ffdf364364bb41e2bb00fc2ce64f02e9.png\" width=\"850\"/></p>\n<h3>方式二🏔： </h3>\n<h3>        4、Pycharm下载pymysql</h3>\n<p>打开 Pycharm 选择文件，点击设置，</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\fbe1cbbdd26e44989b155a1bdb7d4ddc.png\"/></p>\n<p> 下划，选择python解释器，这里我的Pycharm已经配置了Anaconda环境</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\2fd51841cb3743da85d264caa5b4da55.png\"/>如果没有查询到 pymysql 可以在 Pycharm 终端中下载 pymysql 库<img alt=\"\" src=\"image\\fcdb6b257b4d4dc892e47006e3145c4b.png\"/></p>\n<p><strong>以上我们的环境就准备好了，下面我们进行编写程序 ☀</strong></p>\n<h1> 二、🏔代码编写，连接数据库</h1>\n<h2>1、导入数据库表 </h2>\n<pre><code>import pymysql</code></pre>\n<p></p>\n<p></p>\n<p> 数据库连接：</p>\n<p>连接数据库前，请先确认以下事项：</p>\n<ul><li>连接数据库使用的用户名为 \"root\" ，密码为 \"dai324542\",创建了数据库 runoob</li><li>你可以可以自己设定或者直接使用root用户名及其密码<img alt=\"\" height=\"860\" src=\"image\\e3d10246d17747c4a21a7852995abe4d.png\" width=\"1132\"/></li></ul>\n<p></p>\n<pre><code class=\"language-python\">db = pymysql.connect(host='localhost',\n                     user='root',\n                     password='dai324542',\n                     database='runoob',\n                     charset='utf8')\n \n# 使用 cursor() 方法创建一个游标对象 cursor\ncursor = db.cursor()\n \n# 使用 execute()  方法执行 SQL 查询 \ncursor.execute(\"SELECT VERSION()\")\n \n# 使用 fetchone() 方法获取单条数据.\ndata = cursor.fetchone()\n \nprint (\"数据库连接成功！\")\n \n# 关闭数据库连接\ndb.close()</code></pre>\n<h2> 2、创建数据库表</h2>\n<pre><code class=\"language-python\"># 创建表\nsql=\"\"\"CREATE TABLE test (\n          FIRST_  CHAR(20) NOT NULL,\n          SECOND_  CHAR(20),\n          THIRD_ INT,\n          FOURTH_ CHAR(1),\n          FIFTH_ FLOAT )\"\"\"\n# 运行sql语句\ncursor.execute(sql)</code></pre>\n<p>这里我们所运用的sql语句是不是很熟悉了😊</p>\n<p>下面即是运行结果了，再mysql中可以刷新看到，我输出了一个提示 victory </p>\n<p><img alt=\"\" height=\"943\" src=\"image\\e6a5d52cdafc4db8821da1143a3da83d.png\" width=\"1108\"/></p>\n<p> <img alt=\"\" height=\"655\" src=\"image\\70301fefc17b4af2996f384cc03031b2.png\" width=\"1200\"/></p>\n<p></p>\n<h3> 3、数据库插入操作</h3>\n<p>此处我只是随便进行了一个举例，通过更改创建表时的操作可以插入不同类型的数据</p>\n<pre><code class=\"language-python\">try:\n    sql = \"insert into test(FIRST_,SECOND_,THIRD_,FOURTH_,FIFTH_) values ('MAC','MOTH','20','M','2000')\"\n\n    # 运行sql语句\n    cursor.execute(sql)\n    # 修改\n    db.commit()\n    # 关闭游标\n    cursor.close()\n    # 关闭连接\n    db.close()\n    print(\"victory!\")\nexcept:\n    print(\"false\")</code></pre>\n<p><img alt=\"\" height=\"1011\" src=\"image\\6a6f7b137fb44790bff49fb8d6b686b7.png\" width=\"1200\"/></p>\n<h3> 4、查询其中一个表的数据</h3>\n<pre><code># 查询语句\ntry:\n    cursor = db.cursor()\n    sql = \"select * from student\"\n    cursor.execute(sql)\n    result = cursor.fetchall()\n    for data in result:\n        print(data)\nexcept Exception:\n    print(\"查询失败\")</code></pre>\n<p style=\"text-align:center;\"> <img alt=\"\" src=\"image\\9daa766709114858ba432a861acaea16.png\"/></p>\n<h3> 5、删除表中的一条数据</h3>\n<pre><code class=\"language-python\"># SQL 删除语句\nsql = \"DELETE FROM student WHERE Sno='20111107'\"\ntry:\n   # 执行SQL语句\n   cursor.execute(sql)\n   # 向数据库提交\n   db.commit()\nexcept:\n   # 发生错误时回滚\n   db.rollback()\n# 关闭连接\ndb.close()\n# 成功提示\nprint(\"victory!\")</code></pre>\n<p>注意：Python中的MySQL默认事务打开，需要我们手动提交事务，否则操作无效</p>\n<p>写到这里，这篇博客就又又又结束了，很感谢大家的观看，如果对大家有所帮助希望可以留下一个小小的👍，🙇‍。因才学疏浅，如果各位大佬发现其中存在错误，敬请指出，(ง •_•)ง！</p>\n</div>\n</div>"}