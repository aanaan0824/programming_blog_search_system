{"blogid": "126715976", "writerAge": "码龄6年", "writerBlogNum": "264", "writerCollect": "4987", "writerComment": "3083", "writerFan": "18505", "writerGrade": "7级", "writerIntegral": "21535", "writerName": "Li-Yongjun", "writerProfileAdress": "writer_image\\profile_126715976.jpg", "writerRankTotal": "454", "writerRankWeekly": "3113", "writerThumb": "3204", "writerVisitNum": "3211866", "blog_read_count": "26", "blog_time": "于 2022-09-06 00:17:16 发布", "blog_title": "RPM 与 DPKG 使用", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"_0\"></a>前言</h2>\n<p>在<a href=\"https://liyongjun.blog.csdn.net/article/details/126715408?spm=1001.2014.3001.5502\">上篇</a>文章中，我们介绍了 RPM 和 DPKG 的由来及其功能。这篇文章，我们着重介绍下这两种软件管理器的使用。</p>\n<h2><a id=\"_2\"></a>顺藤摸瓜</h2>\n<p>在嵌入式开发中，我们经常会有研究某个命令源码的需求。比如想知道 <code>ifconfig</code> 的实现原理。<br/> step 1，查找命令所在位置</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># whereis ifconfig</span>\nifconfig: /usr/sbin/ifconfig /usr/share/man/man8/ifconfig.8.gz\n</code></pre>\n<p>step 2，查找二进制文件所属的 RPM 包</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># rpm -qf /usr/sbin/ifconfig</span>\nnet-tools-2.0-0.25.20131004git.el7.x86_64\n</code></pre>\n<p>可知，ifconfig 是 net-tools 工具集中的一个子工具。想要分析 ifconfig 源码，只要下载 net-tools 源码就可以了。</p>\n<h2><a id=\"_17\"></a>进阶</h2>\n<p>1、查看软件包文件列表</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># rpm -ql net-tools</span>\n/bin/netstat\n/sbin/arp\n/sbin/ether-wake\n/sbin/ifconfig\n/sbin/ipmaddr\n/sbin/iptunnel\n/sbin/mii-diag\n/sbin/mii-tool\n/sbin/nameif\n/sbin/plipconfig\n/sbin/route\n/sbin/slattach\n/usr/lib/systemd/system/arp-ethers.service\n/usr/share/doc/net-tools-2.0\n/usr/share/doc/net-tools-2.0/COPYING\n/usr/share/locale/cs/LC_MESSAGES/net-tools.mo\n/usr/share/locale/de/LC_MESSAGES/net-tools.mo\n/usr/share/locale/et_EE/LC_MESSAGES/net-tools.mo\n/usr/share/locale/fr/LC_MESSAGES/net-tools.mo\n/usr/share/locale/pt_BR/LC_MESSAGES/net-tools.mo\n/usr/share/man/de/man5/ethers.5.gz\n/usr/share/man/de/man8/arp.8.gz\n/usr/share/man/de/man8/ifconfig.8.gz\n/usr/share/man/de/man8/netstat.8.gz\n/usr/share/man/de/man8/plipconfig.8.gz\n/usr/share/man/de/man8/route.8.gz\n/usr/share/man/de/man8/slattach.8.gz\n/usr/share/man/fr/man5/ethers.5.gz\n/usr/share/man/fr/man8/arp.8.gz\n/usr/share/man/fr/man8/ifconfig.8.gz\n/usr/share/man/fr/man8/netstat.8.gz\n/usr/share/man/fr/man8/plipconfig.8.gz\n/usr/share/man/fr/man8/route.8.gz\n/usr/share/man/fr/man8/slattach.8.gz\n/usr/share/man/man5/ethers.5.gz\n/usr/share/man/man8/arp.8.gz\n/usr/share/man/man8/ether-wake.8.gz\n/usr/share/man/man8/ifconfig.8.gz\n/usr/share/man/man8/ipmaddr.8.gz\n/usr/share/man/man8/iptunnel.8.gz\n/usr/share/man/man8/mii-diag.8.gz\n/usr/share/man/man8/mii-tool.8.gz\n/usr/share/man/man8/nameif.8.gz\n/usr/share/man/man8/netstat.8.gz\n/usr/share/man/man8/plipconfig.8.gz\n/usr/share/man/man8/route.8.gz\n/usr/share/man/man8/slattach.8.gz\n/usr/share/man/pt/man8/arp.8.gz\n/usr/share/man/pt/man8/ifconfig.8.gz\n/usr/share/man/pt/man8/netstat.8.gz\n/usr/share/man/pt/man8/route.8.gz\n\n</code></pre>\n<p>rpm 软件包通常采用默认路径安装，各安装文件会分门别类安装在适当的目录文件下。使用 <code>rmp -ql 软件包名</code> 可以查询到已安装软件包中包含的所有文件及各自安装路径。我们可以只过滤 bin 文件</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># rpm -ql net-tools | grep bin</span>\n/bin/netstat\n/sbin/arp\n/sbin/ether-wake\n/sbin/ifconfig\n/sbin/ipmaddr\n/sbin/iptunnel\n/sbin/mii-diag\n/sbin/mii-tool\n/sbin/nameif\n/sbin/plipconfig\n/sbin/route\n/sbin/slattach\n</code></pre>\n<p>二、查看软件包的详细信息</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># rpm -qi net-tools</span>\nName        <span class=\"token builtin class-name\">:</span> net-tools\nVersion     <span class=\"token builtin class-name\">:</span> <span class=\"token number\">2.0</span>\nRelease     <span class=\"token builtin class-name\">:</span> <span class=\"token number\">0.25</span>.20131004git.el7\nArchitecture: x86_64\nInstall Date: Thu 03 Sep <span class=\"token number\">2020</span> <span class=\"token number\">11</span>:49:41 AM CST\nGroup       <span class=\"token builtin class-name\">:</span> System Environment/Base\nSize        <span class=\"token builtin class-name\">:</span> <span class=\"token number\">938978</span>\nLicense     <span class=\"token builtin class-name\">:</span> GPLv2+\nSignature   <span class=\"token builtin class-name\">:</span> RSA/SHA256, Fri <span class=\"token number\">23</span> Aug <span class=\"token number\">2019</span> 05:36:04 AM CST, Key ID 24c6a8a7f4a80eb5\nSource RPM  <span class=\"token builtin class-name\">:</span> net-tools-2.0-0.25.20131004git.el7.src.rpm\nBuild Date  <span class=\"token builtin class-name\">:</span> Fri 09 Aug <span class=\"token number\">2019</span> 09:10:26 AM CST\nBuild Host  <span class=\"token builtin class-name\">:</span> x86-02.bsys.centos.org\nRelocations <span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">(</span>not relocatable<span class=\"token punctuation\">)</span>\nPackager    <span class=\"token builtin class-name\">:</span> CentOS BuildSystem <span class=\"token operator\">&lt;</span>http://bugs.centos.org<span class=\"token operator\">&gt;</span>\nVendor      <span class=\"token builtin class-name\">:</span> CentOS\nURL         <span class=\"token builtin class-name\">:</span> http://sourceforge.net/projects/net-tools/\nSummary     <span class=\"token builtin class-name\">:</span> Basic networking tools\nDescription <span class=\"token builtin class-name\">:</span>\nThe net-tools package contains basic networking tools,\nincluding ifconfig, netstat, route, and others.\nMost of them are obsolete. For replacement check iproute package.\n\n</code></pre>\n<p>三、查询软件包的依赖关系</p>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\"># rpm -qR net-tools</span>\n/bin/sh\nlibc.so.6<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibc.so.6<span class=\"token punctuation\">(</span>GLIBC_2.14<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibc.so.6<span class=\"token punctuation\">(</span>GLIBC_2.2.5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibc.so.6<span class=\"token punctuation\">(</span>GLIBC_2.3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibc.so.6<span class=\"token punctuation\">(</span>GLIBC_2.3.4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibc.so.6<span class=\"token punctuation\">(</span>GLIBC_2.4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nlibselinux.so.1<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>64bit<span class=\"token punctuation\">)</span>\nrpmlib<span class=\"token punctuation\">(</span>CompressedFileNames<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">3.0</span>.4-1\nrpmlib<span class=\"token punctuation\">(</span>FileDigests<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">4.6</span>.0-1\nrpmlib<span class=\"token punctuation\">(</span>PayloadFilesHavePrefix<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">4.0</span>-1\nrtld<span class=\"token punctuation\">(</span>GNU_HASH<span class=\"token punctuation\">)</span>\nsystemd-units\nrpmlib<span class=\"token punctuation\">(</span>PayloadIsXz<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">5.2</span>-1\n</code></pre>\n<h2><a id=\"DPKG_138\"></a>DPKG</h2>\n<p>dpkg 也类似<br/> 一、查询软件包文件列表</p>\n<pre><code class=\"prism language-bash\">$ dpkg -L net-tools <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> bin\n/bin\n/bin/netstat\n/sbin\n/sbin/ifconfig\n/sbin/ipmaddr\n/sbin/iptunnel\n/sbin/mii-tool\n/sbin/nameif\n/sbin/plipconfig\n/sbin/rarp\n/sbin/route\n/sbin/slattach\n/usr/sbin\n/usr/sbin/arp\n\n</code></pre>\n<p>二、查看软件包（已安装）的详细信息</p>\n<pre><code class=\"prism language-bash\">$ dpkg -s net-tools\nPackage: net-tools\nStatus: <span class=\"token function\">install</span> ok installed\nPriority: important\nSection: net\nInstalled-Size: <span class=\"token number\">844</span>\nMaintainer: Ubuntu Developers <span class=\"token operator\">&lt;</span>ubuntu-devel-discuss@lists.ubuntu.com<span class=\"token operator\">&gt;</span>\nArchitecture: amd64\nMulti-Arch: foreign\nVersion: <span class=\"token number\">1.60</span>+git20180626.aebd88e-1ubuntu1\nDepends: libc6 <span class=\"token punctuation\">(</span><span class=\"token operator\">&gt;=</span> <span class=\"token number\">2.14</span><span class=\"token punctuation\">)</span>, libselinux1 <span class=\"token punctuation\">(</span><span class=\"token operator\">&gt;=</span> <span class=\"token number\">1.32</span><span class=\"token punctuation\">)</span>\nDescription: NET-3 networking toolkit\n This package includes the important tools <span class=\"token keyword\">for</span> controlling the network\n subsystem of the Linux kernel.  This includes arp, ifconfig, netstat,\n rarp, nameif and route.  Additionally, this package contains utilities\n relating to particular network hardware types <span class=\"token punctuation\">(</span>plipconfig, slattach,\n mii-tool<span class=\"token punctuation\">)</span> and advanced aspects of IP configuration <span class=\"token punctuation\">(</span>iptunnel, ipmaddr<span class=\"token punctuation\">)</span>.\n <span class=\"token builtin class-name\">.</span>\n In the upstream package <span class=\"token string\">'hostname'</span> and friends are included. Those are\n not installed by this package, since there is a special <span class=\"token string\">\"hostname*.deb\"</span><span class=\"token builtin class-name\">.</span>\nHomepage: http://sourceforge.net/projects/net-tools/\nOriginal-Maintainer: net-tools Team <span class=\"token operator\">&lt;</span>team+net-tools@tracker.debian.org<span class=\"token operator\">&gt;</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}