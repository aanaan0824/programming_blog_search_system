{"blogid": "126742455", "writerAge": "码龄144天", "writerBlogNum": "85", "writerCollect": "39", "writerComment": "1", "writerFan": "11", "writerGrade": "4级", "writerIntegral": "862", "writerName": "慕霜ヾ", "writerProfileAdress": "writer_image\\profile_126742455.jpg", "writerRankTotal": "23929", "writerRankWeekly": "6060", "writerThumb": "9", "writerVisitNum": "21838", "blog_read_count": "13", "blog_time": "于 2022-09-07 11:43:40 发布", "blog_title": "k8s资源管理", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night-eighties\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"k8s_0\"></a>k8s资源管理</h2>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><ul><li><a href=\"#k8s_0\">k8s资源管理</a></li><li><ul><li><a href=\"#__3\">一. 资源管理</a></li><li><ul><li><a href=\"#1__5\">1. 介绍</a></li><li><a href=\"#2_YAML_22\">2. YAML语言介绍</a></li><li><ul><li><a href=\"#21_YAML_XMLJSON_YAML_24\">2.1 YAML是一个类似 XML、JSON 的标记性语言。它强调以**数据**为中心，并不是以标识语言为重点。因而YAML本身的定义比较简单，号称\"一种人性化的数据格式语言\"。</a></li><li><a href=\"#22_YAML_37\">2.2 YAML的语法比较简单，主要有下面几个：</a></li><li><a href=\"#23_YAML_45\">2.3 YAML支持以下几种数据类型：</a></li></ul>\n</li><li><a href=\"#3__105\">3. 资源管理方式</a></li><li><ul><li><a href=\"#31__135\">3.1 命令式对象管理</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_k8s_338\">二. k8s</a></li><li><ul><li><a href=\"#1_k8s_340\">1. k8s架构</a></li><li><ul><li><a href=\"#11_master_342\">1.1 master</a></li><li><a href=\"#12_nodes_349\">1.2 nodes</a></li></ul>\n</li><li><a href=\"#2_k8s_354\">2. k8s专业术语</a></li><li><ul><li><a href=\"#21_pod_356\">2.1 pod</a></li><li><a href=\"#22_node_368\">2.2 node</a></li></ul>\n</li><li><a href=\"#3_k8s_373\">3. k8s基础概念</a></li><li><ul><li><a href=\"#31_pod_375\">3.1 pod分类</a></li><li><a href=\"#32__396\">3.2 核心组件</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_k8s_423\">三. k8s命令介绍</a></li><li><ul><li><a href=\"#1__425\">1. 查看相关命令</a></li><li><ul><li><a href=\"#11__457\">1.1 简单命令示例</a></li></ul>\n</li><li><a href=\"#2__523\">2. 创建相关命令</a></li><li><ul><li><a href=\"#21_httpd_549\">2.1 创建httpd容器</a></li></ul>\n</li><li><a href=\"#3__589\">3. 删除相关命令</a></li><li><a href=\"#4_kubectl_600\">4. 命令详解kubectl</a></li><li><ul><li><a href=\"#41_delete_655\">4.1 delete，删除：</a></li></ul>\n</li></ul>\n</li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h3><a id=\"__3\"></a>一. 资源管理</h3>\n<h4><a id=\"1__5\"></a>1. 介绍</h4>\n<ul><li> <p><strong>在kubernetes中，所有的内容都抽象为资源，用户需要通过操作资源来管理kubernetes</strong></p> </li><li> <p>将资源放在文件中，用文件来管理</p> </li><li> <p>kubernetes的本质上就是一个集群系统，用户可以在集群中部署各种服务，所谓的部署服务，其实就是在kubernetes集群中运行一个个的容器，并将指定的程序跑在容器中。</p>\n<ul><li>镜像可以自己做，也可以使用官方的</li></ul> </li><li> <p>kubernetes的最小管理单元是pod而不是容器，所以只能将容器放在<code>Pod</code>中，而kubernetes一般也不会直接管理Pod，而是通过<code>Pod控制器</code>来管理Pod的。</p> </li><li> <p>Pod可以提供服务之后，就要考虑如何访问Pod中服务，kubernetes提供了<code>Service</code>资源实现这个功能。</p> </li><li> <p>如果Pod中程序的数据需要持久化，kubernetes还提供了各种<code>存储</code>系统。</p> </li></ul>\n<p><img alt=\"img\" src=\"image\\a7e1e122cfab5e78ef8cc5b69f295b1d.jpeg\"/></p>\n<pre><code class=\"prism language-basic\">通过service（相当于暴露端口号）来访问pod（容器）\n</code></pre>\n<h4><a id=\"2_YAML_22\"></a>2. YAML语言介绍</h4>\n<h5><a id=\"21_YAML_XMLJSON_YAML_24\"></a>2.1 YAML是一个类似 XML、JSON 的标记性语言。它强调以<strong>数据</strong>为中心，并不是以标识语言为重点。因而YAML本身的定义比较简单，号称\"一种人性化的数据格式语言\"。</h5>\n<pre><code class=\"prism language-basic\"><span class=\"token operator\">&lt;</span>wangqing<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>age<span class=\"token operator\">&gt;</span><span class=\"token number\">15</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>age<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>address<span class=\"token operator\">&gt;</span>Wuhan<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>address<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>wangqing<span class=\"token operator\">&gt;</span>\n\nwangqing<span class=\"token punctuation\">:</span>\n  age<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span>\n  address<span class=\"token punctuation\">:</span> Wuhan\n</code></pre>\n<h5><a id=\"22_YAML_37\"></a>2.2 YAML的语法比较简单，主要有下面几个：</h5>\n<ul><li>大小写敏感</li><li>使用缩进表示层级关系</li><li>缩进不允许使用tab，只允许空格( 低版本限制 )</li><li>缩进的空格数不重要，只要相同层级的元素左对齐即可</li><li>'#'表示注释</li></ul>\n<h5><a id=\"23_YAML_45\"></a>2.3 YAML支持以下几种数据类型：</h5>\n<ul><li> <p>纯量：单个的、不可再分的值</p> </li><li> <pre><code class=\"prism language-basic\"># 纯量<span class=\"token punctuation\">,</span> 就是指的一个简单的值，字符串、布尔值、整数、浮点数、Null、时间、日期\n# <span class=\"token number\">1</span> 布尔类型\nc1<span class=\"token punctuation\">:</span> true <span class=\"token punctuation\">(</span>或者True<span class=\"token punctuation\">)</span>\n# <span class=\"token number\">2</span> 整型\nc2<span class=\"token punctuation\">:</span> <span class=\"token number\">234</span>\n# <span class=\"token number\">3</span> 浮点型\nc3<span class=\"token punctuation\">:</span> <span class=\"token number\">3.14</span>\n# <span class=\"token number\">4</span> null类型 \nc4<span class=\"token punctuation\">:</span> ~  # 使用~表示null\n# <span class=\"token number\">5</span> 日期类型\nc5<span class=\"token punctuation\">:</span> <span class=\"token number\">2018</span><span class=\"token operator\">-</span><span class=\"token number\">02</span><span class=\"token operator\">-</span><span class=\"token number\">17</span>    # 日期必须使用ISO <span class=\"token number\">8601</span>格式，即yyyy<span class=\"token operator\">-</span>MM<span class=\"token operator\">-</span>dd\n# <span class=\"token number\">6</span> 时间类型\nc6<span class=\"token punctuation\">:</span> <span class=\"token number\">2018</span><span class=\"token operator\">-</span><span class=\"token number\">02</span><span class=\"token operator\">-</span><span class=\"token number\">17</span>T15<span class=\"token punctuation\">:</span><span class=\"token number\">02</span><span class=\"token punctuation\">:</span><span class=\"token number\">31</span><span class=\"token operator\">+</span><span class=\"token number\">08</span><span class=\"token punctuation\">:</span><span class=\"token number\">00</span>  # 时间使用ISO <span class=\"token number\">8601</span>格式，时间和日期之间使用T连接，最后使用<span class=\"token operator\">+</span>代表时区\n# <span class=\"token number\">7</span> 字符串类型\nc7<span class=\"token punctuation\">:</span> wangqing     # 简单写法，直接写值 <span class=\"token punctuation\">,</span> 如果字符串中间有特殊字符，必须使用双引号或者单引号包裹 \nc8<span class=\"token punctuation\">:</span> line1\n    line2     # 字符串过多的情况可以拆成多行，每一行会被转化成一个空格\n</code></pre> </li><li> <p>对象：键值对的集合，又称为映射（mapping）/ 哈希（hash） / 字典（dictionary）</p> </li><li> <pre><code class=\"prism language-basic\"># 对象\n# 形式一<span class=\"token punctuation\">(</span>推荐<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\nwangqing<span class=\"token punctuation\">:</span>\n  age<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span>\n  address<span class=\"token punctuation\">:</span> Wuhan\n# 形式二<span class=\"token punctuation\">(</span>了解<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\nwangqing<span class=\"token punctuation\">:</span> {age<span class=\"token punctuation\">:</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span>address<span class=\"token punctuation\">:</span> Wuhan}\n</code></pre> </li><li> <p>数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）</p> </li><li> <pre><code class=\"prism language-basic\"># 数组\n# 形式一<span class=\"token punctuation\">(</span>推荐<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\naddress<span class=\"token punctuation\">:</span>\n  <span class=\"token operator\">-</span> 武昌\n  <span class=\"token operator\">-</span> 江夏  \n# 形式二<span class=\"token punctuation\">(</span>了解<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\naddress<span class=\"token punctuation\">:</span> [武昌<span class=\"token punctuation\">,</span>江夏]\n</code></pre> </li><li> <pre><code class=\"prism language-basic\">小提示：\n\n<span class=\"token number\">1</span> 书写yaml切记<span class=\"token punctuation\">:</span> 后面有内容要加一个空格\n\n<span class=\"token number\">2</span> 如果需要将多段yaml配置放在一个文件中，中间要使用<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>分隔\n\n<span class=\"token number\">3</span> 下面是一个yaml转json的网站，可以通过它验证yaml是否书写正确\n\nhttps<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>www.json2yaml.<span class=\"token keyword\">com</span><span class=\"token operator\">/</span>convert<span class=\"token operator\">-</span>yaml<span class=\"token operator\">-</span><span class=\"token keyword\">to</span><span class=\"token operator\">-</span>json\n</code></pre> </li></ul>\n<h4><a id=\"3__105\"></a>3. 资源管理方式</h4>\n<ul><li> <p>命令式对象管理：直接使用命令去操作kubernetes资源</p> <p><code>kubectl run nginx-pod --image=nginx:1.17.1 --port=80</code></p> <pre><code class=\"prism language-basic\">[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">run</span> myhttpd <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>xiaoyinguhong<span class=\"token operator\">/</span>httpd<span class=\"token punctuation\">:</span>alpine<span class=\"token operator\">-</span><span class=\"token number\">2012.3</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>port<span class=\"token operator\">=</span><span class=\"token number\">80</span>\npod<span class=\"token operator\">/</span>myhttpd created\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">86</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">12</span>h\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>             <span class=\"token number\">20</span>m <span class=\"token operator\">/</span><span class=\"token operator\">/</span>控制器管理的pod\nmyhttpd                  <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>             <span class=\"token number\">14</span>s<span class=\"token operator\">/</span><span class=\"token operator\">/</span>自主式管理的pod\n</code></pre> </li><li> <p>命令式对象配置：通过命令配置和配置文件去操作kubernetes资源</p> <p><code>kubectl create/patch -f nginx-pod.yaml</code></p> </li><li> <p>声明式对象配置：通过apply命令和配置文件去操作kubernetes资源</p> <p><code>kubectl apply -f nginx-pod.yaml</code></p> </li></ul>\n<table><thead><tr><th>类型</th><th>操作对象</th><th>适用环境</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>命令式对象管理</td><td>对象</td><td>测试</td><td>简单</td><td>只能操作活动对象，无法审计、跟踪</td></tr><tr><td>命令式对象配置</td><td>文件</td><td>开发</td><td>可以审计、跟踪</td><td>项目大时，配置文件多，操作麻烦</td></tr><tr><td>声明式对象配置</td><td>目录</td><td>开发</td><td>支持目录操作</td><td>意外情况下难以调试</td></tr></tbody></table>\n<h5><a id=\"31__135\"></a>3.1 命令式对象管理</h5>\n<ul><li><strong>kubectl命令</strong></li></ul>\n<pre><code class=\"prism language-basic\">kubectl是kubernetes集群的命令行工具，通过它能够对集群本身进行管理，并能够在集群上进行容器化应用的安装部署。kubectl命令的语法如下<span class=\"token punctuation\">:</span>\n\nkubectl [command] [<span class=\"token keyword\">type</span>] [<span class=\"token keyword\">name</span>] [flags]\n</code></pre>\n<ul><li><strong>comand</strong>：指定要对资源执行的操作，例如create、get、delete</li><li><strong>type</strong>：指定资源类型，比如deployment、pod、service</li><li><strong>name</strong>：指定资源的名称，名称大小写敏感</li><li><strong>flags</strong>：指定额外的可选参数</li></ul>\n<pre><code class=\"prism language-basic\"># 查看所有pod\nkubectl <span class=\"token keyword\">get</span> pod \n\n# 查看某个pod\nkubectl <span class=\"token keyword\">get</span> pod pod_name\n\n# 查看某个pod<span class=\"token punctuation\">,</span>以yaml格式展示结果\nkubectl <span class=\"token keyword\">get</span> pod pod_name <span class=\"token operator\">-</span>o yaml\n\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods httpd <span class=\"token operator\">-</span>o yaml\n      \n      \n      \n      \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS       AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">104</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">12</span>h\nhttpd                    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">17</span>m\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">37</span>m\nmyhttpd                  <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">18</span>m\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>名字叫httpd的pod       \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods httpd\n<span class=\"token keyword\">NAME</span>    READY   <span class=\"token function\">STATUS</span>    RESTARTS   AGE\nhttpd   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>          <span class=\"token number\">17</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>名字叫httpd的控制器\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deployment httpd\n<span class=\"token keyword\">NAME</span>    READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\nhttpd   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">40</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]#           \n</code></pre>\n<ul><li><strong>资源类型</strong></li></ul>\n<pre><code class=\"prism language-basic\">kubernetes中所有的内容都抽象为资源，可以通过下面的命令进行查看<span class=\"token punctuation\">:</span>\n\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl api<span class=\"token operator\">-</span>resources\n</code></pre>\n<ul><li>经常使用的资源有下面这些：</li></ul>\n<table><thead><tr><th>资源分类</th><th>资源名称</th><th>缩写</th><th>资源作用</th></tr></thead><tbody><tr><td>集群级别资源</td><td>nodes</td><td>no</td><td>集群组成部分</td></tr><tr><td></td><td>namespaces</td><td>ns</td><td>隔离Pod</td></tr><tr><td>pod资源</td><td>pods</td><td>po</td><td>装载容器</td></tr><tr><td>pod资源控制器</td><td>replicationcontrollers</td><td>rc</td><td>控制pod资源</td></tr><tr><td></td><td>replicasets</td><td>rs</td><td>控制pod资源</td></tr><tr><td></td><td>deployments</td><td>deploy</td><td>控制pod资源</td></tr><tr><td></td><td>daemonsets</td><td>ds</td><td>控制pod资源</td></tr><tr><td></td><td>jobs</td><td></td><td>控制pod资源</td></tr><tr><td></td><td>cronjobs</td><td>cj</td><td>控制pod资源</td></tr><tr><td></td><td>horizontalpodautoscalers</td><td>hpa</td><td>控制pod资源</td></tr><tr><td></td><td>statefulsets</td><td>sts</td><td>控制pod资源</td></tr><tr><td>服务发现资源</td><td>services</td><td>svc</td><td>统一pod对外接口</td></tr><tr><td></td><td>ingress//控制访问，流向</td><td>ing</td><td>统一pod对外接口</td></tr><tr><td>存储资源</td><td>volumeattachments</td><td></td><td>存储</td></tr><tr><td></td><td>persistentvolumes</td><td>pv</td><td>存储</td></tr><tr><td></td><td>persistentvolumeclaims</td><td>pvc</td><td>存储</td></tr><tr><td>配置资源</td><td>configmaps</td><td>cm</td><td>配置</td></tr><tr><td></td><td>secrets</td><td></td><td>配置</td></tr></tbody></table>\n<ul><li><strong>操作</strong></li></ul>\n<pre><code class=\"prism language-basic\">kubernetes允许对资源进行多种操作，可以通过<span class=\"token operator\">-</span><span class=\"token operator\">-</span>help查看详细的操作命令\n\nkubectl <span class=\"token operator\">-</span><span class=\"token operator\">-</span>help\n</code></pre>\n<ul><li>经常使用的操作有下面这些：</li></ul>\n<table><thead><tr><th>命令分类</th><th>命令</th><th>翻译</th><th>命令作用</th></tr></thead><tbody><tr><td>基本命令</td><td>create</td><td>创建</td><td>创建一个资源</td></tr><tr><td></td><td>edit</td><td>编辑</td><td>编辑一个资源</td></tr><tr><td></td><td>get</td><td>获取</td><td>获取一个资源</td></tr><tr><td></td><td>patch</td><td>更新</td><td>更新一个资源</td></tr><tr><td></td><td>delete</td><td>删除</td><td>删除一个资源</td></tr><tr><td></td><td>explain</td><td>解释</td><td>展示资源文档</td></tr><tr><td>运行和调试</td><td>run</td><td>运行</td><td>在集群中运行一个指定的镜像</td></tr><tr><td></td><td>expose</td><td>暴露</td><td>暴露资源为Service</td></tr><tr><td></td><td>describe</td><td>描述</td><td>显示资源内部信息</td></tr><tr><td></td><td>logs</td><td>日志输出容器在 pod 中的日志</td><td>输出容器在 pod 中的日志</td></tr><tr><td></td><td>attach</td><td>缠绕进入运行中的容器</td><td>进入运行中的容器</td></tr><tr><td></td><td>exec</td><td>执行容器中的一个命令</td><td>执行容器中的一个命令</td></tr><tr><td></td><td>cp</td><td>复制</td><td>在Pod内外复制文件</td></tr><tr><td></td><td>rollout</td><td>首次展示</td><td>管理资源的发布</td></tr><tr><td></td><td>scale</td><td>规模</td><td>扩(缩)容Pod的数量</td></tr><tr><td></td><td>autoscale</td><td>自动调整</td><td>自动调整Pod的数量</td></tr><tr><td>高级命令</td><td>apply</td><td>rc</td><td>通过文件对资源进行配置</td></tr><tr><td></td><td>label</td><td>标签</td><td>更新资源上的标签</td></tr><tr><td>其他命令</td><td>cluster-info</td><td>集群信息</td><td>显示集群信息</td></tr><tr><td></td><td>version</td><td>版本</td><td>显示当前Server和Client的版本</td></tr></tbody></table>\n<ul><li> <pre><code class=\"prism language-basic\">[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl cluster<span class=\"token operator\">-</span>info\nKubernetes control plane <span class=\"token function\">is</span> running <span class=\"token function\">at</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">192.168</span><span class=\"token number\">.232</span><span class=\"token number\">.128</span><span class=\"token punctuation\">:</span><span class=\"token number\">6443</span>\nCoreDNS <span class=\"token function\">is</span> running <span class=\"token function\">at</span> https<span class=\"token punctuation\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span><span class=\"token number\">192.168</span><span class=\"token number\">.232</span><span class=\"token number\">.128</span><span class=\"token punctuation\">:</span><span class=\"token number\">6443</span><span class=\"token operator\">/</span>api<span class=\"token operator\">/</span>v1<span class=\"token operator\">/</span>namespaces<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span><span class=\"token operator\">/</span>services<span class=\"token operator\">/</span>kube<span class=\"token operator\">-</span>dns<span class=\"token punctuation\">:</span>dns<span class=\"token operator\">/</span>proxy\n\n<span class=\"token keyword\">To</span> further <span class=\"token function\">debug</span> <span class=\"token operator\">and</span> diagnose cluster problems<span class=\"token punctuation\">,</span> <span class=\"token function\">use</span> 'kubectl cluster<span class=\"token operator\">-</span>info dump'.\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n</code></pre> </li><li> <p>以一个namespace / pod的创建和删除简单演示下命令的使用</p> </li></ul>\n<pre><code class=\"prism language-basic\"><span class=\"token number\">1.</span>获取namespace\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> ns\n<span class=\"token keyword\">NAME</span>              <span class=\"token function\">STATUS</span>   AGE\ndefault           Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>flannel      Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>node<span class=\"token operator\">-</span>lease   Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>public       Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>       Active   <span class=\"token number\">21</span>h\n\n<span class=\"token number\">2.</span>创建一个namespace<span class=\"token punctuation\">(</span>名称空间<span class=\"token punctuation\">)</span>\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl create ns mushuang\nnamespace<span class=\"token operator\">/</span>mushuang created\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> ns\n<span class=\"token keyword\">NAME</span>              <span class=\"token function\">STATUS</span>   AGE\ndefault           Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>flannel      Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>node<span class=\"token operator\">-</span>lease   Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span>public       Active   <span class=\"token number\">21</span>h\nkube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>       Active   <span class=\"token number\">21</span>h\nmushuang          Active   <span class=\"token number\">3</span>s\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n\n<span class=\"token number\">3.</span>在此namespace下创建并运行一个nginx的Pod，<span class=\"token operator\">-</span>n指定名称空间，不指定在默认位置运行\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">run</span> pod <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>nginx <span class=\"token operator\">-</span>n mushuang\npod<span class=\"token operator\">/</span>pod created\n\n<span class=\"token number\">4.</span>查看新创建的pod    \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>n mushuang\n<span class=\"token keyword\">NAME</span>   READY   <span class=\"token function\">STATUS</span>    RESTARTS   AGE\npod    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>          <span class=\"token number\">19</span>s\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n    \n<span class=\"token number\">5.</span>\nkubectl <span class=\"token function\">delete</span> pod pod <span class=\"token operator\">-</span>n mushuang\n前面的pod是对象，后面的pod是名称，<span class=\"token operator\">-</span>n，指定名称空间\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>n mushuang\n<span class=\"token keyword\">NAME</span>   READY   <span class=\"token function\">STATUS</span>    RESTARTS   AGE\npod    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>          <span class=\"token number\">3</span>m45s\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token function\">delete</span> pod pod <span class=\"token operator\">-</span>n mushuang\npod <span class=\"token string\">\"pod\"</span> deleted\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>n mushuang\nNo resources found <span class=\"token function\">in</span> mushuang namespace.\n[root@k8s<span class=\"token operator\">-</span>master ~]#       \n      \n<span class=\"token number\">6.</span>删除指定的pod  \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS       AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">134</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">13</span>h\nhttpd                    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">47</span>m\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">68</span>m\nmyhttpd                  <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">48</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token function\">delete</span> pod myhttpd\npod <span class=\"token string\">\"myhttpd\"</span> deleted\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n      \n      \n<span class=\"token number\">7.</span>删除指定的控制器，然后pod就删除了\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS       AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">137</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">13</span>h\nhttpd                    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">50</span>m\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">70</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deploy\n<span class=\"token keyword\">NAME</span>     READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\napache   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">13</span>h\nhttpd    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">71</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token function\">delete</span> deploy httpd\ndeployment.apps <span class=\"token string\">\"httpd\"</span> deleted\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deploy\n<span class=\"token keyword\">NAME</span>     READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\napache   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">13</span>h\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS       AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">138</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">13</span>h\nhttpd                    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>              <span class=\"token number\">52</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]#       \n</code></pre>\n<h3><a id=\"_k8s_338\"></a>二. k8s</h3>\n<h4><a id=\"1_k8s_340\"></a>1. k8s架构</h4>\n<h5><a id=\"11_master_342\"></a>1.1 master</h5>\n<ul><li>api server：负责接收并处理请求</li><li>scheduler：调度容器创建的请求</li><li>controller：确保已创建的容器处于健康状态</li><li>controller manager：确保后端节点上的控制器处于健康状态</li></ul>\n<h5><a id=\"12_nodes_349\"></a>1.2 nodes</h5>\n<ul><li>kubelet：与master通信的集群代理</li><li>容器引擎：docker</li></ul>\n<h4><a id=\"2_k8s_354\"></a>2. k8s专业术语</h4>\n<h5><a id=\"21_pod_356\"></a>2.1 pod</h5>\n<ul><li> <p>K8s的最小调度逻辑单元</p> </li><li> <p>pod可以理解为是容器的外壳，它为容器做了一层抽象的封装</p> </li><li> <p>pod内部主要是用来放容器的</p> </li><li> <p>pod的特点是可以将多个容器加入到同一个网络名称空间中</p> </li><li> <p>一个pod中可以包含多个容器</p> </li><li> <p>同一个pod中的不同容器可以共享存储卷</p>\n<ul><li><img alt=\"在这里插入图片描述\" src=\"image\\30e2f1f0f6d348db9ccfda391da3a806.png\"/></li></ul> </li><li> <p>一个pod上无论是有一个容器还是有多个容器，一旦将此pod调度到某node上运行时,这一个pod内的所有容器只能运行在同一个node上</p> </li></ul>\n<h5><a id=\"22_node_368\"></a>2.2 node</h5>\n<ul><li>node是k8s集群中的工作节点,负责运行由master指派的各种任务。而最核心的任务就是以pod形式运行容器</li><li>node可以是任何形式的计算设备，只要此设备上能够有传统意义上的CPU、内存、存储空间,并且能装上k8s的集群代理程序，它都可以作为整个k8s集群一个成员</li></ul>\n<h4><a id=\"3_k8s_373\"></a>3. k8s基础概念</h4>\n<h5><a id=\"31_pod_375\"></a>3.1 pod分类</h5>\n<ul><li> <p>自主式pod</p>\n<ul><li>自我管理的pod，创建以后仍然需要提交给apiserver，由apiserver接收以后借助于调度器将其调度至指定的node节点,由node启动此pod</li><li>如果此pod出现故障,需要重启容器则由kubelet来完成</li><li>如果node节点故障了，那么此pod将会消失。其无法实现全局调度。所以不推荐使用此种pod</li></ul> </li><li> <p>控制器管理的pod</p>\n<ul><li>ReplicationController：当启动一个pod时，这个pod如果不够用可以再启一个副本，而后由控制器来管理同一类pod的各种副本与对象。一旦副本少了就会自动增加。采取多退少补的规则,精确符合我们所定义的期望（多的减少，少的增加）。</li><li>支持滚动更新（一部分，一部分的更新）</li></ul> </li><li> <p>常见的pod控制器</p>\n<ul><li>ReplicaSet：由一个名叫Deployment的声明式更新的控制器来管理</li><li>Deployment：Deployment只能管理无状态的应用（有状态：容器里面有数据，无状态：容器里面没数据）</li><li>StateFulSet：有状态副本集,可以管理有状态的应用</li><li>DaemonSet：如果需要在每个node上运行一个副本的时候可以DaemonSet</li><li>Job</li><li>Cronjob</li><li>以上每种控制器都是用来实现一<br/> 种特定的应用管理的。</li></ul> </li></ul>\n<h5><a id=\"32__396\"></a>3.2 核心组件</h5>\n<ul><li> <p>hpa</p>\n<ul><li>Deployment还支持二级控制器</li><li>HPA(HorizontalPodAutoscaler，水平pod自动伸缩控制器)，自动根据你的要求（定义范围）进行增加和删除</li><li>—般情况下我们可以确保一个node上有2个pod在运行，万一用户访问流量增加，2个pod不足以承载这么多访问量怎么办?此时我们就应该要增加pod资源,那么到底应该加几个?</li><li>HPA控制器可自动监控pod、自动进行扩展。（可以根据自己定义的范围进行自动监控）</li></ul> </li><li> <p>service</p>\n<ul><li> <p>服务发现，</p> </li><li> <p>pod是有生命周期的,一个pod随时都有可能离去，随时都有可能会有其他pod加进来,假如它们提供的是同一种服务，客户端是无法通过固定的手段来访问这些pod的，因为pod本身是不固定的,它们随时可能被替换掉,无论使用主机名还是IP地址,都随时会被替换掉。</p> </li><li> <p>为了尽可能的降低客户端与pod间协调的复杂度，k8s为每一组提供同类服务的pod和其客广端之间添加了一个中间层，这个中间层是固定的，这个中间层就叫service</p> </li><li> <p>中间层<br/> <img alt=\"在这里插入图片描述\" src=\"image\\a07cb5930b2849cfa7dd2685f5fa332b.png\"/></p>\n<ul><li>service只要不被删除,其地址与名称皆是固定的,当客户端需要在其配置文件中写上访问某个服务时,它不再需要自动发现，只需要在配置文件中写明service的名称即可，而这个service是个调度器，其不但能够提供一个稳定的访问入口,还可以做反向代理,当service接收到客户端的请求后,会将其代理到后端的pod之上，一旦pod宕机了会立即新建一个pod，这个新建的pod会立即被service关联上，作为service后端的可用pod之一</li></ul> </li><li> <p>客户端程序访问服务都是通过IP+端口或者主机名+端口的方式来实现的。而service关联后端的pod不是靠它的lP和主机名，而是靠pod的标签选择器。只要创建的pod的label是统一的，无论P地址和主机如何改变，其都能被service所识别。只要pod属于标签选择器，只要其在service的管理范围之内,则具就会被关联到service中，当这个动态的pod关联到service中之后，再进行动态的探测此pod的P地址、端口，再将其作为自己后端可调度的可用服务器主机对象。因此,客户端的请求发送到service，然后由service代理到后端真实的pod中的容器进行响应。</p> </li><li> <p>service不是一个程序,也不是一个组件,它只是一个iptables的dnat规则</p> </li><li> <p>service作为k8s的对象,有其自身的名称,而service的名称相当于服务的名称,而这个名称可以被解析。</p> </li></ul> </li><li> <p>addons附件</p>\n<ul><li>dns pod \n    <ul><li>装完k8s后第一件事就需要在k8s集群上部署一个dns pod，以确保各service的名称能够被解析</li><li>可以动态改变,包括动态创建、动态删除、动态修改</li><li>比如把service的名称改了，dnspod会自动触发，将dns解析记录中的名称也给改掉;假如我们手动把service的ip地址给改了，改完以后会自动触发，将dns服务中的解析记录给改掉。</li><li>如此一来，客户端去访问pod资源的时候可以直接访问service的名称,然后由集群中专用的dns服务来负责解析。</li></ul> </li><li>这种pod是k8s自身的服务就需要用到的pod，所以我们把它称为<strong>基础性的系统架构级的pod对象，而且它们也被称为集群附件</strong></li></ul> </li></ul>\n<h3><a id=\"_k8s_423\"></a>三. k8s命令介绍</h3>\n<h4><a id=\"1__425\"></a>1. 查看相关命令</h4>\n<pre><code class=\"prism language-basic\">#查看kubeadm生成的token\nkubeadm token list\n\nkubectl <span class=\"token keyword\">get</span> nodes                           #查看节点的状态：\nkubectl <span class=\"token keyword\">get</span> pod <span class=\"token operator\">-</span><span class=\"token operator\">-</span>all<span class=\"token operator\">-</span>namespaces            #查看pod的状态\n#<span class=\"token operator\">-</span><span class=\"token operator\">-</span>all<span class=\"token operator\">-</span>namespaces #查看全部namespaces的pod\nkubectl <span class=\"token keyword\">get</span> pod <span class=\"token operator\">-</span><span class=\"token operator\">-</span>all<span class=\"token operator\">-</span>namespaces <span class=\"token operator\">-</span>o wide    #查看pod在各个node上面的分布\n#<span class=\"token operator\">-</span>o wide #查看pod的分布情况\nkubectl <span class=\"token keyword\">get</span> deployment [nginx<span class=\"token operator\">-</span>deployment]                     #查看部署状态\nkubectl <span class=\"token keyword\">get</span> deployment <span class=\"token operator\">-</span><span class=\"token operator\">-</span>namespace<span class=\"token operator\">=</span>kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>  #查看系统namespace中的kube<span class=\"token operator\">-</span>dns组件\nkubectl <span class=\"token keyword\">get</span> replicaset                  #查看部署状态\nkubectl <span class=\"token keyword\">get</span> daemonset <span class=\"token operator\">-</span><span class=\"token operator\">-</span>namespace<span class=\"token operator\">=</span>kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span> #查看用daemonset运行的系统组件\nkubectl <span class=\"token keyword\">get</span> node <span class=\"token operator\">-</span><span class=\"token operator\">-</span>show<span class=\"token operator\">-</span>labels  #查看node的label\nkubectl <span class=\"token keyword\">get</span> job <span class=\"token operator\">-</span><span class=\"token operator\">-</span>show<span class=\"token operator\">-</span>all #查看job任务\nkubectl <span class=\"token keyword\">get</span> cronjob  #查看cronjob任务\nkubectl <span class=\"token keyword\">get</span> namespace #查看运行中的namespace\nkubectl <span class=\"token keyword\">get</span> pv #查看pv\nkubectl <span class=\"token keyword\">get</span> pvc #查看pvc\nkubectl <span class=\"token keyword\">get</span> secret [mysecret]  #查看存在的secret\nkubectl <span class=\"token keyword\">get</span> configmap [myconfigmap] #查看存在的configmap\nkubectl describe pod <span class=\"token operator\">&lt;</span>Pod <span class=\"token keyword\">Name</span><span class=\"token operator\">&gt;</span> [<span class=\"token operator\">-</span><span class=\"token operator\">-</span>namespace<span class=\"token operator\">=</span>kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>] #查看pod的具体运行情况，或者启动日志\nkubectl describe deployment #了解deployment的详细信息\nkubectl describe replicaset #了解replicaset的详细信息\nkubectl describe secret [mysecret]  #查看secret条目的<span class=\"token keyword\">key</span>\nkubectl describe configmap [myconfigmap] #查看configmap\nkubectl logs pod（id） <span class=\"token operator\">-</span>n kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>  #查看pod日志\nkubectl logs myjob<span class=\"token operator\">-</span>nfkxk  #查看job执行的结果\n</code></pre>\n<h5><a id=\"11__457\"></a>1.1 简单命令示例</h5>\n<pre><code class=\"prism language-basic\">查看帮助：kubectl <span class=\"token keyword\">get</span> <span class=\"token operator\">-</span>h\n\n\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>查看节点的状态<span class=\"token punctuation\">,</span>查看默认空间pod的状态<span class=\"token punctuation\">,</span>获取节点信息\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods<span class=\"token operator\">/</span>pod\n<span class=\"token keyword\">NAME</span>                    READY   <span class=\"token function\">STATUS</span>    RESTARTS        AGE\nnginx<span class=\"token operator\">-</span><span class=\"token number\">76</span>d6c9b8c<span class=\"token operator\">-</span>s85j8   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">7</span>m44s ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">157</span>m\n\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>查看所有的节点 \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> nodes\n<span class=\"token keyword\">NAME</span>         <span class=\"token function\">STATUS</span>   ROLES           AGE    VERSION\nk8s<span class=\"token operator\">-</span>master   Ready    control<span class=\"token operator\">-</span>plane   <span class=\"token number\">8</span>h     v1.<span class=\"token number\">25.0</span>\nk8s<span class=\"token operator\">-</span>node1    Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>          <span class=\"token number\">177</span>m   v1.<span class=\"token number\">25.0</span>\nk8s<span class=\"token operator\">-</span>node2    Ready    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>          <span class=\"token number\">176</span>m   v1.<span class=\"token number\">25.0</span>\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n \n\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>查看名称空间<span class=\"token punctuation\">,</span>获取命名空间列表\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> ns<span class=\"token operator\">/</span>namespaces \n<span class=\"token keyword\">NAME</span>              <span class=\"token function\">STATUS</span>   AGE\ndefault           Active   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>flannel      Active   <span class=\"token number\">7</span>h58m\nkube<span class=\"token operator\">-</span>node<span class=\"token operator\">-</span>lease   Active   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>public       Active   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>       Active   <span class=\"token number\">8</span>h\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n\n      \n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>获取【kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>命名空间】下的pod列表<span class=\"token punctuation\">,</span>查看系统名称空间 <span class=\"token operator\">-</span>n指定访问的空间，查看系统namespace中的kube<span class=\"token operator\">-</span>dns组件       \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>n kube<span class=\"token operator\">-</span><span class=\"token keyword\">system</span>\n<span class=\"token keyword\">NAME</span>                                 READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE\ncoredns<span class=\"token operator\">-</span>c676cc86f<span class=\"token operator\">-</span><span class=\"token number\">44</span>bsf              <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\ncoredns<span class=\"token operator\">-</span>c676cc86f<span class=\"token operator\">-</span>fbb7f              <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\netcd<span class=\"token operator\">-</span>k8s<span class=\"token operator\">-</span>master                      <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>apiserver<span class=\"token operator\">-</span>k8s<span class=\"token operator\">-</span>master            <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>controller<span class=\"token operator\">-</span>manager<span class=\"token operator\">-</span>k8s<span class=\"token operator\">-</span>master   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">5</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>proxy<span class=\"token operator\">-</span><span class=\"token number\">65</span>lcn                     <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\nkube<span class=\"token operator\">-</span>proxy<span class=\"token operator\">-</span>lw4z2                     <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">3</span>h\nkube<span class=\"token operator\">-</span>proxy<span class=\"token operator\">-</span>zskvf                     <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">4</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">3</span>h1m\nkube<span class=\"token operator\">-</span>scheduler<span class=\"token operator\">-</span>k8s<span class=\"token operator\">-</span>master            <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">6</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">8</span>h\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n\n        \n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>查看rc和sercice<span class=\"token operator\">/</span>svc列表        \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> rc<span class=\"token punctuation\">,</span>service\n<span class=\"token keyword\">NAME</span>                 <span class=\"token keyword\">TYPE</span>        CLUSTER<span class=\"token operator\">-</span><span class=\"token function\">IP</span>       <span class=\"token function\">EXTERNAL</span><span class=\"token operator\">-</span><span class=\"token function\">IP</span>   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>        AGE\nservice<span class=\"token operator\">/</span>kubernetes   ClusterIP   <span class=\"token number\">10.96</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>        <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>        <span class=\"token number\">443</span><span class=\"token operator\">/</span>TCP        <span class=\"token number\">8</span>h\nservice<span class=\"token operator\">/</span>nginx        NodePort    <span class=\"token number\">10.105</span><span class=\"token number\">.183</span><span class=\"token number\">.188</span>   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>        <span class=\"token number\">80</span><span class=\"token punctuation\">:</span><span class=\"token number\">30735</span><span class=\"token operator\">/</span>TCP   <span class=\"token number\">167</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n\n          \n<span class=\"token operator\">/</span><span class=\"token operator\">/</span> 以ps输出格式列出所有pod，并提供更多信息<span class=\"token punctuation\">(</span>如节点名称<span class=\"token punctuation\">)</span>\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>o wide\n<span class=\"token keyword\">NAME</span>                    READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE    <span class=\"token function\">IP</span>           NODE        NOMINATED NODE   READINESS GATES\nnginx<span class=\"token operator\">-</span><span class=\"token number\">76</span>d6c9b8c<span class=\"token operator\">-</span>s85j8   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">21</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">171</span>m   <span class=\"token number\">10.244</span><span class=\"token number\">.2</span><span class=\"token number\">.5</span>   k8s<span class=\"token operator\">-</span>node2   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>           <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n\n<span class=\"token operator\">/</span><span class=\"token operator\">/</span>获取类型为Deployment（控制器）的资源列表      [root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deployment\n<span class=\"token keyword\">NAME</span>    READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\nnginx   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">173</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]#                 \n</code></pre>\n<h4><a id=\"2__523\"></a>2. 创建相关命令</h4>\n<pre><code class=\"prism language-basic\">#创建token\nkubeadm token create\n#获取ca证书sha256编码hash值\nopenssl x509 <span class=\"token operator\">-</span>pubkey <span class=\"token operator\">-</span><span class=\"token function\">in</span> <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>kubernetes<span class=\"token operator\">/</span>pki<span class=\"token operator\">/</span>ca.crt | openssl rsa <span class=\"token operator\">-</span>pubin <span class=\"token operator\">-</span>outform der <span class=\"token number\">2</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>null | openssl dgst <span class=\"token operator\">-</span>sha256 <span class=\"token operator\">-</span>hex | sed 's<span class=\"token operator\">/</span><span class=\"token operator\">^</span>.<span class=\"token operator\">*</span> <span class=\"token operator\">/</span><span class=\"token operator\">/</span>'\n\nkubectl <span class=\"token keyword\">run</span> httpd<span class=\"token operator\">-</span>app <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>httpd <span class=\"token operator\">-</span><span class=\"token operator\">-</span>replicas<span class=\"token operator\">=</span><span class=\"token number\">2</span> #运行俩个pod\n    #httpd<span class=\"token operator\">-</span>app      #命名为httpd<span class=\"token operator\">-</span>app\n    #<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>httpd  #镜像名\n    #replicas<span class=\"token operator\">=</span><span class=\"token number\">2</span>     #启动俩个pod\n    \n#通过配置文件启动\nkubectl apply <span class=\"token operator\">-</span>f nginx.yaml\n\nkubectl apply <span class=\"token operator\">-</span>f httpd.v1.yml <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">record</span>\n  #<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">record</span>  作用是将当前命令记录到revision记录中，这样就知道每个revison对应的那个配置文件。\n  #可以通过kubectl rollout history deployment httpd来查看revison历史记录\n#创建namespace：\nkubectl create  namespace weave\n  \nkubectl create configmap myconfigmap <span class=\"token operator\">-</span><span class=\"token operator\">-</span>from<span class=\"token operator\">-</span>file<span class=\"token operator\">=</span>.<span class=\"token operator\">/</span>logging.conf  #通过<span class=\"token operator\">-</span><span class=\"token operator\">-</span>from<span class=\"token operator\">-</span>file方式创建configmap\nkubectl create secret generic mysecret <span class=\"token operator\">-</span><span class=\"token operator\">-</span>from<span class=\"token operator\">-</span>literal<span class=\"token operator\">=</span>username<span class=\"token operator\">=</span>admin <span class=\"token operator\">-</span><span class=\"token operator\">-</span>from<span class=\"token operator\">-</span>literal<span class=\"token operator\">=</span>password<span class=\"token operator\">=</span><span class=\"token number\">12345</span>  #通过<span class=\"token operator\">-</span><span class=\"token operator\">-</span>from<span class=\"token operator\">-</span>literal方式创建secret\n</code></pre>\n<h5><a id=\"21_httpd_549\"></a>2.1 创建httpd容器</h5>\n<pre><code class=\"prism language-basic\">[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl create deployment apache <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>httpd\ndeployment.apps<span class=\"token operator\">/</span>apache created\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl expose deployment apache <span class=\"token operator\">-</span><span class=\"token operator\">-</span>port<span class=\"token operator\">=</span><span class=\"token number\">80</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token keyword\">type</span><span class=\"token operator\">=</span>NodePort\nservice<span class=\"token operator\">/</span>apache exposed\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pod<span class=\"token punctuation\">,</span>svc\n  <span class=\"token keyword\">NAME</span>                         READY   <span class=\"token function\">STATUS</span>              RESTARTS      AGE\npod<span class=\"token operator\">/</span>apache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     ContainerCreating   <span class=\"token number\">0</span>             <span class=\"token number\">34</span>s\npod<span class=\"token operator\">/</span>nginx<span class=\"token operator\">-</span><span class=\"token number\">76</span>d6c9b8c<span class=\"token operator\">-</span>s85j8    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running             <span class=\"token number\">3</span> <span class=\"token punctuation\">(</span><span class=\"token number\">38</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">3</span>h8m\n\n<span class=\"token keyword\">NAME</span>                 <span class=\"token keyword\">TYPE</span>        CLUSTER<span class=\"token operator\">-</span><span class=\"token function\">IP</span>       <span class=\"token function\">EXTERNAL</span><span class=\"token operator\">-</span><span class=\"token function\">IP</span>   PORT<span class=\"token punctuation\">(</span>S<span class=\"token punctuation\">)</span>        AGE\nservice<span class=\"token operator\">/</span>apache       NodePort    <span class=\"token number\">10.100</span><span class=\"token number\">.81</span><span class=\"token number\">.244</span>    <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>        <span class=\"token number\">80</span><span class=\"token punctuation\">:</span><span class=\"token number\">31552</span><span class=\"token operator\">/</span>TCP   <span class=\"token number\">7</span>s\nservice<span class=\"token operator\">/</span>kubernetes   ClusterIP   <span class=\"token number\">10.96</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span>        <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>        <span class=\"token number\">443</span><span class=\"token operator\">/</span>TCP        <span class=\"token number\">8</span>h\nservice<span class=\"token operator\">/</span>nginx        NodePort    <span class=\"token number\">10.105</span><span class=\"token number\">.183</span><span class=\"token number\">.188</span>   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>        <span class=\"token number\">80</span><span class=\"token punctuation\">:</span><span class=\"token number\">30735</span><span class=\"token operator\">/</span>TCP   <span class=\"token number\">3</span>h7m\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n  \n使用仓库镜像：  \n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl create deployment httpd <span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token function\">image</span><span class=\"token operator\">=</span>xiaoyinguhong<span class=\"token operator\">/</span>httpd<span class=\"token punctuation\">:</span>alpine<span class=\"token operator\">-</span><span class=\"token number\">2012.3</span>\ndeployment.apps<span class=\"token operator\">/</span>httpd created\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deployment\n<span class=\"token keyword\">NAME</span>     READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\napache   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">12</span>h\nhttpd    <span class=\"token number\">0</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">0</span>           <span class=\"token number\">20</span>s\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">77</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">12</span>h\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>             <span class=\"token number\">11</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods <span class=\"token operator\">-</span>o wide\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE   <span class=\"token function\">IP</span>           NODE        NOMINATED NODE   READINESS GATES\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">77</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">12</span>h   <span class=\"token number\">10.244</span><span class=\"token number\">.1</span><span class=\"token number\">.3</span>   k8s<span class=\"token operator\">-</span>node1   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>           <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>\nhttpd<span class=\"token operator\">-</span><span class=\"token number\">86</span>f7c74499<span class=\"token operator\">-</span><span class=\"token number\">6</span>qmkf   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">0</span>             <span class=\"token number\">11</span>m   <span class=\"token number\">10.244</span><span class=\"token number\">.2</span><span class=\"token number\">.7</span>   k8s<span class=\"token operator\">-</span>node2   <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>           <span class=\"token operator\">&lt;</span>none<span class=\"token operator\">&gt;</span>\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> deployment\n<span class=\"token keyword\">NAME</span>     READY   UP<span class=\"token operator\">-</span><span class=\"token keyword\">TO</span><span class=\"token operator\">-</span><span class=\"token function\">DATE</span>   AVAILABLE   AGE\napache   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">12</span>h\nhttpd    <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     <span class=\"token number\">1</span>            <span class=\"token number\">1</span>           <span class=\"token number\">11</span>m\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n</code></pre>\n<h4><a id=\"3__589\"></a>3. 删除相关命令</h4>\n<pre><code class=\"prism language-basic\">kubectl <span class=\"token function\">delete</span> deployment nginx<span class=\"token operator\">-</span>deployment  #删除deployment任务\nkubectl <span class=\"token function\">delete</span> <span class=\"token operator\">-</span>f nginx.yml   #删除deployment任务\n\nkubectl <span class=\"token function\">delete</span> pods <span class=\"token operator\">&lt;</span>pod<span class=\"token operator\">&gt;</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>grace<span class=\"token operator\">-</span>period<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token operator\">-</span><span class=\"token operator\">-</span>force  #删除pod\n\nkubectl <span class=\"token function\">delete</span> pvc mypvc1 #删除pvc中的mypvc1\n</code></pre>\n<h4><a id=\"4_kubectl_600\"></a>4. 命令详解kubectl</h4>\n<pre><code class=\"prism language-basic\">[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token operator\">-</span>h\ncreate 创建，从文件或stdin创建资源\nexpose 将复制控制器、服务、部署或吊舱作为一个新的Kubernetes服务公开        \n<span class=\"token keyword\">run</span>             在集群上运行特定镜像\n<span class=\"token function\">set</span>             为对象设置指定特性\nexplain         获取资源的文档\n<span class=\"token keyword\">get</span>             显示一个或多个资源\nedit            编辑服务器上的资源\n<span class=\"token function\">delete</span>         按文件名、标准输入、资源和名称或按资源和标签选择器删除资源  \n\n集群管理命令<span class=\"token punctuation\">:</span>\n  certificate     修改证书资源。\n  cluster<span class=\"token operator\">-</span>info    显示集群信息\n  top             显示资源<span class=\"token punctuation\">(</span>CPU<span class=\"token operator\">/</span>内存<span class=\"token punctuation\">)</span>使用情况\n  cordon          标记节点为不可调度\n  uncordon        标记节点为可调度\n  drain           清空节点以准备维护\n  taint           更新一个或者多个节点上的污点\n\n故障处理和调试命令<span class=\"token punctuation\">:</span>\n  describe        显示特定资源或资源组的详细信息\n  logs            打印 Pod 中容器的日志\n  attach          挂接到一个运行中的容器\n  exec            在某个容器中执行一个命令\n  port<span class=\"token operator\">-</span>forward    将一个或多个本地端口转发到某个 Pod\n  proxy           运行一个指向 Kubernetes API 服务器的代理\n  cp              从容器中复制文件和目录\n  auth            Inspect authorization\n  <span class=\"token function\">debug</span>           Create debugging sessions <span class=\"token keyword\">for</span> troubleshooting workloads <span class=\"token operator\">and</span> nodes\n\n    \n先进的命令<span class=\"token punctuation\">:</span>\n  diff           区别实际版本和潜在应用版本\n  apply          通过文件名或标准输入将配置应用到资源\n  patch          更新资源的字段\n  replace         用文件名或标准输入替换资源\n  <span class=\"token keyword\">wait</span>            实验性<span class=\"token punctuation\">:</span>在一个或多个资源上等待特定条件\n  kustomize       从目录或URL构建定制化目标。\n\nSettings Commands<span class=\"token punctuation\">:</span>\n  label           更新某资源上的标签\n  annotate        更新一个资源的注解\n  completion      输出指定<span class=\"token keyword\">shell</span> <span class=\"token punctuation\">(</span>bash、zsh、fish或powershell<span class=\"token punctuation\">)</span>的<span class=\"token keyword\">shell</span>完成代码\n\nOther Commands<span class=\"token punctuation\">:</span>\n  alpha          alpha功能的命令\n  api<span class=\"token operator\">-</span>resources  打印服务器上支持的API资源\n  api<span class=\"token operator\">-</span>versions    在服务器上以“组<span class=\"token operator\">/</span>版本”的形式打印支持的API版本\n  config          修改 kubeconfig 文件\n  version         输出客户端和服务端的版本信息\n</code></pre>\n<h5><a id=\"41_delete_655\"></a>4.1 delete，删除：</h5>\n<pre><code class=\"prism language-basic\">[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token function\">delete</span> deployment nginx\ndeployment.apps <span class=\"token string\">\"nginx\"</span> deleted\n[root@k8s<span class=\"token operator\">-</span>master ~]# kubectl <span class=\"token keyword\">get</span> pods\n<span class=\"token keyword\">NAME</span>                     READY   <span class=\"token function\">STATUS</span>    RESTARTS      AGE\napache<span class=\"token operator\">-</span><span class=\"token number\">855464645</span><span class=\"token operator\">-</span><span class=\"token number\">4</span>zxf2   <span class=\"token number\">1</span><span class=\"token operator\">/</span><span class=\"token number\">1</span>     Running   <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span><span class=\"token number\">23</span>m ago<span class=\"token punctuation\">)</span>   <span class=\"token number\">11</span>h\n[root@k8s<span class=\"token operator\">-</span>master ~]# \n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}