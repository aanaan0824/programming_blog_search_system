{"blogid": "121347378", "writerAge": "码龄10年", "writerBlogNum": "377", "writerCollect": "867", "writerComment": "107", "writerFan": "187", "writerGrade": "5级", "writerIntegral": "4211", "writerName": "Vaccae", "writerProfileAdress": "writer_image\\profile_121347378.jpg", "writerRankTotal": "5099", "writerRankWeekly": "25408", "writerThumb": "114", "writerVisitNum": "207110", "blog_read_count": "12045", "blog_time": "于 2021-11-15 09:00:00 发布", "blog_title": "VS2022 MAUI Hello World——Windows平台及Android平台效果", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<div id=\"js_content\">\n<p>学更好的别人，</p>\n<p>做更好的自己。</p>\n<p>——《微卡智享》</p>\n<p><img alt=\"83d746b22294e5fabe1fbb420056ae71.png\" src=\"image\\83d746b22294e5fabe1fbb420056ae71.png\"/></p>\n<p>本文长度为2426<strong>字</strong>，预计阅读7<strong>分钟</strong><strong></strong></p>\n<p>前言</p>\n<p>微软的Visual Studio 2022在11月8号已发布，除了.Net6，改为64位的应用程序，将不再局限于主进程 devenv.exe 的 4Gb 内存限制，还有就是微软的跨平台框架MAUI来了。由于工作中出差，也是在抽空的时间赶紧下载体验了一下。</p>\n<p><img alt=\"ca9f5913f9833bf1941cf93e9ff313e5.png\" src=\"image\\ca9f5913f9833bf1941cf93e9ff313e5.png\"/></p>\n<p>MAUI框架</p>\n<img alt=\"486b0818d849731f81b54307317c2e1f.png\" src=\"image\\486b0818d849731f81b54307317c2e1f.png\"/>\n<p>微卡智享</p>\n<p>.NET MAUI全称为.NET Multi-platform App UI，是Xamarin.Forms的演进，对于Xamarin.Forms的客户，您可以把MAUI当成您现在所了解的Xamarin.Forms下一个主要版本。VS2022中.Net 6将Xamarin SDK统一到.NET中了。</p>\n<p>.NET MAUI在.NET 6中涵括了Android，iOS，macOS和Windows。除此之外，也正在和Blazor团队一起合作，.NET 6中囊括Blazor 桌面开发。</p>\n<h2>VS2022下载地址</h2>\n<p>Visual Studio 2022 IDE - 面向软件开发人员的编程工具 (microsoft.com)</p>\n<p style=\"text-align:center;\"><img alt=\"4a472f944650a52a3006f887967624cc.png\" src=\"image\\4a472f944650a52a3006f887967624cc.png\"/></p>\n<p style=\"text-align:center;\">下载过程</p>\n<p>由于自己下的是社区版，也是因为2022刚出，所以VS2019就一直还保留着，直接就跨版本升级项目需要慢慢验证，当时做为宇宙第一IDE，占用的硬盘空间也是够大的，于是就出现了我的C盘已经变红的情况了。</p>\n<p style=\"text-align:center;\"><img alt=\"57815406d1c6775d42b5121d72ad9d3a.png\" src=\"image\\57815406d1c6775d42b5121d72ad9d3a.png\"/></p>\n<p style=\"text-align:center;\">200G的C盘也只剩下17G</p>\n<p>安装好后准备创建第一个MAUI的项目，结果在搜索栏输入后发现并没有，后来才知道，在Preview版本中才有MAUI的东西，于是就用Visual Studio Installer将VS2022改为17.1.0 Preview 1.0版本。</p>\n<p style=\"text-align:center;\"><img alt=\"0286ae97b24da3d45991fc13e16ce957.png\" src=\"image\\0286ae97b24da3d45991fc13e16ce957.png\"/></p>\n<p style=\"text-align:center;\">安装时还有将MAUI的相关组件都打上勾</p>\n<p style=\"text-align:center;\"><img alt=\"37bacecd54f98affb7dd0490ec3721e2.png\" src=\"image\\37bacecd54f98affb7dd0490ec3721e2.png\"/></p>\n<p style=\"text-align:center;\">01</p>\n<p style=\"text-align:center;\">创建MAUI新项目</p>\n<p>打开VS2022后，创建新项目，在搜索栏中输入MAUI<br/></p>\n<p style=\"text-align:center;\"><img alt=\"96dac27bf2f5cde06921f179b22e5294.png\" src=\"image\\96dac27bf2f5cde06921f179b22e5294.png\"/></p>\n<p>选择.Net MAUI App(Preview)，取的项目名称为MauiHelloWorld</p>\n<p style=\"text-align:center;\"><img alt=\"0a9f57049925150f45ad1474bdd29559.png\" src=\"image\\0a9f57049925150f45ad1474bdd29559.png\"/></p>\n<p>新建好的MAUI项目中解决方案下是这些相关目录，其中Platforms是不同平台的配置，Resources是资源，MauiProgram是程序启动项，App是全局的加载，MainPage是Demo中的主页显示相关，将这些项展开可以看到如下：<br/></p>\n<p style=\"text-align:center;\"><img alt=\"e9c99cfc7ead88d667d45f51de924497.png\" src=\"image\\e9c99cfc7ead88d667d45f51de924497.png\"/></p>\n<p>.xaml是布局设置，而下面的.cs是C#的代码实现。</p>\n<p style=\"text-align:center;\">02</p>\n<p style=\"text-align:center;\">修改布局</p>\n<p style=\"text-align:center;\"><img alt=\"b74701b804bd908e0e82cc7d42e59a2c.png\" src=\"image\\b74701b804bd908e0e82cc7d42e59a2c.png\"/></p>\n<p>上面说了，MainPage是整个Demo程序的显示页面，我们在它原来的基础上做个简单的修改，加入一个新的Label行，</p>\n<p style=\"text-align:center;\"><img alt=\"fc9ce828e5d0a845424575e066fdb7c1.png\" src=\"image\\fc9ce828e5d0a845424575e066fdb7c1.png\"/></p>\n<p>首先是Grid中的RowDefinitions里面多加一个Auto，然后下面Padding也多一个30<br/></p>\n<pre class=\"has\"><code class=\"language-xml\">&lt;Grid RowSpacing=\"25\" RowDefinitions=\"Auto,Auto,Auto,Auto,Auto,*\"\n              Padding=\"{OnPlatform iOS='30,60,30,30,30', Default='30'}\"&gt;</code></pre>\n<p style=\"text-align:center;\"><img alt=\"b02d7b3fe8f446d3c9fa4fa284b1d7e9.png\" src=\"image\\b02d7b3fe8f446d3c9fa4fa284b1d7e9.png\"/></p>\n<p>加入了一个新的Label标签，从它位置下别的组件的Grid.Row都数字加上1，<br/></p>\n<p style=\"text-align:center;\"><img alt=\"219375f87595c31d7bed0a9095411df9.png\" src=\"image\\219375f87595c31d7bed0a9095411df9.png\"/></p>\n<p>接下来在MainPage.xaml.cs的OnCounterClicked事件中加入刚才新加了Label，设置的数字再加10的显示。</p>\n<pre class=\"has\"><code class=\"language-cs\">using System;\nusing Microsoft.Maui.Controls;\nusing Microsoft.Maui.Essentials;\n\n\nnamespace MauiHelloWorld\n{\n    public partial class MainPage : ContentPage\n  {\n    int count = 0;\n\n\n    public MainPage()\n    {\n      InitializeComponent();\n    }\n\n\n    private void OnCounterClicked(object sender, EventArgs e)\n    {\n      count++;\n      CounterLabel.Text = $\"Current count: {count}\";\n\n\n      VaccaeLabel.Text = $\"Vaccae HaHa: {count + 10}\";\n\n\n      SemanticScreenReader.Announce(CounterLabel.Text);\n    }\n  }\n}</code></pre>\n<p style=\"text-align:center;\"><img alt=\"eee23ecf1872430eceb1e969212b31b6.png\" src=\"image\\eee23ecf1872430eceb1e969212b31b6.png\"/></p>\n<p>在上面运行地方框架设置为.net6.0 windows，并且运行打勾项中设置Windows Machine</p>\n<p style=\"text-align:center;\">实现效果</p>\n<p style=\"text-align:center;\"><img alt=\"5e89fc7acab424f7d3b7d23b71fc3790.gif\" src=\"https://img-blog.csdnimg.cn/img_convert/5e89fc7acab424f7d3b7d23b71fc3790.gif\"/></p>\n<p style=\"text-align:center;\"><strong>Windows平台下的演示效果</strong><br/></p>\n<h2>Android平台</h2>\n<p>‍</p>\n<p style=\"text-align:center;\"><img alt=\"381935ea84da769eb2552243112962c6.png\" src=\"image\\381935ea84da769eb2552243112962c6.png\"/></p>\n<p>将框架改为.net6 - android，点击Android Emulator选择Android模拟器</p>\n<p style=\"text-align:center;\"><img alt=\"e7eac9bc0bb5117293dd61304d6b2a8e.png\" src=\"image\\e7eac9bc0bb5117293dd61304d6b2a8e.png\"/></p>\n<p>由于我本身也有Android Studio，也创建过模拟器，所以界面中有显示两个，只不过默认都写着错误，点击错误进来后<br/></p>\n<p style=\"text-align:center;\"><img alt=\"26c2c61cc78d8172762d921f41fdc8c1.png\" src=\"image\\26c2c61cc78d8172762d921f41fdc8c1.png\"/></p>\n<p>显示的主要就是没有快照的存放路径，这里修改存放路径后再保存，就进入它原本的下载，解压的过程，等结束后即可启动<br/></p>\n<p style=\"text-align:center;\"><img alt=\"cc9c54e9045a1e31c9fee4b08b4db41f.png\" src=\"image\\cc9c54e9045a1e31c9fee4b08b4db41f.png\"/></p>\n<p>然后我就看了一下硬盘空间，无语的是C盘又给我用去了6个G，竟然不是和Android Studio共用模拟器吗？</p>\n<p style=\"text-align:center;\"><img alt=\"ad63f8142fd18d4c229b7797a090ae04.png\" src=\"image\\ad63f8142fd18d4c229b7797a090ae04.png\"/></p>\n<p style=\"text-align:center;\">紧张的C盘空间</p>\n<p style=\"text-align:left;\">将Android的模拟器启动起来后，运行的位置就变为模拟器的名字了，这个和Android Studio倒挺像</p>\n<p style=\"text-align:center;\"><img alt=\"1a5f3ae63769b68a32ef0c9806328931.png\" src=\"image\\1a5f3ae63769b68a32ef0c9806328931.png\"/></p>\n<p style=\"text-align:center;\">实现效果</p>\n<p style=\"text-align:center;\"><img alt=\"56e0dc5fa933491cb5e35235db357fb3.gif\" src=\"https://img-blog.csdnimg.cn/img_convert/56e0dc5fa933491cb5e35235db357fb3.gif\"/></p>\n<p><img alt=\"4e7df132c201f760fd980305d98b1415.png\" src=\"image\\4e7df132c201f760fd980305d98b1415.png\"/></p>\n<p style=\"text-align:left;\">总结<br/></p>\n<p>刚才就是Maui框架的Hello World使用，Window平台效果要比Winform好很多，不过在Android下运行，一是启动界面那个.Net的页面加载时间感觉有点长，然后虚拟的返回按钮不起作用，看来需要写事件捕获。对于我个人来说，由于自己也是做Android的，所以Android下还是用原生的比较方便。<br/></p>\n<p style=\"text-align:center;\"><img alt=\"e854d5f70fe15fd9872ea183c665d724.png\" src=\"image\\e854d5f70fe15fd9872ea183c665d724.png\"/></p>\n<p style=\"text-align:center;\">完</p>\n<p><img alt=\"4bfc09312829b6462de00b63b1b0a8a0.png\" src=\"image\\4bfc09312829b6462de00b63b1b0a8a0.png\"/></p>\n<p style=\"text-align:left;\">扫描二维码</p>\n<p style=\"text-align:left;\">获取更多精彩</p>\n<p>微卡智享</p>\n<p><img alt=\"d36bddbf21b2231a8dcdd481931b0783.png\" src=\"image\\d36bddbf21b2231a8dcdd481931b0783.png\"/></p>\n<p>「 往期文章 」</p>\n<p style=\"text-align:center;\"><a href=\"\">Android BaseQuickAdapter3.0.4版本二级列表的使用及遇到的问题</a><br/></p>\n<p style=\"text-align:center;\"><a href=\"\">Android Room数据库版本迁移的实战</a><br/></p>\n<p style=\"text-align:center;\"><a href=\"\">关于Android录屏程序在Android10下的修改</a><br/></p>\n</div>\n</div>\n</div>"}