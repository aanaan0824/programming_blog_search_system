{"blogid": "126743307", "writerAge": "码龄3年", "writerBlogNum": "66", "writerCollect": "16", "writerComment": "18", "writerFan": "18", "writerGrade": "3级", "writerIntegral": "667", "writerName": "starbuling~", "writerProfileAdress": "writer_image\\profile_126743307.jpg", "writerRankTotal": "32729", "writerRankWeekly": "236414", "writerThumb": "22", "writerVisitNum": "9841", "blog_read_count": "11", "blog_time": "于 2022-09-07 12:43:23 发布", "blog_title": "AcWing 4604. 集合询问", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>https://www.acwing.com/problem/content/4607/</p>\n<p>#哈希表</p>\n<p>题意：</p>\n<p>初始时空集{}, 进行 t 次操作，操作分为：</p>\n<ul><li><code>+ x</code>，将一个非负整数 x 添加至集合中。注意，集合中可以存在多个相同的整数。</li><li><code>- x</code>，从集合中删除一个非负整数 x。可以保证执行此操作时，集合中至少存在一个 x。</li><li><code>? s</code>，询问操作，给定一个由 0 和 1 组成的模板 s，请你计算并输出此时集合中有多少个元素可以与 s 相匹配。</li></ul>\n<p>判断匹配的方法：</p>\n<ul><li>将模版和 x 高位补0至相同位数。</li><li>在每个位置i，模版若为1，x第i位则为奇数；若为0，x第i位则为偶数。</li></ul>\n<p><span class=\"katex--inline\"><span class=\"katex\"><span class=\"katex-mathml\">\n    \n     \n      \n       \n        1\n       \n       \n        ≤\n       \n       \n        t\n       \n       \n        ≤\n       \n       \n        1\n       \n       \n        \n         0\n        \n        \n         5\n        \n       \n       \n        ，\n       \n       \n        0\n       \n       \n        ≤\n       \n       \n        x\n       \n       \n        &lt;\n       \n       \n        1\n       \n       \n        \n         0\n        \n        \n         18\n        \n       \n       \n        ，\n       \n       \n        s\n       \n       \n        的长度范围\n       \n       \n        [\n       \n       \n        1\n       \n       \n        ,\n       \n       \n        18\n       \n       \n        ]\n       \n      \n      \n       1≤t≤10^5，0≤x&lt;10^{18}，s 的长度范围 [1,18]\n      \n     \n    </span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.7804em; vertical-align: -0.136em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.7719em; vertical-align: -0.136em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.9501em; vertical-align: -0.136em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height: 0.8141em;\"><span class=\"\" style=\"top: -3.063em; margin-right: 0.05em;\"><span class=\"pstrut\" style=\"height: 2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">5</span></span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 0.5782em; vertical-align: -0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span><span class=\"mrel\">&lt;</span><span class=\"mspace\" style=\"margin-right: 0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height: 1.0641em; vertical-align: -0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height: 0.8141em;\"><span class=\"\" style=\"top: -3.063em; margin-right: 0.05em;\"><span class=\"pstrut\" style=\"height: 2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">18</span></span></span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord mathnormal\">s</span><span class=\"mord cjk_fallback\">的长度范围</span><span class=\"mopen\">[</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right: 0.1667em;\"></span><span class=\"mord\">18</span><span class=\"mclose\">]</span></span></span></span></span></p>\n<p>题解：</p>\n<p>一个模版可以对应很多个数，相反的，通过一个数x可以计算出对应的唯一的模版s</p>\n<p>所以用数组模拟哈希表就可以达到 O(1) 查询</p>\n<p>通过长度可以发现，s最大是 <span class=\"katex--inline\"><span class=\"katex\"><span class=\"katex-mathml\">\n    \n     \n      \n       \n        \n         2\n        \n        \n         18\n        \n       \n      \n      \n       2^{18}\n      \n     \n    </span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height: 0.8141em;\"><span class=\"\" style=\"top: -3.063em; margin-right: 0.05em;\"><span class=\"pstrut\" style=\"height: 2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">18</span></span></span></span></span></span></span></span></span></span></span></span></span> ，大概是100，000。</p>\n<pre><code class=\"prism language-c++\">#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\nconst int N = 1000010;\nint t;\nint cnt[N];\n\nint main()\n{\n    scanf(\"%d\", &amp;t);\n    \n    char op[2], str[20];\n    \n    while (t --)\n    {\n        scanf(\"%s%s\", op, str);\n        int x = 0;\n        for (int i = 0; str[i]; i ++)\n            x = x * 2 + str[i] % 2;\n        // cout &lt;&lt; x &lt;&lt; endl;\n        if (*op == '+') cnt[x] ++;\n        else if (*op == '-') cnt[x] --;\n        else if (*op == '?') printf(\"%d\\n\", cnt[x]);\n    }\n}\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}