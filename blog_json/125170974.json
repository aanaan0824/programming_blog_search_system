{"blogid": "125170974", "writerAge": "码龄12年", "writerBlogNum": "46", "writerCollect": "180", "writerComment": "12", "writerFan": "928", "writerGrade": "3级", "writerIntegral": "534", "writerName": "星哥说事", "writerProfileAdress": "writer_image\\profile_125170974.jpg", "writerRankTotal": "29204", "writerRankWeekly": "7509", "writerThumb": "29", "writerVisitNum": "65290", "blog_read_count": "826", "blog_time": "于 2022-06-07 18:29:42 发布", "blog_title": "Centos7搭建开源高颜值的IT资产管理平台chemex", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"Centos7ITchemex_0\"></a>Centos7搭建开源高颜值的IT资产管理平台chemex</h1>\n<p>咖啡壶是开源、高颜值的IT资产管理平台。资产管理、归属、追溯、盘点以及轻量的服务器状态面板。支持导出导入、LDAP、自定义字段等。基于优雅的Laravel框架和DcatAdmin开发。</p>\n<p>开源地址：https://gitee.com/celaraze/chemex</p>\n<p>演示地址：https://chemex-demo.celaraze.com/ 【失效】</p>\n<p><img alt=\"image-20220607180626167\" src=\"image\\96dc16c45499b10fee7bdb4bf1929f10.png\"/></p>\n<h2><a id=\"_12\"></a>环境要求</h2>\n<p>git，用于管理版本，部署和升级必要工具。</p>\n<pre><code>PHP 8+ ，仅支持 PHP8。\nMySQL 5.7+，数据库引擎，理论上 MariaDB 10.2 + 兼容支持。\next-zip 扩展。\next-json 扩展。\next-fileinfo 扩展。\next-ldap 扩展。\next-bcmath 扩展。\next-mysqli 扩展。\next-xml 扩展。\next-xmlrpc 扩展。\n</code></pre>\n<p>以上扩展安装过程注意版本必须与 PHP 版本一致。</p>\n<h2><a id=\"_31\"></a>系统简介</h2>\n<p>centos7</p>\n<p>已安装PHP8和mysql数据库，nignx转发</p>\n<p>域名：http://zc.nideyuming.com</p>\n<h2><a id=\"_Nginx__PHPfpm_41\"></a>部署（经典 Nginx &amp; PHP-fpm）</h2>\n<p>生产环境下为遵守安全策略，非常建议在服务器本地进行部署，暂时不提供相关线上初始化安装的功能。因此，虽然前期部署的步骤较多，但已经为大家自动化处理了很大部分的流程，只需要跟着下面的命令一步步执行，一般是不会有部署问题的。</p>\n<p>1.为你的计算机安装 PHP8 环境，参考：PHP官方 （安装省略）。</p>\n<p>2.为你的计算机安装 MySQL 或者 mariadb（安装省略）</p>\n<pre><code>http://zc.nideyuming.com\n数据库信息：\n数据库：zc_chuanqu_cn\n地址：172.16.32.11:3306\n用户：zc_chuanqu_cn\n密码：****\n</code></pre>\n<p>3：在你想要的目录中，执行 git clone https://gitee.com/celaraze/chemex.git 完成下载。</p>\n<p>4：在项目根目录中，复制 .env.example 文件为一份新的，并重命名为 .env。</p>\n<p>5：根据 .env 文件中注释的指引进行配置。</p>\n<pre><code># cd /data/wwwroot/web/\n# git clone https://gitee.com/celaraze/chemex.git \n# mv chemex zc.nideyuming.com\n# chown www.www -R zc.nideyuming.com/\n# cd zc.nideyuming.com/\n# mv .env.example .env\n修改 .env 配置文件\n\n</code></pre>\n<h3><a id=\"_75\"></a>安装导入数据</h3>\n<pre><code># su -l www\n$ cd /data/wwwroot/web/zc.nideyuming.com/\n$ php artisan chemex:install\n正在优化配置！\nCompiled views cleared!\nApplication cache cleared!\nRoute cache cleared!\nConfiguration cache cleared!\nCompiled services and packages files removed!\nCaches cleared successfully!\n正在设置存储系统！\nThe [/home/data/wwwroot/web/zc.nideyuming.com/public/storage] link has been connected to [/home/data/wwwroot/web/zc.nideyuming.com/storage/app/public].\nThe links have been created.\n正在配置APP密钥！\nApplication key set successfully.\n正在配置JWT密钥！\n\n This will invalidate all existing tokens. Are you sure you want to override the secret key? (yes/no) [no]:\n &gt; yes\n\njwt-auth secret [opRJk8IlSJeJiOOVEKf5KEhk2Xz0rmYl8W4uZVVr06futCH77NlDPgCNt9ytymy2] set successfully.\n正在处理数据库迁移！\nMigration table created successfully.\n...\nMigrated:  2021_05_19_085513_version_3_0_10 (9.27ms)\n正在初始化基础数据！\nDatabase seeding completed successfully.\nAdmin账户已成功重置为 admin/admin\n安装完成！\n用户名密码都为：admin\n\n$ chmod 777 -R storage\n$ ll storage/\n</code></pre>\n<h3><a id=\"nginx_115\"></a>配置nginx</h3>\n<pre><code>server {  \n        listen       80;\n        server_name  zc.nideyuming.com;\n        root /data/wwwroot/web/zc.nideyuming.com/public;\n        access_log /data/wwwroot/log/zc.nideyuming.com-access.log main_aliyun;\n        error_log off;\n\n        location / {\n                index  index.php index.htm index.html;\n                try_files $uri $uri/ /index.php?$args;\n        }\n        location ~ .*\\.(php|php5)?$     {\n                        fastcgi_pass http://127.0.0.1:8100;\n                        fastcgi_index index.php;\n                        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n                        include fastcgi_params;\n                }\n        location ~ .*\\.(htm|html|css|js|jpg|jpeg|gif|png|ico|bmp|gz|xml|zip|rar|swf|txt|xls|xlsx|flv|mid|doc|ppt|pdf|mp3|wma|exe)?$ {  \n                expires 30d;  \n                access_log /dev/null;\n        }\n}\n</code></pre>\n<p>此时可以通过访问 http://zc.nideyuming.com 来使用咖啡壶。管理员账号密码为：admin / admin。</p>\n<p>访问</p>\n<p><img alt=\"image-20210708154621618\" src=\"image\\85e7c8786a53999b3a17f4e7650a0830.png\"/></p>\n<h1><a id=\"_152\"></a>版本更新</h1>\n<p>随时随地保持更新可以在项目根目录中执行以下命令，将会同步分支的最新修改内容。</p>\n<pre><code>sudo git fetch --all &amp;&amp; git reset --hard origin/main &amp;&amp; git pull \n</code></pre>\n<p>接着，执行以下来进行升级。</p>\n<pre><code>php artisan chemex:update \n</code></pre>\n<p>注意，如果提示 permission denied 错误，需要通过 sudo 身份执行。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}