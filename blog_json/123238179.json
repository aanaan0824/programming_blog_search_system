{"blogid": "123238179", "writerAge": "码龄2年", "writerBlogNum": "12", "writerCollect": "46", "writerComment": "1", "writerFan": "3", "writerGrade": "2级", "writerIntegral": "136", "writerName": "月光引力", "writerProfileAdress": "writer_image\\profile_123238179.jpg", "writerRankTotal": "92241", "writerRankWeekly": "982634", "writerThumb": "4", "writerVisitNum": "16486", "blog_read_count": "13742", "blog_time": "已于 2022-03-05 14:53:40 修改", "blog_title": "MySQL联合查询（多表查询）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>一、内连接</p>\n<p>select *from 表1 [ inner | cross ] join 表2 [ on过滤条件 ] [ where查询条件 ] ；</p>\n<p>[ inner | cross ]:</p>\n<p>join 内连接关键字(必须要有)；</p>\n<p>on从语法上可省略，但如果省略它，将查询的是多表的笛卡尔积；</p>\n<p></p>\n<p>1.select *from 表1 join 表2 [ on过滤条件 ] [ where查询条件 ] ；</p>\n<p>2.select *from 表1，表2 [ where查询条件 ] ；</p>\n<p>3.select *from 表1 inner join 表2 [ on过滤条件 ] [ where查询条件 ] ；</p>\n<p>4.select *from 表1 cross join 表2 [ on过滤条件 ] [ where查询条件 ] ；</p>\n<p>（1.2使用较多；多表查询使用1较好）</p>\n<p></p>\n<p><img alt=\"\" height=\"166\" src=\"image\\fa707daef71741009b6e45929c914743.png\" width=\"571\"/></p>\n<p><img alt=\"\" height=\"189\" src=\"image\\0f734aed56724e6a9447ad7f523bb89a.png\" width=\"416\"/></p>\n<p></p>\n<p>例1：查询张三的成绩：</p>\n<p>1.进行内连接查询（笛卡尔积）</p>\n<p>select s.*,st.* from student s join score_table st;</p>\n<p><img alt=\"\" height=\"354\" src=\"image\\d86fe63ec2c141c7813988ceb3dac810.png\" width=\"944\"/></p>\n<p></p>\n<p>2.去掉无效的数据（on过滤条件）</p>\n<p> select s.*,st.* from student s join score_table st on s.id=st.student_id;</p>\n<p><img alt=\"\" height=\"193\" src=\"image\\e14125c3a6b54c4492286d90fd4f252b.png\" width=\"936\"/></p>\n<p> 3.查询张三的成绩（where 条件）</p>\n<p> select s.*,st.* from student s join score_table st on s.id=st.student_id where s.username='张三';</p>\n<p><img alt=\"\" height=\"132\" src=\"image\\421f12eb7bab432bb2e8f666a8a5da89.png\" width=\"962\"/></p>\n<p></p>\n<p>例2：查询每个人成绩、科目名、个人信息：</p>\n<p>1.连表查询（三张表）select *from 表1 join 表2 join 表3；</p>\n<p>2.过滤笛卡尔积中无意义数据：select *from 表1 join 表2 [ on 条件过滤 ] join 表3[ on 条件过滤 ]；</p>\n<p>select s.username,s.sn,s.mail,st.score,c.name from score_table st join course c on st.course_id=c.id join student s on s.id=st.student_id;<img alt=\"\" height=\"176\" src=\"image\\8c685535138946c7bad4cc78db8c26b8.png\" width=\"596\"/></p>\n<p></p>\n<p>二、外连接：</p>\n<p>1.左（外）连接：</p>\n<p>select * from 表1 left join 表2   on连接条件   [where条件查询]；</p>\n<p>表1 查询结果是所有数据，表2查询结果是与表1重合部分的数据</p>\n<p><img alt=\"\" height=\"202\" src=\"image\\48f46778784f4b118b5db7051312446f.png\" width=\"354\"/></p>\n<p></p>\n<p></p>\n<p>2.右（外）连接</p>\n<p>select * from 表1 right join 表2  on连接条件   [where条件查询]；</p>\n<p><img alt=\"\" height=\"206\" src=\"image\\f22ae0740fe645bbaf82f66153bc2f58.png\" width=\"349\"/></p>\n<p>左 / 右连接可以互相实现，只需要将表的顺序调换即可。</p>\n<p><img alt=\"\" height=\"208\" src=\"image\\bb02f9d84e0840049279e200d27cb866.png\" width=\"1092\"/></p>\n<p><img alt=\"\" height=\"212\" src=\"image\\73dbbd3c8d944110b3ee15e38044aca4.png\" width=\"1090\"/></p>\n<p> </p>\n<p> 联表查询中on和where的区别：</p>\n<p>1.on在内连接中可省略，外连接不可省略；</p>\n<p>2.on在内连接中执行效果和外连接执行效果不同；</p>\n<p>        left join...on查询不能过滤掉左表中的数据，而内连接on查询可以过滤掉全局数据。</p>\n<p>3.外连接中on和where不同</p>\n<p>        on筛选笛卡尔积过滤条件，where筛选具体业务</p>\n<p></p>\n<p>三、自连接（自查询）</p>\n<p>select *from 表名 as t1,表名 as t2 where t1.id=t2.id [, ...]</p>\n<p>例1：查询英语成绩&lt;计算机成绩的数据</p>\n<p>（1）根据科目名称查出来科目ID（成绩表中只有科目ID，没有科目名）</p>\n<p>（2）自查询</p>\n<p>（3）去除笛卡尔积中无意义数据（有意义数据：主键相同；）</p>\n<p>（4）设置where条件，让表1只查询英语成绩，表2查询计算机成绩</p>\n<p>（5）设置where多条件查询，让英语成绩&lt;计算机成绩</p>\n<p><img alt=\"\" height=\"165\" src=\"image\\bef8ac6d39fe42a7b6bf0660e255f15c.png\" width=\"1165\"/></p>\n<p></p>\n<p>四、子查询（嵌套查询）</p>\n<p>select 字段名 from</p>\n<p>例：查张三的同班同学</p>\n<p><img alt=\"\" height=\"151\" src=\"image\\3ddb7d9f8a2b46c0ba91d21990aa4fc9.png\" width=\"985\"/></p>\n<p> </p>\n<p>五、合并查询（至少两张表）</p>\n<p>union（进行结果集合并，并去重，只保留重复数据中的一条）</p>\n<p>union all（不会去掉结果集中的重复行）</p>\n<p>例：查询id小于3和名字为“英语”的课程</p>\n<p>select * from course where id&lt;3 union select * from course where name='英语';</p>\n<p></p>\n<p> </p>\n</div>\n</div>"}