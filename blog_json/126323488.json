{"blogid": "126323488", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "72", "writerCollect": "2611", "writerComment": "4590", "writerFan": "8350", "writerGrade": "6çº§", "writerIntegral": "8330", "writerName": "codeMak1r.å°æ–°", "writerProfileAdress": "writer_image\\profile_126323488.jpg", "writerRankTotal": "1737", "writerRankWeekly": "13", "writerThumb": "2775", "writerVisitNum": "208531", "blog_read_count": "788", "blog_time": "å·²äºÂ 2022-08-27 23:15:25Â ä¿®æ”¹", "blog_title": "React+Mobxï½œç»¼åˆé¡¹ç›®å®è·µï¼ˆé™„é¡¹ç›®æºç ã€åœ°å€ï¼‰", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/7c9ed80501464743ae5093eae5d4c519.gif#pic_center\"/></p>\n<blockquote>\n<p><strong><font color=\"#FF7F50\"> æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</font></strong><br/> <strong>ğŸ“”åšä¸»æ˜¯ä¸€åå¤§å­¦åœ¨è¯»æœ¬ç§‘ç”Ÿï¼Œä¸»è¦å­¦ä¹ æ–¹å‘æ˜¯å‰ç«¯ã€‚<br/> ğŸ­ç›®å‰å·²ç»æ›´æ–°äº†<font color=\"#FF7F50\">ã€Vueã€‘ã€ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘ã€ã€TypeScriptã€‘ç­‰ç­‰ç³»åˆ—ä¸“æ </font><br/> ğŸ› ç›®å‰æ­£åœ¨å­¦ä¹ çš„æ˜¯ğŸ”¥<span class=\"katex--inline\"><span class=\"katex\"><span class=\"katex-mathml\">\n      \n       \n        \n         \n          R\n         \n         \n          e\n         \n         \n          a\n         \n         \n          c\n         \n         \n          t\n         \n         \n          æ¡†æ¶\n         \n        \n        \n         Reactæ¡†æ¶\n        \n       \n      </span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right: 0.0077em;\">R</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">æ¡†æ¶</span></span></span></span></span>ğŸ”¥ï¼Œä¸­é—´ç©¿æ’äº†ä¸€äº›åŸºç¡€çŸ¥è¯†çš„å›é¡¾<br/> ğŸŒˆåšå®¢ä¸»é¡µğŸ‘‰<a href=\"https://blog.csdn.net/Svik_zy?type=blog\">codeMak1r.å°æ–°çš„åšå®¢</a></strong></p>\n<p></p>\n<div class=\"toc\">\n<h3>ğŸ˜‡æœ¬æ–‡ç›®å½•ğŸ˜‡</h3>\n<ul><li><a href=\"#Todos__Mobx___15\">Todos - Mobx - ç»¼åˆæ¡ˆä¾‹</a></li><li><ul><li><a href=\"#1_39\">1.æ¸²æŸ“åˆ—è¡¨</a></li><li><a href=\"#2_136\">2.å•é€‰åŠŸèƒ½å®ç°</a></li><li><a href=\"#3_164\">3.å…¨é€‰åŠŸèƒ½å®ç°</a></li><li><a href=\"#4_205\">4.åˆ é™¤åŠŸèƒ½å®ç°</a></li><li><a href=\"#5_224\">5.å›è½¦æ–°å¢åŠŸèƒ½å®ç°</a></li><li><a href=\"#6_270\">6.ç»Ÿè®¡è®¡æ•°åŠŸèƒ½å®ç°</a></li><li><a href=\"#7Mobx__React__301\">7.Mobx - React èŒè´£åˆ’åˆ†</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<p><strong><font color=\"#FF7F50\">æœ¬æ–‡è¢«ä¸“æ <a href=\"https://blog.csdn.net/svik_zy/category_11671445.html?spm=1001.2014.3001.5482\">ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘</a>æ”¶å½•</font></strong></p>\n</blockquote>\n<blockquote>\n<p><strong><font color=\"#FF7F50\">ğŸ•¹åšæŒåˆ›ä½œâœï¸ï¼Œä¸€èµ·å­¦ä¹ ğŸ“–ï¼Œç å‡ºæœªæ¥ğŸ‘¨ğŸ»â€ğŸ’»ï¼</font></strong></p>\n</blockquote>\n<h1><a id=\"Todos__Mobx___15\"></a>Todos - Mobx - ç»¼åˆæ¡ˆä¾‹</h1>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\0dda5c5c361b4119aa778d4f7e209d19.png\"/></p>\n<blockquote>\n<p>é¡¹ç›®æ¼”ç¤ºåœ°å€ï¼šhttps://react-course-series.gitee.io/mobx_react/<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/64b5c28dcd554f7dafcc7dc471bf5811.gif#pic_center\"/></p>\n</blockquote>\n<ol><li>æ¸²æŸ“åˆ—è¡¨æ•°æ®</li><li>å•é€‰åŠŸèƒ½</li><li>å…¨é€‰åŠŸèƒ½</li><li>åˆ é™¤åŠŸèƒ½</li><li>å›è½¦æ–°å¢åŠŸèƒ½</li><li>ç»Ÿè®¡è®¡æ•°åŠŸèƒ½</li></ol>\n<blockquote>\n<p>é¡¹ç›®ç›®å½•ï¼š</p>\n<pre><code>src\nâ”œâ”€App.jsx\nâ”œâ”€index.js\nâ”œâ”€store\n|   â”œâ”€index.js\n|   â””task.Store.js\nâ”œâ”€Todo\n|  â”œâ”€index.css\n|  â””index.jsx\n</code></pre>\n</blockquote>\n<h2><a id=\"1_39\"></a>1.æ¸²æŸ“åˆ—è¡¨</h2>\n<p>/src/store/task.Store.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> makeAutoObservable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">TaskStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'å­¦ä¹ react'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isDone</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'æå®šmobx'</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isDone</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> TaskStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>/src/store/index.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> TaskStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./task.Store\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 1.å£°æ˜ä¸€ä¸ªrootStore</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RootStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>taskStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TaskStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// 2.å®ä¾‹åŒ–rootStoreæ³¨å…¥context</span>\n<span class=\"token keyword\">const</span> rootStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RootStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span>rootStore<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 3.å¯¼å‡ºuseStoreæ–¹æ³•ï¼Œä¾›ç»„ä»¶é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•ä½¿ç”¨æ ¹å®ä¾‹</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useStore</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> useStore <span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>/src/Todo/index.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> observer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx-react-lite'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> useStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store'</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./index.css'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">Task</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{<!-- --></span> taskStore <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">'todoapp'</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>header className<span class=\"token operator\">=</span><span class=\"token string\">'header'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span>todos<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* æ–°å¢è¾“å…¥æ¡† */</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span>input className<span class=\"token operator\">=</span><span class=\"token string\">'new-todo'</span> autoFocus autoComplete<span class=\"token operator\">=</span><span class=\"token string\">'off'</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">'What needs to be done?'</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>header<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>section className<span class=\"token operator\">=</span><span class=\"token string\">'main'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* å…¨é€‰ */</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">'toggle-all'</span> className<span class=\"token operator\">=</span><span class=\"token string\">'toggle-all'</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>label htmlFor<span class=\"token operator\">=</span><span class=\"token string\">\"toggle-all\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>ul className<span class=\"token operator\">=</span><span class=\"token string\">'todo-list'</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* completedç±»å */</span><span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">{<!-- --></span>\n            taskStore<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">todoObj</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>li key<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> className<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>isDone <span class=\"token operator\">?</span> <span class=\"token string\">'todo completed'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'todo'</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'view'</span><span class=\"token operator\">&gt;</span>\n                  <span class=\"token operator\">&lt;</span>input id<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span> className<span class=\"token operator\">=</span><span class=\"token string\">'toggle'</span>\n                    defaultChecked<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>isDone <span class=\"token operator\">?</span> <span class=\"token boolean\">true</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n                  <span class=\"token operator\">&lt;</span>label htmlFor<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">&gt;</span>\n                  <span class=\"token operator\">&lt;</span>button className<span class=\"token operator\">=</span><span class=\"token string\">\"destroy\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n              <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>li<span class=\"token operator\">&gt;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ul<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">&gt;</span>\n\t\t\t <span class=\"token operator\">&lt;</span>footer className<span class=\"token operator\">=</span><span class=\"token string\">'footer'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>span className<span class=\"token operator\">=</span><span class=\"token string\">\"todo-count\"</span><span class=\"token operator\">&gt;</span>\n          ä»»åŠ¡æ€»æ•°ï¼š<span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">2</span><span class=\"token punctuation\">}</span> ï½œ å·²å®Œæˆï¼š <span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>footer<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>section<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span>Task<span class=\"token punctuation\">)</span>\n</code></pre>\n<blockquote>\n<p>ä½¿ç”¨çš„æ˜¯Mobxä¸­çš„å“åº”å¼æ•°æ®ï¼Œç”¨æ•°ç»„çš„mapæ–¹æ³•å¯¹æ•°æ®è¿›è¡Œéå†ï¼Œä¹‹åæ¸²æŸ“åœ¨ç»„ä»¶ä¸­ã€‚</p>\n</blockquote>\n<h2><a id=\"2_136\"></a>2.å•é€‰åŠŸèƒ½å®ç°</h2>\n<p>é¦–å…ˆè¦ç»™Taskç»„ä»¶å£°æ˜ä¸€ä¸ªè‡ªå·±çš„æ•°æ®ã€‚ï¼ˆMobxï¼‰</p>\n<blockquote>\n<p><em>æ€æƒ³ï¼šé€šè¿‡Mobxä¸­çš„storeå»ç»´æŠ¤çŠ¶æ€ï¼Œinputåªéœ€è¦æŠŠevent.target.checkedäº¤ç»™storeè®©å®ƒè¿›è¡Œä¿®æ”¹</em></p>\n</blockquote>\n<ol><li>ç»™<code>task.Store.js</code>æ·»åŠ ä¸€ä¸ªä¿®æ”¹å•é€‰æ¡†é€‰ä¸­ä¸å¦çš„æ–¹æ³•ï¼ˆä¿®æ”¹å¯¹åº”idçš„isDoneï¼‰</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// å•é€‰æ“ä½œ</span>\n<span class=\"token function\">singleCheck</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> isDone</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// é€šè¿‡idä¿®æ”¹å¯¹åº”çš„isDone</span>\n  <span class=\"token keyword\">const</span> todoObj <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> id<span class=\"token punctuation\">)</span>\n  todoObj<span class=\"token punctuation\">.</span>isDone <span class=\"token operator\">=</span> isDone\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>åœ¨<code>/src/Todo/Task.jsx</code>ç»„ä»¶ä¸­ï¼Œç‚¹å‡»å•é€‰æ¡†è§¦å‘<code>onChange</code>äº‹ä»¶ï¼Œè°ƒç”¨storeä¸­çš„<code>singleCheck</code>æ–¹æ³•ã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* å•é€‰å—æ§ */</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* é€šè¿‡Mobxä¸­çš„storeå»ç»´æŠ¤çŠ¶æ€ï¼Œinputåªéœ€è¦æŠŠevent.target.checkedäº¤ç»™storeè®©å®ƒè¿›è¡Œä¿®æ”¹ */</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>input id<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span> type<span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span> className<span class=\"token operator\">=</span><span class=\"token string\">'toggle'</span>\n\tchecked<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>todoObj<span class=\"token punctuation\">.</span>isDone<span class=\"token punctuation\">}</span>\n\tonChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token parameter\">event</span> <span class=\"token operator\">=&gt;</span> taskStore<span class=\"token punctuation\">.</span><span class=\"token function\">singleCheck</span><span class=\"token punctuation\">(</span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>checked<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"3_164\"></a>3.å…¨é€‰åŠŸèƒ½å®ç°</h2>\n<blockquote>\n<p><em>æ€æƒ³ï¼šé™¤äº†åœ¨storeä¸­éœ€è¦å®šä¹‰å…¨é€‰æ–¹æ³•ï¼Œè¿˜éœ€è¦é€šè¿‡Mobxçš„è®¡ç®—å±æ€§å®šä¹‰ä¸€ä¸ªæ˜¯å¦æ‰€æœ‰é¡¹éƒ½è¢«é€‰ä¸­ä¸å¦çš„æ–¹æ³•ï¼Œå¦‚æœæ‰€æœ‰é¡¹éƒ½è¢«é€‰ä¸­ï¼Œé‚£ä¹ˆç‚¹å‡»å…¨é€‰æŒ‰é’®å¯ä»¥å˜ä¸ºå…¨ä¸é€‰ï¼›å¦‚æœä¸æ˜¯æ‰€æœ‰é¡¹éƒ½è¢«é€‰ä¸­ï¼Œé‚£ä¹ˆç‚¹å‡»å…¨é€‰æŒ‰é’®å˜ä¸ºå…¨é€‰ã€‚</em></p>\n</blockquote>\n<ol><li>ç»™<code>task.Store.js</code>æ·»åŠ ä¸€ä¸ªå…¨é€‰/å…¨ä¸é€‰æ–¹æ³•ã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// å…¨é€‰æ“ä½œ</span>\n<span class=\"token function\">allCheck</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">checked</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// æŠŠæ‰€æœ‰é¡¹çš„isDoneå±æ€§ï¼Œéƒ½æŒ‰ç…§ä¼ å…¥çš„æœ€æ–°çš„å€¼ä¿®æ”¹</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    item<span class=\"token punctuation\">.</span>isDone <span class=\"token operator\">=</span> checked\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>ç»™<code>task.Store.js</code>å®šä¹‰è®¡ç®—å±æ€§<code>isAllDone</code>ï¼Œå½“æ‰€æœ‰çš„é¡¹éƒ½è¢«é€‰ä¸­æ—¶ï¼Œè¿™ä¸ªå±æ€§ä¸ºtrueï¼›å¦åˆ™ä¸ºfalseã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// è®¡ç®—å±æ€§ åªæœ‰æ‰€æœ‰å­é¡¹éƒ½æ˜¯é€‰ä¸­çš„æ—¶å€™ï¼Œæ‰æ˜¯é€‰ä¸­çš„çŠ¶æ€</span>\n<span class=\"token keyword\">get</span> <span class=\"token function\">isAllDone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">every</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> item<span class=\"token punctuation\">.</span>isDone<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n<span class=\"token operator\">-</span> <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">+</span> <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">isAllDone</span><span class=\"token operator\">:</span> computed\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"3\"><li>åœ¨<code>/src/Todo/Task.jsx</code>ç»„ä»¶ä¸­ï¼Œç‚¹å‡»å…¨é€‰æ¡†ï¼Œè¿›è¡Œå…¨é€‰ä¸å…¨ä¸é€‰ä¹‹é—´çš„æ”¹åŠ¨</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* å…¨é€‰ */</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"checkbox\"</span> id<span class=\"token operator\">=</span><span class=\"token string\">'toggle-all'</span> className<span class=\"token operator\">=</span><span class=\"token string\">'toggle-all'</span>\n\tchecked<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>taskStore<span class=\"token punctuation\">.</span>isAllDone<span class=\"token punctuation\">}</span>\n\tonChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> taskStore<span class=\"token punctuation\">.</span><span class=\"token function\">allCheck</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>taskStore<span class=\"token punctuation\">.</span>isAllDone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"4_205\"></a>4.åˆ é™¤åŠŸèƒ½å®ç°</h2>\n<blockquote>\n<p><em>æ€æƒ³ï¼šåœ¨storeä¸­å®šä¹‰åˆ é™¤æ–¹æ³•ï¼Œä½¿ç”¨filteræ•°ç»„æ–¹æ³•ï¼Œåˆ é™¤å¯¹åº”idçš„é‚£ä¸€ç»„æ•°æ®</em></p>\n</blockquote>\n<ol><li>ç»™<code>task.Store.js</code>æ·»åŠ åˆ é™¤çš„æ–¹æ³•</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// åˆ é™¤æ“ä½œ</span>\n<span class=\"token function\">delTask</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> item<span class=\"token punctuation\">.</span>id <span class=\"token operator\">!==</span> id<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>åœ¨<code>/src/Todo/Task.jsx</code>ç»„ä»¶ä¸­ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œåˆ é™¤å¯¹åº”é‚£ä¸€è¡Œçš„todoã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token operator\">&lt;</span>button className<span class=\"token operator\">=</span><span class=\"token string\">\"destroy\"</span> onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> taskStore<span class=\"token punctuation\">.</span><span class=\"token function\">delTask</span><span class=\"token punctuation\">(</span>todoObj<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"5_224\"></a>5.å›è½¦æ–°å¢åŠŸèƒ½å®ç°</h2>\n<blockquote>\n<p><em>æ€æƒ³ï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨useState-hookï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä¸€ä¸‹æ–°å¢è¾“å…¥æ¡†çš„valueå†…å®¹ã€‚ä¹‹åï¼Œåœ¨æŒ‰ä¸‹<code>Enter</code>ä¹‹åï¼Œè°ƒç”¨storeä¸­å®šä¹‰çš„æ–°å¢æ–¹æ³•ï¼Œå®ç°æ–°å¢åŠŸèƒ½ã€‚</em></p>\n</blockquote>\n<ol><li>ç»™<code>task.Store.js</code>æ·»åŠ æ–°å¢çš„æ–¹æ³•</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// æ–°å¢æ“ä½œ</span>\n<span class=\"token function\">insertTask</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">task</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>task<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>åœ¨ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>useState</code>ä¸´æ—¶å­˜æ”¾è¾“å…¥æ¡†çš„valueå€¼ã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// å­˜æ”¾æ–°å¢çš„todo</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>taskValue<span class=\"token punctuation\">,</span> setTaskValue<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// æ–°å¢è¾“å…¥æ¡†</span>\n<span class=\"token operator\">&lt;</span>input className<span class=\"token operator\">=</span><span class=\"token string\">'new-todo'</span> autoFocus autoComplete<span class=\"token operator\">=</span><span class=\"token string\">'off'</span> placeholder<span class=\"token operator\">=</span><span class=\"token string\">'What needs to be done?'</span>\n  value<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>taskValue<span class=\"token punctuation\">}</span> onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token parameter\">event</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">setTaskValue</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>å…¶å®ä¹Ÿå°±æ˜¯å—æ§ç»„ä»¶ä¸€æ ·çš„å†™æ³•ï¼ŒæŠŠè¾“å…¥æ¡†ä¸taskValueè¿™ä¸ªä¸´æ—¶stateç»‘å®šã€‚</p>\n<ol start=\"3\"><li>æŒ‰ä¸‹<code>Enter</code>å®ç°æ–°å¢ã€‚</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// ä¸ºinputæ·»åŠ å±æ€§</span>\nonKeyUp<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token parameter\">event</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">addTask</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// å®šä¹‰addTaskæ–¹æ³•</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">addTask</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>keyCode <span class=\"token operator\">!==</span> <span class=\"token number\">13</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>taskValue<span class=\"token punctuation\">.</span><span class=\"token function\">trim</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'è¾“å…¥ä¸èƒ½ä¸ºç©ºï¼'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n    taskStore<span class=\"token punctuation\">.</span><span class=\"token function\">insertTask</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token literal-property property\">id</span><span class=\"token operator\">:</span> <span class=\"token function\">nanoid</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“nanoidè‡ªåŠ¨ç”Ÿæˆéšæœºçš„idå€¼</span>\n      <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> taskValue<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">isDone</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token function\">setTaskValue</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"6_270\"></a>6.ç»Ÿè®¡è®¡æ•°åŠŸèƒ½å®ç°</h2>\n<blockquote>\n<p>ä»»åŠ¡æ€»æ•°å¾ˆç®€å•ï¼Œå…¶å®å°±æ˜¯listæ•°ç»„çš„é•¿åº¦ã€‚</p>\n<pre><code class=\"prism language-js\"><span class=\"token punctuation\">{<!-- --></span>taskStore<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">}</span>\n</code></pre>\n</blockquote>\n<p>å·²å®Œæˆçš„æ•°é‡éœ€è¦å€ŸåŠ©<code>Mobx</code>ä¸­çš„è®¡ç®—å±æ€§æ¥å®Œæˆå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>\n<ol><li>åœ¨<code>task.Store.js</code>ä¸­å®šä¹‰è®¡ç®—å±æ€§<code>isFinishedLength</code></li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// å·²å®Œæˆçš„æ•°é‡</span>\n<span class=\"token keyword\">get</span> <span class=\"token function\">isFinishedLength</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> item<span class=\"token punctuation\">.</span>isDone<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>length\n<span class=\"token punctuation\">}</span>\n<span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">isAllDone</span><span class=\"token operator\">:</span> computed<span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">+</span> isFinishedLength<span class=\"token operator\">:</span> computed\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>æ¸²æŸ“</li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token punctuation\">{<!-- --></span>taskStore<span class=\"token punctuation\">.</span>isFinishedLength<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"7Mobx__React__301\"></a>7.Mobx - React èŒè´£åˆ’åˆ†</h2>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\63efb267495c4981ab6ce29f5f08e614.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}