{"blogid": "126682481", "writerAge": "码龄14年", "writerBlogNum": "319", "writerCollect": "5947", "writerComment": "543", "writerFan": "22565", "writerGrade": "6级", "writerIntegral": "7395", "writerName": "YYDataV数据可视化", "writerProfileAdress": "writer_image\\profile_126682481.jpg", "writerRankTotal": "1742", "writerRankWeekly": "1008", "writerThumb": "961", "writerVisitNum": "564925", "blog_read_count": "7562", "blog_time": "已于 2022-09-03 21:18:09 修改", "blog_title": "34【源码】数据可视化：基于 Echarts + Python 动态实时大屏 - 视频平台", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h1>效果图展示</h1>\n<h2>1.动态实时更新数据效果图</h2>\n<p>说明: 其中 <strong>今日抓拍，抓拍总数，预警信息统计，监控点位统计图表</strong> 做了<strong>动态实时更新处理</strong>。</p>\n<p><img alt=\"3a16d4493655406d95d79cdcd2e85b86.gif\" src=\"https://img-blog.csdnimg.cn/3a16d4493655406d95d79cdcd2e85b86.gif\"/>​</p>\n<h2> 2.静态切片效果图</h2>\n<p><img alt=\"24c1d654b6b649c2bb00b5844c902caf.png\" src=\"image\\24c1d654b6b649c2bb00b5844c902caf.png\"/></p>\n<p> </p>\n<h1><strong>一、确定需求方案</strong></h1>\n<h2><strong>1、确定产品上线部署的屏幕LED分辨率</strong></h2>\n<p>本案例基于16:9 屏宽比，F11全屏显示。</p>\n<h2><strong>2、</strong><strong>部署方式 </strong></h2>\n<p>基于免安装可执行程序：支持Windows、Linux、Mac等各种操作系统；将程序复制到服务器上即可，无需其它环境依赖；</p>\n<p>观看方式：既可在服务器上直接观看程序界面，也可在远程用浏览器打开播放，例如Chrome浏览器、360浏览器等。</p>\n<h1>二、整体架构设计</h1>\n<blockquote>\n<ol><li>前端基于<strong>Echarts开源库设计</strong>，使用WebStorm编辑器；</li><li><strong>后端基于Python Flask实现，使用 Vscode 编辑器；</strong></li><li><strong>数据传输格式：JSON；</strong></li><li>数据源类型：目前采用JSON文件方式，可自行添加支持PostgreSQL、MySQL、Oracle、Microsoft SQL Server、SQLite，自行添加pandas支持Excel表格等，还可以定制HTTP API接口方式。</li><li><strong>数据更新方式：</strong><strong>采用http get 轮询方式 </strong>。在实际应用中，也可以视情况选择j监测后端数据实时更新，实时推送到前端的方式；</li></ol>\n</blockquote>\n<h1>三、编码实现 （关键代码）</h1>\n<h2>1、前端html代码 - 页面布局主要基于div</h2>\n<pre><code>\n&lt;body&gt;\n    &lt;div class=\"body\"&gt;\n        &lt;div class=\"head-box\"&gt;\n            &lt;div class=\"logout-box\"&gt;&lt;/div&gt;\n            &lt;div class=\"link-box\"&gt;&lt;/div&gt;\n            南方软件视频平台大屏中心\n            &lt;div class=\"time-box\" id=\"time\"&gt;2022年9月1日&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"main\"&gt;\n            &lt;!--left--&gt;\n            &lt;div class=\"col\"&gt;\n                &lt;!--巡查视频问题--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;div class=\"col-title\"&gt;巡查视频问题&lt;/div&gt;\n                    &lt;div class=\"col-main\"&gt;\n                        &lt;ul class=\"xcspwt-box js-xcspwt\"&gt;\n                            &lt;li&gt;\n                                &lt;span&gt;张三丰&lt;/span&gt;\n                                &lt;span title=\"南京信息工程大学地铁站1号出口监控点\"&gt;南京信息工程大学地铁站1号出口监控点&lt;/span&gt;\n                                &lt;span title=\"视频信号不稳定\"&gt;视频信号不稳定&lt;/span&gt;\n                            &lt;/li&gt;\n                            .......\n                        &lt;/ul&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;!--巡查视频问题统计--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;div class=\"col-title\"&gt;巡查视频问题统计&lt;/div&gt;\n                    &lt;div class=\"col-main\"&gt;\n                        &lt;!--视频问题统计--&gt;\n                        &lt;ul class=\"spwtzgtj-box\"&gt;\n                            &lt;li&gt;\n                                &lt;span&gt;问题总数&lt;/span&gt;\n                                &lt;span&gt;234&lt;/span&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;\n                                &lt;span&gt;已整改&lt;/span&gt;\n                                &lt;span&gt;34&lt;/span&gt;\n                            &lt;/li&gt;\n                            &lt;li&gt;\n                                &lt;span&gt;未整改&lt;/span&gt;\n                                &lt;span&gt;200&lt;/span&gt;\n                            &lt;/li&gt;\n                        &lt;/ul&gt;\n                        &lt;div class=\"spwttj-echarts\" id=\"spwttjEchart\"&gt;\n\n                        &lt;/div&gt;\n\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;!--center--&gt;\n            &lt;div class=\"col\"&gt;\n                &lt;!--预警信息推送--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;ul class=\"zpsl-box\"&gt;\n                        &lt;li&gt;\n                            &lt;span&gt;今日抓拍&lt;/span&gt;\n                            &lt;span id=\"today_snap\"&gt;1245条&lt;/span&gt;\n                        &lt;/li&gt;\n                        &lt;li&gt;\n                            &lt;span&gt;抓拍总数&lt;/span&gt;\n                            &lt;span id=\"total_snap\"&gt;3421条&lt;/span&gt;\n                        &lt;/li&gt;\n                    &lt;/ul&gt;\n                    &lt;div class=\"col-title\"&gt;预警信息推送&lt;/div&gt;\n                    &lt;div class=\"col-main js-tjxxtsxq\" style=\"height: calc(100% - 190px);margin-top: 10px\"&gt;\n                        &lt;div class=\"yjxxts-box\"&gt;\n                            &lt;img src=\"img/12.png\"&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"yjxxts-box\"&gt;\n                            &lt;img src=\"img/12.png\"&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"yjxxts-box\"&gt;\n                            &lt;img src=\"img/12.png\"&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;!--预警信息统计--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;div class=\"col-title\"&gt;预警信息统计&lt;/div&gt;\n                    &lt;div class=\"col-main \"&gt;\n                        &lt;ul class=\"yjxxtj-title js-tab\"&gt;\n                            &lt;li class=\"on\"&gt;有人统计&lt;/li&gt;\n                            &lt;li&gt;无人统计&lt;/li&gt;\n                        &lt;/ul&gt;\n                        &lt;div class=\"yjxxtj-box\"&gt;\n                            &lt;ul class=\"wgxc-box js-wgxcBox\"&gt;\n                                &lt;li&gt;\n                                    &lt;div class=\"wgxc-bar\"&gt;&lt;span id=\"wgxc_span1\" class=\"wgxc-sl-bar\"\n                                            style=\"height:10%\"&gt;&lt;/span&gt;&lt;/div&gt;\n                                    &lt;div class=\"wgxcName\"&gt;南京&lt;/div&gt;\n                                &lt;/li&gt;\n                                ......\n                            &lt;/ul&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;!--right--&gt;\n            &lt;div class=\"col\"&gt;\n                &lt;!--全市监控点位统计--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;div class=\"col-title\"&gt;\n                        全市监控点位统计\n                    &lt;/div&gt;\n                    &lt;div class=\"col-main\"&gt;\n                        &lt;div class=\"qsjk-box\" id=\"qsjkdwEcharts\"&gt;\n                            &lt;!--全市监控点位--&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n                &lt;!--系统公告&amp;资源下载--&gt;\n                &lt;div class=\"col-box1\"&gt;\n                    &lt;div class=\"col-title\"&gt;\n                        &lt;ul class=\"xtggzlxz-box js-tab js-xtggzlxz\"&gt;\n                            &lt;li class=\"on\"&gt;资源下载&lt;/li&gt;\n                            &lt;li&gt;系统公告&lt;/li&gt;\n                        &lt;/ul&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"col-main\" style=\" height:calc(100% - 75px);padding:20px 0;overflow: hidden\"&gt;\n                        \n                       ......\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;!--预警信息推送弹框--&gt;\n            &lt;div class=\"yjxxts-tkbox js-yjxxtsTkbox\"&gt;\n                &lt;img src=\"img/12.png\"&gt;\n                &lt;div class=\"yjxxts-xqbox\"&gt;\n                    &lt;div class=\"col-title\"&gt;详情&lt;/div&gt;\n                    &lt;div class=\"yjxxts-xqmain\"&gt;\n                        &lt;table&gt;\n                            &lt;tr&gt;\n                                &lt;td&gt;监控点位&lt;/td&gt;\n                                &lt;td&gt;地铁站&lt;/td&gt;\n                            &lt;/tr&gt;\n                            &lt;tr&gt;\n                                &lt;td&gt;预警时间&lt;/td&gt;\n                                &lt;td&gt;2018-10-21&lt;/td&gt;\n                            &lt;/tr&gt;\n                            &lt;tr&gt;\n                                &lt;td&gt;预警类型&lt;/td&gt;\n                                &lt;td&gt;无人在岗&lt;/td&gt;\n                            &lt;/tr&gt;\n                            &lt;tr&gt;\n                                &lt;td&gt;预警状态&lt;/td&gt;\n                                &lt;td&gt;已处理&lt;/td&gt;\n                            &lt;/tr&gt;\n                        &lt;/table&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;</code></pre>\n<h2>2. 前端JS - <strong>echarts图表</strong></h2>\n<p><img alt=\"b02d67edc8514d16aee8f42efbbad7c4.png\" src=\"image\\b02d67edc8514d16aee8f42efbbad7c4.png\"/></p>\n<pre><code>/**全市监控点位统计**/\n    var loadqsjkdw = function () {\n        var myCharts = echarts.init(document.getElementById('qsjkdwEcharts'));\n        var option = {\n            grid: {\n                left: '5px',\n                right: '0%',\n                bottom: '18%',\n                top:'10%',\n            },\n            tooltip: {\n                show: \"true\",\n                trigger: 'axis',\n                axisPointer: { // 坐标轴指示器，坐标轴触发有效\n                    type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n                },\n                formatter:'{b0}:{c0}'\n            },\n            yAxis: {\n                show:false,\n                splitLine: {show: false,\n                    lineStyle:{\n                        color:'#353E47'\n                    }\n                },\n                axisTick: {show: false},\n                axisLine: {show: true,\n                    lineStyle:{\n                        color:'#353E47'\n                    }},\n                axisLabel: {\n                    textStyle: {\n                        color: '#ffffff'\n                    },\n                    formatter:function(value,index){\n                        var r = '';\n                        if(value&gt;100000000){//亿\n                            r = (value/100000000).toFixed(1) + '亿';\n                        }else if(value&gt;10000){//万\n                            r = (value/10000).toFixed(1) + '万';\n                        }else{\n                            r = value;\n                        }\n                        return r;\n                    }\n                }\n            },\n            xAxis: [\n                {\n                    type: 'category',\n                    axisTick: {\n                        show: false\n                    },\n                    axisLine: {\n                        show: true,\n                        lineStyle: {\n                            color: '#353E47',\n                        }\n                    },\n                    axisLabel:{\n                        textStyle:{\n                            color:'#fff'\n                        },\n                        interval:0\n                    },\n                    data: [\"南京\",\"苏州\",\"无锡\",\"常州\",\"南通\",\"徐州\",\"淮安\",\"镇江\",\"泰州\"]\n                }\n            ],\n            series: [\n                {\n                    name: '',\n                    type: 'bar',\n                    barWidth:'20px',\n                    itemStyle: {\n                        normal: {\n                            show: true,\n                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                                offset: 0,\n                                color: '#00d891'\n                            }, {\n                                offset: 1,\n                                color: '#00579a'\n                            }]),\n                            barBorderRadius: 50,\n                            borderWidth: 0,\n                            borderColor: '#333',\n                        }\n                    },\n                    label: {\n                        normal: {\n                            show: true,\n                            position: 'top',\n                            textStyle: {\n                                color: '#fff'\n                            }\n                        }\n                    },\n                    data:qsjkdw,\n                }\n\n            ]\n        };\n        myCharts.clear();\n        myCharts.setOption(option);\n        myCharts.on(\"click\",function(e){\n            loadsqjkdw();\n        });\n    };</code></pre>\n<h2><strong>3. </strong>前端JS - 数据定时更新控制</h2>\n<p>支持在每个echarts图表中独立控制定时更新的间隔。</p>\n<pre><code> var init = function () {\n        updateEcharts();\n        setInterval(function() {updateEcharts()},2000);//刷新周期设置\n\n        xcwttj();\n        loadqsjkdw();;\n    };</code></pre>\n<h2>4. 后端 Python Flask 代码</h2>\n<pre><code># -*- coding:utf-8 -*-\n\nimport io\nimport os\nimport sys\nimport time\nimport urllib\nimport random\nimport json\nfrom flask import Flask, redirect\n# 导入线程模块\nimport threading\n\napp = Flask(__name__, static_folder=\"static\", template_folder=\"template\")\n\n\n@app.route('/')\ndef index():\n    return redirect('/static/index.html')\n\n\n@app.route('/get_snap')\ndef get_snap():\n    jsonData = {}\n    jsonData['today_snap'] = random.randint(1, 100)\n    jsonData['total_snap'] = random.randint(1, 1000)\n    return json.dumps(jsonData)\n\n@app.route('/qsjkdw')\ndef qsjkdw():\n    jsonData = []\n    for x in range(9):\n        jsonData.append({\"value\": str(random.randint(1, 100))})\n    return json.dumps(jsonData)\n\n@app.route('/get_yjxxtj')\ndef get_yjxxtj():\n    jsonData = []\n    for x in range(6):\n        jsonData.append(random.randint(1, 100))\n    return json.dumps(jsonData)\n\n\ndef loop():\n    time.sleep(10)\n    pass\n\n# 主程序在这里\nif __name__ == \"__main__\":\n    # 开启线程，触发动态数据\n    a = threading.Thread(target=loop)\n    a.start()\n\n    # 开启 flask 服务\n    app.run(host='127.0.0.1', port=80, debug=True)\n</code></pre>\n<h1>四、运行效果</h1>\n<p><img alt=\"38f1b7e12d134fbda65ea7b3922ff8e6.gif\" src=\"https://img-blog.csdnimg.cn/38f1b7e12d134fbda65ea7b3922ff8e6.gif\"/></p>\n<h1>五、更多案例 </h1>\n<p><br/><a href=\"https://yydatav.blog.csdn.net/article/details/120705616?spm=1001.2014.3001.5502\" title=\"YYDatav的数据可视化大屏《精彩案例汇总》（Python&amp;Echarts源码）_YYDataV的博客-CSDN博客\">YYDatav的数据可视化大屏《精彩案例汇总》（Python&amp;Echarts源码）_YYDataV的博客-CSDN博客</a></p>\n<p><a href=\"https://yydatav.blog.csdn.net/article/details/123096879\" title=\"【工厂扫码打印&amp;扫码装箱&amp;错误追溯系统】完整案例详解（Python&amp;PyQt 源码&amp;Mysql数据库）_YYDataV数据可视化的博客-CSDN博客_pyqt案例\">【工厂扫码打印&amp;扫码装箱&amp;错误追溯系统】完整案例详解（Python&amp;PyQt 源码&amp;Mysql数据库）_YYDataV数据可视化的博客-CSDN博客_pyqt案例</a></p>\n<p>感谢开源分享的前端代码。</p>\n<p> </p>\n<p> </p>\n</div>\n</div>"}