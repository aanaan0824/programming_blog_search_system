{"blogid": "125688383", "writerAge": "码龄5年", "writerBlogNum": "2", "writerCollect": "75", "writerComment": "31", "writerFan": "4", "writerGrade": "1级", "writerIntegral": "55", "writerName": "xiao9wo8tian", "writerProfileAdress": "writer_image\\profile_125688383.jpg", "writerRankTotal": "130995", "writerRankWeekly": "1210164", "writerThumb": "8", "writerVisitNum": "6871", "blog_read_count": "6212", "blog_time": "已于 2022-07-10 19:28:56 修改", "blog_title": "保姆级官方yolov7的训练自己的数据集以及项目部署", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>yolov7 训练自己的数据集并部署</h3>\n<ul><li><a href=\"#__2\">第一步 数据集准备</a></li><li><a href=\"#_trainpy_3\">第二步 train.py载入自己的数据集并训练</a></li><li><a href=\"#_pt_4\">第三步 将训练好的pt文件做成接口调用</a></li><li><ul><li><a href=\"#__9\">第一步 数据集准备</a></li><li><a href=\"#_trainpy_21\">第二步 train.py载入自己的数据集并训练</a></li><li><a href=\"#_pt_26\">第三步 将训练好的pt文件做成接口调用</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"__2\"></a>第一步 数据集准备</h1>\n<h1><a id=\"_trainpy_3\"></a>第二步 train.py载入自己的数据集并训练</h1>\n<h1><a id=\"_pt_4\"></a>第三步 将训练好的pt文件做成接口调用</h1>\n<p>首先，先说明我只是初步接触yolov7,写这篇文章的主要目的是可以让大家快速应用自己的数据集进行训练。没有接触过yolov5也没有关系，该篇文章会逐步进行演示如何训练。</p>\n<h2><a id=\"__9\"></a>第一步 数据集准备</h2>\n<p>首先确保你有labelimg标图软件，若无，需要自行去下一个并看一下标图教程。<br/> 当你已经标注完成，获得了img以及相对应的xml之后（如图）<br/> <img alt=\"img文件夹存放原始图片\" src=\"image\\1a0637a6a3f24f59b8cb483d3e93b53e.jpeg\"/><br/> <img alt=\"xml文件夹存放标注好的xml\" src=\"image\\e0bab7a231e74b5a95139a3f7cd3e66b.jpeg\"/><br/> <img alt=\"文件目录格式\" src=\"image\\b743efa5301c46f59d9af85b440e9e7f.jpeg\"/><br/> 接下来就是可选择项：是否需要图像增强来获取更多样本，如需要百度网盘链接：https://pan.baidu.com/s/1nRDHJXJ8HGR96KX5And6tg?pwd=1bww 提取码：1bww ，直接用enhance_img.py去增强。之后我的习惯是每有一个项目需要训练，则会新建一个文件夹，项目存放的文件如图：<img alt=\"项目目录\" src=\"image\\9b5048a6361940e5b559a6889614629a.jpeg\"/><br/> 下面ImageSets\\Main用于存放后续脚本文件划分训练集测试集的相对应的train.txt,test.txt。hyp.scratch.p5.yaml为yolov7的超参设置，可以直接从yolov7\\data下面去拷过来放到你项目里。icon.yaml为你要所要训练的类别和相应的类，同时也会写上实际训练时训练数据和测试数据。该文件如下图。<img alt=\"icon.yaml\" src=\"image\\54990056551743c2a1efe5134070ed38.jpeg\"/><br/> Main.py就是划分你的数据为训练集和测试集.txt的脚本。整体新建的项目目录就是这样。下面说一下操作流程：1 首先确保是该项目目录方式 2 运行main.py脚本文件得到了ImageSets\\Main下面的train.txt,test.txt。3 在yolov7的根目录下运行xml2txt脚本文件。main.py xml2txt.py文件见百度连接：链接：https://pan.baidu.com/s/1ffRgyf7s7F3-G29TS23ONQ?pwd=411n 提取码：411n 注意要将该文件的类和项目名改成自己的。如图：<img alt=\"在这里插入图片描述\" src=\"image\\639804edcf174ab596998b54c90c7735.jpeg\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\24603789a5614c3b9f899918a7bd6a31.jpeg\"/><br/> 此时，我们的数据准备阶段已经完成，项目目录如图：<img alt=\"在这里插入图片描述\" src=\"image\\3026a4cd3c914cb98e08a201312a6a1d.jpeg\"/></p>\n<h2><a id=\"_trainpy_21\"></a>第二步 train.py载入自己的数据集并训练</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\e4e79f2bc73640b5a6199e43aedb839c.jpeg\"/><br/> 红色箭头和红框就是常见改动的地方，改动后就可以训练了。</p>\n<h2><a id=\"_pt_26\"></a>第三步 将训练好的pt文件做成接口调用</h2>\n<p>在等待训练完成之后，就会在runs/train下面获得训练的best.pt,你可以拿着这个pt去做接口使用了。首先，在自己的项目里使用必须要确保yolov7根目录下的models和utils文件夹放到了你的项目根目录。然后下载model_import.py百度链接：链接：https://pan.baidu.com/s/1WZ5iyoFeaMe9mpsMPZndoA?pwd=1y5p 提取码：1y5p 嵌入你的任何项目路径下调用predict函数就可以输出检出结果了。</p>\n<p>最后，如果有任何疑问可以在下方留言，我看到后会第一时间回复，确保大家都可以快速进行yolov7的训练和部署！</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}