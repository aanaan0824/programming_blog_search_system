{"blogid": "122790431", "writerAge": "码龄1年", "writerBlogNum": "111", "writerCollect": "212", "writerComment": "13", "writerFan": "51", "writerGrade": "4级", "writerIntegral": "1219", "writerName": "蕾峰", "writerProfileAdress": "writer_image\\profile_122790431.jpg", "writerRankTotal": "15578", "writerRankWeekly": "20693", "writerThumb": "43", "writerVisitNum": "86701", "blog_read_count": "9294", "blog_time": "于 2022-02-05 21:16:31 发布", "blog_title": "python的time库详解", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h2>time库的使用：</h2>\n<p>Python中内置了一些与时间处理相关的库，如time、datatime和calendar库。</p>\n<p>其中time库是Python中处理时间的标准库，是最基础的时间处理库。</p>\n<p>time库的功能如下：</p>\n<p>（1）计算机时间的表达</p>\n<p>（2）提供获取系统时间并格式化输出功能</p>\n<p>（3）提供系统级精确计时功能，用于程序性能分析</p>\n<p>格式如下：</p>\n<p>import time</p>\n<p>time.&lt;b&gt;( )</p>\n<p>time库包括三类函数：</p>\n<p>时间获取：time（）、ctime()、gmtime()、localtime()</p>\n<p>时间格式化：strftime()、strptime()、asctime()</p>\n<p>程序计时：sleep()、perf_counter()</p>\n<h2>1.时间获取：</h2>\n<h3>（1）time函数</h3>\n<p>获取当前时间戳（从世界标准时间的1970年1月1日00：00：00开始到当前这一时刻为止的总秒数），即计算机内部时间值，浮点数。</p>\n<p>示例代码如下：</p>\n<pre>import time\nprint(time.time())</pre>\n<p>运行界面如下：</p>\n<p><img alt=\"\" height=\"168\" src=\"image\\c9dc43c6e42f4294b64f5a7894e22c87.png\" width=\"439\"/></p>\n<h3>（2）localtime（）函数和gmtime()函数</h3>\n<p>Python提供了可以获取结构化时间的localtime（）函数和gmtime函数</p>\n<p>获取当前时间，表示为计算机可处理的时间格式（struct_time格式）</p>\n<p>localtime()函数和gmtime()函数都可将时间戳转换为以元组表示的时间对象（struct_time格式)，但是localtime()函数得到的是当地时间，gmtime()函数得到的是世界统一时间。</p>\n<p>格式如下所示：</p>\n<p>localtime([secs])</p>\n<p>gmtime([secs])</p>\n<p>其中secs是一个表示时间戳的浮点数，若不提供该参数，默认以time（）函数获取的时间戳作为参数。</p>\n<p>localtime函数示例代码如下：</p>\n<pre>import time\nprint(time.localtime())#默认以以time（）函数获取的时间戳作为参数，为当地时间\nprint(time.localtime(34.54))#参数为浮点数</pre>\n<p>运行界面如下：</p>\n<p><img alt=\"\" height=\"208\" src=\"image\\c54899b1647e450fbeae25ed2eb8a292.png\" width=\"1097\"/></p>\n<p> gmtime函数示例如下：</p>\n<pre>import time\nprint(time.gmtime())#世界统一时间。\nprint(time.gmtime(34.54))</pre>\n<p>运行界面如下： </p>\n<p><img alt=\"\" height=\"220\" src=\"image\\07cc0803d0d2427c99cef448a467b450.png\" width=\"1036\"/></p>\n<p>                                             struct_time元组中元素的含义和取值</p>\n<table align=\"center\" border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td style=\"width:110px;\">元素</td><td style=\"width:135px;\">含义</td><td style=\"width:252px;\">取值</td></tr><tr><td style=\"width:110px;\">tm_year</td><td style=\"width:135px;\">年</td><td style=\"width:252px;\"> <p>4位数字，如2022</p> </td></tr><tr><td style=\"width:110px;\">tm_mon</td><td style=\"width:135px;\">月</td><td style=\"width:252px;\">1~12，如2</td></tr><tr><td style=\"width:110px;\">tm_mday</td><td style=\"width:135px;\">日</td><td style=\"width:252px;\">1~31，如5</td></tr><tr><td style=\"width:110px;\">tm_hour</td><td style=\"width:135px;\">时</td><td style=\"width:252px;\">0~23，如7</td></tr><tr><td style=\"width:110px;\">tm_min</td><td style=\"width:135px;\">分</td><td style=\"width:252px;\">0~59，如50</td></tr><tr><td style=\"width:110px;\">tm_sec</td><td style=\"width:135px;\">秒</td><td style=\"width:252px;\">0~61（60或61是闰秒）</td></tr><tr><td style=\"width:110px;\">tm_wday</td><td style=\"width:135px;\">一周的第几日</td><td style=\"width:252px;\">0~6（0为周一，依此类推）</td></tr><tr><td style=\"width:110px;\">tm_yday</td><td style=\"width:135px;\">一年的第几日</td><td style=\"width:252px;\">1~366(366为儒略历）</td></tr><tr><td style=\"width:110px;\">tm_isdst</td><td style=\"width:135px;\">夏令时</td><td style=\"width:252px;\"> <p>1：是夏令时</p> <p>0：非夏令时</p> <p>-1：不确定</p> </td></tr></tbody></table>\n<h3>（3）ctime（）函数（与asctime（）函数为一对互补函数）</h3>\n<p></p>\n<p>读取当前时间并以易读方式表示，返回字符串。</p>\n<p>ctime（）函数用于将一个时间戳（以s为单位的浮点数）转换为“Sat Jan 13 21:56:34 2018\"这种形式（若该函数未收到参数，则默认以time.time()作为参数），转换成的形式为”星期 月份 当月号 时分秒 年份“。</p>\n<p>示例代码如下：</p>\n<pre>import time\nprint(time.ctime())\nprint(time.ctime(34.56))</pre>\n<p>运行界面如下：</p>\n<p><img alt=\"\" height=\"170\" src=\"image\\fc0112c5c1d443b6ba297b66656e5a83.png\" width=\"559\"/></p>\n<h1> 时间格式化：</h1>\n<p>将时间以合理的方式展示出来</p>\n<p>格式化：类似字符串格式化，需要有展示模板</p>\n<p>展示模板由特定的格式化控制符组成</p>\n<h2>（1）strftime（）函数（将时间格式输出为字符串，与strptime函数互补）。strftime(格式，时间 )主要决定时间的输出格式</h2>\n<p>strftime()函数借助时间格式控制符来输出格式化的时间字符串，其中%a,%d,%b等是time库预定义的用于控制不同时间或时间成分的格式控制符。</p>\n<p>                            time库中常用的时间格式控制符及其说明如下所示</p>\n<table align=\"center\" border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td>时间格式控制符</td><td>说明</td></tr><tr><td>%Y</td><td>四位数的年份，取值范围为0001~9999,如1900</td></tr><tr><td>%m</td><td>月份（01~12），例如10</td></tr><tr><td>%d</td><td>月中的一天（01~31）例如：25</td></tr><tr><td>%B</td><td>本地完整的月份名称，比如January</td></tr><tr><td>%b</td><td>本地简化的月份名称，比如Jan</td></tr><tr><td>%a</td><td>本地简化的周日期，Mon~Sun,例如Wed</td></tr><tr><td>%A</td><td>本地完整周日期，”Monday~Sunday,例如Wednesday</td></tr><tr><td>%H</td><td>24小时制小时数（00~23),例如：12</td></tr><tr><td>%l</td><td>12小时制小时数（01~12），例如：7</td></tr><tr><td>%p</td><td>上下午，取值为AM或PM</td></tr><tr><td>%M</td><td>分钟数（00~59），例如26</td></tr><tr><td>%S</td><td>秒（00~59），例如26</td></tr></tbody></table>\n<p>strftime()函数有两条参数，其中一个为tpl(格式化的模板字符串参数，用来定义输出效果），另一个为ts(是计算机内部时间类型变量）</p>\n<p>格式如下：</p>\n<p>strftime(tpl,ts)</p>\n<p>示例代码如下：</p>\n<pre>import time\nt=time.gmtime()\nprint(time.strftime(\"%Y-%m-%d %H:%M:%S\",t))</pre>\n<p>运行界面如下：</p>\n<p><img alt=\"\" height=\"200\" src=\"image\\b07c9ec033f440579c3f973afc717d02.png\" width=\"531\"/></p>\n<h2>（2）strptime()函数，strptime(字符串，格式），主要将该格式的字符串输出为struct_time.</h2>\n<p>strptime(str,tpl)tpl(是格式化模板字符串，用来定义输入效果）</p>\n<p>str是字符串形式的时间值，所以他的格式为前面为字符串，后面为字符串的格式，然后输出的格式为struct_time。</p>\n<p>示例代码如下：</p>\n<pre>import time\nprint(time.strptime(\"2018-1-26 12:55:20\",'%Y-%m-%d %H:%M:%S'))</pre>\n<p>运行界面如下所示：</p>\n<p><img alt=\"\" height=\"170\" src=\"image\\1968db2c2936428684d4346118c4d127.png\" width=\"1150\"/></p>\n<p> </p>\n<p>在对时间的理解上，我们可以这样认为：在计算机中为了表达时间，它其实只有一个浮点数，前面提到的这个浮点数是从1970年1月1日开始的，然后为了让其他的程序能够更好的处理这个浮点数，我们把它定义一个程序能够理解的格式，这个格式就是用gmtime来获取的struct_time格式。</p>\n<p>struct_time格式，它包含了许多元素，这些元素的值都是通过浮点数来提供的。</p>\n<p>反过来，我们也可以使用一个字符串赋予一个时间给我们的strptime类型，然后并由这个类型进一步生成浮点数。</p>\n<h2>程序计时：</h2>\n<p>程序计时应用广泛</p>\n<p>程序计时指测量起止动作所经历时间的过程</p>\n<p>测量时间指的是能够记录时间的流逝: perf_counter()获取计算机中CPU也就是中央处理器以其频率运行的时钟纳秒计算，非常精确。</p>\n<p>产生时间函数:sleep</p>\n<p>让程序去休眠或者产生一定的时间</p>\n<p><strong>perf_counter()</strong>返回一个CPU级别的精确时间计数值，单位为秒，由于这个计数值起点不确定，连续调用差值才有意义</p>\n<p>示例代码如下：</p>\n<pre>import time\nstart=time.perf_counter()\nend=time.perf_counter()\nprint(start)\nprint(end)\nprint(end-start)\n</pre>\n<p>运行界面如下： </p>\n<p><img alt=\"\" height=\"225\" src=\"image\\ebcf58bdc29b4b3695b922c3ce2d41e0.png\" width=\"789\"/></p>\n<p><strong>sleep（s) </strong> s拟休眠的时间，单位是秒，可以是浮点数</p>\n<p>示例代码如下：</p>\n<pre>import time\nprint(\"开始\")\ntime.sleep(3.3)\nprint(\"结束\")    </pre>\n<p>运行界面如下：</p>\n<p><img alt=\"\" height=\"176\" src=\"image\\81db171717df412abf1fc6ff913519e7.png\" width=\"477\"/></p>\n<p> 程序经过3.3秒后输出结束。</p>\n<p></p>\n</div>\n</div>"}