{"blogid": "122936580", "writerAge": "码龄8年", "writerBlogNum": "21", "writerCollect": "318", "writerComment": "130", "writerFan": "63", "writerGrade": "3级", "writerIntegral": "748", "writerName": "Beannnnnnn", "writerProfileAdress": "writer_image\\profile_122936580.jpg", "writerRankTotal": "45895", "writerRankWeekly": "118856", "writerThumb": "223", "writerVisitNum": "38194", "blog_read_count": "6829", "blog_time": "已于 2022-02-16 09:39:13 修改", "blog_title": "JS实现轮播图（一看就懂逻辑清晰）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>轮播图有很多种实现方法，这是其中一种最清晰的方法。思路很清晰，代码很简单，欢迎大佬多指教。</p>\n<p>先来看下效果图，嫌麻烦就不用具体图片来实现了，主要是理清思路。（自动轮播，左右按钮切换图片，小圆点切换图片，鼠标移入暂停轮播，鼠标移出继续轮播）</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/14ebd19699c74e6dbb5c6009ed6c1dbe.gif\"/></p>\n<p></p>\n<hr/>\n<h3> HTML</h3>\n<p>首先是html内容，布局很简单，一个图片列表，一个点列表，两个按钮。注意data-index使用HTML5中的data-xx属性来嵌入自定义数据（下面JS代码会提到）。记得给默认显示的图片和对应的小圆点加上active类哦。</p>\n<pre><code class=\"language-javascript\"> &lt;div class=\"wrap\"&gt;\n        &lt;ul class=\"list\"&gt;\n            &lt;li class=\"item active\"&gt;0&lt;/li&gt;\n            &lt;li class=\"item\"&gt;1&lt;/li&gt;\n            &lt;li class=\"item\"&gt;2&lt;/li&gt;\n            &lt;li class=\"item\"&gt;3&lt;/li&gt;\n            &lt;li class=\"item\"&gt;4&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul class=\"pointList\"&gt;\n            &lt;li class=\"point active\" data-index = 0&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 1&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 2&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 3&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 4&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;button class=\"btn\" id=\"leftBtn\"&gt; &lt; &lt;/button&gt; \n        &lt;button class=\"btn\" id=\"rightBtn\"&gt; &gt; &lt;/button&gt;\n\n    &lt;/div&gt;</code></pre>\n<h3>CSS </h3>\n<p>思路：父容器list相对定位，item绝对定位，实现让所有图片重叠在父容器内。利用z-index来设置图片高度，图片高度最高会显示在顶层上。那么整个容器中，左右切换按钮和小圆点始终要在最顶层，<span style=\"color:#fe2c24;\">不能被图片覆盖，所以他们的z-index一定要比图片高</span>。active是一个样式，给某张图片绑定这个样式就能在最上层显示。然后就是图片切换的渐变效果，opacity完全不透明到透明，再加个transition动画效果。最后就是cursor给小圆点添加“小手指”，其他就没什么好说的了。</p>\n<pre><code class=\"language-css\">&lt;style&gt;\n        .wrap {\n            width: 800px;\n            height: 400px;\n            position: relative;\n        }\n\n        .list {\n            width: 800px;\n            height: 400px;\n            position: relative;\n            padding-left: 0px;\n        }\n\n        .item {\n            width: 100%;\n            height: 100%;\n            list-style: none;\n            position: absolute;\n            left: 0;\n            opacity: 0;\n            transition: all .8s;\n        }\n\n        .item:nth-child(1) {\n            background-color: skyblue;\n        }\n\n        .item:nth-child(2) {\n            background-color: yellowgreen;\n        }\n\n        .item:nth-child(3) {\n            background-color: rebeccapurple;\n        }\n\n        .item:nth-child(4) {\n            background-color: pink;\n        }\n\n        .item:nth-child(5) {\n            background-color: orange;\n        }\n\n        .item.active {\n            z-index: 10;\n            opacity: 1;\n        }\n\n        .btn {\n            width: 60px;\n            height: 100px;\n            z-index: 100;\n            top: 150px;\n            position: absolute;\n        }\n\n        #leftBtn {\n            left: 0px;\n        }\n\n        #rightBtn {\n            right: 0px;\n        }\n\n        .pointList {\n            list-style: none;\n            padding-left: 0px;\n            position: absolute;\n            right: 20px;\n            bottom: 20px;\n            z-index: 200;\n        }\n\n        .point {\n            width: 10px;\n            height: 10px;\n            background-color: antiquewhite;\n            border-radius: 100%;\n            float: left;\n            margin-right: 8px;\n            border-style: solid;\n            border-width: 2px;\n            border-color: slategray;\n            cursor: pointer;  \n        }\n\n        .point.active{\n            background-color: cadetblue;\n        }\n    &lt;/style&gt;</code></pre>\n<h3>Javascript </h3>\n<p>Index可以说是整个代码里面的\"核心\"，先封装一个清除active的方法，这里面要清除图片的active（显示在最上层），比如<span style=\"color:#fe2c24;\">切换到下一张图上张图的active就要清除</span>。还有point的active（图片对应小圆点改变样式）。然后goIndex这个方法就是给图片和对应的小圆点同时加上active，左右按钮绑定的方法就不说了。</p>\n<p>用getAttribute拿到刚才给li标签绑定的data-index属性，绑定图片index = pointindex，就能实现点击小圆点图片切换了。由于上面goIndex方法早已经绑定好了给图片添加active样式的时候也给小圆点添加的样式了，就可以实现图片切换小圆点跟随变化的效果。</p>\n<pre><code class=\"language-javascript\">&lt;script&gt;\n        var items = document.querySelectorAll(\".item\");//图片节点\n        var points = document.querySelectorAll(\".point\")//点\n        var left = document.getElementById(\"leftBtn\");\n        var right = document.getElementById(\"rightBtn\");\n        var all = document.querySelector(\".wrap\")\n        var index = 0;\n        var time = 0;//定时器跳转参数初始化\n        \n\n        //封装一个清除active方法\n        var clearActive = function () {\n            for (i = 0; i &lt; items.length; i++) {\n                items[i].className = 'item';\n            }\n            for (j = 0; j &lt; points.length; j++) {\n                points[j].className = 'point';\n            }\n        }\n\n        //改变active方法\n        var goIndex = function () {\n            clearActive();\n            items[index].className = 'item active';\n            points[index].className = 'point active'\n        }\n        //左按钮事件\n        var goLeft = function () {\n            if (index == 0) {\n                index = 4;\n            } else {\n                index--;\n            }\n            goIndex();\n        }\n\n        //右按钮事件\n        var goRight = function () {\n            if (index &lt; 4) {\n                index++;\n            } else {\n                index = 0;\n            }\n            goIndex();\n        }\n        \n\n        //绑定点击事件监听\n        left.addEventListener('click', function () {\n            goLeft();\n            time = 0;//计时器跳转清零\n        })\n\n        right.addEventListener('click', function () {\n            goRight();\n            time = 0;//计时器跳转清零\n        })\n\n        for(i = 0;i &lt; points.length;i++){\n            points[i].addEventListener('click',function(){\n                var pointIndex = this.getAttribute('data-index')\n                index = pointIndex;\n                goIndex();\n                time = 0;//计时器跳转清零\n            })\n        }\n        //计时器轮播效果\n        var timer;\n        function play(){\n         timer = setInterval(() =&gt; {\n            time ++;\n            if(time == 20 ){\n                goRight();\n                time = 0;\n            }    \n        },100)\n    }\n        play();\n        //移入清除计时器\n        all.onmousemove = function(){\n            clearInterval(timer)\n        }\n       //移出启动计时器\n        all.onmouseleave = function(){\n            play();\n        }\n    &lt;/script&gt;</code></pre>\n<p><strong>总结：这个简单的轮播图实现例子是第一次写最容易理解，逻辑最清晰的一种。下面我把完整的代码块放出来，直接复制粘贴就可以运行。</strong></p>\n<hr/>\n<pre><code class=\"language-javascript\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;style&gt;\n        .wrap {\n            width: 800px;\n            height: 400px;\n            position: relative;\n        }\n\n        .list {\n            width: 800px;\n            height: 400px;\n            position: relative;\n            padding-left: 0px;\n        }\n\n        .item {\n            width: 100%;\n            height: 100%;\n            list-style: none;\n            position: absolute;\n            left: 0;\n            opacity: 0;\n            transition: all .8s;\n        }\n\n        .item:nth-child(1) {\n            background-color: skyblue;\n        }\n\n        .item:nth-child(2) {\n            background-color: yellowgreen;\n        }\n\n        .item:nth-child(3) {\n            background-color: rebeccapurple;\n        }\n\n        .item:nth-child(4) {\n            background-color: pink;\n        }\n\n        .item:nth-child(5) {\n            background-color: orange;\n        }\n\n        .item.active {\n            z-index: 10;\n            opacity: 1;\n        }\n\n        .btn {\n            width: 60px;\n            height: 100px;\n            z-index: 100;\n            top: 150px;\n            position: absolute;\n        }\n\n        #leftBtn {\n            left: 0px;\n        }\n\n        #rightBtn {\n            right: 0px;\n        }\n\n        .pointList {\n            list-style: none;\n            padding-left: 0px;\n            position: absolute;\n            right: 20px;\n            bottom: 20px;\n            z-index: 200;\n        }\n\n        .point {\n            width: 10px;\n            height: 10px;\n            background-color: antiquewhite;\n            border-radius: 100%;\n            float: left;\n            margin-right: 8px;\n            border-style: solid;\n            border-width: 2px;\n            border-color: slategray;\n            cursor: pointer;  \n        }\n\n        .point.active{\n            background-color: cadetblue;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;div class=\"wrap\"&gt;\n        &lt;ul class=\"list\"&gt;\n            &lt;li class=\"item active\"&gt;0&lt;/li&gt;\n            &lt;li class=\"item\"&gt;1&lt;/li&gt;\n            &lt;li class=\"item\"&gt;2&lt;/li&gt;\n            &lt;li class=\"item\"&gt;3&lt;/li&gt;\n            &lt;li class=\"item\"&gt;4&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;ul class=\"pointList\"&gt;\n            &lt;li class=\"point active\" data-index = 0&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 1&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 2&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 3&gt;&lt;/li&gt;\n            &lt;li class=\"point\" data-index = 4&gt;&lt;/li&gt;\n        &lt;/ul&gt;\n        &lt;button class=\"btn\" id=\"leftBtn\"&gt; &lt; &lt;/button&gt; \n        &lt;button class=\"btn\" id=\"rightBtn\"&gt; &gt; &lt;/button&gt;\n\n    &lt;/div&gt;\n    &lt;script&gt;\n        var items = document.querySelectorAll(\".item\");//图片\n        var points = document.querySelectorAll(\".point\")//点\n        var left = document.getElementById(\"leftBtn\");\n        var right = document.getElementById(\"rightBtn\");\n        var all = document.querySelector(\".wrap\")\n        var index = 0;\n        var time = 0;//定时器跳转参数初始化\n        \n\n        //清除active方法\n        var clearActive = function () {\n            for (i = 0; i &lt; items.length; i++) {\n                items[i].className = 'item';\n            }\n            for (j = 0; j &lt; points.length; j++) {\n                points[j].className = 'point';\n            }\n        }\n\n        //改变active方法\n        var goIndex = function () {\n            clearActive();\n            items[index].className = 'item active';\n            points[index].className = 'point active'\n        }\n        //左按钮事件\n        var goLeft = function () {\n            if (index == 0) {\n                index = 4;\n            } else {\n                index--;\n            }\n            goIndex();\n        }\n\n        //右按钮事件\n        var goRight = function () {\n            if (index &lt; 4) {\n                index++;\n            } else {\n                index = 0;\n            }\n            goIndex();\n        }\n        \n\n        //绑定点击事件监听\n        left.addEventListener('click', function () {\n            goLeft();\n            time = 0;//计时器跳转清零\n        })\n\n        right.addEventListener('click', function () {\n            goRight();\n            time = 0;//计时器跳转清零\n        })\n\n        for(i = 0;i &lt; points.length;i++){\n            points[i].addEventListener('click',function(){\n                var pointIndex = this.getAttribute('data-index')\n                index = pointIndex;\n                goIndex();\n                time = 0;//计时器跳转清零\n            })\n        }\n        //计时器\n        var timer;\n        function play(){\n         timer = setInterval(() =&gt; {\n            time ++;\n            if(time == 20 ){\n                goRight();\n                time = 0;\n            }    \n        },100)\n    }\n        play();\n        //移入清除计时器\n        all.onmousemove = function(){\n            clearInterval(timer)\n        }\n       //移出启动计时器\n        all.onmouseleave = function(){\n            play();\n        }\n    &lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;</code></pre>\n<p><span style=\"color:#fe2c24;\"><strong>创作不易，觉得有帮助的话请留下一个赞谢谢~</strong></span></p>\n</div>\n</div>"}