{"blogid": "126393917", "writerAge": "码龄3年", "writerBlogNum": "35", "writerCollect": "886", "writerComment": "994", "writerFan": "1065", "writerGrade": "5级", "writerIntegral": "2992", "writerName": "不许代码码上红", "writerProfileAdress": "writer_image\\profile_126393917.jpg", "writerRankTotal": "6064", "writerRankWeekly": "2438", "writerThumb": "988", "writerVisitNum": "39782", "blog_read_count": "224", "blog_time": "于 2022-08-17 22:11:11 发布", "blog_title": "【Python】图片处理", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\c509ae840ab0413ebf827aba17c83ffe.png\"/></p>\n<blockquote>\n<p><strong>博主</strong>：👍<a href=\"https://blog.csdn.net/qq_45801904?spm=1010.2135.3001.5421\">不许代码码上红</a><br/> <strong>每日一诗句</strong>：<br/> 🕊️<br/> 花开花落花翩翩，<br/> 定格美丽于照片。<br/> 照片张张各不同，<br/> 同张照片不同现。<br/> <strong>欢迎</strong>：🐋点赞、收藏、关注、评论。</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><ul><li><a href=\"#PILPyCharm_18\">一、PIL介绍与安装（PyCharm）</a></li><li><ul><li><a href=\"#11PIL_20\">1.1、PIL简介</a></li><li><a href=\"#12PillowPyCharm_32\">1.2、Pillow安装（PyCharm）</a></li></ul>\n</li><li><a href=\"#_40\">二、获取图片属性</a></li><li><ul><li><a href=\"#21_42\">2.1、图片尺寸</a></li><li><a href=\"#22_57\">2.2、图片格式</a></li><li><a href=\"#23_66\">2.3、查看图片是否为只读</a></li><li><a href=\"#24_76\">2.4、查看图片信息</a></li><li><a href=\"#25_87\">2.5、图片模式</a></li></ul>\n</li><li><a href=\"#_98\">三、图片的缩放</a></li><li><ul><li><a href=\"#31_107\">3.1、改变尺寸</a></li><li><a href=\"#32_124\">3.2、局部放大</a></li><li><a href=\"#33_144\">3.3、批量修改</a></li></ul>\n</li><li><a href=\"#_169\">四、图片的分离与合并</a></li><li><ul><li><a href=\"#41split_173\">4.1、split</a></li><li><a href=\"#42merge_189\">4.2、merge</a></li></ul>\n</li><li><a href=\"#_199\">五、颜色处理</a></li><li><ul><li><a href=\"#51getrgb_210\">5.1、getrgb()</a></li><li><a href=\"#52getcolor_239\">5.2、getcolor()</a></li></ul>\n</li><li><a href=\"#_246\">六、添加水印</a></li><li><ul><li><a href=\"#61ImageDraw_248\">6.1、ImageDraw</a></li><li><a href=\"#62ImageFont_277\">6.2、ImageFont</a></li><li><a href=\"#63_307\">6.3、添加图片水印</a></li></ul>\n</li><li><a href=\"#ndarray_327\">七、ndarray数组</a></li><li><ul><li><a href=\"#71ndarray_330\">7.1、ndarray数组创建图像</a></li><li><a href=\"#72ndarray_349\">7.2、图像转化为ndarray数组</a></li></ul>\n</li><li><a href=\"#PillowGIF_370\">八、Pillow生成GIF图</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h2><a id=\"PILPyCharm_18\"></a>一、PIL介绍与安装（PyCharm）</h2>\n<h3><a id=\"11PIL_20\"></a>1.1、PIL简介</h3>\n<p>● <strong>PIL</strong>全称 <mark>Python Imaging Library</mark>，是 Python 平台一个功能非常强大而且简单易用的图像处理库。随着python发展，出现兼容 Python 3 的版本，名字叫 Pillow，我们可以通过安装 Pillow 来使用 PIL。</p>\n<p>● <strong>Pillow 库</strong>提供了非常丰富的功能，主要有以下几点：<br/> 1、Pillow 库能够很轻松的读取和保存各种格式的图片<br/> 2、Pillow 库提供了简洁易用的 API 接口，可以让您轻松地完成许多图像处理任务<br/> 3、Pillow 库能够配合 GUI（图形用户界面） 软件包 Tkinter 一起使用<br/> 4、Pillow 库中的 Image 对象能够与 NumPy ndarray 数组实现相互转换</p>\n<h3><a id=\"12PillowPyCharm_32\"></a>1.2、Pillow安装（PyCharm）</h3>\n<p>● 打开Settings<br/> <img alt=\"在这里插入图片描述\" src=\"image\\355d8307e80445a885813ae1a59a29dd.png\"/><br/> 找到Python Interpreter，点击+号搜索pillow</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\c1fd5b7d6c6e47b2b928a98fab275e55.png\"/><br/> 选择第一个然后点击下面的安装</p>\n<h2><a id=\"_40\"></a>二、获取图片属性</h2>\n<h3><a id=\"21_42\"></a>2.1、图片尺寸</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#打印image对象</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#查看尺寸</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"宽是%s高是%s\"</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#或者通过size查看</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"图像的大小size:\"</span><span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\649b05fdf76944faa8f5eca6237843a4.png\"/></p>\n<h3><a id=\"22_57\"></a>2.2、图片格式</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"图像的格式:\"</span><span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\6f620a03639340e1b7eae1e0e5da8d94.png\"/></p>\n<h3><a id=\"23_66\"></a>2.3、查看图片是否为只读</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"图像是否为只读:\"</span><span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span>readonly<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\9e9f51e23e6247f583735984cd8394e6.png\"/></p>\n<h3><a id=\"24_76\"></a>2.4、查看图片信息</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 包括了每英寸像素点大小和截图软件信息</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"图像信息:\"</span><span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\2ba84722586846e39982927c6aebe047.png\"/></p>\n<h3><a id=\"25_87\"></a>2.5、图片模式</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"图像模式信息:\"</span><span class=\"token punctuation\">,</span>im<span class=\"token punctuation\">.</span>mode<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\185745f63dc34afca301dc0793651e01.png\"/></p>\n<h2><a id=\"_98\"></a>三、图片的缩放</h2>\n<p>● 在图像处理过程中经常会遇到缩小或放大图像的情况，Image 类提供的 resize() 方法能够实现任意缩小和放大图像。</p>\n<p>● resize() 函数的语法格式如下：</p>\n<pre><code class=\"prism language-python\">resize<span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">,</span> resample<span class=\"token operator\">=</span>image<span class=\"token punctuation\">.</span>BICUBIC<span class=\"token punctuation\">,</span> box<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> reducing_gap<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"31_107\"></a>3.1、改变尺寸</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#放大图片</span>\n    image<span class=\"token operator\">=</span>im<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">550</span><span class=\"token punctuation\">,</span><span class=\"token number\">260</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#将新图像保存至桌面</span>\n    image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"放大图像的孙悟空.png\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"查看新图像的尺寸\"</span><span class=\"token punctuation\">,</span>image<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> IOError<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"放大图像失败\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\e2e14c86b74240e791d14d6f486a5ccd.png\"/></p>\n<h3><a id=\"32_124\"></a>3.2、局部放大</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\">#选择放大的局部位置，并选择图片重采样方式</span>\n    <span class=\"token comment\"># box四元组指的是像素坐标 (左,上,右,下)</span>\n    <span class=\"token comment\">#(0,0,120,180)，表示以原图的左上角为原点，选择宽和高分别是(120,180)的图像区域</span>\n    image<span class=\"token operator\">=</span>im<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">550</span><span class=\"token punctuation\">,</span><span class=\"token number\">260</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>resample<span class=\"token operator\">=</span>Image<span class=\"token punctuation\">.</span>LANCZOS<span class=\"token punctuation\">,</span>box<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">120</span><span class=\"token punctuation\">,</span><span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    image<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#保存</span>\n    image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"局部放大图像孙悟空.png\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"查看新图像的尺寸\"</span><span class=\"token punctuation\">,</span>image<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> IOError<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"放大失败\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\1f99b642c56b4abab8e0884cad9d2e82.png\"/></p>\n<h3><a id=\"33_144\"></a>3.3、批量修改</h3>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 批量修改图片尺寸</span>\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\n<span class=\"token comment\">#读取图片目录</span>\nfileName <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span><span class=\"token string\">'./images'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>fileName<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#设定尺寸</span>\nwidth <span class=\"token operator\">=</span> <span class=\"token number\">350</span>\nheight <span class=\"token operator\">=</span> <span class=\"token number\">350</span>\n<span class=\"token comment\"># 如果目录不存在，则创建目录</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span><span class=\"token string\">'./images2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    os<span class=\"token punctuation\">.</span>mkdir<span class=\"token punctuation\">(</span><span class=\"token string\">'./images2'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># 循环读取每一张图片</span>\n<span class=\"token keyword\">for</span> img <span class=\"token keyword\">in</span> fileName<span class=\"token punctuation\">:</span>\n    old_pic <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./images/'</span> <span class=\"token operator\">+</span> img<span class=\"token punctuation\">)</span>\n    new_image <span class=\"token operator\">=</span> old_pic<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>Image<span class=\"token punctuation\">.</span>BILINEAR<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span>new_image<span class=\"token punctuation\">)</span>\n    new_image<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'./images/'</span><span class=\"token operator\">+</span>img<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\48376a7d294e448aa01861654a3463d2.png\"/></p>\n<h2><a id=\"_169\"></a>四、图片的分离与合并</h2>\n<p>● Image 类提供了用于分离图像和合并图像的方法 split() 和 merge() 方法，通常情况下，这两个方法会一起使用。</p>\n<h3><a id=\"41split_173\"></a>4.1、split</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span>  Image\n\nim<span class=\"token operator\">=</span>Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#修改图像大小，以适应图像处理</span>\nimage<span class=\"token operator\">=</span>im<span class=\"token punctuation\">.</span>resize<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">450</span><span class=\"token punctuation\">,</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nimage<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"./images\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#分离颜色通道，产生三个 Image对象</span>\nr<span class=\"token punctuation\">,</span>g<span class=\"token punctuation\">,</span>b <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nr<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ng<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nb<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"42merge_189\"></a>4.2、merge</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'孙悟空.jpg'</span><span class=\"token punctuation\">)</span>\nr<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> b <span class=\"token operator\">=</span> im<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nom <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span><span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">,</span> g<span class=\"token punctuation\">,</span> r<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nom<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'孙悟空BGR.jpg'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"_199\"></a>五、颜色处理</h2>\n<p>● <strong>Pillow</strong> 提供了颜色处理模块 ImageColor，该模块支持不同格式的颜色。</p>\n<p>● <strong>ImageColor</strong> 支持多种颜色模式的的命名（即使用固定的格式对颜值进行表示），比如我们熟知的 RGB 色彩模式，除此之外，还有 HSL （色调-饱和度-明度）、HSB （又称 HSV，色调-饱和度-亮度）色彩模式。<br/> ● 下面对 HSL 做简单介绍：<br/> <strong>H</strong>：即 Hue 色调，取值范围 0 -360，其中 0 表示“red”，120 表示 “green”，240 表示“blue”；<br/> <strong>S</strong>：即 Saturation 饱和度，代表色彩的纯度，取值 0~100%，其中 0 代表灰色（gry），100% 表示色光最饱和；<br/> <strong>L</strong>：即 Lightness 明度，取值为 0~100%，其中 0 表示“black”黑色，50% 表示正常颜色，100% 则表示白色。</p>\n<p><strong>ImageColor 模块比较简单，只提供了两个常用方法，分别是 getrgb() 和 getcolor() 函数。</strong></p>\n<h3><a id=\"51getrgb_210\"></a>5.1、getrgb()</h3>\n<p>顾名思义，该函数用来得到颜色的 RGB 值，语法格式如下：</p>\n<pre><code class=\"prism language-python\">PIL<span class=\"token punctuation\">.</span>ImageColor<span class=\"token punctuation\">.</span>getrgb<span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span>ImageColor\n<span class=\"token comment\"># getrgb()方法</span>\ncolor1<span class=\"token operator\">=</span>ImageColor<span class=\"token punctuation\">.</span>getrgb<span class=\"token punctuation\">(</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>color1<span class=\"token punctuation\">)</span>\ncolor2<span class=\"token operator\">=</span>ImageColor<span class=\"token punctuation\">.</span>getrgb<span class=\"token punctuation\">(</span><span class=\"token string\">'#DCDCDC'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>color2<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#使用HSL模式红色</span>\ncolor3<span class=\"token operator\">=</span>ImageColor<span class=\"token punctuation\">.</span>getrgb<span class=\"token punctuation\">(</span><span class=\"token string\">'HSL(0,100%,50%)'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>color3<span class=\"token punctuation\">)</span>\n</code></pre>\n<pre><code class=\"prism language-python\">im<span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">\"RGB\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ImageColor<span class=\"token punctuation\">.</span>getrgb<span class=\"token punctuation\">(</span><span class=\"token string\">\"#EEB4B4\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nim<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"新建图片.jpg\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\a886484931c7464c9569a7c7dc7f7f53.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\bd6c5e7740f64665a3148598f4fcd7fb.png\"/></p>\n<h3><a id=\"52getcolor_239\"></a>5.2、getcolor()</h3>\n<p>● 该方法与 getrgb() 类似，同样用来获取颜色值，不过它多了一个mode参数，因此该函数可以获取指定色彩模式的颜色值。语法格式如下：</p>\n<pre><code class=\"prism language-python\">PIL<span class=\"token punctuation\">.</span>ImageColor<span class=\"token punctuation\">.</span>getcolor<span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">,</span> mode<span class=\"token punctuation\">)</span>\n</code></pre>\n<h2><a id=\"_246\"></a>六、添加水印</h2>\n<h3><a id=\"61ImageDraw_248\"></a>6.1、ImageDraw</h3>\n<p>● PIL.ImageDraw 模块提供了一系列的绘图方法，通过该模块可以创建一个新的图形，或者在现有的图像上再绘制一个图形，从而起到对原图注释和修饰的作用。<br/> ● 格式：</p>\n<pre><code class=\"prism language-python\">draw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">)</span>\ndraw<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span>xy<span class=\"token punctuation\">,</span> fill<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> outline<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>● 说明：<br/> 1、xy：元组参数值，以图像的左上角为坐标原点，表示矩形图的位置、图形大小的坐标序列，形如 ((x1,y1,x2,y2))；<br/> 2、fill：矩形图的背景填充色；<br/> 3、outline：矩形图的边框线条颜色。</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span>ImageDraw\n<span class=\"token comment\">#创建 Image 对象，当做背景图</span>\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>new<span class=\"token punctuation\">(</span><span class=\"token string\">'RGB'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#创建 ImageDraw 对象</span>\ndraw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#以左上角为原点，绘制矩形。元组坐标序列表示矩形的位置、大小；fill设置填充色为红色，outline设置边框线为黑色</span>\ndraw<span class=\"token punctuation\">.</span>rectangle<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">150</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>fill<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>outline<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#查看原图片</span>\nim<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#保存图片</span>\nim<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"添加矩形图.png\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\d90e9bd4834f4519821601f9c0842d02.png\"/></p>\n<h3><a id=\"62ImageFont_277\"></a>6.2、ImageFont</h3>\n<p>● PIL.ImagreFont 模块通过加载不同格式的字体文件，从而在图像上绘制出不同类型的文字，比如 TrueType 和 OpenType 类型的字体。<br/> ● 格式：</p>\n<pre><code class=\"prism language-python\">font <span class=\"token operator\">=</span> ImageFont<span class=\"token punctuation\">.</span>truetype<span class=\"token punctuation\">(</span>font<span class=\"token operator\">=</span><span class=\"token string\">'字体文件路径'</span><span class=\"token punctuation\">,</span> size<span class=\"token operator\">=</span>字体大小<span class=\"token punctuation\">)</span>\nd<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text\"</span><span class=\"token punctuation\">,</span> font<span class=\"token punctuation\">,</span> fill<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>1、(x,y)：图像左上角为坐标原点，(x,y) 表示添加文本的起始坐标位置；<br/> 2、text：字符串格式，要添加的文本内容；<br/> 3、font：ImageFont 对象；<br/> 4、fill：文本填充颜色。</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image<span class=\"token punctuation\">,</span>ImageFont<span class=\"token punctuation\">,</span>ImageDraw\n<span class=\"token comment\">#打开图片，返回 Image对象</span>\nim <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#创建画布对象</span>\ndraw <span class=\"token operator\">=</span> ImageDraw<span class=\"token punctuation\">.</span>Draw<span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#加载计算机本地字体文件</span>\nfont<span class=\"token operator\">=</span>ImageFont<span class=\"token punctuation\">.</span>truetype<span class=\"token punctuation\">(</span><span class=\"token string\">'C:/Windows/Fonts/msyh.ttc'</span><span class=\"token punctuation\">,</span>size<span class=\"token operator\">=</span><span class=\"token number\">36</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#在原图像上添加文本</span>\ndraw<span class=\"token punctuation\">.</span>text<span class=\"token punctuation\">(</span>xy<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>text<span class=\"token operator\">=</span><span class=\"token string\">'不许代码码上红'</span><span class=\"token punctuation\">,</span>fill<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>font<span class=\"token operator\">=</span>font<span class=\"token punctuation\">)</span>\nim<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nim<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空222.jpg\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\22d92a3db56243c7a6f60d0799d1e337.png\"/></p>\n<h3><a id=\"63_307\"></a>6.3、添加图片水印</h3>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 打开logo文件</span>\n<span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\n\nlog_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'example3.jpg'</span><span class=\"token punctuation\">)</span>\nlog_image_w<span class=\"token punctuation\">,</span> log_image_h <span class=\"token operator\">=</span> log_image<span class=\"token punctuation\">.</span>size\n\n<span class=\"token comment\"># 打开目标文件</span>\nret_image <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'孙悟空.jpg'</span><span class=\"token punctuation\">)</span>\nret_image_w<span class=\"token punctuation\">,</span> ret_image_h <span class=\"token operator\">=</span> ret_image<span class=\"token punctuation\">.</span>size\n\n<span class=\"token comment\"># 粘贴：</span>\nimage_copy <span class=\"token operator\">=</span> ret_image<span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nimage_copy<span class=\"token punctuation\">.</span>paste<span class=\"token punctuation\">(</span>log_image<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ret_image_w<span class=\"token operator\">-</span>log_image_w<span class=\"token punctuation\">,</span> ret_image_h<span class=\"token operator\">-</span>log_image_h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nimage_copy<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">'孙悟空2log.jpg'</span><span class=\"token punctuation\">)</span>\n\n</code></pre>\n<h2><a id=\"ndarray_327\"></a>七、ndarray数组</h2>\n<p>● ndarray 是 NumPy 中的数组类型，也称为 ndarray 数组，该数组可以与 Pillow 的 PIL.Image 对象实现相互转化。</p>\n<h3><a id=\"71ndarray_330\"></a>7.1、ndarray数组创建图像</h3>\n<pre><code class=\"prism language-python\"><span class=\"token comment\">#导入相关的包</span>\n<span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\n<span class=\"token comment\">#使用numpy之前需要提前安装</span>\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token comment\">#创建 300*400的图像，3个颜色通道</span>\narray <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#rgb色彩模式</span>\narray<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\narray<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\nimg <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>fromarray<span class=\"token punctuation\">(</span>array<span class=\"token punctuation\">)</span>\nimg<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nimg<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"数组生成图像.png\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\4167f0934a304b3b9e9164b903a8da9d.png\"/></p>\n<h3><a id=\"72ndarray_349\"></a>7.2、图像转化为ndarray数组</h3>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\nimg <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\nimg<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#Image图像转换为ndarray数组</span>\nimg_2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>img_2<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#ndarray转换为Image图像</span>\narr_img <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span>fromarray<span class=\"token punctuation\">(</span>img_2<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#显示图片</span>\narr_img<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#保存图片</span>\narr_img<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token string\">\"arr孙悟空.jpg\"</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\0b23dabd05a34ada9ac0ee100beeb17d.png\"/></p>\n<h2><a id=\"PillowGIF_370\"></a>八、Pillow生成GIF图</h2>\n<p>● GIF（Graphics Interchange Format，图形交换格式）是一种“位图”图像格式，它以.gif作为图像的扩展名。<br/> ● GIF 图片非常适合在互联网中使用，这是因为它采用了图像预压缩技术，该技术的应用，在一定程度上减少了图像传播、加载所消耗的时间。<br/> ● 与其他格式的图片相比，GIF 还有一项非常重要的应用，那就是生成动态图。我们知道，Pillow 能够处理多种图像格式，包括 GIF 格式，它可以将静态格式图片（png、jpg）合成为 GIF 动态图。</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> random\n<span class=\"token keyword\">from</span> PIL <span class=\"token keyword\">import</span> Image\n<span class=\"token keyword\">def</span> <span class=\"token function\">png_to_gif</span><span class=\"token punctuation\">(</span>png_path<span class=\"token punctuation\">,</span>gif_name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"png合成gif图像\"\"\"</span>\n    frames <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token comment\"># 返回文件夹内的所有静态图的列表</span>\n    png_files <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>png_path<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 打印返回的列表</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>png_files<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 读取文件内的静态图</span>\n    <span class=\"token keyword\">for</span> frame_id <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>png_files<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        frame <span class=\"token operator\">=</span> Image<span class=\"token punctuation\">.</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>png_path<span class=\"token punctuation\">,</span><span class=\"token string\">'image%d.png'</span><span class=\"token operator\">%</span>frame_id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        frames<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># 以第一张图片作为开始，将后续5张图片合并成 gif 动态图</span>\n    <span class=\"token comment\"># 参数说明：</span>\n    <span class=\"token comment\"># save_all 保存图像;transparency 设置透明背景色;duration 单位毫秒，动画持续时间，</span>\n    <span class=\"token comment\"># loop=0 无限循环;disposal=2 恢复原背景颜色。参数详细说明，请参阅官方文档，网址见文章末尾处。</span>\n    frames<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span>gif_name<span class=\"token punctuation\">,</span>save_all<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>append_images<span class=\"token operator\">=</span>frames<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>transparency<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>duration<span class=\"token operator\">=</span><span class=\"token number\">2000</span><span class=\"token punctuation\">,</span>loop<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>disposal<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#调用函数，传入对应的参数</span>\npng_to_gif<span class=\"token punctuation\">(</span><span class=\"token string\">\"./image\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">'t.gif'</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>👍好了，今天的分享到这里，希望大家一起进步…</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}