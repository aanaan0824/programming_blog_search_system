{"blogid": "123967875", "writerAge": "ç é¾„6å¹´", "writerBlogNum": "33", "writerCollect": "3877", "writerComment": "6653", "writerFan": "10628", "writerGrade": "10çº§", "writerIntegral": "142757", "writerName": "ä¸æ­£ç»çš„kimolå›", "writerProfileAdress": "writer_image\\profile_123967875.jpg", "writerRankTotal": "2192", "writerRankWeekly": "7086", "writerThumb": "7810", "writerVisitNum": "603841", "blog_read_count": "16368", "blog_time": "äºÂ 2022-04-05 15:30:16Â å‘å¸ƒ", "blog_title": "ã€æ‘¸é±¼ç¥å™¨ã€‘åŸºäºpythonçš„BOSSè¯†åˆ«ç³»ç»Ÿ", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>ã€æ‘¸é±¼ç¥å™¨ã€‘åŸºäºpythonçš„BOSSè¯†åˆ«ç³»ç»Ÿ</h3>\n<ul><li><a href=\"#_2\">å‰è¨€</a></li><li><a href=\"#_12\">ä¸€ã€æ•´ä½“è®¾è®¡</a></li><li><a href=\"#_18\">äºŒã€è°ƒç”¨æ‘„åƒå¤´</a></li><li><a href=\"#_43\">ä¸‰ã€äººè„¸è¯†åˆ«</a></li><li><ul><li><a href=\"#1__56\">1. æ„å»ºç™½åå•åº“</a></li><li><a href=\"#2__176\">2. äººè„¸åŒ¹é…</a></li></ul>\n</li><li><a href=\"#_214\">å››ã€åˆ‡æ¢å±å¹•</a></li><li><a href=\"#_228\">äº”ã€å®Œæ•´ä»£ç </a></li><li><a href=\"#_351\">å†™åœ¨æœ€å</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_2\"></a>å‰è¨€</h1>\n<blockquote>\n<p>Tip:æœ¬æ–‡ä»…ä¾›æŠ€æœ¯å­¦ä¹ å’Œå‚è€ƒï¼Œåˆ‡å‹¿æ»¥ç”¨ã€‚ççˆ±å·¥ä½œï¼Œä»æˆ‘åšèµ·ï¼Œæ»´æ»´~</p>\n</blockquote>\n<p>è¯•æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä¸€å¤©ï¼Œé£å’Œæ—¥ä¸½ï¼Œæ³¢æ¾œä¸æƒŠã€‚ä½ æ­£åœ¨æ„‰å¿«åœ°æ‘¸ç€é±¼ï¼Œæ˜¯å¦‚æ­¤çš„æƒ¬æ„ï¼Œå¦‚æ­¤çš„å·´é€‚ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/3a17b83bbade4a8d9650779249dcc3d8.webp?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5LiN5q2j57uP55qEa2ltb2zlkJs=,size_14,color_FFFFFF,t_70,g_se,x_16#pic_center\"/><br/> å°±åœ¨è¿™æ—¶ï¼Œä½ çš„BOSSçªç„¶å‡ºç°ï¼Œæ‰“æ–­äº†è¿™ç¾å¥½çš„ç¬é—´ï¼Œè¿æ¥ä½ çš„å°†æ˜¯æ— å°½çš„â€¦<br/> ç»è¿‡è¿™ä»¶äº‹ä¹‹åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼š<strong>â€æœ‰æ²¡æœ‰ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å¸®æˆ‘è¿…é€Ÿå‘ç°BOSSçš„åˆ°æ¥ï¼Œå¹¶è¿…é€Ÿåˆ‡æ¢å±å¹•å‘¢ï¼Ÿâ€œ</strong></p>\n<p>äºæ˜¯ï¼Œå®ƒæ¥äº†ã€‚<strong>B</strong>oss <strong>R</strong>ecognition <strong>S</strong>ystem è¿ˆç€è½»å¿«çš„æ­¥ä¼æ¥äº†ã€‚å„ä½å°ä¼™ä¼´ï¼Œè¯·ç³»å¥½å®‰å…¨å¸¦ï¼Œå’‹ä»¬å‘è½¦äº†ğŸš—â€¦ï¼ˆæ»´ï¼Œå­¦ç”Ÿå¡ï¼‰</p>\n<h1><a id=\"_12\"></a>ä¸€ã€æ•´ä½“è®¾è®¡</h1>\n<p>æ€è·¯è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°ï¼Œç®€å•çš„ã€‚è°ƒç”¨æ‘„åƒå¤´å®æ—¶é‡‡é›†ç”»é¢ï¼Œé€šè¿‡äººè„¸è¯†åˆ«ç®—æ³•å¯¹äººåƒè¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœæ˜¯BOSSåˆ™å°†å±å¹•åˆ‡æ¢åˆ°æŒ‡å®šç•Œé¢ã€‚ç¤ºæ„å›¾å¦‚ä¸‹ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d1f0befea63d4e38b65e0f60cf8a8094.png\"/></p>\n<p>ä¸‹é¢å°†å¯¹æ¶‰åŠåˆ°çš„æ¯ä¸€éƒ¨åˆ†è¿›è¡Œä»‹ç»ã€‚</p>\n<h1><a id=\"_18\"></a>äºŒã€è°ƒç”¨æ‘„åƒå¤´</h1>\n<p>è¿™é‡Œå¯ä»¥ç›´æ¥ç”¨pythonçš„<strong>cv2</strong>åº“å³å¯ï¼Œåˆ©ç”¨pipå®‰è£…ï¼š</p>\n<pre><code>pip install opencv-python\n</code></pre>\n<p>å…·ä½“è°ƒç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>import cv2\n\nif __name__ == '__main__':\n    # å¼€å¯æ‘„åƒå¤´\n    video_capture = cv2.VideoCapture(0, cv2.CAP_DSHOW)\n    # å®æ—¶æ•è·å›¾åƒ\n    while True:\n        _, frame = video_capture.read()      # è¯»å–æ¯ä¸€å¸§å›¾åƒ\n        cv2.imshow('capture', frame)         # å±•ç¤ºç”»é¢\n        if cv2.waitKey(1) &amp; 0xFF == ord('q'):# æŒ‰Qé€€å‡º\n            break\n    # å…³é—­æ‘„åƒå¤´\n    video_capture.release()\n</code></pre>\n<p>è¿™æ ·ä¾¿èƒ½è·å–åˆ°è§†é¢‘çš„æ¯ä¸€ç¥¯ç”»é¢<strong>frame</strong>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦å¯¹frameè¿›è¡Œå¤„ç†å’Œè¯†åˆ«å°±å¯ä»¥äº†ã€‚</p>\n<h1><a id=\"_43\"></a>ä¸‰ã€äººè„¸è¯†åˆ«</h1>\n<p>ç›®å‰äººè„¸è¯†åˆ«çš„å¼€æºç®—æ³•å’Œåœ¨çº¿APIæ¥å£æœ‰å¾ˆå¤šï¼Œéƒ½èƒ½å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåœ°å®ç°äººè„¸è¯†åˆ«æ•ˆæœã€‚ä½†æ˜¯è€ƒè™‘åˆ°BOSSè¯†åˆ«æ˜¯åˆ†ç§’å¿…äº‰çš„äº‹å„¿ğŸ™ˆï¼Œç½‘ç»œå»¶è¿Ÿå¯èƒ½ä¼šè®©æˆ‘ä»¬é”™è¿‡æœ€ä½³â€œæˆ˜æœºâ€ã€‚äºæ˜¯ï¼Œæˆ‘å†³å®šç”¨æœ¬åœ°çš„äººè„¸è¯†åˆ«ç®—æ³•ã€‚</p>\n<p>æœ¬æ¬¡é‡‡ç”¨çš„æ˜¯pythonä¸­çš„å¼€æºäººè„¸è¯†åˆ«é¡¹ç›®ï¼š<a href=\"https://zhuanlan.zhihu.com/p/45827914\">face_recognition</a>ï¼Œåªéœ€è¦ç®€å•çš„å‡ è¡Œä»£ç ä¾¿å¯å®ç°äººè„¸è¯†åˆ«çš„æ•ˆæœã€‚å…¶å®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>pip install face_recognition\n</code></pre>\n<p><code>æ³¨æ„ï¼šä½¿ç”¨face_recognitionå‰éœ€è¦å®‰å¥½dlibåº“ã€‚</code></p>\n<p>BOSSè¯†åˆ«æœ‰ä¸¤ä¸ªæ€è·¯ï¼šä¸€ä¸ªåŸºäºç™½åå•ï¼Œå¦ä¸€ä¸ªåˆ™åŸºäºé»‘åå•ã€‚ç™½åå•æŒ‡çš„æ˜¯é™¤äº†ç™½åå•é‡Œçš„äººåƒä¹‹å¤–ï¼Œéƒ½ä¼šè§¦å‘åˆ‡å±ï¼Œå…¶å¥½å¤„æ˜¯ä¸éœ€è¦BOSSçš„ç…§ç‰‡ç”¨äºå­¦ä¹ ï¼Œç¼ºç‚¹æ˜¯å®¹æ˜“é€ æˆè¯¯åˆ¤ï¼›è€Œé»‘åå•çš„å¥½å¤„æ˜¯å¯ä»¥â€œç²¾ç¡®æ‰“å‡»â€ï¼Œä½†æ˜¯éœ€è¦æœé›†é»‘åå•ä¸­å¯¹è±¡çš„ç…§ç‰‡ã€‚<br/> æ¯•ç«Ÿå·æ‹BOSSğŸ‘´çš„ç…§ç‰‡æˆæœ¬å¤ªé«˜äº†ï¼Œè€å®å·´äº¤çš„æˆ‘è¿˜æ˜¯å†³å®šé‡‡ç”¨<strong>ç™½åå•</strong>çš„æ–¹å¼ã€‚</p>\n<h2><a id=\"1__56\"></a>1. æ„å»ºç™½åå•åº“</h2>\n<p>è¯»å–æœ¬åœ°å›¾åƒåº“ï¼Œè®¡ç®—æ¯ä¸ªäººçš„äººè„¸ç‰¹å¾ç¼–ç ï¼Œæ„å»ºå‡ºäººè„¸ç™½åå•åº“ï¼š</p>\n<pre><code># è¯»å–æœ¬åœ°è‚–åƒåº“ï¼Œå»ºç«‹è¯†åˆ«ç™½åå•\ndef load_portrait(path=path):\n    '''\n    pathï¼šè‚–åƒåº“è·¯å¾„\n    '''\n    # æ¶ˆæ¯æç¤º\n    print('&gt;&gt;&gt;æœ¬åœ°å›¾åƒåº“è¯»å–ä¸­ï¼Œè¯·ç¨å',end='')\n    for i in range(5):\n        print('.', end='')\n        time.sleep(0.3)\n    # å»ºç«‹ç™½åå•\n    white_map = {}\n    for name in os.listdir(path):\n        filepath = '%s/%s'%(path, name)\n        avg_coding = np.zeros(128)\n        n = 0\n        for file in os.listdir(filepath):\n            if '.jpg' in file:\n                image = face_recognition.load_image_file('%s/%s'%(filepath, file))\n                encoding = face_recognition.face_encodings(image)[0]\n                avg_coding += encoding\n                n += 1\n        avg_coding /= n\n        white_map[name] = avg_coding\n        print('&gt;&gt;\"%s\"äººè„¸æ•°æ®åŠ è½½å®Œæˆï¼'%name)\n    return white_map\n</code></pre>\n<p>è¿™é‡Œçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\78bfc72f1cb345d3acc551c8e2bb5221.png\"/><br/> dataä¸ºäººåƒæ•°æ®å­˜å‚¨çš„æ ¹ç›®å½•ï¼Œæ¯ä¸ªäººçš„ç…§ç‰‡å•ç‹¬å­˜äºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä»¥001ã€002çš„é¡ºåºè¿›è¡Œç¼–å·ã€‚æˆ‘ä»¬å¯ä»¥æ‰‹å·¥æœé›†ç…§ç‰‡å¹¶æ·»åŠ è¿›å»ï¼Œå½“ç„¶ä¹Ÿèƒ½é€šè¿‡ä»£ç è‡ªåŠ¨é‡‡é›†ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>import os\nimport cv2\nimport time\nimport threading\n\n# å…¨å±€å˜é‡\npath = './data' # é‡‡é›†çš„å›¾ç‰‡å­˜å‚¨ä½ç½®\nchoice = '-1'   # é€‰æ‹©ï¼Œç”¨äºåˆ¤æ–­æ“ä½œï¼Œ-1è¡¨ç¤ºæš‚æ— é€‰æ‹©\n\n# å®šä¹‰æ•æ‰å‡½æ•°\ndef capture(name):\n    '''\n    æ•æ‰äººåƒå‡½æ•°\n    '''\n    # å®šäºå›¾ç‰‡è·¯å¾„åŠæ–‡ä»¶å\n    global path, choice\n    jpgpath = '%s/%s'%(path, name)\n    if not os.path.exists(jpgpath):\n        os.mkdir(jpgpath)\n        i = 1 # å›¾ç‰‡æ ‡å·\n    else:\n        try:\n            i = int(os.listdir(jpgpath)[0][-7:-4])+1\n        except:\n            i = 1\n    # å¼€å¯æ‘„åƒå¤´\n    video_capture = cv2.VideoCapture(0, cv2.CAP_DSHOW)\n    # å¾ªç¯æ•æ‰å¤´åƒ\n    while True:\n        ret, frame = video_capture.read()\n        cv2.imshow('monitor', frame)\n        if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n            break\n        if choice == '0':\n            choice = '-1'\n            filename = '%s-%s.jpg'%(name, str(i).zfill(3))\n            cv2.imwrite('%s/%s'%(jpgpath, filename), frame)\n            i += 1\n            print('\"%s\"ä¿å­˜æˆåŠŸï¼'%filename)\n        elif choice == '1':\n            choice = '-2'  # ç”¨äºæ ‡è®°é€€å›ä¸Šä¸€å±‚\n            break\n        elif choice == '-1':\n            continue\n        else:\n            choice = '-1'\n            print('è¾“å…¥é”™è¯¯...')\n    # å…³é—­æ‘„åƒå¤´\n    video_capture.release()      \n\nif __name__ == '__main__':    \n    # åˆ›å»ºç›®å½•\n    if not os.path.exists(path):\n        os.mkdir(path)\n    # æ˜¾ç¤ºæ¬¢è¿ç•Œé¢å’Œè¯´æ˜\n    os.system('cls')\n    welcome = '''\n     _____           _             _ _      _____      _ _           _   \n    |  __ \\         | |           (_) |    / ____|    | | |         | |  \n    | |__) |__  _ __| |_ _ __ __ _ _| |_  | |     ___ | | | ___  ___| |_ \n    |  ___/ _ \\| '__| __| '__/ _` | | __| | |    / _ \\| | |/ _ \\/ __| __|\n    | |  | (_) | |  | |_| | | (_| | | |_  | |___| (_) | | |  __/ (__| |_ \n    |_|   \\___/|_|   \\__|_|  \\__,_|_|\\__|  \\_____\\___/|_|_|\\___|\\___|\\__| v0.1\n                                                                                                                                        \n    '''\n    print(welcome)\n    # å¾ªç¯æ•æ‰å¤´åƒ\n    while True:\n        choice_1 = input('&gt;&gt;é€‰æ‹©ï¼ˆ0-&gt;è¾“å…¥å§“åï¼Œ1-&gt;é€€å‡ºï¼‰ï¼š')\n        if choice_1 == '0':\n            name = input('&gt;&gt;å§“åï¼š')\n            print('æ‘„åƒå¤´å¯åŠ¨ä¸­...')\n            time.sleep(1)\n            threading.Thread(target=capture, args=(name,)).start()\n            while True:\n                choice = input('&gt;&gt;é€‰æ‹©ï¼ˆ0-&gt;ä¿å­˜ï¼Œ1-&gt;é€€å‡ºï¼‰ï¼š')\n                time.sleep(0.1) # ç­‰å¾…å­çº¿ç¨‹æ‰§è¡Œï¼Œé˜²æ­¢é€»è¾‘æ··ä¹±\n                if choice == '-2':\n                    choice = '-1'\n                    break\n        elif choice_1 == '1':\n            break\n        else:\n            print('è¾“å…¥é”™è¯¯')\n</code></pre>\n<h2><a id=\"2__176\"></a>2. äººè„¸åŒ¹é…</h2>\n<p>åœ¨å¾—åˆ°äººåƒç™½åå•ä¹‹åï¼Œéœ€è¦åšçš„ä¾¿æ˜¯å°†è§†é¢‘ä¸­å‡ºç°çš„äººè„¸ä¸ç™½åå•è¿›è¡ŒåŒ¹é…ï¼Œè¿›è€Œåˆ¤æ–­å…¶èº«ä»½ã€‚è¿ç”¨åˆ°çš„å…³é”®å‡½æ•°æ˜¯<strong>compare_faces</strong>ï¼Œå…¶ç”¨æ³•å¦‚ä¸‹ï¼š</p>\n<pre><code>matches = face_recognition.compare_faces(known_face_encodings, face_encoding)\n</code></pre>\n<p>å…¶ä¸­<strong>known_face_encodings</strong>ä¸ºç™½åå•ä¸­çš„äººè„¸ç‰¹å¾ç¼–ç ï¼Œ<strong>face_encoding</strong>ä¸ºè§†é¢‘ä¸­å‡ºç°çš„äººè„¸ç‰¹å¾ç¼–ç ï¼Œä¸ä¹‹ä¸€ä¸€è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸å»åˆè¿”å›å€¼åˆ™ä¸º<strong>True</strong>ã€‚<br/> æ®æ­¤ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªäººè„¸åŒ¹é…çš„å‡½æ•°ï¼š</p>\n<pre><code>def recognize(frame, white_map):\n    '''\n    frame: æ•è·çš„æ‘„åƒå¤´å¸§\n    white_map: äººåƒåº“ç™½åå•\n    '''\n    # æ ¹æ®ç™½åå•ï¼Œæå–è‚–åƒç¼–ç \n    known_face_encodings = list(white_map.values())\n    known_face_names = list(white_map.keys())\n    # å›¾åƒé¢„å¤„ç†ï¼ˆåŒ…æ‹¬å¤§å°è°ƒæ•´ã€æ ¼å¼è½¬æ¢ï¼‰\n    frame = cv2.resize(frame, (0, 0), fx=0.25, fy=0.25) # è°ƒæ•´å›¾åƒå¤§å°ï¼Œä»¥å‡å°è®¡ç®—éœ€æ±‚\n    frame = frame[:, :, ::-1] # BGR-&gt;RGB\n    # è®¡ç®—äººè„¸çš„ç¼–ç å€¼\n    face_locations = face_recognition.face_locations(frame)\n    face_encodings = face_recognition.face_encodings(frame, face_locations)\n    # è®¡ç®—çš„ç¼–ç ä¸ç™½åå•æ¯”è¾ƒï¼Œè·å¾—å…¶åŒ¹é…çš„åå­—\n    face_names = []\n    for face_encoding in face_encodings:\n        # é»˜è®¤ä¸º\"æœªçŸ¥\"\n        name = 'æœªçŸ¥'\n        # åŒ¹é…\n        matches = face_recognition.compare_faces(known_face_encodings, face_encoding)\n        if True in matches:\n            index = matches.index(True)\n            name = known_face_names[index]\n        face_names.append(name)\n    return face_names, face_locations\n</code></pre>\n<p><font color=\"red\" size=\"2\">æ³¨ï¼š</font><font size=\"2\">â‘ è¿™é‡Œå¯¹å›¾åƒè¿›è¡Œäº†å‹ç¼©ï¼Œç›®çš„æ˜¯æé«˜è®¡ç®—æ•ˆç‡ï¼Œå¯¹å…¶å‡†ç¡®ç‡çš„å½±å“å¾ˆå°ã€‚â‘¡è¿™é‡Œç”¨äº†forå¾ªç¯ï¼Œæ˜¯å› ä¸ºä¸€å¼ å›¾åƒä¸­å‡ºç°çš„äººè„¸å¯èƒ½ä¸æ­¢ä¸€ä¸ªã€‚</font></p>\n<h1><a id=\"_214\"></a>å››ã€åˆ‡æ¢å±å¹•</h1>\n<p>åˆ©ç”¨<strong>PyQt5</strong>åº“æ‰“å¼€ä¸€ä¸ªå…¨å±çš„çª—å£ï¼ŒæŠŠèƒŒæ™¯å›¾æ›¿æ¢ä¸º<font color=\"blue\">æ­£åœ¨åŠªåŠ›å·¥ä½œçš„ç”»é¢</font>ï¼Œä¾¿èƒ½è½»æ¾åœ°å®ç°ç’å¤©è¿‡æµ·ï¼Œå¼€å¿ƒæ‘¸é±¼äº†~</p>\n<pre><code>def lock_screen(image_path='lock.jpg'):\n    app = QApplication(sys.argv)\n    pixmap = QPixmap(image_path)\n    screen = QLabel()\n    screen.setPixmap(pixmap)\n    screen.showFullScreen()\n    sys.exit(app.exec_())\n</code></pre>\n<p>åˆ‡æ¢å±å¹•ä»…ä»…æ˜¯ä¸€ä¸ªå‚è€ƒï¼Œå…¶å®è¿™ä¸€æ­¥ä½ å¯ä»¥å°è¯•æ›´å¤šçš„ç©æ³•ï¼Œæ¯”å¦‚æ–‡å­—æç¤ºæˆ–è€…è¯­éŸ³æç¤ºï¼Œåˆæˆ–è€…ç›´æ¥è°ƒç”¨å¿«æ·é”®åˆ‡æ¢åˆ°æŒ‡å®šçª—å£ã€‚</p>\n<h1><a id=\"_228\"></a>äº”ã€å®Œæ•´ä»£ç </h1>\n<p>ç»“åˆä¸Šé¢å‡ éƒ¨åˆ†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>\n<pre><code>import os\nimport cv2\nimport sys\nimport time\nimport numpy as np\nimport face_recognition\nfrom PyQt5.QtGui import QPixmap\nfrom PyQt5.QtWidgets import QApplication,QLabel\n\n# å…¨å±€å˜é‡\npath = './data'  # äººåƒå­˜å‚¨è·¯å¾„\nshowflag = True  # æ˜¯å¦å®æ—¶æ˜¾ç¤ºå›¾åƒ\n\n# åˆ©ç”¨PyQt5æ‰“å¼€å…¨å±çª—å£ï¼Œå®ç°çª—å£æ›¿æ¢æ•ˆæœ\ndef lock_screen(image_path='lock.jpg'):\n    app = QApplication(sys.argv)\n    pixmap = QPixmap(image_path)\n    screen = QLabel()\n    screen.setPixmap(pixmap)\n    screen.showFullScreen()\n    sys.exit(app.exec_())\n\n# è¯»å–æœ¬åœ°è‚–åƒåº“ï¼Œå»ºç«‹è¯†åˆ«ç™½åå•\ndef load_portrait(path=path):\n    '''\n    pathï¼šè‚–åƒåº“è·¯å¾„\n    '''\n    # æ¶ˆæ¯æç¤º\n    print('&gt;&gt;&gt;æœ¬åœ°å›¾åƒåº“è¯»å–ä¸­ï¼Œè¯·ç¨å',end='')\n    for i in range(5):\n        print('.', end='')\n        time.sleep(0.3)\n    # å»ºç«‹ç™½åå•\n    white_map = {}\n    for name in os.listdir(path):\n        filepath = '%s/%s'%(path, name)\n        avg_coding = np.zeros(128)\n        n = 0\n        for file in os.listdir(filepath):\n            if '.jpg' in file:\n                image = face_recognition.load_image_file('%s/%s'%(filepath, file))\n                encoding = face_recognition.face_encodings(image)[0]\n                avg_coding += encoding\n                n += 1\n        avg_coding /= n\n        white_map[name] = avg_coding\n        print('&gt;&gt;\"%s\"äººè„¸æ•°æ®åŠ è½½å®Œæˆï¼'%name)\n    return white_map\n\n# äººè„¸è¯†åˆ«ï¼Œåˆ¤æ–­å½“å‰ç”»é¢çš„äººåƒæ˜¯å¦ä¸ç™½åå•ä¸­çš„åŒ¹é…\ndef recognize(frame, white_map):\n    '''\n    frame: æ•è·çš„æ‘„åƒå¤´å¸§\n    white_map: äººåƒåº“ç™½åå•\n    '''\n    # æ ¹æ®ç™½åå•ï¼Œæå–è‚–åƒç¼–ç \n    known_face_encodings = list(white_map.values())\n    known_face_names = list(white_map.keys())\n    # å›¾åƒé¢„å¤„ç†ï¼ˆåŒ…æ‹¬å¤§å°è°ƒæ•´ã€æ ¼å¼è½¬æ¢ï¼‰\n    frame = cv2.resize(frame, (0, 0), fx=0.25, fy=0.25) # è°ƒæ•´å›¾åƒå¤§å°ï¼Œä»¥å‡å°è®¡ç®—éœ€æ±‚\n    frame = frame[:, :, ::-1] # BGR-&gt;RGB\n    # è®¡ç®—äººè„¸çš„ç¼–ç å€¼\n    face_locations = face_recognition.face_locations(frame)\n    face_encodings = face_recognition.face_encodings(frame, face_locations)\n    # è®¡ç®—çš„ç¼–ç ä¸ç™½åå•æ¯”è¾ƒï¼Œè·å¾—å…¶åŒ¹é…çš„åå­—\n    face_names = []\n    for face_encoding in face_encodings:\n        # é»˜è®¤ä¸º\"æœªçŸ¥\"\n        name = 'æœªçŸ¥'\n        # åŒ¹é…\n        matches = face_recognition.compare_faces(known_face_encodings, face_encoding)\n        if True in matches:\n            index = matches.index(True)\n            name = known_face_names[index]\n        face_names.append(name)\n    return face_names, face_locations\n    \nif __name__ == '__main__':\n    # åŠ è½½ç™½åå•\n    white_map = load_portrait(path)\n    #å¼€å¯æ‘„åƒå¤´\n    video_capture = cv2.VideoCapture(0, cv2.CAP_DSHOW)\n    # é‡‡é›†å›¾åƒ\n    flag = 0\n    while True:\n        flag %= 3\n        _, frame = video_capture.read()\n        if flag == 0: # æ¯3å¸§å¤„ç†å› æ­¤ï¼ˆæé«˜å¤„ç†é€Ÿåº¦ï¼Œé˜²æ­¢è§†é¢‘å¡é¡¿ï¼‰\n            face_names, face_locations = recognize(frame, white_map)\n            if 'æœªçŸ¥' in face_names: # å¦‚æœæœ‰ç™½åå•ä¹‹å¤–çš„äºº\n                lock_screen()\n                break\n        flag += 1\n        if showflag:\n            # å°†äººè„¸æ¡†å‡º\n            for (top, right, bottom, left), name in zip(face_locations, face_names):\n                # æ”¹å˜åæ ‡ä½ç½®ï¼ˆå› ä¸ºå¤„ç†æ—¶åŸå›¾è¢«ç¼©å°äº†4*4ï¼‰\n                top *= 4\n                right *= 4\n                bottom *= 4\n                left *= 4\n                # çŸ©å½¢æ¡†\n                cv2.rectangle(frame, (left, top), (right, bottom), (0, 0, 255), 2)\n                #åŠ ä¸Šå§“å\n                cv2.rectangle(frame, (left, bottom - 35), (right, bottom), (0, 0, 255), cv2.FILLED)\n                font = cv2.FONT_HERSHEY_DUPLEX\n                cv2.putText(frame, name, (left + 6, bottom - 6), font, 1.0, (255, 255, 255), 1)\n            # æ˜¾ç¤ºå›¾åƒ\n            cv2.imshow('monitor', frame)\n        # æŒ‰Qé€€å‡º\n        if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n            break\n    video_capture.release()\n    cv2.destroyAllWindows()\n</code></pre>\n<p>è¿è¡Œä»£ç ä¹‹åï¼Œå…ˆå‰çš„åœºæ™¯å˜å¾—æœ‰æ‰€ä¸åŒï¼šè¿˜æ˜¯é‚£æ—¥ï¼Œå¾®é£è¡æ¼¾ï¼Œä½ å¼€å¿ƒçš„æ‘¸ç€é±¼ã€‚BOSSåŠ å¿«è„šæ­¥æƒ³è¦æŠ“ä¸ªç°è¡Œï¼Œå½“ä»–åˆšä¸€è¿‡æ¥ï¼Œç”µè„‘å±å¹•å°±å·²ç»åˆ‡åˆ°äº†å·¥ä½œç”»é¢ã€‚BOSSå¾®ç¬‘åœ°é¢‘é¢‘ç‚¹å¤´ï¼šâ€œå°ä¼™å­ï¼Œä¸é”™ï¼Œå·¥ä½œå¾ˆåˆ»è‹¦ã€‚â€</p>\n<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå°±è¿™æ“ä½œï¼Œå’±è·ç¦»å‡èŒåŠ è–ªï¼Œèµ°ä¸Šäººç”Ÿå·…å³°è¿˜è¿œå—ï¼Ÿï¼ˆæ‰‹åŠ¨æ»‘ç¨½è„¸ğŸ™ˆï¼‰</p>\n<h1><a id=\"_351\"></a>å†™åœ¨æœ€å</h1>\n<p>æ€»ä½“æ¥è¯´ï¼Œæœ¬æ¬¡çš„BOSSè¯†åˆ«ç³»ç»Ÿåªæ˜¯ä»æƒ³æ³•çš„èŒç”Ÿåˆ°ä¸€æ¬¡ç®€å•çš„å°è¯•ï¼Œè¿˜æœ‰è®¸å¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œæ¯”å¦‚è¯†åˆ«çš„å‡†ç¡®ç‡å’Œæ•ˆç‡é—®é¢˜ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å°è¯•ç€è¿›ä¸€æ­¥ä¼˜åŒ–ã€‚</p>\n<p>æœ€åï¼Œæƒ³è¯´çš„æ˜¯ï¼š<strong>æ‘¸é±¼ä¸æ˜¯é‡ç‚¹ï¼Œå­¦ä¹ æŠ€æœ¯æ‰æ˜¯å…³é”®</strong>ï¼Œå¸Œæœ›å¤§å®¶å¯ä»¥åœ¨æ‘¸ç´¢å’Œå°è¯•ä¸­ä¸æ–­æå‡è‡ªå·±ã€‚</p>\n<p>æˆ‘æ˜¯kimolå›ï¼Œå’‹ä»¬ä¸‹æ¬¡å†ä¼š~</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20201208000006826.jpg\"/><br/> <code>åˆ›ä½œä¸æ˜“ï¼Œå¤§ä¾ è¯·ç•™æ­¥â€¦ åŠ¨èµ·å¯çˆ±çš„åŒæ‰‹ï¼Œæ¥ä¸ªèµå†èµ°å‘— (à¹‘â—•Ü«ï¿©à¹‘)</code></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}