{"blogid": "126632432", "writerAge": "ç é¾„4å¹´", "writerBlogNum": "1373", "writerCollect": "7891", "writerComment": "1049", "writerFan": "39174", "writerGrade": "7çº§", "writerIntegral": "18503", "writerName": "perseverance52", "writerProfileAdress": "writer_image\\profile_126632432.jpg", "writerRankTotal": "440", "writerRankWeekly": "262", "writerThumb": "1923", "writerVisitNum": "1430040", "blog_read_count": "425", "blog_time": "å·²äºÂ 2022-09-03 15:38:36Â ä¿®æ”¹", "blog_title": "ã€CircuitPythonã€‘RaspberryPi Pico RP2040 è‡ªå®šä¹‰æœºæ¢°é”®ç›˜å®ä¾‹", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"centerfont_colorcorealCircuitPythonRaspberryPi_Pico_RP2040_Mechanical_Keyboard_0\"></a>\n<center>\n<font color=\"coreal\">ã€CircuitPythonã€‘RaspberryPi Pico RP2040 Mechanical Keyboardå®ä¾‹</font>\n</center></h2>\n<hr/>\n<ul><li>âœ¨æœ¬ç¤ºä¾‹åŸºäº<code>Thonny</code>å¼€å‘ï¼Œæ‰€ä½¿ç”¨çš„å›ºä»¶æ˜¯ï¼š<code>CircuitPython</code>ï¼ŒåŒºåˆ«äº<code>MicroPython</code>å›ºä»¶ã€‚âœ¨</li></ul>\n<blockquote>\n<h4><a id=\"BRaspberryPi_Pico_RP2040RP204020_3\"></a>ğŸˆæœ€è¿‘Bç«™æŸå›çš„ç€šæ–‡é”®ç›˜å¾ˆç«çƒ­ï¼Œè¿™é‡Œä»‹ç»åˆ©ç”¨<code>RaspberryPi Pico RP2040</code>å®ç°é”®ç›˜æŒ‰é”®å®šåˆ¶åŠŸèƒ½ã€‚ç”±äº<code>RP2040</code>å¼•è„šé™åˆ¶ï¼Œæœ€å¤šæ”¯æŒ20ä¸ªè‡ªå®šä¹‰æŒ‰é”®æˆ–ç»„åˆé”®çš„è¾“å…¥ã€‚</h4>\n</blockquote>\n<ul><li>ğŸ›’ç°æœ‰å”®å–æ¨¡å—æœ‰16æŒ‰é”®çš„ï¼Œå¦‚æœè‡ªå·±æ‰“æ¿å¯ä»¥è®¾è®¡æœ€å¤š20çš„æŒ‰é”®ï¼Œ</li><li>ğŸ“œä»‹ç»é“¾æ¥ï¼š<code>https://shop.pimoroni.com/products/pico-rgb-keypad-base?variant=32369517166675</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\925d6e9b975641b9848674967b8dca28.png\"/></li></ul>\n<h3><a id=\"_7\"></a>ğŸ­æµ‹è¯•æ–¹æ³•</h3>\n<p>-ğŸ“ åœ¨çº¿<code>é”®ç›˜æŒ‰é”®æµ‹è¯•</code></p>\n<ul><li>ğŸ‘‰æ‰¾ä¸€ä¸ªæµ‹è¯•æŒ‰é”®çš„ä¸“é—¨ç½‘ç«™ï¼š<code>https://keyboard.bmcx.com/</code>è¿›è¡ŒæŒ‰é”®æµ‹è¯•å’ŒéªŒè¯ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3e04b788132748aca8006f2cd885815b.png\"/><br/> -ğŸ—æµ‹è¯•æ–¹æ³•ï¼š</li></ul>\n<blockquote>\n<p>ğŸ“‘è°ƒè¯•æ—¶å¯ä»¥ä½¿ç”¨ä¸€æ ¹å¯¼çº¿ä¸²è”ä¸€ä¸ª1Kçš„ç”µé˜»ç”¨äºé™æµä½œç”¨ï¼Œä¸€å¤´æ¥åˆ°<code>GND</code>ï¼Œå¦ä¸€ç«¯å»è§¦ç¢°å¼•è„šï¼Œå¤„ç†<code>GP16</code>å¼•è„šå¤–ï¼Œå…¶ä»–æ•°å­—å¼•è„šéƒ½å¯ä»¥å»ç¢°ä¸€ç¢°ï¼Œä½ å¯ä»¥åœ¨æŒ‰é”®æµ‹è¯•ç½‘ç«™ä¸Šçœ‹åˆ°ï¼ŒæŒ‰é”®æœ‰è¢«æ¨¡æ‹ŸæŒ‰ä¸‹ã€‚åŒæ—¶å¦‚æœä½ æ‰“å¼€äº†<code>Thonny</code>ï¼Œåœ¨Shellè°ƒè¯•çª—å£æœ‰å¯¹åº”çš„æŒ‰é”®ç å€¼æ‰“å°ä¿¡æ¯ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d5ba42118bf448c6929937c219be4015.png\"/></p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3b97456e995d410cbb0cb60b4b982ff1.png\"/></p>\n<ul><li>ğŸ“ŒæŒ‰é”®æ˜ å°„å¯ä»¥è‡ªå·±åœ¨ä»£ç ä¸­ä¿®æ”¹æˆè‡ªå·±æƒ³è¦çš„æŒ‡å®šæŒ‰é”®æˆ–ç»„åˆæŒ‰é”®ã€‚</li></ul>\n<pre><code class=\"prism language-c\">keymap <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>Keycode<span class=\"token punctuation\">.</span>GUI<span class=\"token punctuation\">,</span> Keycode<span class=\"token punctuation\">.</span>C<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span># win <span class=\"token operator\">+</span> <span class=\"token function\">C</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>Keycode<span class=\"token punctuation\">.</span>GUI<span class=\"token punctuation\">,</span> Keycode<span class=\"token punctuation\">.</span>V<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span># win <span class=\"token operator\">+</span><span class=\"token function\">V</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>THREE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>FOUR<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>FIVE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>MEDIA<span class=\"token punctuation\">,</span> ConsumerControlCode<span class=\"token punctuation\">.</span>VOLUME_DECREMENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>MEDIA<span class=\"token punctuation\">,</span> ConsumerControlCode<span class=\"token punctuation\">.</span>VOLUME_INCREMENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>G<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>B<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>UP_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  # plus <span class=\"token function\">key</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>Y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>I<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>O<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>LEFT_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>DOWN_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>RIGHT_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">19</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>ALT<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>U<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"_48\"></a>ğŸ“–ç¯å¢ƒæ­å»ºè¯´æ˜</h3>\n<ul><li>âœ”ä¸‹è½½å’Œçƒ§å½•<code>CircuitPython</code>å›ºä»¶</li><li>ğŸ‘‰å®˜æ–¹RP2040å›ºä»¶ä¸‹è½½åœ°å€ï¼š<code>https://circuitpython.org/downloads</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\0d247a723c344c638efff89b255cc15e.png\"/></li><li>ğŸŒ¿å¦‚æœä½¿ç”¨çš„æ˜¯YD2040çš„æ¿å­å¯ä»¥é€‰æ‹©ï¼š<code>pimoroni</code>å‹å·<code>flash</code>å®¹é‡åˆ†ï¼š<code>4MB</code>ã€<code>8MB</code>ã€<code>16MB</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\e13947fb83f944a4992873cb649c600e.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\f6a3a884c2c4417f9d70555a910f79c1.png\"/></li></ul>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\fffa8eec04404cdc9891a6e6c1055c40.png\"/></p>\n<ul><li>â›³å›ºä»¶é€‰æ‹©è¯´æ˜<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\e839df9c34f04b08b12ce775071c8fb7.png\"/></li><li>ğŸ„ç”±äºæ²¡æœ‰ä¸­æ–‡æç¤ºçš„ï¼Œåªæœ‰æ‹¼éŸ³<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\42e25cffa7e8494380d44d24a8c3745f.png\"/></li><li>çƒ§å½•æ–¹æ³•<br/> åœ¨æ’å…¥usbåˆ°ç”µè„‘å‰å…ˆæŒ‰ä½bootæŒ‰é”®ï¼Œåœ¨è¿æ¥åˆ°ç”µè„‘ä¸Šï¼Œç”µè„‘ä¸Šä¼šæ˜¾ç¤ºä¸€ä¸ªè™šæ‹Ÿå‡ºæ¥çš„120MBå®¹é‡çš„Uç›˜ï¼Œç„¶åå°†ä¸‹è½½ä¸‹æ¥çš„.uf2æ–‡ä»¶æ‹·è´åˆ°è™šæ‹Ÿçš„Uç›˜å½“ä¸­å³å¯å®ç°å›ºä»¶çš„çƒ§å½•ã€‚</li></ul>\n<h3><a id=\"_64\"></a>ğŸ§§åº“ä¸‹è½½å’Œå¯¼å…¥</h3>\n<ul><li>ğŸ‰åœ¨<code>Thonny</code>å·¥å…·æ ä¸Šå½“ä¸­-<code>å·¥å…·</code> -<code>ç®¡ç†æ’ä»¶</code>ï¼Œæœç´¢<code>adafruit_hid</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\1c041f1819344a2da31c9933ce6e3887.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\b3654e2fa07f42959753671d9683582a.png\"/></li><li>æ‰¾åˆ°ä¸‹è½½è·¯å¾„ï¼š<code>C:\\Users\\Administrator\\AppData\\Roaming\\Thonny\\plugins\\Python310\\site-packages</code></li></ul>\n<blockquote>\n<p>å°†<code>adafruit_hid</code>æ–‡ä»¶å¤¹æ‹·è´åˆ°<code>Pi Pico RP2040</code>è®¾å¤‡å½“ä¸­ã€‚</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\efefcc2e5842440896bf5d22c26e44f1.png\"/></p>\n<ul><li> <p>ğŸ¯å…ˆå°†æ­¤æ–‡ä»¶å¤¹æ‹·è´åˆ°æ¡Œé¢æˆ–å…¶ä»–è‡ªå·±èƒ½æ‰¾åˆ°çš„åœ°æ–¹ï¼Œé€šè¿‡<code>Thonny</code>å®šä½åˆ°æ–‡ä»¶å¤¹ï¼Œé€‰ä¸­ï¼Œå³é”®<code>ä¸Šä¼ åˆ°/</code>(æ³¨æ„éœ€è¦å°†è®¾å¤‡é€€å‡ºUç›˜æ¨¡å¼ï¼Œä¸ç„¶ä¸Šä¼ ä¼šå‡ºé”™)<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\66647756353d425fba4aeb68f0dd514f.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d21c7b5254224ff68c27ec521f8f34fa.png\"/></p> </li><li> <p>ğŸŒ¿å¦‚æœæ²¡æœ‰å°†æ–‡ä»¶èœå•å‹¾é€‰çš„ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\56154ba5b5274f58b86267453c6b9f7d.png\"/></p> </li><li> <p>ğŸŒ¿ç›´æ¥æ‹·è´æ–¹æ³•ï¼šå½“<code>RP2040</code>æ’å…¥åˆ°ç”µè„‘ä¸Šé»˜è®¤æ˜¯æœ‰ä¸€ä¸ªç›˜ç¬¦çš„ï¼Œä¸åƒ<code>Micropython ESP32</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\fa084426b2a140ab99931fe8b357fe45.png\"/></p> </li><li> <p>ğŸ“—æ–‡ä»¶ç»“æ„<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\538efda3864a447fb27302af66490ad1.png\"/></p> </li></ul>\n<h3><a id=\"Pico_RP2040_Mech_Keyboard__84\"></a>ğŸ“Pico_RP2040 Mech Keyboard ç¤ºä¾‹ä»£ç </h3>\n<ul><li>ğŸ“ç¤ºä¾‹åœ°å€ï¼š<code>https://github.com/adafruit/Adafruit_Learning_System_Guides/tree/main/Pico_RP2040_Mech_Keyboard</code></li><li>ğŸ†å¼•è„šæ³¨æ„ï¼š<code>GP15</code>ä¸è¦è¢«ä½¿ç”¨ï¼Œå®ƒè¢«å†…éƒ¨USBå¤–è®¾ä½¿ç”¨ï¼Œå…·ä½“è¯´æ˜ï¼š<code>https://github.com/adafruit/circuitpython/issues/4034</code></li></ul>\n<blockquote>\n<p>ğŸˆ åœ¨æºä»£ç ä¸Šæ·»åŠ äº†æŒ‰é”®è°ƒè¯•ä¸²å£è¾“å‡ºï¼Œæ–¹ä¾¿æŸ¥é˜…ã€‚</p>\n</blockquote>\n<pre><code class=\"prism language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token expression\">SPDX<span class=\"token operator\">-</span>FileCopyrightText<span class=\"token operator\">:</span> <span class=\"token number\">2021</span> John Park <span class=\"token keyword\">for</span> Adafruit Industries</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token expression\">SPDX<span class=\"token operator\">-</span>License<span class=\"token operator\">-</span>Identifier<span class=\"token operator\">:</span> MIT</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token expression\">RaspberryPi Pico RP2040 Mechanical Keyboard</span></span>\n\nimport time\nimport board\nfrom digitalio import DigitalInOut<span class=\"token punctuation\">,</span> Direction<span class=\"token punctuation\">,</span> Pull\nimport usb_hid\nfrom adafruit_hid<span class=\"token punctuation\">.</span>keyboard import Keyboard\nfrom adafruit_hid<span class=\"token punctuation\">.</span>keycode import Keycode\nfrom adafruit_hid<span class=\"token punctuation\">.</span>consumer_control import ConsumerControl\nfrom adafruit_hid<span class=\"token punctuation\">.</span>consumer_control_code import ConsumerControlCode\n\n<span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"---Pico Pad Keyboard---\"</span><span class=\"token punctuation\">)</span>\n\nled <span class=\"token operator\">=</span> <span class=\"token function\">DigitalInOut</span><span class=\"token punctuation\">(</span>board<span class=\"token punctuation\">.</span>LED<span class=\"token punctuation\">)</span>\nled<span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> Direction<span class=\"token punctuation\">.</span>OUTPUT\nled<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> True\n\nkbd <span class=\"token operator\">=</span> <span class=\"token function\">Keyboard</span><span class=\"token punctuation\">(</span>usb_hid<span class=\"token punctuation\">.</span>devices<span class=\"token punctuation\">)</span>\ncc <span class=\"token operator\">=</span> <span class=\"token function\">ConsumerControl</span><span class=\"token punctuation\">(</span>usb_hid<span class=\"token punctuation\">.</span>devices<span class=\"token punctuation\">)</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token directive keyword\">list</span> <span class=\"token expression\">of pins to <span class=\"token function\">use</span> <span class=\"token punctuation\">(</span>skipping GP15 on Pico because it's funky<span class=\"token punctuation\">)</span></span></span>\npins <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    board<span class=\"token punctuation\">.</span>GP0<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP1<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP2<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP3<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP4<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP5<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP6<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP7<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP8<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP9<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP10<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP11<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP12<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP13<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP14<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP16<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP17<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP18<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP19<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP20<span class=\"token punctuation\">,</span>\n    board<span class=\"token punctuation\">.</span>GP21<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span>\n\nMEDIA <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nKEY <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n\nkeymap <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>Keycode<span class=\"token punctuation\">.</span>GUI<span class=\"token punctuation\">,</span> Keycode<span class=\"token punctuation\">.</span>C<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span># win <span class=\"token operator\">+</span> <span class=\"token function\">C</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>Keycode<span class=\"token punctuation\">.</span>GUI<span class=\"token punctuation\">,</span> Keycode<span class=\"token punctuation\">.</span>V<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span># win <span class=\"token operator\">+</span><span class=\"token function\">V</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>THREE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>FOUR<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>FIVE<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>MEDIA<span class=\"token punctuation\">,</span> ConsumerControlCode<span class=\"token punctuation\">.</span>VOLUME_DECREMENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>MEDIA<span class=\"token punctuation\">,</span> ConsumerControlCode<span class=\"token punctuation\">.</span>VOLUME_INCREMENT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>G<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>B<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>UP_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">11</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  # plus <span class=\"token function\">key</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>Y<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">(</span><span class=\"token number\">14</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>I<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>O<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>LEFT_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>DOWN_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>RIGHT_ARROW<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">19</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>ALT<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>KEY<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>Keycode<span class=\"token punctuation\">.</span>U<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n<span class=\"token punctuation\">}</span>\n\nswitches <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> i in <span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token function\">len</span><span class=\"token punctuation\">(</span>pins<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">switch</span> <span class=\"token operator\">=</span> <span class=\"token function\">DigitalInOut</span><span class=\"token punctuation\">(</span>pins<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">switch</span><span class=\"token punctuation\">.</span>direction <span class=\"token operator\">=</span> Direction<span class=\"token punctuation\">.</span>INPUT\n    <span class=\"token keyword\">switch</span><span class=\"token punctuation\">.</span>pull <span class=\"token operator\">=</span> Pull<span class=\"token punctuation\">.</span>UP\n    switches<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">switch</span><span class=\"token punctuation\">)</span>\n\n\nswitch_state <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">while</span> True<span class=\"token operator\">:</span>\n    <span class=\"token keyword\">for</span> button in <span class=\"token function\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n        <span class=\"token keyword\">if</span> switch_state<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">if</span> not switches<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token operator\">:</span>\n                try<span class=\"token operator\">:</span>\n                    <span class=\"token keyword\">if</span> keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> KEY<span class=\"token operator\">:</span>\n                        kbd<span class=\"token punctuation\">.</span><span class=\"token function\">press</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                    <span class=\"token keyword\">else</span><span class=\"token operator\">:</span>\n                        cc<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                        <span class=\"token function\">print</span><span class=\"token punctuation\">(</span>keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                except ValueError<span class=\"token operator\">:</span>  # deals w six key limit\n                    pass\n                switch_state<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n\n        <span class=\"token keyword\">if</span> switch_state<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span>\n            <span class=\"token keyword\">if</span> switches<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token operator\">:</span>\n                try<span class=\"token operator\">:</span>\n                    <span class=\"token keyword\">if</span> keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> KEY<span class=\"token operator\">:</span>\n                        kbd<span class=\"token punctuation\">.</span><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>keymap<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n                except ValueError<span class=\"token operator\">:</span>\n                    pass\n                switch_state<span class=\"token punctuation\">[</span>button<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n\n    time<span class=\"token punctuation\">.</span><span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span>  # debounce\n\n\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}