{"blogid": "121462130", "writerAge": "码龄6年", "writerBlogNum": "2728", "writerCollect": "3816", "writerComment": "262", "writerFan": "22715", "writerGrade": "8级", "writerIntegral": "29554", "writerName": "lxw1844912514", "writerProfileAdress": "writer_image\\profile_121462130.jpg", "writerRankTotal": "298", "writerRankWeekly": "741", "writerThumb": "694", "writerVisitNum": "3565493", "blog_read_count": "3883", "blog_time": "于 2021-11-21 22:57:14 发布", "blog_title": "Nginx服务器，修改html 文件后页面不更新生效（已解决）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>1.首先解决不生效问题</p>\n<blockquote>\n<p><strong>Nginx sendfile配置</strong><br/> sendfile: 设置为on表示启动高效传输文件的模式。sendfile可以让Nginx在传输文件时直接在磁盘和tcp socket之间传输数据。如果这个参数不开启，会先在用户空间（Nginx进程空间）申请一个buffer，用read函数把数据从磁盘读到cache，再从cache读取到用户空间的buffer，再用write函数把数据从用户空间的buffer写入到内核的buffer，最后到tcp socket。开启这个参数后可以让数据不用经过用户buffer。</p>\n</blockquote>\n<h2>解决方法</h2>\n<p><br/> Nginx配置nginx.conf 设置sendfile为off（默认为on）<br/> 重启Nginx<br/> 右键点击Chrome浏览器刷新健选择“清空缓存并硬性重新加载”（对于Chrome浏览器这一步很关键，普通刷新也不会生效。其他浏览器如火狐，普通刷新就行）<br/> 改后Nginx配置<br/> 增加下面这货<br/><span style=\"color:#fe2c24;\">http{<!-- --><br/>      sendfile off;<br/> }</span></p>\n<pre><code class=\"language-cpp\">#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        off;  #将on 改为 off\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n\n    server {\n\t    listen       80;\n\t    server_name  localhost;\n\t\n\t    #charset koi8-r;\n\t\n\t    #access_log  logs/host.access.log  main;\n\t    \n\t    location / {\n\t\t    root   D:/police/terminal-client; \n\t\t    index  index.html index.htm;\n\t\t}\n\t\t\n\t\tlocation /api/ {\n\t    \tproxy_pass      http://localhost:8888/;\n            proxy_redirect  off;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n\t}\n}\n</code></pre>\n<p>2.谷歌浏览器的“清空缓存并硬性重新加载”</p>\n<p><strong><span style=\"color:#fe2c24;\">先F12--&gt;出来开发者工具==&gt;然后右击谷歌的刷新按钮就行了；如果不先F12 右击刷新 是不会出现的；记住了 或者直接cmd+shift+R 也可以</span></strong></p>\n<p><img alt=\"\" height=\"1200\" src=\"image\\fa3e165b93c44ee59b8a36a17b0b152c.png\" width=\"1200\"/></p>\n<h2>上面加载了好多插件的文件。导致请求页面27ms,加载插件文件600msd.</h2>\n<h2></h2>\n<h2>3.Chrome浏览器如何强制刷新页面(不使用缓存)？</h2>\n<p>Chrome官方推荐使用如下快捷键，就可以不使用页面缓存进行刷新</p>\n<p>Windows和Linux操作系统: <strong>Shift+F5</strong> 或 <strong>Ctrl+Shift+R</strong></p>\n<p>Mac OS: <strong>Cmd+Shft+R</strong></p>\n<p></p>\n</div>\n</div>"}