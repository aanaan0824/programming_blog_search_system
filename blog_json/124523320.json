{"blogid": "124523320", "writerAge": "码龄11年", "writerBlogNum": "203", "writerCollect": "1520", "writerComment": "436", "writerFan": "5805", "writerGrade": "5级", "writerIntegral": "4190", "writerName": "Oliver尹", "writerProfileAdress": "writer_image\\profile_124523320.jpg", "writerRankTotal": "4076", "writerRankWeekly": "979", "writerThumb": "660", "writerVisitNum": "246504", "blog_read_count": "8149", "blog_time": "于 2022-05-01 10:59:26 发布", "blog_title": "解决Vue3中使用setup如何定义组件的name属性", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-github-gist\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>问题</strong>：解决Vue3中使用setup如何定义组件的name属性</p>\n<p><strong>描述</strong>：这几天在尝试改写基于vue2的组件至vue3版本，使用了最新的setup也就是如下这种方式编写组件</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span> setup<span class=\"token operator\">&gt;</span>\n\t<span class=\"token comment\">// ...代码块</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>由于个人还是比较喜欢Element那种组件注册方式，也就是如下</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">import</span> TButton <span class=\"token keyword\">from</span> <span class=\"token string\">'./src/index.vue'</span><span class=\"token punctuation\">;</span>\nTButton<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">install</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">Vue</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  Vue<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span>TButton<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> TButton<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TButton<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>Element的注册方式最主要的就是会将组件的name属性值注册为组件名，这种做法到了vue3的setup后发现，name值…没有了…</p>\n<p><strong>解决</strong>：解决的方式有几种，博主大致整理了一下：</p>\n<p><strong>第一种</strong>：新增加一个script标签，在这个标签中写入name属性，代码如下</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span>demo<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">&gt;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"TButton\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span> setup<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>style scoped lang<span class=\"token operator\">=</span><span class=\"token string\">\"less\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>完成就打印确认，发现确实name属性确实被加上去了<br/> <img alt=\"在这里插入图片描述\" src=\"image\\870a2ed8e01344b2b80c0a7cd7c95322.png\"/></p>\n<p><strong>第二种</strong>：使用一个叫做 <strong>“unplugin-vue-define-options”</strong> 的插件，这个插件本来确实不知道，有一次在看Element Plus的源码时发现了这个插件，发现在Element Plus中都是使用这个插件来对组件名进行注册的，因此学到了<br/> 具体方式如下：</p>\n<p>第一步：安装，安装的方式很常规，就是npm的安装</p>\n<pre><code class=\"prism language-javascript\">npm install unplugin<span class=\"token operator\">-</span>vue<span class=\"token operator\">-</span>define<span class=\"token operator\">-</span>options <span class=\"token operator\">-</span><span class=\"token constant\">D</span>\n</code></pre>\n<p>第二步：集成，找到vite.config.ts文件，加入插件unplugin-vue-define-options（由于我是使用了vite作为配置工具，那么这里就演示vite中的用法）</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vite'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> vue <span class=\"token keyword\">from</span> <span class=\"token string\">'@vitejs/plugin-vue'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> DefineOptions <span class=\"token keyword\">from</span> <span class=\"token string\">'unplugin-vue-define-options/vite'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// https://vitejs.dev/config/</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">DefineOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>第三步：集成完成之后，那么可以直接使用了，如果在TypeScript中报错了，那么调整一下就行了，比如在d.ts的配置文件中加入描述</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span> setup<span class=\"token operator\">&gt;</span>\n  <span class=\"token function\">defineOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'TButton'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>style scoped<span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>第三种：这种方式其实也是vue3中的，只是它的setup用法是vue3早期的，这种方式其实没有name这个顾虑，可以直接写，这里也列一下吧</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>script lang<span class=\"token operator\">=</span><span class=\"token string\">\"ts\"</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> defineComponent <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineComponent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'TButton'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span>style scoped lang<span class=\"token operator\">=</span><span class=\"token string\">\"less\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">&gt;</span>\n\n</code></pre>\n<p>以上便是发现的在vue3中给组件添加name属性的方式，如果其他有好的方式博主所不知道的，麻烦分享一下，万分感谢～～～</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}