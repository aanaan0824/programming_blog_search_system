{"blogid": "126579607", "writerAge": "ç é¾„57å¤©", "writerBlogNum": "119", "writerCollect": "211", "writerComment": "20", "writerFan": "103", "writerGrade": "4çº§", "writerIntegral": "1277", "writerName": "Mr_DC_IT", "writerProfileAdress": "writer_image\\profile_126579607.jpg", "writerRankTotal": "15794", "writerRankWeekly": "1121", "writerThumb": "38", "writerVisitNum": "24559", "blog_read_count": "1681", "blog_time": "äºÂ 2022-08-29 10:59:15Â å‘å¸ƒ", "blog_title": "ã€æ¯•ä¸šè®¾è®¡ã€‘æœºå™¨è§†è§‰ç«è½¦ç¥¨è¯†åˆ«ç³»ç»Ÿ - OpenCV python æ·±åº¦å­¦ä¹ ", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><a href=\"#0__5\">0 å‰è¨€</a></li><li><a href=\"#1__30\">1 è¯¾é¢˜æ„ä¹‰</a></li><li><ul><li><a href=\"#11__37\">1.1 è¯¾é¢˜éš¾ç‚¹ï¼š</a></li></ul>\n</li><li><a href=\"#2__42\">2 å®ç°æ–¹æ³•</a></li><li><ul><li><a href=\"#21__43\">2.1 å›¾åƒé¢„å¤„ç†</a></li><li><a href=\"#22__52\">2.2 å­—ç¬¦åˆ†å‰²</a></li><li><a href=\"#23__60\">2.3 å­—ç¬¦è¯†åˆ«</a></li><li><ul><li><a href=\"#_73\">éƒ¨åˆ†å®ç°ä»£ç </a></li></ul>\n</li></ul>\n</li><li><a href=\"#3__186\">3 å®ç°æ•ˆæœ</a></li></ul>\n</div>\n<p></p>\n<hr color=\"#000000\" size='1\"'/>\n<h1><a id=\"0__5\"></a>0 å‰è¨€</h1>\n<p>ğŸ”¥ Hiï¼Œå¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ä¸¹æˆå­¦é•¿çš„æ¯•è®¾ç³»åˆ—æ–‡ç« ï¼</p>\n<p>ğŸ”¥ å¯¹æ¯•è®¾æœ‰ä»»ä½•ç–‘é—®éƒ½å¯ä»¥é—®å­¦é•¿å“¦!</p>\n<p>è¿™ä¸¤å¹´å¼€å§‹ï¼Œå„ä¸ªå­¦æ ¡å¯¹æ¯•è®¾çš„è¦æ±‚è¶Šæ¥è¶Šé«˜ï¼Œéš¾åº¦ä¹Ÿè¶Šæ¥è¶Šå¤§â€¦ æ¯•ä¸šè®¾è®¡è€—è´¹æ—¶é—´ï¼Œè€—è´¹ç²¾åŠ›ï¼Œç”šè‡³æœ‰äº›é¢˜ç›®å³ä½¿æ˜¯ä¸“ä¸šçš„è€å¸ˆæˆ–è€…ç¡•å£«ç”Ÿä¹Ÿéœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œæ‰€ä»¥ä¸€æ—¦å‘ç°é—®é¢˜ï¼Œä¸€å®šè¦æå‰å‡†å¤‡ï¼Œé¿å…åˆ°åé¢æªæ‰‹ä¸åŠï¼Œè‰è‰äº†äº‹ã€‚</p>\n<p>ä¸ºäº†å¤§å®¶èƒ½å¤Ÿé¡ºåˆ©ä»¥åŠæœ€å°‘çš„ç²¾åŠ›é€šè¿‡æ¯•è®¾ï¼Œå­¦é•¿åˆ†äº«ä¼˜è´¨æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ–°é¡¹ç›®æ˜¯</p>\n<p>ğŸš© <strong>åŸºäºæœºå™¨è§†è§‰çš„ç«è½¦ç¥¨è¯†åˆ«ç³»ç»Ÿ</strong></p>\n<p>ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)</p>\n<ul><li>éš¾åº¦ç³»æ•°ï¼š4åˆ†</li><li>å·¥ä½œé‡ï¼š4åˆ†</li><li>åˆ›æ–°ç‚¹ï¼š3åˆ†</li></ul>\n<p>ğŸ§¿ <strong>é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š</strong></p>\n<p><a href=\"https://blog.csdn.net/Mr_DC_IT/article/details/126460477\">https://blog.csdn.net/Mr_DC_IT/article/details/126460477</a></p>\n<h1><a id=\"1__30\"></a>1 è¯¾é¢˜æ„ä¹‰</h1>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\2021022314255930.png\"/></p>\n<p>ç›®å‰ç«è½¦ä¹˜åŠ¡å‘˜åœ¨å§é“ºæ—…å®¢åœ¨ä¸Šè½¦å‰ä¸ºå…¶æä¾›å°†ç«è½¦ç¥¨æ¢æˆä½ç½®ä¿¡æ¯å¡æœåŠ¡ï¼Œåœ¨æ—…å®¢ä¸Šè½¦å‰ï¼Œç”±äºä¸Šè½¦äººæ•°å¤šï¼Œè€Œä¸”å¤§å¤šæ•°æ—…å®¢éƒ½æºå¸¦å¤§é‡è¡Œæç‰©å“ï¼Œè€Œä¸”ä¹˜è½¦ä¸­è€äººå’Œå°å­©ä¹Ÿè¾ƒå¤šã€‚åœ¨æ¢å¡è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œäººå‘˜æ‹¥æŒ¤ååˆ†å‰å®³ï¼Œè€Œä¸”ä¸Šç«è½¦æ—¶ï¼Œç«è½¦é—¨çª„é˜¶æ¢¯ä¹Ÿè¾ƒé™¡ï¼Œå±é™©ç³»æ•°ååˆ†é«˜ã€‚ä¹˜åŠ¡å‘˜ç»´æŒç§©åºååˆ†å›°éš¾ã€‚æ¢å¡ä¹‹åï¼Œåœ¨æ—…å®¢ä¸‹è½¦ä¹‹å‰ä¹˜åŠ¡å‘˜åˆè¦å°†ä½ç½®ä¿¡æ¯å¡æ¢æˆç«è½¦ç¥¨ã€‚è¿™ä¸€è¿‡ç¨‹å†—é•¿ä¸”å¯¹äºæ—…å®¢åŸºæœ¬æ²¡æœ‰ä»»ä½•æœ‰ç”¨çš„æ„ä¹‰ã€‚å¦‚æœé€šè¿‡å…‰å­¦ç¬¦è¯†åˆ«è½¯ä»¶ï¼Œä¹˜åŠ¡å‘˜åˆ©ç”¨ipadç­‰ç”µå­äº§å“æ‰«æé‡‡é›†ç«è½¦ç¥¨å›¾åƒï¼Œè¯»å–æ–‡æœ¬å›¾åƒï¼Œé€šè¿‡è¯†åˆ«ç®—æ³•è½¬æˆæ–‡å­—ï¼Œå°†æ–‡å­—ä¿¡æ¯æå–å‡ºæ¥ï¼Œä¹‹åå­˜å‚¨èµ·æ¥ï¼Œä¾¿äºä¹˜åŠ¡å‘˜ç»Ÿè®¡æŸ¥çœ‹ï¼Œåœ¨æ—…å®¢åˆ°ç«™æ˜¯ï¼Œç³»ç»Ÿè‡ªåŠ¨æé†’ä¹˜åŠ¡å‘˜æŸç«™ç‚¹ä¸‹è½¦çš„æ‰€æœ‰æ—…å®¢ä½ç½®ä¿¡æ¯ã€‚éšç€é“è·¯äº¤é€šçš„ä¸æ–­ä¼˜åŒ–ï¼Œè½¦æ¬¡ä¸æ—…å®¢äººæ•°çš„å¢åŠ ï¼Œç«è½¦ç¥¨å…ç¥¨ç³»ç»Ÿå°†æ›´åŠ ä¾¿æ·ï¼Œä¸ºäººä»¬å¸¦æ¥æ›´å¥½çš„æœåŠ¡ã€‚</p>\n<h2><a id=\"11__37\"></a>1.1 è¯¾é¢˜éš¾ç‚¹ï¼š</h2>\n<p>ç”±äºç«è½¦ç¥¨ç¥¨é¢æ–‡å­—è¯†åˆ«å±äºå¤šç§å­—ä½“æ··æ’ï¼Œä½å“è´¨çš„ä¸“ç”¨å°åˆ·æ±‰å­è¯†åˆ«ã€‚ç«è½¦ç¥¨æ–‡å­—ç¬”ç”»ç²˜è¿ï¼Œæ–­è£‚ï¼Œè¯†åˆ«å¤æ‚åº¦é«˜ï¼Œéš¾åº¦å¤§ï¼Œé‡‡ç”¨ç›®å‰è¾ƒå¥½çš„OCRæŠ€æœ¯éƒ½æ¯”è¾ƒéš¾ä»¥å®ç°ã€‚</p>\n<h1><a id=\"2__42\"></a>2 å®ç°æ–¹æ³•</h1>\n<h2><a id=\"21__43\"></a>2.1 å›¾åƒé¢„å¤„ç†</h2>\n<p>ç«è½¦ç¥¨ç»è¿‡æ‰«æè£…ç½®ç«è½¦ç…§ç›¸æœºç­‰è£…ç½®å°†å›¾åƒä¼ é€’åˆ°è®¡ç®—æœºï¼Œç»è¿‡ç°åº¦å¤„ç†ä¿å­˜ä¸ºä¸€å¹…ç°åº¦å›¾ã€‚å¦‚æœè¦å¯¹ç«è½¦ç¥¨è¿›è¡ŒåæœŸçš„è¯†åˆ«ï¼Œé‚£ä¹ˆå°±ä¸€å®šè¦å¯¹å›¾åƒåšäºŒå€¼åŒ–ï¼Œä¹‹åå†å¯¹äºŒå€¼åŒ–çš„å›¾åƒè¿›è¡Œç‰ˆé¢åˆ†æï¼Œç¡®å®šæˆ‘ä»¬æ‰€éœ€è¦çš„ä¿¡æ¯æ‰€åœ¨ï¼Œä¹‹åæ‰èƒ½è¿›è¡Œå•ä¸ªå­—ç¬¦çš„åˆ†å‰²ï¼Œæ‰èƒ½å¯¹å­—ç¬¦åšæå–ç‰¹å¾ç‚¹çš„å·¥ä½œï¼Œä¹‹åæŒ‰ç…§æˆ‘ä»¬å¯¹æ¯”ç¡®å®šçš„è§„åˆ™æ¥è¿›è¡Œåˆ¤å†³ä»è€Œè¾¾åˆ°è¯†åˆ«æ•ˆæœã€‚</p>\n<p>ç”±äºç«è½¦ç¥¨å®¹æ˜“è¢«æ±¡æŸã€å¼¯æŠ˜ï¼Œè€Œä¸”å­—ç¬¦çš„é¢œè‰²ä¹Ÿæ˜¯æœ‰æ‰€ä¸åŒï¼Œç«è½¦ç¥¨ç¥¨å·æ˜¯çº¢è‰²ï¼Œè€Œå…¶ä»–ä¿¡æ¯æ˜¾ç¤ºåˆ™ä¸ºé»‘è‰²ï¼Œç¥¨é¢çš„èƒŒæ™¯åŒ…æ‹¬çº¢è‰²å’Œè“è‰²ä¸¤ç§å½©è‰²ï¼Œè¿™äº›ç‰¹ç‚¹éƒ½ä½¿å¾—ç«è½¦ç¥¨çš„æ–‡å­—è¯†åˆ«ä¸åŒäºä¸€èˆ¬çš„æ–‡å­—è¯†åˆ«ã€‚åœ¨è¯†å‰æœŸï¼Œè¦å¯¹ç«è½¦ç¥¨å›¾åƒåšå‡ºç‰¹å®šçš„å¤„ç†æ‰èƒ½å¾ˆå¥½çš„è¿›è¡Œåç»­çš„è¯†åˆ«ã€‚æœ¬æ¬¡è¯¾é¢˜æ‰€ç ”ç©¶çš„é¢„å¤„ç†æœ‰å¹³å¸¸æ‰€å¤„ç†çš„äºŒå€¼åŒ–ï¼Œå¹³æ»‘å»å™ªä¹‹å¤–è¿˜éœ€è¦é’ˆå¯¹ä¸åŒå­—ç¬¦é¢œè‰²æ¥è¿›è¡Œå½©è‰²ç©ºé—´ä¸Šçš„å¹³æ»‘è¿‡æ»¤ã€‚</p>\n<p>é¢„å¤„ç†æµç¨‹å¦‚ä¸‹æ‰€ç¤º</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223134123894.png\"/></p>\n<h2><a id=\"22__52\"></a>2.2 å­—ç¬¦åˆ†å‰²</h2>\n<p>å­—ç¬¦åˆ†å‰²å°±æ˜¯åœ¨ç‰ˆé¢åˆ†æåå¾—åˆ°çš„æ–‡æœ¬å—åˆ‡åˆ†æˆä¸ºæ–‡å­—è¡Œï¼Œä¹‹åå†å°†è¡Œåˆ†å‰²æˆå•ä¸ªå­—ç¬¦ï¼Œæ¥è¿›è¡Œåç»­çš„å­—ç¬¦è¯†åˆ«ã€‚è¿™æ˜¯OCRç³»ç»Ÿé‡Œè‡³å…³é‡è¦çš„ä¸€ç¯ï¼Œç›´æ¥å½±å“è¯†åˆ«æ•ˆæœã€‚å­—ç¬¦åˆ†å‰²çš„ä¸»æµæ–¹å¼æœ‰ä¸‰ç§ï¼Œä¸€ç§æ˜¯å±…äºå›¾åƒç‰¹ç§æ¥å¯»æ‰¾åˆ†å‰²çš„å‡†åˆ™ï¼Œè¿™æ˜¯ä»ç»“æ„è§’åº¦è¿›è¡Œåˆ†æåˆ‡å‰²ã€‚å¦ä¸€ç§æ–¹å¼æ˜¯æ ¹æ®è¯†åˆ«æ•ˆæœåé¦ˆæ¥ç¡®è®¤åˆ†å‰²ç»“æœæœ‰æ— é—®é¢˜ï¼Œè¿™ç§æ–¹å¼æ˜¯åŸºäºè¯†åˆ«çš„åˆ‡åˆ†ã€‚è¿˜æœ‰ä¸€ç§æ•´ä½“åˆ‡åˆ†æ–¹å¼ï¼ŒæŠŠå­—ç¬¦ä¸²å½“åšæ•´ä½“ï¼Œç³»ç»Ÿè¿›è¡Œä»¥è¯ä¸ºåŸºç¡€çš„è¯†åˆ«æ¯”å¹¶éå­—è¯†åˆ«ï¼Œä¸€èˆ¬è¿™ä¸€æ–¹å¼è¦æ ¹æ®å…ˆéªŒçŸ¥è¯†æ¥è¿›è¡Œè¾…åŠ©åˆ¤æ–­ã€‚</p>\n<p>åˆ†å‰²æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223134403318.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223134407369.png\"/></p>\n<h2><a id=\"23__60\"></a>2.3 å­—ç¬¦è¯†åˆ«</h2>\n<p>ä¸­æ–‡/æ•°å­—/è‹±æ–‡ è¯†åˆ«ç›®å‰æœ€é«˜æ•ˆçš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨æ·±åº¦å­¦ä¹ ç®—æ³•è¿›è¡Œè¯†åˆ«ã€‚</p>\n<p>å­—ç¬¦è¯†åˆ«å¯¹äºæ·±åº¦å­¦ä¹ å¼€å‘è€…æ¥è¯´æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œè¿™é‡Œå°±ä¸åœ¨å¤è¿°äº†ï¼›</p>\n<p>ç½‘ç»œå¯ä»¥è§†ä¸ºç¼–è§£ç å™¨ç»“æ„,ç¼–ç å™¨ç”±ç‰¹å¾æå–ç½‘ç»œResneXt-50å’ŒåŒå‘é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œ(BiLSTM)æ„æˆ,è§£ç å™¨ç”±åŠ å…¥æ³¨æ„åŠ›æœºåˆ¶çš„é•¿çŸ­æ—¶è®°å¿†ç½‘ç»œ(LSTM)æ„æˆã€‚ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223135145172.png\"/></p>\n<p>ç½‘ç»œè®­ç»ƒæµç¨‹å¦‚ä¸‹ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223135200909.png\"/></p>\n<h3><a id=\"_73\"></a>éƒ¨åˆ†å®ç°ä»£ç </h3>\n<p>è¿™é‡Œå­¦é•¿æä¾›ä¸€ä¸ªç®€å•ç½‘ç»œå­—ç¬¦è¯†åˆ«çš„è®­ç»ƒä»£ç ï¼š<br/> (éœ€è¦å®Œæ•´å·¥ç¨‹åŠä»£ç çš„åŒå­¦è”ç³»å­¦é•¿è·å–)</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> tensorflow <span class=\"token keyword\">as</span> tf\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">from</span> tensorflow<span class=\"token punctuation\">.</span>examples<span class=\"token punctuation\">.</span>tutorials<span class=\"token punctuation\">.</span>mnist <span class=\"token keyword\">import</span> input_data\nmnist <span class=\"token operator\">=</span> input_data<span class=\"token punctuation\">.</span>read_data_sets<span class=\"token punctuation\">(</span><span class=\"token string\">'MNIST_data'</span><span class=\"token punctuation\">,</span> one_hot<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#1ã€å¼€å§‹å»ºç«‹ä¸€ä¸ªå›¾</span>\nsess <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>InteractiveSession<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#å¯åŠ¨ä¸€ä¸ªäº¤äº’ä¼šè¯</span>\nx <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">784</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#xå’Œy_éƒ½ç”¨ä¸€ä¸ªå ä½ç¬¦è¡¨ç¤º</span>\ny_ <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nW <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">784</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#Wå’Œbå› ä¸ºéœ€è¦æ”¹å˜ï¼Œæ‰€ä»¥å®šä¹‰ä¸ºåˆå§‹åŒ–ä¸º0çš„å˜é‡</span>\nb <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#2ã€å»ºç«‹é¢„æµ‹éƒ¨åˆ†çš„æ“ä½œèŠ‚ç‚¹</span>\ny <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>W<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b  <span class=\"token comment\">#è®¡ç®—wx+b</span>\ncross_entropy <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax_cross_entropy_with_logits<span class=\"token punctuation\">(</span>labels<span class=\"token operator\">=</span>y_<span class=\"token punctuation\">,</span> logits<span class=\"token operator\">=</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#è®¡ç®—softmaxäº¤å‰ç†µçš„å‡å€¼</span>\n\n<span class=\"token comment\">#3ã€ç°åœ¨å·²ç»å¾—åˆ°äº†æŸå¤±å‡½æ•°ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯æœ€å°åŒ–è¿™ä¸€æŸå¤±å‡½æ•°ï¼Œè¿™é‡Œç”¨æœ€å¸¸ç”¨çš„æ¢¯åº¦ä¸‹é™åš</span>\n<span class=\"token comment\"># ä¸ºäº†ç”¨åˆ°å‰å‡ èŠ‚è¯´è¿‡çš„å†…å®¹ï¼Œè¿™é‡Œç”¨å­¦ä¹ ç‡éšè®­ç»ƒä¸‹é™çš„æ–¹æ³•æ‰§è¡Œ</span>\nglobal_step <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> trainable <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#å»ºç«‹ä¸€ä¸ªå¯å˜æ•°ï¼Œè€Œä¸”è¿™ä¸ªå˜é‡åœ¨è®¡ç®—æ¢¯åº¦æ—¶å€™ä¸è¢«å½±å“,å…¶å®å°±æ˜¯ä¸ªå…¨å±€å˜é‡</span>\nstart_learning_rate <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token comment\">#è¿™ä¹ˆå†™æ˜¯ä¸ºäº†æ¸…æ¥š</span>\n<span class=\"token comment\">#å¾—åˆ°æ‰€éœ€çš„å­¦ä¹ ç‡ï¼Œå­¦ä¹ ç‡æ¯100ä¸ªstepè¿›è¡Œä¸€æ¬¡å˜åŒ–ï¼Œå…¬å¼ä¸ºdecayed_learning_rate = learning_rate * decay_rate ^(global_step / decay_steps)</span>\nlearning_rate <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>exponential_decay<span class=\"token punctuation\">(</span>start_learning_rate<span class=\"token punctuation\">,</span> global_step<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> staircase<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\ntrain_step <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>GradientDescentOptimizer<span class=\"token punctuation\">(</span>learning_rate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>minimize<span class=\"token punctuation\">(</span>cross_entropy<span class=\"token punctuation\">)</span><span class=\"token comment\">#æ¢¯åº¦ä¸‹é™æœ€å°åŒ–äº¤å‰ç†µ</span>\n<span class=\"token comment\">#è¿™æ˜¯å› ä¸ºåœ¨äº¤äº’çš„Sessionä¸‹å¯ä»¥è¿™æ ·å†™Op.run()ï¼Œè¿˜å¯ä»¥sess.run(tf.global_variables_initializer())</span>\ntf<span class=\"token punctuation\">.</span>global_variables_initializer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#åˆå§‹åŒ–æ‰€æœ‰å˜é‡</span>\n\n<span class=\"token comment\">#iteration = 1000, Batch_Size = 100 </span>\n<span class=\"token keyword\">for</span> _ <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    batch <span class=\"token operator\">=</span> mnist<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>next_batch<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#æ¯æ¬¡é€‰å‡º100ä¸ªæ•°æ®</span>\n    train_step<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>feed_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span>batch<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> y_<span class=\"token punctuation\">:</span> batch<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#ç»™Placeholderå¡«å……æ•°æ®å°±å¯ä»¥äº†</span>\n\ncorrect_prediction <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>equal<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>y<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>y_<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#é¦–å…ˆæ¯”è¾ƒä¸¤ä¸ªç»“æœçš„å·®å¼‚</span>\n<span class=\"token comment\">#è¿™æ—¶çš„correct_predictionåº”è¯¥ç±»ä¼¼[True, False, True, True]ï¼Œç„¶ååªè¦è½¬ä¸ºfloatçš„å½¢å¼å†æ±‚åŠ å’Œå¹³å‡å°±çŸ¥é“å‡†ç¡®ç‡äº†</span>\n<span class=\"token comment\">#è¿™é‡Œçš„castæ˜¯ç”¨äºå½¢å¼è½¬åŒ–</span>\naccuracy <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>cast<span class=\"token punctuation\">(</span>correct_prediction<span class=\"token punctuation\">,</span> dtype<span class=\"token operator\">=</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#æ‰“å°å‡ºæ¥å°±å¯ä»¥äº†ï¼Œæ³¨æ„è¿™ä¸ªæ—¶å€™accuracyä¹Ÿåªæ˜¯ä¸€ä¸ªtensor,è€Œä¸”ä¹Ÿåªæ˜¯ä¸€ä¸ªæ¨¡å‹çš„ä»£è¡¨ï¼Œè¿˜éœ€è¦è¾“å…¥æ•°æ®</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>accuracy<span class=\"token punctuation\">.</span><span class=\"token builtin\">eval</span><span class=\"token punctuation\">(</span>feed_dict<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>images<span class=\"token punctuation\">,</span> y_<span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>labels<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nsess<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#é¦–å…ˆæŠŠè¦é‡å¤ç”¨çš„å®šä¹‰å¥½</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">weight_variable</span><span class=\"token punctuation\">(</span>shape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    initial <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>truncated_normal<span class=\"token punctuation\">(</span>shape<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">,</span> stddev<span class=\"token operator\">=</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>initial<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">bias_variable</span><span class=\"token punctuation\">(</span>shape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    initial <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>constant<span class=\"token punctuation\">(</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span>shape<span class=\"token punctuation\">)</span><span class=\"token comment\">#å¸¸é‡è½¬å˜é‡,</span>\n    <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>Variable<span class=\"token punctuation\">(</span>initial<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">conv2d</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>conv2d<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> f<span class=\"token punctuation\">,</span> strides<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'SAME'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">max_pool_22</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>max_pool<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> ksize<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> strides<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> padding<span class=\"token operator\">=</span><span class=\"token string\">'SAME'</span><span class=\"token punctuation\">)</span>\n\nsess <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>InteractiveSession<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#å¯åŠ¨ä¸€ä¸ªäº¤äº’ä¼šè¯</span>\nx <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">784</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#xå’Œy_éƒ½ç”¨ä¸€ä¸ªå ä½ç¬¦è¡¨ç¤º</span>\ny_ <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">,</span> shape<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nx_image <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">#ç¬¬ä¸€å±‚ï¼š</span>\n<span class=\"token comment\">#1ã€è®¾è®¡å·ç§¯æ ¸1</span>\nfW1 <span class=\"token operator\">=</span> weight_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#[height, weight, in_channel, out_channel]</span>\nfb1 <span class=\"token operator\">=</span> bias_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">32</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#2ã€å·ç§¯åŠ æ± åŒ–</span>\nh1 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>conv2d<span class=\"token punctuation\">(</span>x_image<span class=\"token punctuation\">,</span>fW1<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span> fb1<span class=\"token punctuation\">)</span>\nh1_pool <span class=\"token operator\">=</span> max_pool_22<span class=\"token punctuation\">(</span>h1<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#ç¬¬äºŒå±‚</span>\nfW2 <span class=\"token operator\">=</span> weight_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#[height, weight, in_channel, out_channel]</span>\nfb2 <span class=\"token operator\">=</span> bias_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\nh2 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>conv2d<span class=\"token punctuation\">(</span>h1_pool<span class=\"token punctuation\">,</span>fW2<span class=\"token punctuation\">)</span><span class=\"token operator\">+</span> fb2<span class=\"token punctuation\">)</span>\nh2_pool <span class=\"token operator\">=</span> max_pool_22<span class=\"token punctuation\">(</span>h2<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#å…¨éƒ¨å˜æˆä¸€ç»´å…¨è¿æ¥å±‚ï¼Œè¿™é‡Œå› ä¸ºæ˜¯æŒ‰ç…§å®˜æ–¹èµ°çš„ï¼Œæ‰€ä»¥æ‰‹åŠ¨è®¡ç®—äº†ç»è¿‡ç¬¬äºŒå±‚åçš„å›¾ç‰‡å°ºå¯¸ä¸º7*7</span>\n<span class=\"token comment\">#æ¥å®šä¹‰äº†ä¸€ä¸ªwx+bæ‰€éœ€çš„wå’Œbçš„å°ºå¯¸ï¼Œæ³¨æ„è¿™é‡Œçš„Wå’Œbä¸æ˜¯å·ç§¯æ‰€ç”¨çš„äº†</span>\nh2_pool_flat <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span>h2_pool<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token operator\">*</span><span class=\"token number\">7</span><span class=\"token operator\">*</span><span class=\"token number\">64</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token comment\">#é¦–å…ˆæŠŠæ•°æ®å˜æˆè¡Œè¡¨ç¤º</span>\nW_fc1 <span class=\"token operator\">=</span> weight_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">7</span> <span class=\"token operator\">*</span> <span class=\"token number\">7</span> <span class=\"token operator\">*</span> <span class=\"token number\">64</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nb_fc1 <span class=\"token operator\">=</span> bias_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1024</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nh_fc1 <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>relu<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>h2_pool_flat<span class=\"token punctuation\">,</span> W_fc1<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b_fc1<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#å®šä¹‰dropout,é€‰æ‹©æ€§å¤±æ´»,é¦–å…ˆæŒ‡å®šä¸€ä¸ªå¤±æ´»çš„æ¯”ä¾‹</span>\nprob <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>placeholder<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span>\nh_dropout <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>dropout<span class=\"token punctuation\">(</span>h_fc1<span class=\"token punctuation\">,</span> prob<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#æœ€åä¸€ä¸ªå…¨è¿æ¥å±‚ï¼Œè¾“å‡º10ä¸ªå€¼ï¼Œç”¨äºsoftmax</span>\nW_fc2 <span class=\"token operator\">=</span> weight_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1024</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nb_fc2 <span class=\"token operator\">=</span> bias_variable<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ny_conv <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>matmul<span class=\"token punctuation\">(</span>h_dropout<span class=\"token punctuation\">,</span> W_fc2<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> b_fc2\n\n<span class=\"token comment\">#æ¢¯åº¦æ›´æ–°ï¼Œè¿™é‡Œé‡‡ç”¨å¦ä¸€ç§ä¼˜åŒ–æ–¹å¼AdamOptimizer</span>\ncross_entropy <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>nn<span class=\"token punctuation\">.</span>softmax_cross_entropy_with_logits<span class=\"token punctuation\">(</span>labels<span class=\"token operator\">=</span>y_<span class=\"token punctuation\">,</span> logits<span class=\"token operator\">=</span>y_conv<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ntrain_step <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>AdamOptimizer<span class=\"token punctuation\">(</span><span class=\"token number\">1e-4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>minimize<span class=\"token punctuation\">(</span>cross_entropy<span class=\"token punctuation\">)</span>\ncorrect_prediction <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>equal<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>y_conv<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>argmax<span class=\"token punctuation\">(</span>y_<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\naccuracy <span class=\"token operator\">=</span> tf<span class=\"token punctuation\">.</span>reduce_mean<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>cast<span class=\"token punctuation\">(</span>correct_prediction<span class=\"token punctuation\">,</span> tf<span class=\"token punctuation\">.</span>float32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">#åˆå§‹åŒ–</span>\nsess<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>tf<span class=\"token punctuation\">.</span>global_variables_initializer<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    batch <span class=\"token operator\">=</span> mnist<span class=\"token punctuation\">.</span>train<span class=\"token punctuation\">.</span>next_batch<span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> i<span class=\"token operator\">%</span><span class=\"token number\">100</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n        train_accuracy <span class=\"token operator\">=</span> accuracy<span class=\"token punctuation\">.</span><span class=\"token builtin\">eval</span><span class=\"token punctuation\">(</span>feed_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span>batch<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>y_<span class=\"token punctuation\">:</span>batch<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> prob<span class=\"token punctuation\">:</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#è¿™é‡Œæ˜¯è®¡ç®—accuracyç”¨çš„eval,ä¸æ˜¯åœ¨runä¸€ä¸ªOperation</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"step %d, training accuracy %g\"</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> train_accuracy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    train_step<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>feed_dict<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span> batch<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> y_<span class=\"token punctuation\">:</span> batch<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> prob<span class=\"token punctuation\">:</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test accuracy %g\"</span><span class=\"token operator\">%</span>accuracy<span class=\"token punctuation\">.</span><span class=\"token builtin\">eval</span><span class=\"token punctuation\">(</span>feed_dict<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>x<span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>images<span class=\"token punctuation\">,</span> y_<span class=\"token punctuation\">:</span> mnist<span class=\"token punctuation\">.</span>test<span class=\"token punctuation\">.</span>labels<span class=\"token punctuation\">,</span> prob<span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n</code></pre>\n<h1><a id=\"3__186\"></a>3 å®ç°æ•ˆæœ</h1>\n<p>è½¦ç¥¨å›¾<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223142427325.png\"/><br/> è¯†åˆ«æ•ˆæœï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\20210223142447171.png\"/><br/> <br/></p>\n<p>ğŸ§¿ <strong>é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š</strong></p>\n<p><a href=\"https://blog.csdn.net/Mr_DC_IT/article/details/126460477\">https://blog.csdn.net/Mr_DC_IT/article/details/126460477</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}