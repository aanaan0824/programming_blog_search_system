{"blogid": "124419524", "writerAge": "码龄8年", "writerBlogNum": "12", "writerCollect": "9", "writerComment": "2", "writerFan": "1", "writerGrade": "2级", "writerIntegral": "166", "writerName": "东方雨舞", "writerProfileAdress": "writer_image\\profile_124419524.jpg", "writerRankTotal": "94682", "writerRankWeekly": "268292", "writerThumb": "7", "writerVisitNum": "13456", "blog_read_count": "1482", "blog_time": "于 2022-04-26 09:00:00 发布", "blog_title": "C#base64转换为图片", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>  public string Base64ToImage(string dataURL,string username)<br/>         {<!-- --><br/>             try<br/>             {<!-- --><br/>                 dataURL = dataURL.Replace(\"data:image/png;base64,\", \"\").Replace(\"data:image/jgp;base64,\", \"\").Replace(\"data:image/jpg;base64,\", \"\").Replace(\"data:image/jpeg;base64,\", \"\");//将base64头部信息替换<br/>                 byte[] bytes = Convert.FromBase64String(dataURL);<br/>                 MemoryStream memStream = new MemoryStream(bytes);<br/>                 System.Drawing.Image mImage = System.Drawing.Image.FromStream(memStream);<br/>                <br/>                 Bitmap bp = new Bitmap(mImage);<br/>               <br/>                 string filename = \"/Upload/evaluate/\" + username + \"/\";//所要保存的相对路径及名字<br/>              <br/>                 if (!Directory.Exists(cnt.Server.MapPath(filename)))<br/>                 {<!-- --><br/>                     Directory.CreateDirectory(cnt.Server.MapPath(filename));<br/>                 }<br/>                 filename += DateTime.Now.ToString(\"ddHHmmss\") + \".jpeg\";<br/>                 bp.Save(cnt.Server.MapPath(filename), System.Drawing.Imaging.ImageFormat.Jpeg);//保存到服务器路径<br/>                 bp.Dispose();<br/>                 return filename;//返回相对路径 <br/>             <br/>             }<br/>             catch (Exception e)<br/>             {<!-- --><br/>                return \"\";<br/>             }<br/>         }</p>\n</div>\n</div>"}