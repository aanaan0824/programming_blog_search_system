{"blogid": "125238753", "writerAge": "码龄2年", "writerBlogNum": "10", "writerCollect": "31", "writerComment": "7", "writerFan": "2", "writerGrade": "2级", "writerIntegral": "110", "writerName": "弈枫", "writerProfileAdress": "writer_image\\profile_125238753.jpg", "writerRankTotal": "105840", "writerRankWeekly": "495988", "writerThumb": "2", "writerVisitNum": "4019", "blog_read_count": "859", "blog_time": "已于 2022-07-23 10:21:17 修改", "blog_title": "QTableWidget使用总结", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>QTableWidget使用总结</h3>\n<ul><li><a href=\"#QTableWidget_2\">QTableWidget说明</a></li><li><ul><li><a href=\"#_14\">一、设置表格行列数</a></li><li><a href=\"#_20\">二、设置表头</a></li><li><a href=\"#_32\">三、设置列宽行宽</a></li><li><a href=\"#_38\">四、设置表格内容是否可被编辑</a></li><li><ul><li><a href=\"#1_39\">1、可选属性</a></li><li><a href=\"#2_50\">2、整个表格进行设置</a></li><li><a href=\"#3_56\">3、设置部分单元格编辑模式</a></li></ul>\n</li><li><a href=\"#_71\">五、获取/写入单元格数据</a></li><li><ul><li><a href=\"#1_72\">1、获取单元格数据</a></li><li><a href=\"#2_78\">2、写入单元格数据</a></li></ul>\n</li><li><a href=\"#_85\">六、单元格添加控件-按钮</a></li><li><ul><li><a href=\"#1_87\">1、添加控件</a></li><li><a href=\"#2_94\">2、控件信号槽使用</a></li><li><a href=\"#3_113\">3、删除控件</a></li></ul>\n</li><li><a href=\"#_119\">七、设置单元格输入内容样式</a></li><li><ul><li><a href=\"#1_120\">1、设置字体颜色</a></li><li><a href=\"#2_125\">2、设置字体、大小、粗细</a></li><li><a href=\"#3_130\">3、设置单元格背景色</a></li></ul>\n</li><li><a href=\"#_136\">八、限制表格输入内容</a></li><li><ul><li><a href=\"#1c_139\">1、添加c++文件</a></li><li><a href=\"#2_174\">2、添加头文件</a></li><li><a href=\"#31999_203\">3、函数调用示例：限制输入1-999</a></li></ul>\n</li><li><a href=\"#cellChanged_209\">九、cellChanged信号使用说明</a></li><li><a href=\"#_243\">十、其他常用操作</a></li><li><ul><li><a href=\"#1_244\">1、设置选择模式</a></li><li><a href=\"#2_255\">2、单选、多选设置</a></li><li><a href=\"#3_269\">3、表头显示/隐藏</a></li><li><a href=\"#4_277\">4、合并单元格</a></li><li><a href=\"#5__282\">5、 排序</a></li><li><a href=\"#6__293\">6、 设置某行高亮</a></li><li><a href=\"#7_305\">7、设置隔行换色</a></li></ul>\n</li><li><a href=\"#_311\">十一、参考链接</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"QTableWidget_2\"></a>QTableWidget说明</h1>\n<p>1、QTableWidget 是 Qt 中的表格组件类；</p>\n<p>2、QTableWidget是QTableView的子类，主要的区别是QTableView可以使用自定义的数据模型来显示内容(也就是先要通过setModel来绑定数据源)；</p>\n<p>3、而QTableWidget则只能使用标准的数据模型，并且其单元格数据是QTableWidgetItem的对象来实现的(也就是不需要数据源，将逐个单元格内的信息填好即可)。</p>\n<p>4、主要体现在QTableView类中有setModel成员函数，而到了QTableWidget类中，该成员函数变成了私有。使用QTableWidget就离不开QTableWidgetItem。QTableWidgetItem用来表示表格中的一个单元格，正个表格都需要用逐个单元格构建起来。</p>\n<p>表格组件样式如下<br/> <img alt=\"在这里插入图片描述\" src=\"image\\4c122ccfa1c64a9989bd014c507c8dc4.png\"/></p>\n<h2><a id=\"_14\"></a>一、设置表格行列数</h2>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setRowCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                   <span class=\"token comment\">// 设置表格行数</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setColumnCount</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                 <span class=\"token comment\">// 设置表格列数</span>\n</code></pre>\n<h2><a id=\"_20\"></a>二、设置表头</h2>\n<pre><code class=\"prism language-cpp\">QStringList labelList<span class=\"token punctuation\">;</span>\nlabelList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"设备MAC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlabelList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"流水号-年\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlabelList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"流水号-月\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlabelList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"流水号-批次\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nlabelList<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"流水号-编号\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setHorizontalHeaderLabels</span><span class=\"token punctuation\">(</span>labelList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 设置表头</span>\n</code></pre>\n<h2><a id=\"_32\"></a>三、设置列宽行宽</h2>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setColumnWidth</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">135</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                         <span class=\"token comment\">// 设置第一列 列宽135</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setRowHeight</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\t\t\t<span class=\"token comment\">// 设置第一行 行高20</span>\n</code></pre>\n<h2><a id=\"_38\"></a>四、设置表格内容是否可被编辑</h2>\n<h3><a id=\"1_39\"></a>1、可选属性</h3>\n<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>QAbstractItemView::NoEditTriggers</td><td>不能对表格内容进行修改</td></tr><tr><td>QAbstractItemView::CurrentChanged</td><td>任何时候都能对单元格修改</td></tr><tr><td>QAbstractItemView::DoubleClicked</td><td>双击单元格可修改</td></tr><tr><td>QAbstractItemView::SelectedClicked</td><td>单击已选中的内容修改</td></tr><tr><td>QAbstractItemView::EditKeyPressed</td><td>编辑键放在单元格时修改</td></tr><tr><td>QAbstractItemView::AnyKeyPressed</td><td>按下任意键修改</td></tr><tr><td>QAbstractItemView::AllEditTriggers</td><td>以上全部</td></tr></tbody></table>\n<h3><a id=\"2_50\"></a>2、整个表格进行设置</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setEditTriggers</span><span class=\"token punctuation\">(</span>QAbstractItemView<span class=\"token double-colon punctuation\">::</span>DoubleClicked<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// 设置表格内容双击可编辑</span>\n</code></pre>\n<h3><a id=\"3_56\"></a>3、设置部分单元格编辑模式</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">/* ---------- 列表给定一个初值（否则ui设计师界面创建的表格使用部分函数会崩溃！！！） ---------- */</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">rowCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">columnCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\tQTableWidgetItem <span class=\"token operator\">*</span>item1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">QTableWidgetItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>           \t<span class=\"token comment\">// 新建一个项，写入一个空格</span>\n\t\titem1<span class=\"token operator\">-&gt;</span><span class=\"token function\">setFlags</span><span class=\"token punctuation\">(</span>item1<span class=\"token operator\">-&gt;</span><span class=\"token function\">flags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">~</span>Qt<span class=\"token double-colon punctuation\">::</span>ItemIsEditable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \t<span class=\"token comment\">// 设置可选不可改，当单元格被编辑后要重新设置</span>\n\t\tui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> j<span class=\"token punctuation\">,</span> item1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                      \t<span class=\"token comment\">// 更新到列表对应位置</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"_71\"></a>五、获取/写入单元格数据</h2>\n<h3><a id=\"1_72\"></a>1、获取单元格数据</h3>\n<pre><code class=\"prism language-cpp\">QString str <span class=\"token operator\">=</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   \t\t\t<span class=\"token comment\">// 取出字符串\t列表第1行 第1列</span>\n</code></pre>\n<h3><a id=\"2_78\"></a>2、写入单元格数据</h3>\n<pre><code class=\"prism language-cpp\">QTableWidgetItem <span class=\"token operator\">*</span>itemStatus <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">QTableWidgetItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"待测试\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>         \t<span class=\"token comment\">// 新建一个项</span>\nitemStatus<span class=\"token operator\">-&gt;</span><span class=\"token function\">setFlags</span><span class=\"token punctuation\">(</span>itemStatus<span class=\"token operator\">-&gt;</span><span class=\"token function\">flags</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">~</span>Qt<span class=\"token double-colon punctuation\">::</span>ItemIsEditable<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    \t<span class=\"token comment\">// 设置可选不可改</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> itemStatus<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                      \t\t<span class=\"token comment\">// 更新到列表第1行 第1列</span>\n</code></pre>\n<h2><a id=\"_85\"></a>六、单元格添加控件-按钮</h2>\n<h3><a id=\"1_87\"></a>1、添加控件</h3>\n<pre><code class=\"prism language-cpp\">QPushButton <span class=\"token operator\">*</span>linkBtn <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> QPushButton<span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">// 创建按钮</span>\nlinkBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span><span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"连接设备\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\t<span class=\"token comment\">// 设置按钮名称</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setCellWidget</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> linkBtn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t<span class=\"token comment\">// 更新到列表 第1行 第1列</span>\n</code></pre>\n<h3><a id=\"2_94\"></a>2、控件信号槽使用</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">/* --------------- 对应按钮的槽函数 --------------- */</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>linkBtn<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>QPushButton<span class=\"token double-colon punctuation\">::</span>clicked<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">=</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token function\">qDebug</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"点击按键连接\"</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// 获取按钮所在行 列</span>\n\tQModelIndex qIndex <span class=\"token operator\">=</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">indexAt</span><span class=\"token punctuation\">(</span><span class=\"token function\">QPoint</span><span class=\"token punctuation\">(</span>linkBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">frameGeometry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">x</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> linkBtn<span class=\"token operator\">-&gt;</span><span class=\"token function\">frameGeometry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">y</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token comment\">// 获取当前按钮所在的行和列</span>\n\t<span class=\"token keyword\">int</span> row <span class=\"token operator\">=</span> qIndex<span class=\"token punctuation\">.</span><span class=\"token function\">row</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> column <span class=\"token operator\">=</span> qIndex<span class=\"token punctuation\">.</span><span class=\"token function\">column</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token function\">qDebug</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"行：\"</span> <span class=\"token operator\">&lt;&lt;</span> row <span class=\"token operator\">&lt;&lt;</span> <span class=\"token string\">\"列：\"</span> <span class=\"token operator\">&lt;&lt;</span> column<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"3_113\"></a>3、删除控件</h3>\n<p>注意同一个单元格不能重复添加，不然会崩溃</p>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">removeCellWidget</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 删除控件 第1行 第1列</span>\n</code></pre>\n<h2><a id=\"_119\"></a>七、设置单元格输入内容样式</h2>\n<h3><a id=\"1_120\"></a>1、设置字体颜色</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setTextColor</span><span class=\"token punctuation\">(</span><span class=\"token function\">QColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">220</span><span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 设置字体颜色</span>\n</code></pre>\n<h3><a id=\"2_125\"></a>2、设置字体、大小、粗细</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>itemH<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setFont</span><span class=\"token punctuation\">(</span> <span class=\"token function\">QFont</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"宋体\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span> QFont<span class=\"token double-colon punctuation\">::</span>Black <span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 设置宋体、11号、加粗</span>\n</code></pre>\n<h3><a id=\"3_130\"></a>3、设置单元格背景色</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>itemH<span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setBackgroundColor</span><span class=\"token punctuation\">(</span><span class=\"token function\">QColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">60</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//设置单元格背景颜色</span>\n</code></pre>\n<h2><a id=\"_136\"></a>八、限制表格输入内容</h2>\n<p>该方式是在网上查找的方法，可以不添加控件使用正则表达式，使用时需要新建一个c++类，c文件和h文件如下</p>\n<h3><a id=\"1c_139\"></a>1、添加c++文件</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"customitemdelegrate.h\"</span></span>\n\n<span class=\"token class-name\">CustomItemDelegrate</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">CustomItemDelegrate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QRegExp<span class=\"token operator\">&amp;</span> regExp<span class=\"token punctuation\">,</span>QObject<span class=\"token operator\">*</span> parent<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">QStyledItemDelegate</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    m_regExp <span class=\"token operator\">=</span> regExp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nQWidget<span class=\"token operator\">*</span> <span class=\"token class-name\">CustomItemDelegrate</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">createEditor</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> parent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QStyleOptionViewItem<span class=\"token operator\">&amp;</span> option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//创建带有正则表达式的输入框</span>\n    <span class=\"token function\">Q_UNUSED</span><span class=\"token punctuation\">(</span>option<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">Q_UNUSED</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    QLineEdit<span class=\"token operator\">*</span> editor <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token function\">QLineEdit</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    editor<span class=\"token operator\">-&gt;</span><span class=\"token function\">setValidator</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token function\">QRegExpValidator</span><span class=\"token punctuation\">(</span>m_regExp<span class=\"token punctuation\">,</span> parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> editor<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">CustomItemDelegrate</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">setEditorData</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> editor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QString text <span class=\"token operator\">=</span> index<span class=\"token punctuation\">.</span><span class=\"token function\">model</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">data</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> Qt<span class=\"token double-colon punctuation\">::</span>EditRole<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    QLineEdit<span class=\"token operator\">*</span> lineEdit <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">qobject_cast</span> <span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>QLineEdit<span class=\"token operator\">*</span><span class=\"token operator\">&gt;</span></span></span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    lineEdit<span class=\"token operator\">-&gt;</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">CustomItemDelegrate</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">setModelData</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> editor<span class=\"token punctuation\">,</span> QAbstractItemModel<span class=\"token operator\">*</span> model<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span>\n<span class=\"token punctuation\">{<!-- --></span>\n    QLineEdit<span class=\"token operator\">*</span> lineEdit <span class=\"token operator\">=</span>  <span class=\"token generic-function\"><span class=\"token function\">qobject_cast</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>QLineEdit<span class=\"token operator\">*</span><span class=\"token operator\">&gt;</span></span></span><span class=\"token punctuation\">(</span>editor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    QString text <span class=\"token operator\">=</span> lineEdit<span class=\"token operator\">-&gt;</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    model<span class=\"token operator\">-&gt;</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> text<span class=\"token punctuation\">,</span> Qt<span class=\"token double-colon punctuation\">::</span>EditRole<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"2_174\"></a>2、添加头文件</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">CUSTOMITEMDELEGRATE_H</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">CUSTOMITEMDELEGRATE_H</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QWidget&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QStyledItemDelegate&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QLineEdit&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;QRegExp&gt;</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CustomItemDelegrate</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">QStyledItemDelegate</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    Q_OBJECT\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">CustomItemDelegrate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> QRegExp<span class=\"token operator\">&amp;</span> regExp<span class=\"token punctuation\">,</span> QObject<span class=\"token operator\">*</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">nullptr</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">~</span><span class=\"token function\">CustomItemDelegrate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    QWidget <span class=\"token operator\">*</span><span class=\"token function\">createEditor</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> parent<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QStyleOptionViewItem<span class=\"token operator\">&amp;</span> option<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index <span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">setEditorData</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> editor<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index <span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">setModelData</span><span class=\"token punctuation\">(</span>QWidget<span class=\"token operator\">*</span> editor<span class=\"token punctuation\">,</span> QAbstractItemModel<span class=\"token operator\">*</span> model<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> QModelIndex<span class=\"token operator\">&amp;</span> index <span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    QRegExp m_regExp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span> <span class=\"token comment\">// CUSTOMITEMDELEGRATE_H</span></span>\n</code></pre>\n<h3><a id=\"31999_203\"></a>3、函数调用示例：限制输入1-999</h3>\n<pre><code class=\"prism language-cpp\">QRegExp <span class=\"token function\">regExpNumh</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"^([1-9]|[1-9][0-9]|[1-9][0-9][0-9])$\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                         <span class=\"token comment\">// 批次正则表达式</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setItemDelegateForColumn</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token function\">CustomItemDelegrate</span><span class=\"token punctuation\">(</span>regExpNumh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \t<span class=\"token comment\">// 设置第4列限制输入</span>\n</code></pre>\n<h2><a id=\"cellChanged_209\"></a>九、cellChanged信号使用说明</h2>\n<p>当单元格内容更新时触发该信号，但是任何对单元格的操作都会触发，因此使用时需要注意，设置信号阻塞或是在必要时断开信号槽</p>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">/* ---------- 每个列表数据有更新时触发，更新数据格式 ---------- */</span>\n<span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>QTableWidget<span class=\"token double-colon punctuation\">::</span>cellChanged<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">=</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{<!-- --></span>\n\tui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">blockSignals</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 进入阻塞模式，必须要加，否则槽函数中对单元格进行设置会出错</span>\n\t\n\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">rowCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> j <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">columnCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t\tui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span>j<span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setTextAlignment</span><span class=\"token punctuation\">(</span>Qt<span class=\"token double-colon punctuation\">::</span>AlignHCenter <span class=\"token operator\">|</span> Qt<span class=\"token double-colon punctuation\">::</span>AlignVCenter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// 设置单元格数据居中</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\n\t\t<span class=\"token comment\">/* ---------- 设置批号固定为3位 ---------- */</span>\n\t\tQString str2 <span class=\"token operator\">=</span> ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// 取出字符串</span>\n\t\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>str <span class=\"token operator\">&gt;</span> <span class=\"token string\">\"0\"</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t\tQString str3 <span class=\"token operator\">=</span> <span class=\"token function\">QString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"%1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span>str2<span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token function\">QLatin1Char</span><span class=\"token punctuation\">(</span><span class=\"token char\">'0'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 字符串前面补零到3位数</span>\n\t\t\tui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>str3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\t\t<span class=\"token comment\">// 更新到列表</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t\n\tui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">blockSignals</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// 退出阻塞模式，必须要加，否则槽函数中对单元格进行设置会出错</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>必要时断开信号槽（可能有更好的办法避免崩溃，这是目前我掌握的一种最无脑的方法）</p>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token function\">SIGNAL</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">QTableWidget</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">cellChanged</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 断开信号槽</span>\n</code></pre>\n<h2><a id=\"_243\"></a>十、其他常用操作</h2>\n<h3><a id=\"1_244\"></a>1、设置选择模式</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSelectionBehavior</span><span class=\"token punctuation\">(</span>QAbstractItemView<span class=\"token double-colon punctuation\">::</span>SelectRows<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//整行选中的方式</span>\n</code></pre>\n<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>QAbstractItemView::SelectItems</td><td>选中单个单元格</td></tr><tr><td>QAbstractItemView::SelectRows</td><td>选中一行</td></tr><tr><td>QAbstractItemView::SelectColumns</td><td>选中一列</td></tr></tbody></table>\n<h3><a id=\"2_255\"></a>2、单选、多选设置</h3>\n<p>主要功能是正常情况下是单选，但按下Ctrl或Shift键后，可以多选</p>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSelectionMode</span><span class=\"token punctuation\">(</span>QAbstractItemView<span class=\"token double-colon punctuation\">::</span>ExtendedSelection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//设置为可以选中多个目标</span>\n</code></pre>\n<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>QAbstractItemView::SingleSelection</td><td>只能单个选择</td></tr><tr><td>QAbstractItemView::ContiguousSelection</td><td>点选或按shift多选</td></tr><tr><td>QAbstractItemView::ExtendedSelection</td><td>点选或按shift多选，同时可以ctrl点选添加或取消选择</td></tr><tr><td>QAbstractItemView::MultiSelection</td><td>鼠标点击拖拽方式多选</td></tr><tr><td>QAbstractItemView::NoSelection</td><td>不可被选中</td></tr></tbody></table>\n<h3><a id=\"3_269\"></a>3、表头显示/隐藏</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">// 对于水平或垂直方法的表头，可以用以下方式进行 隐藏/显示 的设置：</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">verticalHeader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">//隐藏列表头</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">horizontalHeader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//隐藏行表头</span>\n<span class=\"token comment\">// 注意：需要 #include &lt;QHeaderView&gt;</span>\n</code></pre>\n<h3><a id=\"4_277\"></a>4、合并单元格</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSpan</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// 其参数为： 要改变单元格的   1行数  2列数     要合并的  3行数  4列数</span>\n</code></pre>\n<h3><a id=\"5__282\"></a>5、 排序</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSortingEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \t<span class=\"token comment\">// 运行排序</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">sortItems</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> Qt<span class=\"token double-colon punctuation\">::</span>DescendingOrder<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">// 对 0 列排序, 默认升序，注意是对数值排序还是字符串排序</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSortingEnabled</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  \t<span class=\"token comment\">// 关闭排序</span>\n\n<span class=\"token comment\">// 写入数值</span>\n<span class=\"token keyword\">int8_t</span> rssi <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">60</span><span class=\"token punctuation\">;</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">item</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-&gt;</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span>Qt<span class=\"token double-colon punctuation\">::</span>DisplayRole<span class=\"token punctuation\">,</span>rssi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"6__293\"></a>6、 设置某行高亮</h3>\n<pre><code class=\"prism language-cpp\"><span class=\"token comment\">//设定选择行为，按行选择</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setSelectionBehavior</span><span class=\"token punctuation\">(</span>QAbstractItemView<span class=\"token double-colon punctuation\">::</span>SelectRows<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//设置选中行的背景色，必须要显示设置，即代码设置或者在ui文件的控件中设置，用系统默认的是无法代码选中高亮某行</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStyleSheet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"selection-background-color:rgb(220,20,60)\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">//设置要选中高亮的行，这里会触发QTableWidget::itemClicked的信号</span>\nui<span class=\"token operator\">-&gt;</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">selectRow</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//具体行号</span>\n</code></pre>\n<h3><a id=\"7_305\"></a>7、设置隔行换色</h3>\n<pre><code class=\"prism language-cpp\">ui<span class=\"token punctuation\">.</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setAlternatingRowColors</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nui<span class=\"token punctuation\">.</span>tableWidget<span class=\"token operator\">-&gt;</span><span class=\"token function\">setStyleSheet</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"QTableView{background-color: rgb(250, 250, 115);\"</span><span class=\"token string\">\"alternate-background-color: rgb(50, 110, 255);}\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h2><a id=\"_311\"></a>十一、参考链接</h2>\n<p>链接1: <a href=\"https://blog.csdn.net/iflyme/article/details/101375191\">QT(7)_数据表格 QTableWidget 新手学习总结</a><br/> 链接2: <a href=\"https://blog.csdn.net/camouflagerainy/article/details/124951900\">QTableWidget使用数据改变信号量cellChange发生死循环</a><br/> 链接3: <a href=\"https://blog.csdn.net/sazass/article/details/114067748\">QTableWidget可编辑设置，设置部分可编辑</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}