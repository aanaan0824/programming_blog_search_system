{"blogid": "124866201", "writerAge": "码龄6年", "writerBlogNum": "26", "writerCollect": "86", "writerComment": "26", "writerFan": "10", "writerGrade": "4级", "writerIntegral": "1085", "writerName": "AleneFv", "writerProfileAdress": "writer_image\\profile_124866201.jpg", "writerRankTotal": "42487", "writerRankWeekly": "76540", "writerThumb": "34", "writerVisitNum": "162781", "blog_read_count": "1706", "blog_time": "已于 2022-05-19 18:21:20 修改", "blog_title": "docker如何一键部署php项目教程", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>docker 部署php项目步骤：<br/> 1.docker 安装php docker pull php:5.6-fpm<br/> 2.启动php <br/> docker run -d -v /root/nginx/www:/var/www/html -p 9000:9000 --name ryx_php php:5.6-fpm<br/> 说明：<br/> -d 让容器在后台运行<br/> -p 添加主机到容器的端口映射<br/> -v /root/nginx/www（服务器目录）:/var/www/html（docker挂载目录）<br/> –name ryx_phpfpm : 将容器命名为 ryx_phpfpm</p>\n<p>3.服务器创建配置目录<br/> mkdir ~/nginx/conf/conf.d <br/> 4.新增配置文件<br/> vim ~/nginx/conf/conf.d/runoob-test-php.conf </p>\n<p>server {<!-- --><br/> listen       80;<br/> server_name  localhost;</p>\n<p>location / {<!-- --><br/> root   /usr/share/nginx/html;<br/> index  index.php  index.html index.htm;<br/> }</p>\n<p>error_page   500 502 503 504  /50x.html;<br/> location = /50x.html {<!-- --><br/> root   /usr/share/nginx/html;<br/> }</p>\n<p>location ~ \\.php$ {<!-- --><br/> fastcgi_pass   php:9000;<br/> fastcgi_index  index.php;<br/> fastcgi_param  SCRIPT_FILENAME  /var/www/html/$fastcgi_script_name;<br/> include        fastcgi_params;<br/> }<br/> }</p>\n<p>5.启动nginx（docker pull nginx 不解释）<br/> docker run --name ryx_ngixn -p 8099:80 -d -v /root/nginx/www:/usr/share/nginx/html:ro -v /root/nginx/conf/conf.d:/etc/nginx/conf.d:ro --link ryx_php:php nginx</p>\n<p>说明：<br/> -p 8099:80: 端口映射，把 nginx 中的 80 映射到本地的 8099 端口。<br/> ~/nginx/www: 是本地 html 文件的存储目录，/usr/share/nginx/html 是容器内 html 文件的存储目录。<br/> ~/nginx/conf/conf.d: 是本地 nginx 配置文件的存储目录，/etc/nginx/conf.d 是容器内 nginx 配置文件的存储目录。<br/> --link ryx_php:php: 把 ryx_php 的网络并入 nginx，并通过修改 nginx 的 /etc/hosts，把域名 php 映射成 127.0.0.1，让 nginx 通过 php:9000 访问 php-fpm。</p>\n<p>6.在/root/nginx/www目录新增index.php<br/> &lt;?php<br/> echo phpinfo();<br/> ?&gt;</p>\n<p>// 测试页面<br/> 7.直接访问http://192.168.1.59:8099/index.php</p>\n<p><br/> 进入docker php<br/> docker exec -it php /bin/bash<br/> cd /usr/local/bin<br/> #安装mysql插件<br/> ./docker-php-ext-install mysqli</p>\n<p>#安装redis<br/> curl -L -o /tmp/redis.tar.gz https://github.com/phpredis/phpredis/archive/3.1.3.tar.gz<br/> tar xfz /tmp/redis.tar.gz<br/> rm -r /tmp/redis.tar.gz</p>\n<p>mkdir -p /usr/src/php/ext<br/> docker cp /tmp/phpredis-3.1.3/ ryx_php:/usr/src/php/ext/redis</p>\n<p>docker-php-ext-install redis</p>\n<p>最终项目效果<br/> http://192.168.1.59:8099/LaiKeAdmin/index.php</p>\n<p><img alt=\"\" height=\"1200\" src=\"image\\04ea09cfd51b49d89b9806f7eadce6e2.png\" width=\"1200\"/></p>\n<p><br/>  </p>\n</div>\n</div>"}