{"blogid": "126711481", "writerAge": "码龄1年", "writerBlogNum": "335", "writerCollect": "2178", "writerComment": "205", "writerFan": "847", "writerGrade": "5级", "writerIntegral": "4473", "writerName": "小熊猫爱恰饭", "writerProfileAdress": "writer_image\\profile_126711481.jpg", "writerRankTotal": "3894", "writerRankWeekly": "81", "writerThumb": "517", "writerVisitNum": "201611", "blog_read_count": "931", "blog_time": "于 2022-09-05 19:04:12 发布", "blog_title": "Python舔狗日记学习手册【可能是第一期】", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"__0\"></a>嗨害大家好鸭！ 我是小熊猫❤</h1>\n<h2><a id=\"_2\"></a>咱今天来整点不一样的~</h2>\n<p><img alt=\"请添加图片描述\" src=\"image\\e8839e31f81d44cbb5053cad33521fb3.jpeg\"/><br/> 现在短视频主播好看的妹子太多了，</p>\n<p>有时候遇到自己喜欢的，虽然点了赞或者收藏了，</p>\n<p>但是万一主播把视频隐藏下架了呢？</p>\n<p>所以今天咱们就用Python来把这些好看的视频统统保存下来…</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\dd86d99137b142e5b3bb1fa2354e9b6d.jpeg\"/></p>\n<h2><a id=\"_15\"></a>涉及知识点</h2>\n<ol><li>动态数据抓包演示</li><li>json数据解析方法</li><li>视频数据保存</li></ol>\n<h2><a id=\"_21\"></a>环境介绍</h2>\n<ul><li>python 3.6</li><li>pycharm</li><li>requests</li></ul>\n<h2><a id=\"_27\"></a>案例实现步骤</h2>\n<ol><li>找数据对应的地址(url)请求</li><li>发送请求</li><li>数据的解析</li><li>数据保存</li></ol>\n<hr/>\n<p><img alt=\"请添加图片描述\" src=\"image\\7649ed9391b54571883ffce678c9d300.jpeg\"/></p>\n<h2><a id=\"_39\"></a>案例流程</h2>\n<p><strong>使用的模块</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> requests  <span class=\"token comment\"># 第三方模块</span>\n<span class=\"token keyword\">import</span> pprint  <span class=\"token comment\"># 格式化输出模块</span>\n<span class=\"token keyword\">import</span> re   <span class=\"token comment\"># 正则</span>\n</code></pre>\n<p>只有requests是第三方模块，需要手动安装一下，pip install requests .</p>\n<p><strong>替换非法字符</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">change_title</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"替换非法字符\"\"\"</span>\n    pattern <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span><span class=\"token builtin\">compile</span><span class=\"token punctuation\">(</span><span class=\"token string\">r'[\\\\\\/\\:\\*\\?\\\"\\&lt;\\&gt;\\|]'</span><span class=\"token punctuation\">)</span>\n    new_title <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">,</span> <span class=\"token string\">'_'</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> new_title\n</code></pre>\n<p><strong>找数据对应的地址(url)请求</strong></p>\n<pre><code class=\"prism language-python\">url <span class=\"token operator\">=</span> <span class=\"token string\">'https://平台原因不让打.com/home/tinyvideosv2'</span>\nheaders <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">'user-agent'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36'</span><span class=\"token punctuation\">}</span>\n\nparams <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token string\">'data'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'{\"uid\":0,\"page\":1,\"pageSize\":10}'</span>\n</code></pre>\n<p><strong>发送请求</strong></p>\n<pre><code class=\"prism language-python\">response <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token operator\">=</span>url<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">,</span> params<span class=\"token operator\">=</span>params<span class=\"token punctuation\">)</span>\njson_data <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span>json<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><strong>数据的解析</strong></p>\n<pre><code class=\"prism language-python\">data_list <span class=\"token operator\">=</span> json_data<span class=\"token punctuation\">[</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> data <span class=\"token keyword\">in</span> data_list<span class=\"token punctuation\">:</span>\n    video_title <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token string\">'.mp4'</span>  \n    video_url <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'resurl'</span><span class=\"token punctuation\">]</span>  \n\n    video_data <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>url<span class=\"token operator\">=</span>video_url<span class=\"token punctuation\">,</span> headers<span class=\"token operator\">=</span>headers<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content\n\n    new_title <span class=\"token operator\">=</span> change_title<span class=\"token punctuation\">(</span>video_title<span class=\"token punctuation\">)</span>\n</code></pre>\n<p><strong>数据保存</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'video\\\\'</span> <span class=\"token operator\">+</span> new_title<span class=\"token punctuation\">,</span> mode<span class=\"token operator\">=</span><span class=\"token string\">'wb'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> f<span class=\"token punctuation\">:</span>\n    f<span class=\"token punctuation\">.</span>write<span class=\"token punctuation\">(</span>video_data<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'保存完成:'</span><span class=\"token punctuation\">,</span> video_title<span class=\"token punctuation\">)</span>\n</code></pre>\n<hr/>\n<p><img alt=\"请添加图片描述\" src=\"image\\552c88d9dbf649a0bef8f7fa6289d7fb.jpeg\"/></p>\n<h2><a id=\"_93\"></a>效果展示</h2>\n<p><strong>单页下载</strong>(天哪我不敢相信这谁给我下的？！)</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\a993d6d3e74d442da9073a50122179c1.png\"/><br/> <img alt=\"请添加图片描述\" src=\"image\\ebf2f3828801410881e21da8168e52f6.png\"/></p>\n<p><strong>多页下载</strong>(纯演示嗷 演示完之后我就删掉了)</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\c855a22b923746e8a78510b0282d24e1.png\"/><br/> <img alt=\"请添加图片描述\" src=\"image\\a49e57ff2b2a4d7bb895f7c8e3786ae3.png\"/><br/> 好了兄弟们，今天的分享就到这里喽！</p>\n<blockquote>\n<p><mark><strong>完整源码及多页爬取源码下方名片获取。</strong></mark></p>\n</blockquote>\n<h1><a id=\"_112\"></a>我是小熊猫，咱下篇文章再见啦(✿◡‿◡)</h1>\n<p><img alt=\"请添加图片描述\" src=\"image\\c4097654c63b4bdcbdd3ec9ed2e9dbf0.jpeg\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}