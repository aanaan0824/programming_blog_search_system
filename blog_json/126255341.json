{"blogid": "126255341", "writerAge": "ç é¾„12å¹´", "writerBlogNum": "74", "writerCollect": "198", "writerComment": "368", "writerFan": "1119", "writerGrade": "5çº§", "writerIntegral": "1718", "writerName": "å…­æœˆæš´é›ªé£æ¢¨èŠ±", "writerProfileAdress": "writer_image\\profile_126255341.jpg", "writerRankTotal": "11083", "writerRankWeekly": "208", "writerThumb": "204", "writerVisitNum": "43803", "blog_read_count": "624", "blog_time": "å·²äºÂ 2022-08-09 22:58:12Â ä¿®æ”¹", "blog_title": "æŠ€æœ¯å­¦ä¹ ï¼šPythonï¼ˆ09ï¼‰ï½œæ“ä½œMongoDB", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>æ´»åŠ¨åœ°å€ï¼š<a href=\"https://marketing.csdn.net/p/bdabfb52c5d56532133df2adc1a728fd\">CSDN21å¤©å­¦ä¹ æŒ‘æˆ˜èµ›</a></p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\277ec21e4fe343848efa16f887dc8143.png\"/></p>\n<blockquote>\n<p>ä¸Šä¸€ç¯‡ï¼Œæˆ‘å­¦ä¹ äº†<code>Python</code>ä½¿ç”¨<code>PyMySQL</code>æ¥è¿æ¥<code>MySQLæ•°æ®åº“</code>ï¼Œå­¦äº†å¦‚ä½•ä¸‹è½½ã€å®‰è£…ã€ä½¿ç”¨ä¾èµ–åº“ï¼Œä¸Šä¸€ç¯‡çš„<a href=\"http://t.csdn.cn/W439V\">ğŸ”—Pythonæ“ä½œMySQL</a>ä¸»è¦æ˜¯è¿æ¥å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œåœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨mondoDBçš„é¢‘ç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚åº”è¿è€Œç”Ÿï¼Œå­¦ä¹ è¿™ä¸€ç¯‡ä¸»è¦ä¹Ÿæ˜¯ç›¸å½“é‡è¦ï¼Œå› ä¸ºä½¿ç”¨è¿™äº›æ•°æ®åº“çš„é¢‘ç‡æ¯”è¾ƒé«˜ã€é€‚ç”¨åœºæ™¯æ¯”è¾ƒå¹¿æ³›ã€‚</p>\n<blockquote>\n<p>MongoDBæ˜¯ä¸ºå¿«é€Ÿå¼€å‘äº’è”ç½‘Webåº”ç”¨è€Œè®¾è®¡çš„æ•°æ®åº“ç³»ç»Ÿã€‚MongoDBçš„è®¾è®¸ç›®æ ‡æ˜¯æç®€ã€çµæ´»ã€ä½œä¸ºWebåº”ç”¨æ ˆçš„ä¸€éƒ¨åˆ†ã€‚MongoDBçš„æ•°æ®æ¨¡å‹æ˜¯é¢å‘æ–‡æ¡£çš„ï¼Œæ‰€è°“æ–‡æ¡£æ˜¯ä¸€ç§ç±»ä¼¼äºJSONçš„ç»“æ„ï¼Œç®€å•ç†è§£MongoDBè¿™ä¸ªæ•°æ®åº“ä¸­å­˜çš„æ˜¯å„ç§å„æ ·çš„JSONã€‚</p>\n</blockquote>\n</blockquote>\n<h1><a id=\"1_pipPyMongo_9\"></a>ğŸ®1 ä½¿ç”¨pipå®‰è£…PyMongo</h1>\n<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†å¦‚ä½•åœ¨Macç¯å¢ƒä¸‹å®‰è£…PyMySQLï¼Œè¿™ä¸€æ¬¡åŒæ ·å¯ä»¥ä½¿ç”¨<code>pip</code>è¿™ä¸ªå·¥å…·å®‰è£…mongoDBã€‚</p>\n<p>å¦‚ä½•å®‰è£…å¼€å‘åº“é©±åŠ¨ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„æ–¹å¼ï¼š<a href=\"https://www.mongodb.com/docs/drivers/?_ga=2.156034302.470735255.1660048923-277170845.1660048923\">å¼€å§‹ä½¿ç”¨MongoDBå¼€å§‹</a></p>\n<p>å…·ä½“çš„å¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„æ–‡æ¡£ï¼š<a href=\"https://www.mongodb.com/docs/drivers/pymongo/\">Pythonè¿æ¥MongoDBçš„é©±åŠ¨PyMongo</a></p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\379ec7b0de9d4addb36dee699d4f989c.png\"/></p>\n<pre><code class=\"prism language-shell\"><span class=\"token comment\"># å®‰è£…é©±åŠ¨å™¨</span>\nAion.Liu $ pip <span class=\"token function\">install</span> pymongo\nCollecting pymongo\n  Downloading pymongo-4.2.0-cp310-cp310-macosx_10_9_universal2.whl <span class=\"token punctuation\">(</span><span class=\"token number\">373</span> kB<span class=\"token punctuation\">)</span>\n     â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” <span class=\"token number\">373.4</span>/373.4 kB <span class=\"token number\">20.1</span> kB/s eta <span class=\"token number\">0</span>:00:00\nInstalling collected packages: pymongo\nSuccessfully installed pymongo-4.2.0\n\n<span class=\"token comment\"># æŸ¥çœ‹å·²ç»å®‰è£…çš„ä¾èµ–åº“ä»¥åŠç‰ˆæœ¬</span>\nAion.Liu $ pip list\nPackage    Version\n---------- -------\nmeson      <span class=\"token number\">0.63</span>.0\npip        <span class=\"token number\">22.2</span>.2\nprotobuf   <span class=\"token number\">4.21</span>.4\n<span class=\"token comment\"># å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å·²ç»æˆåŠŸå®‰è£…äº†4.2.0ç‰ˆæœ¬çš„PyMongoé©±åŠ¨å™¨</span>\npymongo    <span class=\"token number\">4.2</span>.0\nPyMySQL    <span class=\"token number\">1.0</span>.2\nsetuptools <span class=\"token number\">63.2</span>.0\nxmltodict  <span class=\"token number\">0.13</span>.0\n</code></pre>\n<p>å½“ç„¶ï¼Œå¦‚æœæœåŠ¡å™¨æˆ–è€…æœ¬åœ°å®éªŒç¯å¢ƒçš„ç‰ˆæœ¬åŒå®‰è£…çš„é©±åŠ¨å™¨ä¸åœ¨åŒä¸€ä¸ªå…¼å®¹ç‰ˆæœ¬åŒºé—´å†…ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å‚è€ƒæ˜¯å¦ä¸€è‡´ã€‚å®˜æ–¹æä¾›çš„å…¼å®¹ç‰ˆæœ¬ï¼š<a href=\"https://www.mongodb.com/docs/drivers/pymongo/#compatibility\">https://www.mongodb.com/docs/drivers/pymongo/#compatibility</a></p>\n<h1><a id=\"_2_pythonPyMongoMongoDB_44\"></a>ğŸ® 2 pythonä½¿ç”¨PyMongoæ“ä½œMongoDB</h1>\n<h2><a id=\"_21__45\"></a>ğŸˆ 2.1 è¿æ¥æ•°æ®åº“</h2>\n<p>é¦–å…ˆæˆ‘ä»¬å°†è¿æ¥æ•°æ®åº“çš„ä»£ç å†™å…¥åˆ°ä¸€ä¸ª<code>c09.py</code>çš„æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼š</p>\n<pre><code class=\"prism language-python3\"><span class=\"token keyword\">from</span> pymongo <span class=\"token keyword\">import</span> MongoClient\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">mongodb_init01</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># m1</span>\n    client <span class=\"token operator\">=</span> MongoClient<span class=\"token punctuation\">(</span>host<span class=\"token operator\">=</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> port<span class=\"token operator\">=</span><span class=\"token number\">27017</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">mongodb_init02</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># m2</span>\n    uri <span class=\"token operator\">=</span> <span class=\"token string\">\"mongodb://{}:{}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'127.0.0.1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">27017</span><span class=\"token punctuation\">)</span>\n    client <span class=\"token operator\">=</span> MongoClient<span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>client<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    mongodb_init01<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    mongodb_init02<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>è¿æ¥åï¼Œè¾“å‡ºè¿æ¥ä¿¡æ¯å†…å®¹ï¼š</p>\n<pre><code># æ‰§è¡Œå‘½ä»¤\nAion.Liu $ python c09.py\nMongoClient(host=['127.0.0.1:27017'], document_class=dict, tz_aware=False, connect=True)\nMongoClient(host=['127.0.0.1:27017'], document_class=dict, tz_aware=False, connect=True)\n</code></pre>\n<h2><a id=\"_22_INSERT_ONE_75\"></a>ğŸˆ 2.2 æ“ä½œæ•°æ®|<code>INSERT_ONE</code></h2>\n<p>æˆ‘ä»¬åœ¨2.1çš„åŸºç¡€ä¸Šï¼Œåˆ›å»ºä¸€ä¸ª<code>python_study</code>æ•°æ®åº“</p>\n<pre><code>&gt;&gt;&gt; python_study = client.python_study\n</code></pre>\n<p>åœ¨æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªé›†åˆ<code>users</code>ï¼Œå¹¶æ’å…¥ä¸€æ¡æ•°æ®ã€‚</p>\n<pre><code class=\"prism language-python3\"><span class=\"token comment\"># åˆ›å»ºé›†åˆå¹¶æ’å…¥ä¸€æ¡æ•°æ®</span>\n<span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span> user <span class=\"token operator\">=</span> python_study<span class=\"token punctuation\">.</span>users<span class=\"token punctuation\">.</span>insert_one<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">\"name\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">\"Aion.Liu\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"age\"</span> <span class=\"token punctuation\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sex\"</span> <span class=\"token punctuation\">:</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">&lt;</span>pymongo<span class=\"token punctuation\">.</span>results<span class=\"token punctuation\">.</span>InsertOneResult <span class=\"token builtin\">object</span> at <span class=\"token number\">0x10d7379a0</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&gt;&gt;</span><span class=\"token operator\">&gt;</span>\n</code></pre>\n<p>ä¸‹é¢æˆ‘ä»¬åœ¨å¯è§†åŒ–å·¥å…·ç§æŸ¥çœ‹æ•°æ®ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\2847ded7930b4473ba3e049eee79224f.png\"/></p>\n<h2><a id=\"_23_INSERT_MANY_92\"></a>ğŸˆ 2.3 æ“ä½œæ•°æ®|<code>INSERT_MANY</code></h2>\n<p>å¦‚æœæˆ‘ä»¬æƒ³ä¸€æ¬¡æ€§æ’å…¥ä¸€ä¸ªé›†åˆï¼Œè¦å¦‚ä½•æ“ä½œå‘¢ï¼Œä¹Ÿå¾ˆç®€å•ï¼š</p>\n<pre><code>&gt;&gt;&gt; user_list = [\n...     {\"name\": \"XiaoMing\",  \"age\": 15, \"sex\": \"0\"},\n...     {\"name\": \"Lucy\",  \"age\": 18, \"sex\": \"1\"},\n...     {\"name\": \"HanMeimei\", \"age\": 16, \"sex\": \"1\"},\n...     {\"name\": \"Lily\", \"age\": 19, \"sex\": \"1\"},\n...     {\"name\": \"Jim\", \"age\": 15, \"sex\": \"0\"},\n...     {\"name\": \"Kate\",\"age\": 14, \"sex\": \"9\"},\n...     {\"name\": \"Tom\", \"age\": 13, \"sex\": \"1\"},\n...     {\"name\": \"Ann\",\"age\": 12, \"sex\": \"2\"},\n...     {\"name\": \"LiLei\", \"age\": 17, \"sex\": \"0\"},\n...     {\"name\": \"LinTao\", \"age\": 18, \"sex\": \"1\"}\n... ]\n&gt;&gt;&gt;\n&gt;&gt;&gt; insert_users = python_study.insert_many(user_list)\n</code></pre>\n<p>ç„¶åæˆ‘ä»¬å†å›å»å¯è§†åŒ–å·¥å…·ä¸­ï¼ŒæŸ¥çœ‹å·²ç»æ’å…¥çš„æ•°æ®ï¼š<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\88b258b51415484695c9c16039159e38.png\"/></p>\n<h2><a id=\"_24_FIND_ONEFIND_113\"></a>ğŸˆ 2.4 æ“ä½œæ•°æ®|<code>FIND_ONE/FIND</code></h2>\n<p>è¿™äº›æ–¹æ³•åŒæˆ‘ä»¬åœ¨æ“ä½œMongoDBä½¿ç”¨çš„å‡½æ•°éƒ½å·®ä¸å¤šï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±æ‰‹å·¥æ‰§è¡Œä¸‹ï¼Œè¿™é‡Œæˆ‘æ”¾æˆ‘æ‰€æ“ä½œå®éªŒçš„å›¾ç‰‡ã€‚</p>\n<ul><li> <p>è·å–ä¸€æ¡æ•°æ®<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\380b2b3bb1db4aa5abcac8152a81c4d2.png\"/></p> </li><li> <p>éå†è·å–å¤šæ¡æ•°æ®<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\f4265655feb944bba1d9390a1af2b1da.png\"/></p> </li><li> <p>æŸ¥è¯¢å¹´é¾„ç­‰äº13çš„å­¦ç”Ÿç”¨æˆ·<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\936708d1e64f44638288bd09436ec20b.png\"/></p> </li></ul>\n<p>å…¶ä»–æˆ‘å°±ä¸åœ¨èµ˜è¿°ï¼Œä¸»è¦æ˜¯åŒMongoDBçš„æ“ä½œç›¸å·®ä¸æ˜¯å¾ˆå¤§ã€‚å®˜æ–¹æä¾›çš„CRUDçš„æ“ä½œï¼š<a href=\"https://www.mongodb.com/docs/manual/crud/\">https://www.mongodb.com/docs/manual/crud/</a></p>\n<h2><a id=\"_25_MongoDB_128\"></a>ğŸˆ 2.5 MongoDBçš„å¯è§†åŒ–å·¥å…·</h2>\n<p>å…³äºå¯è§†åŒ–å·¥å…·çš„é€‰æ‹©ï¼Œå¤§å®¶å¯ä»¥æœç´¢ä¸‹ï¼Œä»»æ„é€‰æ‹©å°±å¥½ï¼Œè¿™é‡Œæ¨èä¸‹è€å¸ˆåšå®¢ä½¿ç”¨çš„å¯è§†åŒ–å·¥å…·<a href=\"https://www.mongodbmanager.com/download\">NoSQL Manager for MongoDB</a> ç”±äºæˆ‘éœ€è¦è¿æ¥å…¶ä»–çš„æ•°æ®åº“ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©äº†<a href=\"https://dbeaver.io/download/\">DBeaver</a>ã€‚å…¶ä»–çš„ä¸€äº›å¯è§†åŒ–å·¥å…·å°±æœ‰å¾ˆå¤šäº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<ul><li>MongoDB Compass Communityï¼ˆç¤¾åŒºç‰ˆï¼‰</li><li>NoSQLBooster</li><li>Cluster Control</li><li>Mongo Management Studio</li><li>Nosqlclient</li><li>Robo 3Tï¼ˆRobomongoã€Studio 3Tï¼‰</li><li>Navicat for MongoDB</li><li>Aqua Data Studio Mongo</li><li>phpMoAdmin</li><li>Mongotron</li><li>Mongolime</li><li>Mongo-express</li></ul>\n<p>â€‹</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}