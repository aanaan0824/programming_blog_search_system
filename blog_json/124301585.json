{"blogid": "124301585", "writerAge": "码龄3年", "writerBlogNum": "112", "writerCollect": "78", "writerComment": "11", "writerFan": "11", "writerGrade": "4级", "writerIntegral": "1322", "writerName": "风雨飘摇中的石头", "writerProfileAdress": "writer_image\\profile_124301585.jpg", "writerRankTotal": "48039", "writerRankWeekly": "286386", "writerThumb": "13", "writerVisitNum": "68515", "blog_read_count": "3138", "blog_time": "已于 2022-05-09 20:28:29 修改", "blog_title": "C#与 Halcon 联合编程", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>显示图像C#与 Halcon 联合编程：<br/> 1、调用 Halcon 图像处理数据库，是否调用成功，是利用 Halcon图像显示控件—能否正确显示图像进行判断。<br/> 如何利用 C#与 Halcon 联合编程 调用 Halcon 图像显示控件来显示图像。<br/> 1.创建 C#项目，创建 Windows 窗体应用程序。<img alt=\"在这里插入图片描述\" src=\"image\\d2b6a4050484441dbeeaf06ce1d9d67b.png\"/><br/> 2.项目中引用 Halcon 的 DLL 文件。鼠标右键单击“引用”–“添加引用<img alt=\"在这里插入图片描述\" src=\"image\\afb48dabf1604a2f9b35d515334dc36b.png\"/><br/> 2.1弹出 引用管理器 点击下方 “浏览”按钮。选择 Halcon 安装目录下 halcondotnet.dll文件，点击添加–确定。<img alt=\"在这里插入图片描述\" src=\"image\\b980f3479813491088b5dd1567d3406a.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\82a52aec10ce421cac1b36c79faeb9c8.png\"/><br/> 3.添加 halcon 图像显示控件。 Visual Studio 左侧点击“工具箱”，空白区域点击鼠标右键，选择“选择项”。在\".NET Framework 组件“页中点击”浏览“按钮，同样添加刚刚引用那个 halcondotnet.dll 文件。</p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\9fe18395cb774f0889786d72d12c93d3.png\"/><br/> 4、异常处理<br/> 4.1、fatal error C1083: 无法打开包括文件: “Halcon.h”: No such file or directory<br/> 这个文件是有包括的。但编译时报错。解决方法1：debug模式改为release模式就好了。<br/> 4.2、error MS8020 Build tools v140 cannot be found解决办法<br/> 将 \"项目——属性——配置属性——常规——平台工具集” 选项更改为你所用的VS版本平台集的选项即可，如用VS2013，便将其更改为v120的，v140应为VS2015/2017版本的平台工具集；如下图所示：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\5c87c5daf617431fafb5596f5bd3d493.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\01d7795a96284ec399f20f60c3842257.png\"/><br/> 4.3下列控件已成功添加到工具箱中，但未在活动设计器中启用<br/> <img alt=\"在这里插入图片描述\" src=\"image\\b69503482e854064bd0fd215bb1a1189.png\"/><br/> 当前工程.NET的目标框架太低。解决办法：右键工程—点击“属性”–进入回击“应用程序”----界面里有一个“目答标框架”，默认的应该是“.NETFramework 2”,改成NET Framework 4 4.5就行了。</p>\n<p>4.4 没有halcon<br/> <img alt=\"在这里插入图片描述\" src=\"image\\9a22f203ac5f4070923a28bdd2fbfa24.png\"/><br/> DLL文件放置位置：<br/> (1)项目文件夹下的…/bin/Debug/<br/> (2)系统文件夹下的C:/WINDOWS/system32<br/> 拷贝如下图<br/> <img alt=\"在这里插入图片描述\" src=\"image\\0137a828bb404728a8bdabf2445a7ae1.png\"/><br/> 5 ok<img alt=\"在这里插入图片描述\" src=\"image\\ba5617fe74d249e5b8e10aa61c5f7b7a.png\"/><br/> using System;<br/> using System.Collections.Generic;<br/> using System.ComponentModel;<br/> using System.Data;<br/> using System.Drawing;<br/> using System.Linq;<br/> using System.Text;<br/> using System.Threading.Tasks;<br/> using System.Windows.Forms;</p>\n<p>using HalconDotNet;</p>\n<p>namespace HalconWindows<br/> {<!-- --><br/> public partial class Form1 : Form<br/> {<!-- --><br/> HWindow win = null;<br/> HImage image = null;</p>\n<pre><code>    public Form1()\n    {\n        InitializeComponent();\n        win = hWindowControl1.HalconWindow;//窗口与空间进行关联\n\n        image = new HImage();//实例化变量\n        image.ReadImage(@\"E:\\halcon\\HalconWindows\\HalconWindows\\metal-parts\\bracket_tilted_01.png\");\n        int width = 0;\n        int height = 0;\n        image.GetImageSize(out width, out height);\n        win.SetPart(0,0, height - 1, width - 1);\n        win.DispObj(image);\n    }\n\n    private void hWindowControl1_HMouseMove(object sender, HalconDotNet.HMouseEventArgs e)\n    {\n\n    }\n\n    private void Form1_Load(object sender, EventArgs e)\n    {\n\n    }\n}\n</code></pre>\n<p>}</p>\n<p>错误 1 error C1083: 无法打开包括文件: “Halcon.h”: No such file or directory e:\\halcon\\modelmatchdemo\\modelmatchdemo\\HalconCpp.h 32 1 ModelMatchDemo<br/> D:\\Program Files\\MVTec\\HALCON-18.11-Progress\\include</p>\n<p>项目–属性–c+±-附加属性<br/> <img alt=\"在这里插入图片描述\" src=\"image\\a43adb4a68b1418da3efdfec18766ab4.png\"/></p>\n<p>试图加载格式不正确的程序。 (异常来自 HRESULT:0x8007000B)</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}