{"blogid": "123358011", "writerAge": "码龄8年", "writerBlogNum": "50", "writerCollect": "36", "writerComment": "15", "writerFan": "478", "writerGrade": "3级", "writerIntegral": "543", "writerName": "两个小黄鹂", "writerProfileAdress": "writer_image\\profile_123358011.jpg", "writerRankTotal": "34174", "writerRankWeekly": "17011", "writerThumb": "28", "writerVisitNum": "32040", "blog_read_count": "2567", "blog_time": "已于 2022-04-07 16:59:10 修改", "blog_title": "使用dokuwiki部署一个美观的知识库（可能是全网最完善的）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"XAMPP_0\"></a>安装XAMPP</h2>\n<blockquote>\n<p>需要安装7版本PHP，对应安装XAMPP的7版本<br/> 下载xampp-linux-x64-7.4.27-2-installer.run</p>\n</blockquote>\n<pre><code class=\"prism language-bash\"><span class=\"token comment\">##创建apache用户</span>\n<span class=\"token function\">useradd</span> -s /sbin/nologin -M apache\n<span class=\"token function\">chmod</span> +x xampp-linux-x64-7.4.27-2-installer.run\n./xampp-linux-x64-7.4.27-2-installer.run\n</code></pre>\n<blockquote>\n<p>部署完成后可能是daemon用户，重启apache服务</p>\n</blockquote>\n<pre><code class=\"prism language-bash\">./xampp restartapache\n</code></pre>\n<h2><a id=\"dokuwiki_14\"></a>安装dokuwiki</h2>\n<blockquote>\n<p>下载dokuwiki-24117f7f9e0362c4b1782ff29220b0ab.tgz到/tmp目录，解压<br/> htdocs默认是xampp的家目录</p>\n</blockquote>\n<pre><code class=\"prism language-bash\"><span class=\"token builtin class-name\">cd</span> /opt/lampp/htdocs\n<span class=\"token function\">tar</span> -xvf /tmp/dokuwiki-24117f7f9e0362c4b1782ff29220b0ab.tgz\n<span class=\"token function\">chown</span> -R apache:apache dokuwiki\n</code></pre>\n<h2><a id=\"dokuwiki_23\"></a>初始化dokuwiki</h2>\n<blockquote>\n<p>根据需要进行设定，右侧有设定语言的选项，可以选择zh，设定未中文</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\033d32a77a0543d68f5a371e1245252e.png\"/></p>\n<h2><a id=\"_28\"></a>安装插件</h2>\n<h3><a id=\"1__29\"></a>1. 扩展管理</h3>\n<blockquote>\n<p>离线环境需要到dokuwiki官网下载插件或模板，如果有网络可以直接进入管理-》扩展管理器安装需要的插件或模板，待整个环境调整完再迁移到离线环境</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\4ff94791a49f46138c39d7b74c8a945b.png\"/></p>\n<h3><a id=\"2__33\"></a>2. 插件安装</h3>\n<blockquote>\n<p>网络环境直接选择搜索安装，离线环境点击手动安装，这里主要说离线模式</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\127b6b39ce484802a12c4f208d42249d.png\"/></p>\n<h3><a id=\"3__37\"></a>3. 手动安装</h3>\n<blockquote>\n<p>选择对应的插件及模板进行安装，下载地址就是官网<br/> <a href=\"https://www.dokuwiki.org/plugins\">https://www.dokuwiki.org/plugins</a></p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\d47223d074874ad5ba312cbaae3f7bfd.png\"/></p>\n<h3><a id=\"4__42\"></a>4. 插件卸载关闭</h3>\n<blockquote>\n<p>插件安装完成后可以在现有插件进行查看，可以卸载或关闭</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\781901f6345144479080d1d654fc4c3f.png\"/></p>\n<h2><a id=\"_46\"></a>插件及模板介绍</h2>\n<blockquote>\n<p>下面是下载的所有插件及模板</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\cb59046723534050b5d5cbeb0812b662.png\"/></p>\n<h3><a id=\"Add_New_Page_50\"></a>Add New Page</h3>\n<h3><a id=\"ckgedit_51\"></a>ckgedit</h3>\n<blockquote>\n<p>不建议使用ueditor，除非自己能完全调通，或者确实需要他的功能，放上链接</p>\n</blockquote>\n<p><a href=\"https://www.jianshu.com/p/c567b23f6702\">https://www.jianshu.com/p/c567b23f6702</a></p>\n<blockquote>\n<p>目前发现的好用的比较实用的编辑器，也尝试了ueditor（百度开源的编辑器），但是部署上之后，无法显示文章的目录，不是太方便，再者系统主要用来记录技术文章，编辑器功能即使很强大，但是意义不是太大，反而是文章目录这个在使用时更有意义。</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\1c8365bdb75743efb54b464253ea14db.png\"/></p>\n<h3><a id=\"EditTable_plugin_60\"></a>EditTable plugin</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\9a5f12ae5a324cf2ad102528e9e04c9d.png\"/></p>\n<h3><a id=\"imgpaste_plugin_64\"></a>imgpaste plugin</h3>\n<blockquote>\n<p>可以直接复制图片到编辑器</p>\n</blockquote>\n<h3><a id=\"Indexmenu_Plugin_66\"></a>Indexmenu Plugin</h3>\n<blockquote>\n<p>显示页面索引<br/> <img alt=\"在这里插入图片描述\" src=\"image\\619f2d486b5c4c769daa0bb41efeb8fb.png\"/></p>\n</blockquote>\n<h3><a id=\"Move_plugin_70\"></a>Move plugin</h3>\n<blockquote>\n<p>修改页面或目录名称</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\becbf3b6f8da49a8a99955ba7a312560.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\c5ea2edacf2b432aa966f56bbce34973.png\"/></p>\n<h3><a id=\"Bootstrap3_Template_77\"></a>Bootstrap3 Template</h3>\n<blockquote>\n<p>这是目前个人比较中意的模板</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\14c81f9297404285940f18536cae1219.png\"/></p>\n<blockquote>\n<p>下面三个插件时安装bootstrap3模板需要的，具体作用不详</p>\n</blockquote>\n<ul><li>Structured Data Plugin</li><li>sqlite plugin</li><li>Fastwiki Plugin</li></ul>\n<h2><a id=\"_88\"></a>插件设置</h2>\n<h3><a id=\"IndexMenu_Plugin_89\"></a>IndexMenu Plugin</h3>\n<blockquote>\n<p>这个插件比较重要，但是问题也多，需要进行适当的配置</p>\n</blockquote>\n<h4><a id=\"1__91\"></a>1. 设置页面索引</h4>\n<blockquote>\n<p>网站地图-&gt;wiki-&gt;welcome-&gt;sidebar-&gt;创建该页面<br/> 下面两个任选一个，第二个比较漂亮</p>\n</blockquote>\n<ul><li><code>{<!-- -->{indexmenu&gt;..#1|msort}}</code></li><li><code>{<!-- -->{indexmenu&gt;:#1|js#leopard.png navbar tsort msort nsort}}</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\a3670931b5084e2080c7242caac601c4.png\"/></li></ul>\n<h4><a id=\"2_defer_js_98\"></a>2. defer_js设置</h4>\n<blockquote>\n<p>Indexmenu Plugin: If you use the ‘js’-option of the indexmenu plugin, you have to disable the ‘defer_js’-setting. This setting is temporary, in the future the indexmenu plugin will be improved.</p>\n</blockquote>\n<blockquote>\n<p>管理-&gt;配置设置-&gt;defer_js-&gt;取消勾选-&gt;保存</p>\n</blockquote>\n<h4><a id=\"3__HTTPClientphp_102\"></a>3. HTTPClient.php问题</h4>\n<blockquote>\n<p>Warning: require_once(/opt/lampp/htdocs/dokuwiki/inc/HTTPClient.php): failed to open stream: No such file or directory in /opt/lampp/htdocs/dokuwiki/lib/plugins/indexmenu/admin.php on line 364<br/> Fatal error: require_once(): Failed opening required ‘/opt/lampp/htdocs/dokuwiki/inc/HTTPClient.php’ (include_path=‘.:/opt/lampp/lib/php’) in /opt/lampp/htdocs/dokuwiki/lib/plugins/indexmenu/admin.php on line 364</p>\n</blockquote>\n<blockquote>\n<p>编辑文件，修改364行的数据如下</p>\n</blockquote>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">vim</span> /opt/lampp/htdocs/dokuwiki/inc/HTTPClient.php\nrequire_once <span class=\"token punctuation\">(</span>DOKU_INC.<span class=\"token string\">'inc/HTTP/HTTPClient.php'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4><a id=\"3__112\"></a>3. 跳过命名空间及页面</h4>\n<blockquote>\n<p>管理-&gt;Indexmenu-&gt;skip_index</p>\n</blockquote>\n<p><code>/（ |playground|wiki|）/</code></p>\n<blockquote>\n<p>管理-&gt;Indexmenu-&gt;skip_file</p>\n</blockquote>\n<p><code> /（|sidebar|）/</code></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\7d8b70971c8d4b5d9b8ac9a0b324b900.png\"/></p>\n<h4><a id=\"4__123\"></a>4. 去除红箭头</h4>\n<blockquote>\n<p>注释background这一行</p>\n</blockquote>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">vim</span> /opt/lampp/htdocs/dokuwiki/lib/plugins/indexmenu/style.css\n/*tocbullet property*/\n.dtree .indexmenu_tocbullet <span class=\"token punctuation\">{<!-- --></span>\n\tposition: absolute<span class=\"token punctuation\">;</span>\n\t/*background: transparent url<span class=\"token punctuation\">(</span>images/toc_bullet.gif<span class=\"token punctuation\">)</span> no-repeat scroll<span class=\"token punctuation\">;</span>*/\n\tvertical-align: middle<span class=\"token punctuation\">;</span>\n\twidth: 11px<span class=\"token punctuation\">;</span>\n\theight: 11px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"Add_New_Page_Plugin_137\"></a>Add New Page Plugin</h3>\n<blockquote>\n<p>使用bootstrap3模板，可以直接在模板栏设置即可<br/> 网站地图-&gt;wiki-&gt;welcome-&gt;sidebar-&gt;创建该页面</p>\n</blockquote>\n<p><code>{<!-- -->{NEWPAGE}}</code></p>\n<h2><a id=\"_144\"></a>配置管理器</h2>\n<blockquote>\n<p>主要是对界面进行美化，自己有强迫症</p>\n</blockquote>\n<h3><a id=\"_146\"></a>基础设置</h3>\n<blockquote>\n<p>选择bootstrap3</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\9a1ee5f7b5dc4103bb0fe727e106022b.png\"/></p>\n<h3><a id=\"_151\"></a>显示设置</h3>\n<blockquote>\n<p>breadcrumbs设置为0<br/> youarehere取消勾选</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\ebd4298185bc412f88439fa437a95e0f.png\"/></p>\n<h3><a id=\"Bootstrap3_157\"></a>Bootstrap3</h3>\n<h4><a id=\"_158\"></a>导航栏</h4>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\caca48033cb0495d821742034f3401fd.png\"/></p>\n<blockquote>\n<p>在导航栏中显示工具</p>\n</blockquote>\n<ul><li>showTools 登录时</li></ul>\n<blockquote>\n<p>在导航栏显示主页链接<br/> 直接点击左上角dokuwiki图标也能到主页面</p>\n</blockquote>\n<ul><li>showHomePageLink 取消选中</li></ul>\n<blockquote>\n<p>在导航栏中显示用户首页链接<br/> 直接点击左上角dokuwiki图标也能到主页面</p>\n</blockquote>\n<ul><li>showUserHomeLink 取消选中</li></ul>\n<blockquote>\n<p>在导航栏显示编辑</p>\n</blockquote>\n<ul><li>showEditBtn 登录时</li></ul>\n<blockquote>\n<p>在导航栏菜单中单独分割工具<br/> 将工具栏分开，排除重复功能</p>\n</blockquote>\n<ul><li>individualTools 选中</li></ul>\n<blockquote>\n<p>在导航栏显示搜索</p>\n</blockquote>\n<ul><li>showSearchForm 登陆时</li></ul>\n<blockquote>\n<p>显示导航栏 hook</p>\n</blockquote>\n<ul><li>showNavbar 登陆时</li></ul>\n<blockquote>\n<p>在导航栏启用添加新页面插件 (需要 Add New Page Plugin)</p>\n</blockquote>\n<ul><li>showAddNewPage 登陆时</li></ul>\n<h4><a id=\"_183\"></a>布局</h4>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\8a1d9d807d194162a7a8857a02e11333.png\"/></p>\n<blockquote>\n<p>启用 dokuwiki 风格页面工具<br/> 与bootstrap3功能重复</p>\n</blockquote>\n<ul><li>showPageTools 从不</li></ul>\n<blockquote>\n<p>在顶部显示 dokuwiki 页面名称(pageID)<br/> 去除右侧不美观的元素，太难看了<br/> <img alt=\"在这里插入图片描述\" src=\"image\\848c14d542844a099c1191d20475eb24.png\"/></p>\n</blockquote>\n<ul><li>showPageId 取消选中</li></ul>\n<blockquote>\n<p>显示标志按钮（DokuWiki，捐赠等）</p>\n</blockquote>\n<ul><li>showBadges 取消选中</li></ul>\n<blockquote>\n<p>在底部显示一个小小的登入连接。当hideLoginLink开启了的时候,这个选项很有用。</p>\n</blockquote>\n<ul><li>showLoginOnFooter 取消选中</li></ul>\n<blockquote>\n<p>Display DokuWiki name, logo and tagline on footer</p>\n</blockquote>\n<ul><li>showWikiInfo 取消选中</li></ul>\n<h4><a id=\"_199\"></a>页面</h4>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\16871d0f003140de84a48aa6cc64a2c2.png\"/></p>\n<blockquote>\n<p>在页面显示常用图标(打印,分享链接,发送邮件等)</p>\n</blockquote>\n<ul><li>pageInfo filename取消选中</li></ul>\n<blockquote>\n<p>显示/隐藏页面信息元素<br/> 离线模式，没有用处</p>\n</blockquote>\n<ul><li>showPageIcons 取消选中</li></ul>\n<h2><a id=\"_206\"></a>欣赏</h2>\n<h3><a id=\"_207\"></a>主页</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\de643a0bc02545ed808ee56434e455be.png\"/></p>\n<h3><a id=\"_209\"></a>原生编辑器</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\7f222ec0fa434bdd92634cdf1132e0f0.png\"/></p>\n<h3><a id=\"ckeditor_211\"></a>ckeditor</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\0f2344a8db7e42bfbcdacecfdc79a6b0.png\"/></p>\n<h2><a id=\"_213\"></a>彩蛋</h2>\n<blockquote>\n<p>软件包<br/> 链接：https://pan.baidu.com/s/1JrRn8khwCbzMJCHODky7BQ<br/> 提取码：zx9c<br/> –来自百度网盘超级会员V7的分享</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}