{"blogid": "123916644", "writerAge": "码龄11年", "writerBlogNum": "21", "writerCollect": "134", "writerComment": "16", "writerFan": "10", "writerGrade": "3级", "writerIntegral": "749", "writerName": "TopFancy", "writerProfileAdress": "writer_image\\profile_123916644.jpg", "writerRankTotal": "41192", "writerRankWeekly": "184689", "writerThumb": "22", "writerVisitNum": "71587", "blog_read_count": "2124", "blog_time": "已于 2022-04-03 20:19:49 修改", "blog_title": "C#连接数据库自动生成实体类", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>在项目中经常遇到要创建实体类的情况，数据库比较大或需经常修改表结构时，手动创建实体类的效率就很低。</p>\n<h2><a id=\"1_1\"></a>1.手写代码创建生成实体类工具</h2>\n<p>之前写Java代码习惯了使用Mybatis Generator之类的工具生成实体类代码，所以想着能不能C#也写一个实体类生成工具。本着不重复造轮子的原则，我在网上找了一下，看到了一个很不错的工具：CreateEntityModel。这个工具虽然没有界面，但是代码写的很棒，对于不同数据库的支持采用了构建者模式，方便自己对新数据库的扩展。<br/> 由于原有工具只支持了MySQL和SQLServer数据库，不能满足我的要求，于是我在这个代码基础上进行扩展，新增了对PostgresSql数据库的支持，数据库连接工具使用了Npgsql这个类库。</p>\n<p>源码放在了知名交友网站上：https://github.com/lordum/CreateEntityModel.git<br/> 欢迎各位大能来交流。<br/> <img alt=\"在这里插入图片描述\" src=\"image\\9d1f14bbf3e44790864480ef3737eb20.png\"/></p>\n<p>另原作者的地址也放上来，大家多支持：https://github.com/LiuHuiGang/CreateEntityModel.git</p>\n<h2><a id=\"2FreeSqlGenerator_11\"></a>2.使用代码生成器FreeSql.Generator生成</h2>\n<p>代码生成器FreeSql.Generator,是FreeSql的代码生成器，可生成实体类，支持将数据库实体动态生成实体，默认有二个模板，基于Razor，可指定自定义模板</p>\n<ul><li>1 dotnet-tool安装 FreeSql.Generator</li></ul>\n<pre><code>dotnet tool install -g FreeSql.Generator\n</code></pre>\n<ul><li>2 新建目录，在地址栏输入 cmd 快速打开命令窗口，输入命令：</li></ul>\n<pre><code>FreeSql.Generator --help\n</code></pre>\n<p>命令行工具生成实体类极大好处，后续再次生成覆盖操作等于一键完成，并且支持 Mac/Linux 平台。<br/> 命令的帮助说明如下所示：</p>\n<pre><code>C:\\WINDOWS\\system32&gt;FreeSql.Generator --help\n        ____                   ____         __\n       / __/  ____ ___  ___   / __/ ___ _  / /\n      / _/   / __// -_)/ -_) _\\ \\  / _ `/ / /\n     /_/    /_/   \\__/ \\__/ /___/  \\_, / /_/\n                                    /_/\n\n\n  # Github # https://github.com/2881099/FreeSql v2.0.105\n\n    FreeSql 快速生成数据库的实体类\n\n    更新工具：dotnet tool update -g FreeSql.Generator\n\n\n  # 快速开始 #\n\n  &gt; FreeSql.Generator -Razor 1 -NameOptions 0,0,0,0 -NameSpace MyProject -DB \"MySql,Data Source=127.0.0.1;...\"\n\n     -Razor 1                  * 选择模板：实体类+特性\n     -Razor 2                  * 选择模板：实体类+特性+导航属性\n     -Razor \"d:\\diy.cshtml\"    * 自定义模板文件\n\n     -NameOptions              * 4个布尔值对应：\n                                 首字母大写\n                                 首字母大写,其他小写\n                                 全部小写\n                                 下划线转驼峰\n\n     -NameSpace                * 命名空间\n\n     -DB \"MySql,data source=127.0.0.1;port=3306;user id=root;password=root;initial catalog=数据库;charset=utf8;sslmode=none;max pool size=2\"\n     -DB \"SqlServer,data source=.;initial catalog=数据库;User Id=sa;Password=123456;TrustServerCertificate=true;pooling=true;max pool size=2\"\n     -DB \"PostgreSQL,host=192.168.164.10;port=5432;username=postgres;password=123456;database=数据库;pooling=true;maximum pool size=2\"\n     -DB \"Oracle,user id=user1;password=123456;data source=//127.0.0.1:1521/XE;pooling=true;max pool size=2\"\n     -DB \"Sqlite,data source=document.db\"\n     -DB \"Firebird,database=localhost:D:\\fbdata\\EXAMPLES.fdb;user=sysdba;password=123456;max pool size=2\"\n     -DB \"Dameng,server=127.0.0.1;port=5236;user id=2user;password=123456789;database=2user;poolsize=2\"\n     -DB \"KingbaseES,server=127.0.0.1;port=54321;uid=USER2;pwd=123456789;database=数据库\"\n     -DB \"ShenTong,host=192.168.164.10;port=2003;database=数据库;username=SYSDBA;password=szoscar55;maxpoolsize=2\"\n                               * Dameng(达梦数据库)、KingbaseES(人大金仓数据库)、ShenTong(神舟通用数据库)\n\n     -Filter                   Table+View+StoreProcedure\n                               默认生成：表+视图+存储过程\n                               如果不想生成视图和存储过程 -Filter View+StoreProcedure\n\n     -Match                    表名或正则表达式，只生成匹配的表，如：dbo\\.TB_.+\n\n     -FileName                 文件名，默认：{name}.cs\n     -Output                   保存路径，默认为当前 shell 所在目录\n                               推荐在实体类目录创建 gen.bat，双击它重新所有实体类\n</code></pre>\n<p><a href=\"https://github.com/dotnetcore/FreeSql/wiki/DbFirst\">官方文档</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}