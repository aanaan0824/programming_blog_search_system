{"blogid": "124436048", "writerAge": "码龄2年", "writerBlogNum": "44", "writerCollect": "325", "writerComment": "462", "writerFan": "895", "writerGrade": "5级", "writerIntegral": "1698", "writerName": "wuqiongjin", "writerProfileAdress": "writer_image\\profile_124436048.jpg", "writerRankTotal": "21544", "writerRankWeekly": "38538", "writerThumb": "502", "writerVisitNum": "51337", "blog_read_count": "2118", "blog_time": "于 2022-04-26 20:17:25 发布", "blog_title": "数据库设计的三大范式(举例详解)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p> 为了建立冗余较小、结构合理的数据库，设计数据库时必须遵循一定的规则。在关系型数据库中这种规则就被称为范式。范式是符合某一种设计要求的总结。因此要设计一个结构合理的关系型数据库，就必须要满足下面这三大范式。</p>\n<p> </p>\n<h2><a id=\"1NF__4\"></a>1NF (不可再分)</h2>\n<p> 1NF要求数据库的表中<strong>不能有可以被继续拆分的列</strong>，即表中的每一个属性field都具有原子性。</p>\n<p>使数据库满足1NF的方法就是<strong>拆分列</strong>。</p>\n<p><strong><font size=\"4\">• 不满足1NF</font></strong>:</p>\n<table><thead><tr><th align=\"center\">姓名</th><th align=\"center\">班级</th></tr></thead><tbody><tr><td align=\"center\">张三</td><td align=\"center\">计科1903</td></tr></tbody></table>\n<p><strong>原因分析</strong>:</p>\n<p>这一张表实际上就不满足1NF，因为班级这列是可以继续被拆分的。</p>\n<p> </p>\n<p><strong><font size=\"4\">• 满足1NF</font></strong>:</p>\n<table><thead><tr><th align=\"center\">姓名</th><th align=\"center\">专业</th><th align=\"center\">班号</th></tr></thead><tbody><tr><td align=\"center\">张三</td><td align=\"center\">计科</td><td align=\"center\">1903</td></tr></tbody></table>\n<p>1NF一般情况下都不会违背。</p>\n<p> </p>\n<p> </p>\n<h2><a id=\"2NF__34\"></a>2NF (消除部分依赖)</h2>\n<p> 2NF指，在<strong>存在主键时，不能有部分依赖</strong>。(主要<strong>针对复合主键</strong>的)</p>\n<p> 部分依赖: 一些非主属性依赖于主键的一部分，而不是主键的全部。</p>\n<p>使数据库满足2NF的方法是拆分表。</p>\n<p><strong><font size=\"4\">• 不满足2NF</font></strong>:</p>\n<table><thead><tr><th align=\"center\">订单编号</th><th align=\"center\">商品编号</th><th align=\"center\">商品名称</th><th align=\"center\">商品数量</th><th align=\"center\">商品价格</th><th align=\"center\">客户姓名</th><th align=\"center\">客户电话</th></tr></thead><tbody><tr><td align=\"center\">0001</td><td align=\"center\">1</td><td align=\"center\">面包</td><td align=\"center\">10</td><td align=\"center\">$5</td><td align=\"center\">张三</td><td align=\"center\">130-2483-4321</td></tr><tr><td align=\"center\">0001</td><td align=\"center\">2</td><td align=\"center\">火腿</td><td align=\"center\">20</td><td align=\"center\">$3</td><td align=\"center\">张三</td><td align=\"center\">130-2483-4321</td></tr><tr><td align=\"center\">0002</td><td align=\"center\">2</td><td align=\"center\">火腿</td><td align=\"center\">5</td><td align=\"center\">$3</td><td align=\"center\">李四</td><td align=\"center\">155-1341-4521</td></tr></tbody></table>\n<p><strong>原因分析</strong>:</p>\n<p>表中选用(订单编号, 商品编号)联合作为<strong>联合主键</strong>。</p>\n<p>但是我们发现，不是所有属性字段都完全依赖联合主键的，它们或许只依赖主键中的一部分，这种<strong>部分依赖的关系是不满足2NF的</strong>!</p>\n<p>这里的例子中，商品名称、商品价格这两个字段都是只依赖于(商品编号)这个字段的，也就是说它们只依赖于联合主键中的一部分。因此我们需要进行拆表!</p>\n<p> </p>\n<p><strong><font size=\"4\">• 满足2NF</font></strong>:</p>\n<p>1.订单信息表</p>\n<table><thead><tr><th align=\"center\">订单编号</th><th align=\"center\">客户姓名</th><th align=\"center\">客户电话</th></tr></thead><tbody><tr><td align=\"center\">0001</td><td align=\"center\">张三</td><td align=\"center\">130-2483-4321</td></tr><tr><td align=\"center\">0002</td><td align=\"center\">李四</td><td align=\"center\">155-1341-4521</td></tr></tbody></table>\n<p>2.订单商品数量表</p>\n<table><thead><tr><th align=\"center\">订单编号</th><th align=\"center\">商品编号</th><th align=\"center\">商品数量</th></tr></thead><tbody><tr><td align=\"center\">0001</td><td align=\"center\">1</td><td align=\"center\">10</td></tr><tr><td align=\"center\">0001</td><td align=\"center\">2</td><td align=\"center\">20</td></tr><tr><td align=\"center\">0002</td><td align=\"center\">2</td><td align=\"center\">5</td></tr></tbody></table>\n<p>(商品数量是同时依赖于订单编号和商品编号的, 在这个表中，订单编号和商品编号仍然是作为联合主键)</p>\n<p>3.商品信息表</p>\n<table><thead><tr><th align=\"center\">商品编号</th><th align=\"center\">商品名称</th><th align=\"center\">商品价格</th></tr></thead><tbody><tr><td align=\"center\">1</td><td align=\"center\">面包</td><td align=\"center\">$5</td></tr><tr><td align=\"center\">2</td><td align=\"center\">火腿</td><td align=\"center\">$3</td></tr></tbody></table>\n<p> </p>\n<p> </p>\n<h2><a id=\"3NF__90\"></a>3NF (消除间接依赖)</h2>\n<p> 3NF是需要确保数据表中的<strong>每一列数据都和主键直接相关</strong>，而<strong>不能间接相关</strong>。</p>\n<p><strong><font size=\"4\">• 不满足3NF</font></strong>:</p>\n<table><thead><tr><th align=\"center\">学号</th><th align=\"center\">姓名</th><th align=\"center\">课程号</th><th align=\"center\">课程名称</th></tr></thead><tbody><tr><td align=\"center\">13002</td><td align=\"center\">张三</td><td align=\"center\">100</td><td align=\"center\">语文</td></tr></tbody></table>\n<p><strong>原因分析</strong>:</p>\n<p>这里主键是\"学号\"。</p>\n<p>直接依赖于\"学号\"的有\"姓名\"和\"课程号\"。</p>\n<p>“课程名称\"直接依赖于\"课程号”，间接依赖于\"学号\"。</p>\n<p>因此，我们需要为课程号和课程名称单独创建一个表出来，下面是结果。</p>\n<p> </p>\n<p><strong><font size=\"4\">• 满足3NF</font></strong>:</p>\n<p>1.学生表</p>\n<table><thead><tr><th align=\"center\">学号</th><th align=\"center\">姓名</th><th align=\"center\">课程号</th></tr></thead><tbody><tr><td align=\"center\">13002</td><td align=\"center\">张三</td><td align=\"center\">100</td></tr></tbody></table>\n<p>2.课程表</p>\n<table><thead><tr><th align=\"center\">课程号</th><th align=\"center\">课程名称</th></tr></thead><tbody><tr><td align=\"center\">100</td><td align=\"center\">语文</td></tr></tbody></table>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}