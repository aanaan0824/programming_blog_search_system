{"blogid": "124462214", "writerAge": "码龄3年", "writerBlogNum": "12", "writerCollect": "5", "writerComment": "0", "writerFan": "0", "writerGrade": "2级", "writerIntegral": "132", "writerName": "ChenXi0803", "writerProfileAdress": "writer_image\\profile_124462214.jpg", "writerRankTotal": "106925", "writerRankWeekly": "272158", "writerThumb": "1", "writerVisitNum": "3287", "blog_read_count": "914", "blog_time": "于 2022-04-27 23:19:10 发布", "blog_title": "Net 5.0 WebApi 发布到IIS上", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>Net 5.0 WebApi 发布到IIS上</h3>\n<ul><li><a href=\"#Win10IIS_2\">Win10本地安装IIS</a></li><li><a href=\"#_9\">发布项目</a></li><li><a href=\"#IIS_19\">配置IIS环境</a></li><li><a href=\"#_Internet_Information_ServicesIIS_33\">打开 Internet Information Services(IIS)管理器</a></li><li><a href=\"#_56\">相关资料</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"Win10IIS_2\"></a>Win10本地安装IIS</h1>\n<p>控制面板→程序→启用或关闭windows功能<br/> <img alt=\"在这里插入图片描述\" src=\"image\\1019987e01fa43caab153c4912ee5f2b.png\"/></p>\n<h1><a id=\"_9\"></a>发布项目</h1>\n<ol><li> <p><strong>右击项目——发布</strong></p> </li><li> <p><strong>选择自己需要发布的内容</strong>（这里选择文件夹）：<img alt=\"在这里插入图片描述\" src=\"image\\930d1e4ec5ca49b99183c346261e3142.png\"/></p> </li><li> <p><strong>选择文件夹存放位置</strong>：默认选择存放在项目中bin\\Release\\net5.0\\publish\\；</p> </li><li> <p><strong>配置发布的一些设置</strong>：<img alt=\"在这里插入图片描述\" src=\"image\\30c729ca8be54f01879744968f56d32d.png\"/></p> </li><li> <p><strong>点击发布按钮</strong></p> </li></ol>\n<h1><a id=\"IIS_19\"></a>配置IIS环境</h1>\n<ol><li><strong>打开cmd</strong></li><li><strong>dotnet --info</strong> 查看本地net安装信息<br/> <img alt=\"在这里插入图片描述\" src=\"image\\2213dd4f273b4db39889d6a2b1c28f12.png\"/></li><li><strong>安装与自己发布net core 版本运行时，这里我使用的是net 5.0</strong><br/> <img alt=\"在这里插入图片描述\" src=\"image\\714dd72a52c14360aea9c6c81725e751.png\"/><br/> <strong>.NET Core Hosting Bundle ：</strong>.<a href=\"https://docs.microsoft.com/en-au/aspnet/core/host-and-deploy/iis/hosting-bundle?view=aspnetcore-6.0\">NET Core 托管捆绑包是 .NET Core 运行时和 ASP.NET Core 模块的安装程序。 该捆绑包允许 ASP.NET Core 应用通过 IIS 运行。</a></li><li><strong>安装之后需要重启IIS服务</strong>（这里使用命令提示符）<br/> 4.1 <strong>打开cmd命令提示符</strong><br/> 4.2 <strong>net stop iisadmin /y</strong> （停止IIS服务）<br/> 4.3 <strong>net start iisadmin</strong> （启动IIS服务）<br/> 4.4 <strong>net start w3svc</strong> （输入Net命令启动IIS服务成功）</li></ol>\n<h1><a id=\"_Internet_Information_ServicesIIS_33\"></a>打开 Internet Information Services(IIS)管理器</h1>\n<ol><li><strong>添加引用程序池</strong> <img alt=\"在这里插入图片描述\" src=\"image\\a63f34c9dad54e7c9de5f35aa22af202.png\"/></li></ol>\n<blockquote>\n<p><strong>托管代码与非托管代码的区别：</strong><br/> <strong>托管的代码</strong>就是把有关内存管理（内存申请，内存释放，垃圾回收之类的）全部都是.NET的CLR来管理，就是说使用托管的代码把底层的一些操作都封装起来了，不能直接进行内存的读取之类的和硬件相关的操作，优点就是比较安全，不会出现诸如内存泄露之类的问题，缺点也很明显，不能直接读取内存，性能上会有损失，使用起来有时也不够灵活。<br/> <strong>非托管的</strong>刚好相反，可以直接进行硬件操作，性能比较高，但是对开发人员的要求也比较高。<br/> 最直观的就是C#不推荐使用指针，而C++就可以使用指针来直接读取内存； C#使用垃圾回收，C++要手动的释放对象……</p>\n</blockquote>\n<ol start=\"2\"><li><strong>对刚刚添加的应用程序池进行高级设置</strong><br/> <img alt=\"在这里插入图片描述\" src=\"image\\1fdbc5d448634d3d976baf24c84bea5d.png\"/></li></ol>\n<blockquote>\n<p><strong><a href=\"https://docs.microsoft.com/zh-CN/troubleshoot/developer/webapps/iis/www-authentication-authorization/understanding-identities\">IIS标识</a></strong><br/> 本地系统(Local System)： 具有高特权且有权访问网络资源的受信任帐户。<br/> 网络服务(Network Service)： 用于运行标准最小特权服务的受限或受限服务帐户。 此帐户的权限比本地系统帐户少。 此帐户有权访问网络资源。<br/> 本地服务(Local Service)： 与网络服务类似且旨在运行标准最小特权服务的受限或受限服务帐户。 此帐户无法访问网络资源。<br/> ApplicationPoolIdentity： 创建新的 应用程序池 时，IIS 会创建一个虚拟帐户，该帐户的名称为新 应用程序池并且在此帐户下运行 应用程序池 工作进程。 这也是最小特权帐户。<br/> 自定义帐户(Custom account)： 除了这些内置帐户之外，您还可以通过指定用户名和密码来使用自定义帐户。</p>\n</blockquote>\n<ol start=\"3\"><li><strong>添加网站</strong><br/> <img alt=\"在这里插入图片描述\" src=\"image\\85d84225df564b53b2303ee142135669.png\"/><br/> 4.<strong>进行测试</strong><br/> <img alt=\"在这里插入图片描述\" src=\"image\\2370929545d04bfaa57057355d959a1a.png\"/></li></ol>\n<h1><a id=\"_56\"></a>相关资料</h1>\n<blockquote>\n<p>.NET Core Hosting Bundle : <a href=\"https://docs.microsoft.com/en-au/aspnet/core/host-and-deploy/iis/hosting-bundle?view=aspnetcore-6.0\">https://docs.microsoft.com/en-au/aspnet/core/host-and-deploy/iis/hosting-bundle?view=aspnetcore-6.0</a><br/> IIS 标识：<a href=\"https://docs.microsoft.com/zh-cn/troubleshoot/developer/webapps/iis/www-authentication-authorization/understanding-identities\">https://docs.microsoft.com/zh-cn/troubleshoot/developer/webapps/iis/www-authentication-authorization/understanding-identities</a><br/> 托管代码和非托管代码的区别：<a href=\"https://www.cnblogs.com/zhengzc/p/11235308.html\">https://www.cnblogs.com/zhengzc/p/11235308.html</a></p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}