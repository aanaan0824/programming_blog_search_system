{"blogid": "120734459", "writerAge": "码龄9年", "writerBlogNum": "109", "writerCollect": "421", "writerComment": "121", "writerFan": "107", "writerGrade": "4级", "writerIntegral": "1408", "writerName": "CodeOfCC", "writerProfileAdress": "writer_image\\profile_120734459.jpg", "writerRankTotal": "14751", "writerRankWeekly": "11133", "writerThumb": "148", "writerVisitNum": "122474", "blog_read_count": "2795", "blog_time": "于 2021-10-12 23:45:28 发布", "blog_title": "C# wpf 实现窗口按比例缩放", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"_0\"></a>概述</h2>\n<p>做客户端有时为了让界面适用各种不同的系统分辨率，让界面内控件布局大小始终保存比例是一种方法。一般可以使用配置文件做不同分辨率的适配实现，或者通过代码根据不同的分辨率重新计算控件大小及位置实现。在wpf有一种更简单的方法，<strong>使用viewbox</strong>。</p>\n<h2><a id=\"_3\"></a>方法</h2>\n<p>ViewBox可以自动缩放其内部的元素，无论是控件、容器、文本都可以按比例自动缩放。想要实现整个窗口按比例缩放需要如下步骤：</p>\n<ol><li><strong>ViewBox作为一级容器</strong><br/> 一级容器即<code>&lt;Window&gt;</code>标签下第一个元素</li><li><strong>设置二级容器大小</strong><br/> 将窗口本身需要的容器设在ViewBox标签下，即成为二级容器，设置其大小。这个大小通常是设计图上的窗口大小。需要注意的是，<strong>二级容器大小必须大于等于适配的所有分辨率</strong>，比如适配的最大分辨率是1080p，则二级容器大小至少设为1080p。</li><li><strong>二级容器大小为基准布局</strong><br/> 其他控件大小都将相对于二级容器来布局。</li></ol>\n<p>代码如下：<br/> 下面代码中，窗口是按照1920x1080设计的，但实际的窗口只有640x360，但其显示的效果控件比例始终是一样的。</p>\n<pre><code class=\"prism language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Window</span> <span class=\"token attr-name\"><span class=\"token namespace\">x:</span>Class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WpfApp1.MainWindow<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/winfx/2006/xaml/presentation<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>x</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/winfx/2006/xaml<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>d</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.microsoft.com/expression/blend/2008<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>mc</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://schemas.openxmlformats.org/markup-compatibility/2006<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>local</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clr-namespace:WpfApp1<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\"><span class=\"token namespace\">mc:</span>Ignorable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>d<span class=\"token punctuation\">\"</span></span>\n        <span class=\"token attr-name\">Title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>MainWindow<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>360<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>640<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Viewbox</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Grid</span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1920<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1080<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Border</span> <span class=\"token attr-name\">CornerRadius</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1280<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">Height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>720<span class=\"token punctuation\">\"</span></span>   <span class=\"token attr-name\">Background</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#666666<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Border</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Grid</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Viewbox</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Window</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<h2><a id=\"_33\"></a>效果</h2>\n<p>上述代码的显示效果如下</p>\n<ol><li><strong>窗口大小640x360</strong><br/> <img alt=\"在这里插入图片描述\" src=\"image\\e7dd1ec94fd243258c4723bd1883556f.png\"/></li><li><strong>窗口大小1280x720</strong></li></ol>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\441114b5dea3464a8ff5530c5ee636fb.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}