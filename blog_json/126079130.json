{"blogid": "126079130", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "72", "writerCollect": "2610", "writerComment": "4589", "writerFan": "8313", "writerGrade": "6çº§", "writerIntegral": "8327", "writerName": "codeMak1r.å°æ–°", "writerProfileAdress": "writer_image\\profile_126079130.jpg", "writerRankTotal": "1737", "writerRankWeekly": "13", "writerThumb": "2774", "writerVisitNum": "208397", "blog_read_count": "247", "blog_time": "å·²äºÂ 2022-08-07 15:34:20Â ä¿®æ”¹", "blog_title": "ã€Reactæ‰©å±•ã€‘1ã€setStateçš„ä¸¤ç§å†™æ³•ã€lazyLoadæ‡’åŠ è½½ã€Fragmentæ ‡ç­¾å’ŒcreateContext()", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/e6438d0c37044ec2a519568034532d4c.gif#pic_center\"/></p>\n<blockquote>\n<p><strong><font color=\"#FF7F50\"> æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</font></strong><br/> <strong>ğŸ“”åšä¸»æ˜¯ä¸€åå¤§å­¦åœ¨è¯»æœ¬ç§‘ç”Ÿï¼Œä¸»è¦å­¦ä¹ æ–¹å‘æ˜¯å‰ç«¯ã€‚<br/> ğŸ­ç›®å‰å·²ç»æ›´æ–°äº†<font color=\"#FF7F50\">ã€Vueã€‘ã€ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘ã€ã€TypeScriptã€‘ç­‰ç­‰ç³»åˆ—ä¸“æ </font><br/> ğŸ› ç›®å‰æ­£åœ¨å­¦ä¹ çš„æ˜¯ğŸ”¥<span class=\"katex--inline\"><span class=\"katex\"><span class=\"katex-mathml\">\n      \n       \n        \n         \n          R\n         \n         \n          e\n         \n         \n          a\n         \n         \n          c\n         \n         \n          t\n         \n         \n          æ¡†æ¶\n         \n        \n        \n         Reactæ¡†æ¶\n        \n       \n      </span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right: 0.0077em;\">R</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">æ¡†æ¶</span></span></span></span></span>ğŸ”¥ï¼Œä¸­é—´ç©¿æ’äº†ä¸€äº›åŸºç¡€çŸ¥è¯†çš„å›é¡¾<br/> ğŸŒˆåšå®¢ä¸»é¡µğŸ‘‰<a href=\"https://blog.csdn.net/Svik_zy?type=blog\">codeMak1r.å°æ–°çš„åšå®¢</a></strong></p>\n<p></p>\n<div class=\"toc\">\n<h3>ğŸ˜‡æœ¬æ–‡ç›®å½•ğŸ˜‡</h3>\n<ul><li><a href=\"#1_setState_15\">1. setState</a></li><li><ul><li><a href=\"#setState2_16\">setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•</a></li><li><a href=\"#_18\"></a></li></ul>\n</li><li><a href=\"#2lazyLoad_65\">2.lazyLoad</a></li><li><ul><li><a href=\"#lazyLoad_66\">è·¯ç”±ç»„ä»¶çš„lazyLoad</a></li></ul>\n</li><li><a href=\"#3_Fragment_88\">3. Fragment</a></li><li><ul><li><a href=\"#_89\">ä½¿ç”¨</a></li><li><a href=\"#_90\"></a></li><li><a href=\"#_132\">ä½œç”¨</a></li></ul>\n</li><li><a href=\"#4createContext_137\">4.createContext()</a></li><li><ul><li><a href=\"#_138\">ç†è§£</a></li><li><a href=\"#_145\">ä½¿ç”¨</a></li><li><a href=\"#_178\">ç¤ºä¾‹</a></li><li><a href=\"#_258\">æ³¨æ„</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<p><strong><font color=\"#FF7F50\">æœ¬æ–‡è¢«ä¸“æ <a href=\"https://blog.csdn.net/svik_zy/category_11671445.html?spm=1001.2014.3001.5482\">ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘</a>æ”¶å½•</font></strong></p>\n</blockquote>\n<blockquote>\n<p><strong><font color=\"#FF7F50\">ğŸ•¹åšæŒåˆ›ä½œâœï¸ï¼Œä¸€èµ·å­¦ä¹ ğŸ“–ï¼Œç å‡ºæœªæ¥ğŸ‘¨ğŸ»â€ğŸ’»ï¼</font></strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8a39a1a1a6914ffab36622d0d76ecd74.jpeg\"/></p>\n</blockquote>\n<h1><a id=\"1_setState_15\"></a>1. setState</h1>\n<h2><a id=\"setState2_16\"></a>setStateæ›´æ–°çŠ¶æ€çš„2ç§å†™æ³•</h2>\n<h2><a id=\"_18\"></a></h2>\n<blockquote>\n<p>(1). setState(stateChange, [callback]) -----<strong>å¯¹è±¡å¼çš„setState</strong></p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// renderè°ƒç”¨å</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ol><li>stateChangeä¸ºçŠ¶æ€æ”¹å˜å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¯ä»¥ä½“ç°å‡ºçŠ¶æ€çš„æ›´æ”¹ï¼›</li><li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œå®ƒåœ¨çŠ¶æ€æ›´æ–°å®Œæ¯•ï¼Œé¡µé¢ä¹Ÿæ›´æ–°åï¼ˆ<strong>renderè°ƒç”¨å</strong>ï¼‰æ‰è¢«è°ƒç”¨</li></ol>\n<hr/>\n<p>(2). setState(updater, [callback]) ----- <strong>å‡½æ•°å¼çš„setState</strong></p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">count</span><span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ol><li>updaterä¸ºè¿”å›stateChangeå¯¹è±¡çš„å‡½æ•°ï¼›</li><li>updaterå¯ä»¥æ¥æ”¶åˆ°stateå’Œpropsï¼›</li><li>callbackæ˜¯å¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œå®ƒåœ¨çŠ¶æ€æ›´æ–°ã€é¡µé¢ä¹Ÿæ›´æ–°åï¼ˆ<strong>renderè°ƒç”¨å</strong>ï¼‰æ‰è¢«è°ƒç”¨</li></ol>\n<hr/>\n<p>æ€»ç»“ï¼š</p>\n<ol><li> <p>å¯¹è±¡å¼çš„setStateæ˜¯å‡½æ•°å¼çš„setStateçš„ç®€å†™æ–¹å¼ï¼ˆè¯­æ³•ç³–ï¼‰</p> </li><li> <p>ä½¿ç”¨åŸåˆ™ï¼š</p> <p>ï¼ˆ1ï¼‰å¦‚æœæ–°çŠ¶æ€ä¸ä¾èµ–äºåŸçŠ¶æ€ ==== ä½¿ç”¨å¯¹è±¡æ–¹å¼</p> <p>ï¼ˆ2ï¼‰å¦‚æœæ–°çŠ¶æ€ä¾èµ–äºåŸçŠ¶æ€ ==== ä½¿ç”¨å‡½æ•°æ–¹å¼</p> <p>ï¼ˆ3ï¼‰å¦‚æœéœ€è¦åœ¨setState()æ‰§è¡Œåè·å–æœ€æ–°çš„çŠ¶æ€æ•°æ®ï¼Œè¦åœ¨ç¬¬äºŒä¸ªcallbackå‡½æ•°ä¸­è¯»å–</p> </li><li> <p><strong>ReactçŠ¶æ€çš„æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼ï¼</strong></p> </li></ol>\n</blockquote>\n<h1><a id=\"2lazyLoad_65\"></a>2.lazyLoad</h1>\n<h2><a id=\"lazyLoad_66\"></a>è·¯ç”±ç»„ä»¶çš„lazyLoad</h2>\n<p>å¼•å…¥lazyå‡½æ•°å’ŒSuspenseç»„ä»¶</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> Component<span class=\"token punctuation\">,</span> lazy<span class=\"token punctuation\">,</span> Suspense <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n</code></pre>\n<p>å®ç°è·¯ç”±æ‡’åŠ è½½</p>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// 1.é€šè¿‡Reactçš„lazyå‡½æ•°é…åˆimportï¼ˆï¼‰å‡½æ•°åŠ¨æ€åŠ è½½è·¯ç”±ç»„ä»¶ ===&gt; è·¯ç”±ç»„ä»¶ä»£ç ä¼šè¢«åˆ†å¼€æ‰“åŒ…</span>\n<span class=\"token keyword\">const</span> Login <span class=\"token operator\">=</span> <span class=\"token function\">lazy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@/pages/Login'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 2. é€šè¿‡&lt;Suspense&gt;æŒ‡å®šåœ¨åŠ è½½å¾—åˆ°è·¯ç”±æ‰“åŒ…æ–‡ä»¶å‰æ˜¾ç¤ºä¸€ä¸ªè‡ªå®šä¹‰loadingç•Œé¢</span>\n<span class=\"token operator\">&lt;</span>Suspense fallback<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span>loading<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>Switch<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>Route path<span class=\"token operator\">=</span><span class=\"token string\">\"/xxx\"</span> component<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>xxx<span class=\"token punctuation\">}</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n  \t<span class=\"token operator\">&lt;</span>Redirect to<span class=\"token operator\">=</span><span class=\"token string\">\"/login\"</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Switch<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Suspense<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h1><a id=\"3_Fragment_88\"></a>3. Fragment</h1>\n<h2><a id=\"_89\"></a>ä½¿ç”¨</h2>\n<h2><a id=\"_90\"></a></h2>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// Componment</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> Component<span class=\"token punctuation\">,</span> Fragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> Demo <span class=\"token keyword\">from</span> <span class=\"token string\">'./components/4_fragment'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">App</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Fragment<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>Demo <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Fragment<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// FC</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> Fragment <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Demo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Fragment<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Fragment<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\nå…¶å®è¿˜å¯ä»¥<span class=\"token operator\">...</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Demo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>input type<span class=\"token operator\">=</span><span class=\"token string\">\"text\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<h2><a id=\"_132\"></a>ä½œç”¨</h2>\n<blockquote>\n<p>å¯ä»¥ä¸ç”¨å¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„DOMæ ¹æ ‡ç­¾äº†</p>\n</blockquote>\n<h1><a id=\"4createContext_137\"></a>4.createContext()</h1>\n<h2><a id=\"_138\"></a>ç†è§£</h2>\n<blockquote>\n<p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨äºã€ç¥–ç»„ä»¶ã€‘ä¸ã€åä»£ç»„ä»¶ã€‘é—´é€šä¿¡</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\6744418a9d454e2ab16249dd4fe40f7a.png\"/></p>\n<h2><a id=\"_145\"></a>ä½¿ç”¨</h2>\n<blockquote>\n<ol><li> <p>åˆ›å»ºContextå®¹å™¨å¯¹è±¡ï¼š</p> <pre><code class=\"prism language-js\"><span class=\"token keyword\">const</span> Xxxcontext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre> </li><li> <p>æ¸²æŸ“å­ç»„ä»¶æ—¶ï¼Œå¤–é¢åŒ…è£¹xxxContext.Providerï¼Œé€šè¿‡valueå±æ€§ç»™åä»£ç»„ä»¶ä¼ é€’æ•°æ®ï¼š</p> <pre><code class=\"prism language-js\"><span class=\"token operator\">&lt;</span>XxxContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>æ•°æ®<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n\tå­ç»„ä»¶\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>XxxContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">&gt;</span>\n</code></pre> </li><li> <p>åä»£ç»„ä»¶è¯»å–æ•°æ®ï¼š</p> <pre><code class=\"prism language-js\"><span class=\"token comment\">// ç¬¬ä¸€ç§æ–¹å¼ï¼šä»…é€‚ç”¨äºç±»ç»„ä»¶</span>\n<span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> xxxContext <span class=\"token comment\">// å£°æ˜æ¥æ”¶context</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context <span class=\"token comment\">// è¯»å–contextä¸­çš„valueæ•°æ®</span>\n\n<span class=\"token comment\">// ç¬¬äºŒç§æ–¹å¼ï¼šå‡½æ•°ç»„ä»¶ä¸ç±»ç»„ä»¶éƒ½å¯ä»¥</span>\n<span class=\"token operator\">&lt;</span>xxxContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token operator\">&gt;</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token parameter\">value</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">(</span> <span class=\"token comment\">//valueå°±æ˜¯contextä¸­çš„valueæ•°æ®</span>\n\t\t\tè¦æ˜¾ç¤ºå†…å®¹\n\t\t<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>xxxContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token operator\">&gt;</span>\n</code></pre> </li></ol>\n</blockquote>\n<h2><a id=\"_178\"></a>ç¤ºä¾‹</h2>\n<p>Aç»„ä»¶æ˜¯çˆ¶ç»„ä»¶ï¼›Bç»„ä»¶æ˜¯å­ç»„ä»¶ï¼›Cç»„ä»¶æ˜¯å­™ç»„ä»¶</p>\n<p>Aç»„ä»¶ä¸­åˆå§‹åŒ–äº†stateï¼Œé‡Œé¢æœ‰ä¸€ä¸ªusernameå±æ€§å€¼ä¸ºtomï¼›</p>\n<p>å­™ç»„ä»¶Cè¦ä½¿ç”¨Aç»„ä»¶ä¼ é€’è¿‡æ¥çš„usernameå±æ€§ã€‚</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" height=\"60%\" src=\"image\\9c581dbbad05486b8bd440d415a53206.png\" width=\"60%\"/></p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token string\">'./index.css'</span>\n\n<span class=\"token comment\">// åˆ›å»ºä¸€ä¸ªç”¨äºä¿å­˜æ•°æ®çš„ä¸Šä¸‹æ–‡</span>\n<span class=\"token keyword\">const</span> MyContext <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span> <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">'tom'</span> <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'parent'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">&gt;</span>æˆ‘æ˜¯<span class=\"token constant\">A</span>ç»„ä»¶<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">&gt;</span>æˆ‘çš„ç”¨æˆ·åæ˜¯ï¼š<span class=\"token punctuation\">{<!-- --></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>MyContext<span class=\"token punctuation\">.</span>Provider value<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token constant\">B</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>MyContext<span class=\"token punctuation\">.</span>Provider<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">B</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'child'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">&gt;</span>æˆ‘æ˜¯<span class=\"token constant\">B</span>ç»„ä»¶<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token constant\">C</span> <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">C</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Component</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// å£°æ˜æ¥æ”¶context</span>\n  <span class=\"token keyword\">static</span> contextType <span class=\"token operator\">=</span> MyContext\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'grand'</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">&gt;</span>æˆ‘æ˜¯<span class=\"token constant\">C</span>ç»„ä»¶<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">&gt;</span>\n        <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">&gt;</span>æˆ‘ä»<span class=\"token constant\">A</span>ç»„ä»¶æ¥æ”¶åˆ°çš„ç”¨æˆ·åï¼š<span class=\"token punctuation\">{<!-- --></span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>è‹¥å­™ç»„ä»¶Cä¸ºå‡½æ•°å¼ç»„ä»¶FCï¼š</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">function</span> <span class=\"token constant\">C</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">'grand'</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">&gt;</span>æˆ‘æ˜¯<span class=\"token constant\">C</span>ç»„ä»¶<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>h4<span class=\"token operator\">&gt;</span>æˆ‘ä»<span class=\"token constant\">A</span>ç»„ä»¶æ¥æ”¶åˆ°çš„ç”¨æˆ·åï¼š\n        <span class=\"token operator\">&lt;</span>MyContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token operator\">&gt;</span>\n          <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token parameter\">value</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n              <span class=\"token keyword\">return</span> value\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>MyContext<span class=\"token punctuation\">.</span>Consumer<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h4<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"_258\"></a>æ³¨æ„</h2>\n<blockquote>\n<p>åœ¨åº”ç”¨å¼€å‘ä¸­ä¸€èˆ¬ä¸ç”¨contextï¼Œä¸€èˆ¬éƒ½ç”¨å®ƒæ¥å°è£…reactæ’ä»¶ï¼›</p>\n<p>æ¯”å¦‚ï¼šreact-reduxåº“åº•å±‚å°±ä½¿ç”¨åˆ°äº†contextâ€¦</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}