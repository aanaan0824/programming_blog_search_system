{"blogid": "126255125", "writerAge": "码龄1年", "writerBlogNum": "32", "writerCollect": "752", "writerComment": "1642", "writerFan": "1232", "writerGrade": "5级", "writerIntegral": "2693", "writerName": "iecne", "writerProfileAdress": "writer_image\\profile_126255125.jpg", "writerRankTotal": "6766", "writerRankWeekly": "59", "writerThumb": "807", "writerVisitNum": "22023", "blog_read_count": "4050", "blog_time": "已于 2022-08-25 09:07:33 修改", "blog_title": "【游戏引擎Easy2D实战】选择关卡场景示例", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>哈喽大家好，我是iecne，本期为大家带来的是CPP/C++游戏编写 —— 选择关卡场景示例 ，包教包会，快来看看吧！</p>\n<p>本片文章所用到的是Easy2D引擎，快<strong>点赞收藏关注评论支持以下博主</strong>，蟹蟹</p>\n<p>// 编译环境：Visual Studio 2019 / Easy2D v2.0.4<br/> // 项目类型：Win32 Console Application</p>\n<hr/>\n<p><strong>目录</strong></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E4%B8%80.%E4%B8%BB%E5%87%BD%E6%95%B0%E8%AF%B4%E6%98%8E\">一.主函数说明</a></p>\n<p style=\"margin-left:80px;\"><a href=\"#%E5%9C%A8%20Win32%20%E7%A8%8B%E5%BA%8F%E4%B8%8B%E4%BD%BF%E7%94%A8%20Easy2D\">在 Win32 程序下使用 Easy2D</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E4%BA%8C.%E5%A4%B4%E6%96%87%E4%BB%B6%E4%B8%8E%E5%87%BD%E6%95%B0%E5%A3%B0%E6%98%8E\">二.头文件与函数声明</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E4%B8%89.%E4%B8%BB%E5%87%BD%E6%95%B0\">三.主函数</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E5%9B%9B.%E5%87%BD%E6%95%B0\">四.函数</a></p>\n<p style=\"margin-left:40px;\"><a href=\"#1.%E5%88%9B%E5%BB%BA%E5%9C%BA%E6%99%AF%E5%B9%B6%E8%BF%9B%E5%85%A5\">1.创建场景并进入</a></p>\n<p style=\"margin-left:40px;\"><a href=\"#2.%E5%85%B3%E5%8D%A1\">2.关卡</a></p>\n<p style=\"margin-left:80px;\"><a href=\"#Jungle%C2%A0\">Jungle </a></p>\n<p style=\"margin-left:80px;\"><a href=\"#CHINA\">CHINA</a></p>\n<p style=\"margin-left:80px;\"><a href=\"#Egypt\">Egypt</a></p>\n<p style=\"margin-left:40px;\"><a href=\"#3.%E5%8A%A0%E8%BD%BD%E6%8C%89%E9%92%AE\">3.加载按钮</a></p>\n<p style=\"margin-left:40px;\"><a href=\"#4.%E7%A7%BB%E5%8A%A8%E5%85%B3%E5%8D%A1%E9%9D%A2%E6%9D%BF\">4.移动关卡面板</a></p>\n<p style=\"margin-left:40px;\"><a href=\"#5.%E7%82%B9%E5%87%BB%E6%8C%89%E9%92%AE\">5.点击按钮</a></p>\n<p style=\"margin-left:80px;\"><a href=\"#%E5%B7%A6LEFT\">左LEFT</a></p>\n<p style=\"margin-left:80px;\"><a href=\"#%E5%8F%B3RIGHT\">右RIGHT</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E4%BA%94.%E6%95%88%E6%9E%9C%E5%9B%BE%E7%89%87\">五.效果图片</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E5%85%AD.%E6%80%BB%E7%BB%93\">六.总结</a></p>\n<p style=\"margin-left:0px;\"><a href=\"#%E6%83%B3%E8%A6%81%E6%BA%90%E4%BB%A3%E7%A0%81%E7%9A%84%EF%BC%8C%E8%AF%B7%E7%82%B9%E5%87%BB%E4%BD%9C%E8%80%85%E8%B5%84%E6%BA%90%E4%B8%8B%E8%BD%BD%EF%BC%8C%E5%85%8D%E8%B4%B9%E5%93%A6%EF%BC%81%EF%BC%81%EF%BC%81\">想要源代码的，请点击作者资源下载，免费哦！！！</a></p>\n<hr/>\n<p> </p>\n<h1>一.主函数说明</h1>\n<h3>在 Win32 程序下使用 Easy2D</h3>\n<p>引擎在 Win32 应用程序和 Win32 控制台程序下的代码是一样的，只是两种模式下主函数的写法不同。</p>\n<p>写控制台程序时，只需声明 main 函数就可以：</p>\n<pre><code class=\"language-cpp\">int main()\n{\n\treturn 0;\n}</code></pre>\n<p>写 Win32 程序时，主函数变得有些复杂，但我们可以把它和控制台下的 main 函数一样使用：</p>\n<pre><code class=\"language-cpp\">int WINAPI WinMain(\n\tHINSTANCE hInstance, \n\tHINSTANCE hPrevInstance, \n\tLPSTR lpCmdLine, \n\tint nCmdShow\n)\n{\n\treturn 0;\n}</code></pre>\n<p>虽然引擎支持在控制台程序下工作，但是<strong>不推荐</strong>这样使用，因为游戏并不需要控制台。</p>\n<hr/>\n<h1>二.头文件与函数声明</h1>\n<pre><code class=\"language-cpp\">#include &lt;easy2d/easy2d.h&gt;\n\nusing namespace easy2d;\n\n\n//---------------------------------------------------------\n// 函数声明\n//---------------------------------------------------------\n\nvoid EnterScene();\t\t\n// 创建场景并进入\n\nvoid InitJungle();\t\t\n// 加载 Jungle 关卡\n\nvoid InitChina();\t\t\n// 加载 China 关卡\n\nvoid InitEgypt();\t\t\n// 加载 Egypt 关卡\n\nvoid InitButton();\t\t\n// 加载按钮\n\nvoid MovePanel();\t\t\n// 移动关卡面板\n\nvoid ClickLeft();\t\t\n// 点击左按钮\n\nvoid ClickRight();\t\t\n// 点击右按钮\n\n\n\n//---------------------------------------------------------\n// 全局变量声明\n//---------------------------------------------------------\n\nScene*\tg_Scene;\t\t// 场景\n\nNode*\tg_Panel;\t\t// 关卡面板\n\nint\t\tg_Level;\t\t// 当前选中的关卡数\n\nButton* g_LeftButton;\t// 左按钮\n\nButton* g_RightButton;\t// 右按钮</code></pre>\n<hr/>\n<h1>三.主函数</h1>\n<p>刚刚已经讲了主函数哈</p>\n<pre><code class=\"language-cpp\">int WINAPI WinMain(HINSTANCE, HINSTANCE, LPSTR, int)\n{\n\tif (Game::init(L\"关卡选择\", 480, 720))\n\t{\n\t\t// 设置节点默认中心点\n\t\tNode::setDefaultAnchor(0.5f, 0.5f);\n\n\t\t// 创建场景并进入\n\t\tEnterScene();\n\n\t\tGame::start();\n\t}\n\n\tGame::destroy();\n\treturn 0;\n}</code></pre>\n<p>游戏开始-&gt;结束</p>\n<hr/>\n<h1>四.函数</h1>\n<p><strong>重点部分哈</strong></p>\n<h2>1.创建场景并进入</h2>\n<pre><code class=\"language-cpp\">void EnterScene()\n{\n\t// 创建一个空场景\n\tg_Scene = gcnew Scene;\n\n\t// 设置当前关卡为 0\n\tg_Level = 0;\n\n\t// 创建背景图对象\n\tauto background = gcnew Sprite(L\"res/LS00.png\");\n\n\t// 背景图居中显示\n\tbackground-&gt;setPos(Window::getSize() / 2);\n\n\t// 缩小背景图\n\tbackground-&gt;setScale(1.0f, 1.0f);\n\n\t// 将图片添加到场景中\n\tg_Scene-&gt;addChild(background);\n\n\t// 三个关卡图片合并为 panel 节点\n\tg_Panel = gcnew Node();\n\tg_Scene-&gt;addChild(g_Panel);\n\n\t// 加载关卡图片\n\tInitJungle();\n\tInitChina();\n\tInitEgypt();\n\n\t// 添加按钮\n\tInitButton();\n\n\t// 进入场景\n\tSceneManager::enter(g_Scene);\n}</code></pre>\n<hr/>\n<h2>2.关卡</h2>\n<h3>Jungle </h3>\n<pre><code class=\"language-cpp\">void InitJungle()\n{\n\t// 创建图片\n\tauto JungleImage = gcnew Sprite(L\"res/LS13.png\");\n\tJungleImage-&gt;setScale(1.5f, 1.5f);\n\tJungleImage-&gt;setPosY(Window::getHeight() / 2 - 60);\n\n\t// 创建文字\n\tauto JungleText = gcnew Sprite(L\"res/LS10.png\");\n\tJungleText-&gt;setScale(1.5f, 1.5f);\n\tJungleText-&gt;setPosY(Window::getHeight() - 195);\n\n\t// 图片居中\n\tJungleImage-&gt;setPosX(Window::getWidth() / 2);\n\tJungleText-&gt;setPosX(JungleImage-&gt;getPosX());\n\n\t// 将两个精灵添加到 panel 节点\n\tg_Panel-&gt;addChild(JungleImage);\n\tg_Panel-&gt;addChild(JungleText);\n}</code></pre>\n<h3>CHINA</h3>\n<pre><code class=\"language-cpp\">void InitChina()\n{\n\t// 创建图片\n\tauto ChinaImage = gcnew Sprite(L\"res/LS14.png\");\n\tChinaImage-&gt;setScale(1.5f, 1.5f);\n\tChinaImage-&gt;setPosY(Window::getHeight() / 2 - 30);\n\n\t// 创建文字\n\tauto ChinaText = gcnew Sprite(L\"res/LS11.png\");\n\tChinaText-&gt;setScale(1.5f, 1.5f);\n\tChinaText-&gt;setPosY(Window::getHeight() - 195);\n\n\t// 图片居中\n\tChinaImage-&gt;setPosX(Window::getWidth() / 2 + Window::getWidth());\n\tChinaText-&gt;setPosX(ChinaImage-&gt;getPosX());\n\n\n\t// 将两个精灵添加到 panel 节点\n\tg_Panel-&gt;addChild(ChinaImage);\n\tg_Panel-&gt;addChild(ChinaText);\n}</code></pre>\n<h3>Egypt</h3>\n<pre><code class=\"language-cpp\">void InitEgypt()\n{\n\t// 创建图片\n\tauto EgyptImage = gcnew Sprite(L\"res/LS15.png\");\n\tEgyptImage-&gt;setScale(1.5f, 1.5f);\n\tEgyptImage-&gt;setPosY(Window::getHeight() / 2 - 30);\n\n\t// 设置文字位置\n\tauto EgyptText = gcnew Sprite(L\"res/LS12.png\");\n\tEgyptText-&gt;setScale(1.5f, 1.5f);\n\tEgyptText-&gt;setPosY(Window::getHeight() - 195);\n\n\t// 图片居中\n\tEgyptImage-&gt;setPosX(Window::getWidth() / 2 + Window::getWidth() * 2);\n\tEgyptText-&gt;setPosX(EgyptImage-&gt;getPosX());\n\n\t// 将两个精灵添加到 panel 节点\n\tg_Panel-&gt;addChild(EgyptImage);\n\tg_Panel-&gt;addChild(EgyptText);\n}</code></pre>\n<hr/>\n<h2>3.加载按钮</h2>\n<pre><code class=\"language-cpp\">void InitButton()\n{\n\t// 创建开始按钮\n\tauto startBtn = gcnew Button;\n\tstartBtn-&gt;setScale(1.5f, 1.5f);\n\n\t// 设置按钮图片\n\tstartBtn-&gt;setNormal(gcnew Sprite(L\"res/LS07.png\"));\n\n\t// 设置按钮被选中时的图片\n\tstartBtn-&gt;setSelected(gcnew Sprite(L\"res/LS08.png\"));\n\n\t// 设置按钮禁用时的图片\n\tstartBtn-&gt;setDisabled(gcnew Sprite(L\"res/LS09.png\"));\n\n\t// 设置按钮位置\n\tstartBtn-&gt;setPos(Window::getWidth() / 2, Window::getHeight() - 120);\n\n\t// 添加开始按钮\n\tg_Scene-&gt;addChild(startBtn);\n\n\t// 创建左选按钮\n\tg_LeftButton = gcnew Button;\n\tg_LeftButton-&gt;setScale(1.5f, 1.5f);\n\tg_LeftButton-&gt;setNormal(gcnew Sprite(L\"res/LS01.png\"));\n\tg_LeftButton-&gt;setSelected(gcnew Sprite(L\"res/LS02.png\"));\n\tg_LeftButton-&gt;setDisabled(gcnew Sprite(L\"res/LS03.png\"));\n\tg_LeftButton-&gt;setPosX(g_LeftButton-&gt;getWidth() / 2);\n\tg_LeftButton-&gt;setPosY((Window::getHeight() - g_LeftButton-&gt;getHeight()) / 2);\n\tg_LeftButton-&gt;setEnable(false);\n\tg_Scene-&gt;addChild(g_LeftButton);\n\n\t// 点击左按钮执行 ClickLeft 函数\n\tg_LeftButton-&gt;setClickFunc(ClickLeft);\n\n\t// 创建右选按钮\n\tg_RightButton = gcnew Button();\n\tg_RightButton-&gt;setScale(1.5f, 1.5f);\n\tg_RightButton-&gt;setNormal(gcnew Sprite(L\"res/LS04.png\"));\n\tg_RightButton-&gt;setSelected(gcnew Sprite(L\"res/LS05.png\"));\n\tg_RightButton-&gt;setDisabled(gcnew Sprite(L\"res/LS06.png\"));\n\tg_RightButton-&gt;setPosX(Window::getWidth() - g_RightButton-&gt;getWidth() / 2);\n\tg_RightButton-&gt;setPosY((Window::getHeight() - g_RightButton-&gt;getHeight()) / 2);\n\tg_Scene-&gt;addChild(g_RightButton);\n\n\t// 点击右按钮执行 ClickRight 函数\n\tg_RightButton-&gt;setClickFunc(ClickRight);\n}</code></pre>\n<hr/>\n<h2>4.移动关卡面板</h2>\n<pre><code class=\"language-cpp\">void MovePanel()\n{\n\t// 创建目标点\n\tauto point = Point(-Window::getWidth() * g_Level, 0);\n\n\t// 创建移动动画\n\tauto action = gcnew MoveTo(0.5f, point);\n\n\t// 停止 panel 的所有动画\n\tg_Panel-&gt;stopAllActions();\n\n\t// 执行新动画\n\tg_Panel-&gt;runAction(action);\n}\n</code></pre>\n<hr/>\n<h2>5.点击按钮</h2>\n<h3>左LEFT</h3>\n<pre><code class=\"language-cpp\">void ClickLeft()\n{\n\t// level 为 1 时，禁用左选按钮\n\tif (g_Level == 1)\n\t{\n\t\tg_LeftButton-&gt;setEnable(false);\n\t}\n\n\t// 按下左选按钮后，把右选按钮启动\n\tg_RightButton-&gt;setEnable(true);\n\t\n\t// level 减一\n\tg_Level--;\n\t\n\t// 移动 panel\n\tMovePanel();\n}\n</code></pre>\n<h3>右RIGHT</h3>\n<pre><code class=\"language-cpp\">void ClickRight()\n{\n\t// level 为 1 时，禁用右选按钮\n\tif (g_Level == 1)\n\t{\n\t\tg_RightButton-&gt;setEnable(false);\n\t}\n\n\t// 按下右选按钮后，把左选按钮启动\n\tg_LeftButton-&gt;setEnable(true);\n\n\t// level 加一\n\tg_Level++;\n\n\t// 移动 panel\n\tMovePanel();\n}</code></pre>\n<hr/>\n<h1>五.效果图片</h1>\n<p style=\"text-align:center;\"><img alt=\"9d17721a70f74ab2aeb78eac94df058e.png\" src=\"image\\9d17721a70f74ab2aeb78eac94df058e.png\"/></p>\n<p> </p>\n<hr/>\n<h1>六.总结</h1>\n<p>本节课主要是讲解了Easy2D引擎实现的选择关卡场景示例，至此选择关卡场景示例的思想博主已经真真切切彻彻底底分享完了，相信大家对这个逻辑有了一定的理解，大家可以自己动手敲敲代码，感受一下</p>\n<p>包教包会，帅的人已然点赞收藏关注，而丑的人还在犹豫，被犹豫了，快三连吧！</p>\n<hr/>\n<h1>想要源代码的，请点击作者资源下载，免费哦！！！</h1>\n<p>求求了</p>\n<hr/>\n<p>  感谢每一个观看本篇文章的朋友，更多精彩敬请期待：<a href=\"https://blog.csdn.net/CSDN_linyanchen?spm=1000.2115.3001.5343\" title=\"iecne的博客_CSDN博客-C++保姆级入门教程领域博主\">iecne的博客_CSDN博客-C++保姆级入门教程领域博主</a></p>\n<p>文章存在借鉴，如有侵权请联系修改删除！<img alt=\"dd8b4788b2554df4bec4b8202395cad2.gif\" src=\"https://img-blog.csdnimg.cn/dd8b4788b2554df4bec4b8202395cad2.gif\"/></p>\n<p> </p>\n<p> </p>\n<p> </p>\n</div>\n</div>"}