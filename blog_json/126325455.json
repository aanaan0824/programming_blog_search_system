{"blogid": "126325455", "writerAge": "码龄1年", "writerBlogNum": "108", "writerCollect": "9465", "writerComment": "5184", "writerFan": "23628", "writerGrade": "7级", "writerIntegral": "16279", "writerName": "热爱编程的小白白", "writerProfileAdress": "writer_image\\profile_126325455.jpg", "writerRankTotal": "549", "writerRankWeekly": "28", "writerThumb": "6444", "writerVisitNum": "229753", "blog_read_count": "628", "blog_time": "已于 2022-08-21 18:06:45 修改", "blog_title": "【SSM框架】测试 修改.删除.查询功能", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<blockquote>\n<p>🍓个人主页：<a href=\"https://blog.csdn.net/Javascript_tsj?type=blog\" title=\"个人主页\">个人主页</a></p>\n<p>🍒系列专栏：<a href=\"https://blog.csdn.net/javascript_tsj/category_11957185.html?spm=1001.2014.3001.5482\" title=\"SSM框架\">SSM框架</a></p>\n<p>💬推荐一款模拟面试、刷题神器，从基础到大厂面试题👉<a href=\"https://www.nowcoder.com/link/pc_csdncpt_xbb_java\" title=\"点击跳转刷题网站进行注册学习\">点击跳转刷题网站进行注册学习</a></p>\n</blockquote>\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"-toc\" style=\"margin-left:40px;\"></p>\n<p id=\"1.%E5%88%9B%E5%BB%BAsqlSession%E5%B7%A5%E5%85%B7%E7%B1%BB-toc\" style=\"margin-left:40px;\"><a href=\"#1.%E5%88%9B%E5%BB%BAsqlSession%E5%B7%A5%E5%85%B7%E7%B1%BB\">1.创建sqlSession工具类</a></p>\n<p id=\"2.%E6%B5%8B%E8%AF%95%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD-toc\" style=\"margin-left:40px;\"><a href=\"#2.%E6%B5%8B%E8%AF%95%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD\">2.测试修改功能</a></p>\n<p id=\"3.%E6%B5%8B%E8%AF%95%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD-toc\" style=\"margin-left:40px;\"><a href=\"#3.%E6%B5%8B%E8%AF%95%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD\">3.测试删除功能</a></p>\n<p id=\"%C2%A04.%E6%B5%8B%E8%AF%95%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD-toc\" style=\"margin-left:40px;\"><a href=\"#%C2%A04.%E6%B5%8B%E8%AF%95%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD\"> 4.测试查询功能</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h2 id=\"1.%E5%88%9B%E5%BB%BAsqlSession%E5%B7%A5%E5%85%B7%E7%B1%BB\"><span style=\"color:#4da8ee;\">1.创建sqlSession工具类</span></h2>\n<p>在<a href=\"https://so.csdn.net/so/search?q=MyBatis&amp;spm=1001.2101.3001.7020\" title=\"MyBatis\">MyBatis</a> 使用中，如果每个方法执行时都需要读取配置文件，并根据配置文件的信息构建SqlSessionFactory对象，然后创建SqlSession 对象，<strong><span style=\"background-color:#ffd900;\">这会导致类大量的重复代码。为了简化开发，需要将重复代码封装到一个工具类中</span></strong>。如下：</p>\n<p><img alt=\"\" height=\"826\" src=\"image\\b47f0008a4ce4978ba0c2da62649bd1e.png\" width=\"1200\"/></p>\n<p></p>\n<pre><code class=\"language-java\">package com.atguigu.mybatis.utils;\n\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSession;\nimport org.apache.ibatis.session.SqlSessionFactory;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\nimport java.io.IOException;\nimport java.io.InputStream;\n\npublic class SqlSessionUtils {\n\n    public SqlSession getSqlSession() {\n        SqlSession sqlSession = null;\n        {\n            try {\n                InputStream  is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n                SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n                SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n                sqlSession = sqlSessionFactory.openSession(true);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        return sqlSession;\n    }\n\n\n\n\n}\n</code></pre>\n<p></p>\n<blockquote>\n<p>后面的<strong> 修改 删除 查询 </strong>只是简单测试，后期会优化。</p>\n</blockquote>\n<h2 id=\"2.%E6%B5%8B%E8%AF%95%E4%BF%AE%E6%94%B9%E5%8A%9F%E8%83%BD\"><span style=\"color:#4da8ee;\">2.测试修改功能</span></h2>\n<p><img alt=\"\" height=\"550\" src=\"image\\bf8077e405c343cd95ea9bf5d32d0fa9.png\" width=\"1200\"/></p>\n<p></p>\n<pre><code>public interface UserMapper {\n\n    /**  修改用户信息 */\n    void updateUser();\n\n}</code></pre>\n<p><img alt=\"\" height=\"654\" src=\"image\\f23f8be23d154a95a8215227a3b9cea9.png\" width=\"1200\"/></p>\n<p></p>\n<blockquote>\n<p>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;<br/> &lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;<br/> &lt;mapper namespace=\"com.atguigu.mybatis.mapper.UserMapper\"&gt;<br/>    <br/>     &lt;update id=\"updateUser\"&gt;<br/> -- 现在只是测试,后期会优化<br/> update t_user set username='root',password='root' where id=2;<br/>     &lt;/update&gt;<br/> &lt;/mapper&gt;</p>\n</blockquote>\n<p></p>\n<p><img alt=\"\" height=\"639\" src=\"image\\c93912f0942d49d3a164ed613c60e0b9.png\" width=\"1200\"/></p>\n<p></p>\n<pre><code class=\"language-java\">public class MybatisTest {\n    @Test\n    public void test() {\n        SqlSessionUtils sqlSessionUtils = new SqlSessionUtils();\n        SqlSession sqlSession = sqlSessionUtils.getSqlSession();\n\n\n    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n\n     userMapper.updateUser();\n     sqlSession.close();\n\n\n    }\n\n}</code></pre>\n<p><strong>运行后:</strong></p>\n<p><img alt=\"\" height=\"368\" src=\"image\\148beacc7ef746c7811b378863340190.png\" width=\"1200\"/></p>\n<p> <img alt=\"\" height=\"254\" src=\"image\\e336fbd744a84aa8ba073055b828487a.png\" width=\"967\"/></p>\n<p></p>\n<p></p>\n<h2 id=\"3.%E6%B5%8B%E8%AF%95%E5%88%A0%E9%99%A4%E5%8A%9F%E8%83%BD\"><span style=\"color:#4da8ee;\">3.测试删除功能</span></h2>\n<pre><code class=\"language-java\">public interface UserMapper {\n\n\n    /**  删除用户信息 */\n    void deleteUser();\n\n}</code></pre>\n<blockquote>\n &lt;delete id=\"deleteUser\"&gt; delete from t_user where id=3; &lt;/delete&gt;\n</blockquote>\n<p></p>\n<pre><code class=\"language-java\">public class MybatisTest {\n    @Test\n    public void test() {\n        SqlSessionUtils sqlSessionUtils = new SqlSessionUtils();\n        SqlSession sqlSession = sqlSessionUtils.getSqlSession();\n\n\n    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n\n     userMapper.deleteUser();\n     sqlSession.close();\n\n\n    }\n\n}</code></pre>\n<p> <img alt=\"\" height=\"245\" src=\"image\\b703594549e844cea147b316244776c0.png\" width=\"1065\"/></p>\n<p><img alt=\"\" height=\"244\" src=\"image\\4766991f05a7448f9aef99cd2324254c.png\" width=\"923\"/></p>\n<h2 id=\"%C2%A04.%E6%B5%8B%E8%AF%95%E6%9F%A5%E8%AF%A2%E5%8A%9F%E8%83%BD\"><span style=\"color:#4da8ee;\"> 4.测试查询功能</span></h2>\n<p></p>\n<pre><code class=\"language-java\">public interface UserMapper {\n\n    /**  查询用户信息 */\n    List&lt;User&gt; getAllUser();\n\n}</code></pre>\n<blockquote>\n<div>\n<span style=\"color:#777777;\">注意： </span>\n</div>\n<div>\n<span style=\"color:#777777;\">查询的标签</span>\n<span style=\"color:#777777;\">select</span>\n<span style=\"color:#777777;\">必须设置属性</span>\n<span style=\"color:#777777;\">resultType</span>\n<span style=\"color:#777777;\">或</span>\n<span style=\"color:#777777;\">resultMap</span>\n<span style=\"color:#777777;\">，用于设置实体类和数据库表的映射关系 </span>\n</div>\n<div>\n<strong><span style=\"color:#777777;\"><span style=\"background-color:#ffd900;\">resultType</span></span></strong>\n<span style=\"color:#777777;\"><strong><span style=\"background-color:#ffd900;\">：</span></strong>自动映射，用于属性名和表中字段名一致的情况 </span>\n</div>\n<div>\n<strong><span style=\"color:#777777;\"><span style=\"background-color:#ffd900;\">resultMap</span></span></strong>\n<span style=\"color:#777777;\"><strong><span style=\"background-color:#ffd900;\">：</span></strong>自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</span>\n</div>\n</blockquote>\n<blockquote>\n<p>    &lt;select id=\"getAllUser\" resultType=\"com.atguigu.mybatis.pojo.User\"&gt;</p>\n<p>        select * from t_user;<br/>     &lt;/select&gt;</p>\n</blockquote>\n<pre><code class=\"language-java\">public class MybatisTest {\n    @Test\n    public void test() {\n        SqlSessionUtils sqlSessionUtils = new SqlSessionUtils();\n        SqlSession sqlSession = sqlSessionUtils.getSqlSession();\n\n\n    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n\n        List&lt;User&gt; allUser = userMapper.getAllUser();\n        allUser.forEach(System.out::println);\n        sqlSession.close();\n\n\n    }\n\n}</code></pre>\n<p> <img alt=\"\" height=\"241\" src=\"image\\63ea789e200544f5ad675a5b5f585f93.png\" width=\"1040\"/></p>\n<p> <img alt=\"\" height=\"166\" src=\"image\\f8a11b2fbe484e3594b36c8857bd6d9b.png\" width=\"684\"/></p>\n<p></p>\n<p></p>\n</div>\n</div>"}