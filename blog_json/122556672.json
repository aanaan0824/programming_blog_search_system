{"blogid": "122556672", "writerAge": "码龄2年", "writerBlogNum": "144", "writerCollect": "10699", "writerComment": "10244", "writerFan": "34439", "writerGrade": "7级", "writerIntegral": "22433", "writerName": "Developer 小马", "writerProfileAdress": "writer_image\\profile_122556672.jpg", "writerRankTotal": "321", "writerRankWeekly": "8", "writerThumb": "7534", "writerVisitNum": "5167455", "blog_read_count": "55677", "blog_time": "已于 2022-03-01 20:42:22 修改", "blog_title": "学会在Vue项目中插入高德地图JS API与地图的相关设置，看这一篇就够了~（保姆级精简教学）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p id=\"main-toc\">        高德地图API官网：<a href=\"https://lbs.amap.com/\" title=\"高德开放平台 | 高德地图API\">高德开放平台 | 高德地图API</a>。由于博主是基于前端 Vue 框架进行开发的，所以针对地图<strong> JavaScript API</strong> <strong>结合 Vue </strong>展开介绍。</p>\n<p><img alt=\"\" height=\"639\" src=\"image\\53b2d8499c634b8aae60f5f41a8facc5.png\" width=\"1200\"/></p>\n<hr/>\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%E4%B8%80%E3%80%81%E6%A1%88%E4%BE%8B%E6%95%88%E6%9E%9C-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B8%80%E3%80%81%E6%A1%88%E4%BE%8B%E6%95%88%E6%9E%9C\">一、案例效果</a></p>\n<p id=\"%E4%BA%8C%E3%80%81%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%BA%8C%E3%80%81%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87\">二、开发准备</a></p>\n<p id=\"1.%20%E6%B3%A8%E5%86%8C%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E8%B4%A6%E5%8F%B7%EF%BC%8C%E8%BF%9B%E5%85%A5%E6%8E%A7%E5%88%B6%E5%8F%B0-toc\" style=\"margin-left:80px;\"><a href=\"#1.%20%E6%B3%A8%E5%86%8C%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E8%B4%A6%E5%8F%B7%EF%BC%8C%E8%BF%9B%E5%85%A5%E6%8E%A7%E5%88%B6%E5%8F%B0\">1. 注册高德开放平台账号</a></p>\n<p id=\"2.%20%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0%20key%20%E5%80%BC-toc\" style=\"margin-left:80px;\"><a href=\"#2.%20%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0%20key%20%E5%80%BC\">2. 创建应用添加 key 值</a></p>\n<p id=\"%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6\">三、项目中使用地图组件</a></p>\n<p id=\"1.%20npm%20%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%20API-toc\" style=\"margin-left:80px;\"><a href=\"#1.%20npm%20%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%20API\">1. npm 获取高德地图 API</a></p>\n<p id=\"2.%20%E9%A1%B5%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%20API-toc\" style=\"margin-left:80px;\"><a href=\"#2.%20%E9%A1%B5%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%20API\">2. 页面中使用地图 API（案例）</a></p>\n<p id=\"%EF%BC%885%EF%BC%89%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%2B%E8%AF%A6%E7%BB%86%E6%B3%A8%E9%87%8A-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%885%EF%BC%89%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%2B%E8%AF%A6%E7%BB%86%E6%B3%A8%E9%87%8A\">3. 完整代码+详细注释</a></p>\n<p id=\"%E5%9B%9B%E3%80%81%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%A6%86%E7%9B%96%E7%89%A9%E3%80%81%E5%9B%BE%E5%B1%82%E3%80%81%E6%8F%92%E4%BB%B6%E3%80%81%E4%BA%8B%E4%BB%B6%E7%AD%89%E5%B1%9E%E6%80%A7-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%9B%9B%E3%80%81%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%A6%86%E7%9B%96%E7%89%A9%E3%80%81%E5%9B%BE%E5%B1%82%E3%80%81%E6%8F%92%E4%BB%B6%E3%80%81%E4%BA%8B%E4%BB%B6%E7%AD%89%E5%B1%9E%E6%80%A7\">四、在地图中添加覆盖物、图层、插件、事件等属性</a></p>\n<p id=\"1.%20%E6%B7%BB%E5%8A%A0%E5%9B%BE%E5%B1%82-toc\" style=\"margin-left:80px;\"><a href=\"#1.%20%E6%B7%BB%E5%8A%A0%E5%9B%BE%E5%B1%82\">1. 添加图层</a></p>\n<p id=\"2.%20%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6(%E5%9C%B0%E5%9B%BE%E6%8E%A7%E4%BB%B6)-toc\" style=\"margin-left:80px;\"><a href=\"#2.%20%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%28%E5%9C%B0%E5%9B%BE%E6%8E%A7%E4%BB%B6%29\">2. 在地图中使用插件(地图控件)</a></p>\n<p id=\"3.%20%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE-toc\" style=\"margin-left:80px;\"><a href=\"#3.%20%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE\">3. 其他设置</a></p>\n<hr id=\"hr-toc\"/>\n<h2>一、案例效果</h2>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/a3528ea5026f44cca73ab2397b5f1a03.gif\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/780e53d40cac40c2851008ed79f1e265.gif\"/></p>\n<h2 id=\"%E4%BA%8C%E3%80%81%E5%BC%80%E5%8F%91%E5%87%86%E5%A4%87\">二、开发准备</h2>\n<p><span style=\"color:#fe2c24;\"><em>        需要注意想要使用 JS API 必须注册账号并获取 key 值。</em></span></p>\n<h3 id=\"1.%20%E6%B3%A8%E5%86%8C%E9%AB%98%E5%BE%B7%E5%BC%80%E6%94%BE%E5%B9%B3%E5%8F%B0%E8%B4%A6%E5%8F%B7%EF%BC%8C%E8%BF%9B%E5%85%A5%E6%8E%A7%E5%88%B6%E5%8F%B0\"><strong>1. 注册高德开放平台账号</strong></h3>\n<p><strong>        </strong>正常输入个人信息注册即可。</p>\n<p><img alt=\"\" height=\"650\" src=\"image\\56acc35bd3fc4550ab0ce2466d6f037b.png\" width=\"1200\"/></p>\n<h3 id=\"2.%20%E5%88%9B%E5%BB%BA%E5%BA%94%E7%94%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0%20key%20%E5%80%BC\"><strong>2. 创建应用添加 key 值</strong></h3>\n<p><strong>        </strong>注册成功之后，进入控制台，然后点击创建新应用；</p>\n<p><img alt=\"\" height=\"653\" src=\"image\\f630fa870acc4a69aaa9306c4f9ea114.png\" width=\"1200\"/></p>\n<p>        填写名称应用名称和类型之后就可以看到已创建的应用了；</p>\n<p><img alt=\"\" height=\"363\" src=\"image\\fd3362bdd8404d2ea62a79ad8581f52a.png\" width=\"1200\"/></p>\n<p>        接下来点击“添加”为应用添加 key 值；</p>\n<p><img alt=\"\" height=\"390\" src=\"image\\13381c8ad84844f58e225421967d4097.png\" width=\"1200\"/></p>\n<p>        注意此处我们应选择 Web 端(JS API)；</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"574\" src=\"image\\25bf6acef8a04248847c59508cdcd6c5.png\" width=\"722\"/></p>\n<p>        点击提交后，key 值获取成功。</p>\n<p><img alt=\"\" height=\"376\" src=\"image\\db420d50077a460f8799a18628bc1422.png\" width=\"1143\"/></p>\n<h2 id=\"%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6\">三、项目中使用地图组件</h2>\n<h3 id=\"1.%20npm%20%E5%91%BD%E4%BB%A4%E8%8E%B7%E5%8F%96%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%20API\">1. npm 获取高德地图 API</h3>\n<p>        首先在 Vue 项目中通过命令 <span style=\"color:#ff9900;\"><strong>npm i @amap/amap-jsapi-loader --save</strong></span> 获取高德地图 API； 下载成功之后就可以在自己的项目中使用地图 API 了。</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\2e102b048566413091f3990f0b79fbb8.png\"/></p>\n<h3 id=\"2.%20%E9%A1%B5%E9%9D%A2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%9C%B0%E5%9B%BE%20API\">2. 页面中使用地图 API（案例）</h3>\n<p id=\"%EF%BC%881%EF%BC%89%E6%96%B0%E5%BB%BA%20.vue%20%E9%A1%B5%E9%9D%A2%E6%96%87%E4%BB%B6%E5%B9%B6%E8%AE%BE%E7%BD%AE%E5%AE%B9%E5%99%A8\"><strong>（1）新建 .vue 页面文件并设置容器</strong></p>\n<pre><code class=\"language-html\">&lt;template&gt;\n  &lt;!--地图容器--&gt;\n  &lt;div id=\"container\"&gt;&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  export default {\n    name: \"gaode\"\n  }\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n  #container {\n    width: 80%;\n    height: 400px;\n    margin: 100px auto;\n    border: 2px solid red;\n  }\n&lt;/style&gt;</code></pre>\n<p id=\"%EF%BC%882%EF%BC%89%E5%9C%A8%E9%A1%B5%E9%9D%A2%E4%B8%AD%E5%BC%95%E5%85%A5%20amap-jsapi-loader%20%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96%20map%20%E5%AF%B9%E8%B1%A1\"><strong>（2）在页面中引入 amap-jsapi-loader 并初始化 map 对象</strong></p>\n<p>        样式设置完后在页面中引入 <span style=\"color:#fe2c24;\">amap-jsapi-loader </span>并初始化 map 对象；</p>\n<blockquote>\n<p>此处需注意 Vue2 和 Vue3 中引入与初始化方式都是不同的，注意自己的 Vue 版本。查看 Vue 版本在控制台中输入 <span style=\"color:#ff9900;\"><strong>npm list vue</strong></span> 命令即可；如下，博主用的是 vue2。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"243\" src=\"image\\db0da2b2e5fb401fbbdc9789d5248bd5.png\" width=\"456\"/></p>\n</blockquote>\n<p>vue2 方式（下文均以此方式为例）：</p>\n<pre><code class=\"language-html\">&lt;script&gt;\n  import AMapLoader from '@amap/amap-jsapi-loader'; //引入\n\n  export default {\n    name: \"gaode\",\n    data() {\n      return {\n        map: null //初始化 map 对象\n      }\n    }\n  }\n&lt;/script&gt;</code></pre>\n<p>vue3 方式：</p>\n<pre><code class=\"language-html\">&lt;script&gt;\n  import {shallowRef} from '@vue/reactivity' //引入\n\n  export default {\n    name: \"gaode\",\n    setup() {\n      const map = shallowRef(null);\n      return {\n        map,\n      }\n    },\n  }\n&lt;/script&gt;</code></pre>\n<p id=\"%EF%BC%883%EF%BC%89%E5%AE%9A%E4%B9%89%E5%9C%B0%E5%9B%BE%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0%20initMap%20%E5%B9%B6%E8%B0%83%E7%94%A8\"><strong>（3）定义地图初始化函数 initMap 并调用</strong></p>\n<pre><code class=\"language-javascript\">methods: {\n      initMap() {\n        AMapLoader.load({\n          key: \"ed2ea36f8564541569c370254845d93d\", //此处填入我们注册账号后获取的Key\n          version: \"2.0\", //指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n          plugins: [''], //需要使用的的插件列表，如比例尺'AMap.Scale'等\n        }).then((AMap) =&gt; {\n          this.map = new AMap.Map(\"container\", { //设置地图容器id\n            viewMode: \"3D\", //是否为3D地图模式\n            zoom: 5, //初始化地图级别\n            center: [105.602725, 37.076636], //初始化地图中心点位置\n          });\n        }).catch(e =&gt; {\n          console.log(e);\n        })\n      },\n    },\n    mounted() {\n      //挂载阶段调用，DOM初始化完成进行地图初始化\n      this.initMap();\n    }</code></pre>\n<h3 id=\"%EF%BC%885%EF%BC%89%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%2B%E8%AF%A6%E7%BB%86%E6%B3%A8%E9%87%8A\">3. 完整代码+详细注释</h3>\n<pre><code class=\"language-html\">&lt;template&gt;\n  &lt;div&gt;\n    &lt;div id=\"container\"&gt;&lt;/div&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import AMapLoader from '@amap/amap-jsapi-loader';\n\n  export default {\n    name: \"gaode\",\n    data() {\n      return {\n        map: null //初始化 map 对象\n      }\n    },\n    methods: {\n      initMap() {\n        AMapLoader.load({\n          key: \"ed2ea36f8564541569c370254845d93d\", //此处填入我们注册账号后获取的Key\n          version: \"2.0\", //指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15\n          plugins: [''], //需要使用的的插件列表，如比例尺'AMap.Scale'等\n        }).then((AMap) =&gt; {\n          this.map = new AMap.Map(\"container\", { //设置地图容器id\n            viewMode: \"3D\", //是否为3D地图模式\n            zoom: 5, //初始化地图级别\n            center: [105.602725, 37.076636], //初始化地图中心点位置\n          });\n        }).catch(e =&gt; {\n          console.log(e);\n        })\n      },\n    },\n    mounted() {\n      //DOM初始化完成进行地图初始化\n      this.initMap();\n    }\n  }\n&lt;/script&gt;\n\n&lt;style&gt;\n  #container {\n    width: 80%;\n    height: 400px;\n    margin: 100px auto;\n    border: 1px solid red;\n  }\n&lt;/style&gt;</code></pre>\n<h2 id=\"%E5%9B%9B%E3%80%81%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E6%B7%BB%E5%8A%A0%E8%A6%86%E7%9B%96%E7%89%A9%E3%80%81%E5%9B%BE%E5%B1%82%E3%80%81%E6%8F%92%E4%BB%B6%E3%80%81%E4%BA%8B%E4%BB%B6%E7%AD%89%E5%B1%9E%E6%80%A7\">四、在地图中添加覆盖物、图层、插件、事件等属性</h2>\n<p>        经过前三步的配置，一个最基础的高德地图就成型了，但实际应用中仅仅这样肯定是不行的，项目中需求会有很多。所以当我们想要改变它的样式，或者是在地图上添加一些其他属性如图层、点标记、点击事件时，只需在以上代码 <span style=\"color:#ff9900;\"><strong>this.map = new AMap.Map(\"container\", { }</strong></span> 的同级位置添加相关代码即可。</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"344\" src=\"image\\1877f63ad3a74d75b9fd6ea015b2700f.png\" width=\"786\"/></p>\n<p>我们简单举几个例子：</p>\n<h3 id=\"1.%20%E6%B7%BB%E5%8A%A0%E5%9B%BE%E5%B1%82\">1. 添加图层</h3>\n<p>        默认情况下，地图只显示标准底图，如需要叠加别的图层，可以通过map.add方法添加图层。我们试着添加一个卫星图层 <a href=\"https://lbs.amap.com/api/jsapi-v2/documentation#Satellite\" title=\"TileLayer.Satellite\">TileLayer.Satellite</a>，如下：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"419\" src=\"image\\2eeaaab0738c432ab45994241854887f.png\" width=\"769\"/></p>\n<p>效果如下，原始地图变为卫星地图：</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/0b940e009e084b469ab9e0678d661067.gif\"/></p>\n<h3 id=\"2.%20%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6(%E5%9C%B0%E5%9B%BE%E6%8E%A7%E4%BB%B6)\">2. 在地图中使用插件(地图控件)</h3>\n<p>        JS API 提供了众多的插件功能，这些功能不会主动随着 JSAPI 主体资源下发，需要引入之后才能使用这些插件的功能。在使用插件之前我们需要<strong>先将各个插件引入到 <span style=\"color:#fe2c24;\">plugin</span> 数组中</strong>，随后使用 <span style=\"color:#fe2c24;\"><strong>addControl</strong></span> 添加至地图中。</p>\n<p>        如下代码添加了图层切换、比例尺和鹰眼三个插件：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"424\" src=\"image\\ac744e96929d44108e6aa1d57afa11ff.png\" width=\"757\"/></p>\n<p>效果如下：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"447\" src=\"image\\e003d2e0087148e699fba5aa6ae8eec7.png\" width=\"1192\"/></p>\n<h3 id=\"3.%20%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE\">3. 其他设置</h3>\n<p>        方法就是以上介绍的方法，大同小异。掌握方法后再设置花里胡哨也就不在话下了，更多属性与插件请参见 JS API 官网：<a class=\"has-card\" href=\"https://lbs.amap.com/api/jsapi-v2/summary\" title=\"概述-地图 JS API v2.0 | 高德地图API\"><span class=\"link-card-box\"><span class=\"link-title\">概述-地图 JS API v2.0 | 高德地图API</span><span class=\"link-desc\">高德开放平台官网</span><span class=\"link-link\"><img alt=\"\" class=\"link-link-icon\" src=\"https://a.amap.com/pc/static/favicon.ico\"/>https://lbs.amap.com/api/jsapi-v2/summary</span></span></a></p>\n</div>\n</div>"}