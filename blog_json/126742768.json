{"blogid": "126742768", "writerAge": "码龄2年", "writerBlogNum": "120", "writerCollect": "457", "writerComment": "18", "writerFan": "1716", "writerGrade": "4级", "writerIntegral": "1306", "writerName": "Shewyoo", "writerProfileAdress": "writer_image\\profile_126742768.jpg", "writerRankTotal": "13850", "writerRankWeekly": "4214", "writerThumb": "77", "writerVisitNum": "51669", "blog_read_count": "17", "blog_time": "于 2022-09-07 12:26:53 发布", "blog_title": "【Python】-- 数据可视化案例（疫情确诊的折线图）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h3>案例描述</h3>\n<p>根据可参考数据，实现对疫情确诊人数数据的可视化。</p>\n<p>利用json转换工具，将数据格式化，需要取出下面两部分的内容。</p>\n<p><img alt=\"\" height=\"617\" src=\"image\\fbcffcf251674133b798f592e903069d.png\" width=\"1200\"/></p>\n<p>可视化效果图：</p>\n<p><img alt=\"\" height=\"757\" src=\"image\\71deda36e9b34ee889783b4fc4464b1e.png\" width=\"1200\"/> </p>\n<hr/>\n<p> </p>\n<p> </p>\n<h1>实现步骤</h1>\n<h2>一、导入模块</h2>\n<p>导入可能用到的模块</p>\n<pre><code class=\"hljs\">import json\nfrom pyecharts.charts import Line</code></pre>\n<h2>二、读取文件内容</h2>\n<p>打开相应的文件，使用变量us_data保存文件的内容</p>\n<pre><code class=\"hljs\">f_us = open(\"D:/美国.txt\",\"r\",encoding=\"UTF-8\")\nus_data = f_us.read()</code></pre>\n<h3>去掉不符合json规范的开头</h3>\n<p>json文件是一个单独的字典或一个内部元素都是字典的列表。</p>\n<p>所以文件内容是字典或列表的格式。</p>\n<pre><code class=\"hljs\">us_data = us_data.replace(\"jsonp_1629344292311_69436(\",\"\")</code></pre>\n<h3>去掉不符合json规范的结尾</h3>\n<p>使用切片截取除了最后两个字符的其他字符。</p>\n<pre><code class=\"hljs\">us_data = us_data[:-2]</code></pre>\n<h2>三、json转换python</h2>\n<p>将json文件内容转换为python，即字符串转换为字典。</p>\n<pre><code class=\"hljs\">us_dict = json.loads(us_data)</code></pre>\n<h2>四、获取需要用到的数据</h2>\n<p>获取字典中用于x、y轴的数据。</p>\n<pre><code class=\"hljs\"># 获取trend key\ntrend_data = us_dict['data'][0]['trend']\n# 获取日期数据，取2020一年的数据,到314下标结束\nx_data = trend_data['updateDate'][:314]\n# 获取确诊数据\ny_data = trend_data['list'][0]['data'][:314]</code></pre>\n<h2>五、生成图表</h2>\n<h3>构建对象</h3>\n<pre><code class=\"hljs\">line = Line()</code></pre>\n<h3>添加x、y轴数据</h3>\n<pre><code class=\"hljs\">line.add_xaxis(x_data)\nline.add_yaxis(\"美国确诊人数\",y_data)</code></pre>\n<p>如果不想折线图上显示数字数据可以这样写</p>\n<pre><code class=\"hljs\">line.add_yaxis(\"美国确诊人数\",y_data,label_opts=LabelOpts(is_show=False))</code></pre>\n<h3>设置全局选项</h3>\n<pre><code class=\"hljs\"># 先导入需要用到的模块\nfrom pyecharts.options import TitleOpts\n# 设置\nline.set_global_opts(\n    title_opts=TitleOpts(title=\"2020年美国确诊人数折线图\",pos_left=\"center\",pos_bottom=\"1%\")\n)</code></pre>\n<h3> 调用render方法，生成图表</h3>\n<pre><code class=\"hljs\">line.render()</code></pre>\n<h2>六、关闭文件</h2>\n<p>在打开文件，使用完文件后，一定记得关闭文件。</p>\n<pre><code class=\"hljs\">f_us.close()</code></pre>\n<p></p>\n<p>运行后打开render.html文件就可以了。</p>\n<hr/>\n<p></p>\n</div>\n</div>"}