{"blogid": "120563650", "writerAge": "码龄2年", "writerBlogNum": "166", "writerCollect": "647", "writerComment": "98", "writerFan": "90", "writerGrade": "5级", "writerIntegral": "2233", "writerName": "奋斗的龙猫", "writerProfileAdress": "writer_image\\profile_120563650.jpg", "writerRankTotal": "8647", "writerRankWeekly": "58074", "writerThumb": "172", "writerVisitNum": "143330", "blog_read_count": "38336", "blog_time": "于 2021-09-30 11:29:32 发布", "blog_title": "MySQL group_concat()详解", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<ul><li>GROUP_CONCAT(xxx)：是将分组中括号里对应的字符串进行连接.如果分组中括号里的参数xxx有多行，那么就会将这多行的字符串连接，每个字符串之间会有特定的符号进行分隔。<br/> 对应的语法格式</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 将分组中column1这一列对应的多行的值按照column2 升序或者降序进行连接，其中分隔符为seq</span>\n<span class=\"token comment\"># 如果用到了DISTINCT，将表示将不重复的column1按照column2升序或者降序连接</span>\n<span class=\"token comment\"># 如果没有指定SEPARATOR的话，也就是说没有写，那么就会默认以 ','分隔</span>\nGROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token keyword\">DISTINCT</span><span class=\"token punctuation\">]</span> column1 <span class=\"token punctuation\">[</span><span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> column2 <span class=\"token keyword\">ASC</span>\\<span class=\"token keyword\">DESC</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>SEPARATOR seq<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>[ ORDER BY column2 ASC\\DESC] :表示将会根据column2升序或者降序连接.其中<strong>column2不一定一定要求是column1,只要保证column2在这个分组中即可</strong>.如果<strong>没有写ORDER BY句段，那么连接是没有顺序的</strong>。<br/> [ SEPARATOR seq] : 表示各个column1将会<strong>以什么分隔符进行分隔</strong>，例<strong>如SEPARATOR '<em>’,则表示column1将会以</em>进行分隔。如果没有指定seq的时候，也即没有写SEPARATOR seq这个句段，那么就会默认是以<code>,</code>分隔的</strong>。<br/> <strong>CONCAT函数中要连接的数据含有NULL，最后返回的是NULL，但是GROUP_CONCAT不会这样，他会忽略NULL值。</strong></p>\n<pre><code class=\"prism language-sql\">    mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employee2<span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> name      <span class=\"token operator\">|</span> age  <span class=\"token operator\">|</span> salary  <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">29</span> <span class=\"token operator\">|</span> <span class=\"token number\">30000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 小东      <span class=\"token operator\">|</span>   <span class=\"token number\">30</span> <span class=\"token operator\">|</span> <span class=\"token number\">40000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> 小非      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">23456.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">7</span> <span class=\"token operator\">|</span> 晓飞      <span class=\"token operator\">|</span>   <span class=\"token number\">30</span> <span class=\"token operator\">|</span> <span class=\"token number\">15000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">8</span> <span class=\"token operator\">|</span> 小林      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">24000.0</span> <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">10</span> <span class=\"token operator\">|</span> 小五      <span class=\"token operator\">|</span>   <span class=\"token number\">20</span> <span class=\"token operator\">|</span>  <span class=\"token number\">4500.0</span> <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">11</span> <span class=\"token operator\">|</span> 张山      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">40000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">12</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">28</span> <span class=\"token operator\">|</span> <span class=\"token number\">35000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">13</span> <span class=\"token operator\">|</span> 李四      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">50000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">17</span> <span class=\"token operator\">|</span> 王武      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">56000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">18</span> <span class=\"token operator\">|</span> 猪小屁    <span class=\"token operator\">|</span>    <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">56000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">19</span> <span class=\"token operator\">|</span> 小玉      <span class=\"token operator\">|</span>   <span class=\"token number\">25</span> <span class=\"token operator\">|</span> <span class=\"token number\">58000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">21</span> <span class=\"token operator\">|</span> 小张      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">50000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">22</span> <span class=\"token operator\">|</span> 小胡      <span class=\"token operator\">|</span>   <span class=\"token number\">25</span> <span class=\"token operator\">|</span> <span class=\"token number\">25000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">96</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">35000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">97</span> <span class=\"token operator\">|</span> 小林      <span class=\"token operator\">|</span>   <span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">20000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token number\">16</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.16</span> sec<span class=\"token punctuation\">)</span>\n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> dept_id<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>name <span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> age <span class=\"token keyword\">DESC</span> SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- 分组中的name中的多行数据将按照age降序进行连接，分隔符为 * </span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span> employee2\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> dept_id<span class=\"token punctuation\">;</span> <span class=\"token comment\">-- 注意如果这里没有GROUP BY dept_id，那么就会因为输出dept_id而发生报错</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------------+</span>\n      <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>name <span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span> age <span class=\"token keyword\">DESC</span> SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------------+</span>\n      <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span> 小林<span class=\"token operator\">*</span>小五                                           <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 小肖<span class=\"token operator\">*</span>小玉<span class=\"token operator\">*</span>张山<span class=\"token operator\">*</span>小张<span class=\"token operator\">*</span>李四<span class=\"token operator\">*</span>小肖                          <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span> 小东<span class=\"token operator\">*</span>小肖<span class=\"token operator\">*</span>小胡<span class=\"token operator\">*</span>王武<span class=\"token operator\">*</span>小林<span class=\"token operator\">*</span>猪小屁                         <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小非                                                <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 晓飞                                                <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------------+</span>\n      \n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>name SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span> \n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span> employee2<span class=\"token punctuation\">;</span> <span class=\"token comment\">-- 这时候虽然没有使用GROUP BY，但是可以正常运行，此时是将所有的name连接,连接时为无序,分隔符为*</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">-------------------------------------------------------------------------------------------------------+</span>\n      <span class=\"token operator\">|</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>name SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span>                                                                      <span class=\"token operator\">|</span> \n      <span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------------------------------------------------------------------------</span>\n      <span class=\"token operator\">|</span> 小肖<span class=\"token operator\">*</span>小东<span class=\"token operator\">*</span>小非<span class=\"token operator\">*</span>晓飞<span class=\"token operator\">*</span>小林<span class=\"token operator\">*</span>小五<span class=\"token operator\">*</span>张山<span class=\"token operator\">*</span>小肖<span class=\"token operator\">*</span>李四<span class=\"token operator\">*</span>王武<span class=\"token operator\">*</span>猪小屁<span class=\"token operator\">*</span>小玉<span class=\"token operator\">*</span>小张<span class=\"token operator\">*</span>小胡<span class=\"token operator\">*</span>小肖<span class=\"token operator\">*</span>小林                                <span class=\"token operator\">|</span> \n      <span class=\"token operator\">+</span><span class=\"token comment\">-------------------------------------------------------------------------------------------------------+</span>\n      <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span> name SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- 将不同的name进行连接</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span> employee2<span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">-----------------------------------------------------------------------------------------------+</span>\n      <span class=\"token operator\">|</span> GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span> name SEPARATOR <span class=\"token string\">'*'</span><span class=\"token punctuation\">)</span>                                                     <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">-----------------------------------------------------------------------------------------------+</span>\n      <span class=\"token operator\">|</span> 小东<span class=\"token operator\">*</span>小五<span class=\"token operator\">*</span>小张<span class=\"token operator\">*</span>小林<span class=\"token operator\">*</span>小玉<span class=\"token operator\">*</span>小肖<span class=\"token operator\">*</span>小胡<span class=\"token operator\">*</span>小非<span class=\"token operator\">*</span>张山<span class=\"token operator\">*</span>晓飞<span class=\"token operator\">*</span>李四<span class=\"token operator\">*</span>猪小屁<span class=\"token operator\">*</span>王武                            <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">-----------------------------------------------------------------------------------------------+</span>\n      <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n      \n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> dept_id<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span> <span class=\"token keyword\">AS</span> employees\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span> employee2\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> dept_id<span class=\"token punctuation\">;</span> <span class=\"token comment\">-- 输出每个部门的员工，每个员工之间用逗号分隔，因为没有写SEPARATOR ，所以就默认以逗号分隔</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span> employees                                    <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span> 小林<span class=\"token punctuation\">,</span>小五                                    <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 小肖<span class=\"token punctuation\">,</span>张山<span class=\"token punctuation\">,</span>李四<span class=\"token punctuation\">,</span>小玉<span class=\"token punctuation\">,</span>小张<span class=\"token punctuation\">,</span>小肖                <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span> 小东<span class=\"token punctuation\">,</span>小肖<span class=\"token punctuation\">,</span>王武<span class=\"token punctuation\">,</span>猪小屁<span class=\"token punctuation\">,</span>小胡<span class=\"token punctuation\">,</span>小林              <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小非                                         <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 晓飞                                         <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token number\">5</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> dept_id<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span><span class=\"token keyword\">DISTINCT</span> name<span class=\"token punctuation\">)</span> <span class=\"token comment\">-- 将不同的name连接，并且用逗号分隔</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">AS</span> employees\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span>  employee2\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> dept_id<span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span> employees                                    <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span> 小五<span class=\"token punctuation\">,</span>小林                                    <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 小张<span class=\"token punctuation\">,</span>小玉<span class=\"token punctuation\">,</span>小肖<span class=\"token punctuation\">,</span>张山<span class=\"token punctuation\">,</span>李四                     <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span> 小东<span class=\"token punctuation\">,</span>小林<span class=\"token punctuation\">,</span>小肖<span class=\"token punctuation\">,</span>小胡<span class=\"token punctuation\">,</span>猪小屁<span class=\"token punctuation\">,</span>王武              <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小非                                         <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 晓飞                                         <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+----------------------------------------------+</span>\n      <span class=\"token number\">5</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>所以利用GROUP_CONCAT，就可以解决<a href=\"https://www.nowcoder.com/practice/6e86365af15e49d8abe2c3d4b5126e87?tpId=82&amp;&amp;tqId=29821&amp;rp=1&amp;ru=/activity/oj&amp;qru=/ta/sql/question-ranking\">按照dept_no进行汇总题目</a>了.<br/> 值得一提的是，<strong>GROUP_CONCAT只是将xxx这一列中的多行数据进行连接成为一行字符串，而CONCAT则是可以将多列数据进行连接。所以当GROUP_CONCAT和（CONCAT_WS或者CONCAT）一起使用的时候，使得查询更加有效</strong>.例如下面的例子正是如此:</p>\n<pre><code class=\"prism language-sql\">  mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> employee2<span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token operator\">|</span> id <span class=\"token operator\">|</span> name      <span class=\"token operator\">|</span> age  <span class=\"token operator\">|</span> salary  <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">29</span> <span class=\"token operator\">|</span> <span class=\"token number\">30000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 小东      <span class=\"token operator\">|</span>   <span class=\"token number\">30</span> <span class=\"token operator\">|</span> <span class=\"token number\">40000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">6</span> <span class=\"token operator\">|</span> 小非      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">23456.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">7</span> <span class=\"token operator\">|</span> 晓飞      <span class=\"token operator\">|</span>   <span class=\"token number\">30</span> <span class=\"token operator\">|</span> <span class=\"token number\">15000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span>  <span class=\"token number\">8</span> <span class=\"token operator\">|</span> 小林      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">24000.0</span> <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">10</span> <span class=\"token operator\">|</span> 小五      <span class=\"token operator\">|</span>   <span class=\"token number\">20</span> <span class=\"token operator\">|</span>  <span class=\"token number\">4500.0</span> <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">11</span> <span class=\"token operator\">|</span> 张山      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">40000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">12</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">28</span> <span class=\"token operator\">|</span> <span class=\"token number\">35000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">13</span> <span class=\"token operator\">|</span> 李四      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">50000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">17</span> <span class=\"token operator\">|</span> 王武      <span class=\"token operator\">|</span>   <span class=\"token number\">24</span> <span class=\"token operator\">|</span> <span class=\"token number\">56000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">18</span> <span class=\"token operator\">|</span> 猪小屁    <span class=\"token operator\">|</span>    <span class=\"token number\">2</span> <span class=\"token operator\">|</span> <span class=\"token number\">56000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">19</span> <span class=\"token operator\">|</span> 小玉      <span class=\"token operator\">|</span>   <span class=\"token number\">25</span> <span class=\"token operator\">|</span> <span class=\"token number\">58000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">21</span> <span class=\"token operator\">|</span> 小张      <span class=\"token operator\">|</span>   <span class=\"token number\">23</span> <span class=\"token operator\">|</span> <span class=\"token number\">50000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">22</span> <span class=\"token operator\">|</span> 小胡      <span class=\"token operator\">|</span>   <span class=\"token number\">25</span> <span class=\"token operator\">|</span> <span class=\"token number\">25000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">96</span> <span class=\"token operator\">|</span> 小肖      <span class=\"token operator\">|</span>   <span class=\"token number\">19</span> <span class=\"token operator\">|</span> <span class=\"token number\">35000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">|</span> <span class=\"token number\">97</span> <span class=\"token operator\">|</span> 小林      <span class=\"token operator\">|</span>   <span class=\"token number\">20</span> <span class=\"token operator\">|</span> <span class=\"token number\">20000.0</span> <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">----+-----------+------+---------+---------+</span>\n      <span class=\"token number\">16</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n      \n      mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">SELECT</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> dept_id<span class=\"token punctuation\">,</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>CONCAT<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span><span class=\"token string\">\"(\"</span><span class=\"token punctuation\">,</span>salary<span class=\"token punctuation\">,</span><span class=\"token string\">\")\"</span><span class=\"token punctuation\">)</span> SEPARATOR <span class=\"token string\">';'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">-- 将利用name(salary)进行连接，其中分隔符为';'</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">FROM</span>\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> employee2\n          <span class=\"token operator\">-</span><span class=\"token operator\">&gt;</span> <span class=\"token keyword\">GROUP</span> <span class=\"token keyword\">BY</span> dept_id<span class=\"token punctuation\">;</span>\n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+---------------------------------------------------------------------------------------------+</span>\n      <span class=\"token operator\">|</span> dept_id <span class=\"token operator\">|</span> GROUP_CONCAT<span class=\"token punctuation\">(</span>CONCAT<span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span><span class=\"token string\">\"(\"</span><span class=\"token punctuation\">,</span>salary<span class=\"token punctuation\">,</span><span class=\"token string\">\")\"</span><span class=\"token punctuation\">)</span> SEPARATOR <span class=\"token string\">';'</span><span class=\"token punctuation\">)</span>                                       \n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+---------------------------------------------------------------------------------------------+</span>\n      <span class=\"token operator\">|</span>    <span class=\"token boolean\">NULL</span> <span class=\"token operator\">|</span> 小林<span class=\"token punctuation\">(</span><span class=\"token number\">24000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小五<span class=\"token punctuation\">(</span><span class=\"token number\">4500.0</span><span class=\"token punctuation\">)</span>                                                                     \n      <span class=\"token operator\">|</span>       <span class=\"token number\">1</span> <span class=\"token operator\">|</span> 小肖<span class=\"token punctuation\">(</span><span class=\"token number\">30000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>张山<span class=\"token punctuation\">(</span><span class=\"token number\">40000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>李四<span class=\"token punctuation\">(</span><span class=\"token number\">50000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小玉<span class=\"token punctuation\">(</span><span class=\"token number\">58000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小张<span class=\"token punctuation\">(</span><span class=\"token number\">50000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小肖<span class=\"token punctuation\">(</span><span class=\"token number\">35000.0</span><span class=\"token punctuation\">)</span>               \n      <span class=\"token operator\">|</span>       <span class=\"token number\">2</span> <span class=\"token operator\">|</span> 小东<span class=\"token punctuation\">(</span><span class=\"token number\">40000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小肖<span class=\"token punctuation\">(</span><span class=\"token number\">35000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>王武<span class=\"token punctuation\">(</span><span class=\"token number\">56000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>猪小屁<span class=\"token punctuation\">(</span><span class=\"token number\">56000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小胡<span class=\"token punctuation\">(</span><span class=\"token number\">25000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>小林<span class=\"token punctuation\">(</span><span class=\"token number\">20000.0</span><span class=\"token punctuation\">)</span>             \n      <span class=\"token operator\">|</span>       <span class=\"token number\">3</span> <span class=\"token operator\">|</span> 小非<span class=\"token punctuation\">(</span><span class=\"token number\">23456.0</span><span class=\"token punctuation\">)</span>                                                                                 \n      <span class=\"token operator\">|</span>       <span class=\"token number\">4</span> <span class=\"token operator\">|</span> 晓飞<span class=\"token punctuation\">(</span><span class=\"token number\">15000.0</span><span class=\"token punctuation\">)</span>                                                                                 \n      <span class=\"token operator\">+</span><span class=\"token comment\">---------+---------------------------------------------------------------------------------------------+</span>\n      <span class=\"token number\">5</span> <span class=\"token keyword\">rows</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">set</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0.30</span> sec<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>详细的可以看一下这篇文章：<a href=\"https://www.yiibai.com/mysql/group_concat.html\">MySQL group_concat()</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}