{"blogid": "123402897", "writerAge": "码龄5年", "writerBlogNum": "80", "writerCollect": "432", "writerComment": "71", "writerFan": "341", "writerGrade": "4级", "writerIntegral": "1126", "writerName": "Dear_Xuan", "writerProfileAdress": "writer_image\\profile_123402897.jpg", "writerRankTotal": "19110", "writerRankWeekly": "26518", "writerThumb": "248", "writerVisitNum": "186321", "blog_read_count": "1098", "blog_time": "已于 2022-04-01 16:09:07 修改", "blog_title": "vercel制作api(python,nodejs,php)", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>前往我的主页以获得更好的阅读体验<a class=\"has-card\" href=\"https://blog.dearxuan.com/2022/03/10/vercel%E5%88%B6%E4%BD%9Capi-python-nodejs-php/\" title=\"vercel制作api(python,nodejs,php) - DearXuan的主页\"><span class=\"link-card-box\"><span class=\"link-title\">vercel制作api(python,nodejs,php) - DearXuan的主页</span><span class=\"link-link\"><img alt=\"icon-default.png?t=M276\" class=\"link-link-icon\" src=\"image\\icon-default.png\"/>https://blog.dearxuan.com/2022/03/10/vercel%E5%88%B6%E4%BD%9Capi-python-nodejs-php/</span></span></a></p>\n<h1>项目结构</h1>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"124\" src=\"image\\ec59b7aa55be4202a36181ce84e06820.png\" width=\"155\"/></p>\n<p>在项目根目录下创建\"api\"文件夹，在api中创建\"index.*\"(例如index.js)的文件，则该文件会被尝试执行，如果将js文件直接放在根目录，则会被当作文本文件读取</p>\n<p>如果不创建，则你需要手动输入文件名来访问api</p>\n<p>例如</p>\n<p><strong>*.vercel.app/api/js</strong></p>\n<p>vercel会根据后缀名自动判断语言</p>\n<p>下面给出了3中语言的api示例</p>\n<h1>python</h1>\n<pre><code class=\"language-python\">from http.server import BaseHTTPRequestHandler\n\n\nclass handler(BaseHTTPRequestHandler):\n\n    def do_GET(self):\n        self.send_response(200)\n        self.send_header('Content-type', 'text/plain')\n        self.end_headers()\n        self.wfile.write(\"DearXuan's API by python!\".encode())\n        return\n</code></pre>\n<h1>nodejs</h1>\n<pre><code class=\"language-javascript\">module.exports = OnRequest;\n\nfunction OnRequest(request, response){\n    response.send(\"DearXuan's API by nodejs!\");\n    response.end();\n}</code></pre>\n<h1>php</h1>\n<p>该语言需要配置文件</p>\n<pre><code class=\"language-php\">&lt;?php\necho \"DearXuan's API by php!\";</code></pre>\n<h1>配置文件</h1>\n<p>在根目录下创建 \"vercel.json\" 文件</p>\n<p>php需要配置环境才能运行，将下面json代码直接复制到 \"vercel.json\" 中即可</p>\n<pre><code class=\"language-javascript\">{\n  \"functions\": {\n    \"api/index.php\": {\n      \"runtime\": \"vercel-php@0.3.1\",\n      \"excludeFiles\": \"{test/**}\",\n      \"memory\": 256,\n      \"maxDuration\": 5\n    }\n  }\n}</code></pre>\n<p>通过配置文件还可以自定义路由</p>\n<p>例如下面的json代码指定使用 \"/api/python.py\" 文件执行 \"/python\" 路由的请求</p>\n<pre><code class=\"language-javascript\">{\n  \"functions\": {\n    \"api/php.php\": {\n      \"runtime\": \"vercel-php@0.3.1\",\n      \"excludeFiles\": \"{test/**}\",\n      \"memory\": 256,\n      \"maxDuration\": 5\n    }\n  },\n  \"routes\": [\n    {\n      \"src\": \"/python\",\n      \"dest\": \"/api/python\"\n    }\n  ]\n}</code></pre>\n<h1>构建</h1>\n<p>你能看到这篇文章，说明你肯定对vercel有些了解了，因此这里不在介绍怎么上传。但是构建时还有一个注意点，下图红圈圈起来的地方选择 \"Other\"(默认值)，不要修改</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"319\" src=\"image\\1d0745a3ac4b4e2198b4a799b76ce8f4.png\" width=\"367\"/></p>\n<p></p>\n<h1>访问</h1>\n<p>通过 *.vercel.app/api/js ，即可访问js写的api，其它文件同理</p>\n<p>如果访问 *.vercel.app/api/js/ ，则会访问\"/api/js/\"目录下的index文件，因此在本项目中会报错</p>\n<p>访问 *.vercel.app/python 和访问 *.vercel.app/api/python 是完全相同的，因为json中已经定义了这个路由</p>\n</div>\n</div>"}