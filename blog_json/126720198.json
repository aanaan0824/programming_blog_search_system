{"blogid": "126720198", "writerAge": "ç é¾„4å¹´", "writerBlogNum": "112", "writerCollect": "1122", "writerComment": "1464", "writerFan": "2453", "writerGrade": "5çº§", "writerIntegral": "3759", "writerName": "ç™¾æ€ä¸å¾—å°èµµ", "writerProfileAdress": "writer_image\\profile_126720198.jpg", "writerRankTotal": "5296", "writerRankWeekly": "975", "writerThumb": "969", "writerVisitNum": "89831", "blog_read_count": "99", "blog_time": "äºÂ 2022-09-07 07:45:00Â å‘å¸ƒ", "blog_title": "Spring Bootæ•´åˆ NoSQL æ•°æ®åº“ Redis", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d106ff03e497448bae88de627f0aaeb1.png\"/></p>\n<blockquote>\n<p>ğŸ“¢ ä¸“æ æ¨èï¼š<a href=\"https://blog.csdn.net/zp_insist/category_11999373.html?spm=1001.2014.3001.5482\">Spring Bootæ•´åˆç¬¬ä¸‰æ–¹ç»„ä»¶</a><br/> ğŸ“–ç³»åˆ—æ–‡ç« ï¼š<a href=\"https://blog.csdn.net/Zp_insist/article/details/125956986\">ã€å¿«é€Ÿä¸Šæ‰‹ã€‘ä½¿ç”¨SpringBoot 2.X + Mybatis-Plus è½»æ¾å®ç°CRUD</a>ï¼ˆæŒç»­æ›´æ–°ã€‚ã€‚ã€‚ï¼‰<br/> ğŸŒ²ä¸“æ ç®€ä»‹ï¼š<br/> <strong>åœ¨æ—¥å¸¸å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¼ä¸šçº§å¿«é€Ÿæ„å»ºé¡¹ç›®æ¡†æ¶Spring Bootæ•´å’Œ å„ä¸ªç»„ä»¶è¿›è¡Œå¼€å‘ï¼Œæœ¬ä¸“æ å°†æ€»ç»“ä½¿ç”¨Spring Bootä¸å¸¸ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶è¿›è¡Œæ•´åˆçš„è¯¦ç»†æ­¥éª¤ï¼Œæ¬¢è¿å¤§ä½¬ä»¬äº¤æµå­¦ä¹ ã€‚ğŸ‘ğŸ‘ğŸ‘</strong></p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><a href=\"#_14\">ä¸€ã€ç¯å¢ƒå‡†å¤‡</a></li><li><a href=\"#Spring_Boot_22\">äºŒã€æ„å»ºSpring Booté¡¹ç›®</a></li><li><a href=\"#Redis_35\">ä¸‰ã€å¼•å…¥Redisä¾èµ–</a></li><li><a href=\"#Reds_55\">å››ã€Redsç›¸å…³é…ç½®</a></li><li><a href=\"#Redis_79\">äº”ã€æ·»åŠ Redisé…ç½®ç±»</a></li><li><a href=\"#_158\">å…­ã€æµ‹è¯•ä¸€ä¸‹</a></li></ul>\n</div>\n<p></p>\n<p>åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œé™¤äº†ä½¿ç”¨<code>Spring Boot</code>è¿™ä¸ªä¼ä¸šçº§å¿«é€Ÿæ„å»ºé¡¹ç›®çš„æ¡†æ¶ä¹‹å¤–ï¼Œéšç€ä¸šåŠ¡æ•°æ®é‡çš„å¤§å¹…åº¦å¢åŠ ï¼Œå¯¹å…ƒæ•°æ®åº“é€ æˆçš„å‹åŠ›æˆå€å‰§å¢ã€‚åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œ<code>Redis</code>è¿™ä¸ª<code>NoSQL</code>æ•°æ®åº“å·²ç„¶æ•´ä¸ªé¡¹ç›®æ¶æ„ä¸­çš„ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œæ‡‚å¾—å¦‚ä½•<code>Spring Boot</code>æ•´åˆ <code>Redis</code>ï¼Œæ˜¯å½“ä»Šå¼€å‘äººå‘˜å¿…å¤‡çš„ä¸€é¡¹æŠ€èƒ½ï¼Œæ¥ä¸‹æ¥å¯¹æ•´åˆæ­¥éª¤è¿›è¡Œè¯¦ç»†è¯´æ˜ã€‚</p>\n<h1><a id=\"_14\"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h1>\n<p>åœ¨å¼€å§‹å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€äº›ç¯å¢ƒé…ç½®:</p>\n<ul><li>jdk 1.8 æˆ–å…¶ä»–æ›´é«˜ç‰ˆæœ¬</li><li>å¼€å‘å·¥å…· IDEA</li><li>ç®¡ç†ä¾èµ– Maven</li><li>Redisç¯å¢ƒï¼Œæ¨èlinuxç³»ç»Ÿä¸­æ­å»ºredisç¯å¢ƒ</li></ul>\n<h1><a id=\"Spring_Boot_22\"></a>äºŒã€æ„å»ºSpring Booté¡¹ç›®</h1>\n<p>æ‰“å¼€<code>idea -&gt; file -&gt; Nwe -&gt; Project</code> ,å¦‚å›¾ï¼Œå‹¾é€‰å¡«å†™ç›¸å…³çš„é…ç½®ä¿¡æ¯ï¼š</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\2c46b3fdc1f54394b57b355235b25011.png\"/></p>\n<p>å‹¾é€‰ä¸€äº›åˆå§‹åŒ–çš„ä¾èµ–é…ç½®ï¼š</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8d265570d5ac4842875e75ec7dc809e5.png\"/></p>\n<p>Spring Booté¡¹ç›®åˆå§‹åŒ–å®Œæˆã€‚</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\f2b86c209c7646beb817be97f4b43719.png\"/></p>\n<h1><a id=\"Redis_35\"></a>ä¸‰ã€å¼•å…¥Redisä¾èµ–</h1>\n<p>æ„å»ºå®ŒæˆSpring Booté¡¹ç›®å·¥ç¨‹ä¹‹åï¼Œéœ€è¦åœ¨<code>pom.xml</code>æ–‡ä»¶ä¸­å¼•å…¥<code>redis</code>ç›¸å…³ä¾èµ–</p>\n<pre><code class=\"prism language-xml\"><span class=\"token comment\">&lt;!-- redis --&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.springframework.boot<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>spring-boot-starter-data-redis<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token comment\">&lt;!-- spring2.Xé›†æˆredisæ‰€éœ€common-pool2--&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>org.apache.commons<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>commons-pool2<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">&gt;</span></span>2.6.0<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\24a45d33b61f473099e91b1fc8f7a689.png\"/></p>\n<h1><a id=\"Reds_55\"></a>å››ã€Redsç›¸å…³é…ç½®</h1>\n<p>å°†redisç›¸å…³çš„ä¾èµ–å¼•å…¥åˆ°é¡¹ç›®ä¸­ä¹‹åï¼Œéœ€è¦å¯¹redisè¿›è¡Œä¸€äº›é…ç½®ï¼Œåœ¨<code>application.properties</code>é…ç½®redis:</p>\n<pre><code class=\"prism language-java\"># <span class=\"token class-name\">Redis</span>æœåŠ¡å™¨åœ°å€\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>host<span class=\"token operator\">=</span>è‡ªå·±æ­å»ºçš„redisæœåŠ¡å™¨çš„ IP\n# <span class=\"token class-name\">Redis</span>æœåŠ¡å™¨è¿æ¥ç«¯å£\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>port<span class=\"token operator\">=</span><span class=\"token number\">6379</span>\n# <span class=\"token class-name\">Redis</span>æ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º<span class=\"token number\">0</span>ï¼‰\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>database<span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n# è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>timeout<span class=\"token operator\">=</span><span class=\"token number\">1800000</span>\n# è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>lettuce<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>max<span class=\"token operator\">-</span>active<span class=\"token operator\">=</span><span class=\"token number\">20</span>\n# æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´<span class=\"token punctuation\">(</span>è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶<span class=\"token punctuation\">)</span>\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>lettuce<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>max<span class=\"token operator\">-</span>wait<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span>\n# è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>lettuce<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>max<span class=\"token operator\">-</span>idle<span class=\"token operator\">=</span><span class=\"token number\">5</span>\n# è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥\nspring<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>lettuce<span class=\"token punctuation\">.</span>pool<span class=\"token punctuation\">.</span>min<span class=\"token operator\">-</span>idle<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3e02a7b1c0964cecbaf25719f87a3e38.png\"/></p>\n<h1><a id=\"Redis_79\"></a>äº”ã€æ·»åŠ Redisé…ç½®ç±»</h1>\n<p><strong>å¯¹Redisç›¸å…³é…ç½®å®Œæˆåï¼Œæ·»åŠ Redisé…ç½®ç±»ï¼Œï¼ˆæ‹¿æ¥å³ç”¨ï¼‰ï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>zhao<span class=\"token punctuation\">.</span>demo<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">JsonAutoDetect</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PropertyAccessor</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>fasterxml<span class=\"token punctuation\">.</span>jackson<span class=\"token punctuation\">.</span>databind<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CacheManager</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">CachingConfigurerSupport</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableCaching</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Bean</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisCacheConfiguration</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>cache<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisCacheManager</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>connection<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisConnectionFactory</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisTemplate</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Jackson2JsonRedisSerializer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisSerializationContext</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisSerializer</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>serializer<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author xiaoZhao\n * @date 2022/9/6\n * @describe\n */</span>\n<span class=\"token annotation punctuation\">@EnableCaching</span>\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CachingConfigurerSupport</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">&gt;</span></span> <span class=\"token function\">redisTemplate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> factory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">&gt;</span></span> template <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RedisTemplate</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RedisSerializer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">&gt;</span></span> redisSerializer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Jackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">ObjectMapper</span> om <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        om<span class=\"token punctuation\">.</span><span class=\"token function\">setVisibility</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyAccessor</span><span class=\"token punctuation\">.</span>ALL<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JsonAutoDetect<span class=\"token punctuation\">.</span>Visibility</span><span class=\"token punctuation\">.</span>ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        om<span class=\"token punctuation\">.</span><span class=\"token function\">enableDefaultTyping</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ObjectMapper<span class=\"token punctuation\">.</span>DefaultTyping</span><span class=\"token punctuation\">.</span>NON_FINAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        jackson2JsonRedisSerializer<span class=\"token punctuation\">.</span><span class=\"token function\">setObjectMapper</span><span class=\"token punctuation\">(</span>om<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        template<span class=\"token punctuation\">.</span><span class=\"token function\">setConnectionFactory</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//keyåºåˆ—åŒ–æ–¹å¼</span>\n        template<span class=\"token punctuation\">.</span><span class=\"token function\">setKeySerializer</span><span class=\"token punctuation\">(</span>redisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//valueåºåˆ—åŒ–</span>\n        template<span class=\"token punctuation\">.</span><span class=\"token function\">setValueSerializer</span><span class=\"token punctuation\">(</span>jackson2JsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//value hashmapåºåˆ—åŒ–</span>\n        template<span class=\"token punctuation\">.</span><span class=\"token function\">setHashValueSerializer</span><span class=\"token punctuation\">(</span>jackson2JsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> template<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Bean</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">CacheManager</span> <span class=\"token function\">cacheManager</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisConnectionFactory</span> factory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">RedisSerializer</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">&gt;</span></span> redisSerializer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">StringRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Jackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Jackson2JsonRedisSerializer</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//è§£å†³æŸ¥è¯¢ç¼“å­˜è½¬æ¢å¼‚å¸¸çš„é—®é¢˜</span>\n        <span class=\"token class-name\">ObjectMapper</span> om <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ObjectMapper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        om<span class=\"token punctuation\">.</span><span class=\"token function\">setVisibility</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">PropertyAccessor</span><span class=\"token punctuation\">.</span>ALL<span class=\"token punctuation\">,</span> <span class=\"token class-name\">JsonAutoDetect<span class=\"token punctuation\">.</span>Visibility</span><span class=\"token punctuation\">.</span>ANY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        om<span class=\"token punctuation\">.</span><span class=\"token function\">enableDefaultTyping</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ObjectMapper<span class=\"token punctuation\">.</span>DefaultTyping</span><span class=\"token punctuation\">.</span>NON_FINAL<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        jackson2JsonRedisSerializer<span class=\"token punctuation\">.</span><span class=\"token function\">setObjectMapper</span><span class=\"token punctuation\">(</span>om<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// é…ç½®åºåˆ—åŒ–ï¼ˆè§£å†³ä¹±ç çš„é—®é¢˜ï¼‰,è¿‡æœŸæ—¶é—´600ç§’</span>\n        <span class=\"token class-name\">RedisCacheConfiguration</span> config <span class=\"token operator\">=</span> <span class=\"token class-name\">RedisCacheConfiguration</span><span class=\"token punctuation\">.</span><span class=\"token function\">defaultCacheConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">entryTtl</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Duration</span><span class=\"token punctuation\">.</span><span class=\"token function\">ofSeconds</span><span class=\"token punctuation\">(</span><span class=\"token number\">600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">serializeKeysWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializationContext<span class=\"token punctuation\">.</span>SerializationPair</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromSerializer</span><span class=\"token punctuation\">(</span>redisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">serializeValuesWith</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RedisSerializationContext<span class=\"token punctuation\">.</span>SerializationPair</span><span class=\"token punctuation\">.</span><span class=\"token function\">fromSerializer</span><span class=\"token punctuation\">(</span>jackson2JsonRedisSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">disableCachingNullValues</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">RedisCacheManager</span> cacheManager <span class=\"token operator\">=</span> <span class=\"token class-name\">RedisCacheManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span>factory<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">cacheDefaults</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> cacheManager<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\909dcf56dd9b4ddd935d5f154e89390e.png\"/></p>\n<h1><a id=\"_158\"></a>å…­ã€æµ‹è¯•ä¸€ä¸‹</h1>\n<p>å°†æ‰€æœ‰çš„ç¯å¢ƒä¾èµ–å’Œé…ç½®æ­å»ºå®Œæˆä¹‹åï¼Œè¿›è¡Œæµ‹è¯•ä¸€æŠŠã€‚</p>\n<p>â‘  é¦–å…ˆï¼Œç¡®ä¿å®‰è£…<code>Redis</code>çš„æœåŠ¡å™¨å·²ç»å¯åŠ¨RedisæœåŠ¡</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\4b7f470b64934a3b9e3b424175ed4201.png\"/></p>\n<p>â‘¡ ç¼–å†™<code>controller</code>ç±»ï¼Œå‰æéœ€è¦å¼•å…¥<code>Spring Boot Web</code> çš„ä¾èµ–ï¼š</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8aefcd30f2054a44b910adde7d301462.png\"/></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>zhao<span class=\"token punctuation\">.</span>demo<span class=\"token punctuation\">.</span>controller</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>core<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RedisTemplate</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GetMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @author xiaoZhao\n * @date 2022/9/6\n * @describe\n */</span>\n<span class=\"token annotation punctuation\">@RestController</span>\n<span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/redistest\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisTestController</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Autowired</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">RedisTemplate</span> redisTemplate<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@GetMapping</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">testRedis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">// è®¾ç½®å€¼åˆ°reids</span>\n        redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"jack\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ä»redisä¸­è·å–å€¼</span>\n        <span class=\"token class-name\">String</span> name <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">)</span>redisTemplate<span class=\"token punctuation\">.</span><span class=\"token function\">opsForValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p>â‘¢ å¯åŠ¨Spring Bootå·¥ç¨‹ï¼Œåœ¨æµè§ˆå™¨ä¸Šå‘æ¥å£å‘é€è¯·æ±‚ï¼š</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\ed233e2df0dc4357a62cfee180fe529b.png\"/></p>\n<p>é¡¹ç›®å¯åŠ¨æˆåŠŸï¼Œå‘<code>/redistest</code>æ¥å£å‘é€è¯·æ±‚</p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\ae45eb4628684d8d84da6c0038f89d04.png\"/></p>\n<p><strong>è¯·æ±‚å‘é€æˆåŠŸï¼Œè·å–åˆ°æ•°æ®ï¼Œæµ‹è¯•æˆåŠŸï¼Œè‡³æ­¤Spring Bootæ•´åˆ Redisæ‰€æœ‰æ­¥éª¤å·²ç»å®Œæˆï¼Œ</strong></p>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/bb3d17175fb14eb6b068cd96727a4740.webp#pic_center\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}