{"blogid": "125877069", "writerAge": "码龄13年", "writerBlogNum": "264", "writerCollect": "98", "writerComment": "21", "writerFan": "789", "writerGrade": "5级", "writerIntegral": "3616", "writerName": "wiscourper_", "writerProfileAdress": "writer_image\\profile_125877069.jpg", "writerRankTotal": "7933", "writerRankWeekly": "12726", "writerThumb": "22", "writerVisitNum": "656126", "blog_read_count": "2924", "blog_time": "已于 2022-07-19 18:17:20 修改", "blog_title": "php连接sql server", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h1>一、下载扩展程序</h1>\n<h1>sqlsrv,pdo-sqlsrv</h1>\n<p>查看php版本<img alt=\"\" height=\"1200\" src=\"image\\7428807ff18c4d2aa877c37e17107e2c.png\" width=\"1200\"/></p>\n<p>下载对应的扩展程序<a class=\"link-info\" href=\"https://docs.microsoft.com/zh-cn/sql/connect/php/download-drivers-php-sql-server?view=sql-server-ver16\" title=\"pdo_sqlsrv\\sqlsrv\">pdo_sqlsrv\\sqlsrv</a></p>\n<p>注意系统支持要求<a class=\"link-info\" href=\"https://docs.microsoft.com/zh-cn/sql/connect/php/system-requirements-for-the-php-sql-driver?view=sql-server-ver16\" title=\"系统要求\">系统要求</a></p>\n<h1>二、安装扩展程序</h1>\n<p>解压下载的文件</p>\n<pre><code>pdo_sqlsrv\n\n# 解压\ntar -zxvf pdo_sqlsrv-5.8.1.tgz\n\n# 进入解压后的目录\ncd pdo_sqlsrv-5.8.1\n\n#执行phpize\n/www/server/php/74/bin/phpize \n\n#执行./configure,对即将安装的软件进行配置，检查当前的环境是否满足要安装软件的依赖关系\n./configure --with-php-config=/www/server/php/74/bin/php-config\n\n#编译并安装\nmake &amp;&amp; make install\n\n# 不出意外的话，得到类似以下内容\n# ....省略其他信息....\nInstalling shared extensions: /www/server/php/74/lib/php/extensions/no-debug-non-zts-20190902/\n\n\nsqlsrv安装与pdo_sqlsrv一样</code></pre>\n<h1>三、php扩展配置</h1>\n<pre><code>在php.ini中添加\n#扩展目录\nextension_dir = \"/Applications/MAMP/bin/php/php7.4.2/lib/php/extensions/no-debug-non-zts-20190902/\"\n#扩展库\nextension=sqlsrv.so\nextension=pdo_sqlsrv.so</code></pre>\n<h1>四、sql server配置管理器配置</h1>\n<p>1）服务器端口1433外网开发，防火墙添加指定端口（如1433）的入口规则</p>\n<p>2）sql server配置管理器</p>\n<p><img alt=\"\" height=\"316\" src=\"image\\f638ea5d0dbe4cbb8beea41a8a35ffd9.png\" width=\"940\"/></p>\n<p>开启tcp/ip协议。tcp/ip属性，全部侦听，启用</p>\n<p><img alt=\"\" height=\"744\" src=\"image\\1d13922c5b574f8483eb7c3eee0e08bb.png\" width=\"804\"/> ip地址，ipall去除动态端口，填写固定端口1433</p>\n<p><img alt=\"\" height=\"906\" src=\"image\\5b06c731f7ce4a09a389864ae04fcff1.png\" width=\"824\"/></p>\n<p> 对应版本sql native client开启tcp</p>\n<p><img alt=\"\" height=\"402\" src=\"image\\b3a77f53380d413bb1aa5424e09bab8a.png\" width=\"1200\"/></p>\n<p></p>\n<p>五、sqlserver 实例配置</p>\n<p>设置允许远程连接</p>\n<p><img alt=\"\" height=\"950\" src=\"image\\4533678e691a44258204b72c37a1990b.png\" width=\"1200\"/></p>\n<p>安全性：设置混合登录模式</p>\n<p><img alt=\"\" height=\"588\" src=\"image\\809b849f38694832b9c93b7abb3e6692.png\" width=\"1200\"/> </p>\n<p> 安全性/登录名/具体的用户，右键-&gt;属性</p>\n<p><img alt=\"\" height=\"442\" src=\"image\\ab048010e5d042d3898a327c727b7637.png\" width=\"838\"/></p>\n<p> </p>\n<p>六、下载对应版本的odbc驱动程序（进行sql server连接测试）</p>\n<p><a class=\"link-info\" href=\"https://docs.microsoft.com/zh-cn/sql/connect/php/download-drivers-php-sql-server?view=sql-server-ver16\" title=\"odbc for sql server驱动\">odbc for sql server驱动</a></p>\n<p><a class=\"link-info\" href=\"https://docs.microsoft.com/zh-cn/sql/connect/php/system-requirements-for-the-php-sql-driver?view=sql-server-ver16\" title=\"注意系统要求\">注意系统要求</a></p>\n<p></p>\n</div>\n</div>"}