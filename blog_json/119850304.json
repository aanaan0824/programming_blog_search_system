{"blogid": "119850304", "writerAge": "ç é¾„5å¹´", "writerBlogNum": "145", "writerCollect": "4216", "writerComment": "2283", "writerFan": "9471", "writerGrade": "7çº§", "writerIntegral": "14135", "writerName": "å¾æ—¥ä¸‰çœè´¾æ–¯æ±€", "writerProfileAdress": "writer_image\\profile_119850304.jpg", "writerRankTotal": "24456", "writerRankWeekly": "7518", "writerThumb": "3470", "writerVisitNum": "1150531", "blog_read_count": "22316", "blog_time": "äºÂ 2021-08-24 07:00:23Â å‘å¸ƒ", "blog_title": "Java--åå°„æœºåˆ¶åŸç†ã€å‡ ç§Classè·å–æ–¹å¼åŠåº”ç”¨åœºæ™¯", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>ç›®å½•</h3>\n<ul><li><a href=\"#_1\">ğŸ“¢å­¦ä¹ èƒŒæ™¯</a></li><li><a href=\"#Java_5\">ğŸ¹ä¸€ã€Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><ul><li><a href=\"#11__6\">ğŸ¸1.1 åå°„åŸç†</a></li><li><a href=\"#12__20\">ğŸ“£1.2 åå°„ä¾‹å­</a></li></ul>\n</li><li><a href=\"#JavaClass_82\">ğŸµäºŒã€Javaåå°„æœºåˆ¶ä¸­è·å–Classçš„ä¸‰ç§æ–¹å¼åŠåŒºåˆ«ï¼Ÿ</a></li><li><ul><li><a href=\"#21_Class_85\">ğŸ“€2.1 Classçš„å‡ ç§è·å–æ–¹å¼</a></li><li><a href=\"#22__100\">ğŸ”Š2.2 ä»£ç æ¼”ç¤ºå‡ ç§æ–¹å¼çš„åŒºåˆ«</a></li></ul>\n</li><li><a href=\"#Java_274\">ğŸ’¥ä¸‰ã€Javaåå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</a></li><li><ul><li><a href=\"#31__277\">ğŸ¶3.1 åº”ç”¨åœºæ™¯</a></li><li><a href=\"#32__282\">ğŸ§3.2 ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</a></li><li><ul><li><a href=\"#321__283\">ğŸ“¢3.2.1 ä»€ä¹ˆæ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Ÿ</a></li><li><a href=\"#322__288\">ğŸ¹3.2.2 ç®€å•å·¥å‚æ¨¡å¼æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</a></li><li><a href=\"#323__291\">ğŸ¸3.2.3 å¦‚ä½•å®ç°ç®€å•å·¥ç¨‹æ¨¡å¼ï¼Ÿ</a></li><li><a href=\"#324__381\">ğŸ“£3.2.4 ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</a></li><li><a href=\"#325__451\">ğŸµ3.2.5 ç®€å•å·¥å‚æ¨¡å¼å†æ¬¡ä¼˜åŒ–</a></li></ul>\n</li><li><a href=\"#33__517\">ğŸ“€3.3 ä»£ç†æ¨¡å¼ä¸­çš„åŠ¨æ€ä»£ç†å®ç°</a></li><li><ul><li><a href=\"#331__520\">ğŸ”Š3.3.1 ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</a></li><li><a href=\"#332__532\">ğŸ’¥3.3.2 ä»€ä¹ˆæ˜¯é™æ€ä»£ç†ï¼Ÿ</a></li><li><a href=\"#332__537\">ğŸ¶3.3.2 ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</a></li><li><a href=\"#333_Java_671\">ğŸ§3.3.3 åŠ¨æ€ä»£ç†ä¸­å¦‚ä½•åˆ©ç”¨Javaåå°„æœºåˆ¶ï¼Ÿ</a></li></ul>\n</li><li><a href=\"#34_Java_JDBC_674\">ğŸ“¢3.4 Java JDBCæ•°æ®åº“æ“ä½œå®ç°</a></li><li><ul><li><a href=\"#341_JDBC_675\">ğŸ¹3.4.1 åˆ©ç”¨åå°„åŠ è½½JDBCé©±åŠ¨</a></li><li><a href=\"#342_Java_JDBC_686\">ğŸ¸3.4.2 Java JDBCè¿æ¥ç¤ºä¾‹</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_826\">é¢è¯•æ€»ç»“</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_1\"></a>ğŸ“¢å­¦ä¹ èƒŒæ™¯</h1>\n<p>å­¦ä¹ Javaçš„å°ä¼™ä¼´ï¼Œå¯èƒ½å¬è¿‡<code>Javaåå°„æœºåˆ¶</code>ï¼Œä½†æ˜¯ç†Ÿæ‚‰åˆæœ‰ç‚¹é™Œç”Ÿï¼Œæœ¬æ–‡ä¸»è¦æ˜¯é€šè¿‡æ€è€ƒé¢è¯•ä¸­ç»å¸¸è¢«é—®åˆ°çš„å‡ ä¸ª<code>Javaåå°„æœºåˆ¶</code>çš„é—®é¢˜ï¼Œå†é€šè¿‡<code>ç†è®ºçŸ¥è¯†</code>ç»“åˆ<code>ä»£ç å®ä¾‹</code>åŠ<code>åº”ç”¨åœºæ™¯</code>è¿›è¡Œè®²è§£ï¼ŒåŠ æ·±è‡ªå·±å¯¹<code>Javaåå°„æœºåˆ¶</code>çš„è®¤çŸ¥å’Œç†è§£ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åŠ©åˆ°æœ‰éœ€è¦çš„å°ä¼™ä¼´~<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\0e0bd64d390a44479653731f065c228e.png\"/></p>\n<h1><a id=\"Java_5\"></a>ğŸ¹ä¸€ã€Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h1>\n<h2><a id=\"11__6\"></a>ğŸ¸1.1 åå°„åŸç†</h2>\n<p><strong>ï¼ˆ1ï¼‰Javaåå°„æœºåˆ¶ï¼ˆ<code>Java Reflection</code>ï¼‰æ˜¯Javaè¯­è¨€ä¸­ä¸€ç§<code>åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰è®¿é—®ã€æ£€æµ‹ &amp; ä¿®æ”¹å®ƒæœ¬èº«</code>çš„èƒ½åŠ›ï¼Œä¸»è¦ä½œç”¨æ˜¯<code>åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰è·å–ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ &amp; è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</code>~<br/> æ›´ç®€å•ç‚¹çš„è¯´å°±æ˜¯Javaç¨‹åºåœ¨è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰é€šè¿‡åˆ›å»ºä¸€ä¸ªç±»çš„åå°„å¯¹è±¡ï¼Œå†å¯¹ç±»è¿›è¡Œç›¸å…³æ“ä½œï¼Œæ¯”å¦‚ï¼š</strong></p>\n<ul><li>è·å–è¯¥å¯¹è±¡çš„æˆå‘˜å˜é‡ &amp; èµ‹å€¼</li><li>è°ƒç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•ï¼ˆå«æ„é€ æ–¹æ³•ï¼Œæœ‰å‚/æ— å‚ï¼‰</li><li>åˆ¤æ–­è¯¥å¯¹è±¡æ‰€å±çš„ç±»</li></ul>\n<blockquote>\n<p><strong>PSï¼šä¸è¿‡è¯´å®è¯ï¼Œç›´æ¥çœ‹æ¯”è¾ƒå®˜æ–¹çš„å®šä¹‰è¿˜æ˜¯æœ‰ç‚¹éš¾ç†è§£ï¼Œå†æ¥æ›´åŠ é€šä¿—ç‚¹çš„è¯´å§~</strong></p>\n</blockquote>\n<p><strong>ï¼ˆ2ï¼‰ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æŸä¸ªç±»ï¼Œéƒ½ä¼šçŸ¥é“è¿™ä¸ªç±»ï¼Œä»¥åŠè¦ç”¨å®ƒæ¥åšä»€ä¹ˆï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<code>new</code>å®ä¾‹åŒ–åˆ›å»ºå¯¹è±¡ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå¯¹è±¡å¯¹ç±»è¿›è¡Œæ“ä½œï¼Œè¿™ä¸ªå°±å±äº<code>æ­£å°„</code>~</strong></p>\n<p><strong>ï¼ˆ3ï¼‰è€Œ<code>åå°„</code>åˆ™æ˜¯ä¸€å¼€å§‹å¹¶ä¸çŸ¥é“è¦åˆå§‹åŒ–çš„æ˜¯ä»€ä¹ˆç±»ï¼Œæ— æ³•ä½¿ç”¨<code>new</code>æ¥å®ä¾‹åŒ–åˆ›å»ºå¯¹è±¡ï¼Œä¸»è¦æ˜¯é€šè¿‡JDKæä¾›çš„åå°„APIæ¥å®ç°ï¼Œåœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„æ˜¯ä»€ä¹ˆç±»ï¼Œå¹¶ä¸”å¯ä»¥è·å–åˆ°ç±»çš„å®Œæ•´æ„é€ ä»¥åŠè°ƒç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯<code>åå°„</code>~</strong></p>\n<h2><a id=\"12__20\"></a>ğŸ“£1.2 åå°„ä¾‹å­</h2>\n<p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>lang</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Constructor</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Method</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @program: Jdk1.8 Test\n * @description: æ­£å°„ã€åå°„ç®€å•è°ƒç”¨ç¤ºä¾‹\n * @author: JustinQin\n * @create: 2021/8/22 13:23\n * @version: v1.0.0\n **/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Student</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//ä¸€ã€æ­£å°„è°ƒç”¨è¿‡ç¨‹</span>\n        <span class=\"token class-name\">Student</span> student <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Student</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        student<span class=\"token punctuation\">.</span><span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ­£å°„è°ƒç”¨è¿‡ç¨‹Student id:\"</span> <span class=\"token operator\">+</span> student<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//äºŒã€åå°„è°ƒç”¨è¿‡ç¨‹</span>\n        <span class=\"token class-name\">Class</span> clz <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.Student\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Constructor</span> studentConstructor <span class=\"token operator\">=</span> clz<span class=\"token punctuation\">.</span><span class=\"token function\">getConstructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Object</span> studentObj <span class=\"token operator\">=</span> studentConstructor<span class=\"token punctuation\">.</span><span class=\"token function\">newInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        \n        <span class=\"token class-name\">Method</span> setIdMethod <span class=\"token operator\">=</span> clz<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setId\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        setIdMethod<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>studentObj<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Method</span> getIdMethod <span class=\"token operator\">=</span> clz<span class=\"token punctuation\">.</span><span class=\"token function\">getMethod</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"getId\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ­£å°„è°ƒç”¨è¿‡ç¨‹Student id:\"</span> <span class=\"token operator\">+</span> getIdMethod<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>studentObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>\n<pre><code class=\"prism language-java\">æ­£å°„è°ƒç”¨è¿‡ç¨‹<span class=\"token class-name\">Student</span> id<span class=\"token operator\">:</span><span class=\"token number\">1</span>\nåå°„è°ƒç”¨è¿‡ç¨‹<span class=\"token class-name\">Student</span> id<span class=\"token operator\">:</span><span class=\"token number\">2</span>\n</code></pre>\n<p><strong>ä¸Šè¿°ä¾‹å­åå°„çš„è°ƒç”¨è¿‡ç¨‹ï¼Œå¯ä»¥çœ‹åˆ°è·å–ä¸€ä¸ªç±»çš„<code>åå°„å¯¹è±¡</code>ï¼Œä¸»è¦è¿‡ç¨‹ä¸ºï¼š</strong></p>\n<ul><li>è·å–ç±»çš„<code>Class</code>å®ä¾‹å¯¹è±¡</li><li>æ ¹æ®<code>Class</code>å®ä¾‹å¯¹è±¡è·å–<code>Constructor</code>å¯¹è±¡</li><li>å†æ ¹æ®<code>Constructor</code>å¯¹è±¡çš„<code>newInstance</code>æ–¹æ³•è·å–åˆ°ç±»çš„<code>åå°„å¯¹è±¡</code></li></ul>\n<p><strong>è·å–åˆ°ç±»çš„<code>åå°„å¯¹è±¡</code>åï¼Œå°±å¯ä»¥å¯¹ç±»è¿›è¡Œæ“ä½œäº†~ ä¾‹å¦‚ï¼Œä¸Šè¿°ç¤ºä¾‹ä¸­å¯¹ç±»çš„æ–¹æ³•è¿›è¡Œè°ƒç”¨è¿‡ç¨‹ä¸ºï¼š</strong></p>\n<ul><li>æ ¹æ®<code>Class</code>å®ä¾‹å¯¹è±¡è·å–åˆ°ç±»çš„<code>Method</code>å¯¹è±¡</li><li>å†æ ¹æ®<code>Method</code>å¯¹è±¡çš„<code>invoke</code>æ–¹æ³•è°ƒç”¨åˆ°å…·ä½“ç±»çš„æ–¹æ³•</li></ul>\n<p><strong>å‰é¢ä¸€ç‚¹ä¹Ÿæåˆ°äº†è·å–åˆ°ç±»çš„<code>Class</code>å®ä¾‹å¯¹è±¡ï¼Œä¸Šé¢ç¤ºä¾‹<code>åå‘è°ƒç”¨è¿‡ç¨‹</code>ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡<code>Class.forName(\"ç±»çš„å…¨å±€å®šå\")</code>è¿™ç§æ–¹å¼æ¥è·å–åˆ°ç±»çš„<code>Class</code>å®ä¾‹å¯¹è±¡ï¼Œé™¤äº†è¿™ç§ï¼Œå¸¸ç”¨çš„è¿˜æœ‰å…¶ä»–ä¸¤ç§ï¼Œå¾€ä¸‹è®²è§£~</strong></p>\n<h1><a id=\"JavaClass_82\"></a>ğŸµäºŒã€Javaåå°„æœºåˆ¶ä¸­è·å–Classçš„ä¸‰ç§æ–¹å¼åŠåŒºåˆ«ï¼Ÿ</h1>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\54f7a810b4514da790958ce554d9c826.png\"/></p>\n<h2><a id=\"21_Class_85\"></a>ğŸ“€2.1 Classçš„å‡ ç§è·å–æ–¹å¼</h2>\n<p><strong>ï¼ˆ1ï¼‰è·å–ç±»çš„<code>java.lang.Class</code>å®ä¾‹å¯¹è±¡ï¼Œå¸¸è§çš„ä¸‰ç§æ–¹å¼åˆ†åˆ«ä¸ºï¼š</strong></p>\n<ul><li>é€šè¿‡<code>MyClass.class</code>è·å–ï¼Œè¿™é‡Œçš„MyClassæŒ‡å…·ä½“ç±»~~</li><li>é€šè¿‡<code>Class.forName(\"ç±»çš„å…¨å±€å®šå\")</code>è·å–ï¼Œå…¨å±€å®šåä¸ºåŒ…å+ç±»å</li><li>é€šè¿‡<code>new MyClass().getClass()</code>è·å–ï¼Œè¿™é‡Œçš„MyClassæŒ‡å…·ä½“ç±»~</li></ul>\n<p><strong>ï¼ˆ2ï¼‰é€šè¿‡<code>MyClass.class</code>è·å–ï¼ŒJVMä¼šä½¿ç”¨<code>ClassLoader</code>ç±»åŠ è½½å™¨å°†ç±»åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä½†å¹¶<mark>ä¸ä¼šåšä»»ä½•ç±»çš„åˆå§‹åŒ–å·¥ä½œ</mark>ï¼Œè¿”å›<code>java.lang.Class</code>å¯¹è±¡</strong></p>\n<p><strong>ï¼ˆ3ï¼‰é€šè¿‡<code>Class.forName(\"ç±»çš„å…¨å±€å®šå\")</code>è·å–ï¼ŒåŒæ ·ï¼Œç±»ä¼šè¢«JVMåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”<mark>ä¼šè¿›è¡Œç±»çš„é™æ€åˆå§‹åŒ–å·¥ä½œ</mark>ï¼Œè¿”å›<code>java.lang.Class</code>å¯¹è±¡</strong></p>\n<p><strong>ï¼ˆ4ï¼‰é€šè¿‡<code>new MyClass().getClass()</code>è·å–ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨äº†<code>new</code>è¿›è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œå› æ­¤<mark>é™æ€åˆå§‹åŒ–å’Œéé™æ€åˆå§‹åŒ–å·¥ä½œéƒ½ä¼šè¿›è¡Œ</mark>ï¼Œ<code>getClass</code>æ–¹æ³•å±äºé¡¶çº§<code>Object</code>ç±»ä¸­çš„æ–¹æ³•ï¼Œä»»ä½•å­ç±»å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨ï¼Œå“ªä¸ªå­ç±»è°ƒç”¨ï¼Œå°±è¿”å›é‚£ä¸ªå­ç±»çš„<code>java.lang.Class</code>å¯¹è±¡</strong></p>\n<blockquote>\n<p><strong>PSï¼š</strong> è¿™3ç§æ–¹å¼ï¼Œæœ€ç»ˆåœ¨JVMå †åŒºå¯¹åº”ç±»çš„<code>java.lang.Class</code>å¯¹è±¡éƒ½å±äºåŒä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯<mark>å†…å­˜åœ°å€ç›¸åŒ</mark>ï¼Œè¿›è¡Œ<code>==</code>åŒç­‰å·æ¯”è¾ƒç»“æœä¸º<code>true</code>ï¼ŒåŸå› æ˜¯JVMç±»åŠ è½½è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª<code>ClassLoader</code>ç±»åŠ è½½å™¨åŠ è½½æŸä¸ªç±»ï¼Œä¸è®ºåŠ è½½å¤šå°‘æ¬¡ï¼Œç”Ÿæˆåˆ°å †åŒºçš„<code>java.lang.Class</code>å¯¹è±¡å§‹ç»ˆåªæœ‰ä¸€ä¸ªï¼Œé™¤éè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œç ´åJVMçš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Œä½¿å¾—åŒä¸€ä¸ªç±»è¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½ï¼ŒJVMæ‰ä¼šæŠŠå®ƒå½“åšä¸¤ä¸ªä¸åŒçš„<code>java.lang.Class</code>å¯¹è±¡</p>\n</blockquote>\n<h2><a id=\"22__100\"></a>ğŸ”Š2.2 ä»£ç æ¼”ç¤ºå‡ ç§æ–¹å¼çš„åŒºåˆ«</h2>\n<p><strong>åˆ›å»ºä¸€ä¸ªå®ä½“ç±»ï¼Œåˆ†åˆ«åœ¨å®ä½“ç±»ä¸­åˆ›å»ºç±»çš„<code>é™æ€ä»£ç å—</code>ã€<code>åŠ¨æ€ä»£ç å—</code>ã€<code>æœ‰å‚æ„é€ æ–¹æ³•</code>ã€<code>æ— å‚æ„é€ æ–¹æ³•</code>ï¼Œæ–¹ä¾¿æµ‹è¯•å‡ ç§æ–¹å¼çš„åŒºåˆ«åŠå†…å­˜åœ°å€æ˜¯å¦ç›¸åŒ~</strong></p>\n<p><strong>ï¼ˆ1ï¼‰å®ä½“ç±»ï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClass</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> staticStr <span class=\"token operator\">=</span> <span class=\"token string\">\"Hi\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> staticInt <span class=\"token operator\">=</span> <span class=\"token number\">2021</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"é™æ€ä»£ç å—ï¼šstaticStr=\"</span> <span class=\"token operator\">+</span> staticStr <span class=\"token operator\">+</span> <span class=\"token string\">\",staticInt=\"</span> <span class=\"token operator\">+</span> staticInt<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"åŠ¨æ€ä»£ç å—~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ— å‚æ„é€ æ–¹æ³•~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æœ‰å‚æ„é€ æ–¹æ³•~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setId</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"MyClass{\"</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">\"id='\"</span> <span class=\"token operator\">+</span> id <span class=\"token operator\">+</span> <span class=\"token string\">'\\''</span> <span class=\"token operator\">+</span>\n                <span class=\"token string\">'}'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>ï¼ˆ2ï¼‰å•å…ƒæµ‹è¯•ç±»ï¼š</strong><br/> é€šè¿‡<code>@Test</code>æ³¨è§£å¯¹ä¸‰ç§æ–¹å¼åˆ†åˆ«è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå†å¯¹è¿™ä¸‰ç§æ–¹å¼çš„ç»„åˆè¿›è¡Œå•å…ƒæµ‹è¯•~</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>lang</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">org<span class=\"token punctuation\">.</span>junit<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Test</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * @program: Jdk1.8Test\n * @description: Javaåå°„æœºåˆ¶ä¸­è·å–ç±»çš„Classå®ä¾‹å¯¹è±¡çš„å¸¸è§ä¸‰ç§æ–¹å¼åŠåŒºåˆ«å¯¹æ¯”\n * @author: JustinQin\n * @create: 2021/8/22 15:04\n * @version: v1.0.0\n **/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyClassTest</span> <span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸€ã€MyClass.classæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">&gt;</span></span> class1 <span class=\"token operator\">=</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"äºŒã€Class.forNameæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.MyClass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸‰ã€new MyClass().getClassæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test12</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸€ã€MyClass.classæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">&gt;</span></span> class1 <span class=\"token operator\">=</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"äºŒã€Class.forNameæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.MyClass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test13</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸€ã€MyClass.classæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">&gt;</span></span> class1 <span class=\"token operator\">=</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸‰ã€new MyClass().getClassæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test23</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"äºŒã€Class.forNameæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.MyClass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä¸‰ã€new MyClass().getClassæ–¹å¼=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"å››ã€ä¸‰ç§æ–¹å¼å†…å­˜åœ°å€æ¯”è¾ƒ=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">&gt;</span></span> class1 <span class=\"token operator\">=</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class2 <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.MyClass\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Class</span> class3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ¯”è¾ƒç»“æœ=========\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyClass.classå’ŒClass.forNameå†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>class1 <span class=\"token operator\">==</span> class2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyClass.classå’Œnew MyClass().getClasså†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>class1 <span class=\"token operator\">==</span> class3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Class.forNameå’Œnew MyClass().getClasså†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>class2 <span class=\"token operator\">==</span> class3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<p><strong>é€ä¸ªæ‰§è¡Œå•å…ƒï¼Œå¾—å‡ºæµ‹è¯•ç»“æœä¸ºï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token operator\">*</span> <span class=\"token function\">test1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\nä¸€ã€<span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>æ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\näºŒã€<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span>forNameæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test3</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\nä¸‰ã€<span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>getClassæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\nåŠ¨æ€ä»£ç å—<span class=\"token operator\">~</span>\næ— å‚æ„é€ æ–¹æ³•<span class=\"token operator\">~</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test12</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\nä¸€ã€<span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>æ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\näºŒã€<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span>forNameæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test13</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\nä¸€ã€<span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>æ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nä¸‰ã€<span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>getClassæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\nåŠ¨æ€ä»£ç å—<span class=\"token operator\">~</span>\næ— å‚æ„é€ æ–¹æ³•<span class=\"token operator\">~</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test23</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\näºŒã€<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span>forNameæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\nä¸‰ã€<span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>getClassæ–¹å¼<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\nåŠ¨æ€ä»£ç å—<span class=\"token operator\">~</span>\næ— å‚æ„é€ æ–¹æ³•<span class=\"token operator\">~</span>\n\n<span class=\"token operator\">*</span>  <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>æ–¹æ³•\nå››ã€ä¸‰ç§æ–¹å¼å†…å­˜åœ°å€æ¯”è¾ƒ<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\né™æ€ä»£ç å—ï¼šstaticStr<span class=\"token operator\">=</span><span class=\"token class-name\">Hi</span><span class=\"token punctuation\">,</span>staticInt<span class=\"token operator\">=</span><span class=\"token number\">2021</span>\nåŠ¨æ€ä»£ç å—<span class=\"token operator\">~</span>\næ— å‚æ„é€ æ–¹æ³•<span class=\"token operator\">~</span>\næ¯”è¾ƒç»“æœ<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">=</span>\n<span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>å’Œ<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span>forNameå†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š<span class=\"token boolean\">true</span>\n<span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span>å’Œ<span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>getClasså†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š<span class=\"token boolean\">true</span>\n<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span>forNameå’Œ<span class=\"token keyword\">new</span> <span class=\"token class-name\">MyClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>getClasså†…å­˜åœ°å€æ¯”è¾ƒæ˜¯å¦ç›¸åŒï¼š<span class=\"token boolean\">true</span>\n</code></pre>\n<p><strong>é€šè¿‡<code>test1</code>ã€<code>test2</code>ã€<code>test3</code>çš„æµ‹è¯•ç»“æœéªŒè¯äº†<code>2.1 ä¸‰ç§æ–¹å¼åŠåŒºåˆ«</code>ä¸­é»„è‰²æ ‡è®°éƒ¨åˆ†çš„åŒºåˆ«è¯´æ˜ï¼Œå³ï¼š</strong></p>\n<ul><li><code>MyClass.class</code>ä¸ä¼šåšä»»ä½•ç±»çš„åˆå§‹åŒ–å·¥ä½œ</li><li><code>Class.forName</code>ä¼šè¿›è¡Œç±»çš„é™æ€åˆå§‹åŒ–å·¥ä½œ</li><li><code>new MyClass().getClass</code>é™æ€åˆå§‹åŒ–å’Œéé™æ€åˆå§‹åŒ–å·¥ä½œéƒ½ä¼šè¿›è¡Œ</li><li>ä½¿ç”¨è¿™ä¸‰ç§æ–¹å¼ä»»æ„ä¸€ç§æœ€ç»ˆåœ¨JVMåŠ è½½åˆ°å†…å­˜ä¸­éƒ½ä¼šæ˜¯<code>å†…å­˜åœ°å€ç›¸åŒ</code>çš„</li></ul>\n<p><strong>è€Œ<code>test23</code>ç»„åˆå¾—åˆ°çš„æµ‹è¯•ç»“æœï¼Œè¯´æ˜<code>é™æ€ä»£ç å—åªä¼šè¢«åŠ è½½ä¸€æ¬¡</code>~</strong></p>\n<p><strong>è®²äº†è¿™ä¹ˆå¤šï¼Œé™¤äº†çŸ¥é“åŸºæœ¬åŸç†å’ŒåŸºæœ¬ä½¿ç”¨ä¹‹å¤–ï¼Œæ›´é‡è¦çš„è¿˜æ˜¯è¦çŸ¥é“å®ƒçš„ä¸€äº›æ¯”è¾ƒå®é™…çš„<code>åº”ç”¨åœºæ™¯</code>ï¼Œå¾€ä¸‹ä»‹ç»~</strong></p>\n<h1><a id=\"Java_274\"></a>ğŸ’¥ä¸‰ã€Javaåå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h1>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3a790d5d55bf44b1854eedb953c583d3.png\"/></p>\n<h2><a id=\"31__277\"></a>ğŸ¶3.1 åº”ç”¨åœºæ™¯</h2>\n<ul><li><code>å·¥å‚æ¨¡å¼</code>ä¸­çš„ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</li><li><code>ä»£ç†æ¨¡å¼</code>ä¸­çš„åŠ¨æ€ä»£ç†æ–¹å¼å®ç°</li><li><code>Java JDBC</code>æ•°æ®åº“æ“ä½œ</li></ul>\n<h2><a id=\"32__282\"></a>ğŸ§3.2 ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</h2>\n<h3><a id=\"321__283\"></a>ğŸ“¢3.2.1 ä»€ä¹ˆæ˜¯ç®€å•å·¥å‚æ¨¡å¼ï¼Ÿ</h3>\n<blockquote>\n<p>Javaä¸­ä¸»è¦æœ‰23ç§è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­å·¥å‚æ¨¡å¼å°±æ˜¯å…¶ä¸­ä¸€ç§ï¼Œè€Œç®€å•å·¥å‚æ¨¡å¼ï¼Œé¡¾åæ€ä¹‰ï¼Œä¹Ÿæ˜¯å±äºå·¥å‚æ¨¡å¼ä¸­çš„ä¸€ç§ï¼Œåªä¸è¿‡æ¯”è¾ƒç®€å•ã€‚ç®€å•å·¥å‚æ¨¡å¼ä¹Ÿå¯ä»¥å«åšé™æ€æ–¹æ³•æ¨¡å¼ï¼ˆå› ä¸ºå·¥å‚ç±»ä¸€èˆ¬éƒ½æ˜¯åœ¨å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼‰ã€‚<br/> ä»ç°å®ç”Ÿæ´»è§’åº¦æ¥ç†è§£çš„è¯ï¼Œå·¥å‚æ˜¯ä¸“é—¨è´Ÿè´£ç”Ÿäº§äº§å“çš„ï¼ŒåŒæ ·åœ¨è®¾è®¡æ¨¡å¼ä¸­ï¼Œç®€å•å·¥å‚æ¨¡å¼æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¸“é—¨è´Ÿè´£ç”Ÿäº§å¯¹è±¡çš„ä¸€ä¸ªç±»ï¼Œç§°ä¸ºâ€œå·¥å‚ç±»â€ã€‚</p>\n</blockquote>\n<h3><a id=\"322__288\"></a>ğŸ¹3.2.2 ç®€å•å·¥å‚æ¨¡å¼æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</h3>\n<blockquote>\n<p>ç®€å•å·¥å‚æ¨¡å¼é€šè¿‡åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„å·¥å‚ç±»ï¼Œå°†<code>ç±»å®ä¾‹åŒ–çš„æ“ä½œ</code>ä¸<code>ä½¿ç”¨å¯¹è±¡çš„æ“ä½œ</code>è¿›è¡Œåˆ†å¼€ï¼Œè®©ä½¿ç”¨è€…ä¸ç”¨çŸ¥é“å…·ä½“å‚æ•°å°±å¯ä»¥å®ä¾‹åŒ–å‡ºæ‰€éœ€è¦çš„<code>å…·ä½“äº§å“</code>ç±»ï¼Œä»è€Œé¿å…äº†åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­æ˜¾å¼æŒ‡å®šï¼Œå®ç°äº†è§£è€¦ã€‚å³ä½¿ç”¨è€…å¯ç›´æ¥æ¶ˆè´¹äº§å“è€Œä¸éœ€è¦çŸ¥é“å…¶ç”Ÿäº§çš„ç»†èŠ‚~</p>\n</blockquote>\n<h3><a id=\"323__291\"></a>ğŸ¸3.2.3 å¦‚ä½•å®ç°ç®€å•å·¥ç¨‹æ¨¡å¼ï¼Ÿ</h3>\n<blockquote>\n<p>å®ç°ç®€å•å·¥ç¨‹æ¨¡å¼çš„æ ¸å¿ƒæ˜¯åˆ›å»ºä¸€ä¸ª<code>å·¥å‚ç±»</code>ï¼Œå¹¶ä¸”åœ¨å†…éƒ¨å®šä¹‰äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¼ å…¥ä¸åŒçš„<code>å‚æ•°æ ‡è¯†</code>é€šè¿‡<code>switch</code>è¿›è¡Œåˆ†ç»„ï¼Œé€šè¿‡<code>new</code>å®ä¾‹åŒ–åˆ›å»ºä¸åŒçš„å­ç±»å¯¹è±¡è¿”å›~</p>\n</blockquote>\n<p><strong>å®ç°ä¾‹å­ï¼š</strong></p>\n<p><strong>æ­¥éª¤1ï¼šåˆ›å»ºæŠ½è±¡äº§å“ç±»</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">abstract</span> <span class=\"token keyword\">void</span> <span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>æ­¥éª¤2ï¼šåˆ›å»ºå…·ä½“äº§å“ç±»ï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductA</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”Ÿäº§äº†äº§å“A\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductB</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”Ÿäº§äº†äº§å“B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProductC</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Product</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç”Ÿäº§äº†äº§å“C\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>æ­¥éª¤3ï¼šåˆ›å»ºç®€å•å·¥å‚ç±»</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SimpleFactory</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">/**\n     * å®ç°ç®€å•å·¥å‚æ¨¡å¼\n     * @param pName äº§å“æ ‡è¯†\n     * @return è¿”å›å…·ä½“çš„äº§å“\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Product</span> <span class=\"token function\">createProduct</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> pName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>pName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"A\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProductA</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"B\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProductB</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"C\"</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ProductC</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>æ­¥éª¤4ï¼šè°ƒç”¨ç®€å•å·¥å‚ç±»</strong></p>\n<pre><code class=\"prism language-bash\">public class SimpleFactoryTest <span class=\"token punctuation\">{<!-- --></span>\n    public static void main<span class=\"token punctuation\">(</span>String<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        try <span class=\"token punctuation\">{<!-- --></span>\n            SimpleFactory.createProduct<span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span>.show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> catch <span class=\"token punctuation\">(</span>NullPointerException e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            System.out.println<span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Aè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        try <span class=\"token punctuation\">{<!-- --></span>\n            SimpleFactory.createProduct<span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">)</span>.show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> catch <span class=\"token punctuation\">(</span>NullPointerException e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            System.out.println<span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Bè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        try <span class=\"token punctuation\">{<!-- --></span>\n            SimpleFactory.createProduct<span class=\"token punctuation\">(</span><span class=\"token string\">\"C\"</span><span class=\"token punctuation\">)</span>.show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> catch <span class=\"token punctuation\">(</span>NullPointerException e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            System.out.println<span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Cè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        try <span class=\"token punctuation\">{<!-- --></span>\n            SimpleFactory.createProduct<span class=\"token punctuation\">(</span><span class=\"token string\">\"D\"</span><span class=\"token punctuation\">)</span>.show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> catch <span class=\"token punctuation\">(</span>NullPointerException e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            System.out.println<span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Dè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h3><a id=\"324__381\"></a>ğŸ“£3.2.4 ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</h3>\n<p><strong>ï¼ˆ1ï¼‰ç®€å•å·¥å‚æ¨¡å¼å¼Šç«¯</strong></p>\n<ul><li>æ“ä½œæˆæœ¬é«˜ï¼šæ¯å¢åŠ ä¸€ä¸ªæ¥å£çš„å­ç±»ï¼Œå¿…é¡»ä¿®æ”¹å·¥å‚ç±»çš„é€»è¾‘</li><li>ç³»ç»Ÿå¤æ‚æ€§æé«˜ï¼šæ¯å¢åŠ ä¸€ä¸ªæ¥å£çš„å­ç±»ï¼Œéƒ½å¿…é¡»å‘å·¥å‚ç±»æ·»åŠ é€»è¾‘</li></ul>\n<p>è¿™ä¸¤ç‚¹å¼Šç«¯ä»å‰é¢çš„ä¾‹å­<code>SimpleFactory</code>å·¥å‚ç±»çš„å®ç°ï¼Œå¯ä»¥çœ‹å‡º<code>ç®€å•å·¥å‚æ¨¡å¼</code>ä¸­å¯¹å·¥å‚ç±»<code>SimpleFactory</code>çš„ç»´æŠ¤æˆæœ¬æœ‰ç‚¹å¤§ï¼Œå› ä¸ºå®é™…ä¸­å¯èƒ½ä¼šå¾ˆé¢‘ç¹çš„å»æ›´æ–°<code>å…·ä½“äº§å“ç±»</code>ï¼Œæ¯ä¸€æ¬¡å˜æ›´éƒ½éœ€è¦å»ä¿®æ”¹å·¥å‚ç±»ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨<code>Javaåå°„æœºåˆ¶</code>å¯¹ç®€å•å·¥å‚æ¨¡å¼è¿›è¡Œä¼˜åŒ–~</p>\n<p><strong>ï¼ˆ2ï¼‰ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜åŒ–æ€è·¯</strong><br/> é‡‡ç”¨Javaåå°„æœºåˆ¶ï¼Œé€šè¿‡ä¼ å…¥<code>å­ç±»å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code> åŠ¨æ€çš„åˆ›å»ºä¸åŒçš„<code>å­ç±»å¯¹è±¡å®ä¾‹</code>ï¼Œä»è€Œä½¿å¾—åœ¨ä¸å¢åŠ äº§å“æ¥å£å­ç±»å’Œä¿®æ”¹å·¥å‚ç±»çš„é€»è¾‘çš„æƒ…å†µä¸‹è¿˜èƒ½å®ç°äº†å·¥å‚ç±»å¯¹å­ç±»å®ä¾‹å¯¹è±¡çš„ç»Ÿä¸€åˆ›å»º~</p>\n<p><strong>ï¼ˆ3ï¼‰ç®€å•å·¥å‚æ¨¡å¼çš„ä¼˜åŒ–æ­¥éª¤</strong><br/> <strong>æ­¥éª¤1ï¼šåˆ›å»ºå·¥å‚ç±»</strong><br/> é‡‡ç”¨Javaåå°„æœºåˆ¶å¯¹å·¥å‚ç±»è¿›è¡Œä¼˜åŒ–ï¼Œä¸»è¦æ˜¯å°†<code>className</code>å³<code>å­ç±»å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code>ä½œä¸ºå…¥å‚ï¼Œé€šè¿‡<code>Class.forName</code>æ–¹å¼è·å–ç±»çš„<code>java.lang.Class</code>å®ä¾‹å¯¹è±¡ï¼Œå†é€šè¿‡<code>Class</code>å®ä¾‹å¯¹è±¡çš„<code>getInstance</code>æ–¹æ³•è·å–åˆ°å…·ä½“å­ç±»çš„å®ä¾‹å¯¹è±¡~</p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Factory</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Product</span> <span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> className<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">Product</span> realProduct <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Class</span> pClass <span class=\"token operator\">=</span> <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            realProduct <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Product</span><span class=\"token punctuation\">)</span> pClass<span class=\"token punctuation\">.</span><span class=\"token function\">newInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> realProduct<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>æ­¥éª¤2ï¼šè°ƒç”¨å·¥å‚ç±»</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FactoryTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Product</span> productA <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.ProductA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productA<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Aè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Product</span> productB <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.ProductB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productB<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Bè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Product</span> productC <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.ProductC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productC<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Cè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">Product</span> productD <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.justin.java.lang.ProductD\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productD<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Dè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>ä¼˜åŒ–ç»“æœï¼š</strong></p>\n<blockquote>\n<p>ä½¿ç”¨<code>Javaåå°„æœºåˆ¶</code>ä¼˜åŒ–ç®€å•å·¥å‚æ¨¡å¼åï¼Œå¯ä»¥çœ‹åˆ°ï¼Œä¸è®º<code>å…·ä½“äº§å“ç±»</code>æ›´æ–°å¤šé¢‘ç¹ï¼Œéƒ½ä¸éœ€è¦å†ä¿®æ”¹<code>å·¥å‚ç±»</code>ï¼Œä»è€Œè§£å†³äº†æ™®é€šç®€å•å·¥å‚æ¨¡å¼<code>æ“ä½œæˆæœ¬é«˜</code>å’Œ<code>ç³»ç»Ÿå¤æ‚æ€§é«˜</code>çš„é—®é¢˜~</p>\n</blockquote>\n<h3><a id=\"325__451\"></a>ğŸµ3.2.5 ç®€å•å·¥å‚æ¨¡å¼å†æ¬¡ä¼˜åŒ–</h3>\n<p><strong>ï¼ˆ1ï¼‰å†æ¬¡ä¼˜åŒ–èƒŒæ™¯</strong></p>\n<blockquote>\n<p>ç®€å•å·¥å‚æ¨¡å¼çš„å·¥å‚ç±»é‡‡ç”¨<code>Javaåå°„æœºåˆ¶</code>è¿›è¡Œä¼˜åŒ–åï¼Œæ­¤æ—¶çš„ä»ç„¶å­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œ<code>å­ç±»çš„å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code>æ˜¯å†™æ­»çš„ï¼Œä½†æ˜¯å®é™…ä¸Šå¼€å‘è€…åœ¨å†™ä»£ç æ—¶æ˜¯å¾ˆéš¾æå‰é¢„çŸ¥æ‰€æœ‰çš„<code>å­ç±»çš„å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code>çš„ï¼Œå› æ­¤éœ€è¦è¿›è¡ŒäºŒæ¬¡ä¼˜åŒ–~</p>\n</blockquote>\n<p><strong>ï¼ˆ2ï¼‰å†æ¬¡ä¼˜åŒ–å®ç°æ€è·¯</strong></p>\n<blockquote>\n<p>é€šè¿‡<code>é…ç½®æ–‡ä»¶</code>æ–¹å¼ï¼Œç»Ÿä¸€å®šä¹‰<code>ç±»åå¯¹åº”å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code>ï¼Œå°†é…ç½®æ–‡ä»¶å­˜æ”¾åˆ°èµ„æºç›®å½•ä¸‹ï¼Œç¨‹åºè¿è¡Œæ—¶é€šè¿‡<code>ClassLoader</code>ç±»åŠ è½½å™¨åŠ¨æ€è·å–åˆ°<code>é…ç½®æ–‡ä»¶</code>ä¸­å®šä¹‰çš„å­ç±»çš„å…¨å±€å®šå~</p>\n</blockquote>\n<p><strong>ï¼ˆ3ï¼‰å†æ¬¡ä¼˜åŒ–å®ç°æ­¥éª¤</strong></p>\n<p><strong>å†æ¬¡ä¼˜åŒ–æ­¥éª¤1ï¼šç›¸å…³ä¼˜åŒ–ä¸ç¬¬ä¸€æ¬¡ä¼˜åŒ–ä¿æŒä¸å˜~</strong></p>\n<p><strong>å†æ¬¡ä¼˜åŒ–æ­¥éª¤2ï¼šé…ç½®<code>ç±»åå¯¹åº”å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰</code></strong><br/> åˆ›å»ºå±æ€§é…ç½®æ–‡ä»¶<code>Product.properties</code></p>\n<pre><code class=\"prism language-java\"><span class=\"token comment\">//äº§å“æŠ½è±¡ç±»Productç›¸å…³å­ç±»çš„å…¨å±€å®šåï¼ˆåŒ…å+ç±»åï¼‰å®šä¹‰</span>\n<span class=\"token class-name\">ProductA</span> <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ProductA</span>\n<span class=\"token class-name\">ProductB</span> <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ProductB</span>\n<span class=\"token class-name\">ProductC</span> <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>lang<span class=\"token punctuation\">.</span></span>ProductC</span>\n</code></pre>\n<p><mark>æ³¨æ„</mark>ï¼šå°†<code>Product.properties</code>éœ€è¦å­˜æ”¾åœ¨<code>src/main/resources</code>èµ„æºç›®å½•ä¸‹ï¼Œè‹¥èµ„æºç›®å½•ä¸å­˜åœ¨åˆ™éœ€è¦æ‰‹åŠ¨åˆ›å»º~</p>\n<p><strong>å†æ¬¡ä¼˜åŒ–æ­¥éª¤3ï¼šä¿®æ”¹è°ƒç”¨å·¥å‚ç±»</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FactoryTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">ClassLoader</span> classLoader <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">Properties</span> prop <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Properties</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        prop<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>classLoader<span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Product.properties\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">String</span> className <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            className <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ProductA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Product</span> productA <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productA<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Aè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            className <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ProductB\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Product</span> productA <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productA<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Bè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{<!-- --></span>\n            className <span class=\"token operator\">=</span> prop<span class=\"token punctuation\">.</span><span class=\"token function\">getProperty</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ProductC\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">Product</span> productA <span class=\"token operator\">=</span> <span class=\"token class-name\">Factory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInstance</span><span class=\"token punctuation\">(</span>className<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            productA<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">NullPointerException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ²¡æœ‰Cè¿™æ¬¾äº§å“ï¼Œæ— æ³•ç”Ÿäº§~\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>è¿è¡Œç»“æœï¼š</strong></p>\n<pre><code class=\"prism language-java\">ç”Ÿäº§äº†äº§å“<span class=\"token class-name\">A</span>\nç”Ÿäº§äº†äº§å“<span class=\"token class-name\">B</span>\nç”Ÿäº§äº†äº§å“<span class=\"token class-name\">C</span>\n</code></pre>\n<h2><a id=\"33__517\"></a>ğŸ“€3.3 ä»£ç†æ¨¡å¼ä¸­çš„åŠ¨æ€ä»£ç†å®ç°</h2>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\70d9c6bbc83448aab1a2a755fcc75987.png\"/></p>\n<h3><a id=\"331__520\"></a>ğŸ”Š3.3.1 ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</h3>\n<blockquote>\n<p><code>ä»£ç†ï¼ˆProxyï¼‰æ¨¡å¼</code>æ˜¯ä¸€ç§<code>è®¾è®¡æ¨¡å¼</code>ï¼Œé€šè¿‡<code>ä»£ç†å¯¹è±¡</code>æ¥è®¿é—®<code>ç›®æ ‡å¯¹è±¡</code>ï¼Œè¿˜å¯ä»¥åœ¨ä¸ä¿®æ”¹<code>ç›®æ ‡å¯¹è±¡</code>çš„æƒ…å†µä¸‹ï¼Œå¯¹<code>ä»£ç†å¯¹è±¡</code>è¿›è¡Œæ‹“å±•ï¼Œå¢å¼º<code>ç›®æ ‡å¯¹è±¡</code>çš„åŠŸèƒ½~</p>\n</blockquote>\n<p><strong>ä»€ä¹ˆï¼Ÿè¿˜æ˜¯ä¸å¤ªç†è§£ï¼Ÿ</strong></p>\n<blockquote>\n<p>æ›´é€šä¿—ä¸€ç‚¹çš„è¯´ä»£ç†æ¨¡å¼ï¼Œå°±æ˜¯æƒ³åšæŸä»¶äº‹ï¼ˆ<code>ä¹°ç«è½¦ç¥¨</code>ï¼‰ï¼Œ<code>è‡ªå·±</code>èƒ½ä¹°ï¼ˆç›´æ¥å»<code>ç«è½¦ç«™</code>ä¹°ï¼‰ï¼Œå´å§”æ‰˜åˆ«äººå»ä¹°ï¼ˆæ²¡ç©ºè¿˜æ˜¯<code>ä»£ç†ç‚¹</code>ä¹°å§ï¼‰ï¼Œè¿˜å¯ä»¥è®©åˆ«äººå¸®è‡ªå·±åšå…¶ä»–äº‹ï¼ˆè®¢å¥½é…’åº—ï¼‰~</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\bf70d190a42f4b74af640c330acbbc9b.png\"/></p>\n<p><strong>ä»£ç†æ¨¡å¼åˆåˆ†ä¸ºé™æ€ä»£ç†ã€åŠ¨æ€ä»£ç†ï¼Œå¾€ä¸‹ä»‹ç»~</strong></p>\n<h3><a id=\"332__532\"></a>ğŸ’¥3.3.2 ä»€ä¹ˆæ˜¯é™æ€ä»£ç†ï¼Ÿ</h3>\n<blockquote>\n<p>ï¼ˆ1ï¼‰<code>é™æ€ä»£ç†</code>å±äº<code>ä»£ç†æ¨¡å¼</code>çš„ä¸€ç§ä»£ç†æ–¹å¼ï¼Œéœ€è¦<code>ä»£ç†å¯¹è±¡</code>å’Œ<code>ç›®æ ‡å¯¹è±¡</code>å®ç°ç›¸åŒçš„æ¥å£<br/> ï¼ˆ2ï¼‰<code>é™æ€ä»£ç†</code>çš„ä»£ç†ç±»æ˜¯ç”±ç¨‹åºå‘˜ç¼–å†™æºç ï¼Œç¼–è¯‘åå³å¯è·å–åˆ°ä»£ç†ç±»çš„classå­—èŠ‚ç æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯åœ¨<code>ç¨‹åºè¿è¡Œå‰</code>å°±å·²ç»å¾—åˆ°å®é™…çš„ä»£ç†ç±»classå­—èŠ‚ç æ–‡ä»¶äº†</p>\n</blockquote>\n<h3><a id=\"332__537\"></a>ğŸ¶3.3.2 ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</h3>\n<p><strong>åŠ¨æ€ä»£ç†</strong></p>\n<blockquote>\n<p>ï¼ˆ1ï¼‰<code>åŠ¨æ€ä»£ç†</code>ä¹Ÿå±äº<code>ä»£ç†æ¨¡å¼</code>çš„ä¸€ç§ä»£ç†æ–¹å¼ï¼Œä¸è¿‡åªéœ€è¦<code>ç›®æ ‡å¯¹è±¡</code>å®ç°æ¥å£ï¼Œ<code>ä»£ç†å¯¹è±¡</code>ä¸éœ€è¦å®ç°æ¥å£~<br/> ï¼ˆ2ï¼‰<code>åŠ¨æ€ä»£ç†</code>çš„ä»£ç†ç±»ç¼–è¯‘åæ˜¯æ²¡æœ‰classå­—èŠ‚ç æ–‡ä»¶çš„ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶åˆ©ç”¨<code>Javaåå°„æœºåˆ¶</code>åŠ¨æ€çš„ç”Ÿæˆä»£ç†ç±»çš„classå­—èŠ‚ç æ–‡ä»¶~</p>\n</blockquote>\n<p>åŠ¨æ€ä»£ç†æœ€å¸¸ç”¨çš„æ˜¯<code>JDKåŸç”ŸåŠ¨æ€ä»£ç†</code>å’Œ<code>cglibåŠ¨æ€ä»£ç†</code>ï¼Œå¾€ä¸‹ä»‹ç»~</p>\n<p><strong>JDK åŸç”ŸåŠ¨æ€ä»£ç†</strong></p>\n<p>JDK åŸç”ŸåŠ¨æ€ä»£ç†ï¼Œä¸»è¦åˆ©ç”¨äº†<code>JDK API</code>çš„<br/> <code>java.lang.reflect.Proxy</code>å’Œ<code>java.lang.relfect.InnvocationHandler</code> è¿™ä¸¤ä¸ªç±»æ¥å®ç°~</p>\n<p>é€šè¿‡<code>java.lang.reflect.Proxy</code>ä»£ç†ç±»çš„<code>newProxyInstance</code>æ–¹æ³•ï¼Œä¼ é€’3ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š<br/> <code>ç›®æ ‡å¯¹è±¡çš„åŠ è½½å™¨</code> é€šè¿‡<code>MyClass.getClass().getClassLoader</code>æ–¹å¼è·å–<br/> <code>ç›®æ ‡å¯¹è±¡çš„å®ç°æ¥å£ç±»å‹</code> é€šè¿‡<code>Object.getClass().getInterfaces()</code>æ–¹å¼è·å–<br/> <code>InnvocationHandleräº‹ä»¶å¤„ç†å™¨</code> é€šè¿‡<code>new</code>å®ä¾‹åŒ–å¯¹è±¡å¹¶é‡å†™<code>invoke</code>æ–¹æ³•æ–¹å¼è·å–</p>\n<p><strong>ä¾‹å­ï¼š</strong></p>\n<p><strong>ç”¨æˆ·æ¥å£ç±»<code>IUserDao</code></strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">IUserDao</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">//æ·»åŠ æ•°æ®</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>ç›®æ ‡å¯¹è±¡ç±»<code>UserDao</code></strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token comment\">/**\n * @program: DataStructures\n * @description:\n * @author: JustinQin\n * @create: 2021/8/23 23:32\n * @version: v1.0.0\n **/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserDao</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">IUserDao</span><span class=\"token punctuation\">{<!-- --></span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ·»åŠ æ•°æ®\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>åŠ¨æ€ä»£ç†ç±»<code>UserProxy</code></strong></p>\n<pre><code class=\"prism language-java\">\n<span class=\"token comment\">/**\n * @program: Jdk1.8Test\n * @description: åŠ¨æ€ä»£ç†ç±»\n * @author: JustinQin\n * @create: 2021/8/23 23:31\n * @version: v1.0.0\n **/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserProxy</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">;</span> <span class=\"token comment\">//ç›®æ ‡å¯¹è±¡</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">UserProxy</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> target<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>target <span class=\"token operator\">=</span> target<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/**\n     * åˆ©ç”¨JDK APIè·å–åˆ°ä»£ç†å¯¹è±¡\n     * @return\n     */</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">getProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//ç›®æ ‡å¯¹è±¡çš„åŠ è½½å™¨</span>\n        <span class=\"token class-name\">ClassLoader</span> loader <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getClassLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//ç›®æ ‡å¯¹è±¡çš„å®ç°æ¥å£ç±»å‹</span>\n        <span class=\"token class-name\">Class</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token operator\">?</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> interfaces <span class=\"token operator\">=</span> target<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getInterfaces</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//InnvocationHandleräº‹ä»¶å¤„ç†å™¨å®ä¾‹å¯¹è±¡</span>\n        <span class=\"token class-name\">InvocationHandler</span> h <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InvocationHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token annotation punctuation\">@Override</span>\n            <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> proxy<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Method</span> method<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Throwable</span> <span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ·»åŠ æ•°æ®å‰ï¼šæ‰‹åŠ¨å¼€å¯äº‹åŠ¡\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">// æ‰§è¡Œç›®æ ‡å¯¹è±¡æ–¹æ³•</span>\n                <span class=\"token class-name\">Object</span> value <span class=\"token operator\">=</span> method<span class=\"token punctuation\">.</span><span class=\"token function\">invoke</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"æ·»åŠ æ•°æ®åï¼šæ‰‹åŠ¨æäº¤äº‹åŠ¡\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//ä¼ å…¥3ä¸ªå‚æ•°ï¼Œåˆ›å»ºä»£ç†ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è¿”å›</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">Proxy</span><span class=\"token punctuation\">.</span><span class=\"token function\">newProxyInstance</span><span class=\"token punctuation\">(</span>loader<span class=\"token punctuation\">,</span> interfaces<span class=\"token punctuation\">,</span>h<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n</code></pre>\n<p><strong>åŠ¨æ€ä»£ç†å•å…ƒæµ‹è¯•ç±»</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token comment\">/**\n * @program: åŠ¨æ€ä»£ç†å•å…ƒæµ‹è¯•ç±»\n * @description:\n * @author: JustinQin\n * @create: 2021/8/23 23:42\n * @version: v1.0.0\n **/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserProxyTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token annotation punctuation\">@Test</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token class-name\">IUserDao</span> target <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserDao</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ç›®æ ‡å¯¹è±¡ä¿¡æ¯ï¼š\"</span> <span class=\"token operator\">+</span> target<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//è·å–ä»£ç†ç±»å®ä¾‹å¯¹è±¡</span>\n        <span class=\"token class-name\">IUserDao</span> proxy <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">IUserDao</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserProxy</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getProxyInstance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ä»£ç†å¯¹è±¡ä¿¡æ¯ï¼š\"</span> <span class=\"token operator\">+</span> proxy<span class=\"token punctuation\">.</span><span class=\"token function\">getClass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//æ‰§è¡Œä»£ç†æ–¹æ³•</span>\n        proxy<span class=\"token punctuation\">.</span><span class=\"token function\">insert</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>å•å…ƒæµ‹è¯•æ‰§è¡Œç»“æœ</strong></p>\n<pre><code class=\"prism language-java\">ç›®æ ‡å¯¹è±¡ä¿¡æ¯ï¼š<span class=\"token keyword\">class</span> <span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>justin<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>reflect<span class=\"token punctuation\">.</span></span>UserDao</span>\nä»£ç†å¯¹è±¡ä¿¡æ¯ï¼š<span class=\"token keyword\">class</span> com<span class=\"token punctuation\">.</span>sun<span class=\"token punctuation\">.</span>proxy<span class=\"token punctuation\">.</span>$<span class=\"token class-name\">Proxy2</span>\næ·»åŠ æ•°æ®å‰ï¼šæ‰‹åŠ¨å¼€å¯äº‹åŠ¡\næ·»åŠ æ•°æ®\næ·»åŠ æ•°æ®åï¼šæ‰‹åŠ¨æäº¤äº‹åŠ¡\n</code></pre>\n<p><strong>cglibåŠ¨æ€ä»£ç†</strong></p>\n<blockquote>\n<p><code>cglib (Code Generation Library )</code>æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ä»£ç ç”Ÿæˆç±»åº“ï¼Œè¿è¡Œæ—¶åœ¨å†…å­˜ä¸­åŠ¨æ€ç”Ÿæˆä¸€ä¸ªå­ç±»å¯¹è±¡ä»è€Œå®ç°å¯¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½çš„æ‰©å±•ã€‚</p>\n</blockquote>\n<p><code>Spring AOP</code>ç»“åˆäº†<code>cglibåŠ¨æ€ä»£ç†</code>å’Œ<code>JDKåŸç”ŸåŠ¨æ€ä»£ç†</code>æ¥å®ç°ï¼Œè¿™é‡Œä¸è¿‡å¤šä»‹ç»ï¼Œæœ‰å…´è¶£å°ä¼™ä¼´å¯ä»¥æŸ¥é˜…èµ„æ–™å­¦ä¹ ä¸‹~</p>\n<h3><a id=\"333_Java_671\"></a>ğŸ§3.3.3 åŠ¨æ€ä»£ç†ä¸­å¦‚ä½•åˆ©ç”¨Javaåå°„æœºåˆ¶ï¼Ÿ</h3>\n<blockquote>\n<p>JDKåŸç”ŸåŠ¨æ€ä»£ç†ä¸­ï¼Œè·å–ä»£ç†ç¤ºä¾‹å¯¹è±¡è¿‡ç¨‹ä¸­ï¼Œè·å–ç›®æ ‡å¯¹è±¡çš„ç±»åŠ è½½å™¨ï¼Œé€šè¿‡<code>target.getClass().getClassLoader(</code>è·å–åˆ°ç›®æ ‡å¯¹è±¡çš„ç±»åŠ è½½å™¨ï¼Œ<code>target.getClass()</code>æ–¹å¼è·å–ç›®æ ‡å¯¹è±¡çš„Classå®ä¾‹å¯¹è±¡ä½¿ç”¨çš„å°±æ˜¯Javaåå°„æœºåˆ¶æ¥å®ç°çš„~</p>\n</blockquote>\n<h2><a id=\"34_Java_JDBC_674\"></a>ğŸ“¢3.4 Java JDBCæ•°æ®åº“æ“ä½œå®ç°</h2>\n<h3><a id=\"341_JDBC_675\"></a>ğŸ¹3.4.1 åˆ©ç”¨åå°„åŠ è½½JDBCé©±åŠ¨</h3>\n<p>ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½çŸ¥é“<code>Java JDBCè¿æ¥æ•°æ®åº“</code>ä¸»è¦åˆ†ä¸ºä¸ƒå¤§æ­¥éª¤ï¼Œå…¶ä¸­ç¬¬ä¸€æ­¥<code>åŠ è½½JDBCé©±åŠ¨</code>ï¼Œåˆ©ç”¨Javaåå°„æœºåˆ¶é€šè¿‡ä¼ å…¥ä¸åŒçš„é©±åŠ¨åç§°ï¼ŒåŠ è½½ä¸åŒæ•°æ®åº“çš„é©±åŠ¨~</p>\n<pre><code class=\"prism language-java\"><span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//åŠ è½½MySQLé©±åŠ¨</span>\n<span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"oracle.jdbc.driver.OracleDriver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//åŠ è½½Oracleé©±åŠ¨</span>\n</code></pre>\n<p><strong>é“¾æ¥ï¼š</strong><a href=\"https://pan.baidu.com/s/1p1aVlJShHt_mnpx6RDDDgg\">Mysqlé©±åŠ¨æ¶åŒ…mysql-connector-java-5.1.30.jar</a> <strong>æå–ç ï¼špc63</strong></p>\n<p><strong>é“¾æ¥ï¼š</strong><a href=\"https://pan.baidu.com/s/1GdaoJPfrV8L8oV2dy4aaMg\">Oracleé©±åŠ¨æ¶åŒ…ojdbc14-10.2.0.4.0.jar</a> <strong>å…æå–ç </strong></p>\n<h3><a id=\"342_Java_JDBC_686\"></a>ğŸ¸3.4.2 Java JDBCè¿æ¥ç¤ºä¾‹</h3>\n<p><strong>åˆ›å»ºæµ‹è¯•åº“è¡¨åŠæ•°æ®</strong></p>\n<pre><code class=\"prism language-java\">create <span class=\"token class-name\">DATABASE</span> test<span class=\"token punctuation\">;</span>\n<span class=\"token operator\">--</span> DROP TABLE IF EXISTS test<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">;</span>\ncreate table test<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span>\nid <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> primary key not <span class=\"token keyword\">null</span> auto_increment<span class=\"token punctuation\">,</span>\nname <span class=\"token function\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\nsex <span class=\"token keyword\">char</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\nage <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>ENGINE<span class=\"token operator\">=</span><span class=\"token class-name\">InnoDB</span> <span class=\"token class-name\">DEFAULT</span> CHARSET<span class=\"token operator\">=</span>utf8 COLLATE<span class=\"token operator\">=</span>utf8_general_ci<span class=\"token punctuation\">;</span>\ninsert into TEST<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span>sex<span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">)</span> <span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¼ ä¸€'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ç”·'</span><span class=\"token punctuation\">,</span><span class=\"token number\">21</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into TEST<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span>sex<span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">)</span> <span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¼ äºŒ'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¥³'</span><span class=\"token punctuation\">,</span><span class=\"token number\">22</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ninsert into TEST<span class=\"token punctuation\">.</span><span class=\"token function\">user</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span>sex<span class=\"token punctuation\">,</span>age<span class=\"token punctuation\">)</span> <span class=\"token function\">values</span><span class=\"token punctuation\">(</span><span class=\"token string\">'å¼ ä¸‰'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ç”·'</span><span class=\"token punctuation\">,</span><span class=\"token number\">23</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><strong>Java MySQL JDBCè¿æ¥ä¸ƒå¤§æ­¥éª¤~</strong></p>\n<pre><code class=\"prism language-java\">    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//1.åŠ è½½JDBCé©±åŠ¨</span>\n        <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"com.mysql.jdbc.Driver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//2.è·å–æ•°æ®åº“çš„è¿æ¥ï¼ˆConnectionï¼‰å¯¹è±¡</span>\n        <span class=\"token class-name\">Connection</span> connection <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string\">\"jdbc:mysql://localhost/test\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//mysqlè¿æ¥url,testè¡¨ç¤ºä½ è¦è¿æ¥çš„æ•°æ®åº“å</span>\n                <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//æ•°æ®åº“ç”¨æˆ·å</span>\n                <span class=\"token string\">\"abc@123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//å¯†ç </span>\n        <span class=\"token comment\">//3.è·å–æ•°æ®åº“çš„æ“ä½œï¼ˆPrepareStatementï¼‰å¯¹è±¡</span>\n        <span class=\"token class-name\">PreparedStatement</span> prepareStatement <span class=\"token operator\">=</span> connection<span class=\"token punctuation\">.</span><span class=\"token function\">prepareStatement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select * from TEST.user where id = ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//4.è®¾ç½®ä¼ å…¥å‚æ•°</span>\n        prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//5.ä¸Šä¼ sqlè¯­å¥åˆ°æœåŠ¡å™¨æ‰§è¡Œï¼ˆexcuteï¼‰ï¼Œå¹¶è¿”å›ç»“æœé›†ï¼ˆResultSetï¼‰</span>\n        <span class=\"token class-name\">ResultSet</span> result <span class=\"token operator\">=</span> prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//6.å¤„ç†è¿”å›çš„ResultSetç»“æœé›†</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">//7.é‡Šæ”¾ç›¸å…³èµ„æº:Connectionå¯¹è±¡ã€PrepareStatementå¯¹è±¡ã€ResultSetå¯¹è±¡ã€‚</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        result<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<p><strong>æ‰§è¡Œç»“æœï¼š</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>å¼ ä¸€<span class=\"token punctuation\">,</span>ç”·<span class=\"token punctuation\">,</span><span class=\"token number\">21</span>\n</code></pre>\n<p><strong>Java Oracle JDBCè¿æ¥ä¸ƒå¤§æ­¥éª¤~</strong></p>\n<pre><code class=\"prism language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JdbcOracleTest</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">ClassNotFoundException</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">SQLException</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token comment\">//1.åŠ è½½JDBCé©±åŠ¨</span>\n        <span class=\"token class-name\">Class</span><span class=\"token punctuation\">.</span><span class=\"token function\">forName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"oracle.jdbc.driver.OracleDriver\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//2.è·å–æ•°æ®åº“çš„è¿æ¥ï¼ˆConnectionï¼‰å¯¹è±¡</span>\n        <span class=\"token class-name\">Connection</span> connection <span class=\"token operator\">=</span> <span class=\"token class-name\">DriverManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getConnection</span><span class=\"token punctuation\">(</span>\n                <span class=\"token string\">\"jdbc:oracle:thin:@127.0.0.1:1521:orcl\"</span><span class=\"token punctuation\">,</span>\t<span class=\"token comment\">//oracleè¿æ¥url</span>\n                <span class=\"token string\">\"root\"</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">//æ•°æ®åº“ç”¨æˆ·å</span>\n                <span class=\"token string\">\"abc@123456\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//å¯†ç </span>\n        <span class=\"token comment\">//3.è·å–æ•°æ®åº“çš„æ“ä½œï¼ˆPrepareStatementï¼‰å¯¹è±¡</span>\n        <span class=\"token class-name\">PreparedStatement</span> prepareStatement <span class=\"token operator\">=</span> connection<span class=\"token punctuation\">.</span><span class=\"token function\">prepareStatement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"select * from TEST.user where id = ?\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//4.è®¾ç½®ä¼ å…¥å‚æ•°</span>\n        prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">setInt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//5.ä¸Šä¼ sqlè¯­å¥åˆ°æœåŠ¡å™¨æ‰§è¡Œï¼ˆexcuteï¼‰ï¼Œå¹¶è¿”å›ç»“æœé›†ï¼ˆResultSetï¼‰</span>\n        <span class=\"token class-name\">ResultSet</span> result <span class=\"token operator\">=</span> prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">executeQuery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//6.å¤„ç†è¿”å›çš„ResultSetç»“æœé›†</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"id\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getString</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sex\"</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">getInt</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">//7.é‡Šæ”¾ç›¸å…³èµ„æº:Connectionå¯¹è±¡ã€PrepareStatementå¯¹è±¡ã€ResultSetå¯¹è±¡ã€‚</span>\n        connection<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        prepareStatement<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        result<span class=\"token punctuation\">.</span><span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<blockquote>\n<p>PSï¼šä¸Šé¢é€šè¿‡Java JDBCè¿æ¥æ•°æ®åº“å¹¶è¿›è¡Œæ“ä½œï¼Œè¿™é‡Œçš„è¿æ¥æ˜¯å•ä¸€è¿æ¥ï¼Œç›´æ¥é€šè¿‡DriverManager.getConnectionè¿™ç§JavaåŸç”Ÿçš„æ•°æ®åº“è¿æ¥æ–¹å¼å»ºç«‹çš„è¿æ¥ï¼Œç°åœ¨å®é™…çš„Java Springé¡¹ç›®å½“ä¸­ï¼Œéƒ½æ˜¯é€šè¿‡é…ç½®mybatisçš„æ•°æ®åº“è¿æ¥æ± æ¥å®ç°çš„ï¼Œä¸è¿‡åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼ŒåŠ è½½é©±åŠ¨ä¹Ÿæ˜¯åˆ©ç”¨äº†<code>Javaåå°„æœºåˆ¶</code>æŒ‡å®šä¸åŒçš„é©±åŠ¨åç§°ï¼Œå®ç°ä¸åŒæ•°æ®åº“é©±åŠ¨çš„åŠ è½½~</p>\n</blockquote>\n<p><strong>æ•°æ®åº“è¿æ¥æ± é…ç½®<code>spring-mybatis.xml</code></strong></p>\n<pre><code class=\"prism language-xml\">\t<span class=\"token comment\">&lt;!-- åŸºäºtomcat jdbcè¿æ¥æ± çš„æ•°æ®æº  --&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>bean</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.justin.datasource.TomcatDataSource<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">init-method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>createPool<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- åŸºäºdbcpè¿æ¥æ± çš„æ•°æ®æº\n\t\t&lt;bean id=\"dataSource\" class=\"com.justin.datasource.DbcpDataSource\" destroy-method=\"close\"&gt; --&gt;</span>\n\t\t<span class=\"token comment\">&lt;!-- åŸºäºé˜¿é‡Œdruidè¿æ¥æ± çš„æ•°æ®æº\n        &lt;bean id=\"dataSource\" class=\"com.justin.datasource.DruidDataSource\" destroy-method=\"close\"&gt; --&gt;</span>\n\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driverClassName<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.driverClassName}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.url}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.username}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.password}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- åˆå§‹åŒ–è¿æ¥å¤§å° --&gt;</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>initialSize<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.initialSize}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- è¿æ¥æ± æœ€å¤§æ•°é‡ --&gt;</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxActive<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.maxActive}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- è¿æ¥æ± æœ€å¤§ç©ºé—² --&gt;</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.maxIdle}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- è¿æ¥æ± æœ€å°ç©ºé—² --&gt;</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>minIdle<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.minIdle}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t\t<span class=\"token comment\">&lt;!-- è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´ --&gt;</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>maxWait<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>${app-data-source.maxWait}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>bean</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre>\n<p><strong>æ•°æ®åº“é…ç½®ä¿¡æ¯<code>jdbc.propertis</code></strong></p>\n<pre><code class=\"prism language-java\">#æ•°æ®åº“è¿æ¥é©±åŠ¨\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>driverClassName<span class=\"token operator\">=</span><span class=\"token class-name\"><span class=\"token namespace\">com<span class=\"token punctuation\">.</span>mysql<span class=\"token punctuation\">.</span>jdbc<span class=\"token punctuation\">.</span></span>Driver</span>\n#æ•°æ®åº“è¿æ¥url\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>url<span class=\"token operator\">=</span>jdbc<span class=\"token operator\">:</span>mysql<span class=\"token operator\">:</span><span class=\"token operator\">/</span><span class=\"token operator\">/</span>localhost<span class=\"token operator\">:</span><span class=\"token number\">3306</span><span class=\"token operator\">/</span>test<span class=\"token operator\">?</span>useSSL<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token operator\">&amp;</span>characterEncoding<span class=\"token operator\">=</span>UTF<span class=\"token operator\">-</span><span class=\"token number\">8</span>\n#æ•°æ®åº“ç”¨æˆ·\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>username<span class=\"token operator\">=</span>root\n#æ•°æ®åº“ç”¨æˆ·å¯†ç <span class=\"token punctuation\">(</span>åŠ å¯†<span class=\"token punctuation\">)</span>\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>password<span class=\"token operator\">=</span>abc<span class=\"token annotation punctuation\">@123456</span>\n#è¿æ¥æ± åˆå§‹åŒ–å¤§å°\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>initialSize<span class=\"token operator\">=</span><span class=\"token number\">10</span>\n#è¿æ¥æ± æœ€å¤§æ•°é‡\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>maxActive<span class=\"token operator\">=</span><span class=\"token number\">50</span>\n#è¿æ¥æ± æœ€å¤§ç©ºé—²\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>maxIdle<span class=\"token operator\">=</span><span class=\"token number\">20</span>\n#è¿æ¥æ± æœ€å°ç©ºé—²\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>minIdle<span class=\"token operator\">=</span><span class=\"token number\">5</span>\n#è·å–è¿æ¥æœ€å¤§ç­‰å¾…æ—¶é—´\napp<span class=\"token operator\">-</span>data<span class=\"token operator\">-</span>source<span class=\"token punctuation\">.</span>maxWait<span class=\"token operator\">=</span><span class=\"token number\">30000</span>\n</code></pre>\n<h1><a id=\"_826\"></a>é¢è¯•æ€»ç»“</h1>\n<p><strong>ä¸€ã€Javaåå°„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</strong><br/> 1ã€Javaåå°„æœºåˆ¶ï¼ˆ<code>Java Reflection</code>ï¼‰æ˜¯Javaè¯­è¨€ä¸­ä¸€ç§<code>åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰è®¿é—®ã€æ£€æµ‹ &amp; ä¿®æ”¹å®ƒæœ¬èº«</code>çš„èƒ½åŠ›ï¼Œä¸»è¦ä½œç”¨æ˜¯<code>åŠ¨æ€ï¼ˆè¿è¡Œæ—¶ï¼‰è·å–ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ &amp; è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•</code>~<br/> æ›´ç®€å•ç‚¹çš„è¯´å°±æ˜¯Javaç¨‹åºåœ¨è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰é€šè¿‡åˆ›å»ºä¸€ä¸ªç±»çš„åå°„å¯¹è±¡ï¼Œå†å¯¹ç±»è¿›è¡Œç›¸å…³æ“ä½œï¼Œæ¯”å¦‚ï¼š</p>\n<ul><li>è·å–è¯¥å¯¹è±¡çš„æˆå‘˜å˜é‡ &amp; èµ‹å€¼</li><li>è°ƒç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•ï¼ˆå«æ„é€ æ–¹æ³•ï¼Œæœ‰å‚/æ— å‚ï¼‰</li><li>åˆ¤æ–­è¯¥å¯¹è±¡æ‰€å±çš„ç±»</li></ul>\n<p>2ã€æ›´é€šä¿—ç‚¹çš„è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨æŸä¸ªç±»ï¼Œéƒ½ä¼šçŸ¥é“è¿™ä¸ªç±»ï¼Œä»¥åŠè¦ç”¨å®ƒæ¥åšä»€ä¹ˆï¼Œå¯ä»¥ç›´æ¥é€šè¿‡<code>new</code>å®ä¾‹åŒ–åˆ›å»ºå¯¹è±¡ï¼Œç„¶åä½¿ç”¨è¿™ä¸ªå¯¹è±¡å¯¹ç±»è¿›è¡Œæ“ä½œï¼Œè¿™ä¸ªå°±å±äº<code>æ­£å°„</code>~</p>\n<p>3ã€è€Œ<code>åå°„</code>åˆ™æ˜¯ä¸€å¼€å§‹å¹¶ä¸çŸ¥é“è¦åˆå§‹åŒ–çš„æ˜¯ä»€ä¹ˆç±»ï¼Œæ— æ³•ä½¿ç”¨<code>new</code>æ¥å®ä¾‹åŒ–åˆ›å»ºå¯¹è±¡ï¼Œä¸»è¦æ˜¯é€šè¿‡JDKæä¾›çš„åå°„APIæ¥å®ç°ï¼Œåœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„æ˜¯ä»€ä¹ˆç±»ï¼Œå¹¶ä¸”å¯ä»¥è·å–åˆ°ç±»çš„å®Œæ•´æ„é€ ä»¥åŠè°ƒç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯<code>åå°„</code>~</p>\n<p><strong>äºŒã€Javaåå°„æœºåˆ¶ä¸­è·å–Classçš„ä¸‰ç§æ–¹å¼åŠåŒºåˆ«ï¼Ÿ</strong><br/> 1ã€è·å–ç±»çš„<code>java.lang.Class</code>å®ä¾‹å¯¹è±¡ï¼Œå¸¸è§çš„ä¸‰ç§æ–¹å¼åˆ†åˆ«ä¸ºï¼š</p>\n<ul><li>é€šè¿‡<code>MyClass.class</code>è·å–</li><li>é€šè¿‡<code>Class.forName(\"ç±»çš„å…¨å±€å®šå\")</code>è·å–</li><li>é€šè¿‡<code>new MyClass().getClass()</code>è·å–</li></ul>\n<p>2ã€é€šè¿‡<code>MyClass.class</code>è·å–ï¼ŒJVMä¼šä½¿ç”¨<code>ClassLoader</code>ç±»åŠ è½½å™¨å°†ç±»åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä½†å¹¶<mark>ä¸ä¼šåšä»»ä½•ç±»çš„åˆå§‹åŒ–å·¥ä½œ</mark>ï¼Œè¿”å›<code>java.lang.Class</code>å¯¹è±¡</p>\n<p>3ã€é€šè¿‡<code>Class.forName(\"ç±»çš„å…¨å±€å®šå\")</code>è·å–ï¼ŒåŒæ ·ï¼Œç±»ä¼šè¢«JVMåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸”<mark>ä¼šè¿›è¡Œç±»çš„é™æ€åˆå§‹åŒ–å·¥ä½œ</mark>ï¼Œè¿”å›<code>java.lang.Class</code>å¯¹è±¡</p>\n<p>4ã€é€šè¿‡<code>new MyClass().getClass()</code>è·å–ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨äº†<code>new</code>è¿›è¡Œå®ä¾‹åŒ–æ“ä½œï¼Œå› æ­¤== é™æ€åˆå§‹åŒ–å’Œéé™æ€åˆå§‹åŒ–å·¥ä½œéƒ½ä¼šè¿›è¡Œ == ï¼Œ<code>getClass</code>æ–¹æ³•å±äºé¡¶çº§<code>Object</code>ç±»ä¸­çš„æ–¹æ³•ï¼Œä»»ä½•å­ç±»å¯¹è±¡éƒ½å¯ä»¥è°ƒç”¨ï¼Œå“ªä¸ªå­ç±»è°ƒç”¨ï¼Œå°±è¿”å›é‚£ä¸ªå­ç±»çš„<code>java.lang.Class</code>å¯¹è±¡</p>\n<p>5ã€è¿™3ç§æ–¹å¼ï¼Œæœ€ç»ˆåœ¨JVMå †åŒºå¯¹åº”ç±»çš„<code>java.lang.Class</code>å¯¹è±¡éƒ½å±äºåŒä¸€ä¸ªï¼Œä¹Ÿå°±æ˜¯<mark>å†…å­˜åœ°å€ç›¸åŒ</mark>ï¼Œè¿›è¡Œ<code>==</code>åŒç­‰å·æ¯”è¾ƒç»“æœä¸º<code>true</code>ï¼ŒåŸå› æ˜¯JVMç±»åŠ è½½è¿‡ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ª<code>ClassLoader</code>ç±»åŠ è½½å™¨åŠ è½½æŸä¸ªç±»ï¼Œä¸è®ºåŠ è½½å¤šå°‘æ¬¡ï¼Œç”Ÿæˆåˆ°å †åŒºçš„<code>java.lang.Class</code>å¯¹è±¡å§‹ç»ˆåªæœ‰ä¸€ä¸ªï¼Œé™¤éè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œç ´åJVMçš„åŒäº²å§”æ´¾æœºåˆ¶ï¼Œä½¿å¾—åŒä¸€ä¸ªç±»è¢«ä¸åŒç±»åŠ è½½å™¨åŠ è½½ï¼ŒJVMæ‰ä¼šæŠŠå®ƒå½“åšä¸¤ä¸ªä¸åŒçš„<code>java.lang.Class</code>å¯¹è±¡</p>\n<p><strong>ä¸‰ã€Javaåå°„æœºåˆ¶çš„åº”ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</strong></p>\n<ul><li><code>å·¥å‚æ¨¡å¼</code>ä¸­çš„ç®€å•å·¥å‚æ¨¡å¼ä¼˜åŒ–</li><li><code>ä»£ç†æ¨¡å¼</code>ä¸­çš„åŠ¨æ€ä»£ç†æ–¹å¼å®ç°</li><li><code>Java JDBC</code>æ•°æ®åº“æ“ä½œ</li></ul>\n<p><strong>åŸåˆ›ä¸æ˜“ï¼Œè§‰å¾—æœ‰ç”¨çš„å°ä¼™ä¼´æ¥ä¸ª<code>ä¸€é”®ä¸‰è¿ï¼ˆç‚¹èµ+æ”¶è—+è¯„è®º ï¼‰+å…³æ³¨</code>æ”¯æŒä¸€ä¸‹ï¼Œéå¸¸æ„Ÿè°¢~</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\97fce46ef9154377832dd10c3fec1580.png\"/><br/> <img alt=\"\" src=\"image\\74630c41de6a72bcea6c14c0bd97edbc.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}