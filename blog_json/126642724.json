{"blogid": "126642724", "writerAge": "ç é¾„99å¤©", "writerBlogNum": "176", "writerCollect": "2299", "writerComment": "180", "writerFan": "774", "writerGrade": "5çº§", "writerIntegral": "3008", "writerName": "Mdc_stdio", "writerProfileAdress": "writer_image\\profile_126642724.jpg", "writerRankTotal": "5961", "writerRankWeekly": "245", "writerThumb": "1072", "writerVisitNum": "144636", "blog_read_count": "856", "blog_time": "äºÂ 2022-09-01 14:33:05Â å‘å¸ƒ", "blog_title": "ã€æ¯•ä¸šè®¾è®¡ã€‘åŸºäºå•ç‰‡æœºçš„æ¡Œé¢ç‚«é…·å¾‹åŠ¨ç¯æ¡ -ç‰©è”ç½‘ åµŒå…¥å¼ å•ç‰‡æœº", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><a href=\"#0__5\">0 å‰è¨€</a></li><li><a href=\"#1__29\">1 ç®€ä»‹</a></li><li><a href=\"#2__33\">2 ä¸»è¦å™¨ä»¶</a></li><li><a href=\"#3__45\">3 å®ç°æ•ˆæœ</a></li><li><a href=\"#4__56\">4 è®¾è®¡åŸç†</a></li><li><a href=\"#5__72\">5 éƒ¨åˆ†æ ¸å¿ƒä»£ç </a></li><li><a href=\"#6__348\">6 æœ€å</a></li></ul>\n</div>\n<p></p>\n<hr color=\"#000000\" size='1\"'/>\n<h1><a id=\"0__5\"></a>0 å‰è¨€</h1>\n<p>ğŸ”¥ è¿™ä¸¤å¹´å¼€å§‹æ¯•ä¸šè®¾è®¡å’Œæ¯•ä¸šç­”è¾©çš„è¦æ±‚å’Œéš¾åº¦ä¸æ–­æå‡ï¼Œä¼ ç»Ÿçš„æ¯•è®¾é¢˜ç›®ç¼ºå°‘åˆ›æ–°å’Œäº®ç‚¹ï¼Œå¾€å¾€è¾¾ä¸åˆ°æ¯•ä¸šç­”è¾©çš„è¦æ±‚ï¼Œè¿™ä¸¤å¹´ä¸æ–­æœ‰å­¦å¼Ÿå­¦å¦¹å‘Šè¯‰å­¦é•¿è‡ªå·±åšçš„é¡¹ç›®ç³»ç»Ÿè¾¾ä¸åˆ°è€å¸ˆçš„è¦æ±‚ã€‚</p>\n<p>ä¸ºäº†å¤§å®¶èƒ½å¤Ÿé¡ºåˆ©ä»¥åŠæœ€å°‘çš„ç²¾åŠ›é€šè¿‡æ¯•è®¾ï¼Œå­¦é•¿åˆ†äº«ä¼˜è´¨æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œä»Šå¤©è¦åˆ†äº«çš„æ˜¯</p>\n<p>ğŸš© <strong>åŸºäºå•ç‰‡æœºçš„æ¡Œé¢ç‚«é…·å¾‹åŠ¨ç¯æ¡</strong></p>\n<p>ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)</p>\n<ul><li>éš¾åº¦ç³»æ•°ï¼š2åˆ†</li><li>å·¥ä½œé‡ï¼š2åˆ†</li><li>åˆ›æ–°ç‚¹ï¼š3åˆ†</li></ul>\n<p>ğŸ§¿ <strong>é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š</strong></p>\n<p><a href=\"https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md\">https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md</a></p>\n<br/>\n<h1><a id=\"1__29\"></a>1 ç®€ä»‹</h1>\n<p>esp8285èŠ¯ç‰‡ESP-01Fæ¨¡å—ä¸ºä¸»æ§ï¼ŒMAX9814éŸ³é¢‘é‡‡é›†æ¨¡å—ï¼ŒWS2812 2020rgbç¯ç ï¼ŒArduinoç¼–ç¨‹ç¯å¢ƒç®€å•åˆ¶ä½œä¸€ä¸ªå¾‹åŠ¨ç¯æ¡ã€‚</p>\n<h1><a id=\"2__33\"></a>2 ä¸»è¦å™¨ä»¶</h1>\n<p>ç›´æ¥ç”¨MAX9814éŸ³é¢‘é‡‡é›†æ¨¡å—ç„Šåœ¨æ¿å­ä¸Šï¼Œæ•ˆæœéå¸¸å¥½ã€‚</p>\n<p>esp8266æ¨¡å—æ‰€ä»¥å¯ä»¥åšhttpæœåŠ¡ï¼Œæ‰€ä»¥å°±å¯ä»¥åšä¸ªé¡µé¢æŠŠæ‰€æœ‰å‚æ•°éƒ½æ‹¿å‡ºæ¥è‡ªå®šä¹‰ã€‚</p>\n<p>å…‰ç»˜æ£’éƒ¨åˆ†ä¼šä¸“é—¨å†åšä¸ªé•¿çš„ï¼Œè¿™é‡Œå°±æ²¡è®²äº†ï¼ŒåŸç†å¾ˆç®€å•å°±æ˜¯æŒ‰å›¾åƒåƒç´ ç‚¹çš„è¡Œæˆ–è€…åˆ—é¡ºåºä¿®æ”¹ç¯ç å¯¹åº”çš„é¢œè‰²å°±è¡Œäº†ã€‚</p>\n<ul><li>esp8285èŠ¯ç‰‡ESP-01Fæ¨¡å—</li><li>MAX9814éŸ³é¢‘é‡‡é›†æ¨¡å—</li><li>WS2812 2020rgbç¯ç </li></ul>\n<h1><a id=\"3__45\"></a>3 å®ç°æ•ˆæœ</h1>\n<p><strong>æ•´ä½“å±•ç¤º</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\f0a9d2b84ffb4f39885aff136e6ce05c.png\"/></p>\n<p><strong>å¯è°ƒRGB</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d38b269623684cb48a4e84c3091537bb.png\"/></p>\n<p><strong>ç¯å…‰æ•ˆæœéšéŸ³ä¹å¾‹åŠ¨</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\ebb4d051ff2843018f74ac48698e649c.png\"/></p>\n<h1><a id=\"4__56\"></a>4 è®¾è®¡åŸç†</h1>\n<p><strong>æ¨¡å—ç®€ä»‹</strong><br/> esp8285 å’Œ ESP8266ä¸€æ ·ï¼Œéƒ½æ˜¯ç”±ä¹é‘«å…¬å¸å¼€å‘ï¼Œæä¾›äº†â¼€å¥—â¾¼åº¦é›†æˆçš„ Wi-Fi SoC è§£å†³â½…æ¡ˆï¼Œå…¶ä½åŠŸè€—ã€ç´§å‡‘è®¾è®¡å’Œâ¾¼ç¨³å®šæ€§å¯ä»¥æ»¡â¾œâ½¤æˆ·çš„éœ€æ±‚ã€‚<br/> esp8266çš„ä»£ç åŒæ ·é€‚åˆåœ¨esp8285ä¸Šè¿è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯æ”¯æŒnonoså’Œ rtosã€‚</p>\n<p><strong>MAX9814éŸ³é¢‘é‡‡é›†æ¨¡å—</strong><br/> é€šè¿‡MAX9814è¿›è¡ŒéŸ³é¢‘é‡‡é›†æ¨¡æ‹Ÿå€¼ï¼Œä¸Šé¢æ ‡æ³¨äº†DC offsetï¼ˆç›´æµåç§»ï¼‰ï¼š1.2vã€‚è€Œesp8285æˆ–è€…8266çš„ADCé‡‡æ ·åªèƒ½æ¥æ”¶1vï¼Œæ‰€ä»¥é‡‡é›†çš„ADCä¿¡å·è¦è¿›è¡Œä¸²è”ç”µé˜»åˆ†å‹ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\b138a6d7f55e4f1eb8931718f7924e34.png\"/></p>\n<p><strong>ä¸»è¦åŸç†å›¾</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\dbdfcaf6848742329343f34e32a658a7.png\"/></p>\n<h1><a id=\"5__72\"></a>5 éƒ¨åˆ†æ ¸å¿ƒä»£ç </h1>\n<pre><code class=\"prism language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ESP8266WiFi.h&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;WiFiClient.h&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;ESP8266WebServer.h&gt;</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;FastLED.h&gt;</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;MegunoLink.h&gt;</span>  <span class=\"token comment\">//æ»¤æ³¢åº“ https://www.megunolink.com/documentation/arduino-library/</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span><span class=\"token string\">&lt;Filter.h&gt;</span>      <span class=\"token comment\">//é¡¹ç›®-åŠ è½½åº“-åº“ç®¡ç† æœç´¢ MegunoLink å®‰è£…</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">ifndef</span> <span class=\"token expression\">STASSID</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STASSID</span> <span class=\"token string\">\"********\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">STAPSK</span>  <span class=\"token string\">\"********\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">endif</span></span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> ssid <span class=\"token operator\">=</span> STASSID<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">char</span><span class=\"token operator\">*</span> password <span class=\"token operator\">=</span> STAPSK<span class=\"token punctuation\">;</span>\n\nESP8266WebServer <span class=\"token function\">server</span><span class=\"token punctuation\">(</span><span class=\"token number\">80</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// define necessary parameters</span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">N_PIXELS</span>  <span class=\"token expression\"><span class=\"token number\">30</span>   </span><span class=\"token comment\">//ledç¯ç æ•°é‡</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">MIC_PIN</span>   <span class=\"token expression\">A0   </span><span class=\"token comment\">//éŸ³é¢‘é‡‡é›†æ¨¡å—æ¥å£</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED_PIN</span>   <span class=\"token expression\"><span class=\"token number\">13</span>   </span><span class=\"token comment\">//ledç¯å¸¦æ¥å£</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">NOISE</span> <span class=\"token expression\"><span class=\"token number\">60</span>       </span><span class=\"token comment\">//å™ªéŸ³åº•çº¿</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">TOP</span>   <span class=\"token expression\"><span class=\"token punctuation\">(</span>N_PIXELS<span class=\"token operator\">+</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> </span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">LED_TYPE</span>  <span class=\"token expression\">WS2812</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">BRIGHTNESS</span>  <span class=\"token expression\"><span class=\"token number\">100</span>   </span><span class=\"token comment\">//ç¯ç äº®åº¦</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">COLOR_ORDER</span> <span class=\"token expression\">GRB</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SW1</span> <span class=\"token expression\"><span class=\"token number\">4</span>    </span><span class=\"token comment\">//æŒ‰é’®IO</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SW2</span> <span class=\"token expression\"><span class=\"token number\">0</span></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">SW3</span> <span class=\"token expression\"><span class=\"token number\">5</span></span></span>\n\nCRGB leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">uint16_t</span> R<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">uint16_t</span> G<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">uint16_t</span> B<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> lvl <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> minLvl <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> maxLvl <span class=\"token operator\">=</span> <span class=\"token number\">256</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// è®¾ç½®æœ€å¤§æœ€å°é™å€¼</span>\n\nExponentialFilter<span class=\"token operator\">&lt;</span><span class=\"token keyword\">long</span><span class=\"token operator\">&gt;</span> <span class=\"token function\">ADCFilter</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nString <span class=\"token function\">postForms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> \n<span class=\"token punctuation\">{<!-- --></span>\n  String htmlCode <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;!DOCTYPE html&gt;&lt;html&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n   htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;head&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n   htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;title&gt;è°ƒè‰²&lt;/title&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n   htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;meta http-equiv='Content-Type' content='text/html; charset=UTF-8'&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n   htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;meta name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0'/&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n   htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;style&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"body { background-color: #cccccc; font-family: Arial, Helvetica, Sans-Serif; Color: #000088; }\\n\"</span><span class=\"token punctuation\">;</span>\n    htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;/style&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n  htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;/head&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n  htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;body&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n    htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;h1&gt;è¾“å…¥RGBå€¼&lt;/h1&gt;&lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n    htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;form method=\\\"post\\\" enctype=\\\"application/x-www-form-urlencoded\\\" action=\\\"/\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"R   G   B &lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"0 \\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"G0\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> R<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"R0\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> G<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"B0\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> B<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;&lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"1 \\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"G1\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> R<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"R1\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> G<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"B1\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> B<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;&lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"2 \\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"G2\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> R<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"R2\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> G<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"text\\\" name=\\\"B2\\\" value= \\\"\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> B<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"\\\" size=\\\"5\\\" initial-scale = 2.0 autocomplete=\\\"off\\\"&gt;&lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;input type=\\\"submit\\\" value=\\\"ä¿®æ”¹\\\"&gt;&lt;br&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n      \n    htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;/form&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n\n  htmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;/body&gt;\\n\"</span><span class=\"token punctuation\">;</span>\nhtmlCode <span class=\"token operator\">+=</span> <span class=\"token string\">\"&lt;/html&gt;\\n\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> htmlCode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">handleRoot</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  String message <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">args</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    \n   message <span class=\"token operator\">+=</span> <span class=\"token string\">\" \"</span> <span class=\"token operator\">+</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">argName</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\": \"</span> <span class=\"token operator\">+</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">args</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">&gt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    R<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    G<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    B<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    R<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    G<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    B<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    R<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    G<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    B<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>server<span class=\"token punctuation\">.</span><span class=\"token function\">arg</span><span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toInt</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N_PIXELS<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">colour</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  server<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/html\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">postForms</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">115200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>SW1<span class=\"token punctuation\">,</span> INPUT_PULLUP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>SW2<span class=\"token punctuation\">,</span> INPUT_PULLUP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">pinMode</span><span class=\"token punctuation\">(</span>SW3<span class=\"token punctuation\">,</span> INPUT_PULLUP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  server<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span> handleRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  server<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HTTP server started\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  FastLED<span class=\"token punctuation\">.</span>addLeds<span class=\"token operator\">&lt;</span>LED_TYPE<span class=\"token punctuation\">,</span>LED_PIN<span class=\"token punctuation\">,</span>COLOR_ORDER<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">(</span>leds<span class=\"token punctuation\">,</span>N_PIXELS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">setCorrection</span><span class=\"token punctuation\">(</span>TypicalLEDStrip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">setBrightness</span><span class=\"token punctuation\">(</span>BRIGHTNESS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\">uint16_t</span>  samnum<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> maxtemp<span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">uint8_t</span> sta<span class=\"token punctuation\">,</span>mode_num<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>sta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">case</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span>\n      <span class=\"token keyword\">int</span> n<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">;</span>\n      n <span class=\"token operator\">=</span> <span class=\"token function\">analogRead</span><span class=\"token punctuation\">(</span>MIC_PIN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      n <span class=\"token operator\">=</span> <span class=\"token function\">abs</span><span class=\"token punctuation\">(</span><span class=\"token number\">512</span> <span class=\"token operator\">-</span> n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      n <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">&lt;=</span> NOISE<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> <span class=\"token number\">0</span> <span class=\"token operator\">:</span> <span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>n <span class=\"token operator\">-</span> NOISE<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      ADCFilter<span class=\"token punctuation\">.</span><span class=\"token function\">Filter</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      lvl <span class=\"token operator\">=</span> ADCFilter<span class=\"token punctuation\">.</span><span class=\"token function\">Current</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//      Serial.print(\"n: \");</span>\n<span class=\"token comment\">//      Serial.print(n);</span>\n<span class=\"token comment\">//      Serial.print(\" lvl: \");</span>\n<span class=\"token comment\">//      Serial.print(lvl);</span>\n<span class=\"token comment\">//      Serial.print(\" maxLvl: \");</span>\n<span class=\"token comment\">//      Serial.println(maxLvl);</span>\n      \n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>samnum<span class=\"token operator\">&lt;</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        maxtemp <span class=\"token operator\">=</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>maxtemp<span class=\"token punctuation\">,</span>lvl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        samnum<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>maxtemp <span class=\"token operator\">&lt;</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n          maxLvl <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n          maxLvl <span class=\"token operator\">=</span> maxtemp<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        maxtemp <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        samnum <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    \n      height <span class=\"token operator\">=</span> TOP <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span>lvl <span class=\"token operator\">-</span> minLvl<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">long</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>maxLvl <span class=\"token operator\">-</span> minLvl<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>height <span class=\"token operator\">&lt;</span> <span class=\"token number\">0L</span><span class=\"token punctuation\">)</span> height <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>height <span class=\"token operator\">&gt;</span> TOP<span class=\"token punctuation\">)</span> height <span class=\"token operator\">=</span> TOP<span class=\"token punctuation\">;</span>\n      \n      <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>mode_num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span>\n          <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N_PIXELS<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&gt;=</span> height<span class=\"token punctuation\">)</span> leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CRGB</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">else</span> leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">colour</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span>\n          <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N_PIXELS<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token comment\">// turn off LEDs above the current level</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">&gt;=</span> height<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n              leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CRGB</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CRGB</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            \n            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{<!-- --></span>\n              leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">colour</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n              leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token operator\">+</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">colour</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      \n      FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span>\n      server<span class=\"token punctuation\">.</span><span class=\"token function\">handleClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW1<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW1<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n      sta<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>sta<span class=\"token operator\">&gt;</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>sta <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW1<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>sta <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>  \n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N_PIXELS<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CRGB</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">mode</span><span class=\"token punctuation\">(</span>WIFI_STA<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">,</span> password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n        <span class=\"token comment\">// Wait for connection</span>\n        <span class=\"token keyword\">int</span> j <span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> WL_CONNECTED<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CRGB</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n           j<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token punctuation\">}</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Connected to \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>ssid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"IP address: \"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>WiFi<span class=\"token punctuation\">.</span><span class=\"token function\">localIP</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint8_t</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> N_PIXELS<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n          leds<span class=\"token punctuation\">[</span>N_PIXELS<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token operator\">-</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">colour</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        FastLED<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  \n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW2<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW2<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{<!-- --></span>\n      mode_num<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>mode_num<span class=\"token operator\">&gt;</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>mode_num <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token function\">digitalRead</span><span class=\"token punctuation\">(</span>SW2<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> LOW<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n  \n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<br/>\n<h1><a id=\"6__348\"></a>6 æœ€å</h1>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}