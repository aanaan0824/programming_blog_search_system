{"blogid": "126743746", "writerAge": "码龄14年", "writerBlogNum": "303", "writerCollect": "220", "writerComment": "37", "writerFan": "180", "writerGrade": "7级", "writerIntegral": "12007", "writerName": "向良玉", "writerProfileAdress": "writer_image\\profile_126743746.jpg", "writerRankTotal": "857322", "writerRankWeekly": "60953", "writerThumb": "51", "writerVisitNum": "1048588", "blog_read_count": "15", "blog_time": "于 2022-09-07 13:23:49 发布", "blog_title": "Centos6.9安装redis-dump", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p style=\"margin-left:.0001pt;text-align:justify;\">源码编译ruby2.6.5</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">https://ruby-china.org/wiki/ruby-mirror</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">安装编译依赖工具，gcc、gcc-c++、gdbm-devel、readline-devel和openssl-devel：</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">yum install gcc gcc-c++ gdbm-devel readline-devel openssl-devel -y</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">编译安装ruby</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">cd /usr/local/ruby-2.6.5</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">./configure --prefix=/usr/local/ruby --enable-shared</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">make &amp;&amp; make install</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">添加ruby环境变量</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">vi /etc/profile</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">export RUBY_HOME=/usr/local/ruby/</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">export PATH=$RUBY_HOME/bin:$RUBY_HOME/lib:$PATH</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">source /etc/profile</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">检查ruby环境配置是否正确</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># ruby -v</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#redis-dump安装</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#vim ~/.gemrc</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">---</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">:sources:</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">- https://gems.ruby-china.com</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">:ssl_verify_mode: 0</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#yum install ruby rubygems ruby-devel -y</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#gem sources --add https://gems.ruby-china.com/  --remove https://rubygems.org/</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># gem sources -l</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">*** CURRENT SOURCES ***</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">http://gems.ruby-china.com/   #确定只剩这一个</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># curl -L get.rvm.io | bash -s stable</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">                                 Dload  Upload   Total   Spent    Left  Speed</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">100 24535  100 24535    0     0    959      0  0:00:25  0:00:25 --:--:--   644</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Downloading https://github.com/rvm/rvm/archive/1.29.12.tar.gz</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Downloading https://github.com/rvm/rvm/releases/download/1.29.12/1.29.12.tar.gz.asc</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">gpg: Signature made Sat 16 Jan 2021 02:46:22 AM CST using RSA key ID 39499BDB</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">gpg: Good signature from \"Piotr Kuczynski &lt;piotr.kuczynski@gmail.com&gt;\"</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">gpg: WARNING: This key is not certified with a trusted signature!</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">gpg:          There is no indication that the signature belongs to the owner.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Primary key fingerprint: 7D2B AF1C F37B 13E2 069D  6956 105B D0E7 3949 9BDB</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">GPG verified '/usr/local/rvm/archives/rvm-1.29.12.tgz'</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Creating group 'rvm'</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Installing RVM to /usr/local/rvm/</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Installation of RVM in /usr/local/rvm/ is almost complete:</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">  * First you need to add all users that will be using rvm to 'rvm' group,</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">    and logout - login again, anyone using rvm will be operating with `umask u=rwx,g=rwx,o=rx`.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">  * To start using RVM you need to run `source /etc/profile.d/rvm.sh`</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">    in all your open shell windows, in rare cases you need to reopen all shell windows.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">  * Please do NOT forget to add your users to the rvm group.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">     The installer no longer auto-adds root or users to the rvm group. Admins must do this.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">     Also, please note that group memberships are ONLY evaluated at login time.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">     This means that users must log out then back in before group membership takes effect!</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Thanks for installing RVM [0m</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">Please consider donating to our open collective to help us maintain RVM.</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">  Donate: https://opencollective.com/rvm/donate</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">查找配置文件</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># find / -name rvm.sh</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">/etc/profile.d/rvm.sh</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">使配置文件生效</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># source /etc/profile.d/rvm.sh</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># rvm -v</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">rvm 1.29.12 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#source /usr/local/rvm/scripts/rvm</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#gem install redis-dump -V</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># redis-dump -v</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">redis-dump v0.4.0</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># redis-load -v</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">redis-dump v0.4.0</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">导出数据</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">#redis-dump --uri=redis://ip1:port --password='xxxxxx'&gt;/tmp/redis.json</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">备份</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">关闭目标redis</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">清空目标redis</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># rm appendonly.aof</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"># rm dump.rdb</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">开启目标redis</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">还原数据</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">cat /tmp/redis.json | redis-load -n --uri=redis://ip2:port --password='xxxxxxxxx'</p>\n</div>\n</div>"}