{"blogid": "125687332", "writerAge": "码龄4年", "writerBlogNum": "473", "writerCollect": "6881", "writerComment": "11736", "writerFan": "24969", "writerGrade": "7级", "writerIntegral": "23733", "writerName": "不渴望力量的哈士奇", "writerProfileAdress": "writer_image\\profile_125687332.jpg", "writerRankTotal": "307", "writerRankWeekly": "33", "writerThumb": "7931", "writerVisitNum": "1020289", "blog_read_count": "2885", "blog_time": "已于 2022-07-09 09:21:35 修改", "blog_title": "〖Python APP 自动化测试实战篇⑧〗- 实战 - appium 模拟手机滑动操控的操作", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<div align=\"center\">\n<img src=\"https://img-blog.csdnimg.cn/32e9999525144885bd9b2dfd864c0419.gif#pic_center\" width=\"800\"/>\n</div>\n<table><thead><tr><th align=\"center\"><font color=\"red\">万叶集</font></th></tr></thead><tbody><tr><td align=\"center\"><font color=\"red\">🎉 隐约雷鸣，阴霾天空。 🎉</font></td></tr><tr><td align=\"center\"><font color=\"red\">🎉 但盼风雨来，能留你在此。 🎉</font></td></tr></tbody></table>\n<p><a href=\"https://bbs.csdn.net/topics/607171489\"><img src=\"image\\d4cc2726108645c9811fee160b985fe9.png\"/></a></p>\n<hr/>\n<blockquote>\n<p><strong>前言</strong>：<br/> ✌ 作者简介：<a href=\"https://blog.csdn.net/weixin_42250835?type=blog\">渴望力量的哈士奇</a> ✌，大家可以叫我 🐶哈士奇🐶 ，一位致力于 <font color=\"red\">TFS - 全栈</font> 赋能的博主 ✌<br/> 🏆 <font color=\"red\" size=\"3\">CSDN博客专家认证、新星计划第三季全栈赛道 top_1 、华为云享专家、阿里云专家博主 🏆 </font><br/> 📫 如果文章知识点有错误的地方，请指正！和大家一起学习，一起进步👀<br/> 💬 人生格言：优于别人,并不高贵,真正的高贵应该是优于过去的自己。💬<br/> <font color=\"red\" size=\"3\">🔥 如果感觉博主的文章还不错的话，还请👍关注、点赞、收藏三连支持👍一下博主哦</font></p>\n<hr/>\n<table><tbody><tr align=\"center\"><th>专栏系列（点击解锁）</th><th>学习路线指引</th><th>知识定位</th></tr><tr><td align=\"center\" rowspan=\"10\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11631906.html\"> <font color=\"red\" size=\"4.5\">🔥Python全栈白皮书🔥</font> </a> </td><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11631913.html\"> <font color=\"#ff6984\" size=\"3\"> 零基础入门篇 </font> </a> </td><td>以浅显易懂的方式轻松入门，让你彻底爱上Python的魅力。</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11631928.html\"> <font color=\"#ff6984\" size=\"3\"> 语法进阶篇 </font> </a> </td><td>主要围绕多线程编程、正则表达式学习、含贴近实战的项目练习 。 </td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11798104.html\"> <font color=\"#ff6984\" size=\"3\"> 自动化办公篇 </font> </a> </td><td>实现日常办公软件的自动化操作，节省时间、提高办公效率。</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11834532.html\"> <font color=\"#ff6984\" size=\"3\"> 自动化测试实战篇 </font> </a> </td><td>从实战的角度出发，先人一步，快速转型测试开发工程师。</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11840815.html\"> <font color=\"#ff6984\" size=\"3\"> 数据库开发实战篇</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11840958.html\"> <font color=\"#ff6984\" size=\"3\"> 爬虫入门与实战</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11841010.html\"> <font color=\"#ff6984\" size=\"3\">数据分析篇</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11841028.html\"> <font color=\"#ff6984\" size=\"3\">前端入门+flask 全栈篇</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11841035.html\"> <font color=\"#ff6984\" size=\"3\">django+vue全栈篇</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11841157.html\"> <font color=\"#ff6984\" size=\"3\">拓展-人工智能入门</font> </a> </td><td><font color=\"bule\">更新中</font></td></tr><tr><td align=\"center\" rowspan=\"6\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11123904.html\"> <font color=\"red\" size=\"4.5\">网络安全之路</font> </a> </td><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11170008.html\"> <font color=\"#ff6984\" size=\"3\"> 踩坑篇 </font> </a> </td><td>记录学习及演练过程中遇到的坑，便于后来居上者</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11123907.html\"> <font color=\"#ff6984\" size=\"3\"> 网安知识扫盲篇 </font> </a> </td><td>三天打鱼，不深入了解原理，只会让你成为脚本小子。 </td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11366695.html\"> <font color=\"#ff6984\" size=\"3\"> vulhub靶场漏洞复现 </font> </a> </td><td>让漏洞复现变得简单，让安全研究者更加专注于漏洞原理本身。</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11324653.html\"> <font color=\"#ff6984\" size=\"3\"> shell编程篇 </font> </a> </td><td>不涉及linux基础，最终案例会偏向于安全加固方向。 <font color=\"red\">[待完结]</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11134620.html\"> <font color=\"#ff6984\" size=\"3\"> WEB漏洞攻防篇</font> </a> </td><td><font color=\"red\">2021年9月3日停止更新，转战先知社区等安全社区及小密圈</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_10675569.html\"> <font color=\"#ff6984\" size=\"3\"> 渗透工具使用集锦</font> </a> </td><td><font color=\"red\">2021年9月3日停止更新，转战先知社区等安全社区及小密圈</font></td></tr><tr><td align=\"center\" rowspan=\"6\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11366983.html\"> <font color=\"red\" size=\"4.5\">点点点工程师</font> </a> </td><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11563688.html\"> <font color=\"#ff6984\" size=\"3\"> 测试神器 - Charles </font> </a> </td><td>软件测试数据包抓包分析神器</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11393389.html\"> <font color=\"#ff6984\" size=\"3\"> 测试神器 - Fiddler </font> </a> </td><td>一文学会 fiddle ，学不会倒立吃翔，<font color=\"red\">稀得！</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11393395.html\"> <font color=\"#ff6984\" size=\"3\"> 测试神器 - Jmeter </font> </a> </td><td>不仅是性能测试神器，更可用于搭建轻量级接口自动化测试框架。</td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11462996.html\"> <font color=\"#ff6984\" size=\"3\"> RobotFrameWork</font> </a> </td><td><font color=\"blue\">Python实现的自动化测试利器，该篇章仅介绍UI自动化部分。</font></td></tr><tr><td align=\"center\"> <a href=\"https://blog.csdn.net/weixin_42250835/category_11411882.html\"> <font color=\"#ff6984\" size=\"3\"> Java实现UI自动化</font> </a> </td><td><font color=\"blue\">文档写于2016年，Java实现的UI自动化，仍有借鉴意义。</font></td></tr><tr><td align=\"center\"> <a href=\"#\"> <font color=\"#ff6984\" size=\"3\"> MonkeyRunner</font> </a> </td><td><font color=\"blue\">该工具目前的应用场景已不多，文档已删，为了排版好看才留着。</font></td></tr></tbody></table>\n</blockquote>\n<hr/>\n<div align=\"center\">\n<img src=\"https://img-blog.csdnimg.cn/1c11651055dc45f58606951689560969.gif#pic_center\" width=\"1000\"/>\n</div>\n<hr/>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><ul><li><a href=\"#__247\">🐳 滑动操控</a></li><li><ul><li><a href=\"#__275\">🐬 如何获取设备屏幕坐标系</a></li><li><a href=\"#__315\">🐬 模拟实现一个简单的滑动操作</a></li><li><a href=\"#____389\">🐬 将 \"滑动操控\" 改为公共的方法</a></li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<p>其实在前面两个章节的元素定位的场景，我们已经对 app 中的自动化操作已经略知一二。这里我们发现， 实际上 appium 复用了 selenium 的很多很多的操作方式，所以像一些 “点击、输入” 等操作，这种常规的操作的方式与在 WEB 自动化中的方式基本上是完全一致的，就不再进行赘述了。</p>\n<p>唯一一个与 WEB 端不太一样的地方就是关于 “滑动操控” ，所以 “页面的滑动” 在实际操作手机过程中，也是最常使用的，只需要操控一个点在屏幕中拖动到另外一个点就可以了。这个 “滑” 的过程就是一个滑动的动作。</p>\n<p>在 “appium” 中，对于 “滑动” 的操作也做了一些简单的封装，为其提供了方法，这就是 “swipe” 。</p>\n<h2><a id=\"__247\"></a>🐳 滑动操控</h2>\n<p>OK，接下来我们就看一些，<code>滑动操控</code> 的脚本究竟要怎么写。</p>\n<p>在模拟 “滑动操控” 的时候，使用的方法就是 <code>swipe()</code> ，该方法的参数说明如下：</p>\n<blockquote>\n<ul><li>start_x：起始横坐标</li><li>start_y：起始纵坐标</li><li>end_x：结束时横坐标</li><li>end_y：结束时纵坐标</li><li>duration：滑动持续时间，单位毫秒，默认None（一般设置500-1000毫秒比较合适）</li></ul>\n<p><code>ps：如果不设置 \"duration\" ，即为 0秒 ，无法看到滑动效果。</code></p>\n<hr/>\n<p><code>duration</code> 参数需要注意的是：在移动设备上滑动时间的快慢所形成的效果是不一样的。以今日头条APP首页上滑为例，同样的滑动距离，滑动较快则出现类似翻页的效果，而滑动较慢则是同一则新闻从起始位置滑动到结束位置。</p>\n<p><code>手机屏幕的坐标</code>：以手机屏幕<code>最左上角的坐标点为坐标中心(0, 0)</code>，向右话滑动则纵坐标不变，横坐标变大；向下滑动则横坐标不变，纵坐标变大。</p>\n<hr/>\n</blockquote>\n<h3><a id=\"__275\"></a>🐬 如何获取设备屏幕坐标系</h3>\n<p>在实际工作场景中，不同测试机的屏幕尺寸存在着很大的差异性。所以正常情况下，我们不会选择使用固定的的坐标来滑动屏幕。</p>\n<p>一般操作是，先获取测试机屏幕尺寸，再通过获取的手机屏幕尺寸来确定滑动的起始、结束坐标；这样，即使在我们更换了测试手机后也不需要重新更改坐标。使用webdriver提供的get_window_size()方法可以获取屏幕尺寸（即屏幕右下角的坐标），方法如下：</p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 获取屏幕宽度</span>\nwidth <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 获取屏幕高度</span>\nheight <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'heigth'</span><span class=\"token punctuation\">]</span>\n</code></pre>\n<p><code>滑动屏幕操作代码如下：</code>()</p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># 屏幕从下向上滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 屏幕从上向下滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 屏幕从左向右滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 屏幕从右向左滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<h3><a id=\"__315\"></a>🐬 模拟实现一个简单的滑动操作</h3>\n<p>代码示例如下：</p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># coding=utf-8</span>\n\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n<span class=\"token keyword\">from</span> appium <span class=\"token keyword\">import</span> webdriver    <span class=\"token comment\"># appium 的特色就是将安卓、IOS的底层封装成了 webdriver 类型的语句</span>\n<span class=\"token keyword\">from</span> appium<span class=\"token punctuation\">.</span>webdriver<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>appiumby <span class=\"token keyword\">import</span> By\n\n\n<span class=\"token comment\"># 启动参数</span>\ndesired_caps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>       <span class=\"token comment\"># 定义 desired_caps 变量，用以赋值很多的启动信息</span>\ndesired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'platformName'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Android'</span>    <span class=\"token comment\"># 设备名称、系统为 \"Android\"</span>\ndesired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'platformVersion'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'7.1.2'</span>   <span class=\"token comment\"># 这里是在夜神模拟器的设置中心查看安卓版本是 \"7.1.2\" ，后续会告诉大家如何切换版本</span>\ndesired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'deviceName'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'127.0.0.1:62001'</span>     <span class=\"token comment\"># 这里如果是真机的话填写的是设备名称；因为我们用的是模拟器，填写的是IP端口号</span>\n<span class=\"token comment\"># desired_caps['appPackage'] = 'com.baidu.searchbox'     # APP 的包名；这里我们使用的是通讯录</span>\n<span class=\"token comment\"># desired_caps['appActivity'] = 'com.baidu.searchbox.SplashActivity'    # 启动的界面的名字（也或者叫启动名,默认是 \".\" 开头的）</span>\n<span class=\"token comment\"># desired_caps['automationName']='UiAutomator1'</span>\n\n<span class=\"token comment\"># 声明手机驱动</span>\ndriver <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Remote<span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:4723/wd/hub'</span><span class=\"token punctuation\">,</span> desired_caps<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 注册到这个节点上，传入 \"desired_caps\"。这个节点就是 \"appium\" 开启的端口节点</span>\n\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 获取屏幕宽度</span>\nwidth <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 获取屏幕高度</span>\nheight <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从下向上滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从上向下滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从左向右滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从右向左滑动</span>\ndriver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>width<span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\nsleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\ndriver<span class=\"token punctuation\">.</span>terminate_app<span class=\"token punctuation\">(</span><span class=\"token string\">'com.baidu.searchbox'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># driver.quit()</span>\n</code></pre>\n<p>运行结果如下：</p>\n<hr/>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/28083c2515b04015abf33748febfbc8d.gif#pic_center\"/></p>\n<hr/>\n<h3><a id=\"____389\"></a>🐬 将 “滑动操控” 改为公共的方法</h3>\n<p>上文中的脚本虽然也能够实现我们针对 App 的 “滑动操控” 的操作，但是代码的整洁度上来看不是那么的美观。既然如此，我们是否能够将其封装起来，变成一个公共的方法，当然是可以的了，继续往下看。</p>\n<p>代码示例如下：</p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># coding=utf-8</span>\n\n\n<span class=\"token keyword\">from</span> time <span class=\"token keyword\">import</span> sleep\n<span class=\"token keyword\">from</span> appium <span class=\"token keyword\">import</span> webdriver    <span class=\"token comment\"># appium 的特色就是将安卓、IOS的底层封装成了 webdriver 类型的语句</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">getSize</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"获取页面大小\"\"\"</span>\n    x <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'width'</span><span class=\"token punctuation\">]</span>\n    y <span class=\"token operator\">=</span> driver<span class=\"token punctuation\">.</span>get_window_size<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'height'</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">swipeRight</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"向右滑动 - [x轴变动，y轴不变]\"\"\"</span>\n    l <span class=\"token operator\">=</span> getSize<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    x1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span>\n    x2 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span>\n    y <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    driver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x2<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">swipeLeft</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"向左滑动 - [x轴变动，y轴不变]\"\"\"</span>\n    l <span class=\"token operator\">=</span> getSize<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    x1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span>\n    x2 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n    y <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    driver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>x2<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> x1<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">swipeDown</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"向下滑动 - [x轴不变，y轴变动]\"\"\"</span>\n    l <span class=\"token operator\">=</span> getSize<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    y1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span>\n    y2 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span>\n    x <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    driver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">swipeUp</span><span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"向上滑动 - [x轴不变，y轴变动]\"\"\"</span>\n    l <span class=\"token operator\">=</span> getSize<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    y1 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.8</span><span class=\"token punctuation\">)</span>\n    y2 <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.2</span><span class=\"token punctuation\">)</span>\n    x <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>l<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span>\n    driver<span class=\"token punctuation\">.</span>swipe<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y2<span class=\"token punctuation\">,</span> x<span class=\"token punctuation\">,</span> y1<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span>\n\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">swipeDemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># 启动参数</span>\n    desired_caps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">}</span>       <span class=\"token comment\"># 定义 desired_caps 变量，用以赋值很多的启动信息</span>\n    desired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'platformName'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Android'</span>    <span class=\"token comment\"># 设备名称、系统为 \"Android\"</span>\n    desired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'platformVersion'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'7.1.2'</span>   <span class=\"token comment\"># 这里是在夜神模拟器的设置中心查看安卓版本是 \"7.1.2\" ，后续会告诉大家如何切换版本</span>\n    desired_caps<span class=\"token punctuation\">[</span><span class=\"token string\">'deviceName'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'127.0.0.1:62001'</span>     <span class=\"token comment\"># 这里如果是真机的话填写的是设备名称；因为我们用的是模拟器，填写的是IP端口号</span>\n    <span class=\"token comment\"># desired_caps['appPackage'] = 'com.baidu.searchbox'     # APP 的包名；这里我们使用的是通讯录</span>\n    <span class=\"token comment\"># desired_caps['appActivity'] = 'com.baidu.searchbox.SplashActivity'    # 启动的界面的名字（也或者叫启动名,默认是 \".\" 开头的）</span>\n    <span class=\"token comment\"># desired_caps['automationName']='UiAutomator1'</span>\n\n    <span class=\"token comment\"># 声明手机驱动</span>\n    driver <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Remote<span class=\"token punctuation\">(</span><span class=\"token string\">'http://localhost:4723/wd/hub'</span><span class=\"token punctuation\">,</span> desired_caps<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 注册到这个节点上，传入 \"desired_caps\"。这个节点就是 \"appium\" 开启的端口节点</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n\n    <span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从下向上滑动</span>\n    swipeDown<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n\n    <span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从上向下滑动</span>\n    swipeUp<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n\n    <span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从左向右滑动</span>\n    swipeLeft<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n\n    <span class=\"token comment\"># 利用 \"swipe\" 实现滑动, 屏幕从右向左滑动</span>\n    swipeRight<span class=\"token punctuation\">(</span>driver<span class=\"token punctuation\">)</span>\n    sleep<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\n\n    driver<span class=\"token punctuation\">.</span>terminate_app<span class=\"token punctuation\">(</span><span class=\"token string\">'com.baidu.searchbox'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># driver.quit()</span>\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span>\n    swipeDemo<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p>运行结果如下：</p>\n<hr/>\n<p><img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/28083c2515b04015abf33748febfbc8d.gif#pic_center\"/></p>\n<hr/>\n<p>其实滑动在实际操作中应用的场景还是不少的，就比如要定位的元素在页面下方必须要通过滑动才能往下滑将其展示出来；再比如解锁密码、或者滑动九宫格之类的场景… 类似的滑动场景，大家可以在真实的场景中逐步的去体验。</p>\n<p>到此，一个很简单的基于 “百度App” 实现的 demo 就到此结束了。但是该 demo 仅仅是基于实现，没有像之前的 WEB 框架那样去同意做处理、去进行 PO 模式的编写。</p>\n<p>所以接下来的下一章节，就是将我们现有的一个 “baiduTest” 的代码想之前的 WEB 框架那样融合起来，做成一个 PO 那样，从而更好的完成 App 的自动化。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}