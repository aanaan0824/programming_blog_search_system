{"blogid": "122867295", "writerAge": "码龄6年", "writerBlogNum": "14", "writerCollect": "107", "writerComment": "19", "writerFan": "9", "writerGrade": "2级", "writerIntegral": "218", "writerName": "被压制在人间的恶魔", "writerProfileAdress": "writer_image\\profile_122867295.jpg", "writerRankTotal": "158633", "writerRankWeekly": "962906", "writerThumb": "36", "writerVisitNum": "29998", "blog_read_count": "11299", "blog_time": "已于 2022-07-14 15:09:09 修改", "blog_title": "MySQL8.0安装教程，在Linux环境安装MySQL8.0教程，最新教程 超详细", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>在Linux系统安装MySQL8.0，网上已经有很多的教程了，到自己安装的时候却发现各种各样的问题，现在把安装过程和遇到的问题都记录下来</strong>。</p>\n<p>需要说明的一点是我使用的是SSH secure shell Client连接linux系统的，它的用法和命令窗口差不多。界面如图：一样的使用Linux命令操作。<br/> <img alt=\"SSH\" src=\"image\\6cadb2ad0ce049f69223d92d6a4d2993.png\"/><br/> 话不多说<br/> 第一步：<br/> 1）、切换到 /use/local下</p>\n<pre><code class=\"prism language-powershell\">cd <span class=\"token operator\">/</span>use/loca\n</code></pre>\n<p>2）、创建mysql文件夹</p>\n<pre><code class=\"prism language-powershell\">mkdir mysql\n</code></pre>\n<p>3）、切换到mysql文件夹下</p>\n<pre><code class=\"prism language-powershell\">cd mysql\n</code></pre>\n<p>4）、下载mysql8.0安装包</p>\n<pre><code class=\"prism language-powershell\"> wget https:<span class=\"token operator\">/</span><span class=\"token operator\">/</span>dev<span class=\"token punctuation\">.</span>mysql<span class=\"token punctuation\">.</span>com/get/Downloads/MySQL-8<span class=\"token punctuation\">.</span>0/mysql-8<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>20-linux-glibc2<span class=\"token punctuation\">.</span>12-x86_64<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>xz\n</code></pre>\n<p>如果执行没反应，可以复制安装包链接在Windows的浏览器下载好，再用<strong>SSH</strong>移到 /use/local/mysql文件夹下面（这个时候就提现出了SSH的便利性）</p>\n<p>5）、解压mysql8.0安装包</p>\n<pre><code class=\"prism language-powershell\">切换到 <span class=\"token operator\">/</span>use/local/mysql文件夹下面，执行命令\ntar xvJf mysql-8<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>20-linux-glibc2<span class=\"token punctuation\">.</span>12-x86_64<span class=\"token punctuation\">.</span>tar<span class=\"token punctuation\">.</span>xz \n</code></pre>\n<p>6）、重命名解压出来的文件夹，这里改成mysql-8.0</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token function\">mv</span> mysql-8<span class=\"token punctuation\">.</span>0<span class=\"token punctuation\">.</span>20-linux-glibc2<span class=\"token punctuation\">.</span>12-x86_64 mysql-8<span class=\"token punctuation\">.</span>0\n</code></pre>\n<p>7）、/use/local/mysql文件夹下创建data文件夹 存储文件</p>\n<pre><code class=\"prism language-powershell\">mkdir <span class=\"token keyword\">data</span>\n</code></pre>\n<p>8）、<br/> 分别创建用户组以及用户和密码（如果提示已存在说明之前有创建过了）</p>\n<pre><code class=\"prism language-powershell\">groupadd mysql\n</code></pre>\n<pre><code class=\"prism language-powershell\">useradd <span class=\"token operator\">-</span>g mysql mysql\n</code></pre>\n<p>9）、授权刚刚新建的用户</p>\n<pre><code class=\"prism language-powershell\">chown <span class=\"token operator\">-</span>R mysql<span class=\"token punctuation\">.</span>mysql <span class=\"token operator\">/</span>usr/local/mysql/mysql-8<span class=\"token punctuation\">.</span>0\n</code></pre>\n<pre><code class=\"prism language-powershell\">chmod 750 <span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span> <span class=\"token operator\">-</span>R\n</code></pre>\n<p>10）、配置环境，编辑/etc/profile文件<br/> vim /etc/profile</p>\n<p>在最后一行加<br/> export PATH=$PATH:/usr/local/mysql/mysql-8.0/bin:/usr/local/mysql/mysql-8.0/lib<br/> （新手提示：添加完之后，换行，打出“：sq”，用来保存文件并退出）<br/> 11）、编辑my.cnf文件</p>\n<pre><code class=\"prism language-powershell\">vi <span class=\"token operator\">/</span>etc/my<span class=\"token punctuation\">.</span>cnf\n</code></pre>\n<p>按下面复制进去就好了，#号开头的不用管，一样，添加完之后，换行，打出“：sq”，用来保存文件并退出</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token namespace\">[mysql]</span>\ndefault-character-<span class=\"token function\">set</span>=utf8mb4\n<span class=\"token namespace\">[client]</span>\n<span class=\"token comment\">#port=3306</span>\nsocket=<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/mysql/mysql<span class=\"token punctuation\">.</span>sock\n\n<span class=\"token namespace\">[mysqld]</span>\n<span class=\"token comment\">#port=3306</span>\n<span class=\"token comment\">#server-id=3306</span>\nuser=mysql\ngeneral_log = 1\ngeneral_log_file= <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>log/mysql/mysql<span class=\"token punctuation\">.</span>log\nsocket=<span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/mysql/mysql<span class=\"token punctuation\">.</span>sock\nbasedir=<span class=\"token operator\">/</span>usr/local/mysql/mysql-8<span class=\"token punctuation\">.</span>0\ndatadir=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span>\nlog-bin=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span><span class=\"token operator\">/</span>mysql-bin\ninnodb_data_home_dir=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span>\ninnodb_log_group_home_dir=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span><span class=\"token operator\">/</span>\ncharacter-<span class=\"token function\">set-server</span>=utf8mb4\nlower_case_table_names=1\nautocommit=1\ndefault_authentication_plugin=mysql_native_password\nsymbolic-links=0\n<span class=\"token comment\"># Disabling symbolic-links is recommended to prevent assorted security risks</span>\n<span class=\"token comment\"># Settings user and group are ignored when systemd is used.</span>\n<span class=\"token comment\"># If you need to run mysqld under a different user or group,</span>\n<span class=\"token comment\"># customize your systemd unit file for mariadb according to the</span>\n<span class=\"token comment\"># instructions in http://fedoraproject.org/wiki/Systemd</span>\n\n<span class=\"token namespace\">[mysqld_safe]</span>\nlog-error=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span><span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">.</span>log\npid-file=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span><span class=\"token operator\">/</span>mysql<span class=\"token punctuation\">.</span>pid\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># include all files from the config directory</span>\n</code></pre>\n<p>12）、切换到/usr/local/mysql/mysql-8.0/bin目录下</p>\n<pre><code class=\"prism language-powershell\">cd bin\n</code></pre>\n<p>13)、初始化基础信息,得到数据库的初始密码（在/usr/local/mysql/mysql-8.0/bin目录下执行）</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>mysqld <span class=\"token operator\">--</span>user=mysql <span class=\"token operator\">--</span>basedir=<span class=\"token operator\">/</span>usr/local/mysql/mysql-8<span class=\"token punctuation\">.</span>0 <span class=\"token operator\">--</span>datadir=<span class=\"token operator\">/</span>usr/local/mysql/<span class=\"token keyword\">data</span><span class=\"token operator\">/</span> <span class=\"token operator\">--</span>initialize\n</code></pre>\n<p>如图，复制出红框的初始密码，保存到本地，后面需要使用到。<br/> <img alt=\"\" src=\"image\\5bbbfd1b9a6c49f3bd2c3624e3c3d781.png\"/>ISSUE：如果因为路径等各种问题需要重新初始化的，需要清空上面创建的data文件，在data所在的目录下使用 rm -rf data 命令。</p>\n<p>14）、复制 mysql.server 文件，在/usr/local/mysql/mysql-8.0目录下执行</p>\n<pre><code class=\"prism language-powershell\"><span class=\"token function\">cp</span> <span class=\"token operator\">-</span>a <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>support-files/mysql<span class=\"token punctuation\">.</span>server <span class=\"token operator\">/</span>etc/init<span class=\"token punctuation\">.</span>d/mysql \n</code></pre>\n<pre><code class=\"prism language-powershell\"><span class=\"token function\">cp</span> <span class=\"token operator\">-</span>a <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>support-files/mysql<span class=\"token punctuation\">.</span>server <span class=\"token operator\">/</span>etc/init<span class=\"token punctuation\">.</span>d/mysqld\n</code></pre>\n<p>15）、赋予权限</p>\n<pre><code class=\"prism language-powershell\">chown 777 <span class=\"token operator\">/</span>etc/my<span class=\"token punctuation\">.</span>cnf\nchmod <span class=\"token operator\">+</span>x <span class=\"token operator\">/</span>etc/init<span class=\"token punctuation\">.</span>d/mysql\nchmod <span class=\"token operator\">+</span>x <span class=\"token operator\">/</span>etc/init<span class=\"token punctuation\">.</span>d/mysqld\n</code></pre>\n<p>16)、检查一下/var/lib/mysql是否存在，否则进行创建</p>\n<pre><code class=\"prism language-powershell\">mkdir <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/mysql \n</code></pre>\n<p>然后再赋予权限</p>\n<pre><code class=\"prism language-powershell\">chown <span class=\"token operator\">-</span>R mysql:mysql <span class=\"token operator\">/</span><span class=\"token keyword\">var</span><span class=\"token operator\">/</span>lib/mysql/ \n</code></pre>\n<p>17)、启动数据库，有SUCCESS字眼说明MySQL安装完成</p>\n<pre><code class=\"prism language-powershell\">service mysql <span class=\"token function\">start</span> \n</code></pre>\n<p>ps:<br/> 如果发现启动失败，可以先查看data里面的mysql.log，如果有提示3306这样的字样，第一个想到的应该是端口被占用，<br/> 使用lsof -i:端口号，查看是哪个PID（进程号）占用了该端口，然后使用kill PID（进程号）杀掉进程，重新执行service mysql start</p>\n<p><strong>第二步：修改密码，并设置远程连接（为了可以在别的机器下面连接该mysql）</strong></p>\n<p>1）、修改数据库root账号的密码，并设置可以远程访问（因为root默认是不能远程访问的）</p>\n<pre><code class=\"prism language-powershell\">ALTER USER <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class=\"token string\">'新密码'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>2)、执行flush privileges; 使密码生效</p>\n<pre><code class=\"prism language-powershell\">flush privileges<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>3）、选择数据库</p>\n<pre><code class=\"prism language-powershell\"> use mysql<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>4)再修改远程连接并生效</p>\n<pre><code class=\"prism language-powershell\">update user <span class=\"token function\">set</span> host=<span class=\"token string\">'%'</span> where user=<span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>5)执行提交命令，搞定！</p>\n<pre><code class=\"prism language-powershell\">flush privileges<span class=\"token punctuation\">;</span>\n</code></pre>\n<p>最后就可以使用root账号去登录mysql了。如果有遇到问题的小伙伴评论留言，文中如有遗漏错误，欢迎指正。</p>\n<p><strong>题外：<br/> 给mysql创建新的数据库用户并授予权限</strong></p>\n<pre><code class=\"prism language-php\"><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>创建用户<span class=\"token punctuation\">(</span>名称随意，这里的用户名称为mysql<span class=\"token punctuation\">)</span>并可以远程访问\n<span class=\"token constant\">CREATE</span> user <span class=\"token string single-quoted-string\">'mysql'</span>@<span class=\"token string single-quoted-string\">'%'</span><span class=\"token punctuation\">;</span> \n<span class=\"token comment\">#修改密码</span>\nalter user <span class=\"token string single-quoted-string\">'mysql'</span>@<span class=\"token string single-quoted-string\">'%'</span> identified with mysql_native_password by <span class=\"token string single-quoted-string\">'tcl.2021'</span><span class=\"token punctuation\">;</span> \n\n<span class=\"token number\">2</span><span class=\"token punctuation\">)</span>创建新的数据库\n<span class=\"token comment\">#create database 数据库名 default character set utf8mb4 collate utf8mb4_unicode_ci;</span>\n\n\n<span class=\"token number\">3</span><span class=\"token punctuation\">)</span>把新的数据库授权给新用户\n<span class=\"token comment\">#将test库的所有权限赋予mysql用户</span>\ngrant all privileges on test<span class=\"token operator\">.</span><span class=\"token operator\">*</span> to <span class=\"token string double-quoted-string\">\"mysql\"</span>@<span class=\"token string double-quoted-string\">\"%\"</span><span class=\"token punctuation\">;</span>\ngrant all privileges on test<span class=\"token operator\">.</span><span class=\"token operator\">*</span> to <span class=\"token string double-quoted-string\">\"tcl\"</span>@<span class=\"token string double-quoted-string\">\"%\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token number\">4</span>）、刷新权限\nflush privileges<span class=\"token punctuation\">;</span> \n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}