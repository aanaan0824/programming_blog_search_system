{"blogid": "126712232", "writerAge": "ç é¾„7å¹´", "writerBlogNum": "230", "writerCollect": "14816", "writerComment": "509", "writerFan": "3757", "writerGrade": "7çº§", "writerIntegral": "11548", "writerName": "DanCheng-studio", "writerProfileAdress": "writer_image\\profile_126712232.jpg", "writerRankTotal": "938", "writerRankWeekly": "684", "writerThumb": "1841", "writerVisitNum": "1213932", "blog_read_count": "542", "blog_time": "äºÂ 2022-09-05 19:50:09Â å‘å¸ƒ", "blog_title": "ã€æ¯•ä¸šè®¾è®¡ã€‘åŸºäºå¤§æ•°æ®çš„é«˜è€ƒæ•°æ®åˆ†æ - python å¤§æ•°æ® å¯è§†åŒ–", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"1__0\"></a>1 å‰è¨€</h1>\n<p>ğŸš© <strong>åŸºäºå¤§æ•°æ®çš„é«˜è€ƒæ•°æ®åˆ†æ</strong></p>\n<p>ğŸ¥‡å­¦é•¿è¿™é‡Œç»™ä¸€ä¸ªé¢˜ç›®ç»¼åˆè¯„åˆ†(æ¯é¡¹æ»¡åˆ†5åˆ†)</p>\n<ul><li>éš¾åº¦ç³»æ•°ï¼š3åˆ†</li><li>å·¥ä½œé‡ï¼š3åˆ†</li><li>åˆ›æ–°ç‚¹ï¼š3åˆ†</li></ul>\n<p>ğŸ§¿ <strong>é€‰é¢˜æŒ‡å¯¼, é¡¹ç›®åˆ†äº«ï¼š</strong></p>\n<p><a href=\"https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md\">https://gitee.com/dancheng-senior/project-sharing-1/blob/master/%E6%AF%95%E8%AE%BE%E6%8C%87%E5%AF%BC/README.md</a></p>\n<h1><a id=\"1__14\"></a>1 è¯¾é¢˜èƒŒæ™¯</h1>\n<p>æœ¬æœŸæˆ‘ä»¬é€šè¿‡åˆ†æ2017-2019å¹´å±±ä¸œçœé«˜è€ƒè€ƒç”Ÿè€ƒè¯•æˆç»©åˆ†å¸ƒæ•°æ®ä»¥åŠåŒä¸€æµå¤§å­¦(985/211)å½•å–å±±ä¸œçœè€ƒç”Ÿæ•°æ®ï¼Œé€šè¿‡æ•°æ®å¯è§†åŒ–åˆ†æå±±ä¸œçœè€ƒç”Ÿé«˜è€ƒæˆç»©ä¸»è¦é›†ä¸­åœ¨å“ªäº›åŒºé—´ã€æœ¬ç§‘ä¸Šçº¿ç‡æœ‰å¤šå°‘ã€åŒä¸€æµå¤§å­¦å½•å–æœ€ä½åˆ†å„æ˜¯å¤šå°‘ã€è€ƒç”ŸæŠ¥è€ƒæ¯”è¾ƒå¤šçš„ä¸“ä¸šæœ‰å“ªäº›ã€‚</p>\n<h1><a id=\"2__19\"></a>2 å…·ä½“å®ç°</h1>\n<p><strong>æ‰€æœ‰è€ƒç”ŸåŠå„å­¦ç§‘æ€»åˆ†åˆ†å¸ƒå›¾</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\">#éƒ¨åˆ†ä»£ç </span>\ncolors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"#00BCD4\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"#ea1d5d\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#ffb900\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"#4FC3F7\"</span><span class=\"token punctuation\">]</span>\nL1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Line<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'åˆ†æ•°æ®µ'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"æ‰€æœ‰è€ƒç”Ÿæœ¬æ®µäººæ•°\"</span><span class=\"token punctuation\">,</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'æ‰€æœ‰è€ƒç”Ÿæœ¬æ®µäººæ•°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>symbol_size<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_series_opts<span class=\"token punctuation\">(</span>\n        areastyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AreaStyleOpts<span class=\"token punctuation\">(</span>opacity<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        markarea_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>MarkAreaOpts<span class=\"token punctuation\">(</span>\n            data<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>\n                opts<span class=\"token punctuation\">.</span>MarkAreaItem<span class=\"token punctuation\">(</span>\n                    name<span class=\"token operator\">=</span><span class=\"token string\">\"æœ¬ç§‘çº¿\"</span><span class=\"token punctuation\">,</span> x<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">435</span><span class=\"token punctuation\">,</span> <span class=\"token number\">437</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>y<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    itemstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>ItemStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\2ccbdf956fd646faba6176de3b2ddee8.png\"/><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\e1e6d596c1914b2b8ded4f0e8e64732e.png\"/><br/> <strong>æœ¬ç§‘ä¸Šçº¿äººæ•°å æ¯”</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\"># æŒ‡å®šæŸ±å­é¢œè‰²çš„jsä»£ç </span>\ncolor_function <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">\"\"\"\n        function (params) {\n            if (params.value == 51.22) \n                return '#0097A7';\n            else return '#E91E63';\n        }\n        \"\"\"</span>\n\ncols <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'æ‰€æœ‰è€ƒç”Ÿ'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒç‰©ç†'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒåŒ–å­¦'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒç”Ÿç‰©'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒå†å²'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒåœ°ç†'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'é€‰è€ƒæ”¿æ²»'</span><span class=\"token punctuation\">]</span>\nrate_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> cols<span class=\"token punctuation\">:</span>\n    rate_data<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df<span class=\"token punctuation\">[</span><span class=\"token string\">'åˆ†æ•°æ®µ'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">&gt;</span><span class=\"token number\">435</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token string\">'ç´¯è®¡äººæ•°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">/</span>df<span class=\"token punctuation\">[</span>i<span class=\"token operator\">+</span><span class=\"token string\">'ç´¯è®¡äººæ•°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ndf_rate_data <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>rate_data<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>columns<span class=\"token operator\">=</span>cols<span class=\"token punctuation\">)</span>\ndf_rate_data <span class=\"token operator\">=</span> df_rate_data<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\nb1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n     Bar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>df_rate_data<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span> df_rate_data<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> category_gap<span class=\"token operator\">=</span><span class=\"token string\">'40%'</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">.</span>set_series_opts<span class=\"token punctuation\">(</span>\n         label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>\n            position<span class=\"token operator\">=</span><span class=\"token string\">'insideRight'</span><span class=\"token punctuation\">,</span>\n            vertical_align<span class=\"token operator\">=</span><span class=\"token string\">'middle'</span><span class=\"token punctuation\">,</span>\n            font_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n            font_weight<span class=\"token operator\">=</span><span class=\"token string\">'bold'</span><span class=\"token punctuation\">,</span>                                                \n            formatter<span class=\"token operator\">=</span><span class=\"token string\">'{c} %'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            itemstyle_opts<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>\n                <span class=\"token string\">'opacity'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'shadowBlur'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'shadowOffsetX'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'shadowOffsetY'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'shadowColor'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'rgba(125,0, 255, 0.5)'</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'barBorderRadius'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                <span class=\"token string\">'color'</span><span class=\"token punctuation\">:</span>JsCode<span class=\"token punctuation\">(</span>color_function<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>\n           xaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n               position<span class=\"token operator\">=</span><span class=\"token string\">'top'</span><span class=\"token punctuation\">,</span> \n                axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                     is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            yaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n                axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                    is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n                    linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>          \n\n          title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"æœ¬ç§‘ä¸Šçº¿äººæ•°å æ¯”\"</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">\"3%\"</span><span class=\"token punctuation\">,</span> pos_right<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n                                 title_textstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TextStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>         \n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span>reversal_axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">)</span>\ngrid1 <span class=\"token operator\">=</span> Grid<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'1000px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'600px'</span><span class=\"token punctuation\">,</span>bg_color<span class=\"token operator\">=</span><span class=\"token string\">'#0d0735'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ngrid1<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>b1<span class=\"token punctuation\">,</span> is_control_axis_index<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span> grid_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>GridOpts<span class=\"token punctuation\">(</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">'15%'</span><span class=\"token punctuation\">,</span> pos_right<span class=\"token operator\">=</span><span class=\"token string\">'15%'</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">'17%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ngrid1<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\5ee079a5515347f5a3b575bc32f317e6.png\"/><br/> <strong>å„å­¦ç”Ÿè€ƒç”Ÿæ¯”ä¾‹</strong></p>\n<pre><code class=\"prism language-python\">color_series <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'#C9DA36'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'#37B44E'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'#1E91CA'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'#6A368B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'#D5225B'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'#CF7B25'</span><span class=\"token punctuation\">]</span>\ndf1<span class=\"token operator\">=</span>df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>i<span class=\"token operator\">%</span><span class=\"token number\">2</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token keyword\">and</span> i<span class=\"token operator\">!=</span><span class=\"token number\">0</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>df<span class=\"token punctuation\">.</span>columns<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nsubj_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">/</span>df1<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">*</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> df1<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\nsubj_name <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ç‰©ç†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åŒ–å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ç”Ÿç‰©'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å†å²'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åœ°ç†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ”¿æ²»'</span><span class=\"token punctuation\">]</span>\ndf_subj <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>subj_data<span class=\"token punctuation\">,</span>index<span class=\"token operator\">=</span>subj_name<span class=\"token punctuation\">,</span>columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'æ¯”ä¾‹'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\ndf_subj<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token string\">'æ¯”ä¾‹'</span><span class=\"token punctuation\">,</span>ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>inplace<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\nP <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Pie<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'1000px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'600px'</span><span class=\"token punctuation\">,</span>bg_color<span class=\"token operator\">=</span><span class=\"token string\">'#0d0735'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">[</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>z<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> z <span class=\"token keyword\">in</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>df_subj<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">,</span> df_subj<span class=\"token punctuation\">[</span><span class=\"token string\">'æ¯”ä¾‹'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        radius<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"25%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"70%\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        center<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"50%\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"50%\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        rosetype<span class=\"token operator\">=</span><span class=\"token string\">\"radius\"</span><span class=\"token punctuation\">,</span>\n        label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_colors<span class=\"token punctuation\">(</span>color_series<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_series_opts<span class=\"token punctuation\">(</span>label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>formatter<span class=\"token operator\">=</span><span class=\"token string\">\"{b}: {c}%\"</span><span class=\"token punctuation\">,</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>\n        title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">\"å„å­¦ç§‘\\nè€ƒç”Ÿæ¯”ä¾‹\"</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">\"45%\"</span><span class=\"token punctuation\">,</span> pos_right<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span>\n                                 title_textstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TextStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">28</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>   \n        legend_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LegendOpts<span class=\"token punctuation\">(</span>is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\nP<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\89fd9e2b07824c0c81b3fd3eb80fbe41.png\"/><br/> <strong>985/211å¤§å­¦(ç†å·¥ç±»)å½•å–æœ€ä½åˆ†æ•°</strong></p>\n<pre><code class=\"prism language-python\"><span class=\"token comment\">#åŒä¸€æµé«˜æ ¡çš„åå•</span>\ndouble_first_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'åŒ—äº¬å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å›½äººæ°‘å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ¸…åå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åŒ—äº¬èˆªç©ºèˆªå¤©å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åŒ—äº¬ç†å·¥å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å›½å†œä¸šå¤§å­¦'</span><span class=\"token punctuation\">,</span>\n                     <span class=\"token string\">'åŒ—äº¬å¸ˆèŒƒå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å¤®æ°‘æ—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å—å¼€å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¤©æ´¥å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¤§è¿ç†å·¥å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å‰æ—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å“ˆå°”æ»¨å·¥ä¸šå¤§å­¦'</span><span class=\"token punctuation\">,</span>\n                     <span class=\"token string\">'å¤æ—¦å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åŒæµå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸Šæµ·äº¤é€šå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åä¸œå¸ˆèŒƒå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å—äº¬å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸œå—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æµ™æ±Ÿå¤§å­¦'</span><span class=\"token punctuation\">,</span>\n                     <span class=\"token string\">'ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¦é—¨å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å±±ä¸œå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å›½æµ·æ´‹å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ­¦æ±‰å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åä¸­ç§‘æŠ€å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å—å¤§å­¦'</span>\n                     <span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸­å±±å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'åå—ç†å·¥å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å››å·å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'é‡åº†å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ç”µå­ç§‘æŠ€å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'è¥¿å®‰äº¤é€šå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'è¥¿åŒ—å·¥ä¸šå¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å…°å·å¤§å­¦'</span>\n                     <span class=\"token punctuation\">,</span><span class=\"token string\">'å›½é˜²ç§‘æŠ€å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'ä¸œåŒ—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'éƒ‘å·å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ¹–å—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'äº‘å—å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'è¥¿åŒ—å†œæ—ç§‘æŠ€å¤§å­¦'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æ–°ç–†å¤§å­¦'</span><span class=\"token punctuation\">]</span>\n\ndata_dir <span class=\"token operator\">=</span> <span class=\"token string\">'/home/mw/input/2206085359/'</span>\nall_files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> dirpath<span class=\"token punctuation\">,</span> dirnames<span class=\"token punctuation\">,</span> files <span class=\"token keyword\">in</span> os<span class=\"token punctuation\">.</span>walk<span class=\"token punctuation\">(</span>data_dir<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    all_files <span class=\"token operator\">+=</span> files\nall_files <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">file</span> <span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> all_files <span class=\"token keyword\">if</span> <span class=\"token string\">'2020'</span> <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token comment\">#å†å¹´çš„æ•°æ®</span>\ndf_merge_year <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span> <span class=\"token builtin\">file</span> <span class=\"token keyword\">in</span> all_files<span class=\"token punctuation\">:</span>\n    df_tmp <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>read_excel<span class=\"token punctuation\">(</span>os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>data_dir<span class=\"token punctuation\">,</span> <span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>header<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n    df_tmp <span class=\"token operator\">=</span> df_tmp<span class=\"token punctuation\">[</span>df_tmp<span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>isin<span class=\"token punctuation\">(</span>double_first_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span>\n    df_year <span class=\"token operator\">=</span> df_tmp<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reset_index<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    df_year <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df_year<span class=\"token punctuation\">,</span> df_tmp<span class=\"token punctuation\">,</span> on <span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> how <span class=\"token operator\">=</span> <span class=\"token string\">'inner'</span><span class=\"token punctuation\">)</span>\n    df_year <span class=\"token operator\">=</span> df_year<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ä¸“ä¸šåç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¹³å‡åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n    df_year<span class=\"token punctuation\">[</span><span class=\"token string\">'å¹´ä»½'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">'\\d+'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    df_year<span class=\"token punctuation\">[</span><span class=\"token string\">'ç±»åˆ«'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>findall<span class=\"token punctuation\">(</span><span class=\"token string\">'ï¼ˆ(.*)ï¼‰'</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">file</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    df_year<span class=\"token punctuation\">[</span><span class=\"token string\">'æ ‡ç­¾'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df_year<span class=\"token punctuation\">[</span><span class=\"token string\">'å¹´ä»½'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> df_year<span class=\"token punctuation\">[</span><span class=\"token string\">'ç±»åˆ«'</span><span class=\"token punctuation\">]</span>\n    df_merge_year <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>concat<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>df_year<span class=\"token punctuation\">,</span> df_merge_year<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\ndf_merge_year <span class=\"token operator\">=</span> df_merge_year<span class=\"token punctuation\">.</span>replace<span class=\"token punctuation\">(</span><span class=\"token string\">'å‰20åå†…'</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\nsci_2019 <span class=\"token operator\">=</span> df_merge_year<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df_merge_year<span class=\"token punctuation\">[</span><span class=\"token string\">'æ ‡ç­¾'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'2019ç†å·¥ç±»'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¹´ä»½'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nsci_2018 <span class=\"token operator\">=</span> df_merge_year<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df_merge_year<span class=\"token punctuation\">[</span><span class=\"token string\">'æ ‡ç­¾'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'2018ç†å·¥ç±»'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¹´ä»½'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nsci_2017 <span class=\"token operator\">=</span> df_merge_year<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span>df_merge_year<span class=\"token punctuation\">[</span><span class=\"token string\">'æ ‡ç­¾'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token string\">'2017ç†å·¥ç±»'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'å¹´ä»½'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nsci_2019 <span class=\"token operator\">=</span> sci_2019<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token string\">'å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">)</span>\n\ndf_score_pos <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>sci_2019<span class=\"token punctuation\">,</span>sci_2018<span class=\"token punctuation\">,</span>on <span class=\"token operator\">=</span> <span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">)</span>\ndf_score_pos <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>merge<span class=\"token punctuation\">(</span>df_score_pos<span class=\"token punctuation\">,</span>sci_2017<span class=\"token punctuation\">,</span>on <span class=\"token operator\">=</span> <span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">)</span>\ndf_score_pos<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2019å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2019å¹´'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2019å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token string\">'2018å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2018å¹´'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2018å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token string\">'2017å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017å¹´'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">]</span>\ndf_score_pos <span class=\"token operator\">=</span> df_score_pos<span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token string\">'2019å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'int'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2018å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'int'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2017å¹´æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'int'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\nindex_list <span class=\"token operator\">=</span> df_score_pos<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndata1_2017 <span class=\"token operator\">=</span> df_score_pos<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2017å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2017å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span>\ndata1_2018 <span class=\"token operator\">=</span> df_score_pos<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2018å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2018å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span>\ndata1_2019 <span class=\"token operator\">=</span> df_score_pos<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'2019å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>drop_duplicates<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">'2019å¹´å½•å–æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span>\n\ndf_score <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>index_list<span class=\"token punctuation\">,</span> data1_2017<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data1_2018<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data1_2019<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T\ndf_score<span class=\"token punctuation\">.</span>columns<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2017å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2018å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2019å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span>\ndf_score<span class=\"token punctuation\">[</span><span class=\"token string\">'æœ€ä½å¹³å‡åˆ†'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2017å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2018å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2019å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">3</span>\ndf_score<span class=\"token punctuation\">[</span><span class=\"token string\">'æœ€ä½å¹³å‡åˆ†'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'æœ€ä½å¹³å‡åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>astype<span class=\"token punctuation\">(</span><span class=\"token string\">'float'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">round</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n\nx_data <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'é™¢æ ¡åç§°'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ny_score_2017 <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2017å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ny_score_2018 <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2018å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ny_score_2019 <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'2019å¹´æœ€ä½åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ny_score_mean <span class=\"token operator\">=</span> df_score<span class=\"token punctuation\">[</span><span class=\"token string\">'æœ€ä½å¹³å‡åˆ†'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">.</span>tolist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\84864a68dcbd40e28c2d176024fe168a.png\"/></p>\n<p><strong>985/211å¤§å­¦(ç†å·¥ç±»)å½•å–æœ€ä½ä½æ¬¡</strong></p>\n<pre><code class=\"prism language-python\">line2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Line<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>y_pos_mean<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span>\n        series_name <span class=\"token operator\">=</span> <span class=\"token string\">'å¹³å‡æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">,</span> \n        y_axis <span class=\"token operator\">=</span> x_data<span class=\"token punctuation\">,</span>\n        symbol <span class=\"token operator\">=</span><span class=\"token string\">\"diamond\"</span><span class=\"token punctuation\">,</span>\n        symbol_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n        z<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n        linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"#FFEB3B\"</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        itemstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>ItemStyleOpts<span class=\"token punctuation\">(</span>border_width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> border_color<span class=\"token operator\">=</span><span class=\"token string\">\"#C62828\"</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">\"#FFEB3B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'#FFEB3B'</span><span class=\"token punctuation\">,</span>position<span class=\"token operator\">=</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>      \n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\nbar2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Bar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>x_data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2017å¹´\"</span><span class=\"token punctuation\">,</span> y_pos_2017<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#EC407A'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018å¹´\"</span><span class=\"token punctuation\">,</span> y_pos_2018<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#26A69A'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2019å¹´\"</span><span class=\"token punctuation\">,</span> y_pos_2019<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#3F51B5'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_series_opts<span class=\"token punctuation\">(</span>\n         label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>\n            position<span class=\"token operator\">=</span><span class=\"token string\">'inside'</span><span class=\"token punctuation\">,</span>\n            vertical_align<span class=\"token operator\">=</span><span class=\"token string\">'middle'</span><span class=\"token punctuation\">,</span>\n         <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        itemstyle_opts<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token string\">'opacity'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowBlur'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowOffsetX'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowOffsetY'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowColor'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'rgba(125,0, 125, 0.5)'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'barBorderRadius'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>\n        tooltip_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TooltipOpts<span class=\"token punctuation\">(</span>is_show<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> trigger<span class=\"token operator\">=</span><span class=\"token string\">'axis'</span><span class=\"token punctuation\">,</span> axis_pointer_type<span class=\"token operator\">=</span><span class=\"token string\">'cross'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>        \n        datazoom_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>DataZoomOpts<span class=\"token punctuation\">(</span>orient<span class=\"token operator\">=</span><span class=\"token string\">\"vertical\"</span><span class=\"token punctuation\">,</span>range_start<span class=\"token operator\">=</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span>range_end<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>\n            title<span class=\"token operator\">=</span><span class=\"token string\">'985/211å¤§å­¦(ç†å·¥ç±»)å½•å–æœ€ä½ä½æ¬¡'</span><span class=\"token punctuation\">,</span>\n            subtitle<span class=\"token operator\">=</span><span class=\"token string\">'&lt;åˆ¶å›¾@å…¬ä¼—å·ï¼šPythonå½“æ‰“ä¹‹å¹´&gt;'</span><span class=\"token punctuation\">,</span>\n            pos_left<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n            pos_top<span class=\"token operator\">=</span><span class=\"token string\">'1%'</span><span class=\"token punctuation\">,</span>\n            title_textstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TextStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'#ffb900'</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            subtitle_textstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TextStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'#009bbb'</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        legend_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LegendOpts<span class=\"token punctuation\">(</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">'7%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        xaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n            axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#c2ff00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n                linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#DB7093'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        yaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n            axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#c2ff00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n                linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#DB7093'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>reversal_axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>    \n<span class=\"token punctuation\">)</span>\n\nbar2<span class=\"token punctuation\">.</span>overlap<span class=\"token punctuation\">(</span>line2<span class=\"token punctuation\">)</span>\ngrid <span class=\"token operator\">=</span> Grid<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'1000px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'1200px'</span><span class=\"token punctuation\">,</span>bg_color<span class=\"token operator\">=</span><span class=\"token string\">'#0d0735'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ngrid<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>bar2<span class=\"token punctuation\">,</span> opts<span class=\"token punctuation\">.</span>GridOpts<span class=\"token punctuation\">(</span>pos_top<span class=\"token operator\">=</span><span class=\"token string\">\"10%\"</span><span class=\"token punctuation\">,</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token punctuation\">,</span> pos_right<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> is_control_axis_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\ngrid<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\6ca41875e1e9403cb200e29b443a91b5.png\"/></p>\n<p><strong>985/211å¤§å­¦(æ–‡å²ç±»)å½•å–æœ€ä½åˆ†æ•°</strong></p>\n<pre><code class=\"prism language-python\">line1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Line<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>y_score_mean<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span>\n        series_name <span class=\"token operator\">=</span> <span class=\"token string\">'æœ€ä½å¹³å‡åˆ†'</span><span class=\"token punctuation\">,</span> \n        y_axis <span class=\"token operator\">=</span> x_data<span class=\"token punctuation\">,</span>\n        symbol <span class=\"token operator\">=</span><span class=\"token string\">\"diamond\"</span><span class=\"token punctuation\">,</span>\n        symbol_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span>\n        z<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>\n        linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">\"#FFEB3B\"</span><span class=\"token punctuation\">,</span> width<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        itemstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>ItemStyleOpts<span class=\"token punctuation\">(</span>border_width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> border_color<span class=\"token operator\">=</span><span class=\"token string\">\"#C62828\"</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">\"#FFEB3B\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'#FFEB3B'</span><span class=\"token punctuation\">,</span>position<span class=\"token operator\">=</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>      \n    <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n\nbar1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    Bar<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_xaxis<span class=\"token punctuation\">(</span>x_data<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2017å¹´\"</span><span class=\"token punctuation\">,</span> y_score_2017<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#EC407A'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2018å¹´\"</span><span class=\"token punctuation\">,</span> y_score_2018<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#26A69A'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>add_yaxis<span class=\"token punctuation\">(</span><span class=\"token string\">\"2019å¹´\"</span><span class=\"token punctuation\">,</span> y_score_2019<span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#3F51B5'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_series_opts<span class=\"token punctuation\">(</span>\n         label_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>\n            position<span class=\"token operator\">=</span><span class=\"token string\">'inside'</span><span class=\"token punctuation\">,</span>\n            vertical_align<span class=\"token operator\">=</span><span class=\"token string\">'middle'</span><span class=\"token punctuation\">,</span>\n         <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        itemstyle_opts<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>\n            <span class=\"token string\">'opacity'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowBlur'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowOffsetX'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowOffsetY'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'shadowColor'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'rgba(125,0, 125, 0.5)'</span><span class=\"token punctuation\">,</span>\n            <span class=\"token string\">'barBorderRadius'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">15</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>set_global_opts<span class=\"token punctuation\">(</span>\n        tooltip_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TooltipOpts<span class=\"token punctuation\">(</span>is_show<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> trigger<span class=\"token operator\">=</span><span class=\"token string\">'axis'</span><span class=\"token punctuation\">,</span> axis_pointer_type<span class=\"token operator\">=</span><span class=\"token string\">'cross'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>        \n        datazoom_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>DataZoomOpts<span class=\"token punctuation\">(</span>orient<span class=\"token operator\">=</span><span class=\"token string\">\"vertical\"</span><span class=\"token punctuation\">,</span>range_start<span class=\"token operator\">=</span><span class=\"token number\">70</span><span class=\"token punctuation\">,</span>range_end<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        title_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TitleOpts<span class=\"token punctuation\">(</span>\n            title<span class=\"token operator\">=</span><span class=\"token string\">'985/211å¤§å­¦(æ–‡å²ç±»)å½•å–æœ€ä½åˆ†æ•°'</span><span class=\"token punctuation\">,</span>\n            subtitle<span class=\"token operator\">=</span><span class=\"token string\">'&lt;åˆ¶å›¾@å…¬ä¼—å·ï¼šPythonå½“æ‰“ä¹‹å¹´&gt;'</span><span class=\"token punctuation\">,</span>\n            pos_left<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n            pos_top<span class=\"token operator\">=</span><span class=\"token string\">'1%'</span><span class=\"token punctuation\">,</span>\n            title_textstyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>TextStyleOpts<span class=\"token punctuation\">(</span>color<span class=\"token operator\">=</span><span class=\"token string\">'#ffb900'</span><span class=\"token punctuation\">,</span> font_size<span class=\"token operator\">=</span><span class=\"token number\">18</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        legend_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LegendOpts<span class=\"token punctuation\">(</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">\"center\"</span><span class=\"token punctuation\">,</span> pos_top<span class=\"token operator\">=</span><span class=\"token string\">'7%'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        xaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n            min_<span class=\"token operator\">=</span><span class=\"token number\">400</span><span class=\"token punctuation\">,</span>\n            axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#c2ff00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n                linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#DB7093'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        yaxis_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisOpts<span class=\"token punctuation\">(</span>\n            axislabel_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LabelOpts<span class=\"token punctuation\">(</span>font_size<span class=\"token operator\">=</span><span class=\"token number\">14</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#c2ff00'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            axisline_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>AxisLineOpts<span class=\"token punctuation\">(</span>\n                is_show<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">,</span>\n                linestyle_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>LineStyleOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> color<span class=\"token operator\">=</span><span class=\"token string\">'#DB7093'</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span>reversal_axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>    \n<span class=\"token punctuation\">)</span>\n\nbar1<span class=\"token punctuation\">.</span>overlap<span class=\"token punctuation\">(</span>line1<span class=\"token punctuation\">)</span>\ngrid <span class=\"token operator\">=</span> Grid<span class=\"token punctuation\">(</span>init_opts<span class=\"token operator\">=</span>opts<span class=\"token punctuation\">.</span>InitOpts<span class=\"token punctuation\">(</span>width<span class=\"token operator\">=</span><span class=\"token string\">'1000px'</span><span class=\"token punctuation\">,</span> height<span class=\"token operator\">=</span><span class=\"token string\">'1200px'</span><span class=\"token punctuation\">,</span>bg_color<span class=\"token operator\">=</span><span class=\"token string\">'#0d0735'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\ngrid<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>bar1<span class=\"token punctuation\">,</span> opts<span class=\"token punctuation\">.</span>GridOpts<span class=\"token punctuation\">(</span>pos_top<span class=\"token operator\">=</span><span class=\"token string\">\"10%\"</span><span class=\"token punctuation\">,</span>pos_left<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token punctuation\">,</span> pos_right<span class=\"token operator\">=</span><span class=\"token string\">\"15%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> is_control_axis_index<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\ngrid<span class=\"token punctuation\">.</span>render_notebook<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\54b057e9bb1240ba92c49febd32c0b05.png\"/></p>\n<p><strong>985/211å¤§å­¦(æ–‡å²ç±»)å½•å–æœ€ä½ä½æ¬¡</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3288d9529e4742f895faac2a781a8ed4.png\"/></p>\n<ul><li>985/211å¤§å­¦(æ–‡å²ç±»)å½•å–å¹³å‡æœ€ä½ä½æ¬¡æœ€é«˜çš„å‰ä¸‰ç”²å­¦æ ¡ï¼šæ¸…åå¤§å­¦ï¼ˆ20ï¼‰ï¼ŒåŒ—äº¬å¤§å­¦ï¼ˆ29ï¼‰ï¼Œå¤æ—¦å¤§å­¦ï¼ˆ91ï¼‰</li><li>ä¸­åäººæ°‘å¤§å­¦ï¼ˆ118ï¼‰ï¼Œä¸Šæµ·äº¤é€šå¤§å­¦ï¼ˆ144ï¼‰ï¼Œæµ™æ±Ÿå¤§å­¦ï¼ˆ172ï¼‰ç´§éšå…¶åè¯„è®º</li></ul>\n<p><strong>985/211å¤§å­¦å½•å–æ•°é‡å‰15çš„ç†å·¥ç±»ä¸“ä¸š</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\6f38933443f5423a92ab27c1aa3e9de3.png\"/></p>\n<p><strong>985/211å¤§å­¦å½•å–æ•°é‡å‰15çš„æ–‡å²ç±»ä¸“ä¸š</strong><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\da51f905f99a4805ad7d7555e462f93e.png\"/></p>\n<h1><a id=\"_374\"></a>å®ç°åŸç†</h1>\n<p><strong>æ¶‰åŠåˆ°çš„åº“</strong></p>\n<p><strong>Pandas â€” æ•°æ®å¤„ç†</strong></p>\n<p>è¡Œæ•°æ®å¡«å……ï¼Œé‡ç½®åˆ—ç´¢å¼•ï¼Œå»é™¤å‰2è¡Œ</p>\n<pre><code class=\"prism language-python\"><span class=\"token keyword\">import</span> re\n<span class=\"token keyword\">import</span> os\n<span class=\"token keyword\">import</span> pandas <span class=\"token keyword\">as</span> pd\n\ndf<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span>method <span class=\"token operator\">=</span> <span class=\"token string\">'ffill'</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>iloc<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>fillna<span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\ndf<span class=\"token punctuation\">.</span>columns <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> df<span class=\"token punctuation\">.</span>loc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\ndf <span class=\"token operator\">=</span> df<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span>\ndf<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n</code></pre>\n<p><strong>Pyecharts â€” æ•°æ®å¯è§†åŒ–</strong></p>\n<p>ç®€ä»‹</p>\n<p>Echartsæ˜¯ç”±ç™¾åº¦ç ”å‘ï¼Œå¯ä»¥ç”Ÿæˆç›´è§‚ã€ç”ŸåŠ¨ã€å¯äº¤äº’ã€å¯é«˜åº¦ä¸ªæ€§åŒ–å®šåˆ¶çš„Webæ•°æ®å¯è§†åŒ–å›¾è¡¨çš„å¯è§†åŒ–åº“ã€‚å…·æœ‰ç€å¼€æºã€ä¸°å¯Œçš„å¯è§†åŒ–ç±»å‹ã€æ·±åº¦äº¤äº’å¼æ¢ç´¢ã€åŠ¨æ€æ•°æ®ã€ç»šä¸½ç‰¹æ•ˆç­‰ä¼˜ç‚¹ã€‚2018å¹´å…¨çƒè‘—åå¼€æºç¤¾åŒºApacheåŸºé‡‘ä¼šå®£å¸ƒEchartsé¡¹ç›®å…¨ç¥¨é€šè¿‡è¿›å…¥Apacheå­µåŒ–å™¨ã€‚</p>\n<p>ç‰¹æ€§</p>\n<ul><li>ç®€æ´çš„ API è®¾è®¡ï¼Œä½¿ç”¨å¦‚ä¸æ»‘èˆ¬æµç•…ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨</li><li>å›Šæ‹¬äº† 30+ ç§å¸¸è§å›¾è¡¨ï¼Œåº”æœ‰å°½æœ‰</li><li>æ”¯æŒä¸»æµ Notebook ç¯å¢ƒï¼ŒJupyter Notebook å’Œ JupyterLab</li><li>å¯è½»æ¾é›†æˆè‡³ Flaskï¼ŒDjango ç­‰ä¸»æµ Web æ¡†æ¶</li><li>é«˜åº¦çµæ´»çš„é…ç½®é¡¹ï¼Œå¯è½»æ¾æ­é…å‡ºç²¾ç¾çš„å›¾è¡¨</li><li>è¯¦ç»†çš„æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¿«çš„ä¸Šæ‰‹é¡¹ç›®</li><li>å¤šè¾¾ 400+ åœ°å›¾æ–‡ä»¶ä»¥åŠåŸç”Ÿçš„ç™¾åº¦åœ°å›¾ï¼Œä¸ºåœ°ç†æ•°æ®å¯è§†åŒ–æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒ</li></ul>\n<h1><a id=\"_413\"></a>æœ€å</h1>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}