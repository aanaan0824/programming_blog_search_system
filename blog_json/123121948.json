{"blogid": "123121948", "writerAge": "码龄15年", "writerBlogNum": "8", "writerCollect": "3", "writerComment": "2", "writerFan": "4", "writerGrade": "2级", "writerIntegral": "105", "writerName": "PbootCMS建站博客", "writerProfileAdress": "writer_image\\profile_123121948.jpg", "writerRankTotal": "119433", "writerRankWeekly": "254241", "writerThumb": "0", "writerVisitNum": "9780", "blog_read_count": "1792", "blog_time": "于 2022-02-24 21:56:36 发布", "blog_title": "PbootCMS城市分站插件 生成任意城市的分站链接地址 支持分站同页跳转 实现dedecms织梦城市分站插件效果", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h2 id=\"插件介绍\">插件介绍</h2>\n<p>基于PbootCMS v3.1.3制作的<strong>城市分站插件</strong>。自动生成任意城市的分站链接，同时支持分站之间同页跳转。</p>\n<p><a class=\"has-card\" href=\"https://www.cms88.com/cms/188.html\" title=\"PbootCMS城市分站插件 生成任意城市的分站链接地址 支持分站同页跳转 - PbootCMS建站博客 (cms88.com)\"><span class=\"link-card-box\"><span class=\"link-title\">PbootCMS城市分站插件 生成任意城市的分站链接地址 支持分站同页跳转 - PbootCMS建站博客 (cms88.com)</span><span class=\"link-link\"><img alt=\"icon-default.png?t=M1L8\" class=\"link-link-icon\" src=\"image\\icon-default.png\"/>https://www.cms88.com/cms/188.html</span></span></a>配合{city}标签，无需重复添加资料，自动生成带有城市名称的地区关键词，便于SEO针对城市关键词进行优化。</p>\n<p>前台演示地址：<a href=\"http://city.a8yun.com/\" title=\"PbootCMS-永久开源免费的PHP企业网站开发建设管理系统\">PbootCMS-永久开源免费的PHP企业网站开发建设管理系统</a>，后台演示请联系站长获取。</p>\n<h2 id=\"实现概述\">实现概述</h2>\n<p>1、新增city.html城市分站页面，显示所有分站（二级）；</p>\n<p>2、新增{pboot:city}标签，用于显示分站列表；下面有详解；</p>\n<p>3、新增{city}全站通用标签，自动替换为当前城市名；</p>\n<p>4、新增{iscity}全站通用标签，用于判断当前是否是分站页面；</p>\n<p>5、新增__INDEX__标签，自动生成当前城市首页链接；</p>\n<p>6、支持城市分站首页的TDK自定义配置；</p>\n<p>7、支持Sitemap中自动生成城市分站链接的开启和关闭。</p>\n<h2 id=\"特别说明\">特别说明</h2>\n<p>1、不支持二级目录；</p>\n<p>2、不支持多区域（多语言）；</p>\n<p>3、不支持分站单独添加资料；</p>\n<p>4、无模板制作基础的用户请联系客服额外购买技术支持服务；</p>\n<p>5、小众插件，按需购买。</p>\n<h2 id=\"功能详解\">功能详解</h2>\n<p><strong>PbootCMS城市分站列表页，即 /city.html 页面。</strong></p>\n<p>如图：</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\9218aeee7844734fe58ec841bb76c1be.png\"/></p>\n<p></p>\n<p>PB城市分站页面模板文件名为：city.html</p>\n<p></p>\n<p><strong>该模板页面中使用了新增的{pboot:city}标签：</strong></p>\n<pre>\n</pre>\n<ol><li><code>{pboot:city} </code></li><li><code>&lt;dl&gt; </code></li><li><code>   &lt;dt&gt;&lt;a href=\"[city:home]\"&gt;[city:title]&lt;/a&gt;&lt;/dt&gt; </code></li><li><code>   &lt;dd&gt; </code></li><li><code>     {pboot:2city pid=[city:id]} </code></li><li><code>     &lt;a href=\"[2city:home]\"&gt;[2city:title]&lt;/a&gt; </code></li><li><code>     {/pboot:2city} </code></li><li><code>   &lt;/dd&gt; </code></li><li><code>&lt;/dl&gt; </code></li><li><code>{/pboot:city} </code></li></ol>\n<p>分站分为两个层级，可以理解为省级、市级，后台可自行添加修改删除。</p>\n<p></p>\n<p><strong>支持参数：istop，用法如下：</strong></p>\n<pre>\n</pre>\n<ol><li><code>&lt;div class=\"container\"&gt; </code></li><li><code>    &lt;strong&gt;推荐城市&lt;/strong&gt; </code></li><li><code>    {pboot:city istop=1} </code></li><li><code>    &lt;a href=\"[city:link]\"&gt;[city:title]&lt;/a&gt; </code></li><li><code>    {/pboot:city} </code></li><li><code>&lt;/div&gt; </code></li></ol>\n<p>使用istop=1参数后，不再分两级显示，仅显示后台设置为推荐的城市列表，</p>\n<p>效果如下如：</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\39eca43c5ca21a4e5c8ad6f1b5be721d.png\"/></p>\n<p> </p>\n<p><strong>标签内容：</strong></p>\n<table><tbody><tr><td>title</td><td>城市分站名称</td></tr><tr><td>etitle</td><td>英文名称</td></tr><tr><td>home</td><td>城市分站首页；例如北京：http://www.xxx.com/beijing/</td></tr><tr><td>link</td><td> <p>当前页面同城市切换链接；（仅用于带有参数istop的情况下）</p> <p>例如：点前页面为：<a href=\"http://www.cms88.com/beijing/company/\" title=\"http://www.cms88.com/beijing/company/\">http://www.cms88.com/beijing/company/</a></p> <p>点击南京，自动跳转至：<a href=\"http://www.cms88.com/nanjing/company/\" title=\"http://www.cms88.com/nanjing/company/\">http://www.cms88.com/nanjing/company/</a></p> </td></tr></tbody></table>\n<p></p>\n<p><strong>全站通用{city}标签，用于显示当前城市分站名称，主站默认为空。</strong></p>\n<p>可用于任意地方，例如站点基信息，新闻标题，新闻详情以及网站模板等。</p>\n<p>示例：</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\11fee66035e4b12481d25d7e0c4ea1d6.png\"/></p>\n<p> </p>\n<p>分站页面中，自动替换导航文字为当前城市名称；</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\d85a2c0aa4b6b01d8a03986731bc0083.png\"/></p>\n<p>分站页面中自动替换站点标题、站点描述、尾部信息等内容。</p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\525e78d61caeac6e35f4cf3897bd280a.png\"/></p>\n<p>城市分站页面中，自动替换新闻标题、新闻详情为当前城市名称。</p>\n<p></p>\n<p><strong>{iscity}标签，这个主要是用来判断当前是否是分站页面的。</strong></p>\n<pre>\n</pre>\n<ol><li><code>&lt;div class=\"city\"&gt; </code></li><li><code>&lt;div&gt;{pboot:if({iscity})}{city}{else}主站{/pboot:if}&lt;/div&gt; </code></li><li><code>&lt;a href=\"/city.html\"&gt;【城市列表】&lt;/a&gt; </code></li><li><code>&lt;/div&gt; </code></li></ol>\n<p>标签解释：当前页面为分站的时候显示分站名称，反之则显示主站。</p>\n<p></p>\n<p><strong>__INDEX__标签，主要用于对城市分站情况的下的首页链接进行自动替换。</strong></p>\n<p>正常情况下，如果链接直接写根目录，如：&lt;a href=\"/\"&gt;首页&lt;/a&gt;；当用户点击分站，再点击首页的时候，将回到主站首页；</p>\n<p>所以定制了这样一个标签，用来返回当前分站的首页。</p>\n<p>使用示例：&lt;a href=\"__INDEX__\"&gt;首页&lt;/a&gt;</p>\n<p></p>\n<p><strong>支持城市分站自定义首页TDK（标题、描述、关键词）</strong></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\d0c79048e6ca1e423afc8719dd55bad4.png\"/></p>\n<p> </p>\n<p>不填则默认显示主站的TDK信息。</p>\n<p></p>\n<p><strong>城市分站的SiteMap</strong></p>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"image\\69bf31f12dcb6d21e99c8242922e8a5e.png\"/></p>\n<p> </p>\n<p>这里单独做了一个开关，用于控制是否需要在sitemap中去显示分站的链接。</p>\n<p>这个数据里成倍增长，生成效率不高。</p>\n<p>例如网站有100条新闻，正常情况下，大概会生成100多条sitemap链接。（这里暂时忽略首页及栏目链接数量）</p>\n<p>如果开启城市分站Sitemap，默认有379个城市分站，加上1个主站。</p>\n<p>那么sitemap中就会生成38000条链接。</p>\n<p>换句话说，每添加一条新闻，就会生成380个链接。</p>\n<p>所以按需开启使用。</p>\n<p></p>\n<p>到此关于PbootCMS城市分站插件讲解完毕。感谢关注。</p>\n<p> 附上插件地址：<a class=\"has-card\" href=\"https://www.cms88.com/cms/188.html\" title=\"PbootCMS城市分站插件 生成任意城市的分站链接地址 支持分站同页跳转 - PbootCMS建站博客 (cms88.com)\"><span class=\"link-card-box\"><span class=\"link-title\">PbootCMS城市分站插件 生成任意城市的分站链接地址 支持分站同页跳转 - PbootCMS建站博客 (cms88.com)</span><span class=\"link-link\"><img alt=\"icon-default.png?t=M1L8\" class=\"link-link-icon\" src=\"image\\icon-default.png\"/>https://www.cms88.com/cms/188.html</span></span></a></p>\n</div>\n</div>"}