{"blogid": "126666752", "writerAge": "None", "writerBlogNum": "56", "writerCollect": "71", "writerComment": "40", "writerFan": "433", "writerGrade": "3级", "writerIntegral": "709", "writerName": "彭式程序猿", "writerProfileAdress": "writer_image\\profile_126666752.jpg", "writerRankTotal": "25306", "writerRankWeekly": "1355", "writerThumb": "108", "writerVisitNum": "12650", "blog_read_count": "233", "blog_time": "于 2022-09-02 17:13:32 发布", "blog_title": "【Vue 基础知识】keep-alive是什么？怎么用？", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p>提示：前端查漏补缺，仅代表个人观点，不接受任何批评</p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#keepalive_10\">一、keep-alive是什么？</a></li><li><a href=\"#_18\">二、使用步骤</a></li><li><ul><li><a href=\"#1__19\">1. 基本使用</a></li><li><a href=\"#2__43\">2. 允许组件有条件地缓存</a></li><li><a href=\"#3__62\">3. 缓存组件实例数量限制</a></li></ul>\n</li><li><a href=\"#_75\">三、注意事项</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p>\n<h1><a id=\"keepalive_10\"></a>一、keep-alive是什么？</h1>\n<blockquote>\n<p>是Vue的内置组件，主要用于<code>保留组件状态</code>或<code>避免重新渲染</code>。</p>\n</blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\aba26f553c96457da1a6e365313c1031.png\"/></p>\n<hr/>\n<h1><a id=\"_18\"></a>二、使用步骤</h1>\n<h2><a id=\"1__19\"></a>1. 基本使用</h2>\n<p>代码如下（示例）：</p>\n<pre><code class=\"prism language-c\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 基本 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n\n<span class=\"token comment\">//当a满足大于1的条件显示comp-a，反之则显示comp-b</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 带条件判断的子组件 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>comp<span class=\"token operator\">-</span>a v<span class=\"token operator\">-</span><span class=\"token keyword\">if</span><span class=\"token operator\">=</span><span class=\"token string\">\"a &gt; 1\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>comp<span class=\"token operator\">-</span>a<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>comp<span class=\"token operator\">-</span>b v<span class=\"token operator\">-</span><span class=\"token keyword\">else</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>comp<span class=\"token operator\">-</span>b<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 和 `<span class=\"token operator\">&lt;</span>transition<span class=\"token operator\">&gt;</span>` 一起使用 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>transition<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>transition<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"2__43\"></a>2. 允许组件有条件地缓存</h2>\n<p>代码如下（示例）：</p>\n<pre><code class=\"prism language-c\"><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 逗号分隔字符串 <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive include<span class=\"token operator\">=</span><span class=\"token string\">\"a,b\"</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 正则表达式 <span class=\"token punctuation\">(</span>使用 `v<span class=\"token operator\">-</span>bind`<span class=\"token punctuation\">)</span> <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive <span class=\"token operator\">:</span>include<span class=\"token operator\">=</span><span class=\"token string\">\"/a|b/\"</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> 数组 <span class=\"token punctuation\">(</span>使用 `v<span class=\"token operator\">-</span>bind`<span class=\"token punctuation\">)</span> <span class=\"token operator\">--</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive <span class=\"token operator\">:</span>include<span class=\"token operator\">=</span><span class=\"token string\">\"['a', 'b']\"</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n</code></pre>\n<h2><a id=\"3__62\"></a>3. 缓存组件实例数量限制</h2>\n<p><code>max:</code>一旦这个数字达到了，在新实例被创建之前，已缓存组件中最久没有被访问的实例会被销毁掉.</p>\n<p>代码如下（示例）：</p>\n<pre><code class=\"prism language-c\"><span class=\"token operator\">&lt;</span>keep<span class=\"token operator\">-</span>alive <span class=\"token operator\">:</span>max<span class=\"token operator\">=</span><span class=\"token string\">\"10\"</span><span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>component <span class=\"token operator\">:</span>is<span class=\"token operator\">=</span><span class=\"token string\">\"view\"</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>component<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>keep<span class=\"token operator\">-</span>alive<span class=\"token operator\">&gt;</span>\n</code></pre>\n<hr/>\n<h1><a id=\"_75\"></a>三、注意事项</h1>\n<ul><li> <p>keep-alive要求被切换到的组件都<code>有自己的名字</code>，不论是通过组件的 name 选项还是局部/全局注册。</p> </li><li> <p><code>&lt;keep-alive&gt; </code>是一个抽象组件：它<code>自身不会渲染一个 DOM 元素</code>，也不会出现在组件的父组件链中.</p> </li><li> <p>keep-alive是用在其一个<code>直属的子组件被开关</code>的情形。如果你在其中有 v-for 则不会工作。如果有上述的多个条件性的子元素，<code>&lt;keep-alive&gt;</code> 要求同时只有一个子元素被渲染</p> </li><li> <p> 不会在<code>函数式组件</code>中正常工作，因为它们<code>没有缓存实例</code>。</p> </li></ul>\n<hr/>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}