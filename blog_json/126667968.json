{"blogid": "126667968", "writerAge": "码龄5年", "writerBlogNum": "65", "writerCollect": "292", "writerComment": "37", "writerFan": "6362", "writerGrade": "3级", "writerIntegral": "788", "writerName": "前端阿彬", "writerProfileAdress": "writer_image\\profile_126667968.jpg", "writerRankTotal": "20162", "writerRankWeekly": "3088", "writerThumb": "102", "writerVisitNum": "117413", "blog_read_count": "133", "blog_time": "已于 2022-09-02 18:29:40 修改", "blog_title": "【性能优化】（域名发散）为什么主页面和静态资源要置于不同的域名下？", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p>网站开发往往会把主页面和静态资源（图片等）放置在不同域名下（可能解析的相同的服务器，也可能不同）。这么做的用意是什么呢？且听在下慢慢道来～</p>\n<h3><strong><span style=\"color:#956fe7;\">1. 突破浏览器并发限制</span> </strong></h3>\n<p><strong>浏览器针对<span style=\"color:#fe2c24;\">同一个域名内</span>资源请求的<span style=\"color:#fe2c24;\">并发数量</span>有限制（</strong> 为了<span style=\"color:#fe2c24;\"><strong>防止<a href=\"https://so.csdn.net/so/search?q=DDOS%E6%94%BB%E5%87%BB&amp;spm=1001.2101.3001.7020\" title=\"DDOS攻击\">DDOS攻击</a></strong>。</span><strong>）</strong>，且不同浏览器对同一个域名下的静态资源并发加载的数量不同 ，若超出最大限制数，超出的请求会被<span style=\"color:#fe2c24;\">阻塞</span>。浏览器会等待前面的资源下载完毕，然后复用前面连接的 tcp 发起后续的请求。</p>\n<p>下面是一些常见浏览器的请求并发数：</p>\n<table><tbody><tr><td>Chrome34/32</td><td>6</td></tr><tr><td>IE10</td><td>8</td></tr><tr><td>IE11</td><td>13</td></tr><tr><td>Firefox27/26</td><td>6</td></tr><tr><td>Safari7.0.1</td><td>6</td></tr></tbody></table>\n<p>可想而知，如果我们将静态资源放到另外一个域名上，和主页面区分开，就可以突破浏览器的请求并发数限制，减少网页加载时间。不仅仅可以<span style=\"color:#fe2c24;\">提高同时请求的数量</span>，还能<span style=\"color:#fe2c24;\">减少主域名下的请求</span>，达到减少网页白屏时间或者DCL、L时间的效果。</p>\n<h3><strong><span style=\"color:#956fe7;\">2. 节省 cookie 带宽</span></strong></h3>\n<p>Cookie 是紧跟域名的。<span style=\"color:#fe2c24;\">同一个域名下的所有请求，都会携带 Cookie</span>。可想而知，如果我们所有资源都在一个域名下，那么加载那些静态资源也会带上cookie，很明显加大了请求成本。</p>\n<p>大部分情况下，对于静态资源的请求是不需要携带cookie的，比如浏览图片、视频等信息。而<span style=\"color:#fe2c24;\">与主域名不同就不会自动携带cookie</span><strong>，</strong>所以我们可以通过将静态资源放在另一个域名上来避免携带cookie，节省了请求带宽。</p>\n<h3><strong><span style=\"color:#956fe7;\">3. 更方便 CDN 缓存</span></strong></h3>\n<p>将静态内容和动态请求存放在不同服务器上，更加方便进行 <code>CDN</code> 请求。</p>\n<h3><strong><span style=\"color:#956fe7;\">4. 域名收敛</span></strong></h3>\n<ul><li><strong><span style=\"color:#0d0016;\">域名发散</span></strong></li></ul>\n<blockquote>\n<p>域名发散是指将静态资源放在多个子域名下，就可以多线程下载，提高并行度，使客户端加载静态资源更加迅速。即本文讨论内容，主页面和静态资源要置于不同的域名下</p>\n</blockquote>\n<ul><li><strong><span style=\"color:#0d0016;\">域名收敛 </span></strong></li></ul>\n<blockquote>\n<p>域名收敛是指将静态资源放在一个域名下。减少DNS解析的开销。</p>\n</blockquote>\n<p>由于浏览器解析DNS也需要花费时间，太多域名会导致解析时间过长，访问速度反而过慢了。</p>\n<p>所以我们需要控制页面中出现的域名数。一般来说，主站＋CDN两个域名比较合理。</p>\n<p></p>\n</div>\n</div>"}