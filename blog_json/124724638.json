{"blogid": "124724638", "writerAge": "码龄4年", "writerBlogNum": "72", "writerCollect": "1267", "writerComment": "622", "writerFan": "7802", "writerGrade": "5级", "writerIntegral": "2037", "writerName": "周周的Unity小屋", "writerProfileAdress": "writer_image\\profile_124724638.jpg", "writerRankTotal": "8319", "writerRankWeekly": "399", "writerThumb": "698", "writerVisitNum": "256598", "blog_read_count": "896", "blog_time": "已于 2022-05-17 09:13:42 修改", "blog_title": "Unity实现UGUI空物体颜色渐变的描边方法", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><ul><li><ul><li><a href=\"#UGUI_2\">一、关于UGUI的描边</a></li><li><a href=\"#OnPopulateMeshUI_6\">二、重写OnPopulateMesh实现UI空物体描边</a></li><li><ul><li><a href=\"#_8\">原理解析</a></li><li><a href=\"#_20\">完整代码实现</a></li><li><a href=\"#_127\">完整描边效果</a></li></ul>\n</li><li><a href=\"#UI_129\">三、拓展功能（渐变色的UI描边）</a></li><li><ul><li><a href=\"#_132\">两种渐变色描边</a></li><li><a href=\"#_137\">多种渐变色描边</a></li></ul>\n</li><li><a href=\"#_141\">四、推荐阅读</a></li></ul>\n</li></ul>\n</li></ul>\n</div>\n<p></p>\n<h3><a id=\"UGUI_2\"></a>一、关于UGUI的描边</h3>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\011e4362320e4c1dacae33c243a9b7ad.png\"/></p>\n<p>当我们有如上图的描边需求时，可以考虑使用Unity原生自带两个组件的Outline和Shadow实现对于UI的描边，但是弊端还是很大的，因为这个两组件会造成顶点数和三角面数加倍，<strong>导致就是很耗电脑性能</strong>！而且挂载到UI空物体上是没有描边效果的。我们只能另寻他法，UGUI为我们提供了一个类<mark>MaskableGraphic</mark>帮助我们可以<mark>自定义重构UI组件</mark>,下面将演示如何重写其 <mark>OnPopulateMesh</mark>方法绘制线框。</p>\n<h3><a id=\"OnPopulateMeshUI_6\"></a>二、重写OnPopulateMesh实现UI空物体描边</h3>\n<p>说是实现UI空物体的描边可能有点不准确，应该是给不继承于Graphic类的组件描边，因为一个游戏对象只允许拥有一个Graphic组件。像image和button等这种就不能添加这个脚本绘制描边，只能给这些组件添加空物体作为父物体，再将该描边脚本拖拽给空物体实现描边。</p>\n<h4><a id=\"_8\"></a>原理解析</h4>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\156c999aff494627a0191d5c72fee039.png\"/><br/> <strong>注意：设置顶点位置是相对于UI锚点来确定的，如果锚点pivot=（0.5,0.5），那么UI顶点原点（0,0）就在UI中心点；如果锚点pivot=（0,0），那么UI顶点原点（0,0）在UI左下角。其中依次类推。</strong><br/> 上图中，脚本里rectTransform.rect.width和height表示该ui空物体的宽高，即width=100，height=100。锚点为（0.5,0.5）所以：<br/> （1）顶点1:quad1[0].positon=（-50,50,0）即UI左上角位置①处<br/> （2）顶点2:quad1[1].positon=（50,50,0）即UI右上角位置②处<br/> （3）顶点3:quad1[2].positon=（50,49,0）即UI右上角下方一个线宽像素位置③处<br/> （4）顶点4:quad1[3].positon=（-50,49,0）即UI左上角下方一个线宽像素位置④处。<br/> 最后调用vh.AddUIVertexQuad（quad1）方法，将一个面片顶点信息添加进去，它就帮我们绘制出来下图的矩形线框了：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\d0c1f3555afa489da3072b58f4451bb6.png\"/><br/> 接下来我们就寻找规律，依次类推将其他线框绘制出来，实现一个可以将UI组件描边的效果啦。</p>\n<h4><a id=\"_20\"></a>完整代码实现</h4>\n<pre><code class=\"prism language-csharp\"><span class=\"token comment\">/// &lt;summary&gt;</span>\n<span class=\"token comment\">/// UI空物体描边</span>\n<span class=\"token comment\">/// &lt;/summary&gt;</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UIoutline</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">MaskableGraphic</span></span>\n<span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Color</span> lineColor <span class=\"token operator\">=</span> Color<span class=\"token punctuation\">.</span>black<span class=\"token punctuation\">;</span><span class=\"token comment\">//默认描边颜色</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">float</span></span> lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">1f</span><span class=\"token punctuation\">;</span><span class=\"token comment\">//默认绘制的线宽,表示一个像素宽</span>\n\n    <span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">OnPopulateMesh</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">VertexHelper</span> vh<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">OnPopulateMesh</span><span class=\"token punctuation\">(</span>vh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        vh<span class=\"token punctuation\">.</span><span class=\"token function\">Clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//定义边框的面片数组，表示面片的四个顶点。根据顶点顺序进行顺时针绘制</span>\n        <span class=\"token class-name\">UIVertex<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> quad1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Debug<span class=\"token punctuation\">.</span><span class=\"token function\">Log</span><span class=\"token punctuation\">(</span>quad1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">-</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">-</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad1<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n        vh<span class=\"token punctuation\">.</span><span class=\"token function\">AddUIVertexQuad</span><span class=\"token punctuation\">(</span>quad1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">UIVertex<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> quad2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">+</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">+</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad2<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n        vh<span class=\"token punctuation\">.</span><span class=\"token function\">AddUIVertexQuad</span><span class=\"token punctuation\">(</span>quad2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">UIVertex<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> quad3 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">+</span> lineWidth<span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">+</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad3<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n        vh<span class=\"token punctuation\">.</span><span class=\"token function\">AddUIVertexQuad</span><span class=\"token punctuation\">(</span>quad3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token class-name\">UIVertex<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> quad4 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">-</span> lineWidth<span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">UIVertex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>color <span class=\"token operator\">=</span> lineColor<span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>position <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Vector3</span><span class=\"token punctuation\">(</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>width <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span> <span class=\"token operator\">-</span> lineWidth<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>rectTransform<span class=\"token punctuation\">.</span>rect<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        quad4<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>uv0 <span class=\"token operator\">=</span> Vector2<span class=\"token punctuation\">.</span>zero<span class=\"token punctuation\">;</span>\n        vh<span class=\"token punctuation\">.</span><span class=\"token function\">AddUIVertexQuad</span><span class=\"token punctuation\">(</span>quad4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<h4><a id=\"_127\"></a>完整描边效果</h4>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\a416b59ea8b743adb6ae0e5c84975947.png\"/></p>\n<h3><a id=\"UI_129\"></a>三、拓展功能（渐变色的UI描边）</h3>\n<p>我们只需要根据自己的需求修改绘制线框时顶点的颜色就可以实现渐变色的效果了。<br/> <img alt=\"在这里插入图片描述\" src=\"image\\c73b925686e649479e27df4c631bfa02.png\"/></p>\n<h4><a id=\"_132\"></a>两种渐变色描边</h4>\n<p>我们只需要再添加一种颜色属性，设置顶点颜色时赋值不同颜色值即可得到上图左边红黑渐变描边效果。<br/> 脚本修改如下，其他顶点依次类推设置。<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e3a7c763be964863ab4182c796f7b726.png\"/></p>\n<h4><a id=\"_137\"></a>多种渐变色描边</h4>\n<p>添加另外三种颜色属性，设置顶点颜色时赋值不同颜色值即可得到上图右边红黄蓝绿渐变描边效果。<br/> 脚本修改如下，其他顶点依次类推设置，可在面板修改颜色属性查看不同渐变色效果。<br/> <img alt=\"在这里插入图片描述\" src=\"image\\a7e428e6359b4048bf5aa7c1aa0d4748.png\"/></p>\n<h3><a id=\"_141\"></a>四、推荐阅读</h3>\n<p><a href=\"https://blog.csdn.net/qq_42437783/article/details/121018692\">Unity在UI上使用MaskableGraphic类画一个矩形</a></p>\n<p><a href=\"https://download.csdn.net/download/qq_42437783/85354939\">渐变色描边源码下载</a></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}