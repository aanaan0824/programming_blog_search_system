{"blogid": "125401784", "writerAge": "码龄3年", "writerBlogNum": "42", "writerCollect": "78", "writerComment": "0", "writerFan": "8", "writerGrade": "3级", "writerIntegral": "445", "writerName": "BEINTHEMEMENT", "writerProfileAdress": "writer_image\\profile_125401784.jpg", "writerRankTotal": "53900", "writerRankWeekly": "104304", "writerThumb": "16", "writerVisitNum": "30859", "blog_read_count": "6822", "blog_time": "已于 2022-06-29 17:59:20 修改", "blog_title": "如何查看linux服务器内存使用情况", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h3>1. free命令</h3>\n<p>free 命令显示系统使用和空闲的内存情况，包括物理内存、交互区内存(swap)和内核缓冲区内存。</p>\n<p>直接输入free命令，显示如下：</p>\n<p><img alt=\"\" height=\"76\" src=\"image\\882359a880664ffabdcaa7e9c8749b81.png\" width=\"735\"/></p>\n<p></p>\n<p>free命令默认是显示单位kb，可以采用free -m和free -g命令查看，分别表示MB和GB，显示如下：</p>\n<p><img alt=\"\" height=\"81\" src=\"image\\d06bcc0f5363493385eecf5e38d5c9bd.png\" width=\"731\"/></p>\n<p></p>\n<pre>第1行数据【总计】62G表示物理内存总量；15G表示【总计】分配给【缓存】(包含buffers【缓冲】与cache【缓存】)使用的数量，但其中可能部分缓存并未实际使用；【空闲】3G表示未被分配的内存；shared【共享】表示共享内存；43G表示系统分配但未被使用的buffers【缓冲】数量；46G表示系统分配但未被使用的available【可用】数量</pre>\n<h2><strong>2.top命令</strong></h2>\n<p>top 命令查看系统的实时负载， 包括进程、CPU负载、内存使用等等</p>\n<p>直接输入top命令</p>\n<p><img alt=\"\" height=\"824\" src=\"image\\3e3d4b1d6e6245c183499fa4b3e189fa.png\" width=\"881\"/></p>\n<p><strong>第一行：基本情况</strong></p>\n<p>当前系统时间；系统已经运行的时长；当前登录系统的用户数；1分钟，5分钟，15分钟的负载情况；load average：如果这个数除以逻辑CPU的数量，结果高于5的时候就表明系统在超负荷运转了。</p>\n<p><strong>第二行：任务（进程）</strong></p>\n<p>进程数；正在运行的进程数；休眠的进程数；停止的进程数；僵尸状态的进程数；</p>\n<p><strong>第三行：cpu状态</strong></p>\n<p>us：用户空间占用CPU的百分比。                        sy：内核空间占用CPU的百分比。</p>\n<p>ni：改变过优先级的进程占用CPU的百分比。        id：处于空闲的CPU百分比。</p>\n<p>wa：系统等待IO的CPU时间百分比。                  hi：硬中断（Hardware IRQ）占用CPU的百分比</p>\n<p>si：软中断（Software Interrupts）占用CPU的百分比        st：来自于一个虚拟机偷取的CPU时间百分比。</p>\n<p><strong>第四行：内存状态</strong></p>\n<p>total ：物理内存总量                                        used：使用中的内存总量</p>\n<p>free：空闲内存总量                                          buff/cache：buffers+cache</p>\n<p>        buffers：用于存放要输出到disk（块存储）的数据，在这里buff是指被OS buffer住的内存。<br/>         cached：存放从disk上读出的数据；buffer和cache是为了提高IO性能并由OS管理。</p>\n<p><strong>第五行：swap交换分区</strong></p>\n<p>total：交换区总量                           used：使用的交换区总量</p>\n<p>free：空闲交换区总量                        avail mem：可用内存空间</p>\n<p>说明：如果used数值在不断的变化，说明内核在不断进行内存和swap的数据交换，这是真正的内存不够用了。</p>\n<p>第六行：空行</p>\n<p><strong>第七行：各进程（任务）的状态监控</strong></p>\n<p><em>PID：进程id                        ​​​​​​​        ​​​​​​​<span style=\"color:#fe2c24;\">USER：进程所有者（谁在用）</span><br/> PR：进程优先级                        NI：nice值。负值表示高优先级，正值表示低优先级<br/> VIRT：进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES<br/> RES：进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA<br/> SHR：共享内存大小，单位kb<br/> S：进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程<br/> %CPU：上次更新到现在的CPU时间占用百分比<br/><span style=\"color:#fe2c24;\"> %MEM：进程使用的物理内存百分比                </span>TIME+：进程使用的CPU时间总计，单位1/100秒<br/> COMMAND：进程名称（命令名/命令行）</em></p>\n<h2><strong>3. 进入top后</strong></h2>\n<h2><strong>3.1 “shift+m”</strong></h2>\n<p>进入top的实时界面后，默认按照CPU的使用率排序<strong>，通过“shift+m”按键将进程按照内存使用情况排序，可以查看哪些进程是当前系统中的内存开销“大户”。</strong></p>\n<p><img alt=\"\" height=\"816\" src=\"image\\457a72043d574ccb8f1b0a71eaae4214.png\" width=\"977\"/></p>\n<h2><strong> 3.2根据关键词排序</strong></h2>\n<p>top命令中，按下 f 键，进入选择排序列的界面，这里可以选择要显示的信息列，要按照哪些信息列进行排序等</p>\n<p>参照红框的说明来选择是否显示那些列就行，标*的就是显示</p>\n<p>用上下键来移动，用空格键来确定/否定</p>\n<p><img alt=\"\" height=\"1007\" src=\"image\\ea1b1d05446d4499b73b6bbaaf31bb39.png\" width=\"951\"/></p>\n<p><img alt=\"\" height=\"1017\" src=\"image\\83473b9c44254eeb958b76e5f64a7f2e.png\" width=\"878\"/></p>\n<p><strong><span style=\"color:#fe2c24;\">注意：</span></strong>运行top命令之后，如果想退出该命令，键入q即可或按<strong>ctrl c</strong></p>\n<p>备注：</p>\n<p><img alt=\"\" height=\"221\" src=\"image\\604c48ababba4d7d870df49eca345628.png\" width=\"707\"/></p>\n<p> </p>\n</div>\n</div>"}