{"blogid": "126728322", "writerAge": "码龄13年", "writerBlogNum": "251", "writerCollect": "11845", "writerComment": "2627", "writerFan": "46939", "writerGrade": "7级", "writerIntegral": "14521", "writerName": "香菜聊游戏", "writerProfileAdress": "writer_image\\profile_126728322.jpg", "writerRankTotal": "648", "writerRankWeekly": "1658", "writerThumb": "3920", "writerVisitNum": "1247367", "blog_read_count": "169", "blog_time": "已于 2022-09-07 17:14:07 修改", "blog_title": "Java代码规范", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<h1 id=\"mmtaY\">1、需求</h1>\n<p id=\"u3f2c58d4\">代码规范检测有助于我们进行代码排错、提高编码效率、以及提升项目整体的运行速度。</p>\n<p id=\"u057e0b63\">为了在开发中统一代码规范，降低维护成本，提高程序的可读性，减少bug 的发生。同时轻量级的完成代码检查，不需要复杂的配置即可完成。</p>\n<p id=\"u68bcc1e0\">三个核心点：可以进行代码规范检查，在本地完成，配置简单。</p>\n<h1 id=\"JtDdo\">2、调研</h1>\n<h2 id=\"DGRbQ\"><strong>2.1 Gerrit</strong></h2>\n<p>Gerrit 是一个Git服务器，它基于 git 版本控制系统，使用网页界面来进行审阅工作。Gerrit 旨在提供一个轻量级框架，用于在代码入库之前对每个提交进行审阅，更改将上载到 Gerrit，但实际上并不成为项目的一部分，直到它们被审阅和接受 。代码审查是Gerrit的核心功能，但仍是可选的，团队可以决定不进行代码审查而工作。</p>\n<p>Gerrit 是一个临时区域, 在提交的代码成为代码库的一部分之前, 可以对其修改进行检查。代码修改的作者将提交作为对 Gerrit 的更改。在Gerrit中，每个更改都存储在暂存区域中，可以在其中进行检查和查看。仅当它被批准并提交时，它才被应用到代码库中。</p>\n<p>其实，Gerrit 就相当于是在开发员将本地修改提交到代码仓库之前的一个审核工具。在这个审核工具中，你可以查看该提交者在本次的的提交中的修改，然后再决定是否可以将该修改提交给仓库。</p>\n<p id=\"u407817ef\"></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\e226290a181a58a98a3fa16fd4e87218.png\"/></p>\n<h2 id=\"cPHtM\">2.2 Check-style</h2>\n<p id=\"ucd4fdf5a\">CheckStyle作为检验代码规范的插件，除了可以使用配置默认给定的开发规范，如Sun的，Google的开发规范啊，也可以导入像阿里的开发规范的插件。事实上，每一个公司都存在不同的开发规范要求，所以大部分公司会给定自己的check规范，<strong>一般导入给定的checkstyle.xml文件即可实现。</strong></p>\n<h2 id=\"q3SKn\">Alibaba Java Coding Guidelines</h2>\n<p id=\"u45447dcf\">阿里巴巴制定的Java的编码规范，自动化的代码规范检查插件。</p>\n<p><a href=\"https://tyjt.yuque.com/attachments/yuque/0/2022/pdf/22011478/1662530412007-63dfad24-cc07-449e-9ca7-269e709292e2.pdf\" title=\"阿里巴巴Java开发手册终极版v1.3.0.pdf\">阿里巴巴Java开发手册终极版v1.3.0.pdf</a></p>\n<h2 id=\"wQ0WA\">2.3 findbugs</h2>\n<p id=\"uf107f169\">Findbugs是一个静态分析工具，它检查类或者JAR 文件，将字节码与一组缺陷模式进行对比以发现可能的问题，<strong>Findbugs不注重style及format，注重检测真正的bug及潜在的性能问题</strong></p>\n<h1 id=\"DQHro\">3、对比：</h1>\n<p id=\"u208ecdde\">（1）check-style 插件需要定义规范，Alibaba Java Coding Guidelines 集成了此功能</p>\n<p id=\"uafd6a3b5\">（2）找 BUG 的话，Findbugs不注重style及format，Findbugs 找 BUG 能力很强，可以自己安装用来检查代码。</p>\n<p id=\"u2e454795\">（3）Gerrit 作为git 插件，需要安装在git服务器上，在远程进行检查，不能在提交前进行修改，配置复杂，不符合当前需求</p>\n<p id=\"uefeb0b8b\">（4）检查代码规范的话，直接使用 Alibaba Java Coding Guidelines 就可以了，不需要配置，在本地运行即可检查</p>\n<h1 id=\"ipfdu\">4、Alibaba Java Coding Guidelines 插件使用说明</h1>\n<h2 id=\"fPZaE\">1、安装</h2>\n<p id=\"u048e0d63\">File &gt; Settings &gt; Plugins &gt; Marketplace 搜索 “Alibaba Java Coding Guidelines”，按照提示进行安装，然后重启即可。</p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\669edc27bf89e2fb9ce3f73492c3f73d.png\"/></p>\n<h2 id=\"u7Bp7\">2、使用</h2>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\f5593552d7164cc35190472edccf1f4b.png\"/></p>\n<p id=\"u44175e5b\"><strong>菜单功能：</strong></p>\n<p id=\"u39a7bf6e\">（1）编码规约扫描：开始扫描代码，默认选择根项目，也可先选中，后操作</p>\n<p id=\"u16c07bc4\">（2）打开/关闭实时检测功能：实时检测代码，一般机器性能比较好的话可以开启这项功能</p>\n<p id=\"u0e5e5892\">（3）切换语言至英文：中英文切换</p>\n<p id=\"u8dba2e80\"><strong>如果不想全部扫描，只扫描某一文件夹下的所有文件或者单一文件的话，选中该目录或者单一文件右键也会出现此功能按钮，效果就是扫描出该文件所包含的bug或者不规范。</strong></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\b9f433e7b6ab925db94b4c23321b24e9.png\"/></p>\n<h2 id=\"XQPsw\">3、idea 提交设置</h2>\n<p id=\"uf0a0eeec\">在提交的时候运行代码规范检查</p>\n<p id=\"u1c74d742\">取消提交模态窗口，把前面的√去掉就行</p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\56f915bf3c8c32a5815c4fa62f52dd3e.png\"/></p>\n<p id=\"u2e960647\">提交时打开检查</p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\d45e4a5ec22be429218e24e81d09d712.png\"/></p>\n<h2 id=\"A2M2i\">4、扫描结果</h2>\n<ol><li id=\"uc28a532f\">Blocker：阻断，问题等级最高，必须改！红色提醒</li><li id=\"u3bc05748\">Critical：推荐修改，不规范的代码，要改！橙黄提醒</li><li id=\"u9b2da412\">Major：参考，一般问题，可改可不改，建议还是改！浅黄提醒</li><li id=\"u0986288c\">扫出来之后每个都有详细的结果说明，怎么改，为什么改，以及代码具体位置</li><li id=\"u55065c4a\">如图</li></ol>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\3c76de7d23513fa6f015c3411db42b98.png\"/></p>\n<p id=\"u1780646a\">选中其中的一个问题条目，会出现如下内容，点击后可<strong>自动修复</strong></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\41317684613b742606ccebf9b975952c.png\"/></p>\n</div>\n</div>"}