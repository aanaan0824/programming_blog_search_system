{"blogid": "126575119", "writerAge": "码龄2年", "writerBlogNum": "68", "writerCollect": "1911", "writerComment": "1445", "writerFan": "6658", "writerGrade": "6级", "writerIntegral": "5475", "writerName": "AKA你的闺蜜", "writerProfileAdress": "writer_image\\profile_126575119.jpg", "writerRankTotal": "2912", "writerRankWeekly": "411", "writerThumb": "2641", "writerVisitNum": "79413", "blog_read_count": "323", "blog_time": "于 2022-09-06 12:34:14 发布", "blog_title": "MySQL：基本概念和基础操作", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"MySQL_1\"></a>MySQL数据库</h1>\n<h2><a id=\"1__3\"></a>1. 基础概念</h2>\n<h3><a id=\"11__5\"></a>1.1 什么是数据库</h3>\n<blockquote>\n<p>存储数据用文件就可以了，为什么还要弄个数据库？</p>\n</blockquote>\n<p>文件保存数据有以下几个缺点：</p>\n<ul><li>文件的安全性问题</li><li>文件不利于数据查询和管理</li><li>文件不利于存储海量数据</li><li>文件在程序中控制不方便</li></ul>\n<p>数据库存储介质：磁盘、内存。</p>\n<blockquote>\n<p>为了解决上述问题，专家们设计出更加利于管理数据的东西——数据库，它能更有效的管理数据。数据库的水平是衡量一个程序员水平的重要指标。</p>\n</blockquote>\n<ol><li>软件角度：可以认为数据库是程序和磁盘之间的软件层，帮助用户更方便的进行文件管理。数据库实际上也是用文件保存数据的。</li><li>文件角度：数据库实际上是一个网络服务器，我们通过数据库客户端访问数据库服务器后台的数据库库表结构。</li></ol>\n<p><img alt=\"\" src=\"image\\1930faa64ee843579c28278d8f962b7f.png\"/></p>\n<h3><a id=\"12__26\"></a>1.2 连接数据库</h3>\n<pre><code class=\"prism language-sql\">mysql <span class=\"token operator\">-</span>h <span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> <span class=\"token operator\">-</span>P <span class=\"token number\">3306</span> <span class=\"token operator\">-</span>u root <span class=\"token operator\">-</span>p\n</code></pre>\n<p><img alt=\"\" src=\"image\\fa87da0697674f25800bdc7c0c452b4a.png\"/></p>\n<p>所谓安装数据库，就是在机器上安装了一个数据库管理系统程序，这个管理程序可以管理多个数据库， 一般开发人员会针对每一个应用创建一个数据库。</p>\n<p>为保存应用中实体的数据，一般会在数据库中创建多个表，以保存程序中实体的数据。</p>\n<p>数据库服务器、数据库和表的关系如下:</p>\n<p><img alt=\"\" src=\"image\\aae6a4c316ab44f6955f1a9b9dc52fe2.png\"/></p>\n<p>查看MySQL数据库配置文件中的内容：</p>\n<img src=\"基本概念和基础操作.assets/数据库配置文件内容图示.png\"/>\n<p><code>datadir</code>指明的路径就是MySQL各种数据保存的位置。可以简单理解：</p>\n<ul><li><strong>创建库就是在该目录下创建一个目录</strong>；</li><li><strong>创建表就是在库目录下创建对应的文件</strong>。</li></ul>\n<p><img alt=\"\" src=\"image\\121e6663e7a84bc0976b78cecfe1e9a8.png\"/><img alt=\"在这里插入图片描述\" src=\"image\\55903b4e976a4ba9a25df790a969f404.png\"/></p>\n<h3><a id=\"13__55\"></a>1.3 基本操作</h3>\n<h4><a id=\"_57\"></a>库操作</h4>\n<ul><li>创建数据库</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> db_name<span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>使用数据库</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">use</span> db_name<span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>展示数据库</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> <span class=\"token keyword\">databases</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h4><a id=\"_77\"></a>表操作</h4>\n<ul><li>创建数据表</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span>\n\t<span class=\"token comment\"># ...</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>展示数据库</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> <span class=\"token keyword\">tables</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>查看表结构</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">desc</span> tb_name<span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>查看表内容</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">select</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">from</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li>插入一列</li></ul>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">insert</span> <span class=\"token keyword\">into</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> <span class=\"token punctuation\">(</span>parm1<span class=\"token punctuation\">,</span> parm2<span class=\"token punctuation\">)</span> <span class=\"token keyword\">values</span> <span class=\"token punctuation\">(</span>value1<span class=\"token punctuation\">,</span> value2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"14__111\"></a>1.4 数据逻辑存储</h3>\n<p><img alt=\"\" src=\"image\\e53deeb877b94ae1beb3ff31623098e2.png\"/></p>\n<p>MySQL是关系型数据库，数据存储是有逻辑的，按行列存储就是它的逻辑。通常我们把一行称之为一条记录。一列被称为属性内容。</p>\n<h3><a id=\"15_MySQL_118\"></a>1.5 MySQL架构</h3>\n<p>MySQL 是一个可移植的数据库，几乎能在当前所有的操作系统上运行，如 Unix/Linux、 Windows、 Mac 和<br/> Solaris。各种系统在底层实现方面各有不同，但是 MySQL 基本上能保证在各个平台上的物理体系结构的一致性。</p>\n<p><img alt=\"\" src=\"image\\4f02c8d45dee496fbfacb27e3398f146.png\"/></p>\n<p>最底层是硬件如磁盘等，再往上就是存储引擎，可以认为存储引擎就是封装底层文件的接口，并向上提供自己的接口，也就是帮助我们进行文件操作。</p>\n<p>SQL中有多种多样的存储引擎，最常见的就是ISAM和InooDB。这些存储引擎是支持“插拔”的，也就是想用那个引擎就用那个。</p>\n<p>再其上的分析器就是对发过来的SQL语句做词法语法分析，将SQL语句翻译成底层的文件操作。 这些都是被上层的MySQL服务程序管理的。再往上就是命令行终端或者提供给各种语言的接口。</p>\n<h3><a id=\"16_SQL_132\"></a>1.6 SQL分类</h3>\n<table><thead><tr><th>简称</th><th>名称</th><th>用途</th><th>代表</th></tr></thead><tbody><tr><td>DDL</td><td>数据定义语言</td><td>用来维护存储数据的结构</td><td>create, drop, alter</td></tr><tr><td>DML</td><td>数据操纵语言</td><td>用来对数据进行操作</td><td>insert, delete, update</td></tr><tr><td>DQL</td><td>数据查询语言</td><td>DML的分支</td><td>select</td></tr><tr><td>DCL</td><td>数据控制语言</td><td>主要负责权限管理和事务</td><td>grant, revoke, commit</td></tr></tbody></table>\n<p>SQL也有种类之分，因为不同的人使用SQL的需求不同。</p>\n<h3><a id=\"17__143\"></a>1.7 存储引擎</h3>\n<p>存储引擎是：数据库管理系统如何存储数据、如何为存储的数据建立索引和如何更新查询数据等技术的实现方法。 <strong>MySQL的核心就是插件式存储引擎，支持多种存储引擎</strong>。</p>\n<h4><a id=\"_147\"></a>查看存储引擎</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> engines \\G<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"image\\c19fbc9e34a342fa9de32a4d366f1d64.png\"/></p>\n<p> </p>\n<blockquote>\n<p>从现在开始，就是学习SQL语句了。</p>\n</blockquote>\n<h2><a id=\"2__160\"></a>2. 库的操作</h2>\n<h3><a id=\"21__162\"></a>2.1 创建数据库</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\">#1.</span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> db_name<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#2. </span>\n<span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">if</span> <span class=\"token operator\">not</span> <span class=\"token keyword\">exists</span><span class=\"token punctuation\">]</span> db_name <span class=\"token punctuation\">[</span>create_specification <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> create_specification<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span>\ncreate_specification:\n\t<span class=\"token punctuation\">[</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">character</span> <span class=\"token keyword\">set</span> charset_name\n    <span class=\"token punctuation\">[</span><span class=\"token keyword\">default</span><span class=\"token punctuation\">]</span> <span class=\"token keyword\">collate</span> <span class=\"token keyword\">set</span> collation_name\n</code></pre>\n<blockquote>\n<p>一般不推荐带这些选项，默认都是配置好的。</p>\n</blockquote>\n<ul><li>关键字可以大写，但大写不方便辨认，所以统一使用小写。</li><li><code>[]</code>表示可选项</li><li>CHARACTER SET：指定数据库采用的字符集</li><li>COLLATE：指定数据库字符集的校验规则</li></ul>\n<blockquote>\n<p>如果创建数据库没有指定字符集和校验规则时，首先是按配置文件中的来，如果没有，使用默认字符集：utf8，校验规则是：utf8_ general_ ci。</p>\n</blockquote>\n<h3><a id=\"22__183\"></a>2.2 字符集和校验规则</h3>\n<pre><code class=\"prism language-sql\">mysql<span class=\"token operator\">&gt;</span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> test1 <span class=\"token keyword\">charset</span><span class=\"token operator\">=</span>utf8 <span class=\"token keyword\">collate</span> utf8_general_ci<span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token keyword\">row</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n</code></pre>\n<p>数据存储时采用的规则是字符编码规则<code>utf8</code>，提取数据时采用的校验规则是<code>utf8_general_ci</code>。</p>\n<p>校验规则就是如何看待数据库中的数据，显然二者应该一一对应，否则可能出现乱码。校验规则还会影响条件查询结果和排序结果。</p>\n<p><img alt=\"\" src=\"image\\81dcb499f54e4d038d10cfe4027d5952.png\"/></p>\n<h4><a id=\"_197\"></a>查看字符集和校验规则</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\">#1. </span>\n<span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'charset_set_database'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">#2.</span>\n<span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'collationl_database'</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<h3><a id=\"23__206\"></a>2.3 操作数据库</h3>\n<h4><a id=\"_208\"></a>显示数据库</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> datbases<span class=\"token punctuation\">;</span>\n</code></pre>\n<h4><a id=\"_214\"></a>显示创建语句</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> <span class=\"token keyword\">create</span> <span class=\"token keyword\">database</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>db_name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"image\\2cfed8723cba4a41852e8dd20c212e6d.png\"/></p>\n<h4><a id=\"_223\"></a>修改数据库</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">alter</span> <span class=\"token keyword\">database</span> test1 <span class=\"token keyword\">charset</span><span class=\"token operator\">=</span>gbk<span class=\"token punctuation\">;</span>  <span class=\"token comment\"># 更改数据库字符编码</span>\n</code></pre>\n<blockquote>\n<p>数据库一旦建好，一般就不会再更改，可能会影响所有上层业务。</p>\n</blockquote>\n<h4><a id=\"_231\"></a>删除数据库</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">drop</span> <span class=\"token keyword\">database</span> test1<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"image\\f28084fbdcca4eb9b40331a5de579e0a.png\"/></p>\n<blockquote>\n<p>数据库删除会将库文件直接删除，所以不要随意删除数据库。</p>\n</blockquote>\n<h4><a id=\"_242\"></a>查看连接情况</h4>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">show</span> processlist<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"image\\1513948f47344998b403b7530b830927.png\"/></p>\n<h2><a id=\"3__251\"></a>3. 表的操作</h2>\n<h3><a id=\"31__253\"></a>3.1 创建表</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> {\n\tfield1 datatype<span class=\"token punctuation\">,</span>\n    field1 datatype<span class=\"token punctuation\">,</span>\n\tfield1 datatype\n} <span class=\"token punctuation\">[</span><span class=\"token keyword\">character</span> <span class=\"token keyword\">set</span> 字符集 <span class=\"token keyword\">collate</span> 校验规则 <span class=\"token keyword\">engine</span> 存储引擎<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<ul><li><code>field</code>：表示列名</li><li><code>datatype</code>：表示列的类型</li></ul>\n<p><img alt=\"\" src=\"image\\2950932dbc5a4076a47d8d498074ba94.png\"/></p>\n<h3><a id=\"32__269\"></a>3.2 查看表</h3>\n<pre><code class=\"prism language-sql\"> <span class=\"token keyword\">desc</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"\" src=\"image\\8a7147c4fb1d42a0a98bce645d3b3056.png\"/></p>\n<ul><li><code>Field</code>：字段名称</li><li><code>Type</code>：字段类型</li><li><code>Null</code>：是否允许为空</li><li><code>Key</code>：索引类型</li><li><code>Default</code>：默认值</li><li><code>Extra</code>：扩充</li></ul>\n<h3><a id=\"33__285\"></a>3.3 修改表</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 添加列</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">add</span>  <span class=\"token punctuation\">(</span> field1 datatype <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> field2 datatype <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n</code></pre>\n<blockquote>\n<p>在库表已经建立好的情况下，不建议修改表的结构，会很麻烦。</p>\n</blockquote>\n<ul><li>添加列</li></ul>\n<p><img alt=\"\" src=\"image\\57c3287bc9804220b9f94d28905f5ef2.png\"/></p>\n<ul><li>在指定列之后添加列</li></ul>\n<p><img alt=\"\" src=\"image\\13b81ea9454f4fb2b5ab548cc9276e3b.png\"/></p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 删除列</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">drop</span> <span class=\"token punctuation\">(</span> field1 datatype <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> field2 datatype <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n</code></pre>\n<blockquote>\n<p>删除列会删除该列的所有数据。</p>\n</blockquote>\n<ul><li>删除列</li></ul>\n<p><img alt=\"\" src=\"image\\b1f8652b4f7946ea9bd7c49744a811f6.png\"/></p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 修改列</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">modify</span> <span class=\"token punctuation\">(</span> field1 datatype <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> field2 datatype <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span>\n</code></pre>\n<ul><li>修改列类型</li></ul>\n<p><img alt=\"\" src=\"image\\ba54a6db89514837915851e39cb8622a.png\"/></p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 更改表名称</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name_old<span class=\"token punctuation\">`</span></span> <span class=\"token keyword\">rename</span> <span class=\"token keyword\">to</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name_new<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span> \n</code></pre>\n<p><img alt=\"\" src=\"image\\e7a9cdd4c71541eda63a679530518a9f.png\"/></p>\n<pre><code class=\"prism language-sql\"><span class=\"token comment\"># 更改列名称</span>\n<span class=\"token keyword\">alter</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span> change <span class=\"token identifier\"><span class=\"token punctuation\">`</span>field_name_old<span class=\"token punctuation\">`</span></span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>field_name_new<span class=\"token punctuation\">`</span></span> datatype<span class=\"token punctuation\">;</span>\n</code></pre>\n<blockquote>\n<p>列名不离类型</p>\n</blockquote>\n<p><img alt=\"\" src=\"image\\98f684d3b4a5461c84434abef9652d19.png\"/></p>\n<h3><a id=\"34__345\"></a>3.4 删除表</h3>\n<pre><code class=\"prism language-sql\"><span class=\"token keyword\">drop</span> <span class=\"token keyword\">table</span> <span class=\"token identifier\"><span class=\"token punctuation\">`</span>tb_name<span class=\"token punctuation\">`</span></span><span class=\"token punctuation\">;</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}