{"blogid": "125312246", "writerAge": "码龄4年", "writerBlogNum": "8", "writerCollect": "14", "writerComment": "1", "writerFan": "2", "writerGrade": "2级", "writerIntegral": "212", "writerName": "大只佬999", "writerProfileAdress": "writer_image\\profile_125312246.jpg", "writerRankTotal": "85193", "writerRankWeekly": "753728", "writerThumb": "3", "writerVisitNum": "12936", "blog_read_count": "1465", "blog_time": "已于 2022-06-16 21:24:27 修改", "blog_title": "CentOS7安装PHP详细教程", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><strong>1、安装基本依赖软件：</strong></p>\n<pre><code>yum install zlib-devel libxml2-devel libjpeg-devel libjpeg-turbo-devel freetype-devel libpng-devel gd-devel libcurl-devel libxslt-devel libxslt-devel -y</code></pre>\n<p><strong>2、安装libiconv软件：</strong></p>\n<pre><code>cd /data/soft\nwget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz\ntar zxf libiconv-1.14.tar.gz\ncd libiconv-1.14\n./configure --prefix=/usr/local/libiconv\nmake\nmake install\n</code></pre>\n<p><strong>3、安装其他软件包：</strong></p>\n<pre><code>wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo\nyum -y install libmcrypt-devel mhash mcrypt</code></pre>\n<p><strong>4、安装php：</strong></p>\n<pre><code>cd /data/soft/\ntar xf php-7.4.30.tar.gz\ncd php-7.4.30</code></pre>\n<p>5、在解压后的PHP目录内执行：</p>\n<pre><code>ln -s /data/server/mysql/lib/libmysqlclient.so.18  /usr/lib64/\ntouch ext/phar/phar.phar\n\n./configure \\\n--prefix=/data/server/php-7.4.30 \\\n--with-mysql=/data/server/mysql \\\n--with-pdo-mysql=mysqlnd \\\n--with-iconv-dir=/usr/local/libiconv \\\n--with-freetype-dir \\\n--with-jpeg-dir \\\n--with-png-dir \\\n--with-zlib \\\n--with-libxml-dir=/usr \\\n--enable-xml \\\n--disable-rpath \\\n--enable-bcmath \\\n--enable-shmop \\\n--enable-sysvsem \\\n--enable-inline-optimization \\\n--with-curl \\\n--enable-mbregex \\\n--enable-fpm \\\n--enable-mbstring \\\n--with-mcrypt \\\n--with-gd \\\n--enable-gd-native-ttf \\\n--with-openssl \\\n--with-mhash \\\n--enable-pcntl \\\n--enable-sockets \\\n--with-xmlrpc \\\n--enable-zip \\\n--enable-soap \\\n--enable-short-tags \\\n--enable-static \\\n--with-xsl \\\n--with-fpm-user=www \\\n--with-fpm-group=www \\\n--enable-ftp\n#编译时可能会出错，先执行上面的操作再编译安装\nmake\nmake install             </code></pre>\n<p><strong>6、php文件配置</strong></p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">创建目录，生成程序文件，这里失败的话/data/server下就不会有php的目录</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\"><span style=\"color:#fe2c24;\"><strong>注意：如果server下没有php那么从上面报错的地方一步步纠正，直到有php才算安装成功</strong></span></p>\n<p>[root@localhost php-7.4.30]# ls /data/server/</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">mysql  mysql-5.6.35-linux-glibc2.5-x86_64  nginx  php-7.4.30</p>\n<p style=\"margin-left:.0001pt;text-align:justify;\">7、创建一个软链接，方便使用，更新软件时，重新创建软链接即可</p>\n<pre><code>cd /data/server\n\nln -s php-7.4.30 php</code></pre>\n<p style=\"margin-left:.0001pt;text-align:justify;\">8、把解压包内的php解析文件拷贝到php安装目录下</p>\n<pre><code>cd /data/soft/php-7.4.30\n\ncp php.ini-production /data/server/php/lib/php.ini</code></pre>\n<p> 9、修改php.ini文件，开启session功能</p>\n<pre><code>vim /data/server/php/lib/php.ini\n...\n[Session]\n; Handler used to store/retrieve data.\n; http://php.net/session.save-handler\nsession.save_handler = files\n原内容：\n;session.save_path = \"/tmp\n修改后内容：\nsession.save_path = \"/tmp</code></pre>\n<p>10、复制php-fpm的配置文件，默认没有该文件但是有一个备份文件</p>\n<pre><code>cd /data/server/php/etc/\n\ncp php-fpm.conf.default php-fpm.conf</code></pre>\n<p>11、启动php，和nginx一样，使用程序目录下的启动命令来启动php，然后检查进程和端口号即可</p>\n<pre><code>/data/server/php/sbin/php-fpm \nnetstat -tnulp | grep php-fpm</code></pre>\n<h1><img alt=\"\" height=\"43\" src=\"image\\7ab0c1468a2645298cb287f08a993999.png\" width=\"1199\"/></h1>\n<p> 如果报错：</p>\n<h1 id=\"articleContentId\">报错： No pool defined. at least one pool section must be specified in config file</h1>\n<p>解决方法：<br/> 进入安装目录：/usr/local/php/etc/php-fpm.d<br/> 拷贝www.conf.default为www.conf即可。</p>\n<pre><code>[root@localhost php-fpm.d]# cp www.conf.default  www.conf\n[root@localhost php-7.4.20]# /etc/init.d/php-fpm start Starting php-fpm  done\n</code></pre>\n<p>至此php安装成功结束</p>\n</div>\n</div>"}