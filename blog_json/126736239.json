{"blogid": "126736239", "writerAge": "ç é¾„6å¹´", "writerBlogNum": "21", "writerCollect": "167", "writerComment": "196", "writerFan": "270", "writerGrade": "3çº§", "writerIntegral": "748", "writerName": "åŒ—äº¬å‰ç«¯ å¹´è–ª100w+", "writerProfileAdress": "writer_image\\profile_126736239.jpg", "writerRankTotal": "34708", "writerRankWeekly": "734", "writerThumb": "236", "writerVisitNum": "3438", "blog_read_count": "226", "blog_time": "å·²äºÂ 2022-09-07 08:00:34Â ä¿®æ”¹", "blog_title": "uniappï½œå¾®ä¿¡å°ç¨‹åºè·å–å½“å‰åŸå¸‚åç§°--é€†åœ°å€è§£æ", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night-eighties\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<blockquote>\n<p><em>å…­å¹´ä»£ç ä¸¤èŒ«èŒ«ï¼Œä¸æ€é‡ï¼Œè‡ªéš¾å¿˜</em><br/> 6å¹´èµ„æ·±å‰ç«¯ä¸»ç®¡ä¸€æšï¼Œåªåˆ†äº«æŠ€æœ¯å¹²è´§ï¼Œé¡¹ç›®å®æˆ˜ç»éªŒ<br/> <strong>å…³æ³¨åšä¸»ä¸è¿·è·¯~</strong></p>\n</blockquote>\n<p></p>\n<div class=\"toc\">\n<h3>æ–‡ç« ç›®å½•</h3>\n<ul><li><a href=\"#_7\">é—®é¢˜</a></li><li><a href=\"#_9\">è§£å†³æ­¥éª¤</a></li><li><ul><li><a href=\"#_10\">çœ‹æ–‡æ¡£</a></li><li><a href=\"#_38\">é€†åœ°å€è§£æ</a></li><li><ul><li><a href=\"#1__39\">1. åˆ›å»ºåº”ç”¨</a></li><li><a href=\"#2_uniapp_50\">2. uniappé…ç½®</a></li><li><a href=\"#3__66\">3. ä»£ç éƒ¨åˆ†</a></li></ul>\n</li></ul>\n</li><li><a href=\"#_112\">æ€»ç»“</a></li></ul>\n</div>\n<p></p>\n<hr/>\n<h1><a id=\"_7\"></a>é—®é¢˜</h1>\n<p>uniappå¼€å‘çš„å°ç¨‹åºéœ€è¦è·å–å½“å‰åŸå¸‚åç§°</p>\n<h1><a id=\"_9\"></a>è§£å†³æ­¥éª¤</h1>\n<h2><a id=\"_10\"></a>çœ‹æ–‡æ¡£</h2>\n<p>å½“ç„¶æ˜¯çœ‹uniappæ–‡æ¡£ï¼Œæˆ‘ä»¬æŸ¥åˆ°æœ‰æä¾›ç›¸å…³çš„API,å³<code>uni.getLocation(OBJECT)</code>ï¼Œè·å–å½“å‰çš„åœ°ç†ä½ç½®ã€é€Ÿåº¦ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\60e55b3644d74d5d9894908ac6579223.png\"/><br/> æˆ‘ä»¬è¯•è¯•å§</p>\n<pre><code class=\"prism language-bash\">uni.getLocation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n\ttype: <span class=\"token string\">'wgs84'</span>,\n\tgeocode:true,\n\tsuccess: <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\tconsole.log<span class=\"token punctuation\">(</span><span class=\"token string\">'å½“å‰ä½ç½®çš„ç»åº¦ï¼š'</span> + res.longitude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tconsole.log<span class=\"token punctuation\">(</span><span class=\"token string\">'å½“å‰ä½ç½®çš„çº¬åº¦ï¼š'</span> + res.latitude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre>\n<p>æˆ‘ä»¬å‘ç°åªèƒ½è¿”å›ç»çº¬åº¦ä¿¡æ¯ï¼Œå¹¶ä¸ä¼šè¿”å›åŸå¸‚ä¿¡æ¯ã€‚<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\cc3d906cb72947c1970789a33c8d36eb.png\"/><br/> <mark>åŸæ¥æ˜¯åªæœ‰appæ‰æ”¯æŒgeocode</mark><br/> å“ˆå“ˆäº‹æƒ…æ²¡æœ‰æƒ³è±¡ä¸­é‚£ä¹ˆç®€å•~</p>\n<hr/>\n<p><strong>æ€è€ƒingâ€¦</strong></p>\n<p>æŸ¥é˜…äº†ç›¸å…³èµ„æ–™ï¼Œ<code>åŸæ¥æ˜¯ä½ç½®è¯¦ç»†ä¿¡æ¯çš„ä¸€äº›ä¿å¯†åè®®ï¼Œå¹¶ä¸èƒ½ç›´æ¥è·å–åˆ°</code>ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦é€šè¿‡ç»çº¬åº¦ï¼Œåˆ©ç”¨è…¾è®¯åœ°å›¾JavaScript SDKé€†åœ°å€è§£æ,å³è¾“å…¥åæ ‡è¿”å›åœ°ç†ä½ç½®ä¿¡æ¯ã€‚</p>\n<hr/>\n<p><strong>æœ‰æ–¹æ³•äº†ï¼Œå¼€æ•´</strong></p>\n<h2><a id=\"_38\"></a>é€†åœ°å€è§£æ</h2>\n<h3><a id=\"1__39\"></a>1. åˆ›å»ºåº”ç”¨</h3>\n<p>æ‰“å¼€<a href=\"https://lbs.qq.com/\">è…¾è®¯åœ°å›¾å¼€æ”¾å¹³å°</a>ï¼Œåˆ›å»ºåº”ç”¨<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\51eba9571bc24a53aa47a674ac73927d.png\"/><br/> ç„¶å<br/> æ§åˆ¶å° -&gt;åº”ç”¨ç®¡ç† -&gt; æˆ‘çš„åº”ç”¨ -&gt;æ·»åŠ key-&gt; å‹¾é€‰<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8cb1af3f4179410b969fdd73abb342bb.png\"/><br/> <code>å°ç¨‹åºSDKéœ€è¦ç”¨åˆ°webserviceAPIçš„éƒ¨åˆ†æœåŠ¡ï¼Œæ‰€ä»¥ä½¿ç”¨è¯¥åŠŸèƒ½çš„KEYéœ€è¦å…·å¤‡ç›¸åº”çš„æƒé™</code><br/> <code>æˆæƒipå³å½“å‰è¿æ¥æœåŠ¡çš„IPåœ°å€ï¼ˆæ³¨æ„ï¼šä¸Šçº¿åè¿™ä¸ªä¸€å®šè¦æ¢æˆä¸Šçº¿IPåœ°å€å“¦ï¼‰</code><br/> <code>å¡«å…¥å¾®ä¿¡å°ç¨‹åºappid</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\aa032369f61544eca75be517c26baa82.png\"/><br/> ç°åœ¨æœ‰äº†åœ°å›¾ç§˜é’¥key</p>\n<h3><a id=\"2_uniapp_50\"></a>2. uniappé…ç½®</h3>\n<ol><li>pages.jsoné…ç½®<br/> åŠ å…¥ä»¥ä¸‹é…ç½®é¡¹ï¼Œç”¨äºç”³è¯·è·å¾—ä½ç½®æƒé™</li></ol>\n<pre><code class=\"prism language-bash\"><span class=\"token string\">\"permission\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n\t<span class=\"token string\">\"scope.userLocation\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token string\">\"desc\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"ä½ çš„ä½ç½®ä¿¡æ¯å°†ç”¨äºå°ç¨‹åºä½ç½®æ¥å£çš„æ•ˆæœå±•ç¤º\"</span> \n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<ol start=\"2\"><li>uniappé…ç½®<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8f78e23be9c74433b0cff458e49b4d57.png\"/><br/> <code>è¿™é‡Œå¡«å†™çš„æè¿°ä¿¡æ¯å°±æ˜¯å¾®ä¿¡å¼¹èµ·ä¿¡æ¯å¾®ä¿¡æˆæƒå¼¹æ¡†çš„æè¿°ä¿¡æ¯</code><br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\d13b689b6c7443cf9d180335c23a259e.png\"/></li></ol>\n<h3><a id=\"3__66\"></a>3. ä»£ç éƒ¨åˆ†</h3>\n<p><a href=\"https://mapapi.qq.com/web/miniprogram/JSSDK/qqmap-wx-jssdk1.2.zip\">ä¸‹è½½å¾®ä¿¡å°ç¨‹åºJavaScriptSDK</a></p>\n<pre><code class=\"prism language-bash\">var QQMapWX <span class=\"token operator\">=</span> require<span class=\"token punctuation\">(</span><span class=\"token string\">'@/utils/qqmap-wx-jssdk.min.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n// å®ä¾‹åŒ–APIæ ¸å¿ƒç±»\nvar qqmapsdk <span class=\"token operator\">=</span> new QQMapWX<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n    key: <span class=\"token string\">''</span> // å¿…å¡«\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p><code>keyå³ç”³è¯·çš„è…¾è®¯åœ°å›¾ç§˜é’¥key</code></p>\n<pre><code class=\"prism language-bash\">uni.getLocation<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\ttype: <span class=\"token string\">'gcj02'</span>,\n\t\t\tgeocode: true,\n\t\t\tsuccess: <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t//é€†åœ°å€è§£æ  åæ ‡è½¬åœ°å€ä¿¡æ¯\n\t\t\t\tqqmapsdk.reverseGeocoder<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t  //Objectæ ¼å¼\n\t\t\t\t       location: <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t         latitude: res.latitude,\n\t\t\t\t         longitude: res.longitude\n\t\t\t\t       <span class=\"token punctuation\">}</span>, \n\t\t\t\t    success: function<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>//æˆåŠŸåçš„å›è°ƒ\n\t\t\t\t\t   const mapdata<span class=\"token operator\">=</span>res.result.ad_info<span class=\"token punctuation\">;</span>\n\t\t\t\t\t   that.city <span class=\"token operator\">=</span> mapdata.city<span class=\"token punctuation\">;</span>\n\t\t\t\t   <span class=\"token punctuation\">}</span>,fail: function<span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t       console.error<span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t     <span class=\"token punctuation\">}</span>,\n\t\t\t\t     complete: function<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t       //console.log<span class=\"token punctuation\">(</span>res<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t     <span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<p>ç¼–è¯‘<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\8a942c366cf849f187987c82be6e1f54.png\"/></p>\n<p>æˆ‘ä»¬çœ‹è¿”å›ä¿¡æ¯<br/> <img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\3d1c0ecd349f4c4386c65b27843e9c37.png\"/><br/> ç°åœ¨æ˜¯æœ‰è¿”å›å½“å‰ä½ç½®è¯¦ç»†ä¿¡æ¯äº†ï¼Œå½“å‰ä¹ŸåŒ…æ‹¬åŸå¸‚åç§°ã€‚</p>\n<p><strong>é—®é¢˜è§£å†³ï¼</strong></p>\n<hr/>\n<h1><a id=\"_112\"></a>æ€»ç»“</h1>\n<p>é‡åˆ°é—®é¢˜å¹¶ä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯åœæ»ä¸å‰ï¼ŒçŸ¥éš¾è€Œé€€ã€‚åªæœ‰å‘ç°é—®é¢˜æ‰èƒ½è§£å†³é—®é¢˜ï¼Œæ‰ä¼šå¾—åˆ°æˆé•¿å’Œé”»ç‚¼ã€‚äººç”Ÿçš„è·¯æ€»æ˜¯ä¸€æ³¢ä¸‰æŠ˜ï¼Œä»£ç ä¹Ÿæ˜¯ï¼Œé£é›¨ä¹‹åæ€»ä¼šè§åˆ°å½©è™¹çš„ï¼ŒåŠ æ²¹ï¼</p>\n<blockquote>\n<p>âœ¨åŸ åˆ› ä¸ æ˜“ ï¼Œ è¿˜ å¸Œ æœ› å„ ä½ æ”¯ æŒ<br/> ğŸ‘ ç‚¹ èµ ï¼Œ ä½  çš„ è®¤ å¯ æ˜¯ æˆ‘ åˆ› ä½œ çš„ åŠ¨ åŠ› ï¼<br/> â­ï¸ æ”¶ è— ï¼Œ ä½  çš„ é’ ç æ˜¯ æˆ‘ åŠª åŠ› çš„ æ–¹ å‘ ï¼<br/> âœï¸ è¯„ è®º ï¼Œ ä½  çš„ æ„ è§ æ˜¯ æˆ‘ è¿› æ­¥ çš„ è´¢ å¯Œ ï¼</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}