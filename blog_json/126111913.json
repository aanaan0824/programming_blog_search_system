{"blogid": "126111913", "writerAge": "码龄83天", "writerBlogNum": "61", "writerCollect": "1544", "writerComment": "1930", "writerFan": "2802", "writerGrade": "6级", "writerIntegral": "4836", "writerName": "小余努力搬砖", "writerProfileAdress": "writer_image\\profile_126111913.jpg", "writerRankTotal": "3430", "writerRankWeekly": "52", "writerThumb": "1831", "writerVisitNum": "29170", "blog_read_count": "453", "blog_time": "已于 2022-08-15 22:14:47 修改", "blog_title": "原生JavaScript实现本地存储（localStorage）和会话存储（sessionStorage）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%80%E3%80%81%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D\">一、简单介绍</a></p>\n<p id=\"%E4%BA%8C%E3%80%81localStorage%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%BA%8C%E3%80%81localStorage%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8\">二、localStorage本地存储</a></p>\n<p id=\"%E4%B8%89%E3%80%81sessionStorage%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%89%E3%80%81sessionStorage%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8\">三、sessionStorage会话存储</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1>一、简单介绍</h1>\n<p>本地存储和会话存储的目的，是将所输入的文件存入到浏览器中，在需要的时候，直接调用，但是本地存储和会话存储有着一定的区别，本地存储，在不主动删除的情况下,会一直保留在浏览器中，会话存储是，当前保存的内容，页面刷新还会保留在浏览器中，但是关闭页面在打开时，会发现没有数据了。这是他们两的用处和区别。</p>\n<h1 id=\"%E4%BA%8C%E3%80%81localStorage%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8\">二、localStorage本地存储</h1>\n<p>如下代码</p>\n<p>我们先给button一个监听事件，让我们有存入的动作</p>\n<p>这里是想在提交后也能在页面上显示，所有定义了一个li来吧input的value值赋值到ul里面</p>\n<p>这里使用了insertBefore在添加时，会在最上方</p>\n<p>这里arr是自己定义的数组</p>\n<p>存储和获取都是通过函数封装</p>\n<p>savaData(arr)就是将input的值存储到了浏览器</p>\n<p><strong>window.localStorage.setItem('input', JSON.stringify(title))</strong> 保存的代码title是形参，input自己取得</p>\n<p>获取<strong>let data = window.localStorage.getItem('input')</strong> 上面取的input</p>\n<p>这里有个if判断是判断这里data是否有内容，有就return JSON.parse(data) 没有就return[]主要是得到所有内容的数组</p>\n<p>代码段也有注释解释</p>\n<pre><code class=\"language-html\">&lt;style&gt;\n        li {\n            list-style: none;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;input type=\"text\" placeholder=\"输入内容\"&gt;&lt;button&gt;提交&lt;/button&gt;\n    &lt;hr&gt;\n    &lt;ul&gt;&lt;/ul&gt;\n    &lt;script&gt;\n        let input = document.querySelector('input')\n        let btn = document.querySelector('button')\n        let ul = document.querySelector('ul')\n        btn.addEventListener('click', function () {\n            let arr = getData()  //调用内容，是为了获得已经存入的内容，不然会出现内容覆盖\n            let li = document.createElement('li')\n            li.innerHTML = input.value; //表单值给到li\n            ul.insertBefore(li, ul.children[0]);//在把值给到ul添加值会在第一个\n            arr.push(input.value)\n            saveData(arr)\n            input.value = '' //为好看，输入过后表单的内容自动清空\n        })\n        function saveData(title) {\n            window.localStorage.setItem('input', JSON.stringify(title))\n        }\n        function getData(get) {\n            let data = window.localStorage.getItem('input')\n            console.log(data);//打印所取到的值，但是第一次为空，因为浏览器里面没有值\n            if (data != null) {\n                return JSON.parse(data)\n            } else {\n                return []\n            }\n        }\n    &lt;/script&gt;\n&lt;/body&gt;</code></pre>\n<p></p>\n<h1 id=\"%E4%B8%89%E3%80%81sessionStorage%E4%BC%9A%E8%AF%9D%E5%AD%98%E5%82%A8\">三、sessionStorage会话存储</h1>\n<p>与本地存储的使用没有区别，只要在跟换单词即可</p>\n<p><strong>window.sessionStorage.setItem('input', JSON.stringify(title))</strong></p>\n<p><strong>let data = window.sessionStorage.getItem('input')</strong></p>\n<pre><code class=\"language-html\">    &lt;style&gt;\n        li {\n            list-style: none;\n        }\n    &lt;/style&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;input type=\"text\" placeholder=\"输入内容\"&gt;&lt;button&gt;提交&lt;/button&gt;\n    &lt;hr&gt;\n    &lt;ul&gt;&lt;/ul&gt;\n    &lt;script&gt;\n        let input = document.querySelector('input')\n        let btn = document.querySelector('button')\n        let ul = document.querySelector('ul')\n        btn.addEventListener('click', function () {\n            let arr = getData()\n            let li = document.createElement('li')\n            li.innerHTML = input.value;\n            ul.insertBefore(li, ul.children[0]);\n            arr.push(input.value)\n            saveData(arr)\n            input.value = ''\n        })\n        function saveData(title) {\n            window.sessionStorage.setItem('input', JSON.stringify(title))\n        }\n        function getData(get) {\n            let data = window.sessionStorage.getItem('input')\n            console.log(data);\n            if (data != null) {\n                return JSON.parse(data)\n            } else {\n                return []\n            }\n        }\n\n    &lt;/script&gt;\n&lt;/body&gt;</code></pre>\n<p></p>\n<p></p>\n</div>\n</div>"}