{"blogid": "126477198", "writerAge": "码龄12年", "writerBlogNum": "478", "writerCollect": "5228", "writerComment": "1452", "writerFan": "3089", "writerGrade": "7级", "writerIntegral": "21492", "writerName": "IT技术分享社区", "writerProfileAdress": "writer_image\\profile_126477198.jpg", "writerRankTotal": "384", "writerRankWeekly": "83", "writerThumb": "2226", "writerVisitNum": "3000618", "blog_read_count": "293", "blog_time": "于 2022-08-23 08:32:43 发布", "blog_title": "C#：Winfrom 实现DataGridView 自定义分页", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<div>\n<div>\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"-toc\" style=\"margin-left:0px;\"></p>\n<p id=\"%E5%AE%89%E8%A3%85Dapper%E4%BE%9D%E8%B5%96-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%AE%89%E8%A3%85Dapper%E4%BE%9D%E8%B5%96\">安装Dapper依赖</a></p>\n<p id=\"%E5%AE%89%E8%A3%85SQLite%E4%BE%9D%E8%B5%96-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%AE%89%E8%A3%85SQLite%E4%BE%9D%E8%B5%96\">安装SQLite依赖</a></p>\n<p id=\"%E6%96%B0%E5%BB%BASQLite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6-toc\" style=\"margin-left:40px;\"><a href=\"#%E6%96%B0%E5%BB%BASQLite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6\">新建SQLite数据库文件</a></p>\n<p id=\"%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B-toc\" style=\"margin-left:40px;\"><a href=\"#%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B\">主要代码示例</a></p>\n<p id=\"%E8%BF%90%E8%A1%8C%E7%95%8C%E9%9D%A2-toc\" style=\"margin-left:40px;\"><a href=\"#%E8%BF%90%E8%A1%8C%E7%95%8C%E9%9D%A2\">运行界面</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<p class=\"img-center\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/img_convert/80a2ac61f1793099a18df2634e651b75.webp?x-oss-process=image/format,png\"/></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">今天给大家分享Winform实现DataGridView 自定义分页的案例，感兴趣的朋友可以一起来学习一下。</span></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">采用技术：C#+Winform+Dapper+SQLite。</span></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">本次为了避免安装数据库的繁琐，采用了SQLite数据库。</span></p>\n<ol><li> <h2 id=\"%E5%AE%89%E8%A3%85Dapper%E4%BE%9D%E8%B5%96\" style=\"text-align:left;\"><strong><span style=\"color:#1a1a1a;\">安装Dapper依赖</span></strong></h2> </li></ol>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">命令如下：</span></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">Install-Package Dapper -Version 1.40.0</span></p>\n<p style=\"text-align:left;\"></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\2e98b85ef5bf52c16c509144913071a3.png\"/></p>\n<p style=\"text-align:left;\"></p>\n<h2 id=\"%E5%AE%89%E8%A3%85SQLite%E4%BE%9D%E8%B5%96\" style=\"text-align:left;\"><strong><span style=\"color:#1a1a1a;\">1、安装SQLite依赖</span></strong></h2>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">命令如下：</span></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">Install-Package </span><span style=\"color:#333333;\">System.Data.SQLite.Core</span><span style=\"color:#333333;\"> -Version </span><span style=\"color:#333333;\">1.0.116</span></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\bea854367949f4426af2f5383dbc4095.png\"/></p>\n<h2 style=\"text-align:left;\"></h2>\n<h2 id=\"%E6%96%B0%E5%BB%BASQLite%E6%95%B0%E6%8D%AE%E5%BA%93%E6%96%87%E4%BB%B6\" style=\"text-align:left;\"><strong><span style=\"color:#1a1a1a;\">2、新建SQLite数据库文件</span></strong></h2>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">目前数据库文件放在bin/debug 目录下，文件名为user.db ，大家不需要在新建了。</span></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">新建表脚本</span></p>\n<p style=\"text-align:left;\"></p>\n<pre><span style=\"background-color:#fafafa;\"><code><span style=\"color:#0077aa;\">CREATE</span> <span style=\"color:#0077aa;\">TABLE</span> <span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span>\n  <span style=\"color:#669900;\">\"Id\"</span> <span style=\"color:#0077aa;\">INTEGER</span> <span style=\"color:#9a6e3a;\">NOT</span> <span style=\"color:#990055;\">NULL</span> <span style=\"color:#0077aa;\">PRIMARY</span> <span style=\"color:#0077aa;\">KEY</span><span style=\"color:#000000;\"> AUTOINCREMENT</span><span style=\"color:#999999;\">,</span>\n  <span style=\"color:#669900;\">\"UserName\"</span> <span style=\"color:#0077aa;\">TEXT</span> <span style=\"color:#9a6e3a;\">NOT</span> <span style=\"color:#990055;\">NULL</span><span style=\"color:#999999;\">,</span>\n  <span style=\"color:#669900;\">\"Age\"</span> <span style=\"color:#0077aa;\">integer</span> <span style=\"color:#9a6e3a;\">NOT</span> <span style=\"color:#990055;\">NULL</span><span style=\"color:#999999;\">,</span>\n  <span style=\"color:#669900;\">\"Address\"</span> <span style=\"color:#0077aa;\">TEXT</span> <span style=\"color:#9a6e3a;\">NOT</span> <span style=\"color:#990055;\">NULL</span><span style=\"color:#999999;\">,</span>\n  <span style=\"color:#669900;\">\"Hobby\"</span> <span style=\"color:#0077aa;\">TEXT</span><span style=\"color:#999999;\">,</span>\n  <span style=\"color:#0077aa;\">UNIQUE</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span> <span style=\"color:#0077aa;\">ASC</span><span style=\"color:#999999;\">)</span>\n<span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">1</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明1'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">2</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明2'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">3</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明3'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">4</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明4'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">5</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明5'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">6</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明6'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">7</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明7'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">8</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明8'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">9</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明9'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">10</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明10'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">11</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明11'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n<span style=\"color:#0077aa;\">INSERT</span> <span style=\"color:#0077aa;\">INTO</span> <span style=\"color:#669900;\">\"main\"</span><span style=\"color:#999999;\">.</span><span style=\"color:#669900;\">\"user\"</span> <span style=\"color:#999999;\">(</span><span style=\"color:#669900;\">\"Id\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"UserName\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Age\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Address\"</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">\"Hobby\"</span><span style=\"color:#999999;\">)</span> <span style=\"color:#0077aa;\">VALUES</span> <span style=\"color:#999999;\">(</span><span style=\"color:#990055;\">12</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'小明12'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#990055;\">35</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'苏州'</span><span style=\"color:#999999;\">,</span> <span style=\"color:#669900;\">'读书'</span><span style=\"color:#999999;\">);</span>\n\n\n</code></span></pre>\n<p></p>\n<h2 id=\"%E4%B8%BB%E8%A6%81%E4%BB%A3%E7%A0%81%E7%A4%BA%E4%BE%8B\" style=\"text-align:left;\"><strong><span style=\"color:#1a1a1a;\">3、主要代码示例</span></strong></h2>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">新建</span><span style=\"color:#333333;\">DBUtils.cs 数据库帮助类</span></p>\n<p style=\"text-align:left;\"></p>\n<pre><span style=\"background-color:#fafafa;\">\n\n<code><span style=\"color:#000000;\">        public static SQLiteConnection GetSQLiteConnection()</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            //Sqlite数据库地址&lt;br&gt;            </span>\n<span style=\"color:#000000;\">            string str = AppDomain.CurrentDomain.BaseDirectory;</span>\n<span style=\"color:#000000;\">            var con = new SQLiteConnection(\"Data Source=\" + str + \"DB\\\\user.db\");</span>\n<span style=\"color:#000000;\">            return con;</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 分页查询</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"pageIndex\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"pageSize\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;returns&gt;&lt;/returns&gt;</span>\n\n\n<span style=\"color:#000000;\">        public static DataTable GetListTable(int pageIndex, int pageSize, ref int recordCount)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n\n\n<span style=\"color:#000000;\">            using (IDbConnection cnn = new SQLiteConnection(GetSQLiteConnection()))</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                pageIndex --;</span>\n<span style=\"color:#000000;\">                DataTable dt = new DataTable();</span>\n<span style=\"color:#000000;\">                cnn.Open();               </span>\n\n\n<span style=\"color:#000000;\">                StringBuilder sbCount = new StringBuilder();</span>\n<span style=\"color:#000000;\">                sbCount.Append(@\"SELECT count(id) recordCount from user where 1 = 1\");</span>\n<span style=\"color:#000000;\">                StringBuilder sb = new StringBuilder();</span>\n<span style=\"color:#000000;\">                sb.Append(@\"SELECT * from user where 1=1 \");          </span>\n\n\n<span style=\"color:#000000;\">                recordCount = cnn.Query&lt;int&gt;(sbCount.ToString()).FirstOrDefault();</span>\n<span style=\"color:#000000;\">                sb.Append(\" order by id asc \");</span>\n<span style=\"color:#000000;\">                sb.AppendFormat(\" limit {0} offset {1} \", pageSize, pageSize * pageIndex);</span>\n<span style=\"color:#000000;\">                var reader = cnn.ExecuteReader(sb.ToString());</span>\n<span style=\"color:#000000;\">                dt.Load(reader);</span>\n<span style=\"color:#000000;\">                return dt;</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">        }     </span>\n<span style=\"color:#000000;\">    }</span>\n</code></span></pre>\n<p></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">新建Form2窗体文件，主要代码如下：</span></p>\n<p style=\"text-align:left;\"></p>\n<pre><span style=\"background-color:#fafafa;\"><code><span style=\"color:#000000;\"> /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 每页记录数</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        private int pageSize = 3;</span>\n\n\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 总记录数</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        private int recordCount = 0;</span>\n\n\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 总页数</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        private int pageCount = 0;</span>\n\n\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 当前页</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        private int currentPage = 1;</span>\n<span style=\"color:#000000;\">        public Form2()</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            InitializeComponent();</span>\n<span style=\"color:#000000;\">        }</span>\n\n\n<span style=\"color:#000000;\">        private void Form2_Load(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            txtCurrentPage.Text = \"0\";</span>\n<span style=\"color:#000000;\">            loadData();</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 加载数据</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        private void loadData()</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            dataGridView1.DataSource = DBUtils.GetListTable(currentPage, pageSize, ref recordCount);         </span>\n<span style=\"color:#000000;\">            pageCount = (recordCount + pageSize - 1) / pageSize;</span>\n<span style=\"color:#000000;\">            if (pageCount == 0)</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                lblRecordCount.Text = \"0\";</span>\n<span style=\"color:#000000;\">                txtCurrentPage.Text = \"0\";</span>\n<span style=\"color:#000000;\">                lblTotal.Text = \"/0页\";</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">            else</span>\n<span style=\"color:#000000;\">            {                </span>\n<span style=\"color:#000000;\">                lblRecordCount.Text = \"总记录数:\" + recordCount;</span>\n<span style=\"color:#000000;\">                txtCurrentPage.Text = currentPage.ToString();</span>\n<span style=\"color:#000000;\">                lblTotal.Text = \"/\" + pageCount + \"页\";</span>\n<span style=\"color:#000000;\">            }</span>\n\n\n\n\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 首页</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"sender\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"e\"&gt;&lt;/param&gt;</span>\n\n\n<span style=\"color:#000000;\">        private void btnFirst_Click(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            currentPage = 1;</span>\n<span style=\"color:#000000;\">            loadData();</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 下一页</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"sender\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"e\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        private void btnNext_Click(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            if (currentPage &lt; pageCount)</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                currentPage++;</span>\n<span style=\"color:#000000;\">                loadData();</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">            else</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                MessageBox.Show(\"当前已经是最后一页\");</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 上一页</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"sender\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"e\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        private void btnLast_Click(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            if (currentPage == 1)</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                MessageBox.Show(\"当前已经是第一页\");</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">            else</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                currentPage--;</span>\n<span style=\"color:#000000;\">                loadData();</span>\n\n\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 末页</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"sender\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"e\"&gt;&lt;/param&gt;</span>\n\n\n<span style=\"color:#000000;\">        private void btnEnd_Click(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            currentPage = pageCount;</span>\n<span style=\"color:#000000;\">            loadData();</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 跳转页码</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"sender\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"e\"&gt;&lt;/param&gt;</span>\n\n\n<span style=\"color:#000000;\">        private void btnGoTo_Click(object sender, EventArgs e)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            if (!isIntergerNonZero(txtCurrentPage.Text.Trim()))</span>\n<span style=\"color:#000000;\">            {<!-- --></span>\n<span style=\"color:#000000;\">                MessageBox.Show(\"跳转页码必须为正整数\");</span>\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">            else</span>\n<span style=\"color:#000000;\">            {               </span>\n<span style=\"color:#000000;\">               int page = Convert.ToInt32(txtCurrentPage.Text.Trim());</span>\n<span style=\"color:#000000;\">                if(page&lt;=pageCount)</span>\n<span style=\"color:#000000;\">                {<!-- --></span>\n<span style=\"color:#000000;\">                    currentPage = page;</span>\n<span style=\"color:#000000;\">                    loadData();</span>\n<span style=\"color:#000000;\">                }</span>\n<span style=\"color:#000000;\">                else</span>\n<span style=\"color:#000000;\">                {<!-- --></span>\n<span style=\"color:#000000;\">                    MessageBox.Show(\"跳转页面不能大于总页数\");</span>\n<span style=\"color:#000000;\">                }</span>\n\n\n<span style=\"color:#000000;\">            }</span>\n<span style=\"color:#000000;\">        }</span>\n<span style=\"color:#000000;\">        /// &lt;summary&gt;</span>\n<span style=\"color:#000000;\">        /// 校验是否为正整数</span>\n<span style=\"color:#000000;\">        /// &lt;/summary&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;param name=\"str\"&gt;&lt;/param&gt;</span>\n<span style=\"color:#000000;\">        /// &lt;returns&gt;&lt;/returns&gt;</span>\n<span style=\"color:#000000;\">        private static bool isIntergerNonZero(string str)</span>\n<span style=\"color:#000000;\">        {<!-- --></span>\n<span style=\"color:#000000;\">            return string.IsNullOrWhiteSpace(str) ? false : Regex.IsMatch(str, @\"^[1-9]\\d*$\");</span>\n<span style=\"color:#000000;\">        }</span>\n</code></span></pre>\n<p></p>\n<h2 id=\"%E8%BF%90%E8%A1%8C%E7%95%8C%E9%9D%A2\" style=\"text-align:left;\"><strong><span style=\"color:#1a1a1a;\">4、运行界面</span></strong></h2>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">主要实现了当前记录数、共有多少页、首页、上一页、下一页、默认、指定页跳转的功能。</span></p>\n<p class=\"img-center\"><img alt=\"\" src=\"image\\e09d53f4f7e37fbec309e9429ec98a01.png\"/></p>\n<p style=\"text-align:left;\"><span style=\"color:#333333;\">以上就是Winfrom 实现DataGridView 自定义分页的案例，欢迎互相交流学习！</span></p>\n<p style=\"text-align:left;\"></p>\n<p style=\"text-align:left;\"></p>\n<p style=\"text-align:left;\"></p>\n</div>\n</div>\n</div>\n</div>"}