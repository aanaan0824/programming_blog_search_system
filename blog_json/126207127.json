{"blogid": "126207127", "writerAge": "码龄83天", "writerBlogNum": "23", "writerCollect": "296", "writerComment": "179", "writerFan": "2222", "writerGrade": "3级", "writerIntegral": "721", "writerName": "信年✘", "writerProfileAdress": "writer_image\\profile_126207127.jpg", "writerRankTotal": "22491", "writerRankWeekly": "230", "writerThumb": "211", "writerVisitNum": "127481", "blog_read_count": "9918", "blog_time": "于 2022-08-07 10:22:51 发布", "blog_title": "Python实战项目：打乒乓（源码分享）（文章较短，直接上代码）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<blockquote>\n<p><strong>✌ 作者简介：信年✘ ✌，大家可以叫我 ❤信年❤ ，一位精通五门语言的博主 ✌<br/> 🏆 CSDN博客专家认证、华为云享专家、阿里云专家博主 、掘金创作榜No.1<br/> 📫 如果文章知识点有错误的地方，请指正！和大家一起学习，一起进步👀<br/> 💬 人生格言：没有我不会的语言，没有你过不去的坎儿。💬<br/> 🔥 如果感觉博主的文章还不错的话，还请👍关注、点赞、收藏三连支持👍一下博主哦</strong></p>\n</blockquote>\n<blockquote>\n<p><strong>📌作者主页传送门：<strong><strong><strong><a href=\"https://blog.csdn.net/xinnian_yyds\" title=\"点此传送\">点此传送</a></strong></strong></strong></strong></p>\n<p><strong>🔎系列文章&amp;专栏推荐：暂未开放</strong></p>\n</blockquote>\n<blockquote>\n<p><strong>🌐为大家推荐一款刷题网站呀👉<strong><strong><strong><a href=\"https://www.nowcoder.com/link/pc_csdncpt_dream_sf\" title=\"点击跳转\">点击跳转</a></strong></strong></strong><br/> 所有编程语言，都可以从此网站中找到并参考学习哟~</strong></p>\n</blockquote>\n<p></p>\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA%EF%BC%9A-toc\" style=\"margin-left:0px;\"><a href=\"#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA%EF%BC%9A\">效果展示：</a></p>\n<p id=\"%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc\" style=\"margin-left:0px;\"><a href=\"#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\">准备工作</a></p>\n<p id=\"%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95-toc\" style=\"margin-left:40px;\"><a href=\"#%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95\">库的安装方法</a></p>\n<p id=\"%E7%A7%91%E6%99%AE%E5%B0%8F%E7%9F%A5%E8%AF%86-toc\" style=\"margin-left:40px;\"><a href=\"#%E7%A7%91%E6%99%AE%E5%B0%8F%E7%9F%A5%E8%AF%86\">科普小知识</a></p>\n<p id=\"%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81-toc\" style=\"margin-left:0px;\"><a href=\"#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81\">完整代码</a></p>\n<p id=\"%E6%9C%80%E5%90%8E-toc\" style=\"margin-left:0px;\"><a href=\"#%E6%9C%80%E5%90%8E\">最后</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA%EF%BC%9A\">效果展示：</h1>\n<p style=\"text-align:center;\"><img alt=\"\" src=\"https://img-blog.csdnimg.cn/5aacd049c3bc4b839619378ddeb1cdd7.gif\"/></p>\n<h1 id=\"%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\">准备工作</h1>\n<blockquote>\n<p>首先，确保你有安装cfg的库和pygame的库，没有安装的看下安装方法</p>\n</blockquote>\n<h2 id=\"%E5%BA%93%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%B9%E6%B3%95\">库的安装方法</h2>\n<p>首先，win+r，在运行框里输入cmd或者CMD，进入终端，输入以下两行代码</p>\n<div>\n<pre><code>pip install pygame\npip install cfg</code></pre>\n</div>\n<blockquote>\n<p>注：cfg容易安装错误，具体看报错，如有报错评论区留言，我会一一答复</p>\n</blockquote>\n<h2 id=\"%E7%A7%91%E6%99%AE%E5%B0%8F%E7%9F%A5%E8%AF%86\">科普小知识</h2>\n<p>1.凡是安装Python的第三方库，只需要输入pip install 库的名字（当然有一些特例)</p>\n<p>2.凡是程序运行不起来，整体代码大部分报错，一般是没安装库，一个Python文件里面引用的库一般在开头：import 库的名字，检查这里有没有报错或者黄色下划线就好了，如果有，就用方法一安装库，如果没有，可能是自身代码的问题了</p>\n<h1 id=\"%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81\">完整代码<code class=\"language-python\"> </code></h1>\n<pre><code class=\"language-python\">import sys\nimport cfg\nimport pygame\nfrom modules import *\n \n \n'''定义按钮'''\ndef Button(screen, position, text, button_size=(200, 50)):\n    left, top = position\n    bwidth, bheight = button_size\n    pygame.draw.line(screen, (150, 150, 150), (left, top), (left+bwidth, top), 5)\n    pygame.draw.line(screen, (150, 150, 150), (left, top-2), (left, top+bheight), 5)\n    pygame.draw.line(screen, (50, 50, 50), (left, top+bheight), (left+bwidth, top+bheight), 5)\n    pygame.draw.line(screen, (50, 50, 50), (left+bwidth, top+bheight), (left+bwidth, top), 5)\n    pygame.draw.rect(screen, (100, 100, 100), (left, top, bwidth, bheight))\n    font = pygame.font.Font(cfg.FONTPATH, 30)\n    text_render = font.render(text, 1, (255, 235, 205))\n    return screen.blit(text_render, (left+50, top+10))\n \n \n'''\nFunction:\n    开始界面\nInput:\n    --screen: 游戏界面\nReturn:\n    --game_mode: 1(单人模式)/2(双人模式)\n'''\ndef startInterface(screen):\n    clock = pygame.time.Clock()\n    while True:\n        screen.fill((41, 36, 33))\n        button_1 = Button(screen, (150, 175), '1 Player')\n        button_2 = Button(screen, (150, 275), '2 Player')\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                pygame.quit()\n                sys.exit()\n            if event.type == pygame.MOUSEBUTTONDOWN:\n                if button_1.collidepoint(pygame.mouse.get_pos()):\n                    return 1\n                elif button_2.collidepoint(pygame.mouse.get_pos()):\n                    return 2\n        clock.tick(10)\n        pygame.display.update()\n \n \n'''结束界面'''\ndef endInterface(screen, score_left, score_right):\n    clock = pygame.time.Clock()\n    font1 = pygame.font.Font(cfg.FONTPATH, 30)\n    font2 = pygame.font.Font(cfg.FONTPATH, 20)\n    msg = 'Player on left won!' if score_left &gt; score_right else 'Player on right won!'\n    texts = [font1.render(msg, True, cfg.WHITE),\n            font2.render('Press ESCAPE to quit.', True, cfg.WHITE),\n            font2.render('Press ENTER to continue or play again.', True, cfg.WHITE)]\n    positions = [[120, 200], [155, 270], [80, 300]]\n    while True:\n        screen.fill((41, 36, 33))\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                pygame.quit()\n                sys.exit()\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_RETURN:\n                    return\n                elif event.key == pygame.K_ESCAPE:\n                    sys.exit()\n                    pygame.quit()\n        for text, pos in zip(texts, positions):\n            screen.blit(text, pos)\n        clock.tick(10)\n        pygame.display.update()\n \n \n'''运行游戏Demo'''\ndef runDemo(screen):\n    # 加载游戏素材\n    hit_sound = pygame.mixer.Sound(cfg.HITSOUNDPATH)\n    goal_sound = pygame.mixer.Sound(cfg.GOALSOUNDPATH)\n    pygame.mixer.music.load(cfg.BGMPATH)\n    pygame.mixer.music.play(-1, 0.0)\n    font = pygame.font.Font(cfg.FONTPATH, 50)\n    # 开始界面\n    game_mode = startInterface(screen)\n    # 游戏主循环\n    # --左边球拍(ws控制, 仅双人模式时可控制)\n    score_left = 0\n    racket_left = Racket(cfg.RACKETPICPATH, 'LEFT', cfg)\n    # --右边球拍(↑↓控制)\n    score_right = 0\n    racket_right = Racket(cfg.RACKETPICPATH, 'RIGHT', cfg)\n    # --球\n    ball = Ball(cfg.BALLPICPATH, cfg)\n    clock = pygame.time.Clock()\n    while True:\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                pygame.quit()\n                sys.exit(-1)\n        screen.fill((41, 36, 33))\n        # 玩家操作\n        pressed_keys = pygame.key.get_pressed()\n        if pressed_keys[pygame.K_UP]:\n            racket_right.move('UP')\n        elif pressed_keys[pygame.K_DOWN]:\n            racket_right.move('DOWN')\n        if game_mode == 2:\n            if pressed_keys[pygame.K_w]:\n                racket_left.move('UP')\n            elif pressed_keys[pygame.K_s]:\n                racket_left.move('DOWN')\n        else:\n            racket_left.automove(ball)\n        # 球运动\n        scores = ball.move(ball, racket_left, racket_right, hit_sound, goal_sound)\n        score_left += scores[0]\n        score_right += scores[1]\n        # 显示\n        # --分隔线\n        pygame.draw.rect(screen, cfg.WHITE, (247, 0, 6, 500))\n        # --球\n        ball.draw(screen)\n        # --拍\n        racket_left.draw(screen)\n        racket_right.draw(screen)\n        # --得分\n        screen.blit(font.render(str(score_left), False, cfg.WHITE), (150, 10))\n        screen.blit(font.render(str(score_right), False, cfg.WHITE), (300, 10))\n        if score_left == 11 or score_right == 11:\n            return score_left, score_right\n        clock.tick(100)\n        pygame.display.update()\n \n \n'''主函数'''\ndef main():\n    # 初始化\n    pygame.init()\n    pygame.mixer.init()\n    screen = pygame.display.set_mode((cfg.WIDTH, cfg.HEIGHT))\n    pygame.display.set_caption('pingpong —— 九歌')\n    # 开始游戏\n    while True:\n        score_left, score_right = runDemo(screen)\n        endInterface(screen, score_left, score_right)\n \n \n'''run'''\nif __name__ == '__main__':\n    main()\n</code></pre>\n<h1 id=\"%E6%9C%80%E5%90%8E\">最后</h1>\n<blockquote>\n<p>那么完整代码写完后就可以双击运行代码啦，如果有报错记得按我说的方法排查一下，么么哒！</p>\n</blockquote>\n<blockquote>\n<p><strong>感谢你们的阅读😆</strong></p>\n<p><strong>后续还会继续更新💓，欢迎持续关注📌哟~</strong></p>\n<p>💫<strong>如果有错误❌，欢迎指正呀</strong>💫</p>\n<p><strong>✨如果觉得收获满满，可以点点赞👍支持一下哟~✨</strong></p>\n</blockquote>\n</div>\n</div>"}