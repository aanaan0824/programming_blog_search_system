{"blogid": "125654140", "writerAge": "码龄2年", "writerBlogNum": "26", "writerCollect": "53", "writerComment": "4", "writerFan": "3", "writerGrade": "2级", "writerIntegral": "270", "writerName": "道_航", "writerProfileAdress": "writer_image\\profile_125654140.jpg", "writerRankTotal": "52340", "writerRankWeekly": "411777", "writerThumb": "6", "writerVisitNum": "20540", "blog_read_count": "3480", "blog_time": "于 2022-07-07 13:34:36 发布", "blog_title": "ECharts设置x轴刻度间隔的两种方法", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h1><a id=\"EChartsx_0\"></a>ECharts设置x轴刻度文字间隔的两种方法</h1>\n<h2><a id=\"_1\"></a>背景</h2>\n<p>最近在写一个echarts数据看板，要在一个页面中展示多张图表，所以留给每张图表的尺寸就很小。这也就使得图表x轴的刻度文字全部挤到一起了，废话不多说，直接上图看效果。<br/> <img alt=\"在这里插入图片描述\" src=\"image\\9055698e3ff0499693f9c2131ef312ac.png\"/><br/> 右边的图标就是x轴刻度标签文字被挤到一起了，左边是该过之后的效果。</p>\n<h2><a id=\"_6\"></a>解决方法</h2>\n<p>想要达到上面图片中左边的效果方法不止一种。<br/> <strong>最笨的方法</strong> 如果空间够的话直接将echart所在的div层尺寸设置得大一些，grid对象也同理，只要展示的空间足够宽，刻度标签自然就不会挤到一起。开个玩笑哈，能找到这类文章的，都是需要在有限的空间里解决间隔的问题</p>\n<p><strong>方法一:</strong> x轴的标签属性axisLabel下利用interval设置间隔<br/> 官方文档是这样说的：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\7d3c5b1e0a0a40f9acf7f4b380372574.png\"/><br/> 通过设置interval的值，来达到按指定间隔显示或者不显示，或者使用回调函数，回调函数返回的布尔值决定指定索引的标签是否显示。这也是网上能找到的最普遍的答案，可惜没能解决我的问题。</p>\n<p>官方文档上写的是在类目轴中有效，而我的x数据轴类型是“time”。所以只能再想其他方法</p>\n<p><strong>方法二：</strong> 为axisLabel. formatters添加回调函数改变标签文字<br/> <img alt=\"在这里插入图片描述\" src=\"image\\d7734c3032ab4995ae30d9da8c68da05.png\"/><br/> formatters属性是用来设置文字格式的，既然可以用来设置文字格式，那我把需要隐藏的文字改为空字符串不就行了。<br/> 思路一通代码就简单了，先看看回调函数怎么用<br/> <img alt=\"在这里插入图片描述\" src=\"image\\b23c6e029f1e46c59e7ce3cfdce596da.png\"/><br/> 官方文档上说函数有两个参数，一个是索引一个是值。注意，这里的索引并不是我们x轴数据的索引，而是图标刻度的索引。举个例子，我的数据集是每秒钟电表的读数，那么一个小时就是3600条，如果是数据集索引的话就应该是0到3599，实际上，我们从没看到过一个数据轴上有那么多刻度。<br/> 我们图表数据轴的标签数量是echarts在渲染的时候自动生成的，但是数量还真不好说而且即便是同一个图表不同时间也不一样，一般也就十来个。<br/> 来看一下我写的回调函数：</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token comment\">// 通过formatter设置时间刻度间隔</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">time_label_formatter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value<span class=\"token punctuation\">,</span>index</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// console.info(index);</span>\n    <span class=\"token keyword\">let</span> remainder <span class=\"token operator\">=</span> index <span class=\"token operator\">%</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>remainder <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"{HH}:{mm}\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">{<!-- --></span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<p>我的时间类型数据在赋值给配置项数据集之前已经做过数据清洗，本身就是Date类型，所以没有在函数内再做数据转换</p>\n<p>我先把所有的标签索引打印出来，发现是0到16，那么按照间隔设置为3或者4就好了。思路就是这样，看到这里的朋友可以根据自己的实际情况调整一个间隔数就可以了。</p>\n<p>最后看一下配置项series参数：</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token literal-property property\">xAxis</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">\"time\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">gridIndex</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n\t\taxisLabel：\n\t\t\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t<span class=\"token literal-property property\">rotate</span><span class=\"token operator\">:</span><span class=\"token operator\">-</span><span class=\"token number\">45</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token literal-property property\">formatter</span><span class=\"token operator\">:</span>time_label_formatter\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t<span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span><span class=\"token string\">\"time\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">gridIndex</span><span class=\"token operator\">:</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">axisLabel</span><span class=\"token operator\">:</span>\n\t\t\t<span class=\"token punctuation\">{<!-- --></span>\n\t\t\t\t<span class=\"token literal-property property\">rotate</span><span class=\"token operator\">:</span><span class=\"token operator\">-</span><span class=\"token number\">45</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token literal-property property\">formatter</span><span class=\"token operator\">:</span>time_label_formatter\n\t\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}