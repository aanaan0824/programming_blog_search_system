{"blogid": "123268223", "writerAge": "码龄4年", "writerBlogNum": "5", "writerCollect": "63", "writerComment": "2", "writerFan": "2", "writerGrade": "1级", "writerIntegral": "62", "writerName": "程序员小钮", "writerProfileAdress": "writer_image\\profile_123268223.jpg", "writerRankTotal": "188468", "writerRankWeekly": "1010390", "writerThumb": "10", "writerVisitNum": "6727", "blog_read_count": "4673", "blog_time": "于 2022-03-04 14:37:20 发布", "blog_title": "SQL基本语句（整理）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><strong>一、DDL(Data Definition Language)</strong></p>\n<p><strong>数据定义语言，用来定义数据库对象（数据库，表，字段）</strong></p>\n<p>①查询</p>\n<p>查询所有数据库</p>\n<pre><code>show databases;</code></pre>\n<p style=\"text-align:center;\"> <img alt=\"\" src=\"image\\afe0b95224b14464939b77015cd075c6.png\"/></p>\n<p></p>\n<p>查询当前数据库</p>\n<pre><code>select database();</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\7c128bc345214874b34b527d3515fecc.png\" width=\"1200\"/></p>\n<p> </p>\n<p>②创建</p>\n<pre><code>create database [if not exists] 数据库名 [default charset 字符集][collate 排序规则];\n\n#中括号里的可加可不加，具体情况而定\n#第一个是如果不存在相同名称的数据库则创建\n#第二个是设置字符的字符集和排序规则</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\2ff268e07727493cb13cd24893496454.png\" width=\"1200\"/></p>\n<p> </p>\n<p>③删除</p>\n<pre><code>drop database [if exists] 数据库名;\n\n#中括号是如果存在相同名称的数据库就删除</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\b5f2f5372edb4f018e0b2232175a2d7c.png\" width=\"1200\"/></p>\n<p> </p>\n<p>④使用</p>\n<pre><code>use 数据库名;</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\84210c1f6440474f9f8ff7f6f9be6499.png\" width=\"1200\"/></p>\n<p></p>\n<p>⑤表操作-创建</p>\n<pre><code>create table 表名 (\n        字段1 字段1类型[comment 字段1注释],\n        字段2 字段2类型[comment 字段2注释],\n        字段3 字段3类型[comment 字段3注释],\n        ......\n        字段n 字段n类型[comment 字段n注释]\n)[comment 表注释];</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\86ab81848d5746abb3d9b65e392c6082.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">注：[....]为可选参数，最后一个字段后面没有逗号</span></p>\n<p>⑥表操作-修改</p>\n<p>添加字段</p>\n<pre><code>alter table 表名 add 字段名 类型(长度) [comment 注释][约束];</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\fa796dafb81345e1930eaf9272c64767.png\" width=\"1200\"/></p>\n<p> </p>\n<p>修改数据类型</p>\n<pre><code>alter table 表名 modify 字段名 新数据类型(长度);</code></pre>\n<p>修改字段名和字段类型</p>\n<pre><code>alter table 表名 change 旧字段名 新字段名 类型(长度)[comment 注释][约束];</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\a4dde856439b498f9166a1d5dfd56e4b.png\" width=\"1200\"/></p>\n<p> </p>\n<p>删除字段</p>\n<pre><code>alter table 表名 drop 字段名;</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\2bb3b771bc1f40d388f2c89b6d05afa9.png\" width=\"1200\"/></p>\n<p> </p>\n<p>修改表名</p>\n<pre><code>alter table 表名 rename to 新表名;</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\4d31768deaa44ea695bf1f4c7263feff.png\" width=\"1200\"/></p>\n<p> </p>\n<p>⑦表操作-删除</p>\n<p>删除表（让指定表从数据库消失）</p>\n<pre><code>drop table [if exists] 表名;</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\0c379c586a614f02a93f8667fde16d44.png\" width=\"1200\"/></p>\n<p> </p>\n<p>删除指定表，并重新创建该表（俗称格式化）</p>\n<pre><code>truncate table 表名;</code></pre>\n<p><img alt=\"\" height=\"759\" src=\"image\\7fbc1048dab442dfabe1be037f51a7a8.png\" width=\"1200\"/></p>\n<p> </p>\n<p><strong>二、DML(Data Manipulation Language)</strong></p>\n<p><strong>数据操作语言，用来对数据库表中的数据进行增删改</strong></p>\n<p>辅助用建表格式</p>\n<pre><code>create table worktable(\nid int comment '编号',\nworknum int comment '工号',\nname varchar(20) comment '姓名',\nsex char(1) comment '性别',\nage int comment '年龄',\nidcard int comment '身份证号',\nentrydate date comment '入职日期'\n)comment '员工信息表';</code></pre>\n<p>①添加数据</p>\n<p>给指定字段添加数据</p>\n<pre><code>insert into 表名(字段名1,字段名2,.....) values(值1,值2,......);</code></pre>\n<p>给全部字段添加数据</p>\n<pre><code>insert into 表名 values (值1,值2,.....);</code></pre>\n<p>批量添加数据</p>\n<pre><code>insert into 表名(字段名1,字段名2,.....) \nvalues(值1,值2,......),(值1,值2,......)，(值1,值2,......);\n\n\ninsert into 表名 \nvalues (值1,值2,.....)，(值1,值2,......)，(值1,值2,......);</code></pre>\n<p><img alt=\"\" height=\"834\" src=\"image\\6a20a853da864b43a5d6e739d67bc2c0.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：</span></p>\n<p><span style=\"color:#fe2c24;\"><strong>·</strong> 插入数据时，指定的字段顺序需要与值的顺序是一一对应的</span></p>\n<p><span style=\"color:#fe2c24;\"><strong>·</strong>字符串和日期型数据应该包含在引号中</span></p>\n<p><span style=\"color:#fe2c24;\"><strong>·</strong>插入的数据大小，应该在字段的规定范围内</span></p>\n<p>②修改数据</p>\n<pre><code>update 表名 set 字段名1=值1,字段名2=值2,....[where 条件];</code></pre>\n<p><img alt=\"\" height=\"831\" src=\"image\\72fb7426bd044b98ba2fea92de3642c9.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：修改语句的条件可以有，也可以没有，如果没有条件，则会修改整张表的所有数据</span></p>\n<p><span style=\"color:#0d0016;\">③删除数据</span></p>\n<pre><code>delete from 表名 [where 条件];</code></pre>\n<p><img alt=\"\" height=\"831\" src=\"image\\286589ae9d684f26a9ea45ac9f37048e.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]:</span></p>\n<p><span style=\"color:#fe2c24;\"><strong>·</strong>delete语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据</span></p>\n<p><span style=\"color:#fe2c24;\"><strong>·</strong>delete语句不能删除某一个字段的值(可以使用update)</span></p>\n<p><strong>三、DQL(Data Query Language)</strong></p>\n<p><strong>数据查询语言，用来查询数据库中表的记录</strong></p>\n<p>整体语法概览</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td style=\"width:136px;\">select</td><td style=\"width:362px;\">字段列表</td></tr><tr><td style=\"width:136px;\">from</td><td style=\"width:362px;\">表名列表</td></tr><tr><td style=\"width:136px;\">where</td><td style=\"width:362px;\">条件列表</td></tr><tr><td style=\"width:136px;\">group by</td><td style=\"width:362px;\">分组字段列表</td></tr><tr><td style=\"width:136px;\">having</td><td style=\"width:362px;\">分组后条件列表</td></tr><tr><td style=\"width:136px;\">order by</td><td style=\"width:362px;\">排序字段列表</td></tr><tr><td style=\"width:136px;\">limit</td><td style=\"width:362px;\">分页参数</td></tr></tbody></table>\n<ul><li>基本查询</li><li>条件查询（<span style=\"color:#fe2c24;\">where</span>）</li><li>聚合函数（<span style=\"color:#fe2c24;\">count,max,min,avg,sum</span>）</li><li>分组查询（<span style=\"color:#fe2c24;\">group by</span>）</li><li>排序查询（<span style=\"color:#fe2c24;\">order by</span>）</li><li>分页查询（<span style=\"color:#fe2c24;\">limit</span>）</li></ul>\n<p>辅助建表内容</p>\n<pre><code>create  table emp(\nid             int                comment '编号',\nworknum        varchar(10)        comment '工号',\nname           varchar(10)        comment '姓名',\ngender         char(1)            comment '性别',\nage            tinyint unsigned   comment '年龄',\nidcard         char(18)           comment '身份证号',\nworkaddress    varchar(50)        comment '工作地址',\nentrydate      date               comment '入职时间'\n)comment '员工表';\n\ninsert into emp (id,worknum,name,gender,age,idcard,workaddress,entrydate)\nvalues  (1,'1','柳岩','女',20,'123456789012345678','北京','2000-01-01'),\n        (2,'2','张无忌','男',18,'123456789012345670','北京','2005-09-01'),\n        (3,'3','韦一笑','男',38,'123456789712345670','上海','2005-08-01'),\n        (4,'4','赵敏','女',18,'123456757123845670','北京','2009-12-01'),\n        (5,'5','小昭','女',16,'123456769012345678','上海','2007-07-01'),\n        (6,'6','杨逍','男',28,'12345678931234567X','北京','2006-01-01'),\n        (7,'7','范瑶','男',40,'123456789212345670','北京','2005-05-01'),\n        (8,'8','黛绮丝','女',38,'123456157123645670','天津','2015-05-01'),\n        (9,'9','范凉凉','女',45,'123156789012345678','北京','2010-04-01'),\n        (10,'10','陈友谅','男',53,'123456789012345670','上海','2011-01-01'),\n        (11,'11','张士诚','男',55,'123567897123465670','江苏','2015-05-01'),\n        (12,'12','常遇春','男',32,'123446757152345670','北京','2004-02-01'),\n        (13,'13','张三丰','男',88,'123656789012345678','江苏','2020-11-01'),\n        (14,'14','灭绝','女',65,'123456719012345670','西安','2019-05-01'),\n        (15,'15','胡青牛','男',70,'12345674971234567X','西安','2018-04-01'),\n        (16,'16','周芷若','女',18,null,'北京','2012-06-01');</code></pre>\n<p>①基本查询</p>\n<p>查询多个字段</p>\n<pre><code class=\"language-sql\">select 字段1,字段2,字段3.....from 表名;\nselect *from 表名;</code></pre>\n<p>设置别名</p>\n<pre><code>select 字段1 [as 别名1],字段2 [as 别名2] .... from 表名;\n\n#as可省略</code></pre>\n<p>去除重复记录</p>\n<pre><code>select distinct 字段列表 from 表名;</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\c22368e1bf0744c885e6eae33d6e5cfe.png\" width=\"1200\"/></p>\n<p> <img alt=\"\" height=\"940\" src=\"image\\98c3b9a086c34d0dbcb0eca7ee90f7a5.png\" width=\"1200\"/></p>\n<p> </p>\n<p>②条件查询</p>\n<p>语法</p>\n<pre><code>select 字段列表 from 表名 where 条件列表;</code></pre>\n<p>条件</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:630px;\"><tbody><tr><td style=\"width:114px;\">比较运算符</td><td style=\"width:194px;\">功能</td><td style=\"width:120px;\">逻辑运算符</td><td style=\"width:198px;\">功能</td></tr><tr><td style=\"width:114px;\">&gt;</td><td style=\"width:194px;\">大于</td><td style=\"width:120px;\">and 或 &amp;&amp;</td><td style=\"width:198px;\">并且(多个条件同时成立)</td></tr><tr><td style=\"width:114px;\">&gt;=</td><td style=\"width:194px;\">大于等于</td><td style=\"width:120px;\">or 或 ||</td><td style=\"width:198px;\">或者(多个条件任意一个成立)</td></tr><tr><td style=\"width:114px;\">&lt;</td><td style=\"width:194px;\">小于</td><td style=\"width:120px;\">not 或 ！</td><td style=\"width:198px;\">非，不是</td></tr><tr><td style=\"width:114px;\">&lt;=</td><td style=\"width:194px;\">小于等于</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">=</td><td style=\"width:194px;\">等于</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">&lt;&gt; 或 !=</td><td style=\"width:194px;\">不等于</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">between...and...</td><td style=\"width:194px;\">在某个范围内(含最小，最大值)</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">in(.....)</td><td style=\"width:194px;\">在in之后的列表中的值，多选一</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">like 占位符</td><td style=\"width:194px;\">模糊匹配(_匹配单个字符，%匹配任意个字符)</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr><tr><td style=\"width:114px;\">is null</td><td style=\"width:194px;\">是null</td><td style=\"width:120px;\"></td><td style=\"width:198px;\"></td></tr></tbody></table>\n<p><img alt=\"\" height=\"940\" src=\"image\\da77d5a9d3f5459e86d053be06a07127.png\" width=\"1200\"/></p>\n<p> </p>\n<p>③聚散函数</p>\n<p>常见聚合函数</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td>函数</td><td>功能</td></tr><tr><td>count</td><td>统计数量</td></tr><tr><td>max</td><td>最大值</td></tr><tr><td>min</td><td>最小值</td></tr><tr><td>avg</td><td>平均值</td></tr><tr><td>sum</td><td>求和</td></tr></tbody></table>\n<p>语法</p>\n<pre><code>select 聚合函数(字段列表) from 表名;</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\54f0d58a3ade486baa4ebd651cbbc355.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：null值不参与所有聚合函数运算</span></p>\n<p>④分组查询</p>\n<p>语法</p>\n<pre><code>select 字段列表 from 表名 [where 条件] group by 分组字段名 [having 分组过滤条件];</code></pre>\n<p>where 与 having 区别</p>\n<p>1.执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；</p>\n<p>                            having是分组之后对结果进行过滤。</p>\n<p>2.判断条件不同：where不能对聚合函数进行判断，而having可以。</p>\n<p><img alt=\"\" height=\"940\" src=\"image\\dd4dc1b43d214e80be44cf15f0534b81.png\" width=\"1200\"/></p>\n<p> </p>\n<p>⑤排序查询</p>\n<p>语法</p>\n<pre><code>select 字段列表 from 表名 order by 字段1 排序方式1 , 字段2 排序方式2;\n\n#排序方式\n#asc:升序(默认值)\n#desc:降序</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\0d01139eef174f109f03b7cf4d6267f5.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序。</span></p>\n<p><span style=\"color:#0d0016;\">⑥分页查询</span></p>\n<p>语法</p>\n<pre><code>select 字段列表 from 表名 limit 起始索引,查询记录数;</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\eda26fb9988d4fdf81ffe0da63d39f17.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：</span></p>\n<ul><li><span style=\"color:#fe2c24;\">起始索引从0开始，起始索引 = （查询页码 - 1） * 每页显示记录数</span></li><li><span style=\"color:#fe2c24;\">分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是limit</span></li><li><span style=\"color:#fe2c24;\">如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10</span></li></ul>\n<p>案例练习</p>\n<p><img alt=\"\" height=\"940\" src=\"image\\9c6b6634225f4992aca4522713da89b6.png\" width=\"1200\"/></p>\n<p> </p>\n<p>整体语法顺序</p>\n<p><img alt=\"\" height=\"641\" src=\"image\\2f7b3e3ca316474997a8302de9c44bd2.png\" width=\"1200\"/></p>\n<p><img alt=\"\" height=\"410\" src=\"image\\1fd299c9856f4a94b00721f23f390369.png\" width=\"1038\"/></p>\n<hr/>\n<p><strong>四、DCL(Data Control Language)</strong></p>\n<p><strong>数据控制语言，用来创建数据库用户，控制数据库的访问权限</strong></p>\n<p>①管理用户</p>\n<p>查询用户</p>\n<pre><code>use mysql;\nselect *from user;</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\e27e456b1fab4ea89ae419b323bd38f4.png\" width=\"1200\"/></p>\n<p> </p>\n<p>创建用户</p>\n<pre><code>create user '用户名'@'主机名' identified '密码';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\ed2b8f31886f47229c0abcdfe2676767.png\" width=\"1200\"/></p>\n<p> </p>\n<p>修改用户密码</p>\n<pre><code>alter user '用户名'@'主机名' identified with mysql_native_password by '新密码';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\5f178e386d404025a67116e3b9e63327.png\" width=\"1200\"/></p>\n<p> </p>\n<p>删除用户</p>\n<pre><code>drop user '用户名'@'主机名';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\72d4ba44890d497ab5bf6052cf09869b.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]:</span></p>\n<ul><li><span style=\"color:#fe2c24;\">主机名可以使用%通配</span></li><li><span style=\"color:#fe2c24;\">这类SQL开发人员操作的比较少，主要是DBA（Database Administrator）使用</span></li></ul>\n<p>②权限控制</p>\n<p>常用的权限</p>\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:500px;\"><tbody><tr><td>权限</td><td>说明</td></tr><tr><td>all,all privileges</td><td>所有权限</td></tr><tr><td>select</td><td>查询数据</td></tr><tr><td>insert</td><td>插入数据</td></tr><tr><td>update</td><td>修改数据</td></tr><tr><td>delete</td><td>删除数据</td></tr><tr><td>alter</td><td>修改表</td></tr><tr><td>drop</td><td>删除数据库/表/视图</td></tr><tr><td>create</td><td>创建数据库/表</td></tr></tbody></table>\n<p>查询权限</p>\n<pre><code>show grants for '用户名'@'主机名';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\575a95b429494b64bd2624180aa15c0d.png\" width=\"1200\"/></p>\n<p> </p>\n<p>授予权限</p>\n<pre><code>grant 权限列表 on 数据库名.表名 to '用户名'@'主机名';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\465e223a8bbb43928f9aa7e78b88cf66.png\" width=\"1200\"/></p>\n<p> </p>\n<p>撤销权限</p>\n<pre><code>revoke 权限列表 on 数据库名.表名 from '用户名'@'主机名';</code></pre>\n<p><img alt=\"\" height=\"940\" src=\"image\\f36d8d5a3e4a4828a09814d4dcb97638.png\" width=\"1200\"/></p>\n<p> </p>\n<p><span style=\"color:#fe2c24;\">[注]：</span></p>\n<ul><li><span style=\"color:#fe2c24;\">多个权限之间，使用逗号分割</span></li><li><span style=\"color:#fe2c24;\">授权时，数据库名和表名可以使用 * 进行通配，代表所有</span></li></ul>\n<p></p>\n</div>\n</div>"}