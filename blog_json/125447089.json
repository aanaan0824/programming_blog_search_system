{"blogid": "125447089", "writerAge": "码龄1年", "writerBlogNum": "86", "writerCollect": "2787", "writerComment": "692", "writerFan": "3848", "writerGrade": "5级", "writerIntegral": "3274", "writerName": "粉色的志明", "writerProfileAdress": "writer_image\\profile_125447089.jpg", "writerRankTotal": "5203", "writerRankWeekly": "302", "writerThumb": "939", "writerVisitNum": "167560", "blog_read_count": "15023", "blog_time": "已于 2022-06-26 18:32:13 修改", "blog_title": "云服务器部署 Web 项目", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3> </h3>\n<ul><li><a href=\"#__Java__3\">一: 搭建 Java 部署环境</a></li><li><ul><li><a href=\"#1__JDK_11\">1: 安装 JDK</a></li><li><a href=\"#2__Tomcat_33\">2: 安装 Tomcat</a></li><li><ul><li><a href=\"#_59\">总结</a></li></ul>\n</li><li><a href=\"#3__MySQL_97\">3: 安装 MySQL</a></li><li><ul><li><a href=\"#1__103\">(1): 依次安装</a></li><li><a href=\"#2__110\">(2): 更改配置</a></li><li><a href=\"#3__148\">(3): 启动</a></li><li><a href=\"#4__154\">(4): 测试连接</a></li></ul>\n</li></ul>\n</li><li><a href=\"#__web__167\">二: 部署 web 项目</a></li><li><ul><li><a href=\"#1__169\">1: 给服务器准备好依赖的数据</a></li><li><a href=\"#2__Java__177\">2: 微调我们的 Java 代码</a></li><li><a href=\"#3__180\">3: 重新打包</a></li><li><a href=\"#4__193\">4: 上传到服务器上</a></li><li><a href=\"#5__197\">5: 验证</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"__Java__3\"></a>一: 搭建 Java 部署环境</h1>\n<p>之前说过 <code>yum</code>这个命令了,是\"包管理器\",可以理解为他就像是\"应用商店\",我们需要<code>安装 JDK,Tomcat,还有Mysql</code>,当然,我们下载需要用 <code>yum install</code>,必须使用管理员权限(root)</p>\n<blockquote>\n<p><code>yum list | grep [软件包关键字]</code> 功能：查看软件包列表<br/> <code>yum install [软件包名字] </code>功能：安装软件包(需要管理员权限)<br/> <code> yum remove [软件包名字]</code> 功能：卸载软件包(需要管理员权限)</p>\n</blockquote>\n<h2><a id=\"1__JDK_11\"></a>1: 安装 JDK</h2>\n<p>首先,我们先搜索一下,看看 yum 上关于 jdk 有没有,以及叫什么名字,我们可以通过 <code>yum list</code>命令就能列出来 相应的服务器上所有的软件包的名字(当然不要就这样敲,这样敲会把所有东西都列出来,会非常多,我们搭配 grep 来使用:<code>yum list | grep gdk</code>),只搜寻jdk的:<img alt=\"在这里插入图片描述\" src=\"image\\42f6d462b96d40f496ef8e79b56367d0.png\"/></p>\n<blockquote>\n<p>这些版本都是不一样的,所以有好多,我们要认准这个标志:<br/> <img alt=\"在这里插入图片描述\" src=\"image\\1238955b83db47ccb9ceddec1dd53183.png\"/><br/> devel(表示开发工具包,也就是 jdk),东西最全,x86_64表示是这个软件包适用于 cpu 是64位的 x86 cpu(我们现在服务器用的cpu主要都是 x86 64位),<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e24839f7ef234c0cacc80d55bc100ee6.png\"/><br/> 上面有个<code>.i686</code>的是32位的,差别很大</p>\n</blockquote>\n<blockquote>\n<p>我们把上面那个64位的复制下来(<code>ctrl+insert</code>)<br/> <code>yum install java-1.8.0-openjdk-devel.x86_64</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\7cece500076b496ba956ac52302eb7d2.png\"/>我安装过了,第一次记得按 <code>y</code><br/> 验证是否安装成功,输入 <code>javac</code>查看<br/> <img alt=\"在这里插入图片描述\" src=\"image\\eb09a8d6cdf945e094163514fce9f13d.png\"/></p>\n</blockquote>\n<blockquote>\n<p><code>注意</code>此处我们安装的 jdk 是 OpenJDK ,和我们之前学 Java 用的 JDK 还不是一个,咱之前在 windows 上安装的 JDK 是 Oracle 官方的 JDK,OpenJDK 是 开源组织开发的另一个 JDK,虽然不是同一个,但是问题不大,都是用相同的 JVM Hostspot.(整体差别很小,所以没有必要去安装 Oracle JDK)</p>\n</blockquote>\n<h2><a id=\"2__Tomcat_33\"></a>2: 安装 Tomcat</h2>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\acbeb19e0e1548d9886926b0d162418a.png\"/><br/> 我们发现yum上面虽然有 tomcat,但是版本比较老,是 7.0系列的,而我常用的是 8.5系列的,因为我们也知<code>tomcat,JDK,Servlet,mysql</code>这种版本都要匹配才稳定,所以我们需要进入tomcat官网进行下载:<a href=\"https://tomcat.apache.org/\">https://tomcat.apache.org/</a><br/> <img alt=\"在这里插入图片描述\" src=\"image\\2f984bb8077748e388ba189ebe6e89ec.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\8cc674abb7c646b4aec7661a776988d4.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\a982c0ad8d794d5c8e6622c4a6dfffbc.png\"/></p>\n<p>可能有些拖拽不成功,因为拖拽上传依赖 <code>rz</code>命令,需要先 <code>yum install lrzsz</code> 来安装依赖命令,才能上传,<code>rz</code> 把 windows 上的文件 传给 Linux 服务器,<code>sz</code> 把 Linux 上的文件传给 Windows</p>\n<p>然后我们需要对 这个文件解压缩:<code>unzip [压缩文件]</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\0c65e60ae9744f1c9705d15ff82cc427.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\f8eb53fca1004f9f9c70ed3efd9a3155.png\"/><br/> 进入 文件夹查看:<br/> <img alt=\"在这里插入图片描述\" src=\"image\\78bab5227deb464384454ac02c272291.png\"/></p>\n<p>接下来就是启动tomcat了:</p>\n<blockquote>\n<p>要想启动 tomcat,需要用到<code>startup 脚本</code>,其中 <code>.bat</code>是给 windows 使用的,<code>.sh</code>是给 Linux 使用的…</p>\n</blockquote>\n<blockquote>\n<p>首次启动我们需要先给所有的 <code>.sh</code> 文件设置 可执行权限<br/> 先 <code>cd 到 bin</code>目录下,然后执行 <code>chmod+x *.sh</code>(给目录中所有.sh后缀的文件都加上可执行权限),加过之后,后面就不用加了<br/> <img alt=\"在这里插入图片描述\" src=\"image\\2b2224eb6edd41a98dea79d1070326f9.png\"/><br/> 在输入:<code>sh startup.sh</code>启动脚本<br/> <img alt=\"在这里插入图片描述\" src=\"image\\f37ef55bb3d14c719fe0ca457a23e5f8.png\"/></p>\n</blockquote>\n<h3><a id=\"_59\"></a>总结</h3>\n<blockquote>\n<p>1: 先在官网下载 .zip 包<br/> 2: 把 zip 传到 linux 上,直接拖进去就行,不行就<code>yum install lrzsz</code>命令先下载<br/> 3: 使用 <code>unzip</code> 命令进行解压缩,同样可能也需要先下载<br/> 4: 切换到 bin 目录给所有 <code>.sh</code>加上可执行权限:<code>chmod+x *.sh</code><br/> 5: <code>sh startup.sh</code>启动 romcat<br/> (前四步首次使用需要做的,后面就不需要了,且才相关目录里执行命令)</p>\n</blockquote>\n<p><font color=\"red\">如何验证tomcat是否启动成功?</font></p>\n<blockquote>\n<p><code>1: 查看 tomcat 进程:</code><br/> <code>ps aux | grep tomcat</code>,<code>ps命令</code>相当于windows上的任务管理器,会打印出当前主机的所有进程,<code>grep tomcat</code>按照 tomcat 关键字来进行匹配<br/> <img alt=\"在这里插入图片描述\" src=\"image\\170c04aeec404b23b733fed1ead7c0f2.png\"/></p>\n</blockquote>\n<blockquote>\n<p><code>2: 查看 tomcat 的端口,默认是 8080</code><br/> 看下端口号是否被绑定:<code>netstat -anp | grep 8080</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\8eca1696949b4625b34a988615fd304b.png\"/>有这个就是启动成功</p>\n</blockquote>\n<blockquote>\n<p>如果端口号被占用了,可以自己修改:<br/> <img alt=\"在这里插入图片描述\" src=\"image\\30c1a2a56651453eb0b902e0dbcb22d4.png\"/><br/> 找到 <code>conf</code>这个目录的 <code>server.xml</code><br/> <code>vim server.xml</code>进入编辑<br/> 找到这俩端口,改了就行<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e8e62671789d40f3816e9473acad6269.png\"/><img alt=\"在这里插入图片描述\" src=\"image\\5040ad1ab3734c7cacfc10bdf615e323.png\"/></p>\n</blockquote>\n<blockquote>\n<p><code>3: 还可以验证一下看能否访问 tomcat 的欢迎页面</code><br/> 如果能访问,就启动成功 <code>外网IP+8080(自己设的端口号)</code>就行了<br/> <img alt=\"在这里插入图片描述\" src=\"image\\ebcd03c6918e4a04994485c32f98694f.png\"/></p>\n</blockquote>\n<blockquote>\n<p>可能有些人买了服务器,并没有展示出来,因为云服务器厂商,为了保护咱们的服务器不受黑客的攻击,对于哪些端口能被外部访问进行了严格的限制,绝大部分端口在默认的情况下,无法通过外网来访问的,这就需要我们去官网开启<code>防火墙/安全组</code>,在后台页面配置,允许哪个/哪些端口可以对外访问,一定要保证 服务器是可访问的才能访问</p>\n</blockquote>\n<blockquote>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\a51c26ed87194ec0bc60f40650c1db24.png\"/><img alt=\"在这里插入图片描述\" src=\"image\\c21501d91ab84c43941237e3a8f0558e.png\"/><img alt=\"在这里插入图片描述\" src=\"image\\3c4d3d3bd74342b2a63f78f1769cfb10.png\"/><br/> 再把这个加上就行了:<img alt=\"在这里插入图片描述\" src=\"image\\2d2acf8f604b41fd83237ae6734a3640.png\"/></p>\n</blockquote>\n<h2><a id=\"3__MySQL_97\"></a>3: 安装 MySQL</h2>\n<p>我们自己的电脑和Linux 服务器是两台机器,因此,想要让程序在服务器上运行,我们就要给服务器装上 MySQL,这里我参考了以下安装教程:<a href=\"https://zhuanlan.zhihu.com/p/49046496\">https://zhuanlan.zhihu.com/p/49046496<br/> </a><br/> 这里我们安装的 MySQL 孪生兄弟,<code>MariaDB</code>,这俩的API 都是兼容的,效果一样.同时安装他都是要以 <code>root 用户</code>进行操作的.<br/> <font color=\"red\">具体步骤:</font></p>\n<h3><a id=\"1__103\"></a>(1): 依次安装</h3>\n<blockquote>\n<p>安装 mariadb 服务：<code>yum install -y mariadb-server</code><br/> 安装 mariadb 命令行客户端 ：<code>yum install -y mariadb</code><br/> 安装 mariadb C library：<code>yum install -y mariadb-libs</code><br/> 安装 mariadb 开发包：<code>yum install -y mariadb-devel</code></p>\n</blockquote>\n<h3><a id=\"2__110\"></a>(2): 更改配置</h3>\n<blockquote>\n<p>通过 <code>vim</code>按下 <code>i</code> 进入插入模式更改以下配置,要细心操作,最后按下 <code>esc</code> 在按下 <code>:wq</code> 保存退出</p>\n</blockquote>\n<blockquote>\n<ol><li>更改: <code>/etc/my.cnf.d/client.cnf</code> 文件<br/> [client] 下加一行配置 <code>default-character-set=utf8</code></li></ol>\n</blockquote>\n<pre><code class=\"prism language-java\">vim <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>client<span class=\"token punctuation\">.</span>cnf\n</code></pre>\n<blockquote>\n<p>效果:<br/> <img alt=\"在这里插入图片描述\" src=\"image\\ac8b2a64050343e593bc5e2746a06225.png\"/></p>\n</blockquote>\n<blockquote>\n<ol start=\"2\"><li>更改 <code>/etc/my.cnf.d/mysql-clients.cnf</code> 文件<br/> [mysql] 下加一行配置 <code>default-character-set=utf8</code></li></ol>\n</blockquote>\n<pre><code class=\"prism language-java\">vim <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>mysql<span class=\"token operator\">-</span>clients<span class=\"token punctuation\">.</span>cnf\n</code></pre>\n<blockquote>\n<p>效果：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\da9cd3a1badb476f9ea24151a523ccc7.png\"/></p>\n</blockquote>\n<blockquote>\n<ol start=\"3\"><li>更改 <code>/etc/my.cnf.d/server.cnf</code> 配置<br/> [mysqld] 下加配置<br/> <code>collation-server = utf8_general_ci</code><br/> <code>init-connect='SET NAMES utf8'</code><br/> <code>character-set-server = utf8</code><br/> <code>sql-mode = TRADITIONAL</code></li></ol>\n</blockquote>\n<pre><code class=\"prism language-java\">vim <span class=\"token operator\">/</span>etc<span class=\"token operator\">/</span>my<span class=\"token punctuation\">.</span>cnf<span class=\"token punctuation\">.</span>d<span class=\"token operator\">/</span>server<span class=\"token punctuation\">.</span>cnf\n</code></pre>\n<blockquote>\n<p>效果:<br/> <img alt=\"在这里插入图片描述\" src=\"image\\19f7bd000f9c4b8481e846a1a4f00786.png\"/></p>\n</blockquote>\n<h3><a id=\"3__148\"></a>(3): 启动</h3>\n<blockquote>\n<p>启动服务: <code>systemctl start mariadb</code><br/> 设置服务开启自启动：<code>systemctl enable mariadb</code><br/> 查看服务状态：<code>systemctl status mariadb</code><br/> 注意到 Active 状态为 <code>active (running)</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\fe68428588fb4e949b1d498dfc164f05.png\"/></p>\n</blockquote>\n<h3><a id=\"4__154\"></a>(4): 测试连接</h3>\n<p>使用命令行客户端尝试连接：<code>mysql -uroot </code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\203bbd2fdf3b408b9529649c4c000858.png\"/><br/> 查看 mariadb 版本号：<code>select version();</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\b187c476ccf24fe7a92e2ec43f5e0d34.png\"/></p>\n<p>查看字符集配置：<code>show variables like '%char%';</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\c55b8c84ede742a891c89d4a0ee23cd5.png\"/><br/> 好了,到这里就大功告成了<br/> <font color=\"red\">注意:</font>我这里是没有设置密码直接登录的,因为我的数据库啥值钱的都没有,也不怕别人折腾,就懒得设了</p>\n<h1><a id=\"__web__167\"></a>二: 部署 web 项目</h1>\n<h2><a id=\"1__169\"></a>1: 给服务器准备好依赖的数据</h2>\n<p>之前的数据库跟这里的数据库是没关系的,我们需要把之前的数据给复制过来<br/> <img alt=\"在这里插入图片描述\" src=\"image\\0d0b7ceaecd24f41aba904eca5a39510.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\47c9fec450c843a3b957516ad5868fc0.png\"/></p>\n<p>成功导入!!</p>\n<h2><a id=\"2__Java__177\"></a>2: 微调我们的 Java 代码</h2>\n<p>之前我们在写 java 代码的时候,访问数据库有一个密码,而这里云服务器上的数据库的密码是不一样的,我们云服务器上根本就没有设置密码,是<code>空字符串</code><br/> <img alt=\"在这里插入图片描述\" src=\"image\\f17fe57a2a4744dba3a8e488dffa79d4.png\"/></p>\n<h2><a id=\"3__180\"></a>3: 重新打包</h2>\n<p>这里要用我们原始的打包过程,需要基于 maven 的 package 操作来生成 war 包!首先就是先在<code>pom.xml</code>里面设置成war包,名字就设置为 blogSystem<br/> <img alt=\"在这里插入图片描述\" src=\"image\\62d65269ce154ef5a5ae112e31005b15.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\d0dc5720f165493dbafd968213079add.png\"/><img alt=\"在这里插入图片描述\" src=\"image\\cd677edd05a94086ad684a4386682599.png\"/><br/> 然后再左侧的target目录下有生成的 war 包<br/> <img alt=\"在这里插入图片描述\" src=\"image\\d039a5d0559d4d9aaf3eed7cd4b37921.png\"/></p>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\eb88035ea13f4fbab1b75b0b851c6a7b.png\"/></p>\n<h2><a id=\"4__193\"></a>4: 上传到服务器上</h2>\n<p>一个字: 拖!把刚刚的 war 包拖到我们云服务器的 webapps目录下,tomcat如果在运行中,就会自动对 war 进行解压缩<br/> <img alt=\"在这里插入图片描述\" src=\"image\\d0a393b5cdee4552aeea26516014c3ee.png\"/></p>\n<h2><a id=\"5__197\"></a>5: 验证</h2>\n<p>进行登录查看是否成功:<a href=\"http://1.14.43.174:8080/blogSystem/blog_login.html\">博客系统</a>(用户名:lisi 密码:123)<br/> <img alt=\"在这里插入图片描述\" src=\"image\\92de9f7fde8849a1a97eda535f0a6e29.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\ffc50ce3eebc4f5abedc156932abaf44.png\"/></p>\n<p>到这里,web项目就部署完成了!!!<code>(由于背景图有点大,可能加载有点慢,这是正常现象)</code><br/> 我们在遇到问题的时候不要害怕一是我们可以通过抓包来查看问题原因,还有就是要习惯于看 logs 日志文件寻找问题,出错了就找最新的文件日期,最好全都看…<br/> <img alt=\"在这里插入图片描述\" src=\"image\\23343e98ba2942bf955bf60688cadd78.png\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}