{"blogid": "126670306", "writerAge": "码龄1年", "writerBlogNum": "11", "writerCollect": "87", "writerComment": "109", "writerFan": "231", "writerGrade": "3级", "writerIntegral": "420", "writerName": "楠溪..", "writerProfileAdress": "writer_image\\profile_126670306.jpg", "writerRankTotal": "41213", "writerRankWeekly": "759", "writerThumb": "123", "writerVisitNum": "2070", "blog_read_count": "276", "blog_time": "已于 2022-09-07 09:02:52 修改", "blog_title": "数据库MySQL----(二)语句", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>文章目录</h3>\n<ul><li><a href=\"#MySQL_1\">MySQL语句</a></li><li><ul><li><a href=\"#1_2\">1.查询语句</a></li><li><ul><li><a href=\"#1_3\">（1)简单的查询语句</a></li><li><a href=\"#2_26\">(2)条件查询</a></li><li><a href=\"#3inor_67\">(3）条件查询in(等同于or)</a></li><li><a href=\"#4_like_75\">（4）模糊查询 like？</a></li></ul>\n</li><li><a href=\"#2_89\">2.排序</a></li><li><a href=\"#3_108\">3.函数</a></li><li><ul><li><a href=\"#1_109\">（1）分组函数</a></li><li><a href=\"#2_123\">（2）单行处理函数</a></li><li><a href=\"#3group_by__having_157\">（3）group by 和 having</a></li></ul>\n</li><li><a href=\"#4DQL_193\">4.总结完整的DQL语句</a></li></ul>\n</li></ul>\n</div>\n<p></p>\n<h1><a id=\"MySQL_1\"></a>MySQL语句</h1>\n<h2><a id=\"1_2\"></a>1.查询语句</h2>\n<h3><a id=\"1_3\"></a>（1)简单的查询语句</h3>\n<p><font color=\"blue\">语法格式：<br/>    select 字段名1，字段名2，字段名3，… from 表名;</font></p>\n<p><em><strong>提示：</strong></em></p>\n<ul><li>任何一条sql语句都以“；”结尾。</li><li>sql语句不区分大小写。</li></ul>\n<p><em><strong>例如：查询员工的年薪</strong></em><br/> （字段可以参与数学运算）<br/> <img alt=\"在这里插入图片描述\" src=\"image\\ce11ccb426ea4257b3728fa47603c27f.png\"/><br/> <em><strong>例子：给查询的列重命名？</strong></em><br/> <img alt=\"在这里插入图片描述\" src=\"image\\1e5474dad00044cf95f9e99ef0d18586.png\"/><br/> <em><strong>如何将别名中含有中文？</strong></em><br/> <strong>select ename sal * 12 as 年薪 from emp；</strong><font color=\"red\">//错误！</font><br/> <strong>select ename sal * 12 as ‘年薪’ from emp；</strong><font color=\"red\">//正确！</font></p>\n<p><font color=\"red\">注意：标注的sql语句中要求字符串使用单引号括起来，as关键字可以省略。</font></p>\n<p><em><strong>例子：查询全部字段</strong></em><br/> （不能使用在java开发中，效率较低）<br/> <font color=\"blue\">select * from emp;</font></p>\n<h3><a id=\"2_26\"></a>(2)条件查询</h3>\n<p><font color=\"blue\">语法格式：<br/>    select 字段，字段，…<br/>    from 表明<br/>    where 条件；</font><br/> 执行顺序：先from，where，最后select</p>\n<ul><li> <p><em><strong>例子：查询工资等于5000的员工的姓名？</strong></em><br/> select ename from emp where sal = 5000;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\dc77c793c792497f8b46a839aa17ff07.png\"/></p> </li><li> <p><em><strong>例子：找出工资高于3000的员工？</strong></em><br/> select ename from emp where sal &lt; &gt; 3000;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\42970df41cc24ab29682c578318885ab.png\"/></p> </li><li> <p><em><strong>例子：查询SMITH的工资</strong></em><br/> select sal from emp where ename = ‘SMITH’;</p> </li></ul>\n<p><em><strong>例子：找出工资在1100和3000之间的员工（包括1100和3000）</strong></em></p>\n<p><font color=\"red\">第一种方法：</font>select ename,sal from emp where sal &gt;=1100 and sal &lt;=3000;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\76678735aaf946c6b1227f5bf36fbd3c.png\"/></p>\n<p><font color=\"red\">第二种方法：</font>select ename,sal from emp where sal between 1100 and 3000;<br/> <font color=\"blue\">注：between …and…左小右大，除了可以使用在数字方面之外，还可以使用在字符串方面。字符方面左闭右开。</font><br/> <img alt=\"在这里插入图片描述\" src=\"image\\f0a1f80e36d74d239e2d1bdc79f3b0d1.png\"/></p>\n<ul><li><em><strong>例子：找出哪些人津贴为空？</strong></em><br/> （is null /is not null）<br/> <font color=\"blue\">在数据中null不是一个值，代表什么也没有，为空。空不是一个值，不能用等号衡量，必须使用is null 或者is not null。</font></li></ul>\n<p>select ename,sal,comm from emp where comm is null;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\b9bc2b9024dd41a09632f7ad9c68c799.png\"/></p>\n<ul><li><em><strong>例子：找出哪些人津贴不为空？</strong></em><br/> select ename,sal,comm from emp where sal is not null;<img alt=\"在这里插入图片描述\" src=\"image\\f5d53339e35744c3b9b0d63de17255f8.png\"/></li><li><em><strong>例子：找出工作岗位是MANAGER和SALEMAN的员工</strong></em><br/> select ename,job from emp where job = ‘MANAGER’ or job = ‘SALEMAN’;</li></ul>\n<p><font color=\"blue\"><em><strong>and 和 or 联合起来使用：找出薪资大于1000并且部门编号是20或30 的员工</strong></em></font><br/> <img alt=\"在这里插入图片描述\" src=\"image\\d8aae7472a5b48a4a62fe3a862d36ada.png\"/><br/> <font color=\"blue\">加括号！！！当运算符优先级不确定时加小括号。</font></p>\n<h3><a id=\"3inor_67\"></a>(3）条件查询in(等同于or)</h3>\n<ul><li><em><strong>例子：找出工作岗位MANAGER和SALEMAN的员工</strong></em><br/> <font color=\"red\"><em><strong>in等同于or</strong></em></font><br/> select ename,job from emp where job in(‘SALEMAN’,‘MANAGER’);<br/> <img alt=\"在这里插入图片描述\" src=\"image\\72cf71b90c0344ae882d62e78f47dc88.png\"/><br/> select ename,job from emp where sal in (800,5000);<br/> <font color=\"red\"><em><strong>in后面的值不是区间，是具体的值，not in：不在这几个值当中</strong></em></font></li></ul>\n<h3><a id=\"4_like_75\"></a>（4）模糊查询 like？</h3>\n<ul><li><em><strong>例子：找出名字中带有o的</strong></em><br/> <font color=\"red\">在模糊查询中，必须掌握两个特殊的符号，一个是%，一个是_，%代表任意多个字符，_代表任意一个字符</font></li></ul>\n<p>select ename from emp where ename like ‘%o%’;<br/> <img alt=\";\" src=\"image\\d5eeaca6db554b2bbbaa86af81aae329.png\"/></p>\n<ul><li><em><strong>例子：找出名字中第二个字母是A的？</strong></em><br/> select ename from emp where ename like ‘_A%’;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\56cfc7279cf54234ac5e2bfe2f3b1ef5.png\"/></li><li><em><strong>例子：找出名字中有下划线的？</strong></em><br/> select name from t_user where name like ‘%_%’;</li></ul>\n<h2><a id=\"2_89\"></a>2.排序</h2>\n<ul><li><em><strong>按照工资升序，找出员工名和薪资？</strong></em><br/> select<br/>  ename,sal<br/> from<br/>  emp<br/> order by<br/>   sal;<br/> <font color=\"red\">默认升序，asc表示升序，desc表示降序</font><br/> <img alt=\"在这里插入图片描述\" src=\"image\\42e98ea3c5dc4a6ca5b233433c3e4684.png\"/><br/> select ename,sal from emp order by sal; <font color=\"red\">//升序</font></li></ul>\n<p>select ename,sal from emp order by sal desc;<font color=\"red\">//降序</font><br/> <img alt=\"在这里插入图片描述\" src=\"image\\6bd997e3cc9c4e2faab04b932f414fc7.png\"/></p>\n<ul><li><em><strong>例子：按照工资的降序排列，当工资相同的时候再按照名字的升序排列</strong></em><br/> select ename,sal from emp order by sal desc,ename asc;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e6e8393422de4eaca6fdded3b90edf82.png\"/><br/> <font color=\"red\">注意：越靠前的字段越能起到主导作用，只有前面的字段无法排序的时候，才会启用后面字段。</font></li></ul>\n<h2><a id=\"3_108\"></a>3.函数</h2>\n<h3><a id=\"1_109\"></a>（1）分组函数</h3>\n<p>count 计数 sum 求和 avg平均值 max最大值 min最小值<br/> <font color=\"red\">记住：所有的分组函数都是对“某一组”数据进行操作的</font></p>\n<ul><li><em><strong>例子：找出工资总和？</strong></em><br/> select sum(sal) from emp;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e2c7c7a6ee6148098d03de8bf0154340.png\"/></li></ul>\n<p><font color=\"red\">分组函数一共五个，分组函数又叫多行处理函数，特点：输入多行，最终得出一行</font></p>\n<p><font color=\"red\">分组函数自动忽略NULL</font><br/> select count(comm)from emp;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\7d0ba879f4b144f09c363ea97dbd8f73.png\"/></p>\n<h3><a id=\"2_123\"></a>（2）单行处理函数</h3>\n<p>什么是单行处理函数？输入一行，输出多行。</p>\n<ul><li> <p><em><strong>例子：计算每个员工的年薪？</strong></em><br/> select ename,(sal + comm) * 12 as yearsal from emp;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e0e3179483f6468eae638231a225e90c.png\"/><br/> <font color=\"red\">注意：800＋NULL = NULL<br/> 重点：所有数据库都是这样规定的，只要有NULL参与的运算结果一定是NULL。</font></p> </li><li> <p><em><strong>ifnull()函数：空处理函数</strong></em><br/> ifnull()可能为null的数据，被当作什么处理，属于单行处理函数。<br/> select ename,ifnull(comm,0)as comm from emp;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\24e7f03550b34c2e9edb808ab9b10533.png\"/></p> </li><li> <p><em><strong>进一步改进，防止有null得到的结果为null</strong></em><br/> select ename,(sal + ifnull(comm,0)) * 12 as yearsal from emp;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\21e3ee4e8bf14770b1382fd2bc7b95f0.png\"/></p> </li><li> <p><em><strong>例子：找出工资高于平均工资的员工？</strong></em><br/> select ename,sal from emp where sal &gt; avg(sal);<br/> <img alt=\"在这里插入图片描述\" src=\"image\\240e6e983e3645c2bcbd46eec8b0abf6.png\"/><br/> <font color=\"blue\">报错原因：分组函数不能直接使用在where子句中，这是SQL语言的一个语法规则。因为group by 在where之后执行，没分组分组函数用不了。</font></p> </li><li> <p>count(*)和count(具体的某个字段)</p> </li></ul>\n<p>count( *)不是统计某个字段中数据个数，而是统计总记录条数<br/> count（comm）表示统计comm字段中不为NULL的数据总数量</p>\n<ul><li>分组函数也能组合使用<br/> select count(*),sum(sal),avg(sal),max(sal),min(sal),from emp;</li></ul>\n<h3><a id=\"3group_by__having_157\"></a>（3）group by 和 having</h3>\n<p>group by:按照某个字段或者某些字段进行分组<br/> having：是对分组之后的数据再次过滤</p>\n<ul><li> <p><em><strong>例子：找出每个工作岗位的最高薪资？</strong></em><br/> select max(sal),job from emp group by job;<br/>  3        1    2<br/> <font color=\"orange\">注意：分组函数一般都会和group by 联合使用，这也是为什么他被称为分组函数的原因，并且任何一个函数，都是在group by 语句执行之后才执行的，当一条sql语句没有group by 的话，整张表会自成一组。</font></p> </li><li> <p><em><strong>例子：找出高于平均工资的员工</strong></em><br/> 第一步：找出平均工资<br/> select avg(sal) from emp;<br/> 第二步：找出高于平均工资的员工<br/> select ename,sal from emp where sal &gt; (select avg(sal) from emp);<br/> <font color=\"red\">(子查询，嵌套select语句)</font></p> </li></ul>\n<p>多个字段能不能联合起来一起分组？<br/> <em><strong>例子：找出每个部门不同工作岗位的最高薪资？</strong></em><br/> select deptno,job,max(sal)<br/> from emp<br/> group by deptno,job;<br/> <img alt=\"在这里插入图片描述\" src=\"image\\b66549423be84a2880df0a97346a72d2.png\"/></p>\n<p><em><strong>例子：找出每个部门的最高薪资，要求显示薪资大于2900的数据</strong></em><br/> 第一步：找出每个部门最高薪资<br/> select max(sal),deptno from emp group by deptno;<br/> 第二步：找出薪资大于2900<br/> select max(sal),deptno from emp group by deptno having max(sal)&gt;2900;<br/> <font color=\"red\">//这种方式效率低</font></p>\n<p>select max(sal),deptno from emp where sal &gt; 2900 group by deptno;<br/> <font color=\"red\">//效率较高，建议能够使用where过滤的用where</font></p>\n<h2><a id=\"4DQL_193\"></a>4.总结完整的DQL语句</h2>\n<p><font color=\"red\">5. </font>select<br/> …<br/> <font color=\"red\">1. </font>from<br/> …<br/> <font color=\"red\">2. </font>where<br/> …<br/> <font color=\"red\">3. </font>group by<br/> …<br/> <font color=\"red\">4. </font>having<br/> …<br/> <font color=\"red\">6. </font>order by<br/> …;<br/> <font color=\"blue\">书写顺序不能颠倒！！！！！！</font></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}