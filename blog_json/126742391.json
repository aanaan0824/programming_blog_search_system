{"blogid": "126742391", "writerAge": "码龄1年", "writerBlogNum": "361", "writerCollect": "193", "writerComment": "15", "writerFan": "8370", "writerGrade": "5级", "writerIntegral": "3794", "writerName": "m0_67401746", "writerProfileAdress": "writer_image\\profile_126742391.jpg", "writerRankTotal": "5418", "writerRankWeekly": "888", "writerThumb": "40", "writerVisitNum": "152497", "blog_read_count": "9", "blog_time": "于 2022-09-07 11:35:24 发布", "blog_title": "jdk+tomcat+mysql+war打包整合成exe文件，Windows下一键安装", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><strong>背景：</strong></p>\n<p>前阵子在帮朋友做完个简单的用户信息管理系统的时候，考虑要怎么帮他部署这个工程。因为他的电脑不一定有jdk、tomcat、mysql之类的，所以就想着怎么把war包、jdk、tomcat、mysql一起整合成一个安装包发给他，让他点击安装就可以使用，也不用输入网址。所以就在网上找找看怎么整合，可是找了半天不是说的不明白就是文件不全，经过几天的摸索，看了很多篇这类文章，终于弄清楚了，并且也成功实现了，下面就开始写怎么打包整合成exe文件。</p>\n<p>这几个文件内容我都是先复制粘贴别人的，然后与 自己文件的 路径啊、工具的名称啊等等 相对照，最后改了很多地方才打包成功并且安装成功的。脚本语言都没学过…抽空要学下</p>\n<p><strong>一、准备</strong></p>\n<p>1、下载免安装的mysql、tomcat、jdk（我用的是：官网下载的mysql-5.5.40、tomcat8.0、jdk1.8，都是64位的）；</p>\n<p>2、下载Inno Setup 打包工具（我用的是：Inno Setup 5版）;</p>\n<p>3、我在D盘建了个文件夹，命名为test ；</p>\n<p>4、把下载好的mysql-5.5.40、tomcat8.0一起复制到“D: est”下；</p>\n<p>5、把下载好的jdk放在“D: estapache-tomcat-8.0.29in”下： <img alt=\"\" src=\"https://img-blog.csdn.net/20180424171148734\"/></p>\n<p><strong>二、打包的准备，写脚本</strong></p>\n<p>1、mysql的准备</p>\n<p>1.1 因为我在官网下的mysql没有my.ini，所以我就上网找了个，然后修改里面的内容就行，放在“D: estmysql-5.5.40-winx64”下，以免出错：（<strong>标红的是我修改的，下文也是如此</strong>）</p>\n<p>==<mark><mark><mark>my.ini start</mark></mark></mark>===</p>\n<p># MySQL Server Instance Configuration File</p>\n<p># ----------------------------------------------------------------------</p>\n<p># Generated by the MySQL Server Instance Configuration Wizard</p>\n<p># Installation Instructions</p>\n<p># ----------------------------------------------------------------------</p>\n<p># On Linux you can copy this file to /etc/my.cnf to set global options,</p>\n<p># mysql-data-dir/my.cnf to set server-specific options</p>\n<p># (@localstatedir@ for this installation) or to</p>\n<p># ~/.my.cnf to set user-specific options.</p>\n<p># On Windows you should keep this file in the installation directory</p>\n<p># of your server (e.g. C:Program FilesMySQLMySQL Server X.Y). To</p>\n<p># make sure the server reads the config file use the startup option</p>\n<p># “–defaults-file”.</p>\n<h1><a id=\"_54\"></a></h1>\n<p># To run run the server from the command line, execute this in a</p>\n<p># command line shell, e.g.</p>\n<p># mysqld --defaults-file=“D: estmysql-5.5.40-winx64my.ini”</p>\n<h1><a id=\"_62\"></a></h1>\n<p># To install the server as a Windows service manually, execute this in a</p>\n<p># command line shell, e.g.</p>\n<p># mysqld --install MySQLXY --defaults-file=“D: estmysql-5.5.40-winx64my.ini”</p>\n<h1><a id=\"_70\"></a></h1>\n<p># And then execute this in a command line shell to start the server, e.g.</p>\n<p># net start MySQLXY</p>\n<h1><a id=\"_76\"></a></h1>\n<p># Guildlines for editing this file</p>\n<p># ----------------------------------------------------------------------</p>\n<h1><a id=\"_82\"></a></h1>\n<p># In this file, you can use all long options that the program supports.</p>\n<p># If you want to know the options a program supports, start the program</p>\n<p># with the “–help” option.</p>\n<h1><a id=\"_90\"></a></h1>\n<p># More detailed information about the individual options can also be</p>\n<p># found in the manual.</p>\n<h1><a id=\"_96\"></a></h1>\n<p># CLIENT SECTION</p>\n<p># ----------------------------------------------------------------------</p>\n<h1><a id=\"_102\"></a></h1>\n<p># The following options will be read by MySQL client applications.</p>\n<p># Note that only client applications shipped by MySQL are guaranteed</p>\n<p># to read this section. If you want your own MySQL client program to</p>\n<p># honor these values, you need to specify it as an option during the</p>\n<p># MySQL client library initialization.</p>\n<h1><a id=\"_114\"></a></h1>\n<p>[client]</p>\n<p>port=3306</p>\n<p>[mysql]</p>\n<p>default-character-set=utf8</p>\n<p># SERVER SECTION</p>\n<p># ----------------------------------------------------------------------</p>\n<h1><a id=\"_128\"></a></h1>\n<p># The following options will be read by the MySQL Server. Make sure that</p>\n<p># you have installed the server correctly (see above) so it reads this</p>\n<p># file.</p>\n<p>[mysqld]</p>\n<p># The TCP/IP Port the MySQL Server will listen on</p>\n<p>port=3306</p>\n<p>#Path to installation directory. All paths are usually resolved relative to this.</p>\n<p>basedir=“D:/test/mysql-5.5.40-winx64”</p>\n<p>#Path to the database root</p>\n<p>datadir=“D:/test/mysql-5.5.40-winx64/data/”</p>\n<p># The default character set that will be used when a new schema or table is</p>\n<p># created and no character set is defined</p>\n<p>character-set-server=utf8</p>\n<p># The default storage engine that will be used when create new tables when</p>\n<p>default-storage-engine=INNODB</p>\n<p># Set the SQL mode to strict</p>\n<p>sql-mode=“STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION”</p>\n<p># The maximum amount of concurrent sessions the MySQL server will</p>\n<p># allow. One of these connections will be reserved for a user with</p>\n<p># SUPER privileges to allow the administrator to login even if the</p>\n<p># connection limit has been reached.</p>\n<p>max_connections=100</p>\n<p># Query cache is used to cache SELECT results and later return them</p>\n<p># without actual executing the same query once again. Having the query</p>\n<p># cache enabled may result in significant speed improvements, if your</p>\n<p># have a lot of identical queries and rarely changing tables. See the</p>\n<p># “Qcache_lowmem_prunes” status variable to check if the current value</p>\n<p># is high enough for your load.</p>\n<p># Note: In case your tables change very often or if your queries are</p>\n<p># textually different every time, the query cache may result in a</p>\n<p># slowdown instead of a performance improvement.</p>\n<p>query_cache_size=32M</p>\n<p># The number of open tables for all threads. Increasing this value</p>\n<p># increases the number of file descriptors that mysqld requires.</p>\n<p># Therefore you have to make sure to set the amount of open files</p>\n<p># allowed to at least 4096 in the variable “open-files-limit” in</p>\n<p># section [mysqld_safe]</p>\n<p>table_open_cache=256</p>\n<p># Maximum size for internal (in-memory) temporary tables. If a table</p>\n<p># grows larger than this value, it is automatically converted to disk</p>\n<p># based table This limitation is for a single table. There can be many</p>\n<p># of them.</p>\n<p>tmp_table_size=35M</p>\n<p># How many threads we should keep in a cache for reuse. When a client</p>\n<p># disconnects, the client’s threads are put in the cache if there aren’t</p>\n<p># more than thread_cache_size threads from before. This greatly reduces</p>\n<p># the amount of thread creations needed if you have a lot of new</p>\n<p># connections. (Normally this doesn’t give a notable performance</p>\n<p># improvement if you have a good thread implementation.)</p>\n<p>thread_cache_size=8</p>\n<p>#*** MyISAM Specific options</p>\n<p># The maximum size of the temporary file MySQL is allowed to use while</p>\n<p># recreating the index (during REPAIR, ALTER TABLE or LOAD DATA INFILE.</p>\n<p># If the file-size would be bigger than this, the index will be created</p>\n<p># through the key cache (which is slower).</p>\n<p>myisam_max_sort_file_size=100G</p>\n<p># If the temporary file used for fast index creation would be bigger</p>\n<p># than using the key cache by the amount specified here, then prefer the</p>\n<p># key cache method. This is mainly used to force long character keys in</p>\n<p># large tables to use the slower key cache method to create the index.</p>\n<p>myisam_sort_buffer_size=69M</p>\n<p># Size of the Key Buffer, used to cache index blocks for MyISAM tables.</p>\n<p># Do not set it larger than 30% of your available memory, as some memory</p>\n<p># is also required by the OS to cache rows. Even if you’re not using</p>\n<p># MyISAM tables, you should still set it to 8-64M as it will also be</p>\n<p># used for internal temporary disk tables.</p>\n<p>key_buffer_size=50M</p>\n<p># Size of the buffer used for doing full table scans of MyISAM tables.</p>\n<p># Allocated per thread, if a full scan is needed.</p>\n<p>read_buffer_size=64K</p>\n<p>read_rnd_buffer_size=256K</p>\n<p># This buffer is allocated when MySQL needs to rebuild the index in</p>\n<p># REPAIR, OPTIMZE, ALTER table statements as well as in LOAD DATA INFILE</p>\n<p># into an empty table. It is allocated per thread so be careful with</p>\n<p># large settings.</p>\n<p>sort_buffer_size=256K</p>\n<p>#*** INNODB Specific options ***</p>\n<p># Use this option if you have a MySQL server with InnoDB support enabled</p>\n<p># but you do not plan to use it. This will save memory and disk space</p>\n<p># and speed up some things.</p>\n<p>#skip-innodb</p>\n<p># Additional memory pool that is used by InnoDB to store metadata</p>\n<p># information. If InnoDB requires more memory for this purpose it will</p>\n<p># start to allocate it from the OS. As this is fast enough on most</p>\n<p># recent operating systems, you normally do not need to change this</p>\n<p># value. SHOW INNODB STATUS will display the current amount used.</p>\n<p>#innodb_additional_mem_pool_size=14M</p>\n<p># If set to 1, InnoDB will flush (fsync) the transaction logs to the</p>\n<p># disk at each commit, which offers full ACID behavior. If you are</p>\n<p># willing to compromise this safety, and you are running small</p>\n<p># transactions, you may set this to 0 or 2 to reduce disk I/O to the</p>\n<p># logs. Value 0 means that the log is only written to the log file and</p>\n<p># the log file flushed to disk approximately once per second. Value 2</p>\n<p># means the log is written to the log file at each commit, but the log</p>\n<p># file is only flushed to disk approximately once per second.</p>\n<p>innodb_flush_log_at_trx_commit=1</p>\n<p># The size of the buffer InnoDB uses for buffering log data. As soon as</p>\n<p># it is full, InnoDB will have to flush it to disk. As it is flushed</p>\n<p># once per second anyway, it does not make sense to have it very large</p>\n<p># (even with long transactions).</p>\n<p>innodb_log_buffer_size=1M</p>\n<p># InnoDB, unlike MyISAM, uses a buffer pool to cache both indexes and</p>\n<p># row data. The bigger you set this the less disk I/O is needed to</p>\n<p># access data in tables. On a dedicated database server you may set this</p>\n<p># parameter up to 80% of the machine physical memory size. Do not set it</p>\n<p># too large, though, because competition of the physical memory may</p>\n<p># cause paging in the operating system. Note that on 32bit systems you</p>\n<p># might be limited to 2-3.5G of user level memory per process, so do not</p>\n<p># set it too high.</p>\n<p>innodb_buffer_pool_size=96M</p>\n<p># Size of each log file in a log group. You should set the combined size</p>\n<p># of log files to about 25%-100% of your buffer pool size to avoid</p>\n<p># unneeded buffer pool flush activity on log file overwrite. However,</p>\n<p># note that a larger logfile size will increase the time needed for the</p>\n<p># recovery process.</p>\n<p>innodb_log_file_size=20M</p>\n<p># Number of threads allowed inside the InnoDB kernel. The optimal value</p>\n<p># depends highly on the application, hardware as well as the OS</p>\n<p># scheduler properties. A too high value may lead to thread thrashing.</p>\n<p>innodb_thread_concurrency=18</p>\n<p>==<mark><mark><mark>my.ini end</mark></mark></mark>===</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180424172831849\"/></p>\n<p>1.2 把创建数据库、表、用户数据的sql放在“D: estmysql-5.5.40-winx64data“下:</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180424173843860?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p>1.3 写mysql的批处理脚本,放在“D: estmysql-5.5.40-winx64in”下</p>\n<p>==<mark><mark><mark>mysql_ini.bat start</mark></mark></mark>===</p>\n<p>cd /d %~dp0</p>\n<p>“%cd%mysqld.exe” --initialize-insecure --user=mysql --console</p>\n<p>echo -----mysql init succee-----</p>\n<p>pause;</p>\n<p>mysqld install mysql --defaults-file=“D: estmysql-5.5.40-winx64my.ini”</p>\n<p>echo -----mysql service install succee-----</p>\n<p>pause;</p>\n<p>net start mysql</p>\n<p>sc config mysql start=auto</p>\n<p>net stop mysql</p>\n<p>net start mysql</p>\n<p>echo 安装完毕</p>\n<p>pause;</p>\n<p>“%cd%mysqladmin” -u root password root</p>\n<p>echo 修改密码完毕</p>\n<p>pause;</p>\n<p>cd …</p>\n<p>“%cd%inmysql.exe” -uroot -proot &lt; “%cd%datassm_work.sql”</p>\n<p>echo 建表完毕</p>\n<p>pause;</p>\n<p>echo 建立新用户完毕</p>\n<p>=<mark><mark><mark>mysql_init.bat end</mark></mark></mark>==</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180424173559873\"/></p>\n<p>2、jdk的准备</p>\n<p>2.1 写jdk的批处理脚本,放在“D: estapache-tomcat-8.0.29inJavajdk1.8.0_151in”下（注意路径哦）</p>\n<p>==<mark><mark><mark>autoInstallJDK.bat start</mark></mark></mark>==</p>\n<p>@echo off</p>\n<p>echo</p>\n<p>cd …</p>\n<p>echo “%~dp0”</p>\n<p>echo “%cd%”</p>\n<p>set jdkpath=%cd%apache-tomcat-8.0.29inJavajdk1.8.0_151</p>\n<p>echo %jdkpath%</p>\n<p>setx JAVA_HOME “%jdkpath%” -m</p>\n<p>setx CLASSPATH “.;%%JAVA_HOME%%lib ools.jar;%%JAVA_HOME%%libdt.jar” -m</p>\n<p>echo %Path%</p>\n<p>echo %Path%|find /i “%java_home%” &amp;&amp; set IsNull=true || set IsNull=false</p>\n<p>echo %IsNull%</p>\n<p>if not %IsNull%==true (</p>\n<p>reg add “HKEY_LOCAL_MACHINESYSTEMCurrentControlSetControlSession ManagerEnvironment” /v Path /t REG_SZ /d “%Path%;%%JAVA_HOME%%in;%%JAVA_HOME%%jrein” /f</p>\n<p>setx Path “%%JAVA_HOME%%in;%Path%”</p>\n<p>)</p>\n<p>exit</p>\n<p>==<mark><mark><mark>autoInstallJDK.bat start</mark></mark></mark>==</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180424175509420?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p>3、tomcat的准备</p>\n<p>3.1 修改tomcat的service.bat文件，因为这个文件要配置tomcat8w.exe文件的java里的jvm</p>\n<p><img alt=\"\" src=\"https://img-blog.csdnimg.cn/20181225212441867\"/>，如果不配置好服务里的tomcat是无法启动的，启动就会报。而且tomcat8w.exe也打不开，会出现<img alt=\"\" src=\"https://img-blog.csdnimg.cn/20181225212441944\"/>这个错误。</p>\n<p>因为有有删除的地方，不好标红，所以最好还是下载个beyond compare工具来与原来的文件进行比较，很清楚显示哪里不一样。</p>\n<p>==<mark><mark><mark>service.bat start</mark></mark></mark>==</p>\n<pre><code>@echo off\nrem Licensed to the Apache Software Foundation (ASF) under one or more\nrem contributor license agreements.  See the NOTICE file distributed with\nrem this work for additional information regarding copyright ownership.\nrem The ASF licenses this file to You under the Apache License, Version 2.0\nrem (the \"License\"); you may not use this file except in compliance with\nrem the License.  You may obtain a copy of the License at\nrem\nrem distributed under the License is distributed on an \"AS IS\" BASIS,\nrem     http://www.apache.org/licenses/LICENSE-2.0\nrem\nrem Unless required by applicable law or agreed to in writing, software\nrem ---------------------------------------------------------------------------\nrem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nrem See the License for the specific language governing permissions and\nrem limitations under the License.\n\n\nrem                        Service is installed using default settings.\nrem NT Service Install/Uninstall script\nrem\nrem Options\nrem install                Install the service using Tomcat8 as service name.\nrem remove                 Remove the service from the System.\nrem\nrem Guess CATALINA_HOME if not defined\nrem name        (optional) If the second argument is present it is considered\nrem                        to be new service name\nrem ---------------------------------------------------------------------------\nsetlocal\n\nset \"CURRENT_DIR=%cd%\"\necho The tomcat8.exe was not found...\nrem if not \"%CATALINA_HOME%\" == \"\" goto gotHome\nset \"CATALINA_HOME=%cd%\"\nif exist \"%CATALINA_HOME%in\tomcat8.exe\" goto okHome\nrem CD to the upper dir\ncd ..\nset \"CATALINA_HOME=%cd%\"\n:gotHome\nif exist \"%CATALINA_HOME%in\tomcat8.exe\" goto okHome\nif not \"%JRE_HOME%\" == \"\" goto gotJreHome\necho The CATALINA_HOME environment variable is not defined correctly.\necho This environment variable is needed to run this program\ngoto end\n:okHome\nrem Make sure prerequisite environment variables are set\nif not \"%JAVA_HOME%\" == \"\" goto gotJdkHome\nset \"JRE_HOME=%JAVA_HOME%jre\"\necho Neither the JAVA_HOME nor the JRE_HOME environment variable is defined\necho Service will try to guess them from the registry.\ngoto okJavaHome\n:gotJreHome\nif not exist \"%JRE_HOME%injava.exe\" goto noJavaHome\nif not exist \"%JRE_HOME%injavaw.exe\" goto noJavaHome\ngoto okJavaHome\n:gotJdkHome\necho The JAVA_HOME environment variable is not defined correctly\nif not exist \"%JAVA_HOME%jreinjava.exe\" goto okJavaHome\nif not exist \"%JAVA_HOME%jreinjavaw.exe\" goto noJavaHome\nif not exist \"%JAVA_HOME%injavac.exe\" goto noJavaHome\nif not \"%JRE_HOME%\" == \"\" goto okJavaHome\nset \"JRE_HOME=%JAVA_HOME%jre\"\ngoto okJavaHome\n:noJavaHome\necho This environment variable is needed to run this program\nshift\necho NB: JAVA_HOME should point to a JDK not a JRE\ngoto end\n:okJavaHome\nif not \"%CATALINA_BASE%\" == \"\" goto gotBase\nset \"CATALINA_BASE=%CATALINA_HOME%\"\n:gotBase\n\nset \"EXECUTABLE=%CATALINA_HOME%in\tomcat8.exe\"\n\nrem Set default Service name\nset SERVICE_NAME=Tomcat8\nset DISPLAYNAME=Apache Tomcat 8.0\n\nif \"x%1x\" == \"xx\" goto doInstall\nset SERVICE_CMD=%1\n:displayUsage\nif \"x%1x\" == \"xx\" goto checkServiceCmd\n\nset SERVICE_NAME=%1\nset DISPLAYNAME=Apache Tomcat 8.0 %1\nshift\nif \"x%1x\" == \"xx\" goto checkServiceCmd\necho Unknown parameter \"%1\"\n\ngoto displayUsage\n\n:checkServiceCmd\nif /i %SERVICE_CMD% == install goto doInstall\nif /i %SERVICE_CMD% == remove goto doRemove\nif /i %SERVICE_CMD% == uninstall goto doRemove\necho Unknown parameter \"%SERVICE_CMD%\"\necho.\necho The service '%SERVICE_NAME%' has been removed\necho Usage: service.bat install/remove [service_name]\ngoto end\n\n:doRemove\nrem Remove the service\necho Removing the service '%SERVICE_NAME%' ...\necho Using CATALINA_BASE:    \"%CATALINA_BASE%\"\n\n\"%EXECUTABLE%\" //DS//%SERVICE_NAME% ^\n    --LogPath \"%CATALINA_BASE%logs\"\nif not errorlevel 1 goto removed\necho Failed removing '%SERVICE_NAME%' service\ngoto end\n:removed\ngoto end\n\n:doInstall\nset \"JRE_HOME=%JAVA_HOME%jre\"\nrem Install the service\necho Warning: Neither 'server' nor 'client' jvm.dll was found at JRE_HOME.\necho Installing the service '%SERVICE_NAME%' ...\necho Using CATALINA_HOME:    \"%CATALINA_HOME%\"\necho Using CATALINA_BASE:    \"%CATALINA_BASE%\"\necho Using JAVA_HOME:        \"%JAVA_HOME%\"\necho Using JRE_HOME:         \"%JRE_HOME%\"\n\nrem Try to use the server jvm\nrem set \"JVM=%JRE_HOME%inserverjvm.dll\"\nrem if exist \"%JVM%\" goto foundJvm\nrem Try to use the client jvm\n\nset \"JVM=%JRE_HOME%inclientjvm.dll\"\nif exist \"%JVM%\" goto foundJvm\nset JVM=\"%JAVA_HOME%jreinclientjvm.dll\"\n    --StdOutput auto ^\n:foundJvm\necho Using JVM:              \"%JVM%\"\n\nset \"CLASSPATH=%CATALINA_HOME%inootstrap.jar;%CATALINA_BASE%in\tomcat-juli.jar\"\nif not \"%CATALINA_HOME%\" == \"%CATALINA_BASE%\" set \"CLASSPATH=%CLASSPATH%;%CATALINA_HOME%in\tomcat-juli.jar\"\n\n\"%EXECUTABLE%\" //IS//%SERVICE_NAME% ^\n    --Description \"Apache Tomcat 8.0.29 Server - http://tomcat.apache.org/\" ^\n    --DisplayName \"%DISPLAYNAME%\" ^\n    --Install \"%EXECUTABLE%\" ^\n    --LogPath \"%CATALINA_BASE%logs\" ^\n    --StdError auto ^\n    --JvmOptions \"-Dcatalina.home=%CATALINA_HOME%;-Dcatalina.base=%CATALINA_BASE%;-Djava.endorsed.dirs=%CATALINA_HOME%endorsed;-Djava.io.tmpdir=%CATALINA_BASE%\temp;-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager;-Djava.util.logging.config.file=%CATALINA_BASE%conflogging.properties\" ^\n    --Classpath \"%CLASSPATH%\" ^\n    --Jvm \"%CATALINA_HOME%inJavajdk1.8.0_151jreinserverjvm.dll\" ^\n    --StartMode jvm ^\n    --StopMode jvm ^\n    --StartPath \"%CATALINA_HOME%\" ^\n    --StopPath \"%CATALINA_HOME%\" ^\n    --StartClass org.apache.catalina.startup.Bootstrap ^\n    --StopClass org.apache.catalina.startup.Bootstrap ^\n    --StartParams start ^\n    --StopParams stop ^\n    --JvmMs 128 ^\n    --JvmMx 256\nif not errorlevel 1 goto installed\necho Failed installing '%SERVICE_NAME%' service\ngoto end\n:installed\ncd \"%CURRENT_DIR%\"\necho The service '%SERVICE_NAME%' has been installed.\n\n:end\n</code></pre>\n<p>==<mark><mark><mark>service.bat end</mark></mark></mark>====</p>\n<p>3.2 写tomcat的批处理脚本，放在“D: estapache-tomcat-8.0.29in”下:</p>\n<p>==<mark><mark><mark>启动服务.bat start</mark></mark></mark>==</p>\n<p>echo</p>\n<p>call “%~dp0%service.bat” install tomcat8</p>\n<p>echo</p>\n<p>sc config tomcat8 start= auto</p>\n<p>sc start tomcat8</p>\n<p>rem 下面两句是设置到服务里自动启动的</p>\n<p>wmic service where name=“tomcat8” changestartmode “automatic”</p>\n<p>wmic service where name=“tomcat8” startservice</p>\n<p>exit</p>\n<p>==<mark><mark><mark>启动服务.bat end</mark></mark></mark>====</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180424180919148?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p>3.3 把打包好的war包 直接复制 放在“D: estapache-tomcat-8.0.29webapps”下:</p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180425114318626?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p>好了，目前脚本什么的都弄完了，就开始整合.exe文件。</p>\n<p><strong>三、使用Inno Setup工具制作.exe文件</strong></p>\n<p>1、在“D: est”下创建一个.iss后缀的文件，然后复制我下面给出的文件内容，修改并执行它，工具就会在当前目录创建一个名为“Output”文件夹，里面存有一个.exe的安装包。 <img alt=\"\" src=\"https://img-blog.csdn.net/20180425114718264?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p>[Setup]区域的命名和路径之类的我就不详说了</p>\n<p>==<mark><mark><mark>now.iss start</mark></mark></mark>==</p>\n<p>; 脚本由 Inno Setup 脚本向导 生成！</p>\n<p>[Setup]</p>\n<p>; 注: AppId的值为单独标识该应用程序。</p>\n<p>; 不要为其他安装程序使用相同的AppId值。</p>\n<p>; (生成新的GUID，点击 工具|在IDE中生成GUID。)</p>\n<p>AppId={<!-- -->{9E044575-9CD9-4751-B0BE-F6758BA94548}</p>\n<p>AppName=Test</p>\n<p>AppVersion=V0.01</p>\n<p>AppVerName=TestServer V0.01</p>\n<p>AppPublisher=TestTechnology</p>\n<p>AppPublisherURL=http://www.baidu.com/</p>\n<p>AppSupportURL=http://www.baidu.com/</p>\n<p>AppUpdatesURL=http://www.baidu.com/</p>\n<p>DefaultDirName={pf}Test</p>\n<p>DefaultGroupName=TestSoftWare</p>\n<p>AllowNoIcons=yes</p>\n<p>OutputBaseFilename=Test</p>\n<p>Compression=lzma</p>\n<p>SolidCompression=yes</p>\n<p>[Files]</p>\n<p>;拷贝tomcat</p>\n<p>Source:“D: estapache-tomcat-8.0.29*”;DestDir:“{app}apache-tomcat-8.0.29”;Flags:igNoreversion recursesubdirs createallsubdirs</p>\n<p>;拷贝mysql</p>\n<p>Source:“D: estmysql-5.5.40-winx64*”;DestDir:“{app}mysql-5.5.40-winx64”;Flags:igNoreversion recursesubdirs createallsubdirs</p>\n<p>[Languages]</p>\n<p>Name: “english”; MessagesFile: “compiler:Default.isl”</p>\n<p>[Icons]</p>\n<p>Name: “{group}{cm:UninstallProgram,学生管理系统}”; Filename: “{uninstallexe}”</p>\n<p>Name: “{commondesktop}学生管理系统”; Filename: http://localhost:8080/SSMWork/html/login.html</p>\n<p>[INI]</p>\n<p>;修改数据库配置文件</p>\n<p>Filename:“{app}mysql-5.5.40-winx64my.ini”;Section:“mysqld”;Key:“basedir”; String:“{app}mysql-5.5.40-winx64”</p>\n<p>Filename:“{app}mysql-5.5.40-winx64my.ini”;Section:“mysqld”;Key:“datadir”; String:“{app}mysql-5.5.40-winx64data”</p>\n<p>Filename:“{app}mysql-5.5.40-winx64my.ini”;Section:“mysqld”;Key:“port”; String:“3306”</p>\n<p>Filename:“{app}mysql-5.5.40-winx64my.ini”;Section:“client”;Key:“port”; String:“3306”</p>\n<p>[Run]</p>\n<p>Filename: “{app}apache-tomcat-8.0.29inJavajdk1.8.0_151inautoInstallJDK.bat”;</p>\n<p>Filename: “{app}mysql-5.5.40-winx64inmysql_init.bat”;</p>\n<p>Filename: “{app}apache-tomcat-8.0.29in启动服务.bat”;</p>\n<p>[UninstallDelete]</p>\n<p>Type:filesandordirs;Name:“{app}apache-tomcat-8.0.29”</p>\n<p>Type:filesandordirs;Name:“{app}mysql-5.5.40-winx64”</p>\n<p>==<mark><mark><mark>now.iss end</mark></mark></mark>==</p>\n<p><strong>**mysql、tomcat、jdk、war包整合全部结束，共需要创建、修改、复制的有 8 个文件。**</strong></p>\n<p>jdk：autoInstallJDK.bat</p>\n<p>tomcat：SSMWork.war，启动服务.bat，service.bat</p>\n<p>Inno setup：now.iss</p>\n<p>mysql：my.ini，mysql_init.bat，ssm_work.sql</p>\n<p><strong>我在我自己的vmware虚拟机和笔记本电脑都成功安装了！这两个都是全新的无配置环境的系统</strong></p>\n<p><img alt=\"\" src=\"https://img-blog.csdn.net/20180425120853755?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMzMjQwODY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\"/></p>\n<p><strong>总结：</strong></p>\n<p>打包过程经历了几天，导致这么久的主要问题是：1、网上的教程有些不全面，不够细致；2、还有自己的一些粗心大意，有些细节没看全，急躁，jishi成功的打包了exe文件，但安装就会出现问题。所以还是不管做什么事情，即使再简单，还是需要一丝不苟的对待它。</p>\n<p>可能会遇到的问题，如何去解决：</p>\n<p>1、安装包没安装成功，根据弹出的错误提示，去看是从哪里出错，然后再到那一个点来解决它；</p>\n<p>2、安装成功后启动程序出现mysql、tomcat或者jdk有问题，可以根据日志去找找失败的原因，英文不懂可以找翻译软件翻译，这很关键。</p>\n<p>以上就是整合所需的东西和过程，算是比较详细了，希望可以帮到有需要的人。第一次写文章可能有些问题，自己没有发现到，如有疑问可以提出问题互相交流，谢谢。</p>\n<p>--------------------------</p>\n<p>文件转存到阿里云盘了，由于目前（2022.05.26）阿里云盘不能分享压缩包，所以只能尝试存在word文档里面进行分享。</p>\n<p>「jdk+tomcat+mysql+war」https://www.aliyundrive.com/s/mHNCxVjQ1Dh 提取码: m08e 点击链接保存，或者复制本段内容，打开「阿里云盘」APP ，无需下载极速在线查看，视频原画倍速播放。</p>\n<p>参考博客：</p>\n<p>https://blog.csdn.net/liuhaomatou/article/details/52576162</p>\n<p>https://blog.csdn.net/dj0721/article/details/72462688</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}