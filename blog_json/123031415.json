{"blogid": "123031415", "writerAge": "码龄3年", "writerBlogNum": "17", "writerCollect": "103", "writerComment": "36", "writerFan": "5", "writerGrade": "2级", "writerIntegral": "215", "writerName": "EricIsRising", "writerProfileAdress": "writer_image\\profile_123031415.jpg", "writerRankTotal": "69717", "writerRankWeekly": "723092", "writerThumb": "22", "writerVisitNum": "32615", "blog_read_count": "5541", "blog_time": "已于 2022-02-20 16:16:22 修改", "blog_title": "如何在 Linux 上安装 MySQL", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-github-gist\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p></p>\n<div class=\"toc\">\n<h3>目录</h3>\n<ul><li><a href=\"#_1\">开始安装</a></li><li><a href=\"#_77\">测试是否安装成功</a></li></ul>\n</div>\n<p></p>\n<h1><a id=\"_1\"></a>开始安装</h1>\n<p>1.创建 mysql 文件安装目录</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">mkdir</span> /opt/mysql\n</code></pre>\n<p>进入该目录</p>\n<pre><code class=\"prism language-bash\"><span class=\"token builtin class-name\">cd</span> /opt/mysql/\n</code></pre>\n<p>2.安装 mysql</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">wget</span> http://dev.mysql.com/get/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar\n</code></pre>\n<p>解压文件</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">tar</span> -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar\n</code></pre>\n<p>3.删除自带的数据库 mariadb（如果虚拟机上有的话，没有则不管），会跟 mysql 发生冲突。<br/> 首先执行下面命令查看是否存在</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">rpm</span> -qa <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> mari\n</code></pre>\n<p>如果存在，则依次执行下面命令删除</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">rpm</span> -e --nodeps mariadb-libs\n<span class=\"token function\">rpm</span> -e --nodeps marisa\n</code></pre>\n<p>4.开始安装 mysql，依次执行下述命令</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">rpm</span> -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm\n<span class=\"token function\">rpm</span> -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm\n</code></pre>\n<p>注意：当执行最后一条命令时，可能会报错：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\71b7fb8aedcd413b96c0e7681706722d.png\"/><br/> 解决办法：执行命令安装 libaio</p>\n<pre><code class=\"prism language-bash\">yum <span class=\"token function\">install</span> libaio\n</code></pre>\n<p>然后重新执行命令</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">rpm</span> -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm\n</code></pre>\n<p>5.启动 mysql</p>\n<pre><code class=\"prism language-bash\">systemctl start mysqld.service\n</code></pre>\n<p>6.mysql 自动给 root 用户设置随机密码，运行命令可查看当前密码</p>\n<pre><code class=\"prism language-bash\"><span class=\"token function\">grep</span> <span class=\"token string\">\"password\"</span> /var/log/mysqld.log\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\d3fb1744c886450eb872a34fdb4ecffa.png\"/></p>\n<p>7.利用上面查到的密码，进入 mysql</p>\n<pre><code class=\"prism language-bash\">mysql -u root -p\n</code></pre>\n<p>8.修改密码，然后执行后面命令使密码设置生效（本地虚拟机可以设置简单一点，<strong>ECS 建议设置复杂密码，亲身经历实验室服务器上的数据库被黑</strong>）</p>\n<pre><code class=\"prism language-bash\"><span class=\"token builtin class-name\">set</span> password <span class=\"token keyword\">for</span> <span class=\"token string\">'root'</span>@<span class=\"token string\">'localhost'</span><span class=\"token operator\">=</span>password<span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nflush privileges<span class=\"token punctuation\">;</span>\n</code></pre>\n<h1><a id=\"_77\"></a>测试是否安装成功</h1>\n<p>退出 mysql，利用重新设置的密码进入</p>\n<pre><code class=\"prism language-bash\"><span class=\"token builtin class-name\">exit</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\68716e55d414442f97e49be781539cb4.png\"/><br/> 这个时候如果你用 Navicat 去连接服务器上的数据库可能会失败</p>\n<ol><li>ECS 请进入安全组打开 3306 端口，本地虚拟机不用管这个问题</li><li>如果已经打开端口，可能出现问题如下：<br/> <img alt=\"在这里插入图片描述\" src=\"image\\09f116e5645c42ebaf55e176af79a7eb.png\"/><br/> 解决办法：<br/> 首先进入虚拟机上的 mysql 中，然后依次执行下面命令</li></ol>\n<pre><code class=\"prism language-bash\">use mysql<span class=\"token punctuation\">;</span>\nSELECT Host, User FROM user<span class=\"token punctuation\">;</span>\nUPDATE user SET Host <span class=\"token operator\">=</span> <span class=\"token string\">'%'</span> WHERE User <span class=\"token operator\">=</span> <span class=\"token string\">'root'</span><span class=\"token punctuation\">;</span>\nflush privileges<span class=\"token punctuation\">;</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\043deee69def414d9f72ab990d56e3b1.png\"/><br/> 然后再次重新使用 Navicat 连接即可。</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}