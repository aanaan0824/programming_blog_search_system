{"blogid": "126714767", "writerAge": "码龄17年", "writerBlogNum": "1151", "writerCollect": "9800", "writerComment": "4237", "writerFan": "28668", "writerGrade": "9级", "writerIntegral": "50510", "writerName": "zhangrelay", "writerProfileAdress": "writer_image\\profile_126714767.jpg", "writerRankTotal": "67", "writerRankWeekly": "404", "writerThumb": "4403", "writerVisitNum": "4438120", "blog_read_count": "105", "blog_time": "于 2022-09-05 23:25:49 发布", "blog_title": "ROS1云课→19仿真turtlebot（stage）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><a href=\"https://zhangrelay.blog.csdn.net/article/details/126694978?spm=1001.2014.3001.5502\" title=\"ROS1云课→18一键配置\">ROS1云课→18一键配置</a></p>\n<hr/>\n<p><a href=\"https://zhangrelay.blog.csdn.net/article/details/126683470?spm=1001.2014.3001.5502\" title=\"ROS1云课→17化繁为简stdr和f1tenth\">ROS1云课→17化繁为简stdr和f1tenth</a></p>\n<p>依据一键配置将turtlebot仿真案例全部配置好。</p>\n<p>TurtleBot 是带有开源软件的低成本个人机器人套件。 TurtleBot 是 Melonee Wise 和 Tully Foote 于 2010 年 11 月在 Willow Garage 创建的。使用 TurtleBot，将能够构建一个可以在房子周围行驶、以 3D 形式查看的机器人，并拥有足够的马力来创建令人兴奋的应用程序。</p>\n<p>TurtleBot 套件包括移动底座、2D/3D 距离传感器、笔记本电脑或 SBC（单板计算机）和 TurtleBot 安装硬件套件。 除了 TurtleBot 套件，用户还可以从 ROS wiki 下载 TurtleBot SDK。 TurtleBot 的设计易于购买、构建和组装，使用现成的消费品和可轻松由标准材料制成的零件。 作为一个入门级的移动机器人平台，TurtleBot 具有该公司更大的机器人平台（如 PR2）的许多相同功能。</p>\n<pre><code class=\"language-bash\">echo \"Turtlebot mission begins.\"\n \necho \"-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: GnuPG v1\n \nmQINBFzvJpYBEADY8l1YvO7iYW5gUESyzsTGnMvVUmlV3XarBaJz9bGRmgPXh7jc\nVFrQhE0L/HV7LOfoLI9H2GWYyHBqN5ERBlcA8XxG3ZvX7t9nAZPQT2Xxe3GT3tro\nu5oCR+SyHN9xPnUwDuqUSvJ2eqMYb9B/Hph3OmtjG30jSNq9kOF5bBTk1hOTGPH4\nK/AY0jzT6OpHfXU6ytlFsI47ZKsnTUhipGsKucQ1CXlyirndZ3V3k70YaooZ55rG\naIoAWlx2H0J7sAHmqS29N9jV9mo135d+d+TdLBXI0PXtiHzE9IPaX+ctdSUrPnp+\nTwR99lxglpIG6hLuvOMAaxiqFBB/Jf3XJ8OBakfS6nHrWH2WqQxRbiITl0irkQoz\npwNEF2Bv0+Jvs1UFEdVGz5a8xexQHst/RmKrtHLct3iOCvBNqoAQRbvWvBhPjO/p\nV5cYeUljZ5wpHyFkaEViClaVWqa6PIsyLqmyjsruPCWlURLsQoQxABcL8bwxX7UT\nhM6CtH6tGlYZ85RIzRifIm2oudzV5l+8oRgFr9yVcwyOFT6JCioqkwldW52P1pk/\n/SnuexC6LYqqDuHUs5NnokzzpfS6QaWfTY5P5tz4KHJfsjDIktly3mKVfY0fSPVV\nokdGpcUzvz2hq1fqjxB6MlB/1vtk0bImfcsoxBmF7H+4E9ZN1sX/tSb0KQARAQAB\ntCZPcGVuIFJvYm90aWNzIDxpbmZvQG9zcmZvdW5kYXRpb24ub3JnPokCVAQTAQgA\nPgIbAwULCQgHAgYVCgkICwIEFgIDAQIeAQIXgBYhBMHPbjHmut6IaLFytPQu1vur\nF8ZUBQJgsdhRBQkLTMW7AAoJEPQu1vurF8ZUTMwP/3f7EkOPIFjUdRmpNJ2db4iB\nRQu5b2SJRG+KIdbvQBzKUBMV6/RUhEDPjhXZI3zDevzBewvAMKkqs2Q1cWo9WV7Z\nPyTkvSyey/Tjn+PozcdvzkvrEjDMftIk8E1WzLGq7vnPLZ1q/b6Vq4H373Z+EDWa\nDaDwW72CbCBLWAVtqff80CwlI2x8fYHKr3VBUnwcXNHR4+nRABfAWnaU4k+oTshC\nQucsd8vitNfsSXrKuKyz91IRHRPnJjx8UvGU4tRGfrHkw1505EZvgP02vXeRyWBR\nfKiL1vGy4tCSRDdZO3ms2J2m08VPv65HsHaWYMnO+rNJmMZj9d9JdL/9GRf5F6U0\nquoIFL39BhUEvBynuqlrqistnyOhw8W/IQy/ymNzBMcMz6rcMjMwhkgm/LNXoSD1\n1OrJu4ktQwRhwvGVarnB8ihwjsTxZFylaLmFSfaA+OAlOqCLS1OkIVMzjW+Ul6A6\nqjiCEUOsnlf4CGlhzNMZOx3low6ixzEqKOcfECpeIj80a2fBDmWkcAAjlHu6VBhA\nTUDG9e2xKLzV2Z/DLYsb3+n9QW7KO0yZKfiuUo6AYboAioQKn5jh3iRvjGh2Ujpo\n22G+oae3PcCc7G+z12j6xIY709FQuA49dA2YpzMda0/OX4LP56STEveDRrO+CnV6\nWE+F5FaIKwb72PL4rLi4\n=i0tj\n-----END PGP PUBLIC KEY BLOCK-----\" &gt;&gt; ~/ros.asc\n \nsudo apt-key add ros.asc\n \nsudo sh -c '. /etc/lsb-release &amp;&amp; echo \"deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main\" &gt; /etc/apt/sources.list.d/ros-latest.list'\n \nsudo apt update\n \nwget https://labfile.oss.aliyuncs.com/courses/854/rosdemos_ws.zip\n \ngit clone https://gitcode.net/ZhangRelay/ros_book.git\n \nsudo apt install xpdf -y\n\nsudo apt install ros-kinetic-turtlebot-simulator -y\n \nsudo apt upgrade -y\n\nexport TURTLEBOT_STAGE_MAP_FILE=/opt/ros/kinetic/share/turtlebot_stage/maps/maze.yaml \n \nexport TURTLEBOT_STAGE_WORLD_FILE=/opt/ros/kinetic/share/turtlebot_stage/maps/stage/maze.world \n \nroslaunch turtlebot_stage turtlebot_in_stage.launch\n\necho \"Turtlebot mission completed.\"</code></pre>\n<p>上面过程完成后，会直接打开如下界面：</p>\n<p><img alt=\"\" height=\"958\" src=\"image\\5221b456273141ce8217e282fdc54396.png\" width=\"1200\"/></p>\n<p>1. 如何开始turtlebot的stage模拟</p>\n<p>在stage模拟中启动 TurtleBot。 Stage 是一个二维多机器人模拟器。 它模拟 .world 文件中定义的世界。 这个文件告诉舞台世界的一切，从障碍物（通常通过位图表示，用作一种背景），机器人和其他对象。</p>\n<p><s>2. 解释如何将自定义地图与turtlebot 的stage模拟器一起使用，并根据需要调整配置。</s></p>\n<p>两种方式：</p>\n<p>按照相同的说明进行turtlebot debian 安装或源代码安装。</p>\n<p>源码（indigo/kinetic/melodic/noetic基本通用的）：</p>\n<p><img alt=\"\" height=\"574\" src=\"image\\cead1ed3f2ea4be1899063eb89f3b946.png\" width=\"1200\"/></p>\n<p>使用turtlebot 和rviz 启动stage模拟器。 单击 2D 导航目标并命令机器人导航地图中的任何位置。 </p>\n<p><img alt=\"\" height=\"952\" src=\"image\\027dcd2fb4124d2c89e73b5f8178a0e1.png\" width=\"1200\"/> </p>\n<p><img alt=\"\" height=\"953\" src=\"image\\54ae8ec635f84eb3968923e4d56db888.png\" width=\"1200\"/></p>\n<p>导航案例类似机器人走迷宫。 </p>\n<p>遇到报错信息：</p>\n<p><img alt=\"\" height=\"587\" src=\"image\\b926b5ea3d2547de8e79c056c839ad7c.png\" width=\"735\"/></p>\n<p>如何修改？这个通过源码调试。</p>\n<p></p>\n<pre><code class=\"language-XML\">&lt;!-- \n  Turtlebot navigation simulation:\n  - stage\n  - map_server\n  - move_base\n  - static map\n  - amcl\n  - rviz view\n --&gt;\n&lt;launch&gt;\n  &lt;arg name=\"base\"       default=\"$(optenv TURTLEBOT_BASE kobuki)\"/&gt;  &lt;!-- create, rhoomba --&gt;\n  &lt;arg name=\"stacks\"     default=\"$(optenv TURTLEBOT_STACKS hexagons)\"/&gt;  &lt;!-- circles, hexagons --&gt;\n  &lt;arg name=\"3d_sensor\"  default=\"$(optenv TURTLEBOT_3D_SENSOR kinect)\"/&gt;  &lt;!-- kinect, asus_xtion_pro --&gt;\n\n  &lt;!-- Name of the map to use (without path nor extension) and initial position --&gt;\n  &lt;arg name=\"map_file\"       default=\" $(env TURTLEBOT_STAGE_MAP_FILE)\"/&gt; &lt;!-- robopark_plan --&gt;\n  &lt;arg name=\"world_file\"     default=\" $(env TURTLEBOT_STAGE_WORLD_FILE)\"/&gt;\n  &lt;arg name=\"initial_pose_x\" default=\"2.0\"/&gt;\n  &lt;arg name=\"initial_pose_y\" default=\"2.0\"/&gt;\n  &lt;arg name=\"initial_pose_a\" default=\"0.0\"/&gt;\n\n  &lt;param name=\"/use_sim_time\" value=\"true\"/&gt;\n  &lt;!--  ******************** Stage ********************  --&gt;\n  &lt;!-- \n        Publishes transforms:\n          /base_link -&gt; /base_laser\n          /base_footprint -&gt; /base_link (identity)\n          /odom -&gt; base_footprint\n        Publishes topics:\n          /odom : odometry data from the simulated odometry\n          /base_scan : laser data from the simulated laser\n          /base_pose_ground_truth : the ground truth pose\n        Parameters:\n          base_watchdog_timeout : time (s) after receiving the last command on cmd_vel before stopping the robot\n        Args:\n          -g : run in headless mode.\n  --&gt; \n  &lt;node pkg=\"stage_ros\" type=\"stageros\" name=\"stageros\" args=\"$(arg world_file)\"&gt;\n    &lt;param name=\"base_watchdog_timeout\" value=\"0.5\"/&gt;\n    &lt;remap from=\"odom\" to=\"odom\"/&gt;\n    &lt;remap from=\"base_pose_ground_truth\" to=\"base_pose_ground_truth\"/&gt;\n    &lt;remap from=\"cmd_vel\" to=\"mobile_base/commands/velocity\"/&gt;\n    &lt;remap from=\"base_scan\" to=\"scan\"/&gt;\n  &lt;/node&gt;\n\n  &lt;!--  ***************** Robot Model *****************  --&gt;\n  &lt;include file=\"$(find turtlebot_bringup)/launch/includes/robot.launch.xml\"&gt;\n    &lt;arg name=\"base\" value=\"$(arg base)\" /&gt;\n    &lt;arg name=\"stacks\" value=\"$(arg stacks)\" /&gt;\n    &lt;arg name=\"3d_sensor\" value=\"$(arg 3d_sensor)\" /&gt;\n  &lt;/include&gt;\n  &lt;node name=\"joint_state_publisher\" pkg=\"joint_state_publisher\" type=\"joint_state_publisher\"&gt;\n  &lt;/node&gt;\n\n  &lt;!-- Command Velocity multiplexer --&gt;\n  &lt;node pkg=\"nodelet\" type=\"nodelet\" name=\"mobile_base_nodelet_manager\" args=\"manager\"/&gt;\n  &lt;node pkg=\"nodelet\" type=\"nodelet\" name=\"cmd_vel_mux\" args=\"load yocs_cmd_vel_mux/CmdVelMuxNodelet mobile_base_nodelet_manager\"&gt;\n    &lt;param name=\"yaml_cfg_file\" value=\"$(find turtlebot_bringup)/param/mux.yaml\"/&gt;\n    &lt;remap from=\"cmd_vel_mux/output\" to=\"mobile_base/commands/velocity\"/&gt;\n  &lt;/node&gt;\n\n  &lt;!--  ************** Navigation  ***************  --&gt;\n  &lt;include file=\"$(find turtlebot_navigation)/launch/includes/move_base.launch.xml\"/&gt;\n\n  &lt;!--  ****** Maps *****  --&gt;\n  &lt;node name=\"map_server\" pkg=\"map_server\" type=\"map_server\" args=\"$(arg map_file)\"&gt;\n    &lt;param name=\"frame_id\" value=\"/map\"/&gt;\n  &lt;/node&gt;\n\n  &lt;include file=\"$(find turtlebot_navigation)/launch/includes/amcl/amcl.launch.xml\"&gt;\n    &lt;arg name=\"scan_topic\" value=\"scan\"/&gt;\n    &lt;arg name=\"use_map_topic\" value=\"true\"/&gt;\n    &lt;arg name=\"initial_pose_x\" value=\"$(arg initial_pose_x)\"/&gt;\n    &lt;arg name=\"initial_pose_y\" value=\"$(arg initial_pose_y)\"/&gt;\n    &lt;arg name=\"initial_pose_a\" value=\"$(arg initial_pose_a)\"/&gt;\n  &lt;/include&gt;\n\n  &lt;!--  **************** Visualisation ****************  --&gt;\n  &lt;node name=\"rviz\" pkg=\"rviz\" type=\"rviz\" args=\"-d $(find turtlebot_stage)/rviz/robot_navigation.rviz\"/&gt;\n&lt;/launch&gt;</code></pre>\n<p>如何修改地图？实现下面功能？</p>\n<pre><code class=\"language-bash\">export TURTLEBOT_STAGE_MAP_FILE=/opt/ros/kinetic/share/turtlebot_stage/maps/robopark_plan.yaml \n \nexport TURTLEBOT_STAGE_WORLD_FILE=/opt/ros/kinetic/share/turtlebot_stage/maps/stage/robopark_plan.world </code></pre>\n<p><img alt=\"\" height=\"963\" src=\"image\\3480008934e04a51b45b4624fd62b234.png\" width=\"1200\"/></p>\n<p><img alt=\"\" height=\"951\" src=\"image\\2a29e292eb4546738c05bbfe812fb11d.png\" width=\"1200\"/> </p>\n<hr/>\n<p> </p>\n<p> </p>\n<p>-^_^-</p>\n<hr/>\n<p></p>\n</div>\n</div>"}