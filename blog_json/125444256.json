{"blogid": "125444256", "writerAge": "码龄7年", "writerBlogNum": "33", "writerCollect": "90", "writerComment": "42", "writerFan": "11", "writerGrade": "3级", "writerIntegral": "726", "writerName": "知所云", "writerProfileAdress": "writer_image\\profile_125444256.jpg", "writerRankTotal": "40435", "writerRankWeekly": "101493", "writerThumb": "68", "writerVisitNum": "54463", "blog_read_count": "6918", "blog_time": "于 2022-06-24 14:56:13 发布", "blog_title": "element ui 时间日期选择器 el-date-picker 报错 Prop being mutated: “placement“", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-dark\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p>这两天在写新项目的时候，遇到了element ui 时间日期选择器一直报错</p>\n<pre><code class=\"prism language-javascript\"><span class=\"token punctuation\">[</span>Vue warn<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> Avoid mutating a prop directly since the value will be\noverwritten whenever the parent component re<span class=\"token operator\">-</span>renders<span class=\"token punctuation\">.</span>\nInstead<span class=\"token punctuation\">,</span> use a data or computed property based on the prop's value<span class=\"token punctuation\">.</span> \nProp being mutated<span class=\"token operator\">:</span> <span class=\"token string\">\"placement\"</span>\n</code></pre>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\2339129f18ec49a5bd6e3a44c51d2adf.png\"/><br/> 这个报错并没有影响实际操作，但是看着很难受</p>\n<h3><a id=\"_10\"></a><strong>解决</strong></h3>\n<p>根据报错显示是element ui data-picker 下的picker文件报错的，我这边在node_modules 中找到这个vue文件发现<br/> <img alt=\"在这里插入图片描述\" src=\"image\\cce7e3c7f3214f80a4a36bc1b4da6273.png\"/><br/> props值中有加一个placement: Popper.props.placement,<br/> created的时候 placement 有个赋值操作 this.placement = PLACEMENT_MAP[this.align] || PLACEMENT_MAP.left;这样就导致了报错<br/> <img alt=\"在这里插入图片描述\" src=\"image\\9c5ac6eba41948bf829fdd0fb5eee3fb.png\"/><br/> 老项目没有报错是因为版本中props中没有placement，只有created的时候 placement 有个赋值操作，所有不会有报错<br/> <img alt=\"在这里插入图片描述\" src=\"image\\e0159cd50f8b48b294a316647737cc1f.png\"/><br/> 因为我的这个bug报错只在 <em>2.15.9</em> 中有。并没有影响实际操作看不过error 报错的可以将版本降至 2.15.9以下就可以了<br/> 公司项目都是用的2.12版本的，所以直接npm install element-ui@2.12.0 -s</p>\n<p>可以看看element ui git <a href=\"https://github.com/ElemeFE/element/issues/21905\">https://github.com/ElemeFE/element/issues/21905</a><br/> 刚开始报错的时候还没有意识到版本问题，后来老项目看到node_modules 中picker.vue 和现在用的不一样的时候才发现是版本问题，<br/> 本身我的package.json里面element ui显示的版本是2.12的</p>\n<p>因为安装其他东西出现问题把package-lock.json 和node_modules 都删了，然后npm install 结果坑的是package.json版本和实际安装的不是一个版本，不然不会出现这个问题<br/> <img alt=\"在这里插入图片描述\" src=\"image\\cdf76f03aa2548d18ed49b004d5f1008.png\"/>还是需要单独npm install element-ui@2.12.0 -s<br/> <img alt=\"在这里插入图片描述\" src=\"image\\d879f64ebe0441f881a1aef64f7ff29a.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"https://img-blog.csdnimg.cn/650ec80d19ce47988c5be70bd4166ec9.gif\"/><br/> 啊，又是被坑的一天，对你有帮助记得点个赞</p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}