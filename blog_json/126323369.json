{"blogid": "126323369", "writerAge": "ç é¾„1å¹´", "writerBlogNum": "72", "writerCollect": "2610", "writerComment": "4589", "writerFan": "8310", "writerGrade": "6çº§", "writerIntegral": "8326", "writerName": "codeMak1r.å°æ–°", "writerProfileAdress": "writer_image\\profile_126323369.jpg", "writerRankTotal": "1737", "writerRankWeekly": "13", "writerThumb": "2774", "writerVisitNum": "208366", "blog_read_count": "1254", "blog_time": "å·²äºÂ 2022-08-22 10:45:14Â ä¿®æ”¹", "blog_title": "React+Mobxï½œåŸºæœ¬ä½¿ç”¨ã€æ¨¡å—åŒ–", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-tomorrow-night\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"https://img-blog.csdnimg.cn/1e121fa370f742bca98f6b3179d30d13.gif#pic_center\"/></p>\n<blockquote>\n<p><strong><font color=\"#FF7F50\"> æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</font></strong><br/> <strong>ğŸ“”åšä¸»æ˜¯ä¸€åå¤§å­¦åœ¨è¯»æœ¬ç§‘ç”Ÿï¼Œä¸»è¦å­¦ä¹ æ–¹å‘æ˜¯å‰ç«¯ã€‚<br/> ğŸ­ç›®å‰å·²ç»æ›´æ–°äº†<font color=\"#FF7F50\">ã€Vueã€‘ã€ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘ã€ã€TypeScriptã€‘ç­‰ç­‰ç³»åˆ—ä¸“æ </font><br/> ğŸ› ç›®å‰æ­£åœ¨å­¦ä¹ çš„æ˜¯ğŸ”¥<span class=\"katex--inline\"><span class=\"katex\"><span class=\"katex-mathml\">\n      \n       \n        \n         \n          R\n         \n         \n          e\n         \n         \n          a\n         \n         \n          c\n         \n         \n          t\n         \n         \n          æ¡†æ¶\n         \n        \n        \n         Reactæ¡†æ¶\n        \n       \n      </span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height: 0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right: 0.0077em;\">R</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">t</span><span class=\"mord cjk_fallback\">æ¡†æ¶</span></span></span></span></span>ğŸ”¥ï¼Œä¸­é—´ç©¿æ’äº†ä¸€äº›åŸºç¡€çŸ¥è¯†çš„å›é¡¾<br/> ğŸŒˆåšå®¢ä¸»é¡µğŸ‘‰<a href=\"https://blog.csdn.net/Svik_zy?type=blog\">codeMak1r.å°æ–°çš„åšå®¢</a></strong></p>\n<p></p>\n<div class=\"toc\">\n<h3>ğŸ˜‡æœ¬æ–‡ç›®å½•ğŸ˜‡</h3>\n<ul><li><a href=\"#Mobx_16\">Mobxä»‹ç»</a></li><li><ul><li><a href=\"#1Mobx_18\">1.ä»€ä¹ˆæ˜¯Mobx</a></li><li><a href=\"#2Mobx_28\">2.Mobxæœ‰ä»€ä¹ˆä¼˜åŠ¿</a></li><li><a href=\"#3_49\">3.ç¤¾åŒºè¯„ä»·</a></li></ul>\n</li><li><a href=\"#_52\">é…ç½®å¼€å‘ç¯å¢ƒ</a></li><li><a href=\"#_76\">æµè§ˆå™¨æ”¯æŒ</a></li><li><a href=\"#_84\">åŸºç¡€ä½¿ç”¨</a></li><li><ul><li><a href=\"#1_mobx_89\">1. åˆå§‹åŒ–mobx</a></li><li><a href=\"#2_Reactstore_120\">2. Reactä½¿ç”¨store</a></li></ul>\n</li><li><a href=\"#Mobx__computed_148\">Mobx - computed</a></li><li><a href=\"#Mobx___213\">Mobx - æ¨¡å—åŒ–</a></li><li><a href=\"#Mobx___322\">Mobx - æ€»ç»“</a></li></ul>\n</div>\n<p></p>\n<p><strong><font color=\"#FF7F50\">æœ¬æ–‡è¢«ä¸“æ <a href=\"https://blog.csdn.net/svik_zy/category_11671445.html?spm=1001.2014.3001.5482\">ã€Reactâ€“ä»åŸºç¡€åˆ°å®æˆ˜ã€‘</a>æ”¶å½•</font></strong></p>\n</blockquote>\n<blockquote>\n<p><strong><font color=\"#FF7F50\">ğŸ•¹åšæŒåˆ›ä½œâœï¸ï¼Œä¸€èµ·å­¦ä¹ ğŸ“–ï¼Œç å‡ºæœªæ¥ğŸ‘¨ğŸ»â€ğŸ’»ï¼</font></strong></p>\n</blockquote>\n<h1><a id=\"Mobx_16\"></a>Mobxä»‹ç»</h1>\n<h2><a id=\"1Mobx_18\"></a>1.ä»€ä¹ˆæ˜¯Mobx</h2>\n<blockquote>\n<p>ä¸€ä¸ªå¯ä»¥å’ŒReactè‰¯å¥½é…åˆçš„é›†ä¸­çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œå’ŒReduxè§£å†³çš„é—®é¢˜ç›¸ä¼¼ï¼Œéƒ½å¯ä»¥ç‹¬ç«‹ç»„ä»¶è¿›è¡Œé›†ä¸­çŠ¶æ€ç®¡ç†</p>\n<p>mobxä¸reactçš„å…³ç³»ï¼Œç›¸å½“äºvuexä¸vueçš„å…³ç³»ã€‚</p>\n<p>åŒç±»å·¥å…·è¿˜æœ‰ï¼š<code>redux</code>ã€<code>dva</code>ã€<code>recoil</code></p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" height=\"50%\" src=\"image\\6c01493c226e4e3c95ff15753e96389e.png\" width=\"50%\"/></p>\n<h2><a id=\"2Mobx_28\"></a>2.Mobxæœ‰ä»€ä¹ˆä¼˜åŠ¿</h2>\n<ol><li>ç®€å•</li></ol>\n<blockquote>\n<p>ç¼–å†™æ— æ¨¡æ¿çš„æç®€ä»£ç ç²¾å‡†æè¿°ä½ çš„æ„å›¾ (åŸç”Ÿjs)</p>\n</blockquote>\n<ol start=\"2\"><li>è½»æ¾å®ç°æœ€ä¼˜æ¸²æŸ“</li></ol>\n<blockquote>\n<p>ä¾èµ–è‡ªåŠ¨è¿½è¸ªï¼Œå®ç°æœ€å°æ¸²æŸ“ä¼˜åŒ–ã€‚</p>\n<p>å…¶å®åœ¨åŸç”Ÿçš„reactä¸Šï¼Œreactçš„æ€§èƒ½å¹¶ä¸æ˜¯å¼ºé¡¹ï¼ˆvueçš„æ¸²æŸ“é€Ÿåº¦ç¡®å®æŠ˜æœäº†ä¸€ç¥¨ç²‰ä¸ï¼‰ï¼Œä½†æ˜¯mobxå¯ä»¥å¸®åŠ©reactå®ç°ä¾èµ–çš„è‡ªåŠ¨è¿½è¸ªï¼Œå®ç°ä¼˜åŒ–reactç»„ä»¶çš„æ€§èƒ½ã€‚</p>\n</blockquote>\n<ol start=\"3\"><li>æ¶æ„è‡ªç”±</li></ol>\n<blockquote>\n<p>å¯ç§»æ¤, å¯æµ‹è¯• æ— ç‰¹æ®Šå¿ƒæ™ºè´Ÿæ‹…</p>\n</blockquote>\n<blockquote>\n<p>React å’Œ MobX æ˜¯ä¸€å¯¹å¼ºåŠ›ç»„åˆã€‚React é€šè¿‡æä¾›æœºåˆ¶æŠŠåº”ç”¨çŠ¶æ€è½¬æ¢ä¸ºå¯æ¸²æŸ“ç»„ä»¶æ ‘å¹¶å¯¹å…¶è¿›è¡Œæ¸²æŸ“ã€‚è€ŒMobXæä¾›æœºåˆ¶æ¥å­˜å‚¨å’Œæ›´æ–°åº”ç”¨çŠ¶æ€ä¾› React ä½¿ç”¨ã€‚</p>\n<p>å¯¹äºåº”ç”¨å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜ï¼ŒReact å’Œ MobX éƒ½æä¾›äº†æœ€ä¼˜å’Œç‹¬ç‰¹çš„è§£å†³æ–¹æ¡ˆã€‚React æä¾›äº†ä¼˜åŒ–UIæ¸²æŸ“çš„æœºåˆ¶ï¼Œ è¿™ç§æœºåˆ¶å°±æ˜¯é€šè¿‡ä½¿ç”¨è™šæ‹ŸDOMæ¥å‡å°‘æ˜‚è´µçš„DOMå˜åŒ–çš„æ•°é‡ã€‚MobX æä¾›äº†ä¼˜åŒ–åº”ç”¨çŠ¶æ€ä¸ React ç»„ä»¶åŒæ­¥çš„æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯ä½¿ç”¨å“åº”å¼è™šæ‹Ÿä¾èµ–çŠ¶æ€å›¾è¡¨ï¼Œå®ƒåªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰æ›´æ–°å¹¶ä¸”æ°¸è¿œä¿æŒæ˜¯æœ€æ–°çš„ã€‚</p>\n</blockquote>\n<h2><a id=\"3_49\"></a>3.ç¤¾åŒºè¯„ä»·</h2>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\748b112065f6454cb9b82a48468a965d.png\"/></p>\n<h1><a id=\"_52\"></a>é…ç½®å¼€å‘ç¯å¢ƒ</h1>\n<blockquote>\n<p>Mobxæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å“åº”å¼çš„åº“ï¼Œå¯ä»¥ç‹¬ç«‹äºä»»ä½•UIæ¡†æ¶å­˜åœ¨ï¼Œä½†æ˜¯é€šå¸¸å¤§å®¶ä¹ æƒ¯æŠŠå®ƒå’ŒReactè¿›è¡Œç»‘å®šä½¿ç”¨ï¼Œ<em>ç”¨Mobxæ¥åšå“åº”å¼æ•°æ®å»ºæ¨¡ï¼ŒReactä½œä¸ºUIè§†å›¾æ¡†æ¶æ¸²æŸ“å†…å®¹</em>ï¼Œæˆ‘ä»¬ç¯å¢ƒçš„é…ç½®éœ€è¦ä¸‰ä¸ªéƒ¨åˆ†</p>\n<ol><li>ä¸€ä¸ªcreate-react-appåˆ›å»ºå¥½çš„Reacté¡¹ç›®ç¯å¢ƒ</li><li>mobxæ¡†æ¶æœ¬èº«</li><li>ä¸€ä¸ªç”¨æ¥é“¾æ¥mobxå’ŒReactçš„ä¸­é—´ä»¶</li></ol>\n</blockquote>\n<pre><code class=\"prism language-shell\"><span class=\"token comment\"># åˆ›å»ºé¡¹ç›®</span>\n$ <span class=\"token function\">npm</span> create-react-app react_mobx_app\n\n<span class=\"token comment\"># å®‰è£…mobx</span>\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> mobx --save\n\n<span class=\"token comment\"># ä¸­é—´ä»¶å·¥å…· mobx-react-lite</span>\n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> mobx-react-lite\n\n<span class=\"token comment\"># å®˜ç½‘æ¨èï¼šmobxä¸reactç»‘å®šåº“</span>\n$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> mobx-react --save\n</code></pre>\n<h1><a id=\"_76\"></a>æµè§ˆå™¨æ”¯æŒ</h1>\n<ul><li>MobX &gt;=5 ç‰ˆæœ¬è¿è¡Œåœ¨ä»»ä½•æ”¯æŒ ES6 proxy çš„æµè§ˆå™¨ã€‚å¦‚æœè¿è¡Œåœ¨åƒ IE11ã€Node.js 6 ä»¥ä¸‹ç‰ˆæœ¬æˆ–ä¾é ä¸è¾ƒæ—§çš„ JavaScripCore çš„å®‰å“ç«¯çš„ React Nativeã€‚</li><li>MobX 4 å¯ä»¥è¿è¡Œåœ¨ä»»ä½•æ”¯æŒ ES5 çš„æµè§ˆå™¨ä¸Šï¼Œè€Œä¸”ä¹Ÿå°†è¿›è¡ŒæŒç»­åœ°ç»´æŠ¤ã€‚MobX 4 å’Œ 5 çš„ API æ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”è¯­ä¹‰ä¸Šä¹Ÿèƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœï¼Œåªæ˜¯ MobX 4 å­˜åœ¨ä¸€äº› <a href=\"https://cn.mobx.js.org/#mobx-4-vs-mobx-5\">å±€é™æ€§</a>ã€‚</li></ul>\n<p><em>å°è´´å£«: MobX 5 åŒ…çš„ä¸»å…¥å£ç‚¹é™„å¸¦ ES5 ä»£ç ï¼Œä»¥ä¾¿å‘åå…¼å®¹æ‰€æœ‰æ„å»ºå·¥å…·ã€‚ä½†å› ä¸º MobX 5 åªèƒ½è¿è¡Œåœ¨ç°ä»£æµè§ˆå™¨ä¸Šï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨é€Ÿåº¦æœ€å¿«ã€ä½“ç§¯æœ€å°çš„ ES6 æ„å»º: <code>lib/mobx.es6.js</code> ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡è®¾ç½® webpack çš„åˆ«å: <code>resolve: { alias: { mobx: __dirname + \"/node_modules/mobx/lib/mobx.es6.js\" }}</code></em></p>\n<h1><a id=\"_84\"></a>åŸºç¡€ä½¿ç”¨</h1>\n<blockquote>\n<p>éœ€æ±‚: ä½¿ç”¨mobxå®ç°ä¸€ä¸ªè®¡æ•°å™¨çš„æ¡ˆä¾‹</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\c3f3727a4df5431f924c084541a67fda.png\"/></p>\n<h2><a id=\"1_mobx_89\"></a>1. åˆå§‹åŒ–mobx</h2>\n<blockquote>\n<p>åˆå§‹åŒ–æ­¥éª¤</p>\n<ol><li>å®šä¹‰æ•°æ®çŠ¶æ€ï¼ˆstateï¼‰</li><li>åœ¨æ„é€ å™¨ä¸­å®ç°æ•°æ®å“åº”å¼å¤„ç†</li><li>å®šä¹‰actionå‡½æ•°</li><li>å®ä¾‹åŒ–storeå¹¶å¯¼å‡º</li></ol>\n</blockquote>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// ç¼–å†™ç¬¬ä¸€ä¸ªmobx storeå°æ¡ˆä¾‹</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> makeAutoObservable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// 1.å®šä¹‰æ•°æ®</span>\n  count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// 2.æŠŠæ•°æ®å¼„æˆå“åº”å¼</span>\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 3.å®šä¹‰actionå‡½æ•°ï¼Œç”¨æ¥ä¿®æ”¹æ•°æ®</span>\n  <span class=\"token function-variable function\">addCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 4.å®ä¾‹åŒ–å¯¼å‡ºç»™reactä½¿ç”¨</span>\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> counterStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<h2><a id=\"2_Reactstore_120\"></a>2. Reactä½¿ç”¨store</h2>\n<blockquote>\n<p>å®ç°æ­¥éª¤</p>\n<ol><li>åœ¨ç»„ä»¶ä¸­å¯¼å…¥counterStoreå®ä¾‹å¯¹è±¡</li><li>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨storeStoreå®ä¾‹å¯¹è±¡ä¸­çš„æ•°æ®</li><li>é€šè¿‡äº‹ä»¶è°ƒç”¨ä¿®æ”¹æ•°æ®çš„æ–¹æ³•ä¿®æ”¹storeä¸­çš„æ•°æ®</li><li>è®©ç»„ä»¶å“åº”æ•°æ®å˜åŒ–</li></ol>\n</blockquote>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> counterStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/counter'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> observer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx-react-lite'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n      <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* 1.æŠŠstoreä¸­çš„countæ¸²æŸ“å‡ºæ¥ */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>button<span class=\"token operator\">&gt;</span><span class=\"token punctuation\">{<!-- --></span>counterStore<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span><span class=\"token operator\">&lt;</span>hr <span class=\"token operator\">/</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* 2.é€šè¿‡ç‚¹å‡»äº‹ä»¶è§¦å‘actionå‡½æ•°ï¼Œä¿®æ”¹countå€¼ */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>counterStore<span class=\"token punctuation\">.</span>addCount<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>ç‚¹æˆ‘<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// åŒ…è£¹ç»„ä»¶è®©è§†å›¾å“åº”æ•°æ®å˜åŒ–</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span>Count<span class=\"token punctuation\">)</span>\n</code></pre>\n<h1><a id=\"Mobx__computed_148\"></a>Mobx - computed</h1>\n<p>è®¡ç®—å±æ€§ï¼ˆè¡ç”ŸçŠ¶æ€ï¼‰</p>\n<blockquote>\n<p>æ¦‚å¿µ: æœ‰ä¸€äº›çŠ¶æ€æ ¹æ®ç°æœ‰çš„çŠ¶æ€è®¡ç®—ï¼ˆè¡ç”Ÿï¼‰å¾—åˆ°ï¼Œæˆ‘ä»¬æŠŠè¿™ç§çŠ¶æ€å«åšè®¡ç®—å±æ€§, çœ‹ä¸‹é¢çš„ä¾‹å­</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\1d15249158d7438da5b2686c2425f4d3.png\"/><br/> å®ç°æ­¥éª¤</p>\n<ol><li> <p>å£°æ˜ä¸€ä¸ªå­˜åœ¨çš„æ•°æ®</p> </li><li> <p>é€šè¿‡getå…³é”®è¯ å®šä¹‰è®¡ç®—å±æ€§</p> </li><li> <p>åœ¨ makeAutoObservable æ–¹æ³•ä¸­æ ‡è®°è®¡ç®—å±æ€§</p>\n<blockquote>\n<p>ä¸æ ‡è®°ä¸å½±å“è®¡ç®—å±æ€§çš„ä½¿ç”¨ï¼Œè¿™é‡Œçš„æ ‡è®°åªæ˜¯ä¸ºäº†è®©ä»£ç æ›´ç›´è§‚ï¼Œç¨‹åºå‘˜ä¸€çœ‹åˆ°è¿™è¡Œä»£ç å°±çŸ¥é“filterListæ˜¯é€šè¿‡è®¡ç®—å±æ€§å¾—æ¥çš„ã€‚</p>\n</blockquote> </li><li> <p>ä¿®æ”¹å£°æ˜çš„æ•°æ®ï¼Œè®¡ç®—å±æ€§çš„æ•°æ®ä¹Ÿä¼šä¸€èµ·æ”¹å˜</p> </li><li> <p><strong>Mobxæä¾›çš„è®¡ç®—å±æ€§ä¸<code>vue</code>ä¸­çš„<code>computed</code>å·®åˆ«ä¸å¤§</strong></p> </li></ol>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// counterStore.js</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> makeAutoObservable<span class=\"token punctuation\">,</span> computed <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CounterStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token comment\">// 1.å£°æ˜ä¸€ä¸ªlistæ•°ç»„</span>\n  list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span>\n      <span class=\"token comment\">// 3.æ ‡è®°è®¡ç®—å±æ€§</span>\n      <span class=\"token comment\">// ä¸æ ‡è®°ä¸å½±å“è®¡ç®—å±æ€§çš„ä½¿ç”¨ï¼Œè¿™é‡Œçš„æ ‡è®°åªæ˜¯ä¸ºäº†è®©ä»£ç æ›´ç›´è§‚ï¼Œç¨‹åºå‘˜ä¸€çœ‹åˆ°è¿™è¡Œä»£ç å°±çŸ¥é“filterListæ˜¯é€šè¿‡è®¡ç®—å±æ€§å¾—æ¥çš„</span>\n      <span class=\"token literal-property property\">filterList</span><span class=\"token operator\">:</span> computed\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// 2.å®šä¹‰è®¡ç®—å±æ€§</span>\n  <span class=\"token keyword\">get</span> <span class=\"token function\">filterList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">item</span> <span class=\"token operator\">=&gt;</span> item <span class=\"token operator\">&gt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">changeList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">9</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> counterStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CounterStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> counterStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// Count.jsx</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> counterStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/counter'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> observer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx-react-lite'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">&gt;</span>\n      <span class=\"token punctuation\">{<!-- --></span><span class=\"token comment\">/* ä½¿ç”¨è®¡ç®—å±æ€§ */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">{<!-- --></span>counterStore<span class=\"token punctuation\">.</span>filterList<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span>counterStore<span class=\"token punctuation\">.</span>changeList<span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>ä¿®æ”¹List<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// åŒ…è£¹ç»„ä»¶è®©è§†å›¾å“åº”æ•°æ®å˜åŒ–</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span>Count<span class=\"token punctuation\">)</span>\n</code></pre>\n<h1><a id=\"Mobx___213\"></a>Mobx - æ¨¡å—åŒ–</h1>\n<blockquote>\n<p>åœºæ™¯: ä¸€ä¸ªé¡¹ç›®æœ‰å¾ˆå¤šçš„ä¸šåŠ¡æ¨¡å—ï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰çš„ä»£ç éƒ½å†™åˆ°ä¸€èµ·ï¼Œè¿™æ ·ä¸å¥½ç»´æŠ¤ï¼Œä¸ºäº†æä¾›å¯ç»´æŠ¤æ€§ï¼Œéœ€è¦å¼•å…¥æ¨¡å—åŒ–æœºåˆ¶</p>\n</blockquote>\n<p><img alt=\"åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\" src=\"image\\6cc69c207c12404e9ef4a7af133686da.png\"/></p>\n<p><strong>å®ç°æ­¥éª¤</strong></p>\n<ol><li>æ‹†åˆ†æ¨¡å—jsæ–‡ä»¶ï¼Œæ¯ä¸ªæ¨¡å—ä¸­å®šä¹‰è‡ªå·±ç‹¬ç«‹çš„state/actions</li><li>åœ¨store/index.jsä¸­å¯¼å…¥æ‹†åˆ†ä¹‹åçš„æ¨¡å—ï¼Œè¿›è¡Œæ¨¡å—ç»„åˆ</li><li>åˆ©ç”¨Reactçš„useContextçš„æœºåˆ¶å¯¼å‡ºç»Ÿä¸€çš„useStoreæ–¹æ³•ï¼Œç»™ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨</li></ol>\n<p><strong>ä»£ç å®ç°</strong></p>\n<blockquote>\n<p>é¡¹ç›®ç»“æ„</p>\n<pre><code>src\nâ”œâ”€App.jsx\nâ”œâ”€index.js\nâ”œâ”€store\n|   â”œâ”€count.Store.js\n|   â”œâ”€index.js\n|   â””list.Store.js\nâ”œâ”€components\n|     â”œâ”€Count.jsx\n|     â””List.jsx\n</code></pre>\n</blockquote>\n<p>/src/store/count.Store.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> makeAutoObservable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx'</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CountStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  count <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function-variable function\">addCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> CountStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>/src/store/list.Store.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> makeAutoObservable <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"mobx\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ListStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token function\">makeAutoObservable</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'react'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'vue'</span><span class=\"token punctuation\">]</span>\n  <span class=\"token function-variable function\">changeList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'angular'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> ListStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>/src/store/index.js</p>\n<pre><code class=\"prism language-js\"><span class=\"token comment\">// ç»„åˆå­æ¨¡å— å°è£…ç»Ÿä¸€å¯¼å‡ºçš„ä¾›ç»„ä»¶ä½¿ç”¨çš„æ–¹æ³•</span>\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{<!-- --></span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> CountStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./count.Store\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> ListStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./list.Store\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RootStore</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n    <span class=\"token comment\">// å¯¹å­æ¨¡å—è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ</span>\n    <span class=\"token comment\">// å°†æ¥å®ä¾‹åŒ–rootstoreçš„æ—¶å€™ï¼Œrootstoreå®ä¾‹ä¸Šæœ‰ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«å­˜æ”¾äº†å­æ¨¡å—çš„ä¸¤ä¸ªå®ä¾‹ã€‚</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>countStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CountStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>listStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ListStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// ä½¿ç”¨react contextæœºåˆ¶ï¼Œå®Œæˆç»Ÿä¸€æ–¹æ³•å°è£…</span>\n\n<span class=\"token comment\">// 1.å®ä¾‹åŒ–rootStoreæ³¨å…¥context</span>\n<span class=\"token keyword\">const</span> rootStore <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RootStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> context <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span>rootStore<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 2.å¯¼å‡ºuseStoreæ–¹æ³•ï¼Œä¾›ç»„ä»¶é€šè¿‡è°ƒç”¨è¯¥æ–¹æ³•ä½¿ç”¨æ ¹å®ä¾‹</span>\n<span class=\"token comment\">// ä½œç”¨ï¼šé€šè¿‡useContextæ‹¿åˆ°rootStoreå®ä¾‹å¯¹è±¡ï¼Œç„¶åè¿”å›</span>\n<span class=\"token comment\">// åªè¦åœ¨ä¸šåŠ¡ç»„ä»¶ä¸­ è°ƒç”¨useStore() å°±å¯ä»¥æ‹¿åˆ° rootStoreå®ä¾‹å¯¹è±¡</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useStore</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{<!-- --></span> useStore <span class=\"token punctuation\">}</span>\n</code></pre>\n<p>ç»„ä»¶ä½¿ç”¨æ¨¡å—ä¸­çš„æ•°æ®</p>\n<pre><code class=\"prism language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> observer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'mobx-react-lite'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{<!-- --></span> useStore <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./store'</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{<!-- --></span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{<!-- --></span> countStore <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">&gt;</span>\n      <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{<!-- --></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> countStore<span class=\"token punctuation\">.</span><span class=\"token function\">addCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&gt;</span>\n        <span class=\"token punctuation\">{<!-- --></span>countStore<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">&gt;</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// åŒ…è£¹ç»„ä»¶è®©è§†å›¾å“åº”æ•°æ®å˜åŒ–</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">observer</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span>\n</code></pre>\n<h1><a id=\"Mobx___322\"></a>Mobx - æ€»ç»“</h1>\n<ol><li> <p>åˆå§‹åŒ–Mobxçš„è¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ</p>\n<blockquote>\n<p>å£°æ˜æ•°æ® -&gt; å“åº”å¼å¤„ç† -&gt; å®šä¹‰actionå‡½æ•° -&gt; å®ä¾‹åŒ–å¯¼å‡º</p>\n</blockquote> </li><li> <p>Mobxå¦‚ä½•é…åˆreactï¼Œéœ€è¦ä¾èµ–ä»€ä¹ˆåŒ…ï¼Ÿ</p>\n<blockquote>\n<p>mobx-react-liteä½œä¸ºè¿æ¥åŒ…ï¼Œå¯¼å‡º<code>observer</code>æ–¹æ³•ï¼ŒåŒ…è£¹ç»„ä»¶</p>\n</blockquote> </li><li> <p>æ¨¡å—åŒ–è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>\n<blockquote>\n<p>ç»´æŠ¤æ€§é—®é¢˜</p>\n</blockquote> </li><li> <p>å¦‚ä½•å®ç°Mobxçš„æ¨¡å—åŒ–ï¼Ÿ</p>\n<blockquote>\n<p>æŒ‰ç…§åŠŸèƒ½æ‹†åˆ†storeæ¨¡å—ï¼Œæ ¹æ¨¡å—ä¸­ç»„åˆå­æ¨¡å—ï¼Œåˆ©ç”¨<code>context</code>æœºåˆ¶ä¾èµ–æ³¨å…¥</p>\n</blockquote> </li></ol>\n<blockquote>\n<p>ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œå•¦ï¼Œæ„Ÿè°¢æ‚¨çš„è§‚çœ‹ï¼Œä¸‹ç¯‡æ–‡ç« å°†ä¼šä½¿ç”¨Mobxå®Œæˆä¸€ä¸ªå°æ¡ˆä¾‹ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥è®¢é˜…æœ¬ä¸“æ ä»¥è·å–æœ€æ–°çš„æ–‡ç« åŠ¨æ€å“Ÿï½</p>\n</blockquote>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}