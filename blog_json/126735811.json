{"blogid": "126735811", "writerAge": "码龄1年", "writerBlogNum": "215", "writerCollect": "547", "writerComment": "19", "writerFan": "192", "writerGrade": "5级", "writerIntegral": "2280", "writerName": "孤城286", "writerProfileAdress": "writer_image\\profile_126735811.jpg", "writerRankTotal": "9120", "writerRankWeekly": "5002", "writerThumb": "115", "writerVisitNum": "197778", "blog_read_count": "14", "blog_time": "已于 2022-09-07 16:03:51 修改", "blog_title": "OPSF高级特性 —— 路由聚合（汇总）", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p id=\"main-toc\"><strong>目录</strong></p>\n<p id=\"%E4%B8%80%E3%80%81%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E5%9B%BE%E8%A7%A3%EF%BC%9A-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%80%E3%80%81%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E5%9B%BE%E8%A7%A3%EF%BC%9A\"> 一、路由聚合图解：</a></p>\n<p id=\"%E4%BA%8C%E3%80%81%E5%81%9A%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E7%9A%84%E4%BC%98%E5%8A%BF%3A-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%BA%8C%E3%80%81%E5%81%9A%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E7%9A%84%E4%BC%98%E5%8A%BF%3A\">二、做路由聚合的优/缺点+应用:</a></p>\n<p id=\"%E4%B8%89%E3%80%81OSPF%E9%87%8C%E9%9D%A2%E5%AF%B9%E8%B7%AF%E7%94%B1%E6%B1%87%E8%81%9A%2C%E5%8F%AA%E8%83%BD%E5%9C%A8%E4%B8%A4%E4%B8%AA%E5%9C%B0%E6%96%B9%E5%81%9A-toc\" style=\"margin-left:0px;\"><a href=\"#%E4%B8%89%E3%80%81OSPF%E9%87%8C%E9%9D%A2%E5%AF%B9%E8%B7%AF%E7%94%B1%E6%B1%87%E8%81%9A%2C%E5%8F%AA%E8%83%BD%E5%9C%A8%E4%B8%A4%E4%B8%AA%E5%9C%B0%E6%96%B9%E5%81%9A\">三、OSPF里面对路由汇聚,只能在两个地方做</a></p>\n<p id=\"%EF%BC%88%EF%BC%91%EF%BC%89ABR%3A%E4%BB%85%E9%92%88%E5%AF%B9%E6%9C%AC%E5%8C%BA%E5%9F%9F%E5%9F%9F%E5%86%85%E8%B7%AF%E7%94%B1%EF%BC%88%E4%BB%A5O%E5%BC%80%E5%A4%B4%E7%9A%84%E8%B7%AF%E7%94%B1%EF%BC%89%E5%81%9A%E6%B1%87%E6%80%BB%EF%BC%8C%E6%9C%AC%E5%8C%BA%E5%9F%9F%E7%9A%84O%EF%BC%A9A%E7%9A%84%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%E6%B2%A1%E6%9C%89%E5%8A%9E%E6%B3%95%E6%B1%87%E6%80%BB-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%88%EF%BC%91%EF%BC%89ABR%3A%E4%BB%85%E9%92%88%E5%AF%B9%E6%9C%AC%E5%8C%BA%E5%9F%9F%E5%9F%9F%E5%86%85%E8%B7%AF%E7%94%B1%EF%BC%88%E4%BB%A5O%E5%BC%80%E5%A4%B4%E7%9A%84%E8%B7%AF%E7%94%B1%EF%BC%89%E5%81%9A%E6%B1%87%E6%80%BB%EF%BC%8C%E6%9C%AC%E5%8C%BA%E5%9F%9F%E7%9A%84O%EF%BC%A9A%E7%9A%84%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%E6%B2%A1%E6%9C%89%E5%8A%9E%E6%B3%95%E6%B1%87%E6%80%BB\">（１）ABR:仅针对本区域域内路由（以O开头的域内路由）做汇总，本区域的OＩA的域间路由没有办法汇总</a></p>\n<p id=\"%E9%85%8D%E7%BD%AE%EF%BC%9A-toc\" style=\"margin-left:80px;\"><a href=\"#%E9%85%8D%E7%BD%AE%EF%BC%9A\">——配置：</a></p>\n<p id=\"%EF%BC%88%EF%BC%92%EF%BC%89ASBR%3A%E9%92%88%E5%AF%B9%E9%87%8D%E5%88%86%E5%8F%91%E8%BF%9B%E6%9D%A5%E7%9A%84%E5%A4%96%E9%83%A8%E8%B7%AF%E7%94%B1%E5%81%9A%E8%B7%AF%E7%94%B1%E6%B1%87%E6%80%BB-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%88%EF%BC%92%EF%BC%89ASBR%3A%E9%92%88%E5%AF%B9%E9%87%8D%E5%88%86%E5%8F%91%E8%BF%9B%E6%9D%A5%E7%9A%84%E5%A4%96%E9%83%A8%E8%B7%AF%E7%94%B1%E5%81%9A%E8%B7%AF%E7%94%B1%E6%B1%87%E6%80%BB\">（２）ASBR:针对重分发进来的外部路由做路由汇总</a></p>\n<p id=\"%E2%80%94%E2%80%94%E9%85%8D%E7%BD%AE%EF%BC%9A-toc\" style=\"margin-left:80px;\"><a href=\"#%E2%80%94%E2%80%94%E9%85%8D%E7%BD%AE%EF%BC%9A\">——配置：</a></p>\n<p id=\"%E5%9B%9B%E3%80%81%E5%9C%B0%E5%9D%80%E6%B1%87%E6%80%BB%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%9A-toc\" style=\"margin-left:0px;\"><a href=\"#%E5%9B%9B%E3%80%81%E5%9C%B0%E5%9D%80%E6%B1%87%E6%80%BB%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%9A\">四、ip地址（聚合）汇总计算方法：</a></p>\n<p id=\"%EF%BC%88%EF%BC%91%EF%BC%89%E7%AE%80%E5%8D%95%E7%9A%84%20%EF%BC%8C%E5%90%8C%E4%B8%80%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB%E2%80%8B-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%88%EF%BC%91%EF%BC%89%E7%AE%80%E5%8D%95%E7%9A%84%20%EF%BC%8C%E5%90%8C%E4%B8%80%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB%E2%80%8B\">（１）简单的 ，同一子网的汇总​编辑</a></p>\n<p id=\"%EF%BC%88%EF%BC%92%EF%BC%89%E5%A4%8D%E6%9D%82%E7%82%B9%E7%9A%84%EF%BC%8C%E4%B8%8D%E5%90%8C%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB-toc\" style=\"margin-left:80px;\"><a href=\"#%EF%BC%88%EF%BC%92%EF%BC%89%E5%A4%8D%E6%9D%82%E7%82%B9%E7%9A%84%EF%BC%8C%E4%B8%8D%E5%90%8C%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB\">（２）复杂的，不同子网的汇总</a></p>\n<hr id=\"hr-toc\"/>\n<p></p>\n<h1 id=\"%E4%B8%80%E3%80%81%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E5%9B%BE%E8%A7%A3%EF%BC%9A\"><strong><span style=\"background-color:#cbe0f1;\"> 一、路由聚合图解：</span></strong></h1>\n<p><img alt=\"\" src=\"image\\0256ef1fb3c14304bc0dc77bbac5605b.png\"/></p>\n<p><strong><span style=\"background-color:#a2e043;\"> ———————————————————————————————————————————————————————</span></strong></p>\n<h1 id=\"%E4%BA%8C%E3%80%81%E5%81%9A%E8%B7%AF%E7%94%B1%E8%81%9A%E5%90%88%E7%9A%84%E4%BC%98%E5%8A%BF%3A\"><strong><span style=\"background-color:#cbe0f1;\">二、做路由聚合的优/缺点+应用:</span></strong></h1>\n<ul><li><span style=\"color:#fe2c24;\"><strong>（１）针对明细路由做汇总可以有效地减少OSPF路由器的数据库条目也就是路由表条目，合理的节省了设备性能</strong></span></li><li><span style=\"color:#fe2c24;\"><strong>（２）可以隐藏明细路由不稳定所造成的路由震荡问题</strong></span></li><li><span style=\"color:#fe2c24;\"><strong>（３）在 双出口做路由聚合时，有一个做，有一个没做会影响到路由选路</strong></span></li><li><span style=\"color:#fe2c24;\"><strong>（4）一般分支公司通往总公司的路由一般都要聚合</strong></span></li></ul>\n<p><strong><span style=\"background-color:#a2e043;\"> ———————————————————————————————————————————————————————</span></strong> </p>\n<h1 id=\"%E4%B8%89%E3%80%81OSPF%E9%87%8C%E9%9D%A2%E5%AF%B9%E8%B7%AF%E7%94%B1%E6%B1%87%E8%81%9A%2C%E5%8F%AA%E8%83%BD%E5%9C%A8%E4%B8%A4%E4%B8%AA%E5%9C%B0%E6%96%B9%E5%81%9A\"><strong><span style=\"background-color:#cbe0f1;\">三、OSPF里面对路由汇聚,只能在两个地方做</span></strong></h1>\n<h3 id=\"%EF%BC%88%EF%BC%91%EF%BC%89ABR%3A%E4%BB%85%E9%92%88%E5%AF%B9%E6%9C%AC%E5%8C%BA%E5%9F%9F%E5%9F%9F%E5%86%85%E8%B7%AF%E7%94%B1%EF%BC%88%E4%BB%A5O%E5%BC%80%E5%A4%B4%E7%9A%84%E8%B7%AF%E7%94%B1%EF%BC%89%E5%81%9A%E6%B1%87%E6%80%BB%EF%BC%8C%E6%9C%AC%E5%8C%BA%E5%9F%9F%E7%9A%84O%EF%BC%A9A%E7%9A%84%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%E6%B2%A1%E6%9C%89%E5%8A%9E%E6%B3%95%E6%B1%87%E6%80%BB\"><strong><span style=\"background-color:#eaf4fc;\">（１）<span style=\"color:#fe2c24;\">ABR:</span>仅针对本区域域内路由（<span style=\"color:#fe2c24;\">以O开头的域内路由</span>）做汇总，本区域的OＩA的域间路由没有办法汇总</span></strong></h3>\n<p><img alt=\"\" src=\"image\\4814257137e048aba436da7983748438.png\"/></p>\n<h3 id=\"%E9%85%8D%E7%BD%AE%EF%BC%9A\"><strong><span style=\"background-color:#eaf4fc;\">——配置：</span></strong></h3>\n<pre><code>——对区域2里面的域内路由做汇总\n\nABR(config) #router os 100\nABR(config-router) #area　2 range 192.168.0.0 255.255.248.0\nABR(config-router) ＃exit\n\n注：\narea area-id range ip-address mask  not-advertise\n-（不通告，就是抑制他，过滤LSA-3。路由聚合只针对域内路由做聚合，不能针对区域间路由做聚合）</code></pre>\n<p><span style=\"color:#fe2c24;\"><strong>—————————————————————————————————————————————————————— </strong></span></p>\n<h3 id=\"%EF%BC%88%EF%BC%92%EF%BC%89ASBR%3A%E9%92%88%E5%AF%B9%E9%87%8D%E5%88%86%E5%8F%91%E8%BF%9B%E6%9D%A5%E7%9A%84%E5%A4%96%E9%83%A8%E8%B7%AF%E7%94%B1%E5%81%9A%E8%B7%AF%E7%94%B1%E6%B1%87%E6%80%BB\"><strong><span style=\"background-color:#eaf4fc;\">（２）<span style=\"color:#fe2c24;\">ASBR</span>:针对<span style=\"color:#fe2c24;\">重分发进来的外部路由</span>做路由汇总</span></strong></h3>\n<h3 id=\"%E2%80%8B\"><img alt=\"\" src=\"image\\f25a7c45435048a4bbec68ef75256719.png\"/></h3>\n<h3 id=\"%E2%80%94%E2%80%94%E9%85%8D%E7%BD%AE%EF%BC%9A\"><strong><span style=\"background-color:#eaf4fc;\">——配置：</span></strong></h3>\n<pre><code>ASBR(config)#router os 100\nASBR(config-router)#summary-address 172.16.0.0 255.255.248.0\nASBR(config-router) #exit\n</code></pre>\n<p><strong><span style=\"background-color:#a2e043;\"> ———————————————————————————————————————————————————————</span></strong> </p>\n<h1 id=\"%E5%9B%9B%E3%80%81%E5%9C%B0%E5%9D%80%E6%B1%87%E6%80%BB%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%EF%BC%9A\"><span style=\"background-color:#cbe0f1;\">四、ip地址（聚合）汇总计算方法：</span></h1>\n<h3 id=\"%EF%BC%88%EF%BC%91%EF%BC%89%E7%AE%80%E5%8D%95%E7%9A%84%20%EF%BC%8C%E5%90%8C%E4%B8%80%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB%E2%80%8B\"><strong><span style=\"background-color:#eaf4fc;\">（１）简单的 ，同一子网的汇总</span></strong><img alt=\"\" src=\"image\\38d861d08b72453eaf07cac52c6c128f.png\"/></h3>\n<p> <strong>判断第几位发生变化，转换成二进制　，将不变的位保留下来作为子网掩码的位数= 16+5=21你也可以算变化的位 24-3=21，变化的位全部值0 那么这个时候的网络地址就是汇总后的地址<br/> 192.168.00000000.0/21=192.168.0.0/21（255.255.248.0）</strong></p>\n<p><span style=\"color:#fe2c24;\"><strong>—————————————————————————————————————————————————————— </strong></span> </p>\n<h3 id=\"%EF%BC%88%EF%BC%92%EF%BC%89%E5%A4%8D%E6%9D%82%E7%82%B9%E7%9A%84%EF%BC%8C%E4%B8%8D%E5%90%8C%E5%AD%90%E7%BD%91%E7%9A%84%E6%B1%87%E6%80%BB\"><strong><span style=\"background-color:#eaf4fc;\">（２）复杂的，不同子网的汇总</span></strong></h3>\n<p><img alt=\"\" src=\"image\\6cf5de3fbb3146c9afe676f29379ed65.png\"/></p>\n<p><strong>首先判断是第几段的地址位发生变化，后面的可以忽略，汇总成这个段的地址的主网络号，其次使用上面简单的处理方法 ，汇总后 子网为8+1=9 或者16-7=9</strong><br/>  </p>\n<p><strong>子网掩码计算：</strong><a href=\"https://blog.csdn.net/weixin_43314519/article/details/109114960?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164490016916780271941458%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=164490016916780271941458&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-109114960.first_rank_v2_pc_rank_v29&amp;utm_term=%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E8%AE%A1%E7%AE%97&amp;spm=1018.2226.3001.4187\" title=\"(4条消息) 一文搞定子网划分！子网掩码！超详细例题解析！_Viper的程序员修炼手册-CSDN博客_划分子网掩码例题\">(4条消息) 一文搞定子网划分！子网掩码！超详细例题解析！_Viper的程序员修炼手册-CSDN博客_划分子网掩码例题</a></p>\n</div>\n</div>"}