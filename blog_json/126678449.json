{"blogid": "126678449", "writerAge": "码龄1年", "writerBlogNum": "335", "writerCollect": "2178", "writerComment": "205", "writerFan": "847", "writerGrade": "5级", "writerIntegral": "4473", "writerName": "小熊猫爱恰饭", "writerProfileAdress": "writer_image\\profile_126678449.jpg", "writerRankTotal": "3894", "writerRankWeekly": "81", "writerThumb": "517", "writerVisitNum": "201618", "blog_read_count": "223", "blog_time": "于 2022-09-03 16:24:40 发布", "blog_title": "手把手教你Python如何抓包~【异常详细版】", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"markdown_views prism-atom-one-light\" id=\"content_views\">\n<svg style=\"display: none;\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5,0 0,2.5 5,5z\" id=\"raphael-marker-block\" stroke-linecap=\"round\" style=\"-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\"></path>\n</svg>\n<h2><a id=\"_0\"></a>嗨害大家好鸭！我是小熊猫❤</h2>\n<p>很多小伙伴在后台问我：</p>\n<blockquote>\n<p><mark><strong>数据来源怎么找啊，怎么抓包？</strong></mark></p>\n</blockquote>\n<p>其实很简单，多操作几遍就记住啦~ ~～</p>\n<p>今天咱们通过三个案例来展示一下</p>\n<blockquote>\n<p><strong>有什么python相关报错解答自己不会的、或者源码资料/模块安装/<s><mark>女装大佬精通技巧</mark></s> 都可以来这里：（<a href=\"https://jq.qq.com/?_wv=1027&amp;k=2Q3YTfym\">https://jq.qq.com/?_wv=1027&amp;k=2Q3YTfym</a>）或者+V：python10010问我</strong></p>\n</blockquote>\n<hr/>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\115c52aab5bb4c48ba08e3b96c3348f4.png\"/></p>\n<h1><a id=\"_18\"></a>某牙直播抓包</h1>\n<p>首先咱们进入目标网页，</p>\n<p>随便找一个视频，通过开发者工具抓包分析。</p>\n<p>首先按 <mark>F12</mark> 或者点击右键选择检查，打开开发者工具，<br/> 依次选择<mark>network（网络面板）</mark> →<mark>AII</mark>（全部）</p>\n<p>然后<mark>刷新网页</mark>，让当前网页内容重新加载出来。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\fcc4568ecfb14689bb7c345908ac442e.png\"/><br/> 以前是可以直接选择 <mark>media</mark> （媒体文件）就能看到了，</p>\n<p>现在不行了，所以说，<mark>互联网更新迭代很快</mark>，网站经常更新，</p>\n<p><mark><strong>技术也需要时刻准备更新</strong></mark>，我们也是学习不能停，一停就落伍。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\265fb0b6d4984244889215803f0f414a.png\"/><br/> 但是刷新后的数据太多，我们如何确定哪一条是咱们的目标呢？</p>\n<p>以当前某牙为例， 视频改成了<mark>m3u8格式</mark>，</p>\n<p>它会把完整视频分成很多个视频片段，</p>\n<p>这些ts文件都是m3u8格式视频片段。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\a7032a414f284876a5eb38971ee7fca1.png\"/><br/> 我们把 <mark>URL</mark> 复制到新窗口打开，</p>\n<p>它就直接把片段下载下来了。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\bb04ace7dd62410cb65927dbe11321ed.png\"/><br/> 我们完整的视频是2.26分，但是每一个片段只有几秒钟。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\da3712c39c894383bf0f1efe6d28e08d.png\"/><br/> 那么计算一下，平均一个五秒，2.26分差不多要17个视频，还得自己手动合并，多麻烦。</p>\n<p>但是它有一个专门的m3u8格式的文件，保存了所有的ts文件内容。</p>\n<p>我们直接点击左上角搜索框，</p>\n<p>直接搜索 <mark>m3u8</mark> ,然后看到一个get开头的文件，</p>\n<p>点击它，再点击<mark>preview</mark>（预览数据） ，</p>\n<p>视频的标题等信息都可以看到。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\c188b479e45642e3b507448798ea76fc.png\"/><br/> 找到这个 <mark>definitions</mark> 展开 ，m3u8的视频就在里面了，原画、超清、流畅。</p>\n<p>可以看到，它也有完整的url地址在这，<mark>可以直接用</mark>。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\263ccf039b9f481c8b0ecb29d7534978.png\"/></p>\n<p>咱们来注释一下~ ~ ~</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\5497c150f68d4497b8431291f950a87c.png\"/></p>\n<p>这是直播视频的数据查找方式</p>\n<p>接下来看看微博视频</p>\n<hr/>\n<p><img alt=\"在这里插入图片描述\" src=\"image\\db34505a146f438c8e0e6f42d4b6c635.png\"/></p>\n<h1><a id=\"_86\"></a>某博抓包</h1>\n<p>第一步详细介绍，后面就不做太多截图一一展示了，</p>\n<p>只展示大概流程了，所以如果忘了，建议多看看第一步的，</p>\n<p>当然，两个网站之间不一样的地方，我都会一一截图展示。</p>\n<p>确定目标网址，打开一个视频播放页面。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\d37a9a524dec4bf699257672579310d9.png\"/><br/> <img alt=\"请添加图片描述\" src=\"image\\c67decccd0054536861b58ac48dfe9cb.png\"/><br/> 有点过份暴露（不知道平台让不让我放 大家要是没看见…懂得都懂啊…）</p>\n<p>对于绝大部分网站来说，</p>\n<p>他的第一个数据包就是当前网页。</p>\n<p>除了一少部分特殊网址不一样。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\e25c66b69806490aa8e44fe269b888ef.png\"/><br/> 今天的目标它的视频不一定在第一个网页源代码中，即使复制了url能进入，也还是不一定在。</p>\n<p>因为有一些数据，它是会动态加载的，或者说不在同一个数据包里面。</p>\n<p>第二种方法，我们把当前目标的标题复制到搜索框，然后回车，当然，也有可能搜不到。</p>\n<p>第三种方法，我们直接点击 fetch/XHR 动态数据抓包，这里面是实时加载的。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\6aba6d6168db4d6aa62168e9dc46bae8.png\"/><br/> 我真的会谢，视频又没了…</p>\n<p>算了，我再找新的吧。</p>\n<p>我们可以看到，左边有那么多数据，那么谁才是我们需要的呢？</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\5aec088a9406470491f80d58d4bb430c.png\"/><br/> 这时候需要我们一个个点，一般是这两个，有时候也不一定，所以需要一个个点。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\538f0639ae704c59a0624281082c6d6d.png\"/><br/> 然后点击右边的倒三角，一一展开，往下拉，找到这个urls，就可以看到视频地址了，各个清晰度的都有。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\1329f3da3f37453692220d3c151fbc58.png\"/><br/> 然后视频的ID 、标题等等都在这里。</p>\n<p>为什么说要一个个点，你看这两个长得一样的， 我刚刚点的是第一个，现在看看第二个。</p>\n<p>这里面都是右边推荐栏的封面，标题，视频id等等。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\648ec3cdb7c94827b997ebc8d96d8e3b.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\74c49f370c7f465e97eb08149bdd4aa9.png\"/></p>\n<hr/>\n<h1><a id=\"_142\"></a>某手短视频抓包</h1>\n<p>接下来来到某手，这次咱们正经一点，找个正经的视频来示范。</p>\n<p>我们直接进入主页（<mark>平台原因发不了图… 懂的都懂</mark>）</p>\n<p>还是一样的操作，打开开发者工具，点开network，刷新，选择AII 。</p>\n<p>这次咱们直接复制这个小姐姐的名字搜索</p>\n<p>搜索之后，这里有两个一样的选项，咱们需要一个个点击打开看看，确定哪一个是咱们需要的。</p>\n<p>一个是博主的ID简介等等，另外一个就是视频的数据了。</p>\n<p>这里我直接点第一个graphql → preview 总共是21个视频，可以看到，下图最下方的protourl就是视频的url，photoH265Url 则是音频url 。</p>\n<p><img alt=\"请添加图片描述\" src=\"image\\fbb8089d9c7e4f45a63e364ecf0908ca.png\"/><br/> <img alt=\"在这里插入图片描述\" src=\"image\\74de6ea9e9a7421d9ecd5f944d81c9d0.png\"/><br/> 好了今天就这样吧~～～</p>\n<p>最近总是感觉很累…</p>\n<h2><a id=\"_164\"></a>我是小熊猫，咱下篇文章再见啦❤</h2>\n<p><img alt=\"请添加图片描述\" src=\"https://img-blog.csdnimg.cn/eb0de26f3d174ce2a9b98ef4b71b6485.gif\"/></p>\n</div>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-22a2fefd3b.css\" rel=\"stylesheet\"/>\n<link href=\"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-4f8fbf9108.css\" rel=\"stylesheet\"/>\n</div>"}