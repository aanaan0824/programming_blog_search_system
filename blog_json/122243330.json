{"blogid": "122243330", "writerAge": "码龄2年", "writerBlogNum": "163", "writerCollect": "925", "writerComment": "134", "writerFan": "5810", "writerGrade": "5级", "writerIntegral": "2628", "writerName": "桔子code", "writerProfileAdress": "writer_image\\profile_122243330.jpg", "writerRankTotal": "7340", "writerRankWeekly": "3673", "writerThumb": "371", "writerVisitNum": "332316", "blog_read_count": "17938", "blog_time": "于 2021-12-30 18:46:52 发布", "blog_title": "EasyOCR，识别图片中的文字真的so easy", "content": "<div class=\"article_content clearfix\" id=\"article_content\">\n<link href=\"style.css\" rel=\"stylesheet\"/>\n<div class=\"htmledit_views\" id=\"content_views\">\n<p><a href=\"http://www.juzicode.com/image-ocr-python-easyocr\" title=\"原文链接：http://www.juzicode.com/image-ocr-python-easyocr\">原文链接：http://www.juzicode.com/image-ocr-python-easyocr</a></p>\n<p>桔子菌之前在 <a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247485315&amp;idx=1&amp;sn=1b3eb8f82fee7170d858ad2d67b73646&amp;chksm=e93b9528de4c1c3e380357e6998fd41a6ec82ca4565fb69808089d6080ab3ccb404c093f49b9&amp;scene=21#wechat_redirect\" title=\"pytesseract提取识别图片中的文字\">pytesseract提取识别图片中的文字</a> 中介绍过怎么在Python中使用tesseract提取和识别图片中的文字，今天再来聊一聊EasyOcr，它也是一款非常优秀的OCR包，使用起来是相当地easy。</p>\n<h2>1、安装easyocr包</h2>\n<p>这里以windows系统为例，需要先安装pytorch，在<a href=\"https://pytorch.org/\" title=\"pytorch官网\">pytorch官网</a>可以根据语言版本、操作系统等信息找到安装方法：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"274\" src=\"image\\5d7f7323b442af0bc46bf5c05f3b1fa8.png\" width=\"684\"/></p>\n<pre><code>pip3 install torch torchvision torchaudio</code></pre>\n<p>安装easyocr：</p>\n<pre><code>pip3 install easyocr</code></pre>\n<p>安装完成后，可以通过easyocr.__version__查看版本号：</p>\n<pre><code>import easyocr\nprint(easyocr.__version__)</code></pre>\n<h2>2、安装检测模型、识别模型(语言包)</h2>\n<p>如果事先没有安装检测模型和识别模型，第一次执行脚本时会自动下载2种模型文件：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"109\" src=\"image\\f2592e6c74e2d22e8f338054a6190571.png\" width=\"1024\"/></p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"110\" src=\"image\\157806e71a164fa65189712f324dbbb7.png\" width=\"1024\"/></p>\n<p>这种方式下载速度较慢，而且容易出错导致下载中断，可以通过手动方式下载、安装。</p>\n<p>进入esayocr官网选择需要的模型下载（<a href=\"https://www.jaided.ai/easyocr/modelhub/\" title=\"Jaided AI: EasyOCR model hub\">Jaided AI: EasyOCR model hub</a>）。</p>\n<p>首先下载文本检测模型：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"310\" src=\"image\\b330d6a00525cc05f3c91c675aad3aae.png\" width=\"615\"/></p>\n<p>接下来下载识别模型，识别模型对应了各种语言包，下图是简体中文和英文的识别模型：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"327\" src=\"image\\10b5e807f6cddc616c36f5a1a062e316.png\" width=\"620\"/></p>\n<p>将下载的模型文件解压后拷贝到当前登录的用户目录的.EasyOCR\\model文件夹下，Windows系统为：C:\\Users\\yourname\\.EasyOCR\\model，其中yourname是登录用户名。</p>\n<p>【注】这里下载的识别模型（语言包）的文件名称和后面看到的语言类型并不是完全对应的，比如在代码中的语言类型ch_sim对应简体中文(zh_sim_g2)，en对应英文(english_g2)。</p>\n<p></p>\n<h2>3、使用方法</h2>\n<p>EsayOcr的使用正如其名非常地简单，就是2个步骤，第1步创建Reader()实例，第2步用readtxt()方法检测和识别。</p>\n<h3>创建Reader()实例</h3>\n<p>初始化Reader()实例的参数有：</p>\n<ul><li><strong>lang_list</strong> (list)：识别语言代码，比如[‘ch_sim’,’en’]分别表示简体中文和英文。</li><li><strong>gpu</strong> (bool, string, default = True) ：是否使能GPU，只有安装了GPU版本才有效。</li><li><strong>model_storage_directory</strong> (string, default = None) ：模型存储位置，依次查找系统变量EASYOCR_MODULE_PATH (preferred)、MODULE_PATH (if defined)表示的路径或者~/.EasyOCR/路径。</li><li><strong>download_enabled</strong> (bool, default = True)：如果没有对应模型文件时，自动下载模型。</li><li><strong>user_network_directory</strong> (bool, default = None) ：用户自定义识别网络的路径，如果没有指明，则在MODULE_PATH + ‘/user_network’ (~/.EasyOCR/user_network)目录中查找。</li><li><strong>recog_network</strong> (string, default = ‘standard’) ：替代标准模型，使用自定义的识别网络。</li><li><strong>detector</strong> (bool, default = True) ：是否加载检测模型。</li><li><strong>recognizer</strong> (bool, default = True) ：是否加载识别模型。</li></ul>\n<p>创建完实例后，识别文字就要用到其readtext()方法。</p>\n<h3>检测与识别readtext()方法</h3>\n<p>下面是一个最简单的应用例子，首先创建一个reader对象，传入要使用的语言包（识别模型），然后在reader对象的readtext方法中传入要识别的文件名称：</p>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"295\" src=\"image\\b7b64e19a18dac0837e63fc69ddb2b2d.png\" width=\"539\"/></p>\n<pre><code>#juzicode.com / vx:桔子code\nimport easyocr\nreader = easyocr.Reader(['ch_sim','en'])\nresult = reader.readtext('road-poetry.png')\nfor res in result:\n     print(res)</code></pre>\n<p>运行结果：</p>\n<pre><code>([[151, 101], [195, 101], [195, 149], [151, 149]], '西', 0.9816301184856115)\n([[569, 71], [635, 71], [635, 131], [569, 131]], '东', 0.9986620851098884)\n([[218, 92], [535, 92], [535, 191], [218, 191]], '诗和远方路', 0.8088406614287519)\n([[137, 217], [177, 217], [177, 257], [137, 257]], 'W', 0.8304899668428476)\n([[209, 217], [525, 217], [525, 257], [209, 257]], 'Poetry And The Places Afar Rd。', 0.40033782611925706)\n([[571, 207], [611, 207], [611, 251], [571, 251]], 'C', 0.1553293824532922)</code></pre>\n<p>readtext()方法返回一个元组，包含了多个元素，每个元素由识别到文字信息的边框，文字内容，可信度等3部分组成。</p>\n<p>除了前面例子中readtext()传入文件名称，也可以在readtext()方法中传入图像的numpy数组，比如用opencv读取图片文件得到的numpy数组：</p>\n<pre><code>#juzicode.com / vx:桔子code\nimport easyocr\nimport cv2\nreader = easyocr.Reader(['ch_sim','en'])\nimg = cv2.imread('road-poetry.png' ) \nresult = reader.readtext(img)\n\ncolor=(0,0,255)\nthick=3\nfor res in result:\n    print(res)\n    pos = res[0]\n    text = res[1]\n    for p in [(0,1),(1,2),(2,3),(3,0)]:\n        cv2.line(img,pos[p[0]],pos[p[1]],color,thick)\ncv2.imwrite('bx-road-poetry.jpg',img)</code></pre>\n<p>运行结果：</p>\n<pre><code>([[151, 101], [195, 101], [195, 149], [151, 149]], '西', 0.9805448761688105)\n([[569, 71], [635, 71], [635, 131], [569, 131]], '东', 0.9985224701960114)\n([[217, 91], [534, 91], [534, 194], [217, 194]], '诗和远方路', 0.8750403596327564)\n([[137, 217], [177, 217], [177, 257], [137, 257]], 'W', 0.7520859053705777)\n([[209, 217], [523, 217], [523, 257], [209, 257]], 'Poetry And The Places Afar Rd。', 0.3012721541954036)\n([[571, 207], [611, 207], [611, 251], [571, 251]], 'C', 0.15253169048338933)</code></pre>\n<p style=\"text-align:center;\"><img alt=\"\" height=\"315\" src=\"image\\a75e14430050e23b9c90e340cbbebaeb.png\" width=\"575\"/></p>\n<p>第3种方法是在readtext()中传入读出的原始字节内容，注意图片文件是以rb方式读出：</p>\n<pre><code>#juzicode.com / vx:桔子code\nimport easyocr\nreader = easyocr.Reader(['ch_sim','en'])\nwith open('road-poetry.png','rb') as pf:\n    img = pf.read()\n    result = reader.readtext(img)\n    for res in result:\n        print(res)</code></pre>\n<p>运行结果：</p>\n<pre><code>([[151, 101], [195, 101], [195, 149], [151, 149]], '西', 0.673960519698312)\n([[569, 71], [635, 71], [635, 131], [569, 131]], '东', 0.9128537192685862)\n([[218, 92], [535, 92], [535, 191], [218, 191]], '诗和远方路', 0.7941057755221305)\n([[137, 217], [177, 217], [177, 257], [137, 257]], 'W', 0.7182424534268108)\n([[209, 217], [525, 217], [525, 257], [209, 257]], 'Poetry And The Places Afar Rd。', 0.5591090091224509)\n([[571, 207], [611, 207], [611, 251], [571, 251]], 'C', 0.1532075452826911)</code></pre>\n<p>EasyOcr，so easy，你学废了吗？</p>\n<p></p>\n<p><strong>推荐阅读：</strong></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247485607&amp;idx=1&amp;sn=6e5aa3e2e60760afe29f9fabf8754089&amp;chksm=e93b9a0cde4c131a59512ed581f454e018f8f57f0e4bae0a5fd6bfa2bfe734f2073f6ae7e7d5&amp;scene=21#wechat_redirect\" title=\"模糊照片修复神器GFPGAN\">模糊照片修复神器GFPGAN</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247485179&amp;idx=1&amp;sn=c80409a0ff83776665635aa75a68fb6d&amp;chksm=e93b9450de4c1d462875e074264b2fac45267c94c45e4e410ee2a25aa126abc787507402be04&amp;scene=21#wechat_redirect\" title=\"新鲜上架的Python3.10，来个match-case尝尝鲜\">新鲜上架的Python3.10，来个match-case尝尝鲜</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247485650&amp;idx=1&amp;sn=3667d83a14c943645b88c6ee0800bd1b&amp;chksm=e93b9a79de4c136f03857f64e6443a6924aa6ae8f11c9ff16772276539f88c9aff5f259a5e72&amp;scene=21#wechat_redirect\" title=\"在Python中使用微信扫码功能\">在Python中使用微信扫码功能</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247485650&amp;idx=1&amp;sn=3667d83a14c943645b88c6ee0800bd1b&amp;chksm=e93b9a79de4c136f03857f64e6443a6924aa6ae8f11c9ff16772276539f88c9aff5f259a5e72&amp;scene=21#wechat_redirect\" title=\"一行代码深度定制你的专属二维码(amzqr)\">一行代码深度定制你的专属二维码(amzqr)</a></p>\n<p><a href=\"http://mp.weixin.qq.com/s?__biz=MzIzODM0MDAzNg==&amp;mid=2247484631&amp;idx=1&amp;sn=2b9726c0eb0968167878e9cf74ed96a9&amp;chksm=e93b967cde4c1f6aba5e8614d2783638177775c31b47106f05a0c324043469563157c1c9d821&amp;scene=21#wechat_redirect\" title=\"来看看怎么用OpenCV解构Twitter大牛的视觉错觉图\">来看看怎么用OpenCV解构Twitter大牛的视觉错觉图</a></p>\n<p></p>\n<p></p>\n</div>\n</div>"}